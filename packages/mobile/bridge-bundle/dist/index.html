<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><script>window.onerror=function(m,s,l,c,e){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:'error',message:m,stack:e&&e.stack}))}</script><script defer="defer">/*! For license information please see bridge.js.LICENSE.txt */
(()=>{var t={5556(t,e,n){"use strict";var r,i=n(8287).hp,s=Object.create,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},h=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of c(e))u.call(t,i)||i===n||a(t,i,{get:()=>e[i],enumerable:!(r=o(e,i))||r.enumerable});return t},f=(t,e,n)=>(h(t,e,"default"),n&&h(n,e,"default")),p=(t,e,n)=>(n=null!=t?s(l(t)):{},h(!e&&t&&t.__esModule?n:a(n,"default",{value:t,enumerable:!0}),t)),g={};d(g,{AbiParser1:()=>Dr,AbiParser2:()=>Lr,AbiParserInterface:()=>dr,Account:()=>hc,AccountInterface:()=>fc,BatchClient:()=>le,BlockStatus:()=>jt,BlockTag:()=>Yt,CairoByteArray:()=>Er,CairoBytes31:()=>hr,CairoCustomEnum:()=>ir,CairoFelt:()=>mn,CairoFelt252:()=>bn,CairoFixedArray:()=>Mr,CairoInt128:()=>Rr,CairoInt16:()=>xr,CairoInt32:()=>Br,CairoInt64:()=>Cr,CairoInt8:()=>kr,CairoOption:()=>ar,CairoOptionVariant:()=>sr,CairoResult:()=>cr,CairoResultVariant:()=>or,CairoUint128:()=>Ir,CairoUint16:()=>Ar,CairoUint256:()=>In,CairoUint32:()=>wr,CairoUint512:()=>Cn,CairoUint64:()=>Tr,CairoUint8:()=>vr,CairoUint96:()=>Sr,CallData:()=>ni,Contract:()=>Fc,ContractInterface:()=>Vc,Deployer:()=>cc,DeployerInterface:()=>lc,EDAMode:()=>Ut,EDataAvailabilityMode:()=>Pt,ETH_ADDRESS:()=>Xt,ETransactionExecutionStatus:()=>Mt,ETransactionStatus:()=>Ht,ETransactionVersion:()=>Nt,ETransactionVersion2:()=>Dt,ETransactionVersion3:()=>Lt,EntryPointType:()=>Ot,EthSigner:()=>Co,Int:()=>Wt,LedgerSigner:()=>Ro,LedgerSigner111:()=>Ro,LedgerSigner221:()=>Fo,LedgerSigner231:()=>Ho,LibraryError:()=>gr,Literal:()=>Zt,LogLevelIndex:()=>Bt,NON_ZERO_PREFIX:()=>Jt,OutsideExecutionTypesV1:()=>te,OutsideExecutionTypesV2:()=>ee,OutsideExecutionVersion:()=>ne,PaymasterInterface:()=>ac,PaymasterRpc:()=>sc,Provider:()=>wo,ProviderInterface:()=>Eo,RPC:()=>m,RPC08:()=>Rt,RPC09:()=>Js,RPCResponseParser:()=>sa,ReceiptTx:()=>ga,ResponseParser:()=>Hc,RpcChannel:()=>ta,RpcError:()=>yr,RpcProvider:()=>wo,Signer:()=>To,SignerInterface:()=>Ao,Subscription:()=>ra,TimeoutError:()=>mr,TransactionExecutionStatus:()=>zt,TransactionFinalityStatus:()=>qt,TransactionType:()=>$t,TypedDataRevision:()=>m.TypedDataRevision,UINT_128_MAX:()=>_n,UINT_128_MIN:()=>Bn,UINT_256_HIGH_MAX:()=>An,UINT_256_HIGH_MIN:()=>Sn,UINT_256_LOW_MAX:()=>vn,UINT_256_LOW_MIN:()=>Tn,UINT_256_MAX:()=>wn,UINT_256_MIN:()=>En,UINT_512_MAX:()=>kn,UINT_512_MIN:()=>xn,Uint:()=>Kt,ValidateType:()=>Gt,WalletAccount:()=>xc,WebSocketChannel:()=>ia,WebSocketNotConnectedError:()=>br,addAddressPadding:()=>Do,byteArray:()=>hn,cairo:()=>gn,config:()=>xt,constants:()=>y,contractClassResponseToLegacyCompiledContract:()=>_s,createAbiParser:()=>Pr,createTransactionReceipt:()=>ma,defaultDeployer:()=>uc,defaultPaymaster:()=>oc,defaultProvider:()=>vo,ec:()=>Ei,encode:()=>A,eth:()=>ws,events:()=>Bc,extractContractHashes:()=>bs,fastParsingStrategy:()=>Nr,getAbiVersion:()=>Ur,getChecksumAddress:()=>Po,getGasPrices:()=>Va,getLedgerPathBuffer:()=>Oo,getLedgerPathBuffer111:()=>Oo,getLedgerPathBuffer221:()=>Vo,getTipStatsFromBlocks:()=>pa,hash:()=>ri,hdParsingStrategy:()=>Or,isAccount:()=>Qt,isNoConstructorValid:()=>Fr,isPendingBlock:()=>Rs,isPendingStateUpdate:()=>Ns,isPendingTransaction:()=>Os,isRPC08Plus_ResourceBounds:()=>Ft,isRPC08Plus_ResourceBoundsBN:()=>Vt,isSierra:()=>ms,isSupportedSpecVersion:()=>xs,isV3Tx:()=>Is,isVersion:()=>ks,json:()=>re,legacyDeployer:()=>dc,logger:()=>Ct,merkle:()=>_a,num:()=>de,outsideExecution:()=>Mo,parseCalldataField:()=>qr,paymaster:()=>Xo,provider:()=>Ss,selector:()=>qe,shortString:()=>en,src5:()=>Wo,stark:()=>Zi,starknetId:()=>$a,toAnyPatchVersion:()=>Bs,toApiVersion:()=>Cs,transaction:()=>js,typedData:()=>ba,uint256:()=>Io,units:()=>Mc,v2hash:()=>wi,v3hash:()=>si,validateAndParseAddress:()=>Lo,validateChecksumAddress:()=>Uo,verifyMessageInStarknet:()=>Fa,wallet:()=>pc}),t.exports=(r=g,h(a({},"__esModule",{value:!0}),r));var y={};d(y,{ADDR_BOUND:()=>J,API_VERSION:()=>W,BaseUrl:()=>_t,DEFAULT_GLOBAL_CONFIG:()=>Tt,HARDENING_4BYTES:()=>bt,HARDENING_BYTE:()=>mt,IS_BROWSER:()=>S,LegacyUDC:()=>ht,MASK_250:()=>G,MASK_31:()=>K,MAX_STORAGE_ITEM_SIZE:()=>X,NetworkName:()=>wt,OutsideExecutionCallerAny:()=>pt,PAYMASTER_RPC_NODES:()=>It,PRIME:()=>Z,RANGE_FELT:()=>tt,RANGE_I128:()=>dt,RANGE_I16:()=>ct,RANGE_I32:()=>lt,RANGE_I64:()=>ut,RANGE_I8:()=>ot,RANGE_U128:()=>at,RANGE_U16:()=>nt,RANGE_U32:()=>rt,RANGE_U64:()=>it,RANGE_U8:()=>et,RANGE_U96:()=>st,RPC_DEFAULT_NODES:()=>St,SNIP9_V1_INTERFACE_ID:()=>gt,SNIP9_V2_INTERFACE_ID:()=>yt,SYSTEM_MESSAGES:()=>kt,StarknetChainId:()=>Et,SupportedRpcVersion:()=>At,TEXT_TO_FELT_MAX_LEN:()=>z,TransactionHashPrefix:()=>vt,UDC:()=>ft,ZERO:()=>Y});var m={};d(m,{JRPC:()=>b,PAYMASTER_API:()=>E.PAYMASTER_API,RPCSPEC08:()=>_,RPCSPEC09:()=>w});var b={},_=p(n(5319)),w=p(n(2066)),E=n(5319),v={};f(v,n(2066)),f(m,v);var A={};d(A,{IS_BROWSER:()=>S,addHexPrefix:()=>D,arrayBufferToString:()=>I,atobUniversal:()=>C,bigIntToUint8Array:()=>j,btoaUniversal:()=>R,buf2hex:()=>O,calcByteLength:()=>P,concatenateArrayBuffer:()=>H,hexStringToUint8Array:()=>M,padLeft:()=>L,pascalToSnake:()=>V,removeHexPrefix:()=>N,sanitizeBytes:()=>U,sanitizeHex:()=>F,stringToUint8Array:()=>$,uint8ArrayToBigInt:()=>q,utf8ToArray:()=>x,utf8ToBigInt:()=>B,utf8ToUint8Array:()=>k});var T=n(3203),S="undefined"!=typeof window;function I(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function k(t){return(new TextEncoder).encode(t)}var x=k;function B(t){return q(k(t))}function C(t){return T.base64.decode(t)}function R(t){return T.base64.encode(new Uint8Array(t))}function O(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function N(t){return t.replace(/^0x/i,"")}function D(t){return`0x${N(t)}`}function L(t,e,n="0"){return function(t,e,n,r="0"){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function P(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function U(t,e=8,n="0"){return L(t,P(t,e),n)}function F(t){const e=U(N(t),2);return e?D(e):e}var V=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function H(t){const e=t.reduce((t,e)=>t+e.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(t,r),r+=t.byteLength}),n}function M(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: "${t}" contains non-hexadecimal characters`);const n=e.length%2!=0?`0${e}`:e,r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2)r[t/2]=parseInt(n.substring(t,t+2),16);return r}function $(t){return/^0[xX][0-9a-fA-F]*$/.test(t)?M(t):function(t){return/^[0-9]+$/.test(t)}(t)?j(BigInt(t)):k(t)}function j(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function q(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var z=31,Y=0n,G=2n**250n-1n,K=2n**31n-1n,W=Y,Z=2n**251n+17n*2n**192n+1n,X=256n,J=2n**251n-X,Q=(t,e)=>({min:t,max:e}),tt=Q(Y,Z-1n),et=Q(Y,255n),nt=Q(Y,65535n),rt=Q(Y,2n**32n-1n),it=Q(Y,2n**64n-1n),st=Q(Y,2n**96n-1n),at=Q(Y,2n**128n-1n),ot=Q(-128n,127n),ct=Q(-32768n,32767n),lt=Q(-(2n**31n),2n**31n-1n),ut=Q(-(2n**63n),2n**63n-1n),dt=Q(-(2n**127n),2n**127n-1n),ht={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ft={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},pt="0x414e595f43414c4c4552",gt="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",yt="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",mt=128,bt=2147483648n,_t={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},wt={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Et={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},vt={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},At={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Tt={rpcVersion:"0.9.0",transactionVersion:m.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},St={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},It={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},kt={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},xt=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Tt}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Bt={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Ct=class t{static instance;config;constructor(){this.config=xt}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Bt[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(Bt[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Bt).filter(t=>this.shouldLog(Bt[t])&&"OFF"!==t)}}.getInstance(),Rt={};d(Rt,{RpcChannel:()=>Xs});var Ot={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},{ETransactionVersion:Nt}=w,{ETransactionVersion2:Dt}=w,{ETransactionVersion3:Lt}=w,{EDataAvailabilityMode:Pt}=_,{EDAMode:Ut}=_;function Ft(t){return"l1_data_gas"in t}function Vt(t){return"l1_data_gas"in t}var{ETransactionStatus:Ht}=_,{ETransactionExecutionStatus:Mt}=_,{ETransactionType:$t}=w,{EBlockStatus:jt}=w,{ETransactionFinalityStatus:qt}=w,{ETransactionExecutionStatus:zt}=w,{EBlockTag:Yt}=w,Gt={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Kt={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Wt={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},Zt={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Xt="core::starknet::eth_address::EthAddress",Jt="core::zeroable::NonZero::";function Qt(t){return"execute"in t}var te={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},ee={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},ne={UNSUPPORTED:"0",V1:"1",V2:"2"},re={};d(re,{parse:()=>ae,parseAlwaysAsBig:()=>oe,stringify:()=>ce});var ie=p(n(7631)),se=t=>{if(!ie.isInteger(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},ae=t=>ie.parse(String(t),void 0,se),oe=t=>ie.parse(String(t),void 0,ie.parseNumberAndBigInt),ce=(t,e,n,r)=>ie.stringify(t,e,n,r),le=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ce(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const s=await this.batchPromises[r];delete this.batchPromises[r];const a=s.find(t=>t.id===r);if(!a)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return a}};function ue(t,e){if(!t)throw new Error(e||"Assertion failure")}var de={};d(de,{addPercent:()=>He,assertInRange:()=>Re,bigNumberishArrayToDecimalStringArray:()=>Oe,bigNumberishArrayToHexadecimalStringArray:()=>Ne,cleanHex:()=>Ce,getDecimalString:()=>Le,getHexString:()=>Pe,getHexStringArray:()=>Ue,getNext:()=>je,hexToBytes:()=>Ve,hexToDecimalString:()=>Be,isBigNumberish:()=>$e,isHex:()=>Ee,isHexString:()=>ve,isStringWholeNumber:()=>De,stringToSha256ToArrayBuff4:()=>Me,toBigInt:()=>Ae,toCairoBool:()=>Fe,toHex:()=>Se,toHex64:()=>xe,toHexString:()=>Ie,toStorageKey:()=>ke,tryToBigInt:()=>Te});var he=n(1484),fe=n(9981),pe=t=>void 0===t||void 0===t;function ge(t){return"number"==typeof t}function ye(t){return"boolean"==typeof t}function me(t){return"bigint"==typeof t}function be(t){return"string"==typeof t}function _e(t){return void 0!==i&&t instanceof i}function we(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Ee(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var ve=Ee;function Ae(t){return BigInt(t)}function Te(t){return t?BigInt(t):void 0}function Se(t){return D(Ae(t).toString(16))}var Ie=Se;function ke(t){return D(Ae(t).toString(16).padStart(64,"0"))}function xe(t){const e=D(Ae(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Be(t){return BigInt(D(t)).toString(10)}function Ce(t){return t.toLowerCase().replace(/^(0x)0+/,"$1")}function Re(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),a=BigInt(e),o=BigInt(n);ue(s>=a&&s<=o,`Message not signable, ${i}.`)}function Oe(t){return t.map(t=>Ae(t).toString(10))}function Ne(t){return t.map(t=>Se(t))}function De(t){return/^\d+$/.test(t)}function Le(t){if(Ee(t))return Be(t);if(De(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Pe(t){if(Ee(t))return t;if(De(t))return Ie(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Ue(t){return t.map(Pe)}function Fe(t){return(+t).toString()}function Ve(t){if(!Ee(t))throw new Error(`${t} needs to be a hex-string`);let e=N(t);return e.length%2!=0&&(e=`0${e}`),(0,he.hexToBytes)(e)}function He(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Me(t){var e;return Ve(Se((e=BigInt(D(O((0,fe.sha256)(t)))),Number(e&K))))}function $e(t){return ge(t)||me(t)||be(t)&&(Ee(t)||De(t))}function je(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}var qe={};d(qe,{getL1MessageHash:()=>tn,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,keccakBn:()=>Ke,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var ze=n(4246),Ye=n(1165),Ge=n(1484);function Ke(t){const e=N(Se(BigInt(t))),n=e.length%2==0?e:`0${e}`;return D((0,ze.keccak)(Ve(D(n))).toString(16))}function We(t){const e=BigInt(function(t){return D((0,ze.keccak)(x(t)).toString(16))}(t));return e&G}function Ze(t){return Se(We(t))}function Xe(t){return ge(t)||me(t)?Se(t):Ee(t)?t:De(t)?Se(t):Ze(t)}function Je(t){const e=D(t.reduce((t,e)=>t+N(Se(e)).padStart(64,"0"),""));return D((0,Ge.bytesToHex)((0,Ye.keccak_256)(Ve(e))))}function Qe(t,e,n,r,i){return Je([t,e,i,n,r.length,...r])}function tn(t,e,n){return Je([t,e,n.length,...n])}var en={};function nn(t){return/^[\x00-\x7F]*$/.test(t)}function rn(t){return t.length<=z}function sn(t){return/^[0-9]*$/i.test(t)}function an(t){return be(t)&&!Ee(t)&&!De(t)}d(en,{decodeShortString:()=>dn,encodeShortString:()=>un,isASCII:()=>nn,isDecimalString:()=>sn,isLongText:()=>cn,isShortString:()=>rn,isShortText:()=>on,isText:()=>an,splitLongString:()=>ln});var on=t=>an(t)&&rn(t),cn=t=>an(t)&&!rn(t);function ln(t){const e=RegExp(`[^]{1,${z}}`,"g");return t.match(e)||[]}function un(t){if(!nn(t))throw new Error(`${t} is not an ASCII string`);if(!rn(t))throw new Error(`${t} is too long`);return D(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function dn(t){if(!nn(t))throw new Error(`${t} is not an ASCII string`);if(Ee(t))return N(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(sn(t))return dn("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}var hn={};function fn(t){const e=0n===BigInt(t.pending_word)?"":dn(Se(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":dn(Se(e))),"")+e}function pn(t){const e=ln(t),n=e[e.length-1],r=e.map(un),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}d(hn,{byteArrayFromString:()=>pn,stringFromByteArray:()=>fn});var gn={};function yn(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function mn(t){if(me(t)||Number.isInteger(t))return t.toString();if(be(t)){if(Ee(t))return BigInt(t).toString();if(an(t)){if(!rn(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(un(t)).toString()}if(De(t))return t}if(ye(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}d(gn,{felt:()=>rr,getAbiContractVersion:()=>Qn,getArrayType:()=>Zn,isCairo1Abi:()=>Xn,isCairo1Type:()=>Wn,isLen:()=>Rn,isTypeArray:()=>Nn,isTypeBool:()=>qn,isTypeContractAddress:()=>zn,isTypeEnum:()=>Un,isTypeEthAddress:()=>Yn,isTypeFelt:()=>On,isTypeInt:()=>Mn,isTypeLiteral:()=>jn,isTypeNamedTuple:()=>Ln,isTypeNonZero:()=>Jn,isTypeOption:()=>Fn,isTypeResult:()=>Vn,isTypeSecp256k1Point:()=>Kn,isTypeStruct:()=>Pn,isTypeTuple:()=>Dn,isTypeU96:()=>Gn,isTypeUint:()=>Hn,isTypeUint256:()=>$n,tuple:()=>nr,uint256:()=>tr,uint512:()=>er});var bn=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex(t=>t>0))}static __processData(t){if(be(t))return $(t);if(me(t))return j(t);if(Number.isInteger(t))return j(BigInt(t));if(ye(t))return j(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return q(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return D(this.toBigInt().toString(16))}toApiRequest(){return yn([this.toHexString()])}static validate(e){ue(null!==e,"null value is not allowed for felt252"),ue(void 0!==e,"undefined value is not allowed for felt252"),ue(be(e)||ge(e)||me(e)||ye(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=q(n);ue(r>=0n&&r<Z,`Value ${n} is out of felt252 range [0, ${Z})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},_n=(1n<<128n)-1n,wn=(1n<<256n)-1n,En=0n,vn=340282366920938463463374607431768211455n,An=340282366920938463463374607431768211455n,Tn=0n,Sn=0n,In=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(we(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&_n,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){ue(null!==t,"null value is not allowed for u256"),ue(void 0!==t,"undefined value is not allowed for u256"),ue($e(t)||we(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return ue(e>=En,"bigNumberish is smaller than UINT_256_MIN"),ue(e<=wn,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return ue(n>=Tn&&n<=vn,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),ue(r>=Sn&&r<=An,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=je(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:D(this.low.toString(16)),high:D(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[mn(this.low),mn(this.high)]}},kn=(1n<<512n)-1n,xn=0n,Bn=0n,Cn=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(we(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&_n,this.limb1=(n&_n<<128n)>>128n,this.limb2=(n&_n<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){ue(null!==t,"null value is not allowed for u512"),ue(void 0!==t,"undefined value is not allowed for u512"),ue($e(t)||we(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return ue(e>=xn,"bigNumberish is smaller than UINT_512_MIN."),ue(e<=kn,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),a=BigInt(n),o=BigInt(r);return[i,s,a,o].forEach((t,e)=>{ue(t>=Bn&&t<=_n,`limb${e} is not in the range of a u128 number`)}),{limb0:i,limb1:s,limb2:a,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=je(e),i=je(e),s=je(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:D(this.limb0.toString(16)),limb1:D(this.limb1.toString(16)),limb2:D(this.limb2.toString(16)),limb3:D(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[mn(this.limb0),mn(this.limb1),mn(this.limb2),mn(this.limb3)]}},Rn=t=>/_len$/.test(t),On=t=>"felt"===t||"core::felt252"===t,Nn=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Dn=t=>/^\(.*\)$/i.test(t),Ln=t=>/\(.*\)/i.test(t)&&t.includes(":"),Pn=(t,e)=>t in e,Un=(t,e)=>t in e,Fn=t=>t.startsWith("core::option::Option::"),Vn=t=>t.startsWith("core::result::Result::"),Hn=t=>Object.values(Kt).includes(t),Mn=t=>Object.values(Wt).includes(t),$n=t=>In.isAbiType(t),jn=t=>Object.values(Zt).includes(t),qn=t=>"core::bool"===t,zn=t=>t===Zt.ContractAddress,Yn=t=>t===Xt,Gn=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Kn=t=>t===Zt.Secp256k1Point,Wn=t=>t.includes("::"),Zn=t=>Wn(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Xn(t){const{cairo:e}=Qn(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Jn(t){return t.startsWith(Jt)}function Qn(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return Wn(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var tr=t=>new In(t).toUint256DecimalString(),er=t=>new Cn(t).toUint512DecimalString(),nr=(...t)=>({...t});function rr(t){return mn(t)}var ir=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!pe(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!pe(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!pe(t[1]));return pe(t)?"":t[0]}},sr={Some:0,None:1},ar=class{Some;None;constructor(t,e){if(!(t in Object.values(sr)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===sr.Some){if(pe(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!pe(this.Some)}isNone(){return!0===this.None}},or={Ok:0,Err:1},cr=class{Ok;Err;constructor(t,e){if(!(t in Object.values(or)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===or.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!pe(this.Ok))return this.Ok;if(!pe(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!pe(this.Ok)}isErr(){return!pe(this.Err)}},lr=(t,e,n)=>{if(!me(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function ur(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const a=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===a){if(Array.isArray(t[i])){const e=ur(t[i],t[i].map(t=>a));return r[i]=Object.values(e).join(""),r}return lr(t,e,i),r[i]=dn(s),r}if("number"===a)return lr(t,e,i),r[i]=Number(s),r;if("function"==typeof a)return r[i]=a(s),r;if(Array.isArray(a)){const e=ur(t[i],a,a[0]);return r[i]=Object.values(e),r}return we(a)?(r[i]=ur(t[i],a),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)},{})}var dr=class{},hr=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(be(t))return $(t);if(_e(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return q(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return D("padded"===t?O(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;ue(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},fr={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},pr=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},gr=class extends pr{},yr=class extends gr{constructor(t,e,n){super(`RPC: ${e} with params ${ce(n,null,2)}\n\n      ${t.code}: ${t.message}: ${ce(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return fr[t]===this.code}},mr=class extends gr{constructor(t){super(t),this.name="TimeoutError"}},br=class extends gr{constructor(t){super(t),this.name="WebSocketNotConnectedError"}},_r=xt.get("buffer")||void 0!==i&&i||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==n.g&&n.g.Buffer||class{constructor(){throw new gr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new gr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=xt.get("buffer")||void 0!==i&&i;return e&&e.isBuffer&&e.isBuffer(t)}},wr=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Er=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return ue(Array.isArray(t)&&n instanceof bn&&r instanceof wr,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(_e(t))e=new Uint8Array(t);else if(be(t))e=$(t);else if(me(t))e=j(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=j(BigInt(t))}var n;const r=hr.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,a=[];let o,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);a.push(new hr(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");o=new bn(n),c=new wr(s)}else o=new bn(0),c=new wr(0);return{data:a,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),yn([D(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=H(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=H(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=H(this.toElements());return D(0===t.length?"0":O(t))}toBuffer(){const t=H(this.toElements());return _r.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){ue(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){ue(null!=t,"Invalid input: null or undefined"),ue(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),ue("object"!=typeof t||_e(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),ue(!ge(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),ue(!ge(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),ue(!me(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),ue(t instanceof Uint8Array||_e(t)||be(t)||ge(t)||me(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(je(e))},()=>hr.factoryFromApiResponse(e)),r=bn.factoryFromApiResponse(e),i=wr.factoryFromApiResponse(e);return new t(n,r,i)}},vr=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=et.min&&n<=et.max,`Value is out of u8 range [${et.min}, ${et.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Ar=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=nt.min&&n<=nt.max,`Value is out of u16 range [${nt.min}, ${nt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Tr=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=it.min&&n<=it.max,`Value is out of u64 range [${it.min}, ${it.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Sr=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=st.min&&n<=st.max,`Value is out of u96 range [${st.min}, ${st.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Ir=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=at.min&&n<=at.max,`Value is out of u128 range [${at.min}, ${at.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},kr=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=ot.min&&n<=ot.max,`Value is out of i8 range [${ot.min}, ${ot.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},xr=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=ct.min&&n<=ct.max,`Value is out of i16 range [${ct.min}, ${ct.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Br=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=lt.min&&n<=lt.max,`Value is out of i32 range [${lt.min}, ${lt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Cr=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=ut.min&&n<=ut.max,`Value is out of i64 range [${ut.min}, ${ut.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Rr=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&an(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){ue(null!=e,"Invalid input: null or undefined"),ue(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ue(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ue(n>=dt.min&&n<=dt.max,`Value is out of i128 range [${dt.min}, ${dt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Or={request:{[hr.abiSelector]:t=>new hr(t).toApiRequest(),[Er.abiSelector]:t=>new Er(t).toApiRequest(),[bn.abiSelector]:t=>new bn(t).toApiRequest(),[In.abiSelector]:t=>new In(t).toApiRequest(),[Cn.abiSelector]:t=>new Cn(t).toApiRequest(),[vr.abiSelector]:t=>new vr(t).toApiRequest(),[Ar.abiSelector]:t=>new Ar(t).toApiRequest(),[Tr.abiSelector]:t=>new Tr(t).toApiRequest(),[Sr.abiSelector]:t=>new Sr(t).toApiRequest(),[Ir.abiSelector]:t=>new Ir(t).toApiRequest(),[kr.abiSelector]:t=>new kr(t).toApiRequest(),[xr.abiSelector]:t=>new xr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[Cr.abiSelector]:t=>new Cr(t).toApiRequest(),[Rr.abiSelector]:t=>new Rr(t).toApiRequest()},response:{[hr.abiSelector]:t=>hr.factoryFromApiResponse(t).decodeUtf8(),[Er.abiSelector]:t=>Er.factoryFromApiResponse(t).decodeUtf8(),[bn.abiSelector]:t=>bn.factoryFromApiResponse(t).toBigInt(),[In.abiSelector]:t=>In.factoryFromApiResponse(t).toBigInt(),[Cn.abiSelector]:t=>Cn.factoryFromApiResponse(t).toBigInt(),[vr.abiSelector]:t=>vr.factoryFromApiResponse(t).toBigInt(),[Ar.abiSelector]:t=>Ar.factoryFromApiResponse(t).toBigInt(),[Tr.abiSelector]:t=>Tr.factoryFromApiResponse(t).toBigInt(),[Sr.abiSelector]:t=>Sr.factoryFromApiResponse(t).toBigInt(),[Ir.abiSelector]:t=>Ir.factoryFromApiResponse(t).toBigInt(),[kr.abiSelector]:t=>kr.factoryFromApiResponse(t).toBigInt(),[xr.abiSelector]:t=>xr.factoryFromApiResponse(t).toBigInt(),[Br.abiSelector]:t=>Br.factoryFromApiResponse(t).toBigInt(),[Cr.abiSelector]:t=>Cr.factoryFromApiResponse(t).toBigInt(),[Rr.abiSelector]:t=>Rr.factoryFromApiResponse(t).toBigInt()}},Nr={request:{[hr.abiSelector]:t=>new hr(t).toApiRequest(),[Er.abiSelector]:t=>new Er(t).toApiRequest(),[bn.abiSelector]:t=>rr(t),[In.abiSelector]:t=>new In(t).toApiRequest(),[Cn.abiSelector]:t=>new Cn(t).toApiRequest(),[vr.abiSelector]:t=>rr(t),[Ar.abiSelector]:t=>rr(t),[Tr.abiSelector]:t=>rr(t),[Sr.abiSelector]:t=>rr(t),[Ir.abiSelector]:t=>rr(t),[kr.abiSelector]:t=>new kr(t).toApiRequest(),[xr.abiSelector]:t=>new xr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[Cr.abiSelector]:t=>new Cr(t).toApiRequest(),[Rr.abiSelector]:t=>new Rr(t).toApiRequest()},response:{[hr.abiSelector]:t=>hr.factoryFromApiResponse(t).decodeUtf8(),[Er.abiSelector]:t=>Er.factoryFromApiResponse(t).decodeUtf8(),[bn.abiSelector]:t=>BigInt(je(t)),[In.abiSelector]:t=>In.factoryFromApiResponse(t).toBigInt(),[Cn.abiSelector]:t=>Cn.factoryFromApiResponse(t).toBigInt(),[vr.abiSelector]:t=>BigInt(je(t)),[Ar.abiSelector]:t=>BigInt(je(t)),[Tr.abiSelector]:t=>BigInt(je(t)),[Sr.abiSelector]:t=>BigInt(je(t)),[Ir.abiSelector]:t=>BigInt(je(t)),[kr.abiSelector]:t=>BigInt(je(t)),[xr.abiSelector]:t=>BigInt(je(t)),[Br.abiSelector]:t=>BigInt(je(t)),[Cr.abiSelector]:t=>BigInt(je(t)),[Rr.abiSelector]:t=>BigInt(je(t))}},Dr=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nr}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>Rn(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Lr=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nr}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function Pr(t,e){const n=Ur(t);if(0===n||1===n)return new Dr(t,e);if(2===n)return new Lr(t,e);throw Error(`Unsupported ABI version ${n}`)}function Ur(t){return t.find(t=>"interface"===t.type)?2:Xn(t)?1:0}function Fr(t,e,n){return"constructor"===t&&!n&&!e.length}function Vr(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0===--i)return r;return Number.POSITIVE_INFINITY}function Hr(t){return Wn(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+Vr(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+Vr(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map(t=>n.length?t.replace(" ",n.shift()):t);return Ln(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Mr=class t{content;arrayType;constructor(e,n){ue(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}ue(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,n)=>(t[n]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function $r({type:t,val:e,parser:n}){switch(!0){case In.isAbiType(t):case Cn.isAbiType(t):case vr.isAbiType(t):case Ar.isAbiType(t):case Tr.isAbiType(t):case Sr.isAbiType(t):case Ir.isAbiType(t):case kr.isAbiType(t):case xr.isAbiType(t):case Br.isAbiType(t):case Cr.isAbiType(t):case Rr.isAbiType(t):case hr.isAbiType(t):return n.getRequestParser(t)(e);case Kn(t):{const t=N(Se(e)).padStart(128,"0"),n=tr(D(t.slice(-64))),r=tr(D(t.slice(0,-64)));return[rr(r.low),rr(r.high),rr(n.low),rr(n.high)]}default:return n.getRequestParser(bn.abiSelector)(e)}}function jr({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Mr.isTypeFixedArray(e)){const s=Mr.getFixedArrayType(e);let a=[];if(Array.isArray(t))a=new Mr(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);a=Object.values(t),ue(a.length===Mr.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Mr.getFixedArraySize(e)} items. ${a.length} items provided.`)}return a.reduce((t,e)=>t.concat(jr({element:e,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(rr(t.length));const a=Zn(e);return t.reduce((t,e)=>t.concat(jr({element:e,type:a,structs:n,enums:r,parser:i})),s)}if(In.isAbiType(e))return i.getRequestParser(e)(t);if(Cn.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(Yn(e))return $r({type:e,val:t,parser:i});if(Er.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],a=t;return s.reduce((t,e)=>t.concat(jr({element:a[e.name],type:e.type,structs:n,enums:r,parser:i})),[])}if(Dn(e)){const s=function(t,e){const n=Hr(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map((t,e)=>({element:r[e],type:t.type??t}))}(t,e);return s.reduce((t,e)=>{const s=jr({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)},[])}if(Un(e,r)){const{variants:s}=r[e];if(Fn(e)){const e=t;if(e.isSome()){const t=s.find(t=>"Some"===t.name);if(pe(t))throw Error("Error in abi : Option has no 'Some' variant.");const a=t.type;if("()"===a)return sr.Some.toString();const o=jr({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[sr.Some.toString(),...o]:[sr.Some.toString(),o]}return sr.None.toString()}if(Vn(e)){const e=t;if(e.isOk()){const t=s.find(t=>"Ok"===t.name);if(pe(t))throw Error("Error in abi : Result has no 'Ok' variant.");const a=t.type;if("()"===a)return or.Ok.toString();const o=jr({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[or.Ok.toString(),...o]:[or.Ok.toString(),o]}const a=s.find(t=>"Err"===t.name);if(pe(a))throw Error("Error in abi : Result has no 'Err' variant.");const o=a.type;if("()"===o)return or.Err.toString();const c=jr({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(c)?[or.Err.toString(),...c]:[or.Err.toString(),c]}const a=t,o=a.activeVariant(),c=s.find(t=>t.name===o);if(pe(c))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=c.type,u=s.findIndex(t=>t.name===o);if("()"===l)return u.toString();const d=jr({element:a.unwrap(),type:l,structs:n,enums:r,parser:i});return Array.isArray(d)?[u.toString(),...d]:[u.toString(),d]}if(Jn(e))return $r({type:Zn(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return $r({type:e,val:t,parser:i})}function qr({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:a}=e;let{value:o}=t.next();switch(!0){case Mr.isTypeFixedArray(a):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${o}`);return jr({element:o,type:e.type,structs:n,enums:r,parser:i});case Nn(a):if(!Array.isArray(o)&&!an(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return be(o)&&(o=ln(o)),jr({element:o,type:e.type,structs:n,enums:r,parser:i});case Jn(a):return $r({type:Zn(a),val:o,parser:i});case Yn(a):return $r({type:a,val:o,parser:i});case Pn(a,n)||Dn(a)||In.isAbiType(a):case Un(a,r):return jr({element:o,type:a,structs:n,enums:r,parser:i});default:return $r({type:a,val:o,parser:i})}}function zr(t,e,n){let r;switch(!0){case qn(t):return r=e.next().value,Boolean(BigInt(r));case In.isAbiType(t):case Cn.isAbiType(t):case vr.isAbiType(t):case Ar.isAbiType(t):case Tr.isAbiType(t):case Sr.isAbiType(t):case Ir.isAbiType(t):case kr.isAbiType(t):case xr.isAbiType(t):case Br.isAbiType(t):case Cr.isAbiType(t):case Rr.isAbiType(t):return n.getResponseParser(t)(e);case Yn(t):return r=e.next().value,BigInt(r);case hr.isAbiType(t):return n.getResponseParser(t)(e);case Kn(t):const i=N(e.next().value).padStart(32,"0"),s=N(e.next().value).padStart(32,"0"),a=N(e.next().value).padStart(32,"0"),o=N(e.next().value).padStart(32,"0");return BigInt(D(s+i+o+a));default:return n.getResponseParser(bn.abiSelector)(e)}}function Yr(t,e,n,r,i){if("()"===e.type)return{};if(In.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Cn.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Er.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Mr.isTypeFixedArray(e.type)){const s=[],a={name:"",type:Mr.getFixedArrayType(e.type)},o=Mr.getFixedArraySize(e.type);for(;s.length<o;)s.push(Yr(t,a,n,r,i));return s}if(Nn(e.type)){const s=[],a={name:"",type:Zn(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Yr(t,a,n,r,i));return s}if(Jn(e.type)){const s={name:"",type:Zn(e.type)};return Yr(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return Yn(e.type)?zr(e.type,t,n):r[e.type].members.reduce((e,s)=>(e[s.name]=Yr(t,s,n,r,i),e),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),a=i[e.type].variants.reduce((e,a,o)=>o===s?(e[a.name]=Yr(t,{name:"",type:a.type},n,r,i),e):(e[a.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=s===sr.Some?a.Some:void 0;return new ar(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===or.Ok?a.Ok:a.Err,new cr(s,t)}return new ir(a)}if(Dn(e.type))return Hr(e.type).reduce((e,s,a)=>{const o=s?.name?s.name:a,c={name:o,type:s?.type?s.type:s};return e[o]=Yr(t,c,n,r,i),e},{});if(Nn(e.type)){const s=[],a={name:"",type:Zn(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Yr(t,a,n,r,i));return s}return zr(e.type,t,n)}function Gr({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:a,type:o}=e;let c;switch(!0){case Rn(a):return c=t.next().value,BigInt(c);case n&&o in n||Dn(o):case r&&Un(o,r):case Mr.isTypeFixedArray(o):return Yr(t,e,s,n,r);case Nn(o):if(Wn(o))return Yr(t,e,s,n,r);const l=[];if(i&&i[`${a}_len`]){const o=i[`${a}_len`];for(;l.length<o;)l.push(Yr(t,{name:a,type:e.type.replace("*","")},s,n,r))}return l;case Jn(o):return Yr(t,e,s,n,r);default:return zr(o,t,s)}}var Kr=(t,e)=>{if(ue(be(t)||ge(t)||me(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),be(t)&&!Ee(t))return;const n=BigInt(t.toString(10));ue(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Wr=(t,e)=>{let n;switch(ge(t)&&ue(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),ue(be(t)||ge(t)||me(t)||we(t)&&"low"in t&&"high"in t||we(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case Kt.u256:n=new In(t).toBigInt();break;case Kt.u512:n=new Cn(t).toBigInt();break;default:n=Ae(t)}switch(e.type){case Kt.u8:ue(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case Kt.u16:ue(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case Kt.u32:ue(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case Kt.u64:ue(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case Kt.u128:ue(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case Kt.u256:ue(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case Kt.u512:ue(Cn.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case Zt.ClassHash:case Zt.ContractAddress:ue(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case Zt.Secp256k1Point:ue(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case Zt.U96:ue(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Zr=(t,e)=>{ue(ye(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Xr=(t,e,n)=>{if(e.type!==Kt.u256&&e.type!==Kt.u512){if(Yn(e.type)){ue(!we(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));return void ue(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}ue(we(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:n})=>{ue(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)})}else Wr(t,e)},Jr=(t,e)=>{ue(we(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(Fn(e.type)&&r.includes("isSome")&&r.includes("isNone")||Vn(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Qr=(t,e)=>{ue(we(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},ti=(t,e,n,r)=>{const i=Nn(e.type),s=i?Zn(e.type):Mr.getFixedArrayType(e.type);if(i&&On(s)&&cn(t))return;let a=[];if(i)ue(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),a=t;else switch(!0){case Array.isArray(t):a=t;break;case"object"==typeof t:a=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case On(s):a.forEach(t=>Kr(t,e));break;case Dn(s):a.forEach(t=>Qr(t,{name:e.name,type:s}));break;case Nn(s):a.forEach(t=>ti(t,{name:"",type:s},n,r));break;case Pn(s,n):a.forEach(t=>Xr(t,{name:e.name,type:s},n));break;case Un(s,r):a.forEach(t=>Jr(t,{name:e.name,type:s}));break;case Hn(s)||jn(s):a.forEach(t=>Wr(t,{name:"",type:s}));break;case qn(s):a.forEach(t=>Zr(t,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${a}`)}};function ei(t,e,n,r){t.inputs.reduce((t,i)=>{const s=e[t];switch(!0){case Rn(i.name):return t;case On(i.type):Kr(s,i);break;case hr.isAbiType(i.type):hr.validate(s);break;case Hn(i.type)||jn(i.type):Wr(s,i);break;case qn(i.type):Zr(s,i);break;case Er.isAbiType(i.type):Er.validate(s);break;case kr.isAbiType(i.type):kr.validate(s);break;case xr.isAbiType(i.type):xr.validate(s);break;case Br.isAbiType(i.type):Br.validate(s);break;case Cr.isAbiType(i.type):Cr.validate(s);break;case Rr.isAbiType(i.type):Rr.validate(s);break;case Nn(i.type)||Mr.isTypeFixedArray(i.type):ti(s,i,n,r);break;case Pn(i.type,n):Xr(s,i,n);break;case Un(i.type,r):Jr(s,i);break;case Dn(i.type):Qr(s,i);break;case Jn(i.type):((t,e)=>{const n=Zn(e.type);switch(ue(Hn(n)&&n!==Cn.abiSelector||On(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case On(n):Kr(t,e),ue(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Hn(n):Wr(t,{name:"",type:n}),n===Kt.u256?ue(new In(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):ue(Ae(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1},0)}var ni=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=Pr(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==Gt.DEPLOY&&ue(this.abi.filter(e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===Gt.INVOKE?!n:n}).map(t=>t.name).includes(e),(t===Gt.INVOKE?"invocable":"viewable")+" method not found in abi");const r=this.abi.find(n=>t===Gt.DEPLOY?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type);if(Fr(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);ei(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find(e=>e.name===t);if(Fr(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(Mr.isTypeFixedArray(e))return function(t,e){const n=Mr.getFixedArrayType(e),r=Mr.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map(t=>i(t,n))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(Nn(e))return function(t,e){const n=Zn(e);return be(t)?t:t.map(t=>i(t,n))}(t,e);if(Un(e,r)){const n=r[e];return a(t,n)}if(Dn(e))return function(t,e){const n=Hr(e).reduce((e,n,r)=>{const s=Object.keys(t),a=n?.type?n.type:n;return o=i(t[s[r]],a),Object.defineProperty(e,r.toString(),{enumerable:!0,value:o??t[s[r]]}),e;var o},{});return n}(t,e);if(Yn(e))return t;if(Jn(e))return t;if(Er.isAbiType(e))return t;if(Gn(e))return t;if(Kn(e))return t;if(In.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(Cn.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every(t=>t in n))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Pn(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce((e,n)=>{if("undefined"===t[n.name]&&(Wn(n.type)||!Rn(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e},{}),a=(t,e)=>{if(Vn(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new cr(or.Ok,i(t.unwrap(),r)):new cr(or.Err,i(t.unwrap(),s))}if(Fn(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new ar(sr.Some,i(n.unwrap(),r)):new ar(sr.None,{})}const n=t,r=Object.entries(n.variant).map(t=>{if(pe(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]});return new ir(Object.fromEntries(r))};return e.reduce((e,n)=>{return Rn(n.name)&&!Wn(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r},{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),ei(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce((t,e)=>Rn(e.name)&&!Wn(e.type)?t:t.concat(qr({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap(([t,i])=>{let s=i;"entrypoint"===t?s=Ze(s):cn(s)&&(s=pn(s));const a=Array.isArray(r)&&"0"===t?"$$len":t;if(me(s))return[[`${n}${a}`,rr(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?sr.Some:sr.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${a}.`):[[`${n}${a}`,rr(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?or.Ok:or.Err;return e({0:r,1:t.unwrap()},`${n}${a}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===r);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${a}`,rr(i)]]:e({0:i,1:t.unwrap()},`${n}${a}.`)}return e(s,`${n}${a}.`)}return[[`${n}${a}`,rr(s)]]})};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find(e=>e.name===t),r=e.flat()[Symbol.iterator](),i=n.flat().reduce((t,e,n)=>{const i=e.name??n;return t[i]=Gr({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return ur(this.parse(t,e),n)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Se(t))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map(t=>Gr({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}},ri={};d(ri,{calculateContractAddressFromHash:()=>Vi,calculateDeclareTransactionHash:()=>Ri,calculateDeployAccountTransactionHash:()=>Oi,calculateInvokeTransactionHash:()=>Ci,calculateL2MessageTxHash:()=>Bi,computeCompiledClassHash:()=>Yi,computeContractClassHash:()=>Wi,computeHashOnElements:()=>Pi,computeHintedClassHash:()=>$i,computeLegacyContractClassHash:()=>ji,computePedersenHash:()=>Di,computePedersenHashOnElements:()=>Ui,computePoseidonHash:()=>Li,computePoseidonHashOnElements:()=>Fi,computeSierraContractClassHash:()=>Ki,formatSpaces:()=>Mi,getL1MessageHash:()=>tn,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,hashByteCodeSegments:()=>zi,keccakBn:()=>Ke,poseidon:()=>ii,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var ii=p(n(5920)),si={};d(si,{calculateDeclareTransactionHash:()=>bi,calculateDeployAccountTransactionHash:()=>mi,calculateInvokeTransactionHash:()=>_i,calculateTransactionHashCommon:()=>yi,encodeDataResourceBoundsL1:()=>pi,encodeResourceBoundsL1:()=>hi,encodeResourceBoundsL2:()=>fi,hashDAMode:()=>di,hashFeeFieldV3B3:()=>gi});var ai=n(4246),oi=t=>t.map(t=>BigInt(t)),ci=BigInt(un("L1_GAS")),li=BigInt(un("L2_GAS")),ui=BigInt(un("L1_DATA"));function di(t,e){return(BigInt(t)<<32n)+BigInt(e)}function hi(t){return(ci<<192n)+(t.l1_gas.max_amount<<128n)+t.l1_gas.max_price_per_unit}function fi(t){return(li<<192n)+(t.l2_gas.max_amount<<128n)+t.l2_gas.max_price_per_unit}function pi(t){return(ui<<192n)+(t.l1_data_gas.max_amount<<128n)+t.l1_data_gas.max_price_per_unit}function gi(t,e){const n=hi(e),r=fi(e),i=pi(e);return(0,ai.poseidonHashMany)([BigInt(t),n,r,i])}function yi(t,e,n,r,i,s,a,o,c,l,u=[]){const d=gi(s,l),h=di(o,c),f=oi([t,e,n,d,(0,ai.poseidonHashMany)(oi(a)),r,i,h,...oi(u)]);return Se((0,ai.poseidonHashMany)(f))}function mi(t,e,n,r,i,s,a,o,c,l,u,d){return yi(vt.DEPLOY_ACCOUNT,i,t,s,a,u,d,o,c,l,[(0,ai.poseidonHashMany)(oi(n)),e,r])}function bi(t,e,n,r,i,s,a,o,c,l,u,d){return yi(vt.DECLARE,r,n,i,s,u,oi(d),o,c,l,[(0,ai.poseidonHashMany)(oi(a)),t,e])}function _i(t,e,n,r,i,s,a,o,c,l,u){return yi(vt.INVOKE,e,t,r,i,l,u,a,o,c,[(0,ai.poseidonHashMany)(oi(s)),(0,ai.poseidonHashMany)(oi(n))])}var wi={};d(wi,{calculateDeclareTransactionHash:()=>Ii,calculateDeployAccountTransactionHash:()=>ki,calculateL2MessageTxHash:()=>Bi,calculateTransactionHash:()=>xi,calculateTransactionHashCommon:()=>Si,computeHashOnElements:()=>Ti});var Ei={};d(Ei,{starkCurve:()=>vi,weierstrass:()=>Ai});var vi=p(n(4246)),Ai=p(n(1705));function Ti(t){return[...t,t.length].reduce((t,e)=>vi.pedersen(Ae(t),Ae(e)),0).toString()}function Si(t,e,n,r,i,s,a,o=[]){const c=Ti(i);return Ti([t,e,n,r,c,s,a,...o])}function Ii(t,e,n,r,i,s,a){return Si(vt.DECLARE,n,e,0,[t],r,i,[s,...a?[a]:[]])}function ki(t,e,n,r,i,s,a,o){const c=[e,r,...n];return Si(vt.DEPLOY_ACCOUNT,i,t,0,c,s,a,[o])}function xi(t,e,n,r,i,s){return Si(vt.INVOKE,e,t,0,n,r,i,[s])}function Bi(t,e,n,r,i,s){const a=[t,...r];return Si(vt.L1_HANDLER,0,e,Xe(n),a,0,i,[s])}function Ci(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return _i(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Ri(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return bi(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Oi(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return mi(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}var Ni=n(4246);function Di(t,e){return vi.pedersen(BigInt(t),BigInt(e))}function Li(t,e){return Se(vi.poseidonHash(BigInt(t),BigInt(e)))}function Pi(t){return[...t,t.length].reduce((t,e)=>vi.pedersen(BigInt(t),BigInt(e)),0).toString()}var Ui=Pi;function Fi(t){return Se((0,Ni.poseidonHashMany)(t.map(t=>BigInt(t))))}function Vi(t,e,n,r){const i=Pi(ni.compile(n)),s=Pi([rr("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return Se(BigInt(s)%J)}function Hi(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function Mi(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function $i(t){const{abi:e,program:n}=t,r=Mi(ce({abi:e,program:n},Hi));return D(vi.keccak(x(r)).toString(16))}function ji(t){const e=be(t)?ae(t):t,n=Se(W),r=Pi(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=Pi(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),s=Pi(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),a=Pi(e.program.builtins.map(t=>un(t))),o=$i(e),c=Pi(e.program.data);return Pi([n,r,i,s,a,o,c])}function qi(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,Ni.poseidonHashMany)(e.flatMap(t=>BigInt(un(t)))))];var e});return(0,Ni.poseidonHashMany)(e)}function zi(t){const e=t.bytecode.map(t=>BigInt(t)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(t=>{const n=e.slice(r,r+=t);return[BigInt(t),(0,Ni.poseidonHashMany)(n)]});return 1n+(0,Ni.poseidonHashMany)(i)}function Yi(t){const e=BigInt(un("COMPILED_CLASS_V1")),n=qi(t.entry_points_by_type.EXTERNAL),r=qi(t.entry_points_by_type.L1_HANDLER),i=qi(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?zi(t):(0,Ni.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,n,r,i,s]))}function Gi(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,Ni.poseidonHashMany)(e)}function Ki(t){const e=BigInt(un("CONTRACT_CLASS_V0.1.0")),n=Gi(t.entry_points_by_type.EXTERNAL),r=Gi(t.entry_points_by_type.L1_HANDLER),i=Gi(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=Mi(ce(t.abi,null));return BigInt(D(vi.keccak(x(e)).toString(16)))}(t),a=(0,Ni.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,n,r,i,s,a]))}function Wi(t){const e=be(t)?ae(t):t;return"sierra_program"in e?Ki(e):ji(e)}var Zi={};d(Zi,{ZeroFeeEstimate:()=>ls,compressProgram:()=>Qi,decompressProgram:()=>ts,formatSignature:()=>ns,getFullPublicKey:()=>ps,intDAM:()=>us,randomAddress:()=>es,resourceBoundsToBigInt:()=>ys,resourceBoundsToEstimateFeeResponse:()=>os,resourceBoundsToHexString:()=>gs,signatureToDecimalArray:()=>rs,signatureToHexArray:()=>is,toFeeVersion:()=>hs,toOverheadOverallFee:()=>cs,toOverheadResourceBounds:()=>as,toTransactionVersion:()=>ds,v3Details:()=>fs,zeroResourceBounds:()=>ss});var Xi=n(4246),Ji=n(1668);function Qi(t){const e=be(t)?t:ce(t);return R((0,Ji.gzip)(e))}function ts(t){if(Array.isArray(t))return t;const e=I((0,Ji.ungzip)(C(t)));return ae(e)}function es(){const t=Xi.utils.randomPrivateKey();return(0,Xi.getStarkKey)(t)}function ns(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Se(t));try{const{r:e,s:n}=t;return[Se(e),Se(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function rs(t){return Oe(ns(t))}function is(t){return Ne(ns(t))}function ss(){return as({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function as(t,e=xt.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function os(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function cs(t,e=xt.get("resourceBoundsOverhead")){return He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function ls(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function us(t){if(t===Pt.L1)return Ut.L1;if(t===Pt.L2)return Ut.L2;throw Error("EDAM conversion")}function ds(t,e){const n=Se(e||t);if(!Object.values(Lt).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function hs(t){if(!t)return;const e=Se(t);if(e===Nt.V0)return Nt.F0;if(e===Nt.V1)return Nt.F1;if(e===Nt.V2)return Nt.F2;if(e===Nt.V3)return Nt.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function fs(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Pt.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Pt.L1,resourceBounds:t.resourceBounds??ss()}}function ps(t){const e=Se(t);return D(O((0,Xi.getPublicKey)(e,!1)))}function gs(t){const e=t=>{if(me(t))return Se(t);if(we(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function ys(t){const e=t=>{if(be(t))return BigInt(t);if(we(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function ms(t){return"sierra_program"in(be(t)?ae(t):t)}function bs(t){const e={...t};if(ms(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Yi(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??Wi(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function _s(t){if(ms(t))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const e=t;return{...e,program:ts(e.program)}}var ws={};d(ws,{ethRandomPrivateKey:()=>vs,validateAndParseEthAddress:()=>As});var Es=n(8510);function vs(){return F(O(Es.secp256k1.utils.randomPrivateKey()))}function As(t){Re(t,Y,2n**160n-1n,"Ethereum Address ");const e=D(N(Se(t)).padStart(40,"0"));return ue(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}var Ts="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==n.g&&n.g.fetch.bind(n.g)||(()=>{throw new gr("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),Ss={};function Is(t){const e=t.version?Se(t.version):Nt.V3;return e===Nt.V3||e===Nt.F3}function ks(t,e){const n=t.split("."),r=e.split(".");return n.every((t,e)=>"*"===t||t===r[e])}function xs(t,e={allowAnyPatchVersion:!1}){return Object.values(At).some(n=>ks(e.allowAnyPatchVersion?Bs(n):n,t))}function Bs(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}function Cs(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}function Rs(t){return"PENDING"===t.status}function Os(t){return!("block_hash"in t)}function Ns(t){return!("block_hash"in t)}function Ds(t){return new Promise(e=>{setTimeout(e,t)})}function Ls(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=Mi(ce(t.abi)),e.sierra_program=Mi(ce(t.sierra_program)),e.sierra_program=Qi(e.sierra_program),e}function Ps(t){const e=be(t)?ae(t):t;return ms(t)?Ls(e):{...e,..."program"in e&&{program:Qi(e.program)}}}function Us(t){return be(t.abi)?ae(t.abi):t.abi}d(Ss,{Block:()=>$s,createSierraContractClass:()=>Ls,extractAbi:()=>Us,getDefaultNodeUrl:()=>Fs,getDefaultNodes:()=>Vs,getSupportedRpcVersions:()=>Hs,parseContract:()=>Ps,validBlockTags:()=>Ms,wait:()=>Ds});var Fs=(t,e=!1,n)=>{e||Ct.info("Using default public node url, please provide nodeUrl in provider options!");const r=Vs(n??xt.get("rpcVersion"))[t??wt.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function Vs(t){const e={...St};return Object.keys(e).forEach(function(n,r){e[n]=e[n].map(e=>`${e}${Cs(t)}`)}),e}function Hs(){return[...new Set(Object.values(At))]}var Ms=Object.values(Yt),$s=class{hash=null;number=null;tag=null;setIdentifier(t){if(be(t))if(sn(t))this.number=parseInt(t,10);else if(Ee(t))this.hash=t;else{if(!Ms.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else me(t)?this.hash=Se(t):ge(t)?this.number=t:this.tag=Yt.LATEST;if(ge(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash},js={};function qs(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}d(js,{fromCallsToExecuteCalldata:()=>Ys,fromCallsToExecuteCalldata_cairo1:()=>Gs,getCompiledCalldata:()=>qs,getExecuteCalldata:()=>Ks,getVersionsByType:()=>Ws,transformCallsToMulticallArrays:()=>zs});var zs=t=>{const e=[],n=[];return t.forEach(t=>{const r=ni.compile(t.calldata||[]);e.push({to:Ae(t.contractAddress).toString(10),selector:Ae(Ze(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:e,calldata:ni.compile({calldata:n})}},Ys=t=>{const{callArray:e,calldata:n}=zs(t);return[...ni.compile({callArray:e}),...n]},Gs=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:ni.compile(t.calldata)}));return ni.compile({orderCalls:e})},Ks=(t,e="0")=>"1"===e?Gs(t):Ys(t);function Ws(t){return"fee"===t?{v3:Nt.F3}:{v3:Nt.V3}}var Zs={headers:{"Content-Type":"application/json"},blockIdentifier:Yt.LATEST,retries:200},Xs=class{id="RPC081";channelSpecVersion=At.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(wt).includes(a)?this.nodeUrl=Fs(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||Fs(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ts,this.blockIdentifier=r??Zs.blockIdentifier,this.chainId=i,this.headers={...Zs.headers,...s},this.retries=o??Zs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,ge(n)&&(this.batchClient=new le({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Ct.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ks(this.channelSpecVersion,t)||Ct.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xs(t))throw new gr(`${kt.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new $s(r).identifier,s=Ne(t),a=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new $s(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new $s(n).identifier,a=[];return r&&a.push(_.ESimulationFlag.SKIP_VALIDATE),i&&a.push(_.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:a})}async waitForTransaction(t,e){const n=Se(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,a=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[_.ETransactionStatus.REJECTED],l=e?.successStates??[_.ETransactionStatus.ACCEPTED_ON_L2,_.ETransactionStatus.ACCEPTED_ON_L1],u={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Ds(o);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,a=!0,r}(l.includes(t)||l.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&a)throw t;if(t instanceof yr&&t.isType("TXN_HASH_NOT_FOUND")){Ct.info("txLife: ",d);const t=u[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ds(o)}return f}getStorageAt(t,e,n=this.blockIdentifier){const r=Se(t),i=ke(e),s=new $s(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new $s(e).identifier,i={simulation_flags:n?[_.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){let n;if(!Is(e))throw Error(kt.legacyTxRPC08Message);if(!Vt(e.resourceBounds))throw Error(kt.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),version:_.ETransactionVersion.V3,signature:is(t.signature),nonce:Se(e.nonce),resource_bounds:gs(e.resourceBounds),tip:Se(e.tip),paymaster_data:e.paymasterData.map(t=>Se(t)),account_deployment_data:e.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(!ms(t)||!Is(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:_.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:_.ETransactionVersion.V3,signature:is(e),nonce:Se(i.nonce),contract_class:{sierra_program:ts(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:gs(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),account_deployment_data:i.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(!Is(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:_.ETransactionType.DEPLOY_ACCOUNT,version:_.ETransactionVersion.V3,signature:is(r),nonce:Se(i.nonce),contract_address_salt:Se(n||0),constructor_calldata:ni.toHex(e||[]),class_hash:Se(t),resource_bounds:gs(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new $s(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:As(n),to_address:Se(r),entry_point_selector:Xe(i),payload:Ue(s)},o=new $s(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ws(e);let r;if(!Is(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:is(t.signature),nonce:Se(t.nonce),resource_bounds:gs(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t))},t.type===_.ETransactionType.INVOKE)return{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),version:Se(t.version||n.v3),...r};if(t.type===_.ETransactionType.DECLARE){if(!ms(t.contract))throw Ct.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:ts(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Se(t.version||n.v3),...r}}if(t.type===_.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=r;return{type:t.type,constructor_calldata:ni.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),version:Se(t.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},Js={};d(Js,{RpcChannel:()=>ta});var Qs={headers:{"Content-Type":"application/json"},blockIdentifier:Yt.LATEST,retries:200},ta=class{id="RPC090";channelSpecVersion=At.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(wt).includes(a)?this.nodeUrl=Fs(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||Fs(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ts,this.blockIdentifier=r??Qs.blockIdentifier,this.chainId=i,this.headers={...Qs.headers,...s},this.retries=o??Qs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,ge(n)&&(this.batchClient=new le({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Ct.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ks(this.channelSpecVersion,t)||Ct.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xs(t))throw new gr(`${kt.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new $s(r).identifier,s=Ne(t),a=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new $s(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new $s(n).identifier,a=[];return r&&a.push(w.ESimulationFlag.SKIP_VALIDATE),i&&a.push(w.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:a})}async waitForTransaction(t,e){const n=Se(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,a=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],l=e?.successStates??[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1],u={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Ds(o);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,a=!0,r}(l.includes(t)||l.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&a)throw t;if(t instanceof yr&&t.isType("TXN_HASH_NOT_FOUND")){Ct.info("txLife: ",d);const t=u[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ds(o)}return f}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const a=r?.retryInterval??500,o=[w.ETransactionExecutionStatus.REVERTED],c=[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1,w.ETransactionFinalityStatus.PRE_CONFIRMED];let l;const u=(new Date).getTime();for(;s>0;){await Ds(a),l=await this.getTransactionStatus(t),Ct.info(`${s} ${JSON.stringify(l)} ${((new Date).getTime()-u)/1e3}s.`);const n=l.execution_status??"",r=l.finality_status;if(o.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=l,t}if(c.includes(r)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,Yt.PRE_CONFIRMED)),Ct.info(`${s} Checking new nonce ${t} ${((new Date).getTime()-u)/1e3}s.`),t!==i)return!0;await Ds(a),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=Se(t),i=ke(e),s=new $s(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new $s(e).identifier,i={simulation_flags:n?[w.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:m.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:m.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new $s(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:As(n),to_address:Se(r),entry_point_selector:Xe(i),payload:Ue(s)},o=new $s(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ws(e);ue(Is(t),kt.legacyTxRPC08Message),ue("transaction"!==e||Vt(t.resourceBounds),kt.SWOldV3);const r={signature:is(t.signature),nonce:Se(t.nonce),resource_bounds:gs(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t)),version:ds(n.v3,t.version)};if(t.type===m.ETransactionType.INVOKE)return{type:w.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),...r};if(t.type===m.ETransactionType.DECLARE)return ue(ms(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:ts(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:ni.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},ea=class{listeners={};on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}off(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(t=>t!==e))}emit(t,e){this.listeners[t]&&this.listeners[t].forEach(t=>t(e))}clear(){this.listeners={}}},na="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==n.g&&n.g.WebSocket||class{constructor(){throw new gr("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},ra=class{channel;method;params;id;events=new ea;buffer=[];maxBufferSize;handler=null;_isClosed=!1;constructor(t){this.channel=t.channel,this.method=t.method,this.params=t.params??{},this.id=t.id,this.maxBufferSize=t.maxBufferSize}get isClosed(){return this._isClosed}_handleEvent(t){if(this.handler)this.handler(t);else{if(this.buffer.length>=this.maxBufferSize){const t=this.buffer.shift();Ct.warn(`Subscription ${this.id}: Buffer full. Dropping oldest event:`,t)}this.buffer.push(t)}}on(t){if(this.handler)throw new Error("A handler is already attached to this subscription.");for(this.handler=t;this.buffer.length>0;){const t=this.buffer.shift();t&&this.handler(t)}}async unsubscribe(){if(this._isClosed)return!0;const t=await this.channel.unsubscribe(this.id);return t&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),t}},ia=class{nodeUrl;websocket;WsImplementation;activeSubscriptions=new Map;maxBufferSize;autoReconnect;reconnectOptions;requestTimeout;isReconnecting=!1;reconnectAttempts=0;userInitiatedClose=!1;reconnectTimeoutId=null;requestQueue=[];events=new ea;openListener=t=>this.events.emit("open",t);closeListener=this.onCloseProxy.bind(this);messageListener=this.onMessageProxy.bind(this);errorListener=t=>this.events.emit("error",t);sendId=0;constructor(t){this.nodeUrl=t.nodeUrl,this.maxBufferSize=t.maxBufferSize??1e3,this.autoReconnect=t.autoReconnect??!0,this.reconnectOptions={retries:t.reconnectOptions?.retries??5,delay:t.reconnectOptions?.delay??2e3},this.requestTimeout=t.requestTimeout??6e4,this.WsImplementation=t.websocket||xt.get("websocket")||na,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}idResolver(t){return t||this.sendId++}send(t,e,n){if(!this.isConnected())throw new br("WebSocketChannel.send() failed due to socket being disconnected");const r=this.idResolver(n),i={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.websocket.send(ce(i)),r}sendReceive(t,e){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return Ct.info(`WebSocket: Connection unavailable, queueing request: ${t}`),new Promise((n,r)=>{this.requestQueue.push({method:t,params:e,resolve:n,reject:r})});const n=this.send(t,e);return new Promise((e,r)=>{let i;if(!this.websocket||this.websocket.readyState!==na.OPEN)return void r(new br("WebSocket not available or not connected."));const s=o=>{if(!be(o.data))return void Ct.warn("WebSocket received non-string message data:",o.data);const c=JSON.parse(o.data);c.id===n&&(clearTimeout(i),this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",a),"result"in c?e(c.result):r(new Error(`Error on ${t} (id: ${n}): ${JSON.stringify(c.error)}`)))},a=e=>{clearTimeout(i),this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",a),r(new Error(`WebSocket error during ${t} (id: ${n}): ${e.type||"Unknown error"}`))};this.websocket.addEventListener("message",s),this.websocket.addEventListener("error",a),i=setTimeout(()=>{this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",a),r(new mr(`Request ${t} (id: ${n}) timed out after ${this.requestTimeout}ms`))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===na.OPEN}async waitForConnection(){return this.websocket.readyState!==na.OPEN?new Promise((t,e)=>{this.websocket&&(this.websocket.onopen=()=>t(this.websocket.readyState),this.websocket.onerror=t=>e(t))}):this.websocket.readyState}disconnect(t,e){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(t,e),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==na.CLOSED?new Promise((t,e)=>{this.websocket&&(this.websocket.onclose=()=>t(this.websocket.readyState),this.websocket.onerror=e)}):this.websocket.readyState}async unsubscribe(t){const e=await this.sendReceive("starknet_unsubscribe",{subscription_id:t});return e&&this.events.emit("unsubscribe",t),e}waitForUnsubscription(t){return new Promise(e=>{const n=r=>{r===t&&(this.events.off("unsubscribe",n),e())};this.events.on("unsubscribe",n)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(Ct.info(`WebSocket: Processing ${this.requestQueue.length} queued requests.`);this.requestQueue.length>0;){const{method:t,params:e,resolve:n,reject:r}=this.requestQueue.shift();this.sendReceive(t,e).then(n).catch(r)}}async _restoreSubscriptions(){const t=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();const e=t.map(async t=>{try{const e=await this.sendReceive(t.method,t.params);t.id=e,this.activeSubscriptions.set(e,t),Ct.info(`Subscription ${t.method} restored with new ID: ${e}`)}catch(e){Ct.error(`Failed to restore subscription ${t.method}:`,e)}});await Promise.all(e)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;const t=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries)return Ct.error("WebSocket: Maximum reconnection retries reached. Giving up."),void(this.isReconnecting=!1);this.reconnectAttempts+=1,Ct.info(`WebSocket: Connection lost. Attempting to reconnect... (${this.reconnectAttempts}/${this.reconnectOptions.retries})`),this.reconnect(),this.websocket.onopen=async()=>{Ct.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{const e=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);Ct.info(`WebSocket: Reconnect attempt failed. Retrying in ${e}ms.`),this.reconnectTimeoutId=setTimeout(t,e)}};t()}onCloseProxy(t){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",t),this.userInitiatedClose||this._startReconnect()}onMessageProxy(t){let e;try{e=JSON.parse(t.data)}catch(e){return void Ct.error(`WebSocketChannel: Error parsing incoming message: ${t.data}, Error: ${e}`)}if(e.method&&we(e.params)&&"subscription_id"in e.params){const{result:t,subscription_id:n}=e.params,r=this.activeSubscriptions.get(n);r?r._handleEvent(t):Ct.warn(`WebSocketChannel: Received event for untracked subscription ID: ${n}.`)}Ct.debug("onMessageProxy:",t.data),this.events.emit("message",t)}async subscribeNewHeads(t={}){const e="starknet_subscribeNewHeads",n={block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0},r=await this.sendReceive(e,n),i=new ra({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeEvents(t={}){const e="starknet_subscribeEvents",n={from_address:void 0!==t.fromAddress?Se(t.fromAddress):void 0,keys:t.keys,block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0,finality_status:t.finalityStatus},r=await this.sendReceive(e,n),i=new ra({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeTransactionStatus(t){const e="starknet_subscribeTransactionStatus",n={transaction_hash:Se(t.transactionHash),block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0},r=await this.sendReceive(e,n),i=new ra({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeNewTransactionReceipts(t={}){const e="starknet_subscribeNewTransactionReceipts",n={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},r=await this.sendReceive(e,n),i=new ra({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeNewTransactions(t={}){const e="starknet_subscribeNewTransactions",n={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},r=await this.sendReceive(e,n),i=new ra({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}removeSubscription(t){this.activeSubscriptions.delete(t)}on(t,e){this.events.on(t,e)}off(t,e){this.events.off(t,e)}},sa=class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:as(t,this.resourceBoundsOverhead),overall_fee:cs(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:as(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:cs(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:be(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}};function aa(t){return"0x3"===t.version&&"tip"in t&&be(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function oa(t,e=!0){return t.transactions.filter(aa).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function ca(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function la(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,a=t[r];return a+(t[i]-a)*BigInt(Math.round(1e3*s))/1000n}function ua(t){ue(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,tt.max),n=t.reduce((t,e)=>e>t?e:t,0n),r=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),s=Math.floor(i.length/2);let a;a=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:a,modeTip:c,recommendedTip:a,p90Tip:la(i,90),p95Tip:la(i,95)}}async function da(t,e){try{const n=await t.getBlockWithTxs(e);return ge(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new gr(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function ha(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Ct.warn(`Failed to fetch block ${e}:`,t),null}}function fa(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(e,n)=>t-n)}async function pa(t,e=Yt.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return ue(Number.isInteger(r),"maxBlocks parameter must be an integer"),ue(r>=1,"maxBlocks parameter must be greater than or equal to 1"),ue(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),ue(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),ue(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await da(t,e),a=fa(n,r),o=await async function(t,e){const n=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Ct.warn(`Failed to fetch block ${e} in parallel:`,t),null}});return Promise.all(n)}(t,a),c=o.filter(t=>null!==t).flatMap(t=>oa(t,s)),l=o.filter(t=>null!==t).length;return c.length<i?(Ct.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${l} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),ca(l,c)):{...ua(c),metrics:{blocksAnalyzed:l,transactionsTipsFound:c}}}catch(t){throw new gr(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await da(t,e),a=fa(n,r),o=[];let c=0;for(const e of a){const n=await ha(t,e);if(n){c+=1;const t=oa(n,s);if(o.push(...t),o.length>=i)break}}return o.length<i?(Ct.error(`Insufficient transaction data: found ${o.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),ca(c,o)):{...ua(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new gr(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var ga=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===zt.SUCCEEDED}static isReverted(t){return t.execution_status===zt.REVERTED}},ya={[zt.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[zt.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function ma(t){const e=ya[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,a=s(t);n={...i(t),statusReceipt:r,value:a,match:t=>r in t?t[r](a):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,ga.prototype),Object.defineProperty(n,"constructor",{value:ga,writable:!1,enumerable:!1,configurable:!1}),n}var ba={};d(ba,{encodeData:()=>Da,encodeType:()=>Ra,encodeValue:()=>Na,getDependencies:()=>Ca,getMessageHash:()=>Pa,getStructHash:()=>La,getTypeHash:()=>Oa,isMerkleTreeType:()=>Ba,prepareSelector:()=>xa,validateTypedData:()=>ka,verifyMessage:()=>Ua});var _a={};d(_a,{MerkleTree:()=>wa,proofMerklePath:()=>Ea});var wa=class t{leaves;branches=[];root;hashMethod;constructor(t,e=Di){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=Di){const[r,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,a=(s?n[i+1]:n[i-1])??"0x0",o=[...r,a],c=this.leaves.length===n.length?-1:this.branches.findIndex(t=>t.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:a,s?a:e,this.hashMethod),l,o)}};function Ea(t,e,n,r=Di){if(0===n.length)return t===e;const[i,...s]=n;return Ea(t,wa.hash(e,i,r),s,r)}var va={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Aa={[m.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:Fi,hashMerkleMethod:Li,escapeTypeString:t=>`"${t}"`,presetTypes:va},[m.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:Ui,hashMerkleMethod:Di,escapeTypeString:t=>t,presetTypes:{}}};function Ta(t,e,{min:n,max:r}){const i=BigInt(t);ue(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Sa({types:t,domain:e}){return Aa[m.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===m.TypedDataRevision.ACTIVE?m.TypedDataRevision.ACTIVE:Aa[m.TypedDataRevision.LEGACY].domain in t&&(e.revision??m.TypedDataRevision.LEGACY)===m.TypedDataRevision.LEGACY?m.TypedDataRevision.LEGACY:void 0}function Ia(t){try{return Se(t)}catch(e){if(be(t))return Se(un(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function ka(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Sa(e))}function xa(t){return Ee(t)?t:Ze(t)}function Ba(t){return"merkletree"===t.type}function Ca(t,e,n=[],r="",i=m.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===m.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),s.filter(e=>!n.includes(e)&&t[e]).reduce((e,n)=>[...e,...[n,...t[n].reduce((e,n)=>[...e,...Ca(t,n.type,e,n.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function Ra(t,e,n=m.TypedDataRevision.LEGACY){const r=n===m.TypedDataRevision.ACTIVE?{...t,...Aa[n].presetTypes}:t,[i,...s]=Ca(r,e,void 0,void 0,n),a=i?[i,...s.sort()]:[],o=Aa[n].escapeTypeString;return a.map(t=>{const e=r[t].map(t=>{const e="enum"===t.type&&n===m.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})`:o(e);return`${o(t.name)}:${r}`});return`${o(t)}(${e})`}).join("")}function Oa(t,e,n=m.TypedDataRevision.LEGACY){return Ze(Ra(t,e,n))}function Na(t,e,n,r={},i=m.TypedDataRevision.LEGACY){if(t[e])return[e,La(t,e,n,i)];if(Aa[i].presetTypes[e])return[e,La(Aa[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map(n=>Na(t,e.slice(0,-1),n,void 0,i)[1]);return[e,Aa[i].hashMethod(r)]}switch(e){case"enum":if(i===m.TypedDataRevision.ACTIVE){const[s,a]=Object.entries(n)[0],o=t[r.parent].find(t=>t.name===r.key),c=t[o.contains],l=c.find(t=>t.name===s),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((e,n)=>{if(!e)return e;const r=a[n];return Na(t,e,r,void 0,i)[1]});return[e,Aa[i].hashMethod([u,...d])]}return[e,Ia(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find(t=>t.name===e.key);if(!Ba(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map(n=>Na(t,e,n,void 0,i)[1]),{root:a}=new wa(s,Aa[i].hashMerkleMethod);return["felt",a]}case"selector":return["felt",xa(n)];case"string":if(i===m.TypedDataRevision.ACTIVE){const t=pn(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Aa[i].hashMethod(r)]}return[e,Ia(n)];case"i128":if(i===m.TypedDataRevision.ACTIVE){const t=BigInt(n);return Ta(t,e,dt),[e,Ia(t<0n?Z+t:t)]}return[e,Ia(n)];case"timestamp":case"u128":return i===m.TypedDataRevision.ACTIVE&&Ta(n,e,at),[e,Ia(n)];case"felt":case"shortstring":return i===m.TypedDataRevision.ACTIVE&&Ta(Ia(n),e,tt),[e,Ia(n)];case"ClassHash":case"ContractAddress":return i===m.TypedDataRevision.ACTIVE&&Ta(n,e,tt),[e,Ia(n)];case"bool":return i===m.TypedDataRevision.ACTIVE&&ue(ye(n),`Type mismatch for ${e} ${n}`),[e,Ia(n)];default:if(i===m.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,Ia(n)]}}function Da(t,e,n,r=m.TypedDataRevision.LEGACY){const i=t[e]??Aa[r].presetTypes[e],[s,a]=i.reduce(([i,s],a)=>{if(void 0===n[a.name]||null===n[a.name]&&"enum"!==a.type)throw new Error(`Cannot encode data: missing data for '${a.name}'`);const o=n[a.name],c={parent:e,key:a.name},[l,u]=Na(t,a.type,o,c,r);return[[...i,l],[...s,u]]},[["felt"],[Oa(t,e,r)]]);return[s,a]}function La(t,e,n,r=m.TypedDataRevision.LEGACY){return Aa[r].hashMethod(Da(t,e,n,r)[1])}function Pa(t,e){if(!ka(t))throw new Error("Typed data does not match JSON schema");const n=Sa(t),{domain:r,hashMethod:i}=Aa[n];return i([un("StarkNet Message"),La(t.types,r,t.domain,n),e,La(t.types,t.primaryType,t.message,n)])}function Ua(t,e,n,r){const i=ka(t);if(!$e(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!$e(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Pa(t,r):Se(t),a=Array.isArray(e)?new vi.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Se(n);return vi.verify(a,s,o)}async function Fa(t,e,n,r,i,s){const a=ka(e);if(!$e(e)&&!a)throw new Error("message has a wrong format.");if(!$e(r))throw new Error("accountAddress shall be a BigNumberish");const o=a?Pa(e,r):Se(e),c=i?[i]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const e of c)try{const i=await t.callContract({contractAddress:Se(r),entrypoint:e,calldata:ni.compile({hash:Ae(o).toString(),signature:ns(n)})});if(l.nokResponse.includes(i[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(l.error.some(e=>t.message.includes(e)))return!1;u=t}throw Error(`Signature verification Error: ${u}`)}async function Va(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}var Ha=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new sa;else{const e=t;if(e&&e.specVersion)if(ks("0.8",e.specVersion))this.channel=new Rt.RpcChannel({...e,waitMode:!1});else{if(!ks("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new Js.RpcChannel({...e,waitMode:!1})}else if(ks("0.8",xt.get("rpcVersion")))this.channel=new Rt.RpcChannel({...e,waitMode:!1});else{if(!ks("0.9",xt.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Js.RpcChannel({...e,waitMode:!1})}this.responseParser=new sa(e?.resourceBoundsOverhead)}}static async create(t){const e=new Rt.RpcChannel({...t}),n=await e.getSpecVersion();if(xs(n)||Ct.warn(`Using incompatible node spec version ${n}`),ks("0.8",n))return new this({...t,specVersion:At.v0_8_1});if(ks("0.9",n))return new this({...t,specVersion:At.v0_9_0});throw new gr(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(At).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=Yt.LATEST,e=5e3){if(t===Yt.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===Yt.PRE_CONFIRMED?n+1:Number(Se(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,a=!1;for(;!a;)if(await this.getBlockNumber()===r?a=!0:await Ds(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof Js.RpcChannel)return Va(this.channel,t);throw new gr("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);ue("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return Je([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return ma(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return ma(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof Js.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return ms(i)?r?{cairo:"1",compiler:Qn(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Rt.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof Js.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return Fa(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=bs(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof gr)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===m.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return pa(this,t,e)}},Ma=n(6993),$a={};d($a,{StarknetIdContract:()=>Ja,StarknetIdIdentityContract:()=>to,StarknetIdMulticallContract:()=>no,StarknetIdPfpContract:()=>ao,StarknetIdPopContract:()=>co,StarknetIdVerifierContract:()=>io,dynamicCallData:()=>fo,dynamicFelt:()=>ho,execution:()=>uo,getStarknetIdContract:()=>Qa,getStarknetIdIdentityContract:()=>eo,getStarknetIdMulticallContract:()=>ro,getStarknetIdPfpContract:()=>oo,getStarknetIdPopContract:()=>lo,getStarknetIdVerifierContract:()=>so,isStarkDomain:()=>po,useDecoded:()=>Za,useEncoded:()=>Xa});var ja="abcdefghijklmnopqrstuvwxyz0123456789-",qa=BigInt(38),za="",Ya=BigInt(37),Ga=BigInt(2),Ka=BigInt(3);function Wa(t){let e=0;for(;t.endsWith(za[1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function Za(t){let e="";return t.forEach(t=>{for(;t!==Y;){const n=t%qa;if(t/=qa,n===BigInt(37)){const n=t/Ka;if(n===Y){const r=t%Ka;t=n,e+=r===Y?ja[0]:za[Number(r)-1]}else e+=za[Number(t%Ga)],t/=Ga}else e+=ja[Number(n)]}const[n,r]=Wa(e);r&&(e=n+(r%2==0?za[1].repeat(r/2-1)+za[0]+ja[1]:za[1].repeat((r-1)/2+1))),e+="."}),e?e.concat("stark"):e}function Xa(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(za[0]+ja[1])){const[e,n]=Wa(t.substring(0,t.length-2));t=e+za[1].repeat(2*(n+1))}else{const[e,n]=Wa(t);n&&(t=e+za[1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=ja.indexOf(i),a=BigInt(ja.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===ja[0]?(e+=n*Ya,n*=qa,n*=qa):(e+=n*a,n*=qa);else if(-1!==za.indexOf(i)){e+=n*Ya,n*=qa;const s=(r===t.length-1?1:0)+za.indexOf(i);e+=n*BigInt(s),n*=Ga}}return e}var Ja={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Qa(t){switch(t){case Et.SN_MAIN:return Ja.MAINNET;case Et.SN_SEPOLIA:return Ja.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var to={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function eo(t){switch(t){case Et.SN_MAIN:return to.MAINNET;case Et.SN_SEPOLIA:return to.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var no="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ro(t){switch(t){case Et.SN_MAIN:case Et.SN_SEPOLIA:return no;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var io={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function so(t){switch(t){case Et.SN_MAIN:return io.MAINNET;case Et.SN_SEPOLIA:return io.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ao={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function oo(t){switch(t){case Et.SN_MAIN:return ao.MAINNET;case Et.SN_SEPOLIA:return ao.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var co={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function lo(t){switch(t){case Et.SN_MAIN:return co.MAINNET;case Et.SN_SEPOLIA:return co.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function uo(t,e=void 0,n=void 0){return new ir({Static:t,IfEqual:e?nr(e[0],e[1],e[2]):void 0,IfNotEqual:n?nr(n[0],n[1],n[2]):void 0})}function ho(t,e=void 0){return new ir({Hardcoded:t,Reference:e?nr(e[0],e[1]):void 0})}function fo(t,e=void 0,n=void 0){return new ir({Hardcoded:t,Reference:e?nr(e[0],e[1]):void 0,ArrayReference:n?nr(n[0],n[1]):void 0})}function po(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var go=class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,a,o){return t.getStarkProfile(this,e,n,r,i,s,a,o)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??Qa(r);try{const n=Za((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:ni.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!po(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??Qa(i);try{const e=r.replace(".stark","").split(".").map(t=>Xa(t).toString(10));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:ni.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,a,o){const c=await t.getChainId(),l=n??Qa(c),u=r??eo(c),d=i??so(c),h=s??oo(c),f=a??lo(c),p=o??ro(c);try{const n=[{execution:uo({}),to:fo(l),selector:fo(Ze("address_to_domain")),calldata:[fo(e),fo("0")]},{execution:uo({}),to:ho(l),selector:ho(Ze("domain_to_id")),calldata:[fo(void 0,void 0,[0,0])]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("twitter")),fo(d),fo("0")]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("github")),fo(d),fo("0")]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("discord")),fo(d),fo("0")]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("proof_of_personhood")),fo(f),fo("0")]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("nft_pp_contract")),fo(h),fo("0")]},{execution:uo({}),to:ho(u),selector:ho(Ze("get_extended_verifier_data")),calldata:[fo(void 0,[1,0]),fo(un("nft_pp_id")),fo("2"),fo(h),fo("0")]},{execution:uo(void 0,void 0,[6,0,0]),to:ho(void 0,[6,0]),selector:ho(Ze("tokenURI")),calldata:[fo(void 0,[7,1]),fo(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:ni.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=Za(e[0].slice(1).map(t=>BigInt(t))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,a="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:a,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map(t=>dn(t)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function yo(t){return Xa(t.endsWith(".brother")?t.replace(".brother",""):t)}function mo(t){const e=Za([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function bo(t){return Et.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var _o=class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??bo();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:ni.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return mo(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??bo();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:ni.compile({domain:yo(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??bo();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:ni.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=mo(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:ni.compile({domain:yo(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},wo=class extends((0,Ma.Mixin)(Ha,go,_o)){},Eo=class{},vo=new Ha({default:!0}),Ao=class{},To=class{pk;constructor(t=vi.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?O(t):Se(t)}async getPubKey(){return vi.getStarkKey(this.pk)}async signMessage(t,e){const n=Pa(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=Ks(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:us(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:us(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ri({...n,version:n.version,nonceDataAvailabilityMode:us(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return vi.sign(t,this.pk)}},So=n(8510),Io={};function ko(t){return new In(t).toBigInt()}function xo(t){return In.is(t)}function Bo(t){return new In(t).toUint256HexString()}d(Io,{bnToUint256:()=>Bo,isUint256:()=>xo,uint256ToBN:()=>ko});var Co=class{pk;constructor(t=vs()){this.pk=t instanceof Uint8Array?O(t).padStart(64,"0"):N(Se(t)).padStart(64,"0")}async getPubKey(){return D(O(So.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(t,e){const n=Pa(t,e),r=So.secp256k1.sign(N(F(n)),this.pk);return this.formatEthSignature(r)}async signTransaction(t,e){const n=Ks(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:us(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(t.feeDataAvailabilityMode)})}const i=So.secp256k1.sign(N(F(r)),this.pk);return this.formatEthSignature(i)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:us(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(r.feeDataAvailabilityMode)})}const r=So.secp256k1.sign(N(F(n)),this.pk);return this.formatEthSignature(r)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ri({...n,version:n.version,nonceDataAvailabilityMode:us(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(n.feeDataAvailabilityMode)})}const n=So.secp256k1.sign(N(F(e)),this.pk);return this.formatEthSignature(n)}formatEthSignature(t){const e=Bo(t.r),n=Bo(t.s);return[Se(e.low),Se(e.high),Se(n.low),Se(n.high),Se(t.recovery)]}},Ro=class{transporter;_transporter;accountID;eip2645applicationName;pathBuffer;appVersion;pubKey;fullPubKey;constructor(t,e,n="LedgerW",r=Oo){ue(e>=0,"Ledger account ID shall not be a negative number."),ue(e<=K,"Ledger account ID shall be < 2**31."),ue(!!n,"Ledger application name shall not be empty."),this.transporter=t,this._transporter=this.transporter,this.accountID=e,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=n,this.appVersion="",this.pathBuffer=r(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const t=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion=`${t[0]}.${t[1]}.${t[2]}`}return this.appVersion}async signMessage(t,e){const n=Pa(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=Ks(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:us(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:us(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ri({...n,version:n.version,nonceDataAvailabilityMode:us(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){D(O(await this._transporter.send(Number("0x5a"),2,0,0,_r.from(this.pathBuffer))));const e=Ve(Se(BigInt(t)<<4n)),n=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,_r.from(e))),r=BigInt(D(O(n.subarray(1,33)))),i=BigInt(D(O(n.subarray(33,65)))),s=n[65];return new vi.Signature(r,i).addRecoveryBit(s)}async getPublicKeys(){const t=this.pathBuffer,e=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,_r.from(t)));this.pubKey=D(O(e.subarray(1,33))),this.fullPubKey=D(O(e.subarray(0,65)))}};function Oo(t,e="LedgerW"){return H([new Uint8Array([128,0,10,85]),new Uint8Array([71,65,233,201]),"LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),new Uint8Array([0,0,0,0]),Ve(D(N(Se(t)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var No=n(1484);function Do(t){const e=Se(be(t)?D(t):t);return D(N(e).padStart(64,"0"))}function Lo(t){const e=Do(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return Re(e,Y,J-1n,"Starknet Address"),e}function Po(t){const e=N(Lo(t)).toLowerCase().split(""),n=N(Ke(t)),r=(0,No.hexToBytes)(n.padStart(64,"0"));for(let t=0;t<e.length;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return D(e.join(""))}function Uo(t){return Po(t)===t}var Fo=class extends Ro{constructor(t,e,n="LedgerW",r=Vo){super(t,e,n,r)}async signTransaction(t,e){const n=Ks(t,e.cairoVersion);if(Object.values(m.ETransactionVersion3).includes(e.version)){const r=e,i=Ci({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version,nonceDataAvailabilityMode:us(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(r.feeDataAvailabilityMode)}),s=await this.signTxV3(r,t);return ue(Ae(i)===s.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(Object.values(m.ETransactionVersion3).includes(t.version)){const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:us(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:us(r.feeDataAvailabilityMode)});const i=await this.signDeployAccountV3(r);return ue(Ae(n)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(t){return Ve(Do(Se(t)))}decodeSignatureLedger(t){const e=BigInt(D(O(t.subarray(0,32)))),n=BigInt(D(O(t.subarray(33,65)))),r=BigInt(D(O(t.subarray(65,97)))),i=t[97];return{hash:e,signature:new vi.Signature(n,r).addRecoveryBit(i)}}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),n=Ve(Do(Xe(t.entrypoint)));let r=new Uint8Array([]);t.calldata&&(r=H(ni.compile(t.calldata).map(t=>this.convertBnToLedger(t))));const i=H([e,n,r]),s=[];for(let t=0;t<i.length;t+=224)s.push(i.subarray(t,t+224));return s}async signTxV3(t,e){ue(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),ue(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_r.from(this.pathBuffer));const n=this.convertBnToLedger(t.walletAddress),r=this.convertBnToLedger(t.tip),i=this.convertBnToLedger(t.chainId),s=this.convertBnToLedger(t.nonce),a=this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),o=H([n,r,this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),i,s,a]);await this._transporter.send(Number("0x5a"),3,1,0,_r.from(o));const c=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,2,0,_r.from(c));const l=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_r.from(l));const u=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,4,0,_r.from(u));let d=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);await this._transporter.send(Number("0x5a"),3,5,0,_r.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{await this._transporter.send(Number("0x5a"),3,5,1,_r.from(t))}),d=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(d)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_r.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,_r.from(e));const n=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_r.from(n));const r=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_r.from(r));const i=ni.compile(t.constructorCalldata),s=this.convertBnToLedger(i.length);await this._transporter.send(Number("0x5a"),5,4,0,_r.from(s));const a=H(i.map(t=>this.convertBnToLedger(t))),o=[];for(let t=0;t<a.length;t+=224)o.push(a.subarray(t,t+224));let c=new Uint8Array(0);for(const t of o)c=await this._transporter.send(Number("0x5a"),5,5,0,_r.from(t));return this.decodeSignatureLedger(c)}};function Vo(t,e="LedgerW"){const n=new Uint8Array([mt,0,10,85]),r=new Uint8Array([71|mt,65,233,201]),i="LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),s=H([new Uint8Array([i[0]|mt]),i.subarray(1)]);return H([n,r,s,new Uint8Array([mt,0,0,0]),Ve(D(N(Se(BigInt(t)|bt)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var Ho=class extends Fo{constructor(t,e,n="LedgerW",r=Vo){super(t,e,n,r)}async signTxV3(t,e){ue(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),ue(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_r.from(this.pathBuffer));const n=H([this.convertBnToLedger(t.walletAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(us(t.nonceDataAvailabilityMode),us(t.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,_r.from(n)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,_r.from(e))}const r=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_r.from(r));const i=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,4,0,_r.from(i));const s=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,5,0,_r.from(s));let a=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);a=await this._transporter.send(Number("0x5a"),3,6,0,_r.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{a=await this._transporter.send(Number("0x5a"),3,6,1,_r.from(t))})}return this.decodeSignatureLedger(a)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_r.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(us(t.nonceDataAvailabilityMode),us(t.feeDataAvailabilityMode))),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,_r.from(e)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_r.from(e))}const n=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_r.from(n));const r=ni.compile(t.constructorCalldata),i=this.convertBnToLedger(r.length);await this._transporter.send(Number("0x5a"),5,4,0,_r.from(i));const s=H(r.map(t=>this.convertBnToLedger(t))),a=[];for(let t=0;t<s.length;t+=224)a.push(s.subarray(t,t+224));let o=new Uint8Array(0);for(const t of a)o=await this._transporter.send(Number("0x5a"),5,5,0,_r.from(t));return this.decodeSignatureLedger(o)}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),n=Ve(Do(Xe(t.entrypoint)));let r=new Uint8Array([]);if(t.calldata){const e=ni.compile(t.calldata);r=H([this.convertBnToLedger(e.length),...e.map(t=>this.convertBnToLedger(t))])}else r=this.convertBnToLedger("0x00");const i=H([e,n,r]),s=[];for(let t=0;t<i.length;t+=224)s.push(i.subarray(t,t+224));return s}},Mo={};function $o(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function jo(t){const e=t.calldata??[],n=Array.isArray(e)?e:ni.compile(e);return{to:t.contractAddress,selector:Ze(t.entrypoint),calldata:n}}function qo(t,e){const n=jo(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function zo(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Yo(t,e,n,r,i){return"1"===i?{types:te,primaryType:"OutsideExecution",domain:zo(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(t=>qo(t,i))}}:{types:ee,primaryType:"OutsideExecution",domain:zo(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(t=>qo(t,i))}}}function Go(t){const e=t.outsideExecution,n=ns(t.signature);return ni.compile({outside_execution:e,signature:n})}function Ko(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if(t.version===ne.V1)e="execute_from_outside";else{if(t.version!==ne.V2)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Se(t.signerAddress),entrypoint:e,calldata:Go(t)}})}d(Mo,{buildExecuteFromOutsideCall:()=>Ko,buildExecuteFromOutsideCallData:()=>Go,getOutsideCall:()=>jo,getTypedData:()=>Yo,toOutsideCallV2:()=>$o});var Wo={};async function Zo(t,e,n){const r={contractAddress:Se(e),entrypoint:"supports_interface",calldata:[Se(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}d(Wo,{supportsInterface:()=>Zo});var Xo={};d(Xo,{assertCallsAreStrictlyEqual:()=>Qo,assertPaymasterTransactionSafety:()=>tc,getDefaultPaymasterNodeUrl:()=>Jo});var Jo=(t,e=!1)=>{e||Ct.info("Using default public node url, please provide nodeUrl in provider options!");const n=It[t??wt.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Qo(t,e){const n="Provided calls are not strictly equal to the returned calls";ue(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=$o(e[r]),a=t=>Ae(t).toString(16).toLowerCase();ue(a(i.contractAddress)===a(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),ue(Ze(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const o=ni.toCalldata(i.calldata),c=ni.toCalldata(s.Calldata);ue(o.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${o.length}, Got length: ${c.length}`);for(let t=0;t<o.length;t+=1)ue(BigInt(o[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${o[t]}, Got: ${c[t]}`)}}var tc=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Qo(e,i),((t,e)=>{const n=$o(t[t.length-1]);ue(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(ue(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=$o(t[t.length-1]),r=ni.toCalldata(n.Calldata)[1];ue(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},ec=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},nc=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,rc=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},ic={"Content-Type":"application/json"},sc=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Jo(void 0),this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch??Ts,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(wt).includes(n)?this.nodeUrl=Jo(n,e?.default):this.nodeUrl=n||Jo(void 0,e?.default),this.baseFetch=i??Ts,this.headers={...ic,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map(t=>({to:t.contractAddress,selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)})))}};break;default:n=t}var r;const i={version:e.version,fee_mode:ec(e.feeMode),time_bounds:nc(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),a={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:rc(s.parameters),fee:a};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:rc(s.parameters),fee:a};default:return{type:"deploy",deployment:s.deployment,parameters:rc(s.parameters),fee:a}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:is(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:ec(e.feeMode),time_bounds:nc(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},ac=class{},oc=new sc({default:!0}),cc=class{address;entryPoint;constructor(t,e){this.address=t??ft.ADDRESS,this.entryPoint=e??ft.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:a}=t,o=qs(s,()=>{if(a){const t=new ni(a),e=Object.values(s);return t.validate(Gt.DEPLOY,"constructor",e),t.compile("constructor",e)}return ni.compile(s)}),c=r??es();return{call:{contractAddress:Se(this.address),entrypoint:this.entryPoint,calldata:[n,c,Fe(i),o.length,...o]},address:Vi(i?vi.pedersen(e,c):c,n,o,i?this.address:0)}});return{calls:n.map(t=>t.call),addresses:n.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Ce(t.from_address)===Ce(Se(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},lc=class{},uc=new cc(ft.ADDRESS,ft.ENTRYPOINT),dc=new cc(ht.ADDRESS,ht.ENTRYPOINT),hc=class extends wo{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:a,defaultTipType:o}=t;super(e),this.address=n.toLowerCase(),this.signer=be(r)||r instanceof Uint8Array?new To(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??xt.get("transactionVersion"),this.paymaster=a?new sc(a):oc,this.deployer=t.deployer??uc,this.defaultTipType=o??xt.get("defaultTipType"),Ct.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new gr("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Ae(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:m.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){ue(ms(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:m.ETransactionType.DECLARE,payload:bs(t)}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=ni.compile(n),a=r??Vi(e,t,s,0),o=[{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:a}}];return(await this.estimateFeeBulk(o,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[os(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,a=await this.resolveDetailsWithTip(e),o=await this.accountInvocationsFactory(t,{...fs(a),versions:[ds(hs(this.transactionVersion)||Lt.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(o,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:a}=e,o=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...fs(o),versions:[this.resolveTransactionVersion(a)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:m.ETransactionType.INVOKE,payload:n}],{...fs(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:a.contractAddress,calldata:a.calldata,signature:a.signature},{...fs(r),resourceBounds:a.resourceBounds,nonce:a.nonce,version:a.version})}async fastExecute(t,e={},n={}){ue(this.channel instanceof Js.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),ue(this.channel.blockIdentifier===Yt.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,Yt.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i);return{txResult:s,isReady:await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n)}}async declareIfNot(t,e={}){const n=bs(t);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){ue(ms(t.contract),kt.declareNonSierra);const n=bs(t),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:m.ETransactionType.DECLARE,payload:n}],{...fs(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:a.senderAddress,signature:a.signature,contract:a.contract,compiledClassHash:a.compiledClassHash},{...fs(r),nonce:a.nonce,resourceBounds:a.resourceBounds,version:a.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(""!==n.transaction_hash){const t=await this.waitForTransaction(n.transaction_hash,e);n={...n,...t}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=ni.compile(e),a=r??Vi(n,t,s,0),o=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let l=c;l||(l=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:a},o)).resourceBounds);const u=(await this.accountInvocationsFactory([{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:a}}],{...fs(o),resourceBounds:l,versions:[this.resolveTransactionVersion(i.version)],nonce:Y,skipValidate:!1}))[0];return super.deployAccountContract({classHash:u.classHash,addressSalt:u.addressSalt,constructorCalldata:u.constructorCalldata,signature:u.signature},{...fs(o),nonce:u.nonce,resourceBounds:u.resourceBounds,version:u.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Pa(t,this.address)}async getSnip9Version(){return await Zo(this,this.address,yt)?ne.V2:await Zo(this,this.address,gt)?ne.V1:ne.UNSUPPORTED}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Se(t)]},n=await this.callContract(e);return 0n!==BigInt(n[0])}catch(t){throw new Error(`Failed to check if nonce is valid: ${t}`)}}async getSnip9Nonce(){const t=es();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!Ee(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(`The caller ${t.caller} is not valid.`);const i=Ee(t.caller)?t.caller:pt,s=[e].flat(),a=n??await this.getSnip9Version();if(!a)throw new Error("This account is not handling outside transactions.");const o=r?Se(r):await this.getSnip9Nonce(),c=Yo(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},o,s,a),l=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:o,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(jo)},signature:l,signerAddress:this.address,version:a}}async executeFromOutside(t,e){const n=Ko(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return ds(this.transactionVersion||Lt.V3,t)}async buildInvocation(t,e){const n=Ks(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...fs(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=bs(t),s=Ps(r);ue(!pe(i)&&(e.version===Lt.F3||e.version===Lt.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const a=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...fs(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:a,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=ni.compile(n),a=r??Vi(e,t,s,0),o=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...fs(i),classHash:t,contractAddress:a,addressSalt:e,constructorCalldata:s});return{...fs(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:o}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),a=await this.getChainId(),o=e.versions.map(t=>ds(t)),c="payload"in t[0]?t[0].payload:t[0],l=t[0].type===m.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,n)=>{const c="payload"in t?t.payload:t,u={...fs(e),walletAddress:this.address,nonce:Ae(Number(s)+n),chainId:a,cairoVersion:l,version:o[0],skipValidate:i},d={type:t.type,nonce:Ae(Number(s)+n),blockIdentifier:r,version:o[0]};if(t.type===m.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),u);return{...d,...t,...u}}if(t.type===m.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,u);return{...d,...e,...u,type:m.ETransactionType.INVOKE}}if(t.type===m.ETransactionType.DECLARE){ue(ms(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,u);return{...d,...t,...u}}if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,u);return{...d,...t,...u}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&await this.getSnip9Version()===ne.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return r=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:is(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:is(n)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);tc(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},fc=class extends Eo{},pc={};function gc(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function yc(t){return t.request({type:"wallet_getPermissions"})}function mc(t,e){return t.request({type:"wallet_watchAsset",params:e})}function bc(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function _c(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function wc(t){return t.request({type:"wallet_requestChainId"})}function Ec(t){return t.request({type:"wallet_deploymentData"})}function vc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function Ac(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function Tc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function Sc(t){return t.request({type:"wallet_supportedSpecs"})}function Ic(t,e){t.on("accountsChanged",e)}function kc(t,e){t.on("networkChanged",e)}d(pc,{addDeclareTransaction:()=>Ac,addInvokeTransaction:()=>vc,addStarknetChain:()=>bc,deploymentData:()=>Ec,getPermissions:()=>yc,onAccountChange:()=>Ic,onNetworkChanged:()=>kc,requestAccounts:()=>gc,requestChainId:()=>wc,signMessage:()=>Tc,supportedSpecs:()=>Sc,switchStarknetChain:()=>_c,watchAsset:()=>mc});var xc=class t extends hc{walletProvider;constructor(t){super({...t,signer:""}),this.walletProvider=t.walletProvider,this.walletProvider.on("accountsChanged",t=>{t&&(this.address=t[0].toLowerCase())}),this.walletProvider.on("networkChanged",t=>{t&&this.channel.setChainId(t)})}onAccountChange(t){Ic(this.walletProvider,t)}onNetworkChanged(t){kc(this.walletProvider,t)}requestAccounts(t=!1){return gc(this.walletProvider,t)}getPermissions(){return yc(this.walletProvider)}switchStarknetChain(t){return _c(this.walletProvider,t)}watchAsset(t){return mc(this.walletProvider,t)}addStarknetChain(t){return bc(this.walletProvider,t)}execute(t){const e={calls:[].concat(t).map(t=>{const{contractAddress:e,entrypoint:n,calldata:r}=t;return{contract_address:e,entry_point:n,calldata:r}})};return vc(this.walletProvider,e)}declare(t){const e=bs(t),n=t.contract,r={...n,abi:ce(n.abi)};if(!e.compiledClassHash)throw Error("compiledClassHash is required");const i={compiled_class_hash:e.compiledClassHash,contract_class:r};return Ac(this.walletProvider,i)}async deploy(t){const{calls:e,addresses:n}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(e),contract_address:n}}signMessage(t){return Tc(this.walletProvider,t)}static async connect(e,n,r,i,s=!1){const[a]=await gc(n,s);return new t({provider:e,walletProvider:n,address:a,cairoVersion:r,paymaster:i})}static async connectSilent(e,n,r,i){return t.connect(e,n,r,i,!0)}},Bc={};function Cc(t){return"event"===t.type}function Rc(t){const e=t.filter(t=>Cc(t)&&"struct"===t.kind),n=t.filter(t=>Cc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let r=[],{name:i}=e,s=!1;const a=t=>t.type===i;for(;;){const t=n.find(t=>t.variants.some(a));if(pe(t))break;const e=t.variants.find(a);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const o=r.pop();let c={[D(vi.keccak(x(o)).toString(16))]:e};for(;r.length>0;)c={[D(vi.keccak(x(r.pop())).toString(16))]:c};return c={...c},Nc(t,c)},{})}function Oc(t){return Xn(t)?Rc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[D(vi.keccak(x(n)).toString(16))]:r}},{})}(t)}function Nc(t,e){const n={...t};return we(t)&&we(e)&&Object.keys(e).forEach(r=>{we(e[r])?r in t?n[r]=Nc(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function Dc(t,e,n,r,i){return t.flat().reduce((t,s)=>{const a=JSON.parse(JSON.stringify(s));let o=e[a.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=a.keys.shift();ue(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const l=a.keys[Symbol.iterator](),u=a.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Gr({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Gr({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),"block_hash"in a&&(c.block_hash=a.block_hash),"block_number"in a&&(c.block_number=a.block_number),"transaction_hash"in a&&(c.transaction_hash=a.transaction_hash),t.push(c),t},[])}function Lc(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.call(e.name,n,{parseRequest:t.parseRequest,parseResponse:t.parseResponse,...r})}}function Pc(t,e){return"view"===e.stateMutability||"view"===e.state_mutability?Lc(t,e):function(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.invoke(e.name,n,{parseRequest:t.parseRequest,...r})}}(t,e)}function Uc(t,e){return function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.estimate(e.name,n,r)}}d(Bc,{getAbiEvents:()=>Oc,isAbiEvent:()=>Cc,parseEvents:()=>Dc});var Fc=class t{abi;address;providerOrAccount;classHash;parseRequest;parseResponse;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;withOptionsProps;parsingStrategy;constructor(t){this.parsingStrategy=t.parsingStrategy;const e=Pr(t.abi,t.parsingStrategy);this.abi=e.getLegacyFormat(),this.address=t.address&&t.address.toLowerCase(),this.providerOrAccount=t.providerOrAccount??vo,this.parseRequest=t.parseRequest??!0,this.parseResponse=t.parseResponse??!0,this.classHash=t.classHash,this.callData=new ni(t.abi,t.parsingStrategy),this.structs=ni.getAbiStruct(t.abi),this.events=Oc(t.abi);const n={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(t=>{if("function"!==t.type)return;const e=t.name;var r,i;this[e]||Object.defineProperty(this,e,{...n,value:Pc(this,t)}),this.functions[e]||Object.defineProperty(this.functions,e,{...n,value:Pc(this,t)}),this.callStatic[e]||Object.defineProperty(this.callStatic,e,{...n,value:Lc(this,t)}),this.populateTransaction[e]||Object.defineProperty(this.populateTransaction,e,{...n,value:(r=this,i=t,function(...t){return r.populate(i.name,t)})}),this.estimateFee[e]||Object.defineProperty(this.estimateFee,e,{...n,value:Uc(this,t)})})}withOptions(t){return this.withOptionsProps=t,this}attach(t,e){if(this.address=t,e){const t=Pr(e,this.parsingStrategy);this.abi=t.getLegacyFormat(),this.callData=new ni(e,this.parsingStrategy),this.structs=ni.getAbiStruct(e),this.events=Oc(e)}}async isDeployed(){try{await this.providerOrAccount.getClassHashAt(this.address)}catch(t){const e=t instanceof Error?t.message:String(t);throw new Error(`Contract not deployed at address ${this.address}: ${e}`)}return this}async call(t,e=[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:i,blockIdentifier:s}={}){ue(null!==this.address,"contract is not connected to an address");const a=qs(e,()=>n?(this.callData.validate(Gt.CALL,t,e),this.callData.compile(t,e)):(Ct.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:a,entrypoint:t},s).then(e=>r?i?this.callData.format(t,e,i):this.callData.parse(t,e):e)}async invoke(t,e=[],n={}){const{parseRequest:r=!0,signature:i,waitForTransaction:s,...a}=n;ue(null!==this.address,"contract is not connected to an address");const o=qs(e,()=>r?(this.callData.validate(Gt.INVOKE,t,e),this.callData.compile(t,e)):(Ct.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),e)),c={contractAddress:this.address,calldata:o,entrypoint:t};if(Qt(this.providerOrAccount)){const t=await this.providerOrAccount.execute(c,{...a});if(s){const e=await this.providerOrAccount.waitForTransaction(t.transaction_hash);if(e.isSuccess())return e;throw new Error("Transaction failed",{cause:e})}return t}if(!a.nonce)throw new Error("Manual nonce is required when invoking a function without an account");return Ct.warn(`Invoking ${t} without an account.`),this.providerOrAccount.invokeFunction({...c,signature:i},{...a,nonce:a.nonce})}async estimate(t,e=[],n={}){ue(null!==this.address,"contract is not connected to an address"),qs(e,()=>!1)||this.callData.validate(Gt.INVOKE,t,e);const r=this.populate(t,e);if(Qt(this.providerOrAccount))return this.providerOrAccount.estimateInvokeFee(r,n);throw Error("Contract must be connected to the account contract to estimate")}populate(t,e=[]){const n=qs(e,()=>this.callData.compile(t,e));return{contractAddress:this.address,entrypoint:t,calldata:n}}parseEvents(t){let e=[];return t.match({SUCCEEDED:t=>{const n=t.events?.map(e=>({block_hash:t.block_hash,block_number:t.block_number,transaction_hash:t.transaction_hash,...e})).filter(t=>Ce(t.from_address)===Ce(this.address),[])||[];e=Dc(n,this.events,this.structs,ni.getAbiEnum(this.abi),this.callData.parser)},_:()=>{throw Error("This transaction was not successful.")}}),Object.defineProperty(e,"getByPath",{value:t=>{const n=e.find(e=>Object.keys(e).some(e=>e.includes(t))),r=Object.keys(n||{}).find(e=>e.includes(t));return r&&n?n[r]:null},writable:!1,enumerable:!1,configurable:!1}),e}isCairo1(){return gn.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(t){return this}static async factory(e,n={}){const{account:r,parseRequest:i=!0}=e;let s,a,o;if("classHash"in e&&e.classHash&&!("contract"in e)){const t=e;a=t.classHash.toString(),s=t.abi?t.abi:(await r.getClass(a)).abi,o=(await r.deployContract({classHash:a,constructorCalldata:t.constructorCalldata,salt:t.salt,unique:t.unique,abi:i?s:void 0},n)).contract_address}else{const t=e,c=Ps(t.contract);s=t.abi?t.abi:Us(c);const{declare:{class_hash:l},deploy:{contract_address:u}}=await r.declareAndDeploy({...t,abi:i?s:void 0},n);a=l.toString(),o=u}return ue(Boolean(o),"Deployment of the contract failed"),new t({abi:s,address:o,providerOrAccount:r,classHash:a,parseRequest:e.parseRequest,parseResponse:e.parseResponse,parsingStrategy:e.parsingStrategy})}},Vc=class{functions;callStatic;populateTransaction;estimateFee},Hc=class{};function Mc(t,e="fri"){if("strk"===e){let e="";me(t)?e=t.toString():be(t)&&(e=Ee(t)?BigInt(t).toString():t);const[n,r="0"]=e.split(".");return`${n}${r.padEnd(18,"0")}`.replace(/\b0+/g,"")}const n=BigInt(t).toString();let r;return r=n.length<=18?`0.${n.padStart(18,"0")}`:`${n.slice(0,n.length-18)}.${n.slice(n.length-18)}`,r.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}},3611(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=a;const o={number:n,bytes:r,hash:i,exists:s,output:a};e.default=o},1604(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(3611),i=n(8761);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,a=(t=(0,i.toBytes)(t)).length;for(let r=0;r<a;){const o=Math.min(s-this.pos,a-r);if(o===s){const e=(0,i.createView)(t);for(;s<=a-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:a}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let t=o;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,s-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,i.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,d[t],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},1832(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=s,e.add=_;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:a,l:o}=i(t[s],e);[n[s],r[s]]=[a,o]}return[n,r]}const a=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=a;const o=(t,e,n)=>t>>>n;e.shrSH=o;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const l=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=l;const u=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=u;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:c,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},367(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},9981(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(1604),i=n(8761),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)o[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],n=o[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;o[t]=s+o[t-7]+r+o[t-16]|0}let{A:n,B:a,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+(0,r.Chi)(u,d,h)+s[t]+o[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,a,c)|0;f=h,h=d,d=u,u=l+e|0,l=c,c=a,a=n,n=e+p|0}n=n+this.A|0,a=a+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,a,c,l,u,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new l)},1165(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const r=n(3611),i=n(1832),s=n(8761),a=[],o=[],c=[],l=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=u,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],a.push(2*(5*r+n)),o.push((t+1)*(t+2)/2%64);let i=l;for(let t=0;t<7;t++)e=(e<<u^(e>>h)*p)%f,e&d&&(i^=u<<(u<<BigInt(t))-u);c.push(i)}const[g,y]=(0,i.split)(c,!0),m=(t,e,n)=>n>32?(0,i.rotlBH)(t,e,n):(0,i.rotlSH)(t,e,n),b=(t,e,n)=>n>32?(0,i.rotlBL)(t,e,n):(0,i.rotlSL)(t,e,n);function _(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],a=n[i+1],o=m(s,a,1)^n[r],c=b(s,a,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=o,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=o[n],s=m(e,i,r),c=b(e,i,r),l=a[n];e=t[l],i=t[l+1],t[l]=s,t[l+1]=c}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=g[r],t[1]^=y[r]}n.fill(0)}class w extends s.Hash{constructor(t,e,n,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),_(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,r.aexists)(this);const{blockLen:e,state:n}=this,i=(t=(0,s.toBytes)(t)).length;for(let r=0;r<i;){const s=Math.min(e-this.pos,i-r);for(let e=0;e<s;e++)n[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,r.aexists)(this,!1),(0,r.abytes)(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,r.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,r.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new w(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}e.Keccak=w;const E=(t,e,n)=>(0,s.wrapConstructor)(()=>new w(e,t,n));e.sha3_224=E(6,144,28),e.sha3_256=E(6,136,32),e.sha3_384=E(6,104,48),e.sha3_512=E(6,72,64),e.keccak_224=E(1,144,28),e.keccak_256=E(1,136,32),e.keccak_384=E(1,104,48),e.keccak_512=E(1,72,64);const v=(t,e,n)=>(0,s.wrapXOFConstructorWithOpts)((r={})=>new w(e,t,void 0===r.dkLen?n:r.dkLen,!0));e.shake128=v(31,168,16),e.shake256=v(31,136,32)},8761(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=a(t.charCodeAt(i)),s=a(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(367),i=n(3611);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2506(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rotl=function(t,e){return t<<e|t>>>32-e},e.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:i,counterLength:s,counterRight:a,rounds:f}=(0,r.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return(0,r.anumber)(s),(0,r.anumber)(f),(0,r.abool)(a),(0,r.abool)(n),(e,p,g,y,m=0)=>{(0,r.abytes)(e),(0,r.abytes)(p),(0,r.abytes)(g);const b=g.length;if(void 0===y&&(y=new Uint8Array(b)),(0,r.abytes)(y),(0,r.anumber)(m),m<0||m>=d)throw new Error("arx: counter overflow");if(y.length<b)throw new Error(`arx: output (${y.length}) is shorter than data (${b})`);const _=[];let w,E,v=e.length;if(32===v)_.push(w=(0,r.copyBytes)(e)),E=c;else{if(16!==v||!n)throw new Error(`arx: invalid 32-byte key, got length=${v}`);w=new Uint8Array(32),w.set(e),w.set(e,16),E=o,_.push(w)}l(p)||_.push(p=(0,r.copyBytes)(p));const A=(0,r.u32)(w);if(i){if(24!==p.length)throw new Error("arx: extended nonce must be 24 bytes");i(E,A,(0,r.u32)(p.subarray(0,16)),A),p=p.subarray(16)}const T=16-s;if(T!==p.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(12!==T){const t=new Uint8Array(12);t.set(p,a?0:12-p.length),p=t,_.push(p)}const S=(0,r.u32)(p);return function(t,e,n,i,s,a,o,c){const f=s.length,p=new Uint8Array(u),g=(0,r.u32)(p),y=l(s)&&l(a),m=y?(0,r.u32)(s):h,b=y?(0,r.u32)(a):h;for(let r=0;r<f;o++){if(t(e,n,i,g,o,c),o>=d)throw new Error("arx: counter overflow");const l=Math.min(u,f-r);if(y&&l===u){const t=r/4;if(r%4!=0)throw new Error("arx: invalid block position");for(let e,n=0;n<16;n++)e=t+n,b[e]=m[e]^g[n];r+=u;continue}for(let t,e=0;e<l;e++)t=r+e,a[t]=s[t]^p[e];r+=l}}(t,E,A,S,g,y,m,f),(0,r.clean)(..._),y}};const r=n(6527),i=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),s=i("expand 16-byte k"),a=i("expand 32-byte k"),o=(0,r.u32)(s),c=(0,r.u32)(a);function l(t){return t.byteOffset%4==0}const u=64,d=2**32-1,h=new Uint32Array},1210(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poly1305=void 0,e.wrapConstructorWithKey=a;const r=n(6527),i=(t,e)=>255&t[e++]|(255&t[e++])<<8;class s{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,r.toBytes)(t),(0,r.abytes)(t,32);const e=i(t,0),n=i(t,2),s=i(t,4),a=i(t,6),o=i(t,8),c=i(t,10),l=i(t,12),u=i(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|s<<6),this.r[3]=8191&(s>>>7|a<<9),this.r[4]=255&(a>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|c<<2),this.r[7]=8065&(c>>>11|l<<5),this.r[8]=8191&(l>>>8|u<<8),this.r[9]=u>>>5&127;for(let e=0;e<8;e++)this.pad[e]=i(t,16+2*e)}process(t,e,n=!1){const r=n?0:2048,{h:s,r:a}=this,o=a[0],c=a[1],l=a[2],u=a[3],d=a[4],h=a[5],f=a[6],p=a[7],g=a[8],y=a[9],m=i(t,e+0),b=i(t,e+2),_=i(t,e+4),w=i(t,e+6),E=i(t,e+8),v=i(t,e+10),A=i(t,e+12),T=i(t,e+14);let S=s[0]+(8191&m),I=s[1]+(8191&(m>>>13|b<<3)),k=s[2]+(8191&(b>>>10|_<<6)),x=s[3]+(8191&(_>>>7|w<<9)),B=s[4]+(8191&(w>>>4|E<<12)),C=s[5]+(E>>>1&8191),R=s[6]+(8191&(E>>>14|v<<2)),O=s[7]+(8191&(v>>>11|A<<5)),N=s[8]+(8191&(A>>>8|T<<8)),D=s[9]+(T>>>5|r),L=0,P=L+S*o+I*(5*y)+k*(5*g)+x*(5*p)+B*(5*f);L=P>>>13,P&=8191,P+=C*(5*h)+R*(5*d)+O*(5*u)+N*(5*l)+D*(5*c),L+=P>>>13,P&=8191;let U=L+S*c+I*o+k*(5*y)+x*(5*g)+B*(5*p);L=U>>>13,U&=8191,U+=C*(5*f)+R*(5*h)+O*(5*d)+N*(5*u)+D*(5*l),L+=U>>>13,U&=8191;let F=L+S*l+I*c+k*o+x*(5*y)+B*(5*g);L=F>>>13,F&=8191,F+=C*(5*p)+R*(5*f)+O*(5*h)+N*(5*d)+D*(5*u),L+=F>>>13,F&=8191;let V=L+S*u+I*l+k*c+x*o+B*(5*y);L=V>>>13,V&=8191,V+=C*(5*g)+R*(5*p)+O*(5*f)+N*(5*h)+D*(5*d),L+=V>>>13,V&=8191;let H=L+S*d+I*u+k*l+x*c+B*o;L=H>>>13,H&=8191,H+=C*(5*y)+R*(5*g)+O*(5*p)+N*(5*f)+D*(5*h),L+=H>>>13,H&=8191;let M=L+S*h+I*d+k*u+x*l+B*c;L=M>>>13,M&=8191,M+=C*o+R*(5*y)+O*(5*g)+N*(5*p)+D*(5*f),L+=M>>>13,M&=8191;let $=L+S*f+I*h+k*d+x*u+B*l;L=$>>>13,$&=8191,$+=C*c+R*o+O*(5*y)+N*(5*g)+D*(5*p),L+=$>>>13,$&=8191;let j=L+S*p+I*f+k*h+x*d+B*u;L=j>>>13,j&=8191,j+=C*l+R*c+O*o+N*(5*y)+D*(5*g),L+=j>>>13,j&=8191;let q=L+S*g+I*p+k*f+x*h+B*d;L=q>>>13,q&=8191,q+=C*u+R*l+O*c+N*o+D*(5*y),L+=q>>>13,q&=8191;let z=L+S*y+I*g+k*p+x*f+B*h;L=z>>>13,z&=8191,z+=C*d+R*u+O*l+N*c+D*o,L+=z>>>13,z&=8191,L=(L<<2)+L|0,L=L+P|0,P=8191&L,L>>>=13,U+=L,s[0]=P,s[1]=U,s[2]=F,s[3]=V,s[4]=H,s[5]=M,s[6]=$,s[7]=j,s[8]=q,s[9]=z}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=i,i=t[e]>>>13,t[e]&=8191;t[0]+=5*i,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,n[0]=t[0]+5,i=n[0]>>>13,n[0]&=8191;for(let e=1;e<10;e++)n[e]=t[e]+i,i=n[e]>>>13,n[e]&=8191;n[9]-=8192;let s=(1^i)-1;for(let t=0;t<10;t++)n[t]&=s;s=~s;for(let e=0;e<10;e++)t[e]=t[e]&s|n[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let a=t[0]+e[0];t[0]=65535&a;for(let n=1;n<8;n++)a=(t[n]+e[n]|0)+(a>>>16)|0,t[n]=65535&a;(0,r.clean)(n)}update(t){(0,r.aexists)(this),t=(0,r.toBytes)(t),(0,r.abytes)(t);const{buffer:e,blockLen:n}=this,i=t.length;for(let r=0;r<i;){const s=Math.min(n-this.pos,i-r);if(s!==n)e.set(t.subarray(r,r+s),this.pos),this.pos+=s,r+=s,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=i-r;r+=n)this.process(t,r)}return this}destroy(){(0,r.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let s=0;for(let e=0;e<8;e++)t[s++]=n[e]>>>0,t[s++]=n[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}function a(t){const e=(e,n)=>t(n).update((0,r.toBytes)(e)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}e.poly1305=a(t=>new s(t))},8900(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=o;const r=n(2506),i=n(1210),s=n(6527);function a(t,e,n,i,s,a=20){let o=t[0],c=t[1],l=t[2],u=t[3],d=e[0],h=e[1],f=e[2],p=e[3],g=e[4],y=e[5],m=e[6],b=e[7],_=s,w=n[0],E=n[1],v=n[2],A=o,T=c,S=l,I=u,k=d,x=h,B=f,C=p,R=g,O=y,N=m,D=b,L=_,P=w,U=E,F=v;for(let t=0;t<a;t+=2)A=A+k|0,L=(0,r.rotl)(L^A,16),R=R+L|0,k=(0,r.rotl)(k^R,12),A=A+k|0,L=(0,r.rotl)(L^A,8),R=R+L|0,k=(0,r.rotl)(k^R,7),T=T+x|0,P=(0,r.rotl)(P^T,16),O=O+P|0,x=(0,r.rotl)(x^O,12),T=T+x|0,P=(0,r.rotl)(P^T,8),O=O+P|0,x=(0,r.rotl)(x^O,7),S=S+B|0,U=(0,r.rotl)(U^S,16),N=N+U|0,B=(0,r.rotl)(B^N,12),S=S+B|0,U=(0,r.rotl)(U^S,8),N=N+U|0,B=(0,r.rotl)(B^N,7),I=I+C|0,F=(0,r.rotl)(F^I,16),D=D+F|0,C=(0,r.rotl)(C^D,12),I=I+C|0,F=(0,r.rotl)(F^I,8),D=D+F|0,C=(0,r.rotl)(C^D,7),A=A+x|0,F=(0,r.rotl)(F^A,16),N=N+F|0,x=(0,r.rotl)(x^N,12),A=A+x|0,F=(0,r.rotl)(F^A,8),N=N+F|0,x=(0,r.rotl)(x^N,7),T=T+B|0,L=(0,r.rotl)(L^T,16),D=D+L|0,B=(0,r.rotl)(B^D,12),T=T+B|0,L=(0,r.rotl)(L^T,8),D=D+L|0,B=(0,r.rotl)(B^D,7),S=S+C|0,P=(0,r.rotl)(P^S,16),R=R+P|0,C=(0,r.rotl)(C^R,12),S=S+C|0,P=(0,r.rotl)(P^S,8),R=R+P|0,C=(0,r.rotl)(C^R,7),I=I+k|0,U=(0,r.rotl)(U^I,16),O=O+U|0,k=(0,r.rotl)(k^O,12),I=I+k|0,U=(0,r.rotl)(U^I,8),O=O+U|0,k=(0,r.rotl)(k^O,7);let V=0;i[V++]=o+A|0,i[V++]=c+T|0,i[V++]=l+S|0,i[V++]=u+I|0,i[V++]=d+k|0,i[V++]=h+x|0,i[V++]=f+B|0,i[V++]=p+C|0,i[V++]=g+R|0,i[V++]=y+O|0,i[V++]=m+N|0,i[V++]=b+D|0,i[V++]=_+L|0,i[V++]=w+P|0,i[V++]=E+U|0,i[V++]=v+F|0}function o(t,e,n,i){let s=t[0],a=t[1],o=t[2],c=t[3],l=e[0],u=e[1],d=e[2],h=e[3],f=e[4],p=e[5],g=e[6],y=e[7],m=n[0],b=n[1],_=n[2],w=n[3];for(let t=0;t<20;t+=2)s=s+l|0,m=(0,r.rotl)(m^s,16),f=f+m|0,l=(0,r.rotl)(l^f,12),s=s+l|0,m=(0,r.rotl)(m^s,8),f=f+m|0,l=(0,r.rotl)(l^f,7),a=a+u|0,b=(0,r.rotl)(b^a,16),p=p+b|0,u=(0,r.rotl)(u^p,12),a=a+u|0,b=(0,r.rotl)(b^a,8),p=p+b|0,u=(0,r.rotl)(u^p,7),o=o+d|0,_=(0,r.rotl)(_^o,16),g=g+_|0,d=(0,r.rotl)(d^g,12),o=o+d|0,_=(0,r.rotl)(_^o,8),g=g+_|0,d=(0,r.rotl)(d^g,7),c=c+h|0,w=(0,r.rotl)(w^c,16),y=y+w|0,h=(0,r.rotl)(h^y,12),c=c+h|0,w=(0,r.rotl)(w^c,8),y=y+w|0,h=(0,r.rotl)(h^y,7),s=s+u|0,w=(0,r.rotl)(w^s,16),g=g+w|0,u=(0,r.rotl)(u^g,12),s=s+u|0,w=(0,r.rotl)(w^s,8),g=g+w|0,u=(0,r.rotl)(u^g,7),a=a+d|0,m=(0,r.rotl)(m^a,16),y=y+m|0,d=(0,r.rotl)(d^y,12),a=a+d|0,m=(0,r.rotl)(m^a,8),y=y+m|0,d=(0,r.rotl)(d^y,7),o=o+h|0,b=(0,r.rotl)(b^o,16),f=f+b|0,h=(0,r.rotl)(h^f,12),o=o+h|0,b=(0,r.rotl)(b^o,8),f=f+b|0,h=(0,r.rotl)(h^f,7),c=c+l|0,_=(0,r.rotl)(_^c,16),p=p+_|0,l=(0,r.rotl)(l^p,12),c=c+l|0,_=(0,r.rotl)(_^c,8),p=p+_|0,l=(0,r.rotl)(l^p,7);let E=0;i[E++]=s,i[E++]=a,i[E++]=o,i[E++]=c,i[E++]=m,i[E++]=b,i[E++]=_,i[E++]=w}e.chacha20orig=(0,r.createCipher)(a,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,r.createCipher)(a,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,r.createCipher)(a,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),e.chacha8=(0,r.createCipher)(a,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,r.createCipher)(a,{counterRight:!1,counterLength:4,rounds:12});const c=new Uint8Array(16),l=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(c.subarray(n))},u=new Uint8Array(32);function d(t,e,n,r,a){const o=t(e,n,u),c=i.poly1305.create(o);a&&l(c,a),l(c,r);const d=(0,s.u64Lengths)(r.length,a?a.length:0,!0);c.update(d);const h=c.digest();return(0,s.clean)(o,d),h}e._poly1305_aead=t=>(e,n,r)=>({encrypt(i,a){const o=i.length;(a=(0,s.getOutput)(o+16,a,!1)).set(i);const c=a.subarray(0,-16);t(e,n,c,c,1);const l=d(t,e,n,c,r);return a.set(l,o),(0,s.clean)(l),a},decrypt(i,a){a=(0,s.getOutput)(i.length-16,a,!1);const o=i.subarray(0,-16),c=i.subarray(-16),l=d(t,e,n,o,r);if(!(0,s.equalBytes)(c,l))throw new Error("invalid tag");return a.set(i.subarray(0,-16)),t(e,n,a,a,1),(0,s.clean)(l),a}}),e.chacha20poly1305=(0,s.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,s.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))},5297(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},6527(t,e){"use strict";function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function r(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=void 0,e.isBytes=n,e.abool=r,e.anumber=i,e.abytes=s,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");i(t.outputLen),i(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){s(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=a,e.bytesToHex=l,e.hexToBytes=d,e.hexToNumber=h,e.bytesToNumberBE=function(t){return h(l(t))},e.numberToBytesBE=function(t,e){return d(t.toString(16).padStart(2*e,"0"))},e.utf8ToBytes=f,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=function(t){if("string"==typeof t)t=f(t);else{if(!n(t))throw new Error("Uint8Array expected, got "+typeof t);t=m(t)}return t},e.overlapBytes=p,e.complexOverlapBytes=function(t,e){if(p(t,e)&&t.byteOffset<e.byteOffset)throw new Error("complex overlap of input and output is not supported")},e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];s(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)},e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},e.getOutput=function(t,e,n=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!y(e))throw new Error("invalid output, must be aligned");return e},e.setBigUint64=g,e.u64Lengths=function(t,e,n){r(n);const i=new Uint8Array(16),s=a(i);return g(s,0,BigInt(e),n),g(s,8,BigInt(t),n),i},e.isAligned32=y,e.copyBytes=m,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];const o=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),c=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function l(t){if(s(t),o)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=c[t[n]];return e}function u(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function d(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(o)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=u(t.charCodeAt(i)),s=u(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":"0x"+t)}function f(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function p(t,e){return t.buffer===e.buffer&&t.byteOffset<e.byteOffset+e.byteLength&&e.byteOffset<t.byteOffset+t.byteLength}function g(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}function y(t){return t.byteOffset%4==0}function m(t){return Uint8Array.from(t)}e.nextTick=async()=>{},e.Hash=class{},e.wrapCipher=(t,n)=>{function r(r,...i){if(s(r),!e.isLE)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const e=i[0];if(!e)throw new Error("nonce / iv required");t.varSizeNonce?s(e):s(e,t.nonceLength)}const a=t.tagLength;a&&void 0!==i[1]&&s(i[1]);const o=n(r,...i),c=(t,e)=>{if(void 0!==e){if(2!==t)throw new Error("cipher output not supported");s(e)}};let l=!1;return{encrypt(t,e){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,s(t),c(o.encrypt.length,e),o.encrypt(t,e)},decrypt(t,e){if(s(t),a&&t.length<a)throw new Error("invalid ciphertext length: smaller than tagLength="+a);return c(o.decrypt.length,e),o.decrypt(t,e)}}}return Object.assign(r,t),r}},8489(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=s,e.getWebcryptoSubtle=a,e.managedNonce=function(t){const{nonceLength:e}=t;return(0,i.anumber)(e),(n,...r)=>({encrypt(a,...o){const c=s(e),l=t(n,c,...r).encrypt(a,...o),u=(0,i.concatBytes)(c,l);return l.fill(0),u},decrypt(i,...s){const a=i.subarray(0,e),o=i.subarray(e);return t(n,a,...r).decrypt(o,...s)}})};const r=n(5297),i=n(6527);function s(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function a(){if(r.crypto&&"object"==typeof r.crypto.subtle&&null!=r.crypto.subtle)return r.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={async encrypt(t,e,n,r){const i=a(),s=await i.importKey("raw",t,e,!0,["encrypt"]),o=await i.encrypt(n,s,r);return new Uint8Array(o)},async decrypt(t,e,n,r){const i=a(),s=await i.importKey("raw",t,e,!0,["decrypt"]),o=await i.decrypt(n,s,r);return new Uint8Array(o)}};const o="AES-CBC",c="AES-CTR",l="AES-GCM";function u(t){return(n,r,s)=>{(0,i.abytes)(n),(0,i.abytes)(r);const a={name:t,length:8*n.length},u=function(t,e,n){if(t===o)return{name:o,iv:e};if(t===c)return{name:c,counter:e,length:64};if(t===l)return n?{name:l,iv:e,additionalData:n}:{name:l,iv:e};throw new Error("unknown aes block mode")}(t,r,s);let d=!1;return{encrypt(t){if((0,i.abytes)(t),d)throw new Error("Cannot encrypt() twice with same key / nonce");return d=!0,e.utils.encrypt(n,a,u,t)},decrypt:t=>((0,i.abytes)(t),e.utils.decrypt(n,a,u,t))}}}e.cbc=u(o),e.ctr=u(c),e.gcm=(()=>u(l))()},3562(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=a,e.createCurve=function(t,e){const n=e=>(0,s.weierstrass)({...t,...a(e)});return Object.freeze({...n(e),create:n})};const r=n(3788),i=n(1130),s=n(1705);function a(t){return{hash:t,hmac:(e,...n)=>(0,r.hmac)(t,e,(0,i.concatBytes)(...n)),randomBytes:i.randomBytes}}},2422(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wNAF=function(t,e){return{constTimeNegate:o,hasPrecomputes:t=>1!==p(t),unsafeLadder(e,n,r=t.ZERO){let i=e;for(;n>s;)n&a&&(r=r.add(i)),i=i.double(),n>>=a;return r},precomputeWindow(t,n){const{windows:r,windowSize:i}=l(n,e),s=[];let a=t,o=a;for(let t=0;t<r;t++){o=a,s.push(o);for(let t=1;t<i;t++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(n,r,i){const{windows:s,windowSize:c}=l(n,e);let u=t.ZERO,d=t.BASE;const h=BigInt(2**n-1),f=2**n,p=BigInt(n);for(let t=0;t<s;t++){const e=t*c;let n=Number(i&h);i>>=p,n>c&&(n-=f,i+=a);const s=e,l=e+Math.abs(n)-1,g=t%2!=0,y=n<0;0===n?d=d.add(o(g,r[s])):u=u.add(o(y,r[l]))}return{p:u,f:d}},wNAFUnsafe(n,r,i,o=t.ZERO){const{windows:c,windowSize:u}=l(n,e),d=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let t=0;t<c;t++){const e=t*u;if(i===s)break;let n=Number(i&d);if(i>>=f,n>u&&(n-=h,i+=a),0===n)continue;let c=r[e+Math.abs(n)-1];n<0&&(c=c.negate()),o=o.add(c)}return o},getPrecomputes(t,e,n){let r=h.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&h.set(e,n(r))),r},wNAFCached(t,e,n){const r=p(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=p(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,n){c(n,e),f.set(t,n),h.delete(t)}}},e.pippenger=function(t,e,n,r){if(u(n,t),d(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,a=(0,i.bitLen)(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,c=(1<<o)-1,l=new Array(c+1).fill(s);let h=s;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){l.fill(s);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(c));l[s]=l[s].add(n[e])}let e=s;for(let t=l.length-1,n=s;t>0;t--)n=n.add(l[t]),e=e.add(n);if(h=h.add(e),0!==t)for(let t=0;t<o;t++)h=h.double()}return h},e.precomputeMSMUnsafe=function(t,e,n,r){c(r,e.BITS),u(n,t);const i=t.ZERO,s=2**r-1,a=Math.ceil(e.BITS/r),o=BigInt((1<<r)-1),l=n.map(t=>{const e=[];for(let n=0,r=t;n<s;n++)e.push(r),r=r.add(t);return e});return t=>{if(d(t,e),t.length>n.length)throw new Error("array of scalars must be smaller than array of points");let s=i;for(let e=0;e<a;e++){if(s!==i)for(let t=0;t<r;t++)s=s.double();const n=BigInt(a*r-(e+1)*r);for(let e=0;e<t.length;e++){const r=t[e],i=Number(r>>n&o);i&&(s=s.add(l[e][i-1]))}}return s}},e.validateBasic=function(t){return(0,r.validateField)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const r=n(4967),i=n(1484),s=BigInt(0),a=BigInt(1);function o(t,e){const n=e.negate();return t?n:e}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function l(t,e){return c(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}function u(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function d(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const h=new WeakMap,f=new WeakMap;function p(t){return f.get(t)||1}},1761(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expand_message_xmd=l,e.expand_message_xof=u,e.hash_to_field=d,e.isogenyMap=function(t,e){const n=e.map(t=>Array.from(t).reverse());return(e,r)=>{const[i,s,a,o]=n.map(n=>n.reduce((n,r)=>t.add(t.mul(n,e),r)));return e=t.div(i,s),r=t.mul(r,t.div(a,o)),{x:e,y:r}}},e.createHasher=function(t,e,n){if("function"!=typeof e)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=d(r,2,{...n,DST:n.DST,...i}),a=t.fromAffine(e(s[0])),o=t.fromAffine(e(s[1])),c=a.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=d(r,1,{...n,DST:n.encodeDST,...i}),a=t.fromAffine(e(s[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const t of n)if("bigint"!=typeof t)throw new Error("mapToCurve: expected array of bigints");const r=t.fromAffine(e(n)).clearCofactor();return r.assertValidity(),r}}};const r=n(4967),i=n(1484),s=i.bytesToNumberBE;function a(t,e){if(c(t),c(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function o(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function c(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function l(t,e,n,r){(0,i.abytes)(t),(0,i.abytes)(e),c(n),e.length>255&&(e=r((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:l}=r,u=Math.ceil(n/s);if(n>65535||u>255)throw new Error("expand_message_xmd: invalid lenInBytes");const d=(0,i.concatBytes)(e,a(e.length,1)),h=a(0,l),f=a(n,2),p=new Array(u),g=r((0,i.concatBytes)(h,t,f,a(0,1),d));p[0]=r((0,i.concatBytes)(g,a(1,1),d));for(let t=1;t<=u;t++){const e=[o(g,p[t-1]),a(t+1,1),d];p[t]=r((0,i.concatBytes)(...e))}return(0,i.concatBytes)(...p).slice(0,n)}function u(t,e,n,r,s){if((0,i.abytes)(t),(0,i.abytes)(e),c(n),e.length>255){const t=Math.ceil(2*r/8);e=s.create({dkLen:t}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(a(n,2)).update(e).update(a(e.length,1)).digest()}function d(t,e,n){(0,i.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:a,k:o,m:d,hash:h,expand:f,DST:p}=n;(0,i.abytes)(t),c(e);const g="string"==typeof p?(0,i.utf8ToBytes)(p):p,y=a.toString(2).length,m=Math.ceil((y+o)/8),b=e*d*m;let _;if("xmd"===f)_=l(t,g,b,h);else if("xof"===f)_=u(t,g,b,o,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');_=t}const w=new Array(e);for(let t=0;t<e;t++){const e=new Array(d);for(let n=0;n<d;n++){const i=m*(n+t*d),o=_.subarray(i,i+m);e[n]=(0,r.mod)(s(o),a)}w[t]=e}return w}},4967(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNegativeLE=void 0,e.mod=d,e.pow=h,e.pow2=function(t,e,n){let r=t;for(;e-- >i;)r*=r,r%=n;return r},e.invert=f,e.tonelliShanks=p,e.FpSqrt=g,e.validateField=function(t){const e=y.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(t,e)},e.FpPow=m,e.FpInvertBatch=b,e.FpDiv=function(t,e,n){return t.mul(e,"bigint"==typeof n?f(n,t.ORDER):t.inv(n))},e.FpLegendre=_,e.FpIsSquare=function(t){const e=_(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},e.nLength=w,e.Field=function(t,e,n=!1,a={}){if(t<=i)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:c}=w(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:t,BITS:o,BYTES:c,MASK:(0,r.bitMask)(o),ZERO:i,ONE:s,create:e=>d(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&s)===s,neg:e=>d(-e,t),eql:(t,e)=>t===e,sqr:e=>d(e*e,t),add:(e,n)=>d(e+n,t),sub:(e,n)=>d(e-n,t),mul:(e,n)=>d(e*n,t),pow:(t,e)=>m(u,t,e),div:(e,n)=>d(e*f(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>f(e,t),sqrt:a.sqrt||(e=>(l||(l=g(t)),l(u,e))),invertBatch:t=>b(u,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?(0,r.numberToBytesLE)(t,c):(0,r.numberToBytesBE)(t,c),fromBytes:t=>{if(t.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+t.length);return n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t)}});return Object.freeze(u)},e.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},e.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},e.hashToPrivateScalar=function(t,e,n=!1){const i=(t=(0,r.ensureBytes)("privateHash",t)).length,a=w(e).nByteLength+8;if(a<24||i<a||i>1024)throw new Error("hashToPrivateScalar: expected "+a+"-1024 bytes of input, got "+i);return d(n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t),e-s)+s},e.getFieldBytesLength=E,e.getMinHashLength=v,e.mapHashToField=function(t,e,n=!1){const i=t.length,a=E(e),o=v(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const c=d(n?(0,r.bytesToNumberBE)(t):(0,r.bytesToNumberLE)(t),e-s)+s;return n?(0,r.numberToBytesLE)(c,a):(0,r.numberToBytesBE)(c,a)};const r=n(1484),i=BigInt(0),s=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function d(t,e){const n=t%e;return n>=i?n:e+n}function h(t,e,n){if(e<i)throw new Error("invalid exponent, negatives unsupported");if(n<=i)throw new Error("invalid modulus");if(n===s)return i;let r=s;for(;e>i;)e&s&&(r=r*t%n),t=t*t%n,e>>=s;return r}function f(t,e){if(t===i)throw new Error("invert: expected non-zero number");if(e<=i)throw new Error("invert: expected positive modulus, got "+e);let n=d(t,e),r=e,a=i,o=s,c=s,l=i;for(;n!==i;){const t=r/n,e=r%n,i=a-c*t,s=o-l*t;r=n,n=e,a=c,o=l,c=i,l=s}if(r!==s)throw new Error("invert: does not exist");return d(a,e)}function p(t){const e=(t-s)/a;let n,r,o;for(n=t-s,r=0;n%a===i;n/=a,r++);for(o=a;o<t&&h(o,e,t)!==t-s;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const l=(n+s)/a;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,o),n),u=t.pow(i,l),d=t.pow(i,n);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(d);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,s<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),d=t.mul(d,c),a=e}return u}}function g(t){if(t%c===o){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%u===l){const e=(t-l)/u;return function(t,n){const r=t.mul(n,a),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,a),i),c=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(t)}e.isNegativeLE=(t,e)=>(d(t,e)&s)===s;const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(t,e,n){if(n<i)throw new Error("invalid exponent, negatives unsupported");if(n===i)return t.ONE;if(n===s)return e;let r=t.ONE,a=e;for(;n>i;)n&s&&(r=t.mul(r,a)),a=t.sqr(a),n>>=s;return r}function b(t,e){const n=new Array(e.length),r=e.reduce((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r)),t.ONE),i=t.inv(r);return e.reduceRight((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r)),i),n}function _(t){const e=(t-s)/a;return(t,n)=>t.pow(n,e)}function w(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function E(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function v(t){const e=E(t);return e+Math.ceil(e/2)}},5920(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateOpts=i,e.splitConstants=function(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n},e.poseidon=function(t){const e=i(t),{Fp:n,mds:r,roundConstants:s,rounds:a,roundsPartial:o,sboxFn:c,t:l}=e,u=e.roundsFull/2,d=e.reversePartialPowIdx?l-1:0,h=(t,e,i)=>(t=t.map((t,e)=>n.add(t,s[i][e])),e?t=t.map(t=>c(t)):t[d]=c(t[d]),t=r.map(e=>e.reduce((e,r,i)=>n.add(e,n.mulN(r,t[i])),n.ZERO))),f=function(t){if(!Array.isArray(t)||t.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)});let e=0;for(let n=0;n<u;n++)t=h(t,!0,e++);for(let n=0;n<o;n++)t=h(t,!1,e++);for(let n=0;n<u;n++)t=h(t,!0,e++);if(e!==a)throw new Error("invalid number of rounds");return t};return f.roundConstants=s,f};const r=n(4967);function i(t){const{Fp:e,mds:n,reversePartialPowIdx:i,roundConstants:s}=t,{roundsFull:a,roundsPartial:o,sboxPower:c,t:l}=t;(0,r.validateField)(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: invalid MDS matrix");const u=n.map(t=>{if(!Array.isArray(t)||t.length!==l)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==i&&"boolean"!=typeof i)throw new Error("invalid param reversePartialPowIdx="+i);if(1&a)throw new Error("roundsFull is not even"+a);const d=a+o;if(!Array.isArray(s)||s.length!==d)throw new Error("Poseidon: invalid round constants");const h=s.map(t=>{if(!Array.isArray(t)||t.length!==l)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=t=>(0,r.FpPow)(e,t,f);return 3===c?p=t=>e.mul(e.sqrN(t),t):5===c&&(p=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:d,sboxFn:p,roundConstants:h,mds:u})}},1484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=e.bitMask=void 0,e.isBytes=s,e.abytes=a,e.abool=function(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)},e.bytesToHex=c,e.numberToHexUnpadded=l,e.hexToNumber=u,e.hexToBytes=h,e.bytesToNumberBE=function(t){return u(c(t))},e.bytesToNumberLE=function(t){return a(t),u(c(Uint8Array.from(t).reverse()))},e.numberToBytesBE=f,e.numberToBytesLE=function(t,e){return f(t,e).reverse()},e.numberToVarBytesBE=function(t){return h(l(t))},e.ensureBytes=function(t,e,n){let r;if("string"==typeof e)try{r=h(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!s(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r},e.concatBytes=p,e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},e.utf8ToBytes=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))},e.inRange=y,e.aInRange=function(t,e,n,r){if(!y(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)},e.bitLen=function(t){let e;for(e=0;t>n;t>>=r,e+=1);return e},e.bitGet=function(t,e){return t>>BigInt(e)&r},e.bitSet=function(t,e,i){return t|(i?r:n)<<BigInt(e)},e.createHmacDrbg=function(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=m(t),i=m(t),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...t)=>n(i,r,...t),c=(t=m())=>{i=o(b([0]),t),r=o(),0!==t.length&&(i=o(b([1]),t),r=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=o();const e=r.slice();n.push(e),t+=r.length}return p(...n)};return(t,e)=>{let n;for(a(),c(t);!(n=e(l()));)c();return a(),n}},e.validateObject=function(t,e,n={}){const r=(e,n,r)=>{const i=_[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t},e.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}};const n=BigInt(0),r=BigInt(1),i=BigInt(2);function s(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function a(t){if(!s(t))throw new Error("Uint8Array expected")}const o=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function c(t){a(t);let e="";for(let n=0;n<t.length;n++)e+=o[t[n]];return e}function l(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function u(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?n:BigInt("0x"+t)}function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=d(t.charCodeAt(i)),s=d(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function f(t,e){return h(t.toString(16).padStart(2*e,"0"))}function p(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];a(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const g=t=>"bigint"==typeof t&&n<=t;function y(t,e,n){return g(t)&&g(e)&&g(n)&&e<=t&&t<n}e.bitMask=t=>(i<<BigInt(t-1))-r;const m=t=>new Uint8Array(t),b=t=>Uint8Array.from(t),_={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||s(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};e.notImplemented=()=>{throw new Error("not implemented")}},1705(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=g,e.weierstrass=function(t){const n=function(t){const e=(0,r.validateBasic)(t);return s.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:c,n:l}=n,h=c.BYTES+1,f=2*c.BYTES+1;function p(t){return i.mod(t,l)}function y(t){return i.invert(t,l)}const{ProjectivePoint:m,normPrivateKeyToScalar:b,weierstrassEquation:_,isWithinCurveOrder:w}=g({...n,toBytes(t,e,n){const r=e.toAffine(),i=c.toBytes(r.x),o=s.concatBytes;return(0,a.abool)("isCompressed",n),n?o(Uint8Array.from([e.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,c.toBytes(r.y))},fromBytes(t){const e=t.length,n=t[0],r=t.subarray(1);if(e!==h||2!==n&&3!==n){if(e===f&&4===n)return{x:c.fromBytes(r.subarray(0,c.BYTES)),y:c.fromBytes(r.subarray(c.BYTES,2*c.BYTES))};throw new Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+e)}{const t=s.bytesToNumberBE(r);if(!s.inRange(t,d,c.ORDER))throw new Error("Point is not on curve");const e=_(t);let i;try{i=c.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!=((i&d)===d)&&(i=c.neg(i)),{x:t,y:i}}}}),E=t=>s.bytesToHex(s.numberToBytesBE(t,n.nByteLength));function v(t){return t>l>>d}const A=(t,e,n)=>s.bytesToNumberBE(t.slice(e,n));class T{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const e=n.nByteLength;return t=(0,a.ensureBytes)("compactSignature",t,2*e),new T(A(t,0,e),A(t,e,2*e))}static fromDER(t){const{r:n,s:r}=e.DER.toSig((0,a.ensureBytes)("DER",t));return new T(n,r)}assertValidity(){s.aInRange("r",this.r,d,l),s.aInRange("s",this.s,d,l)}addRecoveryBit(t){return new T(this.r,this.s,t)}recoverPublicKey(t){const{r:e,s:r,recovery:i}=this,s=x((0,a.ensureBytes)("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const o=2===i||3===i?e+n.n:e;if(o>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&i?"03":"02",u=m.fromHex(l+E(o)),d=y(o),h=p(-s*d),f=p(r*d),g=m.BASE.multiplyAndAddUnsafe(u,h,f);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const S={isValidPrivateKey(t){try{return b(t),!0}catch(t){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const t=i.getMinHashLength(n.n);return i.mapHashToField(n.randomBytes(t),n.n)},precompute:(t=8,e=m.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function I(t){const e=s.isBytes(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===h||r===f:n?r===2*h||r===2*f:t instanceof m}const k=n.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=s.bytesToNumberBE(t),r=8*t.length-n.nBitLength;return r>0?e>>BigInt(r):e},x=n.bits2int_modN||function(t){return p(k(t))},B=s.bitMask(n.nBitLength);function C(t){return s.aInRange("num < 2^"+n.nBitLength,t,u,B),s.numberToBytesBE(t,n.nByteLength)}const R={lowS:n.lowS,prehash:!1},O={lowS:n.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function(t,e=!0){return m.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(I(t))throw new Error("first arg must be private key");if(!I(e))throw new Error("second arg must be public key");return m.fromHex(e).multiply(b(t)).toRawBytes(n)},sign:function(t,e,r=R){const{seed:i,k2sig:l}=function(t,e,r=R){if(["recovered","canonical"].some(t=>t in r))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:l}=n;let{lowS:h,prehash:f,extraEntropy:g}=r;null==h&&(h=!0),t=(0,a.ensureBytes)("msgHash",t),o(r),f&&(t=(0,a.ensureBytes)("prehashed msgHash",i(t)));const _=x(t),E=b(e),A=[C(E),C(_)];if(null!=g&&!1!==g){const t=!0===g?l(c.BYTES):g;A.push((0,a.ensureBytes)("extraEntropy",t))}const S=s.concatBytes(...A),I=_;return{seed:S,k2sig:function(t){const e=k(t);if(!w(e))return;const n=y(e),r=m.BASE.multiply(e).toAffine(),i=p(r.x);if(i===u)return;const s=p(n*p(I+i*E));if(s===u)return;let a=(r.x===i?0:2)|Number(r.y&d),o=s;return h&&v(s)&&(o=function(t){return v(t)?p(-t):t}(s),a^=1),new T(i,o,a)}}}(t,e,r),h=n;return s.createHmacDrbg(h.hash.outputLen,h.nByteLength,h.hmac)(i,l)},verify:function(t,r,i,c=O){const l=t;r=(0,a.ensureBytes)("msgHash",r),i=(0,a.ensureBytes)("publicKey",i);const{lowS:u,prehash:d,format:h}=c;if(o(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof l||s.isBytes(l),g=!f&&!h&&"object"==typeof l&&null!==l&&"bigint"==typeof l.r&&"bigint"==typeof l.s;if(!f&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,_;try{if(g&&(b=new T(l.r,l.s)),f){try{"compact"!==h&&(b=T.fromDER(l))}catch(t){if(!(t instanceof e.DER.Err))throw t}b||"der"===h||(b=T.fromCompact(l))}_=m.fromHex(i)}catch(t){return!1}if(!b)return!1;if(u&&b.hasHighS())return!1;d&&(r=n.hash(r));const{r:w,s:E}=b,v=x(r),A=y(E),S=p(v*A),I=p(w*A),k=m.BASE.multiplyAndAddUnsafe(_,S,I)?.toAffine();return!!k&&p(k.x)===w},ProjectivePoint:m,Signature:T,utils:S}},e.SWUFpSqrtRatio=y,e.mapToCurveSimpleSWU=function(t,e){if(i.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=y(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,a,o,c,l,u,d;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),a=t.add(s,t.ONE),a=t.mul(a,e.B),o=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),o=t.mul(o,e.A),s=t.sqr(a),l=t.sqr(o),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,a),l=t.mul(l,o),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(i,a);const{isValid:h,value:f}=n(s,l);d=t.mul(i,r),d=t.mul(d,f),u=t.cmov(u,a,h),d=t.cmov(d,f,h);const p=t.isOdd(r)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),u=t.div(u,o),{x:u,y:d}}};const r=n(2422),i=n(4967),s=n(1484),a=n(1484);function o(t){void 0!==t.lowS&&(0,a.abool)("lowS",t.lowS),void 0!==t.prehash&&(0,a.abool)("prehash",t.prehash)}const{bytesToNumberBE:c,hexToBytes:l}=s;e.DER={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,n)=>{const{Err:r}=e.DER;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&n.length)throw new r("tlv.encode: unpadded data");const i=n.length/2,a=s.numberToHexUnpadded(i);if(a.length/2&128)throw new r("tlv.encode: long form length too big");const o=i>127?s.numberToHexUnpadded(a.length/2|128):"";return s.numberToHexUnpadded(t)+o+a+n},decode(t,n){const{Err:r}=e.DER;let i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");const s=n[i++];let a=0;if(128&s){const t=127&s;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");const e=n.subarray(i,i+t);if(e.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===e[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of e)a=a<<8|t;if(i+=t,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=s;const o=n.subarray(i,i+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:n.subarray(i+a)}}},_int:{encode(t){const{Err:n}=e.DER;if(t<u)throw new n("integer: negative integers are not allowed");let r=s.numberToHexUnpadded(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new n("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:n}=e.DER;if(128&t[0])throw new n("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("invalid signature integer: unnecessary leading zero");return c(t)}},toSig(t){const{Err:n,_int:r,_tlv:i}=e.DER,a="string"==typeof t?l(t):t;s.abytes(a);const{v:o,l:c}=i.decode(48,a);if(c.length)throw new n("invalid signature: left bytes after parsing");const{v:u,l:d}=i.decode(2,o),{v:h,l:f}=i.decode(2,d);if(f.length)throw new n("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(h)}},hexFromSig(t){const{_tlv:n,_int:r}=e.DER,i=n.encode(2,r.encode(t.r))+n.encode(2,r.encode(t.s));return n.encode(48,i)}};const u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function g(t){const e=function(t){const e=(0,r.validateBasic)(t);s.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:i,a}=e;if(n){if(!i.eql(a,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,o=i.Field(e.n,e.nBitLength),c=e.toBytes||((t,e,r)=>{const i=e.toAffine();return s.concatBytes(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),l=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function h(t){const{a:r,b:i}=e,s=n.sqr(t),a=n.mul(s,t);return n.add(n.add(a,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),h(e.Gx)))throw new Error("bad generator point: equation left != right");function p(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:c}=e;if(n&&"bigint"!=typeof t){if(s.isBytes(t)&&(t=s.bytesToHex(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let l;try{l="bigint"==typeof t?t:s.bytesToNumberBE((0,a.ensureBytes)("private key",t,r))}catch(e){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return o&&(l=i.mod(l,c)),s.aInRange("private key",l,d,c),l}function g(t){if(!(t instanceof b))throw new Error("ProjectivePoint expected")}const y=(0,a.memoized)((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const a=t.is0();null==e&&(e=a?n.ONE:n.inv(s));const o=n.mul(r,e),c=n.mul(i,e),l=n.mul(s,e);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),m=(0,a.memoized)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=h(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof b)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?b.ZERO:new b(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map(t=>t.pz));return t.map((t,n)=>t.toAffine(e[n])).map(b.fromAffine)}static fromHex(t){const e=b.fromAffine(l((0,a.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return b.BASE.multiply(p(t))}static msm(t,e){return(0,r.pippenger)(b,o,t,e)}_setWindowSize(t){w.setWindowSize(this,t)}assertValidity(){m(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){g(t);const{px:e,py:r,pz:i}=this,{px:s,py:a,pz:o}=t,c=n.eql(n.mul(e,o),n.mul(s,i)),l=n.eql(n.mul(r,o),n.mul(a,i));return c&&l}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,f),{px:s,py:a,pz:o}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,d=n.mul(s,s),h=n.mul(a,a),p=n.mul(o,o),g=n.mul(s,a);return g=n.add(g,g),u=n.mul(s,o),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,p),l=n.add(c,l),c=n.sub(h,l),l=n.add(h,l),l=n.mul(c,l),c=n.mul(g,c),u=n.mul(i,u),p=n.mul(t,p),g=n.sub(d,p),g=n.mul(t,g),g=n.add(g,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,p),d=n.mul(d,g),l=n.add(l,d),p=n.mul(a,o),p=n.add(p,p),d=n.mul(p,g),c=n.sub(c,d),u=n.mul(p,h),u=n.add(u,u),u=n.add(u,u),new b(c,l,u)}add(t){g(t);const{px:r,py:i,pz:s}=this,{px:a,py:o,pz:c}=t;let l=n.ZERO,u=n.ZERO,d=n.ZERO;const h=e.a,p=n.mul(e.b,f);let y=n.mul(r,a),m=n.mul(i,o),_=n.mul(s,c),w=n.add(r,i),E=n.add(a,o);w=n.mul(w,E),E=n.add(y,m),w=n.sub(w,E),E=n.add(r,s);let v=n.add(a,c);return E=n.mul(E,v),v=n.add(y,_),E=n.sub(E,v),v=n.add(i,s),l=n.add(o,c),v=n.mul(v,l),l=n.add(m,_),v=n.sub(v,l),d=n.mul(h,E),l=n.mul(p,_),d=n.add(l,d),l=n.sub(m,d),d=n.add(m,d),u=n.mul(l,d),m=n.add(y,y),m=n.add(m,y),_=n.mul(h,_),E=n.mul(p,E),m=n.add(m,_),_=n.sub(y,_),_=n.mul(h,_),E=n.add(E,_),y=n.mul(m,E),u=n.add(u,y),y=n.mul(v,E),l=n.mul(w,l),l=n.sub(l,y),y=n.mul(w,m),d=n.mul(v,d),d=n.add(d,y),new b(l,u,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(b.ZERO)}wNAF(t){return w.wNAFCached(this,t,b.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:i}=e;s.aInRange("scalar",t,u,i);const a=b.ZERO;if(t===u)return a;if(this.is0()||t===d)return this;if(!r||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,t,b.normalizeZ);let{k1neg:o,k1:c,k2neg:l,k2:h}=r.splitScalar(t),f=a,p=a,g=this;for(;c>u||h>u;)c&d&&(f=f.add(g)),h&d&&(p=p.add(g)),g=g.double(),c>>=d,h>>=d;return o&&(f=f.negate()),l&&(p=p.negate()),p=new b(n.mul(p.px,r.beta),p.py,p.pz),f.add(p)}multiply(t){const{endo:r,n:i}=e;let a,o;if(s.aInRange("scalar",t,d,i),r){const{k1neg:e,k1:i,k2neg:s,k2:c}=r.splitScalar(t);let{p:l,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);l=w.constTimeNegate(e,l),d=w.constTimeNegate(s,d),d=new b(n.mul(d.px,r.beta),d.py,d.pz),a=l.add(d),o=u.add(h)}else{const{p:e,f:n}=this.wNAF(t);a=e,o=n}return b.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(t,e,n){const r=b.BASE,i=(t,e)=>e!==u&&e!==d&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return y(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===d)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===d?this:n?n(b,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,a.abool)("isCompressed",t),this.assertValidity(),c(b,this,t)}toHex(t=!0){return(0,a.abool)("isCompressed",t),s.bytesToHex(this.toRawBytes(t))}}b.BASE=new b(e.Gx,e.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const _=e.nBitLength,w=(0,r.wNAF)(b,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(t){return s.inRange(t,d,e.n)}}}function y(t,e){const n=t.ORDER;let r=u;for(let t=n-d;t%h===u;t/=h)r+=d;const i=r,s=h<<i-d-d,a=s*h,o=(n-d)/a,c=(o-d)/h,l=a-d,g=s,y=t.pow(e,o),m=t.pow(e,(o+d)/h);let b=(e,n)=>{let r=y,s=t.pow(n,l),a=t.sqr(s);a=t.mul(a,n);let o=t.mul(e,a);o=t.pow(o,c),o=t.mul(o,s),s=t.mul(o,n),a=t.mul(o,e);let u=t.mul(a,s);o=t.pow(u,g);let f=t.eql(o,t.ONE);s=t.mul(a,m),o=t.mul(u,r),a=t.cmov(s,a,f),u=t.cmov(o,u,f);for(let e=i;e>d;e--){let n=e-h;n=h<<n-d;let i=t.pow(u,n);const o=t.eql(i,t.ONE);s=t.mul(a,r),r=t.mul(r,r),i=t.mul(u,r),a=t.cmov(s,a,o),u=t.cmov(i,u,o)}return{isValid:f,value:a}};if(t.ORDER%p===f){const n=(t.ORDER-f)/p,r=t.sqrt(t.neg(e));b=(e,i)=>{let s=t.sqr(i);const a=t.mul(e,i);s=t.mul(s,a);let o=t.pow(s,n);o=t.mul(o,a);const c=t.mul(o,r),l=t.mul(t.sqr(o),i),u=t.eql(l,e);return{isValid:u,value:t.cmov(c,o,u)}}}return b}},3764(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=a;const o={number:n,bytes:r,hash:i,exists:s,output:a};e.default=o},5311(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(3764),i=n(1130);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,a=(t=(0,i.toBytes)(t)).length;for(let r=0;r<a;){const o=Math.min(s-this.pos,a-r);if(o===s){const e=(0,i.createView)(t);for(;s<=a-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:a}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let t=o;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,s-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,i.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,d[t],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},5510(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},3788(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const r=n(3764),i=n(1130);class s extends i.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(t);const n=(0,i.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(n.length>s?t.create().update(n).digest():n);for(let t=0;t<a.length;t++)a[t]^=54;this.iHash.update(a),this.oHash=t.create();for(let t=0;t<a.length;t++)a[t]^=106;this.oHash.update(a),a.fill(0)}update(t){return(0,r.aexists)(this),this.iHash.update(t),this}digestInto(t){(0,r.aexists)(this),(0,r.abytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:a}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=s,e.hmac=(t,e,n)=>new s(t,e).update(n).digest(),e.hmac.create=(t,e)=>new s(t,e)},1696(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(5311),i=n(1130),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)o[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],n=o[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;o[t]=s+o[t-7]+r+o[t-16]|0}let{A:n,B:a,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+(0,r.Chi)(u,d,h)+s[t]+o[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,a,c)|0;f=h,h=d,d=u,u=l+e|0,l=c,c=a,a=n,n=e+p|0}n=n+this.A|0,a=a+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,a,c,l,u,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new l)},1130(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=a(t.charCodeAt(i)),s=a(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(5510),i=n(3764);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},8510(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;const r=n(1696),i=n(1130),s=n(3562),a=n(1761),o=n(4967),c=n(1484),l=n(1705),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(t,e)=>(t+e/f)/e;function g(t){const e=u,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),l=BigInt(88),d=t*t*t%e,h=d*d*t%e,p=(0,o.pow2)(h,n,e)*h%e,g=(0,o.pow2)(p,n,e)*h%e,m=(0,o.pow2)(g,f,e)*d%e,b=(0,o.pow2)(m,i,e)*m%e,_=(0,o.pow2)(b,s,e)*b%e,w=(0,o.pow2)(_,c,e)*_%e,E=(0,o.pow2)(w,l,e)*w%e,v=(0,o.pow2)(E,c,e)*_%e,A=(0,o.pow2)(v,n,e)*h%e,T=(0,o.pow2)(A,a,e)*b%e,S=(0,o.pow2)(T,r,e)*d%e,I=(0,o.pow2)(S,f,e);if(!y.eql(y.sqr(I),t))throw new Error("Cannot find square root");return I}const y=(0,o.Field)(u,void 0,void 0,{sqrt:g});e.secp256k1=(0,s.createCurve)({a:BigInt(0),b:BigInt(7),Fp:y,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=d,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),c=p(s*t,e),l=p(-r*t,e);let u=(0,o.mod)(t-c*n-l*i,e),f=(0,o.mod)(-c*r-l*s,e);const g=u>a,y=f>a;if(g&&(u=e-u),y&&(f=e-f),u>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:g,k1:u,k2neg:y,k2:f}}}},r.sha256);const m=BigInt(0),b={};function _(t,...e){let n=b[t];if(void 0===n){const e=(0,r.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));n=(0,c.concatBytes)(e,e),b[t]=n}return(0,r.sha256)((0,c.concatBytes)(n,...e))}const w=t=>t.toRawBytes(!0).slice(1),E=t=>(0,c.numberToBytesBE)(t,32),v=t=>(0,o.mod)(t,u),A=t=>(0,o.mod)(t,d),T=e.secp256k1.ProjectivePoint;function S(t){let n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=T.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:A(-n),bytes:w(r)}}function I(t){(0,c.aInRange)("x",t,h,u);const e=v(t*t);let n=g(v(e*t+BigInt(7)));n%f!==m&&(n=v(-n));const r=new T(t,n,h);return r.assertValidity(),r}const k=c.bytesToNumberBE;function x(...t){return A(k(_("BIP0340/challenge",...t)))}function B(t,e,n){const r=(0,c.ensureBytes)("signature",t,64),i=(0,c.ensureBytes)("message",e),s=(0,c.ensureBytes)("publicKey",n,32);try{const t=I(k(s)),e=k(r.subarray(0,32));if(!(0,c.inRange)(e,h,u))return!1;const n=k(r.subarray(32,64));if(!(0,c.inRange)(n,h,d))return!1;const f=x(E(e),w(t),i),p=(a=t,o=n,l=A(-f),T.BASE.multiplyAndAddUnsafe(a,o,l));return!(!p||!p.hasEvenY()||p.toAffine().x!==e)}catch(t){return!1}var a,o,l}e.schnorr={getPublicKey:function(t){return S(t).bytes},sign:function(t,e,n=(0,i.randomBytes)(32)){const r=(0,c.ensureBytes)("message",t),{bytes:s,scalar:a}=S(e),o=(0,c.ensureBytes)("auxRand",n,32),l=E(a^k(_("BIP0340/aux",o))),u=_("BIP0340/nonce",l,s,r),d=A(k(u));if(d===m)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=S(d),p=x(h,s,r),g=new Uint8Array(64);if(g.set(h,0),g.set(E(A(f+p*a)),32),!B(g,r,s))throw new Error("sign: Invalid signature produced");return g},verify:B,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:w,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:_,mod:o.mod}};const C=(()=>(0,a.isogenyMap)(y,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))))(),R=(()=>(0,l.mapToCurveSimpleSWU)(y,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:y.create(BigInt("-11"))}))(),O=(()=>(0,a.createHasher)(e.secp256k1.ProjectivePoint,t=>{const{x:e,y:n}=R(y.create(t[0]));return C(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve},7202(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA512_IV=e.SHA384_IV=e.SHA224_IV=e.SHA256_IV=e.HashMD=void 0,e.setBigUint64=i,e.Chi=function(t,e,n){return t&e^~t&n},e.Maj=function(t,e,n){return t&e^t&n^e&n};const r=n(9175);function i(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}class s extends r.Hash{constructor(t,e,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=(0,r.createView)(this.buffer)}update(t){(0,r.aexists)(this),t=(0,r.toBytes)(t),(0,r.abytes)(t);const{view:e,buffer:n,blockLen:i}=this,s=t.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const e=(0,r.createView)(t);for(;i<=s-a;a+=i)this.process(e,a);continue}n.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:a}=this;let{pos:o}=this;e[o++]=128,(0,r.clean)(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let t=o;t<s;t++)e[t]=0;i(n,s-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,r.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,d[t],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=i,t.length=r,t.pos=a,r%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}e.HashMD=s,e.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),e.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),e.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])},2318(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toBig=e.shrSL=e.shrSH=e.rotrSL=e.rotrSH=e.rotrBL=e.rotrBH=e.rotr32L=e.rotr32H=e.rotlSL=e.rotlSH=e.rotlBL=e.rotlBH=e.add5L=e.add5H=e.add4L=e.add4H=e.add3L=e.add3H=void 0,e.add=_,e.fromBig=i,e.split=s;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:n,l:o}=i(t[a],e);[r[a],s[a]]=[n,o]}return[r,s]}const a=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=a;const o=(t,e,n)=>t>>>n;e.shrSH=o;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const l=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=l;const u=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=u;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:c,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},5145(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},7076(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha512_224=e.sha512_256=e.sha384=e.sha512=e.sha224=e.sha256=e.SHA512_256=e.SHA512_224=e.SHA384=e.SHA512=e.SHA224=e.SHA256=void 0;const r=n(7202),i=n(2318),s=n(9175),a=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array(64);class c extends r.HashMD{constructor(t=32){super(64,t,8,!1),this.A=0|r.SHA256_IV[0],this.B=0|r.SHA256_IV[1],this.C=0|r.SHA256_IV[2],this.D=0|r.SHA256_IV[3],this.E=0|r.SHA256_IV[4],this.F=0|r.SHA256_IV[5],this.G=0|r.SHA256_IV[6],this.H=0|r.SHA256_IV[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)o[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],n=o[t-2],r=(0,s.rotr)(e,7)^(0,s.rotr)(e,18)^e>>>3,i=(0,s.rotr)(n,17)^(0,s.rotr)(n,19)^n>>>10;o[t]=i+o[t-7]+r+o[t-16]|0}let{A:n,B:i,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,s.rotr)(u,6)^(0,s.rotr)(u,11)^(0,s.rotr)(u,25))+(0,r.Chi)(u,d,h)+a[t]+o[t]|0,p=((0,s.rotr)(n,2)^(0,s.rotr)(n,13)^(0,s.rotr)(n,22))+(0,r.Maj)(n,i,c)|0;f=h,h=d,d=u,u=l+e|0,l=c,c=i,i=n,n=e+p|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,c,l,u,d,h,f)}roundClean(){(0,s.clean)(o)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,s.clean)(this.buffer)}}e.SHA256=c;class l extends c{constructor(){super(28),this.A=0|r.SHA224_IV[0],this.B=0|r.SHA224_IV[1],this.C=0|r.SHA224_IV[2],this.D=0|r.SHA224_IV[3],this.E=0|r.SHA224_IV[4],this.F=0|r.SHA224_IV[5],this.G=0|r.SHA224_IV[6],this.H=0|r.SHA224_IV[7]}}e.SHA224=l;const u=(()=>i.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),d=(()=>u[0])(),h=(()=>u[1])(),f=new Uint32Array(80),p=new Uint32Array(80);class g extends r.HashMD{constructor(t=64){super(128,t,16,!1),this.Ah=0|r.SHA512_IV[0],this.Al=0|r.SHA512_IV[1],this.Bh=0|r.SHA512_IV[2],this.Bl=0|r.SHA512_IV[3],this.Ch=0|r.SHA512_IV[4],this.Cl=0|r.SHA512_IV[5],this.Dh=0|r.SHA512_IV[6],this.Dl=0|r.SHA512_IV[7],this.Eh=0|r.SHA512_IV[8],this.El=0|r.SHA512_IV[9],this.Fh=0|r.SHA512_IV[10],this.Fl=0|r.SHA512_IV[11],this.Gh=0|r.SHA512_IV[12],this.Gl=0|r.SHA512_IV[13],this.Hh=0|r.SHA512_IV[14],this.Hl=0|r.SHA512_IV[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:s,Dh:a,Dl:o,Eh:c,El:l,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[t,e,n,r,i,s,a,o,c,l,u,d,h,f,p,g]}set(t,e,n,r,i,s,a,o,c,l,u,d,h,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)f[n]=t.getUint32(e),p[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|f[t-15],n=0|p[t-15],r=i.rotrSH(e,n,1)^i.rotrSH(e,n,8)^i.shrSH(e,n,7),s=i.rotrSL(e,n,1)^i.rotrSL(e,n,8)^i.shrSL(e,n,7),a=0|f[t-2],o=0|p[t-2],c=i.rotrSH(a,o,19)^i.rotrBH(a,o,61)^i.shrSH(a,o,6),l=i.rotrSL(a,o,19)^i.rotrBL(a,o,61)^i.shrSL(a,o,6),u=i.add4L(s,l,p[t-7],p[t-16]),d=i.add4H(u,r,c,f[t-7],f[t-16]);f[t]=0|d,p[t]=0|u}let{Ah:n,Al:r,Bh:s,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:g,El:y,Fh:m,Fl:b,Gh:_,Gl:w,Hh:E,Hl:v}=this;for(let t=0;t<80;t++){const e=i.rotrSH(g,y,14)^i.rotrSH(g,y,18)^i.rotrBH(g,y,41),A=i.rotrSL(g,y,14)^i.rotrSL(g,y,18)^i.rotrBL(g,y,41),T=g&m^~g&_,S=y&b^~y&w,I=i.add5L(v,A,S,h[t],p[t]),k=i.add5H(I,E,e,T,d[t],f[t]),x=0|I,B=i.rotrSH(n,r,28)^i.rotrBH(n,r,34)^i.rotrBH(n,r,39),C=i.rotrSL(n,r,28)^i.rotrBL(n,r,34)^i.rotrBL(n,r,39),R=n&s^n&o^s&o,O=r&a^r&c^a&c;E=0|_,v=0|w,_=0|m,w=0|b,m=0|g,b=0|y,({h:g,l:y}=i.add(0|l,0|u,0|k,0|x)),l=0|o,u=0|c,o=0|s,c=0|a,s=0|n,a=0|r;const N=i.add3L(x,C,O);n=i.add3H(N,k,B,R),r=0|N}({h:n,l:r}=i.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:a}=i.add(0|this.Bh,0|this.Bl,0|s,0|a)),({h:o,l:c}=i.add(0|this.Ch,0|this.Cl,0|o,0|c)),({h:l,l:u}=i.add(0|this.Dh,0|this.Dl,0|l,0|u)),({h:g,l:y}=i.add(0|this.Eh,0|this.El,0|g,0|y)),({h:m,l:b}=i.add(0|this.Fh,0|this.Fl,0|m,0|b)),({h:_,l:w}=i.add(0|this.Gh,0|this.Gl,0|_,0|w)),({h:E,l:v}=i.add(0|this.Hh,0|this.Hl,0|E,0|v)),this.set(n,r,s,a,o,c,l,u,g,y,m,b,_,w,E,v)}roundClean(){(0,s.clean)(f,p)}destroy(){(0,s.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.SHA512=g;class y extends g{constructor(){super(48),this.Ah=0|r.SHA384_IV[0],this.Al=0|r.SHA384_IV[1],this.Bh=0|r.SHA384_IV[2],this.Bl=0|r.SHA384_IV[3],this.Ch=0|r.SHA384_IV[4],this.Cl=0|r.SHA384_IV[5],this.Dh=0|r.SHA384_IV[6],this.Dl=0|r.SHA384_IV[7],this.Eh=0|r.SHA384_IV[8],this.El=0|r.SHA384_IV[9],this.Fh=0|r.SHA384_IV[10],this.Fl=0|r.SHA384_IV[11],this.Gh=0|r.SHA384_IV[12],this.Gl=0|r.SHA384_IV[13],this.Hh=0|r.SHA384_IV[14],this.Hl=0|r.SHA384_IV[15]}}e.SHA384=y;const m=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),b=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class _ extends g{constructor(){super(28),this.Ah=0|m[0],this.Al=0|m[1],this.Bh=0|m[2],this.Bl=0|m[3],this.Ch=0|m[4],this.Cl=0|m[5],this.Dh=0|m[6],this.Dl=0|m[7],this.Eh=0|m[8],this.El=0|m[9],this.Fh=0|m[10],this.Fl=0|m[11],this.Gh=0|m[12],this.Gl=0|m[13],this.Hh=0|m[14],this.Hl=0|m[15]}}e.SHA512_224=_;class w extends g{constructor(){super(32),this.Ah=0|b[0],this.Al=0|b[1],this.Bh=0|b[2],this.Bl=0|b[3],this.Ch=0|b[4],this.Cl=0|b[5],this.Dh=0|b[6],this.Dl=0|b[7],this.Eh=0|b[8],this.El=0|b[9],this.Fh=0|b[10],this.Fl=0|b[11],this.Gh=0|b[12],this.Gl=0|b[13],this.Hh=0|b[14],this.Hl=0|b[15]}}e.SHA512_256=w,e.sha256=(0,s.createHasher)(()=>new c),e.sha224=(0,s.createHasher)(()=>new l),e.sha512=(0,s.createHasher)(()=>new g),e.sha384=(0,s.createHasher)(()=>new y),e.sha512_256=(0,s.createHasher)(()=>new w),e.sha512_224=(0,s.createHasher)(()=>new _)},9175(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=i,e.anumber=s,e.abytes=a,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){a(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=function(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)},e.rotr=function(t,e){return t<<32-e|t>>>e},e.rotl=function(t,e){return t<<e|t>>>32-e>>>0},e.byteSwap=o,e.byteSwap32=c,e.bytesToHex=function(t){if(a(t),l)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=u[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(l)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=d(t.charCodeAt(i)),s=d(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=h,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=f,e.kdfInputToBytes=function(t){return"string"==typeof t&&(t=h(t)),a(t),t},e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];a(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("options should be object or undefined");return Object.assign(t,e)},e.createHasher=p,e.createOptHasher=g,e.createXOFer=y,e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")};const r=n(5145);function i(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function a(t,...e){if(!i(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function o(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function c(t){for(let e=0;e<t.length;e++)t[e]=o(t[e]);return t}e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.swap8IfBE=e.isLE?t=>t:t=>o(t),e.byteSwapIfBE=e.swap8IfBE,e.swap32IfBE=e.isLE?t=>t:c;const l=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),u=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function f(t){return"string"==typeof t&&(t=h(t)),a(t),t}function p(t){const e=e=>t().update(f(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function g(t){const e=(e,n)=>t(n).update(f(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}function y(t){const e=(e,n)=>t(n).update(f(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}e.nextTick=async()=>{},e.Hash=class{},e.wrapConstructor=p,e.wrapConstructorWithOpts=g,e.wrapXOFConstructorWithOpts=y},3203(t,e){"use strict";function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function r(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function s(t){if("function"!=typeof t)throw new Error("function expected");return!0}function a(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function o(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function c(t){if(!Array.isArray(t))throw new Error("array expected")}function l(t,e){if(!i(!0,e))throw new Error(`${t}: array of strings expected`)}function u(t,e){if(!i(!1,e))throw new Error(`${t}: array of numbers expected`)}function d(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map(t=>t.encode).reduceRight(n,e),decode:t.map(t=>t.decode).reduce(n,e)}}function h(t){const e="string"==typeof t?t.split(""):t,n=e.length;l("alphabet",e);const r=new Map(e.map((t,e)=>[t,e]));return{encode:r=>(c(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:e=>(c(e),e.map(e=>{a("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}function f(t=""){return a("join",t),{encode:e=>(l("join.decode",e),e.join(t)),decode:e=>(a("join.decode",e),e.split(t))}}function p(t,e="="){return o(t),a("padding",e),{encode(n){for(l("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){l("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function g(t){return s(t),{encode:t=>t,decode:e=>t(e)}}function y(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(c(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,t=>{if(o(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t}),a=s.length;for(;;){let t=0,o=!0;for(let i=r;i<a;i++){const a=s[i],c=e*t,l=c+a;if(!Number.isSafeInteger(l)||c/e!==t||l-a!==c)throw new Error("convertRadix: carry overflow");const u=l/n;t=l%n;const d=Math.floor(u);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==l)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0;const m=(t,e)=>0===e?t:m(e,t%e),b=(t,e)=>t+(e-m(t,e)),_=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function w(t,e,n,r){if(c(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(b(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${b(e,n)}`);let i=0,s=0;const a=_[e],l=_[n]-1,u=[];for(const r of t){if(o(r),r>=a)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)u.push((i>>s-n&l)>>>0);const t=_[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&l,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&u.push(i>>>0),u}function E(t){return o(t),{encode:e=>{if(!n(e))throw new Error("radix.encode input should be Uint8Array");return y(Array.from(e),256,t)},decode:e=>(u("radix.decode",e),Uint8Array.from(y(e,t,256)))}}function v(t,e=!1){if(o(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,t)>32||b(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return w(Array.from(r),8,t,!e)},decode:n=>(u("radix2.decode",n),Uint8Array.from(w(n,t,8,e)))}}function A(t){return s(t),function(...e){try{return t.apply(null,e)}catch(t){}}}function T(t,e){return o(t),s(e),{encode(r){if(!n(r))throw new Error("checksum.encode: input should be Uint8Array");const i=e(r).slice(0,t),s=new Uint8Array(r.length+t);return s.set(r),s.set(i,r.length),s},decode(r){if(!n(r))throw new Error("checksum.decode: input should be Uint8Array");const i=r.slice(0,-t),s=r.slice(-t),a=e(i).slice(0,t);for(let e=0;e<t;e++)if(a[e]!==s[e])throw new Error("Invalid checksum");return i}}}e.utils={alphabet:h,chain:d,checksum:T,convertRadix:y,convertRadix2:w,radix:E,radix2:v,join:f,padding:p},e.base16=d(v(4),h("0123456789ABCDEF"),f("")),e.base32=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),e.base32nopad=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),e.base32hex=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),e.base32hexnopad=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),e.base32crockford=d(v(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),g(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const S=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)();e.base64=S?{encode:t=>(r(t),t.toBase64()),decode:t=>(a("base64",t),Uint8Array.fromBase64(t,{lastChunkHandling:"strict"}))}:d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),e.base64nopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),e.base64url=S?{encode:t=>(r(t),t.toBase64({alphabet:"base64url"})),decode:t=>(a("base64",t),Uint8Array.fromBase64(t,{alphabet:"base64url"}))}:d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),e.base64urlnopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));const I=t=>d(E(58),h(t),f(""));e.base58=I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=I("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=I("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const k=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let n="";for(let r=0;r<t.length;r+=8){const i=t.subarray(r,r+8);n+=e.base58.encode(i).padStart(k[i.length],"1")}return n},decode(t){let n=[];for(let r=0;r<t.length;r+=11){const i=t.slice(r,r+11),s=k.indexOf(i.length),a=e.base58.decode(i);for(let t=0;t<a.length-s;t++)if(0!==a[t])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(a.slice(a.length-s)))}return Uint8Array.from(n)}},e.createBase58check=t=>d(T(4,e=>t(t(e))),e.base58),e.base58check=e.createBase58check;const x=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),B=[996825010,642813549,513874426,1027748829,705979059];function C(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<B.length;t++)1==(e>>t&1)&&(n^=B[t]);return n}function R(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=C(i)^n>>5}i=C(i);for(let e=0;e<r;e++)i=C(i)^31&t.charCodeAt(e);for(let t of e)i=C(i)^t;for(let t=0;t<6;t++)i=C(i);return i^=n,x.encode(w([i%_[30]],30,5,!1))}function O(t){const e="bech32"===t?1:734539939,r=v(5),i=r.decode,s=r.encode,o=A(i);function c(t,r,i=90){a("bech32.encode prefix",t),n(r)&&(r=Array.from(r)),u("bech32.encode",r);const s=t.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const o=s+7+r.length;if(!1!==i&&o>i)throw new TypeError(`Length ${o} exceeds limit ${i}`);const c=t.toLowerCase(),l=R(c,r,e);return`${c}1${x.encode(r)}${l}`}function l(t,n=90){a("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const l=x.decode(c).slice(0,-6),u=R(o,l,e);if(!c.endsWith(u))throw new Error(`Invalid checksum in ${t}: expected "${u}"`);return{prefix:o,words:l}}return{encode:c,decode:l,encodeFromBytes:function(t,e){return c(t,s(e))},decodeToBytes:function(t){const{prefix:e,words:n}=l(t,!1);return{prefix:e,words:n,bytes:i(n)}},decodeUnsafe:A(l),fromWords:i,fromWordsUnsafe:o,toWords:s}}e.bech32=O("bech32"),e.bech32m=O("bech32m"),e.utf8={encode:t=>(new TextDecoder).decode(t),decode:t=>(new TextEncoder).encode(t)};const N=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),D={encode:t=>(r(t),t.toHex()),decode:t=>(a("hex",t),Uint8Array.fromHex(t))};e.hex=N?D:d(v(4),h("0123456789abcdef"),f(""),g(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));const L={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},P="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";e.bytesToString=(t,e)=>{if("string"!=typeof t||!L.hasOwnProperty(t))throw new TypeError(P);if(!n(e))throw new TypeError("bytesToString() expects Uint8Array");return L[t].encode(e)},e.str=e.bytesToString,e.stringToBytes=(t,e)=>{if(!L.hasOwnProperty(t))throw new TypeError(P);if("string"!=typeof e)throw new TypeError("stringToBytes() expects string");return L[t].decode(e)},e.bytes=e.stringToBytes},4246(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poseidonSmall=e.Fp251=e.keccak=e.computeHashOnElements=e.utils=e.Signature=e.ProjectivePoint=e.CURVE=e._starkCurve=e.MAX_VALUE=void 0,e.normalizePrivateKey=y,e.getPublicKey=m,e.getSharedSecret=function(t,e){return p.getSharedSecret(y(t),e)},e.sign=function(t,e,n){const r=p.sign(_(t),y(e),n);return b(r),r},e.verify=function(t,e,n){if(!(t instanceof v)){const e=g(t);try{t=v.fromDER(e)}catch(n){if(!(n instanceof c.DER.Err))throw n;t=v.fromCompact(e)}}return b(t),p.verify(t,_(e),g(n))},e.grindKey=I,e.getStarkKey=function(t){return T(m(t,!0))},e.ethSigToPrivate=function(t){if(130!==(t=S(t)).length)throw new Error("Wrong ethereum signature");return I(t.substring(0,64))},e.getAccountPath=function(t,e,n,r){const i=k(L(t)),s=k(L(e)),a=l.hexToNumber(S(n));return`m/2645'/${i}'/${s}'/${k(a)}'/${k(a>>31n)}'/${r}`},e.pedersen=N,e._poseidonMDS=U,e.poseidonBasic=V,e.poseidonCreate=function(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return V(t,U(t.Fp,"HadesMDS",n,e))},e.poseidonHash=H,e.poseidonHashFunc=function(t,n,r=e.poseidonSmall){return l.numberToVarBytesBE(H(l.bytesToNumberBE(t),l.bytesToNumberBE(n),r))},e.poseidonHashSingle=function(t,n=e.poseidonSmall){return n([t,0n,1n])[0]},e.poseidonHashMany=function(t,n=e.poseidonSmall){const{m:r,rate:i}=n;if(!Array.isArray(t))throw new Error("bigint array expected in values");const s=Array.from(t);for(s.push(1n);s.length%i!==0;)s.push(0n);let a=new Array(r).fill(0n);for(let t=0;t<s.length;t+=i){for(let e=0;e<i;e++){const n=s[t+e];if(void 0===n)throw new Error("invalid index");if(void 0===a[e])throw new Error("state[j] is undefined");a[e]=a[e]+n}a=n(a)}return a[0]};const r=n(7240),i=n(8112),s=n(4762),a=n(4967),o=n(5920),c=n(1705),l=n(1484),u=n(3562),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,n=l.bytesToNumberBE(t);return e>0?n>>BigInt(e):n}function f(t){return"string"==typeof t&&1&(t=S(t)).length&&(t="0"+t),l.hexToBytes(t)}e.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");const p=(0,c.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,a.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,u.getHash)(i.sha256),bits2int:h,bits2int_modN:t=>{const e=l.bytesToNumberBE(t).toString(16);return 63===e.length&&(t=f(e+"0")),(0,a.mod)(h(t),d)}});function g(t){return l.ensureBytes("","string"==typeof t?f(t):t)}function y(t){return l.bytesToHex(g(t)).padStart(64,"0")}function m(t,e=!1){return p.getPublicKey(y(t),e)}function b(t){const{r:n,s:r}=t;if(n<0n||n>=e.MAX_VALUE)throw new Error(`Signature.r should be [1, ${e.MAX_VALUE})`);const i=(0,a.invert)(r,d);if(i<0n||i>=e.MAX_VALUE)throw new Error(`inv(Signature.s) should be [1, ${e.MAX_VALUE})`)}function _(t){const n=g(t);if(l.bytesToNumberBE(n)>=e.MAX_VALUE)throw new Error(`msgHash should be [0, ${e.MAX_VALUE})`);return n}e._starkCurve=p;const{CURVE:w,ProjectivePoint:E,Signature:v,utils:A}=p;function T(t){return`0x${l.bytesToHex(t.subarray(1)).replace(/^0+/gm,"")}`}function S(t){return t.replace(/^0x/i,"")}function I(t){const e=g(t),n=2n**256n,r=n-(0,a.mod)(n,d);for(let t=0;;t++){const n=L(l.concatBytes(e,l.numberToVarBytesBE(BigInt(t))));if(n<r)return(0,a.mod)(n,d).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}e.CURVE=w,e.ProjectivePoint=E,e.Signature=v,e.utils=A;const k=t=>Number(2147483647n&t),x=[new E(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new E(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new E(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new E(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new E(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function B(t,e){const n=[];let r=t;for(let t=0;t<248;t++)n.push(r),r=r.double();r=e;for(let t=0;t<4;t++)n.push(r),r=r.double();return n}const C=B(x[1],x[2]),R=B(x[3],x[4]);function O(t,e,n){let r=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=l.bytesToNumberBE(g(t));if(!(0n<=e&&e<p.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const i=n[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&r)&&(t=t.add(i)),r>>=1n}return t}function N(t,e){let n=x[0];return n=O(n,t,C),n=O(n,e,R),T(n.toRawBytes(!0))}e.computeHashOnElements=(t,e=N)=>[0,...t,t.length].reduce((t,n)=>e(t,n));const D=l.bitMask(250);e.keccak=t=>l.bytesToNumberBE((0,r.keccak_256)(t))&D;const L=t=>l.bytesToNumberBE((0,i.sha256)(t));function P(t,e,n){const r=t.fromBytes((0,i.sha256)((0,s.utf8ToBytes)(`${e}${n}`)));return t.create(r)}function U(t,e,n,r=0){const i=[],s=[];for(let a=0;a<n;a++)i.push(P(t,`${e}x`,r*n+a)),s.push(P(t,`${e}y`,r*n+a));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(e=>s.map(n=>t.inv(t.sub(e,n))))}e.Fp251=(0,a.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));const F=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function V(t,e){if((0,a.validateField)(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<r;e++){const r=[];for(let i=0;i<n;i++)r.push(P(t.Fp,"Hades",n*e+i));i.push(r)}const s=(0,o.poseidon)({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function H(t,n,r=e.poseidonSmall){return r([t,n,2n])[0]}e.poseidonSmall=V({Fp:e.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},F)},788(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=a;const o={number:n,bytes:r,hash:i,exists:s,output:a};e.default=o},3487(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(788),i=n(4762);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,a=(t=(0,i.toBytes)(t)).length;for(let r=0;r<a;){const o=Math.min(s-this.pos,a-r);if(o===s){const e=(0,i.createView)(t);for(;s<=a-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:a}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let t=o;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,s-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,i.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,d[t],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},1529(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=s,e.add=_;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:a,l:o}=i(t[s],e);[n[s],r[s]]=[a,o]}return[n,r]}const a=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=a;const o=(t,e,n)=>t>>>n;e.shrSH=o;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const l=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=l;const u=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=u;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:c,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},1238(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},8112(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(3487),i=n(4762),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)o[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],n=o[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;o[t]=s+o[t-7]+r+o[t-16]|0}let{A:n,B:a,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+(0,r.Chi)(u,d,h)+s[t]+o[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,a,c)|0;f=h,h=d,d=u,u=l+e|0,l=c,c=a,a=n,n=e+p|0}n=n+this.A|0,a=a+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,a,c,l,u,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new l)},7240(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const r=n(788),i=n(1529),s=n(4762),a=[],o=[],c=[],l=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=u,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],a.push(2*(5*r+n)),o.push((t+1)*(t+2)/2%64);let i=l;for(let t=0;t<7;t++)e=(e<<u^(e>>h)*p)%f,e&d&&(i^=u<<(u<<BigInt(t))-u);c.push(i)}const[g,y]=(0,i.split)(c,!0),m=(t,e,n)=>n>32?(0,i.rotlBH)(t,e,n):(0,i.rotlSH)(t,e,n),b=(t,e,n)=>n>32?(0,i.rotlBL)(t,e,n):(0,i.rotlSL)(t,e,n);function _(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],a=n[i+1],o=m(s,a,1)^n[r],c=b(s,a,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=o,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=o[n],s=m(e,i,r),c=b(e,i,r),l=a[n];e=t[l],i=t[l+1],t[l]=s,t[l+1]=c}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=g[r],t[1]^=y[r]}n.fill(0)}class w extends s.Hash{constructor(t,e,n,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),_(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,r.aexists)(this);const{blockLen:e,state:n}=this,i=(t=(0,s.toBytes)(t)).length;for(let r=0;r<i;){const s=Math.min(e-this.pos,i-r);for(let e=0;e<s;e++)n[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,r.aexists)(this,!1),(0,r.abytes)(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,r.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,r.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new w(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}e.Keccak=w;const E=(t,e,n)=>(0,s.wrapConstructor)(()=>new w(e,t,n));e.sha3_224=E(6,144,28),e.sha3_256=E(6,136,32),e.sha3_384=E(6,104,48),e.sha3_512=E(6,72,64),e.keccak_224=E(1,144,28),e.keccak_256=E(1,136,32),e.keccak_384=E(1,104,48),e.keccak_512=E(1,72,64);const v=(t,e,n)=>(0,s.wrapXOFConstructorWithOpts)((r={})=>new w(e,t,void 0===r.dkLen?n:r.dkLen,!0));e.shake128=v(31,168,16),e.shake256=v(31,136,32)},4762(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=a(t.charCodeAt(i)),s=a(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(1238),i=n(788);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2828(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CURVE_ORDER=void 0;const r=n(4246);e.CURVE_ORDER=r.CURVE.n},2747(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LengthMismatchError=e.PreconditionError=e.OutOfRangeError=e.InvalidInputError=e.ProtocolError=void 0;class n extends Error{errorCode;constructor(t,e){super(t),this.errorCode=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.ProtocolError=n;class r extends n{constructor(t){super(t,"INVALID_INPUT")}}e.InvalidInputError=r,e.OutOfRangeError=class extends n{value;range;constructor(t,e,n){super(t,"OUT_OF_RANGE"),this.value=e,this.range=n}},e.PreconditionError=class extends n{constructor(t){super(t,"PRECONDITION_FAILED")}},e.LengthMismatchError=class extends r{constructor(t,e,n="arrays"){super(`Length mismatch: expected ${t} but got ${e} for ${n}`)}}},6885(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(2828),e),i(n(5900),e),i(n(4288),e),i(n(2747),e)},5356(t,e,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(r=function(t){return r=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},r(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=r(t),a=0;a<n.length;a++)"default"!==n[a]&&i(e,t,n[a]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.SameEncryptUnknownRandom=e.SameEncrypt=e.ElGamal=e.range=e.bit=e.poeN=e.poe2=e.poe=void 0,e.poe=a(n(8431)),e.poe2=a(n(6313)),e.poeN=a(n(2362)),e.bit=a(n(8368)),e.range=a(n(8678)),e.ElGamal=a(n(5602)),e.SameEncrypt=a(n(2528)),e.SameEncryptUnknownRandom=a(n(1979))},5602(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L:n,R:r,g1:i,g2:s}=t,{AL:o,AR:c,c:l,sb:u,sr:d}=e;return a(n,r,i,s,o,c,l,u,d)},e.verify_with_prefix=function(t,e){const{L:n,R:i,g1:s,g2:o}=t,{AL:c,AR:l,prefix:u,sb:d,sr:h}=e,f=[c,l];return a(n,i,s,o,c,l,(0,r.compute_challenge)(u,f),d,h)},e._verify=a,e.prove=function(t,e,n,i,s){const a=n.multiply(t).add(i.multiplyUnsafe(e)),o=n.multiplyUnsafe(e),c=(0,r.generateRandom)(),l=(0,r.generateRandom)(),u=n.multiply(c).add(i.multiply(l)),d=n.multiply(l),h=(0,r.compute_challenge)(s,[u,d]),f=(0,r.compute_s)(l,e,h);return{inputs:{L:a,R:o,g1:n,g2:i},proof:{AL:u,AR:d,sb:(0,r.compute_s)(c,t,h),sr:f,prefix:s}}};const r=n(4288),i=n(8431),s=n(6313);function a(t,e,n,r,a,o,c,l,u){return!!(0,i._verify)(e,n,o,c,u)&&!!(0,s._verify)(t,n,r,a,c,l,u)}},8368(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{V:n,g1:r,g2:i}=t,{A0:a,A1:o,c,c0:l,s0:u,s1:d}=e;return s(n,r,i,a,o,c,l,u,d)},e.verify_with_prefix=function(t,e){const{V:n,g1:i,g2:a}=t,{A0:o,A1:c,prefix:l,c0:u,s0:d,s1:h}=e,f=[n,o,c];return s(n,i,a,o,c,(0,r.compute_challenge)(l,f),u,d,h)},e._verify=s,e.prove=function(t,e,n,i,s){return 0===t?function(t,e,n,i){const s=n.multiplyUnsafe(t),o={V:s,g1:e,g2:n},c=s.subtract(e),{A:l,c:u,s:d}=a(c,n),h=(0,r.generateRandom)(),f=n.multiply(h),p=[s,f,l],g=(0,r.compute_challenge)(i,p),y=(0,r.subtract_modulo_curve_order)(g,u);return{inputs:o,proof:{A0:f,A1:l,prefix:i,c0:y,s0:(0,r.compute_s)(h,t,y),s1:d}}}(e,n,i,s):function(t,e,n,i){const s=e.add(n.multiplyUnsafe(t)),o={V:s,g1:e,g2:n},c=s,{A:l,c:u,s:d}=a(c,n),h=(0,r.generateRandom)(),f=n.multiply(h),p=[s,l,f],g=(0,r.compute_challenge)(i,p),y=(0,r.subtract_modulo_curve_order)(g,u);return{inputs:o,proof:{A0:l,A1:f,prefix:i,c0:u,s0:d,s1:(0,r.compute_s)(h,t,y)}}}(e,n,i,s)};const r=n(4288),i=n(8431);function s(t,e,n,s,a,o,c,l,u){if(!(0,r.validate_challenge)(o))throw new Error("invalid challenge");const d=(0,r.subtract_modulo_curve_order)(o,c);if(!(0,i._verify)(t,n,s,c,l))return!1;const h=t.subtract(e);return!!(0,i._verify)(h,n,a,d,u)}function a(t,e){const n=(0,r.generateRandom)(),i=(0,r.generateRandom)();return{A:e.multiplyUnsafe(n).subtract(t.multiplyUnsafe(i)),c:i,s:n}}},8431(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,g:r}=t,{A:s,c:a,s:o}=e;return i(n,r,s,a,o)},e.verify_with_prefix=function(t,e){const{y:n,g:s}=t,{A:a,prefix:o,s:c}=e,l=[a];return i(n,s,a,(0,r.compute_challenge)(o,l),c)},e._verify=i,e.prove=function(t,e,n){const i={y:e.multiply(t),g:e},s=(0,r.generateRandom)(),a=e.multiplyUnsafe(s),o=(0,r.compute_challenge)(n,[a]);return{inputs:i,proof:{A:a,s:(0,r.compute_s)(s,t,o),prefix:n}}};const r=n(4288);function i(t,e,n,i,s){if(!(0,r.in_curve_order)(s))throw new Error(" s not in curve order");if(!(0,r.validate_challenge)(i))throw new Error("invalid challenge");const a=e.multiplyUnsafe(s),o=n.add(t.multiplyUnsafe(i));return a.equals(o)}},6313(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,g1:r,g2:s}=t,{A:a,c:o,s1:c,s2:l}=e;return i(n,r,s,a,o,c,l)},e.verify_with_prefix=function(t,e){const{y:n,g1:s,g2:a}=t,{A:o,prefix:c,s1:l,s2:u}=e,d=[o];return i(n,s,a,o,(0,r.compute_challenge)(c,d),l,u)},e._verify=i,e.prove=function(t,e,n,i,s){const a={y:n.multiply(t).add(i.multiply(e)),g1:n,g2:i},o=(0,r.generateRandom)(),c=(0,r.generateRandom)(),l=n.multiplyUnsafe(o).add(i.multiplyUnsafe(c)),u=(0,r.compute_challenge)(s,[l]);return{inputs:a,proof:{A:l,prefix:s,s1:(0,r.compute_s)(o,t,u),s2:(0,r.compute_s)(c,e,u)}}};const r=n(4288);function i(t,e,n,i,s,a,o){if(!(0,r.in_curve_order)(a))throw new Error(" s1 not in curve order");if(!(0,r.in_curve_order)(o))throw new Error(" s2 not in curve order");if(!(0,r.validate_challenge)(s))throw new Error("invalid challenge");const c=e.multiplyUnsafe(a).add(n.multiplyUnsafe(o)),l=i.add(t.multiplyUnsafe(s));return c.equals(l)}},2362(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,generators:r}=t,{A:i,c:s,ss:o}=e;return a(n,r,i,s,o)},e.verify_with_prefix=function(t,e){const{y:n,generators:r}=t,{A:i,prefix:o,ss:c}=e,l=[i];return a(n,r,i,(0,s.compute_challenge)(o,l),c)},e._verify=a,e.prove=function(t,e,n){if(e.length!==t.length)throw new r.LengthMismatchError(e.length,t.length,"generators and scalars");let a=[],o=i.ProjectivePoint.ZERO,c=i.ProjectivePoint.ZERO;for(let n=0;n<e.length;n++){const r=e[n],i=(0,s.generateRandom)();o=o.add(r.multiply(t[n])),c=c.add(r.multiply(i)),a.push(i)}const l={y:o,generators:e},u=[c],d=(0,s.compute_challenge)(n,u),h=[];for(let n=0;n<e.length;n++)h.push((0,s.compute_s)(a[n],t[n],d));return{inputs:l,proof:{A:c,prefix:n,ss:h}}};const r=n(2747),i=n(5900),s=n(4288);function a(t,e,n,a,o){if(e.length!==o.length)throw new r.LengthMismatchError(e.length,o.length,"generators and responses");if(!(0,s.validate_challenge)(a))throw new Error("invalid challenge");let c=i.ProjectivePoint.ZERO;for(let t=0;t<e.length;t++){if(!(0,s.in_curve_order)(o[t]))throw new Error(" s not in curve order");c=c.add(e[t].multiplyUnsafe(o[t]))}const l=n.add(t.multiplyUnsafe(a));return c.equals(l)}},8678(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{g1:n,g2:r,bit_size:a,commitments:c}=t,{proofs:l}=e;if(c.length!==a||l.length!==a)throw new i.LengthMismatchError(c.length,a,"commitments and bit_size");const u=l[0].prefix;let d=s.ProjectivePoint.ZERO;for(let t=0;t<a;t++){const e=2n**BigInt(t),i=c[t],s=l[t];if(s.prefix!==u+BigInt(t))return!1;const a={V:i,g1:n,g2:r};if(!(0,o.verify_with_prefix)(a,s))return!1;d=d.add(i.multiply(e))}return d},e.pregenerate_randomness=function(t){let e=[],n=0n;for(let i=0;i<t;i++){const t=2n**BigInt(i),s=(0,a.generateRandom)();e.push(s),n=(n+s*t)%r.CURVE_ORDER}return{randomness:e,total_random:n}},e.prove=function(t,e,n,s,a,c){if(t>=2**e)throw new i.OutOfRangeError(`Value ${t} is not in range [0, ${2**e-1}]`,t,`[0, ${2**e-1}]`);if(a.length!==e)throw new Error("Randomness length does not match bit_size");const l=t.toString(2).padStart(e,"0").split("").map(Number).map(t=>t).reverse(),u=[],d=[];let h=0n;for(let t=0;t<e;t++){const e=2n**BigInt(t),i=a[t],{inputs:f,proof:p}=(0,o.prove)(l[t],i,n,s,c+BigInt(t));u.push(p),d.push(f.V),h=(h+i*e)%r.CURVE_ORDER}return{inputs:{commitments:d,g1:n,g2:s,bit_size:e},proofs:{proofs:u},r:h}};const r=n(2828),i=n(2747),s=n(5900),a=n(4288),o=n(8368)},2528(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L1:n,R1:r,L2:i,R2:a,g:o,y1:c,y2:l}=t,{AL1:u,AR1:d,AL2:h,AR2:f,c:p,sb:g,sr1:y,sr2:m}=e;return s(n,r,i,a,o,c,l,u,d,h,f,p,g,y,m)},e.verify_with_prefix=function(t,e){const{L1:n,R1:i,L2:a,R2:o,g:c,y1:l,y2:u}=t,{AL1:d,AR1:h,AL2:f,AR2:p,prefix:g,sb:y,sr1:m,sr2:b}=e,_=[d,h,f,p];return s(n,i,a,o,c,l,u,d,h,f,p,(0,r.compute_challenge)(g,_),y,m,b)},e._verify=s,e.prove=function(t,e,n,i,s,a,o){const c={L1:t.multiply(i).add(e.multiply(s)),R1:t.multiply(s),L2:t.multiply(i).add(n.multiply(a)),R2:t.multiply(a),y1:e,y2:n,g:t},l=(0,r.generateRandom)(),u=(0,r.generateRandom)(),d=(0,r.generateRandom)(),h=t.multiply(l).add(e.multiply(u)),f=t.multiply(u),p=t.multiply(l).add(n.multiply(d)),g=t.multiply(d),y=[h,f,p,g],m=(0,r.compute_challenge)(o,y);return{inputs:c,proof:{AL1:h,AR1:f,AL2:p,AR2:g,prefix:o,sb:(0,r.compute_s)(l,i,m),sr1:(0,r.compute_s)(u,s,m),sr2:(0,r.compute_s)(d,a,m)}}};const r=n(4288),i=n(5602);function s(t,e,n,r,s,a,o,c,l,u,d,h,f,p,g){return!!(0,i._verify)(t,e,s,a,c,l,h,f,p)&&!!(0,i._verify)(n,r,s,o,u,d,h,f,g)}},1979(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L1:n,R1:r,L2:i,R2:s,g:a,y1:o,y2:l}=t,{Ax:u,AL1:d,AL2:h,AR2:f,c:p,sb:g,sx:y,sr2:m}=e;return c(n,r,i,s,a,o,l,u,d,h,f,p,g,y,m)},e.verify_with_prefix=function(t,e){const{L1:n,R1:i,L2:s,R2:a,g:o,y1:l,y2:u}=t,{Ax:d,AL1:h,AL2:f,AR2:p,prefix:g,sb:y,sx:m,sr2:b}=e,_=[d,h,f,p];return c(n,i,s,a,o,l,u,d,h,f,p,(0,r.compute_challenge)(g,_),y,m,b)},e._verify=c,e.prove=function(t,e,n,s,a,o,c,l){const u=t.multiply(e);if(!s.subtract(a.multiply(e)).equals(t.multiply(o)))throw new i.PreconditionError("The provided ciphertext (L1, R1) does not encrypt the specified message under the derived public key");const d={L1:s,R1:a,L2:t.multiply(o).add(n.multiply(c)),R2:t.multiply(c),g:t,y1:u,y2:n},h=(0,r.generateRandom)(),f=(0,r.generateRandom)(),p=(0,r.generateRandom)(),g=t.multiply(h),y=t.multiply(f).add(a.multiply(h)),m=t.multiply(f).add(n.multiply(p)),b=t.multiply(p),_=[g,y,m,b],w=(0,r.compute_challenge)(l,_);return{inputs:d,proof:{Ax:g,AL1:y,AL2:m,AR2:b,prefix:l,sx:(0,r.compute_s)(h,e,w),sb:(0,r.compute_s)(f,o,w),sr2:(0,r.compute_s)(p,c,w)}}};const r=n(4288),i=n(2747),s=n(5602),a=n(8431),o=n(6313);function c(t,e,n,r,i,c,l,u,d,h,f,p,g,y,m){return!!(0,a._verify)(c,i,u,p,y)&&!!(0,o._verify)(t,i,e,d,p,g,y)&&!!(0,s._verify)(n,r,i,l,h,f,p,g,m)}},5900(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=e.CURVE_ORDER=void 0;const r=n(4246);var i=n(2828);Object.defineProperty(e,"CURVE_ORDER",{enumerable:!0,get:function(){return i.CURVE_ORDER}}),e.ProjectivePoint=r.ProjectivePoint},4288(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateRandom=function(){const t=r.utils.randomPrivateKey();return r.utils.normPrivateKeyToScalar(t)},e.in_curve_order=s,e.validate_challenge=function(t){return 0n!=t&&s(t)},e.reduce_modulo_order=a,e.compute_challenge=function(t,e){const n=[t];return e.forEach(t=>{const{x:e,y:r}=t.toAffine();n.push(e),n.push(r)}),a((0,r.poseidonHashMany)(n))},e.compute_s=function(t,e,n){return(t+e*n)%i.CURVE_ORDER},e.subtract_modulo_curve_order=function(t,e){return((t-e)%i.CURVE_ORDER+i.CURVE_ORDER)%i.CURVE_ORDER};const r=n(4246),i=n(2828);function s(t){return t<i.CURVE_ORDER}function a(t){return t%i.CURVE_ORDER}},6072(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6985(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;const r=n(5556),i=n(9839),s=n(6641),a=n(3496),o=n(4499),c=n(9705),l=n(7340),u=n(5401),d=n(3829),h=n(2445),f=n(546),p=n(6451),g=n(2540),y=n(8138),m=n(2479),b=n(9889),_=n(6783),w=n(227),E=n(8697);class v{publicKey;pk;provider;Tongo;constructor(t,e,n){this.pk=(0,w.bytesOrNumToBigInt)(t),this.Tongo=new r.Contract({abi:b.tongoAbi,address:e,providerOrAccount:n}).typedv2(b.tongoAbi),this.publicKey=(0,w.pubKeyFromSecret)(this.pk),this.provider=n}tongoAddress(){return(0,_.pubKeyAffineToBase58)(this.publicKey)}static tongoAddress(t){return(0,_.pubKeyAffineToBase58)((0,w.pubKeyFromSecret)((0,w.bytesOrNumToBigInt)(t)))}async nonce(){const{nonce:t}=await this.rawState();return t}async state(){const{balance:t,pending:e,aeBalance:n,nonce:r}=await this.rawState(),i=n?await this.decryptAEBalance(n,r):void 0;return{balance:this.decryptCipherBalance(t,i),pending:this.decryptCipherBalance(e),nonce:r}}async rawState(){const t=await this.Tongo.get_state(this.publicKey);return v.parseAccountState(t)}async rate(){const t=await this.Tongo.get_rate();return(0,w.castBigInt)(t)}async bit_size(){const t=await this.Tongo.get_bit_size();return"bigint"==typeof t?Number(t):t}async erc20ToTongo(t){const e=await this.rate(),n=t/e;return t%e!=0n?n+1n:n}async tongoToErc20(t){return t*await this.rate()}async auditorKey(){return await this.Tongo.auditor_key()}async createAuditPart(t,e,n){let s=new r.CairoOption(r.CairoOptionVariant.None);const a=await this.auditorKey();if(a.isSome()){const o=(0,_.starkPointToProjectivePoint)(a.unwrap()),{inputs:c,proof:l}=(0,i.proveAudit)(this.pk,t,e,o,n),u=await this.nonce(),d=await this.computeAEHintForPubKey(t,u,o),h={auditedBalance:c.auditedBalance,hint:d,proof:l};s=new r.CairoOption(r.CairoOptionVariant.Some,h)}return s}async fund(t){const{amount:e,sender:n}=t,{nonce:r,balance:i,aeBalance:a}=await this.rawState(),o=a?await this.decryptAEBalance(a,r):void 0,c=this.decryptCipherBalance(i,o),l={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:u,proof:d,newBalance:h}=(0,s.proveFund)(this.pk,e,c,i,r,l),p=await this.createAuditPart(e+c,h,l),g=await this.computeAEHintForSelf(e+c,r+1n),y=new f.FundOperation({to:u.y,amount:e,hint:g,proof:d,auditPart:p,Tongo:this.Tongo});return await y.populateApprove(),y}async transfer(t){const{amount:e,sender:n}=t,r=await this.bit_size(),{nonce:i,balance:s,aeBalance:a}=await this.rawState(),o=a?await this.decryptAEBalance(a,i):void 0,l=this.decryptCipherBalance(s,o);if(l<e)throw new Error("You dont have enough balance");const u=(0,_.starkPointToProjectivePoint)(t.to),d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:h,proof:f,newBalance:p}=(0,c.proveTransfer)(this.pk,u,l,e,s,i,r,d),g=await this.computeAEHintForPubKey(e,i,u),m=await this.computeAEHintForSelf(l-e,i+1n),b=await this.createAuditPart(l-e,p,d),w=await this.createAuditPart(e,h.transferBalanceSelf,d);return new y.TransferOperation({from:h.from,to:h.to,transferBalance:h.transferBalance,transferBalanceSelf:h.transferBalanceSelf,auxiliarCipher:h.auxiliarCipher,auxiliarCipher2:h.auxiliarCipher2,hintTransfer:g,hintLeftover:m,proof:f,auditPart:b,auditPartTransfer:w,Tongo:this.Tongo})}async ragequit(t){const{to:e,sender:n}=t,{nonce:r,balance:i,aeBalance:s}=await this.rawState(),o=s?await this.decryptAEBalance(s,r):void 0,c=this.decryptCipherBalance(i,o);if(0n===c)throw new Error("You dont have enough balance");const l={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:u,proof:d,newBalance:h}=(0,a.proveRagequit)(this.pk,i,r,BigInt(e),c,l),f=await this.computeAEHintForSelf(0n,r+1n),g=await this.createAuditPart(0n,h,l);return new p.RagequitOperation({from:u.y,to:u.to,amount:u.amount,hint:f,proof:d,Tongo:this.Tongo,auditPart:g})}async withdraw(t){const{amount:e,to:n,sender:r}=t,i=await this.bit_size(),{nonce:s,balance:a,aeBalance:o}=await this.rawState(),c=o?await this.decryptAEBalance(o,s):void 0,u=this.decryptCipherBalance(a,c);if(u<e)throw new Error("You dont have enought balance");const d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(r)},{inputs:h,proof:f,newBalance:p}=(0,l.proveWithdraw)(this.pk,u,e,BigInt(n),a,s,i,d),g=await this.computeAEHintForSelf(u-e,s+1n),y=await this.createAuditPart(u-e,p,d);return new m.WithdrawOperation({from:h.y,to:h.to,amount:h.amount,auxiliarCipher:h.auxiliarCipher,hint:g,proof:f,auditPart:y,Tongo:this.Tongo})}async rollover(t){const{sender:e}=t,n=await this.rawState(),{nonce:r,balance:i,aeBalance:s,pending:a}=n,c=s?await this.decryptAEBalance(s,r):void 0,l=this.decryptCipherBalance(i,c),u=this.decryptCipherBalance(a);if(0n==u)throw new Error("Your pending ammount is 0");const d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(e)},{inputs:h,proof:f}=(0,o.proveRollover)(this.pk,r,d),p=await this.computeAEHintForSelf(u+l,r+1n);return new g.RollOverOperation({to:h.y,proof:f,Tongo:this.Tongo,hint:p})}async decryptAEBalance(t,e){return this.decryptAEHintForPubKey(t,e,this.publicKey)}async decryptAEHintForPubKey(t,e,n){const r=await this.deriveSymmetricKeyForPubKey(e,n),{ciphertext:i,nonce:s}=(0,u.AEHintToBytes)(t);return new u.AEChaCha(r).decryptBalance({ciphertext:i,nonce:s})}decryptCipherBalance({L:t,R:e},n){return n&&(0,w.assertBalance)(this.pk,n,t,e)?n:(0,w.decipherBalance)(this.pk,t,e)}async generateExPost(t,e,n){if(null==e.L)throw new Error("L is null");if(null==e.R)throw new Error("R is null");const r={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},s=this.decryptCipherBalance(e),{inputs:a,proof:o}=(0,i.proveAudit)(this.pk,s,e,(0,_.starkPointToProjectivePoint)(t),r);return{inputs:a,proof:o}}verifyExPost(t){if((0,_.projectivePointToStarkPoint)(t.inputs.y)!=this.publicKey)throw new Error("The expost is not for you");return(0,i.verifyAudit)(t.inputs,t.proof),this.decryptCipherBalance({L:t.inputs.auditedBalance.L,R:t.inputs.auditedBalance.R})}_diffieHellman(t){const e=(0,_.pubKeyBase58ToHex)(t);return(0,h.ECDiffieHellman)(this.pk,e)}async computeAEHintForPubKey(t,e,n){const r=await this.deriveSymmetricKeyForPubKey(e,n);return(0,u.bytesToAEHint)(new u.AEChaCha(r).encryptBalance(t))}async computeAEHintForSelf(t,e){return this.computeAEHintForPubKey(t,e,this.publicKey)}async deriveSymmetricKeyForPubKey(t,e){const n=(0,h.ECDiffieHellman)(this.pk,(0,_.pubKeyAffineToHex)(e));return(0,h.deriveSymmetricEncryptionKey)({contractAddress:this.Tongo.address,nonce:t,secret:n})}static parseAccountState(t){const{balance:e,pending:n,audit:i,nonce:s,ae_balance:a,ae_audit_balance:o}=t;let c;return i.isSome()&&(c=(0,_.parseCipherBalance)(i.unwrap())),{balance:(0,_.parseCipherBalance)(e),pending:(0,_.parseCipherBalance)(n),audit:c,nonce:r.num.toBigInt(s),aeBalance:a.isSome()?(0,u.parseAEBalance)(a.unwrap()):void 0,aeAuditBalance:o.isSome()?(0,u.parseAEBalance)(o.unwrap()):void 0}}async getEventsFund(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsFund(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount}))}async getEventsRollover(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsRollover(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.rollovered))}))}async getEventsWithdraw(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsWithdraw(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:r.num.toHex(t.to)}))}async getEventsRagequit(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsRagequit(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:r.num.toHex(t.to)}))}async getEventsTransferOut(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address),n=await e.getEventsTransferOut(t,this.publicKey);return Promise.all(n.map(async t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.transferBalanceSelf),await this.decryptAEHintForPubKey(t.hintTransfer,t.nonce,t.to)),to:(0,_.pubKeyAffineToBase58)(t.to)})))}async getEventsTransferIn(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address),n=await e.getEventsTransferIn(t,this.publicKey);return Promise.all(n.map(async t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.transferBalance),await this.decryptAEHintForPubKey(t.hintTransfer,t.nonce,t.from)),from:(0,_.pubKeyAffineToBase58)(t.from)})))}async getTxHistory(t){const e=Promise.all([this.getEventsFund(t),this.getEventsRollover(t),this.getEventsWithdraw(t),this.getEventsRagequit(t),this.getEventsTransferOut(t),this.getEventsTransferIn(t)]);return(await e).flat().sort((t,e)=>e.block_number-t.block_number)}}e.Account=v},8697(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReaderToAccountEvents=void 0;const r=n(3829);e.ReaderToAccountEvents={[r.ReaderEventType.Fund]:"fund",[r.ReaderEventType.Rollover]:"rollover",[r.ReaderEventType.Withdraw]:"withdraw",[r.ReaderEventType.Ragequit]:"ragequit",[r.ReaderEventType.TransferIn]:"transferIn",[r.ReaderEventType.TransferOut]:"transferOut"}},866(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(6985),e),i(n(6072),e),i(n(8697),e)},5401(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AEChaCha=void 0,e.AEHintToBytes=function({ciphertext:t,nonce:e}){return{ciphertext:(0,i.numberToBytesBE)(t,64),nonce:(0,i.numberToBytesBE)(e,24)}},e.bytesToAEHint=function({ciphertext:t,nonce:e}){return{ciphertext:(0,i.bytesToNumberBE)(t),nonce:(0,i.bytesToNumberBE)(e)}},e.parseAEBalance=function({ciphertext:t,nonce:e}){let n;return n=(0,o.isUint256)(e)?a.uint256.uint256ToBN(e):BigInt(e),{ciphertext:BigInt(t),nonce:n}};const r=n(8900),i=n(6527),s=n(8489),a=n(5556),o=n(227);e.AEChaCha=class{key;constructor(t){if(this.key=t,32!=this.key.length)throw new Error(`Key length must be exactly 32 Bytes, not '${this.key.length}'`)}encryptBalance(t){if(t>=2n**32n)throw new Error("This implementation only supports 32 bit balances");const e=(0,s.randomBytes)(24),n=(0,s.randomBytes)(44),a=(0,i.numberToBytesBE)(t,48);return a.set(n,0),{ciphertext:(0,r.xchacha20poly1305)(this.key,e).encrypt(a),nonce:e}}decryptBalance({ciphertext:t,nonce:e}){const n=(0,r.xchacha20poly1305)(this.key,e);try{const e=n.decrypt(t);if(48!==e.length)throw new Error("Malformed plaintext");return(0,i.bytesToNumberBE)(e.slice(44,48))}catch{throw new Error("Malformed or tampered ciphertext")}}}},9043(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SECONDARY_GENERATOR=e.GENERATOR=e.CURVE_ORDER=void 0;const r=n(4246),i=n(6783);e.CURVE_ORDER=r.CURVE.n,e.GENERATOR=new i.ProjectivePoint(r.CURVE.Gx,r.CURVE.Gy,1n),e.SECONDARY_GENERATOR=new i.ProjectivePoint(627088272801405713560985229077786158610581355215145837257248988047835443922n,962306405833205337611861169387935900858447421343428280515103558221889311122n,1n)},3829(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StarknetEventReader=e.ReaderEventType=void 0;const r=n(5556),i=n(9889),s=r.events.getAbiEvents(i.tongoAbi),a=r.CallData.getAbiStruct(i.tongoAbi),o=r.CallData.getAbiEnum(i.tongoAbi),c=r.num.toHex(r.hash.starknetKeccak("FundEvent")),l=r.num.toHex(r.hash.starknetKeccak("RolloverEvent")),u=r.num.toHex(r.hash.starknetKeccak("TransferEvent")),d=r.num.toHex(r.hash.starknetKeccak("WithdrawEvent")),h=r.num.toHex(r.hash.starknetKeccak("RagequitEvent")),f=r.num.toHex(r.hash.starknetKeccak("BalanceDeclared")),p=r.num.toHex(r.hash.starknetKeccak("TransferDeclared")),g="tongo::structs::events::FundEvent",y="tongo::structs::events::RolloverEvent",m="tongo::structs::events::TransferEvent",b="tongo::structs::events::WithdrawEvent",_="tongo::structs::events::RagequitEvent",w="tongo::structs::events::BalanceDeclared",E="tongo::structs::events::TransferDeclared";function v(t){const n=t[E];return{type:e.ReaderEventType.TransferDeclared,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}e.ReaderEventType={Fund:"fund",Withdraw:"withdraw",Ragequit:"ragequit",Rollover:"rollover",TransferIn:"transferIn",TransferOut:"transferOut",BalanceDeclared:"balanceDeclared",TransferDeclared:"transferDeclared"};class A{provider;static abiParser=new r.AbiParser2(i.tongoAbi);abiParser=A.abiParser;tongoAddress;constructor(t,e){this.provider=t,this.tongoAddress=e}async getEventsFund(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[c],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[g]).map(t=>function(t){const n=t[g];return{type:e.ReaderEventType.Fund,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsWithdraw(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[d],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[b]).map(t=>function(t){const n=t[b];return{type:e.ReaderEventType.Withdraw,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsRagequit(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[h],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[_]).map(t=>function(t){const n=t[_];return{type:e.ReaderEventType.Ragequit,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsRollover(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[l],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[y]).map(t=>function(t){const n=t[y];return{type:e.ReaderEventType.Rollover,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferOut(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[u],[],[],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[m]).map(t=>function(t){const n=t[m];return{type:e.ReaderEventType.TransferOut,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferIn(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[u],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[m]).map(t=>function(t){const n=t[m];return{type:e.ReaderEventType.TransferIn,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getAllEvents(t,e){const n=Promise.all([this.getEventsFund(t,e),this.getEventsRollover(t,e),this.getEventsWithdraw(t,e),this.getEventsRagequit(t,e),this.getEventsTransferOut(t,e),this.getEventsTransferIn(t,e)]);return(await n).flat().sort((t,e)=>e.block_number-t.block_number)}async getEventsBalanceDeclared(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[f],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(i.events,s,a,o,this.abiParser).filter(t=>void 0!==t[w]).map(t=>function(t){const n=t[w];return{type:e.ReaderEventType.BalanceDeclared,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferFrom(t,e){const n=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[p],[r.num.toHex(e.x)],[r.num.toHex(e.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(n.events,s,a,o,this.abiParser).filter(t=>void 0!==t[E]).map(t=>v(t))}async getEventsTransferTo(t,e){const n=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[p],[],[],[r.num.toHex(e.x)],[r.num.toHex(e.y)],[]],chunk_size:100});return r.events.parseEvents(n.events,s,a,o,this.abiParser).filter(t=>void 0!==t[E]).map(t=>v(t))}}e.StarknetEventReader=A},34(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(866),e),i(n(3001),e),i(n(5401),e),i(n(2445),e),i(n(6783),e)},2445(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ECDiffieHellman=function(t,e){return s._starkCurve.getSharedSecret(t,e,!1)},e.buildInfo=a,e.buildSalt=o,e.deriveSymmetricEncryptionKey=async function(t){const{contractAddress:e,nonce:n,secret:r}=t,i={name:"HKDF",hash:"SHA-256",salt:o(n,r),info:a(e),length:32},s=await crypto.subtle.importKey("raw",r,"HKDF",!1,["deriveKey"]),c=await crypto.subtle.deriveKey(i,s,{name:"HMAC",hash:"SHA-256",length:256},!0,["sign"]),l=await crypto.subtle.exportKey("raw",c);return new Uint8Array(l)};const r=n(6527),i=n(7076),s=n(4246);function a(t){const e=new Uint8Array([116,111,110,103,111]),n=(0,r.hexToBytes)(t.replace(/^0x/,"").padStart(64,"0")),i=new Uint8Array(27).fill(0),s=new Uint8Array(64);return s.set(e),s.set(n,e.length),s.set(i,n.length+e.length),s}function o(t,e){const n=new Uint8Array(72),s=(0,r.numberToBytesBE)(t,8);if(n.set(s),4!==e.at(0))throw new Error("InvalidSharedSecret");return n.set(e.slice(1),s.length),(0,i.sha256)(n)}},8726(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},546(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FundOperation=void 0;const r=n(5556),i=n(227),s=n(6508);e.FundOperation=class{type;Tongo;to;amount;hint;proof;auditPart;approve;constructor({to:t,amount:e,proof:n,auditPart:r,Tongo:i,hint:a}){this.type=s.OperationType.Fund,this.to=t,this.amount=e,this.hint=a,this.auditPart=r,this.proof=n,this.Tongo=i}toCalldata(){return this.Tongo.populate("fund",[{to:this.to,amount:this.amount,hint:this.hint,proof:this.proof,auditPart:this.auditPart}])}async populateApprove(){const t=await this.Tongo.ERC20(),e=r.num.toHex(t),n=this.Tongo.address,s=await this.Tongo.get_rate(),a=r.cairo.uint256(this.amount*(0,i.castBigInt)(s)),o=r.CallData.compile({spender:n,amount:a});this.approve={contractAddress:e,entrypoint:"approve",calldata:o}}}},3001(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8726),e),i(n(546),e),i(n(6508),e),i(n(6451),e),i(n(2540),e),i(n(8138),e),i(n(2479),e)},6508(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationType=void 0,e.OperationType={Audit:"audit",Fund:"fund",Ragequit:"ragequit",Withdraw:"withdraw",Rollover:"rollover",Transfer:"transfer"}},6451(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RagequitOperation=void 0;const r=n(6508);e.RagequitOperation=class{type=r.OperationType.Ragequit;from;to;amount;hint;auditPart;proof;Tongo;constructor({from:t,to:e,amount:n,proof:r,Tongo:i,hint:s,auditPart:a}){this.from=t,this.to=e,this.amount=n,this.hint=s,this.proof=r,this.auditPart=a,this.Tongo=i}toCalldata(){return this.Tongo.populate("ragequit",[{from:this.from,amount:this.amount,to:"0x"+this.to.toString(16),proof:this.proof,hint:this.hint,auditPart:this.auditPart}])}}},2540(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RollOverOperation=void 0;const r=n(6508);e.RollOverOperation=class{type=r.OperationType.Rollover;to;proof;Tongo;hint;constructor({to:t,proof:e,Tongo:n,hint:r}){this.to=t,this.proof=e,this.Tongo=n,this.hint=r}toCalldata(){return this.Tongo.populate("rollover",[{to:this.to,proof:this.proof,hint:this.hint}])}}},8138(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransferOperation=void 0;const r=n(6508);e.TransferOperation=class{type=r.OperationType.Transfer;Tongo;from;to;transferBalance;transferBalanceSelf;auxiliarCipher;auxiliarCipher2;hintTransfer;hintLeftover;proof;auditPart;auditPartTransfer;constructor({from:t,to:e,transferBalance:n,transferBalanceSelf:r,proof:i,auditPart:s,auditPartTransfer:a,auxiliarCipher:o,auxiliarCipher2:c,Tongo:l,hintTransfer:u,hintLeftover:d}){this.from=t,this.to=e,this.transferBalance=n,this.transferBalanceSelf=r,this.auxiliarCipher=o,this.auxiliarCipher2=c,this.hintTransfer=u,this.hintLeftover=d,this.proof=i,this.auditPart=s,this.auditPartTransfer=a,this.Tongo=l}toCalldata(){return this.Tongo.populate("transfer",[{from:this.from,to:this.to,transferBalance:this.transferBalance,transferBalanceSelf:this.transferBalanceSelf,auxiliarCipher:this.auxiliarCipher,auxiliarCipher2:this.auxiliarCipher2,hintTransfer:this.hintTransfer,hintLeftover:this.hintLeftover,proof:this.proof,auditPart:this.auditPart,auditPartTransfer:this.auditPartTransfer}])}}},2479(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WithdrawOperation=void 0;const r=n(5556),i=n(6508);e.WithdrawOperation=class{type=i.OperationType.Withdraw;from;to;amount;hint;auxiliarCipher;proof;auditPart;Tongo;constructor({from:t,to:e,amount:n,proof:r,auditPart:i,Tongo:s,hint:a,auxiliarCipher:o}){this.from=t,this.to=e,this.amount=n,this.auxiliarCipher=o,this.hint=a,this.proof=r,this.auditPart=i,this.Tongo=s}toCalldata(){return this.Tongo.populate("withdraw",[{from:this.from,amount:this.amount,hint:this.hint,to:r.num.toHex(this.to),auxiliarCipher:this.auxiliarCipher,auditPart:this.auditPart,proof:this.proof}])}}},9839(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIT_CAIRO_STRING=void 0,e.proveAudit=function(t,n,i,c,l){const u=t,d=s.GENERATOR.multiply(u),{L:h,R:f}=i,p=h.subtract(f.multiplyUnsafe(u)),g=s.GENERATOR.multiplyUnsafe(n);if(!p.equals(g))throw new Error("storedBalance is not an encryption of balance");const y=(0,r.generateRandom)(),m={y:d,storedBalance:i,auditorPubKey:c,auditedBalance:(0,o.createCipherBalance)(c,n,y),prefix_data:l},b=function(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.AUDIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.auditorPubKey.toAffine().x,t.auditorPubKey.toAffine().y,t.storedBalance.L.toAffine().x,t.storedBalance.L.toAffine().y,t.storedBalance.R.toAffine().x,t.storedBalance.R.toAffine().y,t.auditedBalance.L.toAffine().x,t.auditedBalance.L.toAffine().y,t.auditedBalance.R.toAffine().x,t.auditedBalance.R.toAffine().y];return(0,a.compute_prefix)(s)}(m),_=(0,r.generateRandom)(),w=(0,r.generateRandom)(),E=(0,r.generateRandom)(),v=s.GENERATOR.multiplyUnsafe(_),A=s.GENERATOR.multiplyUnsafe(w).add(f.multiplyUnsafe(_)),T=s.GENERATOR.multiplyUnsafe(E),S=s.GENERATOR.multiplyUnsafe(w).add(c.multiplyUnsafe(E)),I=(0,r.compute_challenge)(b,[v,A,S,T]),k=(0,r.compute_s)(_,u,I),x=(0,r.compute_s)(E,y,I);return{inputs:m,proof:{Ax:v,AL0:A,AL1:S,AR1:T,sx:k,sb:(0,r.compute_s)(w,n,I),sr:x}}},e.verifyAudit=function(t,n){const a=(0,r.compute_challenge)(e.AUDIT_CAIRO_STRING,[n.Ax,n.AL0,n.AL1,n.AR1]),{L:o,R:c}=t.storedBalance,{L:l,R:u}=t.auditedBalance;return i.SameEncryptUnknownRandom._verify(o,c,l,u,s.GENERATOR,t.y,t.auditorPubKey,n.Ax,n.AL0,n.AL1,n.AR1,a,n.sb,n.sx,n.sr)};const r=n(6885),i=n(5356),s=n(9043),a=n(6783),o=n(2040);e.AUDIT_CAIRO_STRING=418581342580n},6641(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FUND_CAIRO_STRING=void 0,e.proveFund=function(t,n,r,o,l,u){const d=t,h=s.GENERATOR.multiply(d),{L:f,R:p}=o,g=f.subtract(p.multiplyUnsafe(d)),y=s.GENERATOR.multiplyUnsafe(r);if(!g.equals(y))throw new Error("storedBalance is not an encryption of balance");const m={y:h,nonce:l,amount:n,prefix_data:u},b=c(m),{proof:{s:_,A:w}}=i.poe.prove(d,s.GENERATOR,b),E=(0,a.createCipherBalance)(h,n,e.FUND_CAIRO_STRING);return{inputs:m,proof:{sx:_,Ax:w},newBalance:{L:f.add(E.L),R:p.add(E.R)}}},e.verifyFund=function(t,e){const n=c(t),a=(0,r.compute_challenge)(n,[e.Ax]);if(0==i.poe._verify(t.y,s.GENERATOR,e.Ax,a,e.sx))throw new Error("verifyFund failed")};const r=n(6885),i=n(5356),s=n(9043),a=n(2040),o=n(6783);function c(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.FUND_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.amount,t.nonce];return(0,o.compute_prefix)(s)}e.FUND_CAIRO_STRING=1718972004n},3496(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RAGEQUIT_CAIRO_STRING=void 0,e.proveRagequit=function(t,e,n,r,s,l){const u=t,d=i.GENERATOR.multiply(u),{L:h,R:f}=e,p=h.subtract(f.multiplyUnsafe(u)),g=i.GENERATOR.multiplyUnsafe(s);if(!p.equals(g))throw new Error("storedBalance is not an encryption of balance");const y={y:d,nonce:n,to:r,amount:s,currentBalance:e,prefix_data:l},m=c(y),b=(0,o.generateRandom)(),_=i.GENERATOR.multiply(b),w=f.multiplyUnsafe(b),E=(0,o.compute_challenge)(m,[_,w]);return{inputs:y,proof:{Ax:_,AR:w,sx:(0,o.compute_s)(b,u,E)},newBalance:(0,a.createCipherBalance)(d,0n,1n)}},e.verifyRagequit=function(t,e){const n=c(t),s=(0,o.compute_challenge)(n,[e.Ax,e.AR]);let a=r.poe._verify(t.y,i.GENERATOR,e.Ax,s,e.sx);if(0==a)throw new Error("error in poe y");const{L:l,R:u}=t.currentBalance,d=l.subtract(i.GENERATOR.multiply(t.amount));if(a=r.poe._verify(d,u,e.AR,s,e.sx),0==a)throw new Error("error in poe R")};const r=n(5356),i=n(9043),s=n(6783),a=n(2040),o=n(6885);function c(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,a=[n,r,i,e.RAGEQUIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,t.currentBalance.L.toAffine().x,t.currentBalance.L.toAffine().y,t.currentBalance.R.toAffine().x,t.currentBalance.R.toAffine().y];return(0,s.compute_prefix)(a)}e.RAGEQUIT_CAIRO_STRING=8241982478457596276n},3373(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateRangeProof=function(t,e,n,s){const{inputs:a,proofs:o,r:c}=r.range.prove(t,e,i.GENERATOR,i.SECONDARY_GENERATOR,n,s),l=o.proofs.map(({prefix:t,...e})=>e);return{r:c,range:{commitments:a.commitments,proofs:l}}},e.verifyRangeProof=function(t,e,n){const s={g1:i.GENERATOR,g2:i.SECONDARY_GENERATOR,bit_size:e,commitments:t.commitments},a={proofs:t.proofs.map((t,e)=>({...t,prefix:n+BigInt(e)}))};return r.range.verify(s,a)};const r=n(5356),i=n(9043)},4499(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROLLOVER_CAIRO_STRING=void 0,e.proveRollover=function(t,e,n){const r=t,a={y:s.GENERATOR.multiply(r),nonce:e,prefix_data:n},c=o(a),{proof:{A:l,s:u}}=i.poe.prove(r,s.GENERATOR,c);return{inputs:a,proof:{Ax:l,sx:u}}},e.verifyRollover=function(t,e){const n=o(t),a=(0,r.compute_challenge)(n,[e.Ax]);if(0==i.poe._verify(t.y,s.GENERATOR,e.Ax,a,e.sx))throw new Error("verifyRollover failed")};const r=n(6885),i=n(5356),s=n(9043),a=n(6783);function o(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.ROLLOVER_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce];return(0,a.compute_prefix)(s)}e.ROLLOVER_CAIRO_STRING=8245928655720965490n},9705(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSFER_CAIRO_STRING=void 0,e.proveTransfer=function(t,e,n,i,c,d,h,f){const p=t,g=a.GENERATOR.multiply(p),{L:y,R:m}=c,b=i,_=n-b,{randomness:w,total_random:E}=s.range.pregenerate_randomness(h),v=(0,l.createCipherBalance)(a.SECONDARY_GENERATOR,i,E),A=(0,l.createCipherBalance)(g,b,E),T=(0,l.createCipherBalance)(e,b,E),{randomness:S,total_random:I}=s.range.pregenerate_randomness(h),k={from:g,to:e,nonce:d,currentBalance:c,transferBalance:T,transferBalanceSelf:A,auxiliarCipher:v,auxiliarCipher2:(0,l.createCipherBalance)(a.SECONDARY_GENERATOR,_,I),bit_size:h,prefix_data:f},x=u(k),{r:B,range:C}=(0,o.generateRangeProof)(b,h,w,x);if(B!==E)throw new Error("random missmatch");const{r:R,range:O}=(0,o.generateRangeProof)(_,h,S,x);if(R!==I)throw new Error("random missmatch");const N=m.subtract(A.R),D=(0,r.generateRandom)(),L=(0,r.generateRandom)(),P=(0,r.generateRandom)(),U=(0,r.generateRandom)(),F=(0,r.generateRandom)(),V=a.GENERATOR.multiplyUnsafe(D),H=a.GENERATOR.multiplyUnsafe(P),M=a.GENERATOR.multiplyUnsafe(F),$=a.GENERATOR.multiplyUnsafe(L).add(g.multiplyUnsafe(P)),j=a.GENERATOR.multiplyUnsafe(L).add(e.multiplyUnsafe(P)),q=a.GENERATOR.multiplyUnsafe(L).add(a.SECONDARY_GENERATOR.multiplyUnsafe(P)),z=a.GENERATOR.multiplyUnsafe(U).add(N.multiplyUnsafe(D)),Y=a.GENERATOR.multiplyUnsafe(U).add(a.SECONDARY_GENERATOR.multiplyUnsafe(F)),G=[V,H,M,$,z,q,Y,j],K=(0,r.compute_challenge)(x,G),W=(0,r.compute_s)(D,p,K),Z=(0,r.compute_s)(L,b,K);return{inputs:k,proof:{A_x:V,A_r:H,A_r2:M,A_b:$,A_b2:z,A_v:q,A_v2:Y,A_bar:j,s_x:W,s_r:(0,r.compute_s)(P,B,K),s_b:Z,s_b2:(0,r.compute_s)(U,_,K),s_r2:(0,r.compute_s)(F,R,K),range:C,range2:O},newBalance:{L:y.subtract(A.L),R:m.subtract(A.R)}}},e.verifyTransfer=function(t,e){const n=t.bit_size,s=u(t),c=(0,r.compute_challenge)(s,[e.A_x,e.A_r,e.A_r2,e.A_b,e.A_b2,e.A_v,e.A_v2,e.A_bar]),{L:l,R:d}=t.currentBalance,{L:h,R:f}=t.transferBalanceSelf,{L:p,R:g}=t.transferBalance,{L:y,R:m}=t.auxiliarCipher,{L:b,R:_}=t.auxiliarCipher2;let w=i.poe._verify(t.from,a.GENERATOR,e.A_x,c,e.s_x);if(0==w)throw new Error("error in poe for y");let E={L1:h,R1:f,L2:p,R2:g,g:a.GENERATOR,y1:t.from,y2:t.to},v={AL1:e.A_b,AR1:e.A_r,AL2:e.A_bar,AR2:e.A_r,c,sb:e.s_b,sr1:e.s_r,sr2:e.s_r};if(w=i.SameEncrypt.verify(E,v),0==w)throw new Error("error SameEncryp");const A=(0,o.verifyRangeProof)(e.range,n,s);if(0==A)throw new Error("erro in range for V");if(!y.equals(A))throw new Error("V missmatch");let T={L:y,R:m,g1:a.GENERATOR,g2:a.SECONDARY_GENERATOR},S={AL:e.A_v,AR:e.A_r,c,sb:e.s_b,sr:e.s_r};if(w=i.ElGamal.verify(T,S),0==w)throw new Error("erro elGamalProof");const I=l.subtract(h),k=d.subtract(f),x=(0,o.verifyRangeProof)(e.range2,n,s);if(0==x)throw new Error("erro in range for V2");if(!b.equals(x))throw new Error("V2 missmatch");let B={L1:I,R1:k,L2:b,R2:_,g:a.GENERATOR,y1:t.from,y2:a.SECONDARY_GENERATOR},C={Ax:e.A_x,AL1:e.A_b2,AL2:e.A_v2,AR2:e.A_r2,c,sb:e.s_b2,sx:e.s_x,sr2:e.s_r2};if(w=i.SameEncryptUnknownRandom.verify(B,C),0==w)throw new Error("error in sameEncrypUnkownRandom")};const r=n(6885),i=n(5356),s=n(5356),a=n(9043),o=n(3373),c=n(6783),l=n(2040);function u(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,{L:s,R:a}=t.currentBalance,{L:o,R:l}=t.transferBalanceSelf,{L:u,R:d}=t.transferBalance,{L:h,R:f}=t.auxiliarCipher,{L:p,R:g}=t.auxiliarCipher2,y=[n,r,i,e.TRANSFER_CAIRO_STRING,t.from.toAffine().x,t.from.toAffine().y,t.to.toAffine().x,t.to.toAffine().y,t.nonce,s.toAffine().x,s.toAffine().y,a.toAffine().x,a.toAffine().y,o.toAffine().x,o.toAffine().y,l.toAffine().x,l.toAffine().y,u.toAffine().x,u.toAffine().y,d.toAffine().x,d.toAffine().y,h.toAffine().x,h.toAffine().y,f.toAffine().x,f.toAffine().y,p.toAffine().x,p.toAffine().y,g.toAffine().x,g.toAffine().y];return(0,c.compute_prefix)(y)}e.TRANSFER_CAIRO_STRING=8390876182755042674n},7340(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WITHDRAW_CAIRO_STRING=void 0,e.proveWithdraw=function(t,n,i,c,d,h,f,p){const g=t,y=a.GENERATOR.multiply(g),{L:m,R:b}=d,_=m.subtract(b.multiplyUnsafe(g)),w=a.GENERATOR.multiplyUnsafe(n);if(!_.equals(w))throw new Error("storedBalance is not an encryption of balance");const E=n-i,{randomness:v,total_random:A}=s.range.pregenerate_randomness(f),T={y,nonce:h,currentBalance:d,to:c,amount:i,bit_size:f,auxiliarCipher:(0,l.createCipherBalance)(a.SECONDARY_GENERATOR,E,A),prefix_data:p},S=u(T),{r:I,range:k}=(0,o.generateRangeProof)(E,f,v,S);if(I!==A)throw new Error("random mismatch");const x=(0,r.generateRandom)(),B=(0,r.generateRandom)(),C=(0,r.generateRandom)(),R=a.GENERATOR.multiplyUnsafe(B),O=a.GENERATOR.multiplyUnsafe(C),N=a.GENERATOR.multiplyUnsafe(x).add(b.multiplyUnsafe(B)),D=a.GENERATOR.multiplyUnsafe(x).add(a.SECONDARY_GENERATOR.multiplyUnsafe(C)),L=(0,r.compute_challenge)(S,[R,O,N,D]),P=(0,r.compute_s)(x,E,L),U={A_x:R,A_r:O,A:N,A_v:D,sx:(0,r.compute_s)(B,g,L),sb:P,sr:(0,r.compute_s)(C,I,L),range:k},F=(0,l.createCipherBalance)(y,i,e.WITHDRAW_CAIRO_STRING);return{inputs:T,proof:U,newBalance:{L:m.subtract(F.L),R:b.subtract(F.R)}}},e.verifyWithdraw=function(t,e){const n=t.bit_size,s=u(t),c=(0,r.compute_challenge)(s,[e.A_x,e.A_r,e.A,e.A_v]);let{L:l,R:d}=t.currentBalance,{L:h,R:f}=t.auxiliarCipher;l=l.subtract(a.GENERATOR.multiply(t.amount));const p=(0,o.verifyRangeProof)(e.range,n,s);if(0==p)throw new Error("erro in range for V");if(!h.equals(p))throw new Error("V missmatch");let g={L1:l,R1:d,L2:h,R2:f,g:a.GENERATOR,y1:t.y,y2:a.SECONDARY_GENERATOR},y={Ax:e.A_x,AL1:e.A,AL2:e.A_v,AR2:e.A_r,c,sb:e.sb,sx:e.sx,sr2:e.sr};if(0==i.SameEncryptUnknownRandom.verify(g,y))throw new Error("error in SameEncrpyUnkownRandom")};const r=n(6885),i=n(5356),s=n(5356),a=n(9043),o=n(3373),c=n(6783),l=n(2040);function u(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,{L:s,R:a}=t.currentBalance,{L:o,R:l}=t.auxiliarCipher,u=[n,r,i,e.WITHDRAW_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,s.toAffine().x,s.toAffine().y,a.toAffine().x,a.toAffine().y,o.toAffine().x,o.toAffine().y,l.toAffine().x,l.toAffine().y];return(0,c.compute_prefix)(u)}e.WITHDRAW_CAIRO_STRING=8604536554778681719n},9889(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tongoAbi=void 0,e.tongoAbi=[{type:"impl",name:"TongoImpl",interface_name:"tongo::tongo::ITongo::ITongo"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::common::pubkey::PubKey",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"core::integer::u512",members:[{name:"limb0",type:"core::integer::u128"},{name:"limb1",type:"core::integer::u128"},{name:"limb2",type:"core::integer::u128"},{name:"limb3",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::aecipher::AEBalance",members:[{name:"ciphertext",type:"core::integer::u512"},{name:"nonce",type:"core::integer::u256"}]},{type:"struct",name:"tongo::structs::common::starkpoint::StarkPoint",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::fund::ProofOfFund",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::common::cipherbalance::CipherBalance",members:[{name:"L",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"R",type:"tongo::structs::common::starkpoint::StarkPoint"}]},{type:"struct",name:"tongo::structs::operations::audit::ProofOfAudit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::audit::Audit",members:[{name:"auditedBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::audit::ProofOfAudit"}]},{type:"enum",name:"core::option::Option::<tongo::structs::operations::audit::Audit>",variants:[{name:"Some",type:"tongo::structs::operations::audit::Audit"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::operations::fund::Fund",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::fund::ProofOfFund"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::structs::common::starkpoint::StarkPoint>"}]},{type:"struct",name:"tongo::verifier::range::bitProof",members:[{name:"A0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"c0",type:"core::felt252"},{name:"s0",type:"core::felt252"},{name:"s1",type:"core::felt252"}]},{type:"struct",name:"core::array::Span::<tongo::verifier::range::bitProof>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::verifier::range::Range",members:[{name:"commitments",type:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>"},{name:"proofs",type:"core::array::Span::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::structs::operations::withdraw::ProofOfWithdraw",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::withdraw::Withdraw",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::withdraw::ProofOfWithdraw"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::ragequit::ProofOfRagequit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::ragequit::Ragequit",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::ragequit::ProofOfRagequit"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::transfer::ProofOfTransfer",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_bar",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"s_x",type:"core::felt252"},{name:"s_r",type:"core::felt252"},{name:"s_b",type:"core::felt252"},{name:"s_b2",type:"core::felt252"},{name:"s_r2",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"},{name:"range2",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::transfer::Transfer",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"auxiliarCipher2",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::transfer::ProofOfTransfer"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"},{name:"auditPartTransfer",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::rollover::ProofOfRollOver",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::rollover::Rollover",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::rollover::ProofOfRollOver"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>",variants:[{name:"Some",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"None",type:"()"}]},{type:"enum",name:"core::option::Option::<tongo::structs::aecipher::AEBalance>",variants:[{name:"Some",type:"tongo::structs::aecipher::AEBalance"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::common::state::State",members:[{name:"balance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"pending",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"nonce",type:"core::integer::u64"},{name:"audit",type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"},{name:"ae_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"},{name:"ae_audit_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::pubkey::PubKey>",variants:[{name:"Some",type:"tongo::structs::common::pubkey::PubKey"},{name:"None",type:"()"}]},{type:"interface",name:"tongo::tongo::ITongo::ITongo",items:[{type:"function",name:"ERC20",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"get_rate",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"get_bit_size",inputs:[],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"get_owner",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"fund",inputs:[{name:"fund",type:"tongo::structs::operations::fund::Fund"}],outputs:[],state_mutability:"external"},{type:"function",name:"withdraw",inputs:[{name:"withdraw",type:"tongo::structs::operations::withdraw::Withdraw"}],outputs:[],state_mutability:"external"},{type:"function",name:"ragequit",inputs:[{name:"ragequit",type:"tongo::structs::operations::ragequit::Ragequit"}],outputs:[],state_mutability:"external"},{type:"function",name:"transfer",inputs:[{name:"transfer",type:"tongo::structs::operations::transfer::Transfer"}],outputs:[],state_mutability:"external"},{type:"function",name:"rollover",inputs:[{name:"rollover",type:"tongo::structs::operations::rollover::Rollover"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_pending",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_audit",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"}],state_mutability:"view"},{type:"function",name:"get_nonce",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"get_state",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::state::State"}],state_mutability:"view"},{type:"function",name:"auditor_key",inputs:[],outputs:[{type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}],state_mutability:"view"},{type:"function",name:"change_auditor_key",inputs:[{name:"new_auditor_key",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"ERC20",type:"core::starknet::contract_address::ContractAddress"},{name:"rate",type:"core::integer::u256"},{name:"bit_size",type:"core::integer::u32"},{name:"auditor_key",type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}]},{type:"event",name:"tongo::structs::events::TransferEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance",kind:"data"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::FundEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"}]},{type:"event",name:"tongo::structs::events::RolloverEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"rollovered",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::WithdrawEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::RagequitEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::BalanceDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::TransferDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::AuditorPubKeySet",kind:"struct",members:[{name:"keyNumber",type:"core::integer::u128",kind:"key"},{name:"AuditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"}]},{type:"event",name:"tongo::tongo::Tongo::Tongo::Event",kind:"enum",variants:[{name:"TransferEvent",type:"tongo::structs::events::TransferEvent",kind:"nested"},{name:"FundEvent",type:"tongo::structs::events::FundEvent",kind:"nested"},{name:"RolloverEvent",type:"tongo::structs::events::RolloverEvent",kind:"nested"},{name:"WithdrawEvent",type:"tongo::structs::events::WithdrawEvent",kind:"nested"},{name:"RagequitEvent",type:"tongo::structs::events::RagequitEvent",kind:"nested"},{name:"BalanceDeclared",type:"tongo::structs::events::BalanceDeclared",kind:"nested"},{name:"TransferDeclared",type:"tongo::structs::events::TransferDeclared",kind:"nested"},{name:"AuditorPubKeySet",type:"tongo::structs::events::AuditorPubKeySet",kind:"nested"}]}]},6783(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=void 0,e.createCipherBalance=function(t,e,n){if(0n===e)return{L:t.multiplyUnsafe(n),R:o.GENERATOR.multiplyUnsafe(n)};return{L:o.GENERATOR.multiply(e).add(t.multiplyUnsafe(n)),R:o.GENERATOR.multiplyUnsafe(n)}},e.compute_prefix=function(t){return(0,a.poseidonHashMany)(t)},e.starkPointToProjectivePoint=c,e.projectivePointToStarkPoint=l,e.derivePublicKey=function(t){return l(o.GENERATOR.multiply(t))},e.pubKeyAffineToHex=function(t){const e=c(t);return(0,s.bytesToHex)(e.toRawBytes(!0))},e.pubKeyAffineToBase58=function(t){const e=c(t);return i.base58.encode(e.toRawBytes(!0))},e.pubKeyBase58ToAffine=function(t){const n=i.base58.decode(t);return e.ProjectivePoint.fromHex((0,s.bytesToHex)(n))},e.pubKeyBase58ToHex=function(t){const e=i.base58.decode(t);return(0,s.bytesToHex)(e)},e.parseCipherBalance=function({L:t,R:e}){return{L:c(t),R:c(e)}};const r=n(6885),i=n(3203),s=n(9175),a=n(4246),o=n(9043);function c({x:t,y:n}){return new e.ProjectivePoint(BigInt(t),BigInt(n),1n)}function l(t){const e=t.toAffine();return{x:e.x,y:e.y}}e.ProjectivePoint=r.ProjectivePoint},227(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesOrNumToBigInt=function(t){return t instanceof Uint8Array?i.num.toBigInt("0x"+(0,r.bytesToHex)(t)):i.num.toBigInt(t)},e.isUint256=function(t){const e=t.low,n=t.high;return void 0!==e&&void 0!==n},e.castBigInt=function(t){return i.num.isBigNumberish(t)?i.num.toBigInt(t):i.uint256.uint256ToBN(t)},e.createCipherBalance=function(t,e,n){if(0n===e)return{L:t.multiplyUnsafe(n),R:s.GENERATOR.multiplyUnsafe(n)};return{L:s.GENERATOR.multiply(e).add(t.multiplyUnsafe(n)),R:s.GENERATOR.multiplyUnsafe(n)}},e.decipherBalance=function(t,e,n){const r=n.multiply(t);if(r.equals(e))return 0n;const i=e.subtract(r);let a=1n,o=s.GENERATOR;if(o.equals(i))return 1n;for(;a<2**32;)if(a+=1n,o=o.add(s.GENERATOR),o.equals(i))return a;throw new Error("Decription of Cipherbalance has failed")},e.assertBalance=function(t,e,n,r){const i=r.multiply(t);return n.subtract(i).equals(s.GENERATOR.multiplyUnsafe(e))},e.pubKeyFromSecret=function(t){return(0,a.projectivePointToStarkPoint)(s.GENERATOR.multiply(t))};const r=n(9175),i=n(5556),s=n(9043),a=n(6783)},2040(t,e,n){"use strict";n.r(e),n.d(e,{assertBalance:()=>bc,bytesOrNumToBigInt:()=>fc,castBigInt:()=>gc,createCipherBalance:()=>yc,decipherBalance:()=>mc,isUint256:()=>pc,pubKeyFromSecret:()=>_c});const r=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),i=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));var s=n(9321),a=n(4302),o=n(1809),c=n(591),l=n(1605);function u(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function d(t,...e){if(!u(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function h(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function f(t){if("function"!=typeof t)throw new Error("function expected");return!0}function p(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function g(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function y(t){if(!Array.isArray(t))throw new Error("array expected")}function m(t,e){if(!h(!0,e))throw new Error(`${t}: array of strings expected`)}function b(t,e){if(!h(!1,e))throw new Error(`${t}: array of numbers expected`)}function _(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map(t=>t.encode).reduceRight(n,e),decode:t.map(t=>t.decode).reduce(n,e)}}function w(t){const e="string"==typeof t?t.split(""):t,n=e.length;m("alphabet",e);const r=new Map(e.map((t,e)=>[t,e]));return{encode:r=>(y(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:e=>(y(e),e.map(e=>{p("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}function E(t=""){return p("join",t),{encode:e=>(m("join.decode",e),e.join(t)),decode:e=>(p("join.decode",e),e.split(t))}}function v(t,e="="){return g(t),p("padding",e),{encode(n){for(m("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){m("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function A(t){return f(t),{encode:t=>t,decode:e=>t(e)}}function T(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(y(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,t=>{if(g(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t}),a=s.length;for(;;){let t=0,o=!0;for(let i=r;i<a;i++){const a=s[i],c=e*t,l=c+a;if(!Number.isSafeInteger(l)||c/e!==t||l-a!==c)throw new Error("convertRadix: carry overflow");const u=l/n;t=l%n;const d=Math.floor(u);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==l)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const S=(t,e)=>0===e?t:S(e,t%e),I=(t,e)=>t+(e-S(t,e)),k=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function x(t,e,n,r){if(y(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(I(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${I(e,n)}`);let i=0,s=0;const a=k[e],o=k[n]-1,c=[];for(const r of t){if(g(r),r>=a)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((i>>s-n&o)>>>0);const t=k[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function B(t,e=!1){if(g(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(I(8,t)>32||I(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!u(n))throw new Error("radix2.encode input should be Uint8Array");return x(Array.from(n),8,t,!e)},decode:n=>(b("radix2.decode",n),Uint8Array.from(x(n,t,8,e)))}}function C(t){return f(t),function(...e){try{return t.apply(null,e)}catch(t){}}}_(B(4),w("0123456789ABCDEF"),E("")),_(B(5),w("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),v(5),E(""));const R=(_(B(5),w("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),E("")),_(B(5),w("0123456789ABCDEFGHIJKLMNOPQRSTUV"),v(5),E("")),_(B(5),w("0123456789ABCDEFGHIJKLMNOPQRSTUV"),E("")),_(B(5),w("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),E(""),A(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)()),O=R?{encode:t=>(d(t),t.toBase64()),decode:t=>(p("base64",t),Uint8Array.fromBase64(t,{lastChunkHandling:"strict"}))}:_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),v(6),E("")),N=(_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),E("")),R||_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),v(6),E("")),_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),E("")),t=>{return _((g(e=58),{encode:t=>{if(!u(t))throw new Error("radix.encode input should be Uint8Array");return T(Array.from(t),256,e)},decode:t=>(b("radix.decode",t),Uint8Array.from(T(t,e,256)))}),w(t),E(""));var e}),D=(N("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),N("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),N("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),_(w("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),E(""))),L=[996825010,642813549,513874426,1027748829,705979059];function P(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<L.length;t++)1==(e>>t&1)&&(n^=L[t]);return n}function U(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=P(i)^n>>5}i=P(i);for(let e=0;e<r;e++)i=P(i)^31&t.charCodeAt(e);for(let t of e)i=P(i)^t;for(let t=0;t<6;t++)i=P(i);return i^=n,D.encode(x([i%k[30]],30,5,!1))}function F(t){const e="bech32"===t?1:734539939,n=B(5),r=n.decode,i=n.encode,s=C(r);function a(t,n,r=90){p("bech32.encode prefix",t),u(n)&&(n=Array.from(n)),b("bech32.encode",n);const i=t.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const a=t.toLowerCase(),o=U(a,n,e);return`${a}1${D.encode(n)}${o}`}function o(t,n=90){p("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),o=i.slice(s+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const c=D.decode(o).slice(0,-6),l=U(a,c,e);if(!o.endsWith(l))throw new Error(`Invalid checksum in ${t}: expected "${l}"`);return{prefix:a,words:c}}return{encode:a,decode:o,encodeFromBytes:function(t,e){return a(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:n}=o(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:C(o),fromWords:r,fromWordsUnsafe:s,toWords:i}}F("bech32"),F("bech32m");(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)()||_(B(4),w("0123456789abcdef"),E(""),A(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));var V=n(4123),H=n(8293);function M(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function j(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function q(t,e){$(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const z=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Y=(t,e)=>t<<32-e|t>>>e,G=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),K=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function W(t){for(let e=0;e<t.length;e++)t[e]=K(t[e])}function Z(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),$(t),t}class X{clone(){return this._cloneInto()}}function J(t){const e=e=>t().update(Z(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const Q=(t,e,n)=>t&e^~t&n,tt=(t,e,n)=>t&e^t&n^e&n;class et extends X{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=z(this.buffer)}update(t){j(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Z(t)).length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const e=z(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){j(this),q(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const a=z(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)a.setUint32(4*t,l[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const nt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),it=new Uint32Array(64);class st extends et{constructor(){super(64,32,8,!1),this.A=0|rt[0],this.B=0|rt[1],this.C=0|rt[2],this.D=0|rt[3],this.E=0|rt[4],this.F=0|rt[5],this.G=0|rt[6],this.H=0|rt[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)it[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=it[t-15],n=it[t-2],r=Y(e,7)^Y(e,18)^e>>>3,i=Y(n,17)^Y(n,19)^n>>>10;it[t]=i+it[t-7]+r+it[t-16]|0}let{A:n,B:r,C:i,D:s,E:a,F:o,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(Y(a,6)^Y(a,11)^Y(a,25))+Q(a,o,c)+nt[t]+it[t]|0,u=(Y(n,2)^Y(n,13)^Y(n,22))+tt(n,r,i)|0;l=c,c=o,o=a,a=s+e|0,s=i,i=r,r=n,n=e+u|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,s,a,o,c,l)}roundClean(){it.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const at=J(()=>new st);var ot=n(235);const ct=BigInt(2**32-1),lt=BigInt(32);function ut(t,e=!1){return e?{h:Number(t&ct),l:Number(t>>lt&ct)}:{h:0|Number(t>>lt&ct),l:0|Number(t&ct)}}function dt(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=ut(t[i],e);[n[i],r[i]]=[s,a]}return[n,r]}const ht=[],ft=[],pt=[],gt=BigInt(0),yt=BigInt(1),mt=BigInt(2),bt=BigInt(7),_t=BigInt(256),wt=BigInt(113);for(let t=0,e=yt,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ht.push(2*(5*r+n)),ft.push((t+1)*(t+2)/2%64);let i=gt;for(let t=0;t<7;t++)e=(e<<yt^(e>>bt)*wt)%_t,e&mt&&(i^=yt<<(yt<<BigInt(t))-yt);pt.push(i)}const[Et,vt]=dt(pt,!0),At=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),Tt=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class St extends X{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,M(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){G||W(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],a=n[i+1],o=At(s,a,1)^n[r],c=Tt(s,a,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=o,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=ft[n],s=At(e,i,r),a=Tt(e,i,r),o=ht[n];e=t[o],i=t[o+1],t[o]=s,t[o+1]=a}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=Et[r],t[1]^=vt[r]}n.fill(0)}(this.state32,this.rounds),G||W(this.state32),this.posOut=0,this.pos=0}update(t){j(this);const{blockLen:e,state:n}=this,r=(t=Z(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){j(this,!1),$(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return M(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(q(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new St(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const It=((t,e,n)=>J(()=>new St(e,t,n)))(1,136,32);var kt=n(5591),xt=n(7713),Bt=n(3075),Ct=n(9979),Rt=n(6993),Ot=n(8287).hp,Nt=Object.defineProperty,Dt=Object.getOwnPropertyDescriptor,Lt=Object.getOwnPropertyNames,Pt=Object.prototype.hasOwnProperty,Ut=(t,e)=>{for(var n in e)Nt(t,n,{get:e[n],enumerable:!0})},Ft=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Lt(e))Pt.call(t,i)||i===n||Nt(t,i,{get:()=>e[i],enumerable:!(r=Dt(e,i))||r.enumerable});return t},Vt=(t,e,n)=>(Ft(t,e,"default"),n&&Ft(n,e,"default"));Ut({},{ADDR_BOUND:()=>ye,API_VERSION:()=>fe,BaseUrl:()=>Ue,DEFAULT_GLOBAL_CONFIG:()=>$e,HARDENING_4BYTES:()=>Pe,HARDENING_BYTE:()=>Le,IS_BROWSER:()=>jt,LegacyUDC:()=>Ce,MASK_250:()=>de,MASK_31:()=>he,MAX_STORAGE_ITEM_SIZE:()=>ge,NetworkName:()=>Fe,OutsideExecutionCallerAny:()=>Oe,PAYMASTER_RPC_NODES:()=>qe,PRIME:()=>pe,RANGE_FELT:()=>be,RANGE_I128:()=>Be,RANGE_I16:()=>Ie,RANGE_I32:()=>ke,RANGE_I64:()=>xe,RANGE_I8:()=>Se,RANGE_U128:()=>Te,RANGE_U16:()=>we,RANGE_U32:()=>Ee,RANGE_U64:()=>ve,RANGE_U8:()=>_e,RANGE_U96:()=>Ae,RPC_DEFAULT_NODES:()=>je,SNIP9_V1_INTERFACE_ID:()=>Ne,SNIP9_V2_INTERFACE_ID:()=>De,SYSTEM_MESSAGES:()=>ze,StarknetChainId:()=>Ve,SupportedRpcVersion:()=>Me,TEXT_TO_FELT_MAX_LEN:()=>le,TransactionHashPrefix:()=>He,UDC:()=>Re,ZERO:()=>ue});var Ht={};Ut(Ht,{JRPC:()=>Mt,PAYMASTER_API:()=>l,RPCSPEC08:()=>s,RPCSPEC09:()=>o});var Mt={},$t={};Vt($t,o),Vt(Ht,$t),Ut({},{IS_BROWSER:()=>jt,addHexPrefix:()=>Jt,arrayBufferToString:()=>qt,atobUniversal:()=>Kt,bigIntToUint8Array:()=>oe,btoaUniversal:()=>Wt,buf2hex:()=>Zt,calcByteLength:()=>te,concatenateArrayBuffer:()=>ie,hexStringToUint8Array:()=>se,padLeft:()=>Qt,pascalToSnake:()=>re,removeHexPrefix:()=>Xt,sanitizeBytes:()=>ee,sanitizeHex:()=>ne,stringToUint8Array:()=>ae,uint8ArrayToBigInt:()=>ce,utf8ToArray:()=>Yt,utf8ToBigInt:()=>Gt,utf8ToUint8Array:()=>zt});var jt="undefined"!=typeof window;function qt(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function zt(t){return(new TextEncoder).encode(t)}var Yt=zt;function Gt(t){return ce(zt(t))}function Kt(t){return O.decode(t)}function Wt(t){return O.encode(new Uint8Array(t))}function Zt(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function Xt(t){return t.replace(/^0x/i,"")}function Jt(t){return`0x${Xt(t)}`}function Qt(t,e,n="0"){return function(t,e,n,r="0"){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function te(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function ee(t,e=8,n="0"){return Qt(t,te(t,e),n)}function ne(t){const e=ee(Xt(t),2);return e?Jt(e):e}var re=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function ie(t){const e=t.reduce((t,e)=>t+e.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(t,r),r+=t.byteLength}),n}function se(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: "${t}" contains non-hexadecimal characters`);const n=e.length%2!=0?`0${e}`:e,r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2)r[t/2]=parseInt(n.substring(t,t+2),16);return r}function ae(t){return/^0[xX][0-9a-fA-F]*$/.test(t)?se(t):function(t){return/^[0-9]+$/.test(t)}(t)?oe(BigInt(t)):zt(t)}function oe(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function ce(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var le=31,ue=0n,de=2n**250n-1n,he=2n**31n-1n,fe=ue,pe=2n**251n+17n*2n**192n+1n,ge=256n,ye=2n**251n-ge,me=(t,e)=>({min:t,max:e}),be=me(ue,pe-1n),_e=me(ue,255n),we=me(ue,65535n),Ee=me(ue,2n**32n-1n),ve=me(ue,2n**64n-1n),Ae=me(ue,2n**96n-1n),Te=me(ue,2n**128n-1n),Se=me(-128n,127n),Ie=me(-32768n,32767n),ke=me(-(2n**31n),2n**31n-1n),xe=me(-(2n**63n),2n**63n-1n),Be=me(-(2n**127n),2n**127n-1n),Ce={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Re={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},Oe="0x414e595f43414c4c4552",Ne="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",De="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Le=128,Pe=2147483648n,Ue={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},Fe={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Ve={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},He={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},Me={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},$e={rpcVersion:"0.9.0",transactionVersion:Ht.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},je={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},qe={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ze={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},Ye=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...$e}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Ge={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Ke=class t{static instance;config;constructor(){this.config=Ye}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Ge[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(Ge[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Ge).filter(t=>this.shouldLog(Ge[t])&&"OFF"!==t)}}.getInstance(),We={};Ut(We,{RpcChannel:()=>ya});var{ETransactionVersion:Ze}=o,{ETransactionVersion2:Xe}=o,{ETransactionVersion3:Je}=o,{EDataAvailabilityMode:Qe}=s,{EDAMode:tn}=s;function en(t){return"l1_data_gas"in t}var{ETransactionStatus:nn}=s,{ETransactionExecutionStatus:rn}=s,{ETransactionType:sn}=o,{EBlockStatus:an}=o,{ETransactionFinalityStatus:on}=o,{ETransactionExecutionStatus:cn}=o,{EBlockTag:ln}=o,un="DEPLOY",dn="INVOKE",hn={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},fn={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},pn={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},gn={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},yn={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};Ut({},{parse:()=>bn,parseAlwaysAsBig:()=>_n,stringify:()=>wn});var mn=t=>{if(!V.Fq(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},bn=t=>V.qg(String(t),void 0,mn),_n=t=>V.qg(String(t),void 0,V.z3),wn=(t,e,n,r)=>V.As(t,e,n,r),En=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:wn(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const s=await this.batchPromises[r];delete this.batchPromises[r];const a=s.find(t=>t.id===r);if(!a)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return a}};function vn(t,e){if(!t)throw new Error(e||"Assertion failure")}var An={};Ut(An,{addPercent:()=>Zn,assertInRange:()=>Mn,bigNumberishArrayToDecimalStringArray:()=>$n,bigNumberishArrayToHexadecimalStringArray:()=>jn,cleanHex:()=>Hn,getDecimalString:()=>zn,getHexString:()=>Yn,getHexStringArray:()=>Gn,getNext:()=>Qn,hexToBytes:()=>Wn,hexToDecimalString:()=>Vn,isBigNumberish:()=>Jn,isHex:()=>Rn,isHexString:()=>On,isStringWholeNumber:()=>qn,stringToSha256ToArrayBuff4:()=>Xn,toBigInt:()=>Nn,toCairoBool:()=>Kn,toHex:()=>Ln,toHex64:()=>Fn,toHexString:()=>Pn,toStorageKey:()=>Un,tryToBigInt:()=>Dn});var Tn=t=>void 0===t||void 0===t;function Sn(t){return"number"==typeof t}function In(t){return"boolean"==typeof t}function kn(t){return"bigint"==typeof t}function xn(t){return"string"==typeof t}function Bn(t){return void 0!==Ot&&t instanceof Ot}function Cn(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Rn(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var On=Rn;function Nn(t){return BigInt(t)}function Dn(t){return t?BigInt(t):void 0}function Ln(t){return Jt(Nn(t).toString(16))}var Pn=Ln;function Un(t){return Jt(Nn(t).toString(16).padStart(64,"0"))}function Fn(t){const e=Jt(Nn(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Vn(t){return BigInt(Jt(t)).toString(10)}function Hn(t){return t.toLowerCase().replace(/^(0x)0+/,"$1")}function Mn(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),a=BigInt(e),o=BigInt(n);vn(s>=a&&s<=o,`Message not signable, ${i}.`)}function $n(t){return t.map(t=>Nn(t).toString(10))}function jn(t){return t.map(t=>Ln(t))}function qn(t){return/^\d+$/.test(t)}function zn(t){if(Rn(t))return Vn(t);if(qn(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Yn(t){if(Rn(t))return t;if(qn(t))return Pn(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Gn(t){return t.map(Yn)}function Kn(t){return(+t).toString()}function Wn(t){if(!Rn(t))throw new Error(`${t} needs to be a hex-string`);let e=Xt(t);return e.length%2!=0&&(e=`0${e}`),(0,H.aT)(e)}function Zn(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Xn(t){var e;return Wn(Ln((e=BigInt(Jt(Zt(at(t)))),Number(e&he))))}function Jn(t){return Sn(t)||kn(t)||xn(t)&&(Rn(t)||qn(t))}function Qn(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function tr(t){const e=Xt(Ln(BigInt(t))),n=e.length%2==0?e:`0${e}`;return Jt((0,ot.keccak)(Wn(Jt(n))).toString(16))}function er(t){const e=BigInt(function(t){return Jt((0,ot.keccak)(Yt(t)).toString(16))}(t));return e&de}function nr(t){return Ln(er(t))}function rr(t){return Sn(t)||kn(t)?Ln(t):Rn(t)?t:qn(t)?Ln(t):nr(t)}function ir(t){const e=Jt(t.reduce((t,e)=>t+Xt(Ln(e)).padStart(64,"0"),""));return Jt((0,H.My)(It(Wn(e))))}function sr(t,e,n,r,i){return ir([t,e,i,n,r.length,...r])}function ar(t,e,n){return ir([t,e,n.length,...n])}function or(t){return/^[\x00-\x7F]*$/.test(t)}function cr(t){return t.length<=le}function lr(t){return/^[0-9]*$/i.test(t)}function ur(t){return xn(t)&&!Rn(t)&&!qn(t)}Ut({},{getL1MessageHash:()=>ar,getL2MessageHash:()=>sr,getSelector:()=>rr,getSelectorFromName:()=>nr,keccakBn:()=>tr,solidityUint256PackedKeccak256:()=>ir,starknetKeccak:()=>er}),Ut({},{decodeShortString:()=>gr,encodeShortString:()=>pr,isASCII:()=>or,isDecimalString:()=>lr,isLongText:()=>hr,isShortString:()=>cr,isShortText:()=>dr,isText:()=>ur,splitLongString:()=>fr});var dr=t=>ur(t)&&cr(t),hr=t=>ur(t)&&!cr(t);function fr(t){const e=RegExp(`[^]{1,${le}}`,"g");return t.match(e)||[]}function pr(t){if(!or(t))throw new Error(`${t} is not an ASCII string`);if(!cr(t))throw new Error(`${t} is too long`);return Jt(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function gr(t){if(!or(t))throw new Error(`${t} is not an ASCII string`);if(Rn(t))return Xt(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(lr(t))return gr("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}function yr(t){const e=0n===BigInt(t.pending_word)?"":gr(Ln(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":gr(Ln(e))),"")+e}function mr(t){const e=fr(t),n=e[e.length-1],r=e.map(pr),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}Ut({},{byteArrayFromString:()=>mr,stringFromByteArray:()=>yr});function br(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function _r(t){if(kn(t)||Number.isInteger(t))return t.toString();if(xn(t)){if(Rn(t))return BigInt(t).toString();if(ur(t)){if(!cr(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(pr(t)).toString()}if(qn(t))return t}if(In(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}Ut({},{felt:()=>Jr,getAbiContractVersion:()=>Kr,getArrayType:()=>zr,isCairo1Abi:()=>Yr,isCairo1Type:()=>qr,isLen:()=>Ir,isTypeArray:()=>xr,isTypeBool:()=>Vr,isTypeContractAddress:()=>Hr,isTypeEnum:()=>Or,isTypeEthAddress:()=>Mr,isTypeFelt:()=>kr,isTypeInt:()=>Pr,isTypeLiteral:()=>Fr,isTypeNamedTuple:()=>Cr,isTypeNonZero:()=>Gr,isTypeOption:()=>Nr,isTypeResult:()=>Dr,isTypeSecp256k1Point:()=>jr,isTypeStruct:()=>Rr,isTypeTuple:()=>Br,isTypeU96:()=>$r,isTypeUint:()=>Lr,isTypeUint256:()=>Ur,tuple:()=>Xr,uint256:()=>Wr,uint512:()=>Zr});var wr=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex(t=>t>0))}static __processData(t){if(xn(t))return ae(t);if(kn(t))return oe(t);if(Number.isInteger(t))return oe(BigInt(t));if(In(t))return oe(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return ce(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return Jt(this.toBigInt().toString(16))}toApiRequest(){return br([this.toHexString()])}static validate(e){vn(null!==e,"null value is not allowed for felt252"),vn(void 0!==e,"undefined value is not allowed for felt252"),vn(xn(e)||Sn(e)||kn(e)||In(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=ce(n);vn(r>=0n&&r<pe,`Value ${n} is out of felt252 range [0, ${pe})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},Er=(1n<<128n)-1n,vr=(1n<<256n)-1n,Ar=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(Cn(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&Er,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){vn(null!==t,"null value is not allowed for u256"),vn(void 0!==t,"undefined value is not allowed for u256"),vn(Jn(t)||Cn(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return vn(e>=0n,"bigNumberish is smaller than UINT_256_MIN"),vn(e<=vr,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return vn(n>=0n&&n<=340282366920938463463374607431768211455n,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),vn(r>=0n&&r<=340282366920938463463374607431768211455n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=Qn(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Jt(this.low.toString(16)),high:Jt(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[_r(this.low),_r(this.high)]}},Tr=(1n<<512n)-1n,Sr=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(Cn(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&Er,this.limb1=(n&Er<<128n)>>128n,this.limb2=(n&Er<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){vn(null!==t,"null value is not allowed for u512"),vn(void 0!==t,"undefined value is not allowed for u512"),vn(Jn(t)||Cn(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return vn(e>=0n,"bigNumberish is smaller than UINT_512_MIN."),vn(e<=Tr,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),a=BigInt(n),o=BigInt(r);return[i,s,a,o].forEach((t,e)=>{vn(t>=0n&&t<=Er,`limb${e} is not in the range of a u128 number`)}),{limb0:i,limb1:s,limb2:a,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=Qn(e),i=Qn(e),s=Qn(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Jt(this.limb0.toString(16)),limb1:Jt(this.limb1.toString(16)),limb2:Jt(this.limb2.toString(16)),limb3:Jt(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[_r(this.limb0),_r(this.limb1),_r(this.limb2),_r(this.limb3)]}},Ir=t=>/_len$/.test(t),kr=t=>"felt"===t||"core::felt252"===t,xr=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Br=t=>/^\(.*\)$/i.test(t),Cr=t=>/\(.*\)/i.test(t)&&t.includes(":"),Rr=(t,e)=>t in e,Or=(t,e)=>t in e,Nr=t=>t.startsWith("core::option::Option::"),Dr=t=>t.startsWith("core::result::Result::"),Lr=t=>Object.values(hn).includes(t),Pr=t=>Object.values(fn).includes(t),Ur=t=>Ar.isAbiType(t),Fr=t=>Object.values(pn).includes(t),Vr=t=>"core::bool"===t,Hr=t=>t===pn.ContractAddress,Mr=t=>"core::starknet::eth_address::EthAddress"===t,$r=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,jr=t=>t===pn.Secp256k1Point,qr=t=>t.includes("::"),zr=t=>qr(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Yr(t){const{cairo:e}=Kr(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Gr(t){return t.startsWith("core::zeroable::NonZero::")}function Kr(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return qr(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Wr=t=>new Ar(t).toUint256DecimalString(),Zr=t=>new Sr(t).toUint512DecimalString(),Xr=(...t)=>({...t});function Jr(t){return _r(t)}var Qr=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!Tn(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!Tn(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!Tn(t[1]));return Tn(t)?"":t[0]}},ti={Some:0,None:1},ei=class{Some;None;constructor(t,e){if(!(t in Object.values(ti)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===ti.Some){if(Tn(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Tn(this.Some)}isNone(){return!0===this.None}},ni={Ok:0,Err:1},ri=class{Ok;Err;constructor(t,e){if(!(t in Object.values(ni)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===ni.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!Tn(this.Ok))return this.Ok;if(!Tn(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Tn(this.Ok)}isErr(){return!Tn(this.Err)}},ii=(t,e,n)=>{if(!kn(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function si(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const a=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===a){if(Array.isArray(t[i])){const e=si(t[i],t[i].map(t=>a));return r[i]=Object.values(e).join(""),r}return ii(t,e,i),r[i]=gr(s),r}if("number"===a)return ii(t,e,i),r[i]=Number(s),r;if("function"==typeof a)return r[i]=a(s),r;if(Array.isArray(a)){const e=si(t[i],a,a[0]);return r[i]=Object.values(e),r}return Cn(a)?(r[i]=si(t[i],a),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)},{})}var ai=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(xn(t))return ae(t);if(Bn(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return br([this.toHexString()])}toBigInt(){return ce(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return Jt("padded"===t?Zt(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;vn(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},oi={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ci=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},li=class extends ci{},ui=class extends li{constructor(t,e,n){super(`RPC: ${e} with params ${wn(n,null,2)}\n\n      ${t.code}: ${t.message}: ${wn(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return oi[t]===this.code}},di=Ye.get("buffer")||void 0!==Ot&&Ot||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==n.g&&n.g.Buffer||class{constructor(){throw new li("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new li("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=Ye.get("buffer")||void 0!==Ot&&Ot;return e&&e.isBuffer&&e.isBuffer(t)}},hi=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},fi=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return vn(Array.isArray(t)&&n instanceof wr&&r instanceof hi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(Bn(t))e=new Uint8Array(t);else if(xn(t))e=ae(t);else if(kn(t))e=oe(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=oe(BigInt(t))}var n;const r=ai.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,a=[];let o,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);a.push(new ai(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");o=new wr(n),c=new hi(s)}else o=new wr(0),c=new hi(0);return{data:a,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),br([Jt(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=ie(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=ie(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=ie(this.toElements());return Jt(0===t.length?"0":Zt(t))}toBuffer(){const t=ie(this.toElements());return di.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){vn(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){vn(null!=t,"Invalid input: null or undefined"),vn(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),vn("object"!=typeof t||Bn(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),vn(!Sn(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),vn(!Sn(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),vn(!kn(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),vn(t instanceof Uint8Array||Bn(t)||xn(t)||Sn(t)||kn(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(Qn(e))},()=>ai.factoryFromApiResponse(e)),r=wr.factoryFromApiResponse(e),i=hi.factoryFromApiResponse(e);return new t(n,r,i)}},pi=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=_e.min&&n<=_e.max,`Value is out of u8 range [${_e.min}, ${_e.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},gi=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=we.min&&n<=we.max,`Value is out of u16 range [${we.min}, ${we.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},yi=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=ve.min&&n<=ve.max,`Value is out of u64 range [${ve.min}, ${ve.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},mi=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=Ae.min&&n<=Ae.max,`Value is out of u96 range [${Ae.min}, ${Ae.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},bi=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=Te.min&&n<=Te.max,`Value is out of u128 range [${Te.min}, ${Te.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Qn(e))}},_i=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=Se.min&&n<=Se.max,`Value is out of i8 range [${Se.min}, ${Se.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=BigInt(n);return new t(r>pe/2n?r-pe:r)}},wi=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=Ie.min&&n<=Ie.max,`Value is out of i16 range [${Ie.min}, ${Ie.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=BigInt(n);return new t(r>pe/2n?r-pe:r)}},Ei=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=ke.min&&n<=ke.max,`Value is out of i32 range [${ke.min}, ${ke.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=BigInt(n);return new t(r>pe/2n?r-pe:r)}},vi=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=xe.min&&n<=xe.max,`Value is out of i64 range [${xe.min}, ${xe.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=BigInt(n);return new t(r>pe/2n?r-pe:r)}},Ai=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return xn(t)&&ur(t)?Gt(t):BigInt(t)}toApiRequest(){return br([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vn(null!=e,"Invalid input: null or undefined"),vn(!Cn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vn(!Sn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);vn(n>=Be.min&&n<=Be.max,`Value is out of i128 range [${Be.min}, ${Be.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Qn(e),r=BigInt(n);return new t(r>pe/2n?r-pe:r)}},Ti=(ai.abiSelector,fi.abiSelector,wr.abiSelector,Ar.abiSelector,Sr.abiSelector,pi.abiSelector,gi.abiSelector,yi.abiSelector,mi.abiSelector,bi.abiSelector,_i.abiSelector,wi.abiSelector,Ei.abiSelector,vi.abiSelector,Ai.abiSelector,ai.abiSelector,fi.abiSelector,wr.abiSelector,Ar.abiSelector,Sr.abiSelector,pi.abiSelector,gi.abiSelector,yi.abiSelector,mi.abiSelector,bi.abiSelector,_i.abiSelector,wi.abiSelector,Ei.abiSelector,vi.abiSelector,Ai.abiSelector,{request:{[ai.abiSelector]:t=>new ai(t).toApiRequest(),[fi.abiSelector]:t=>new fi(t).toApiRequest(),[wr.abiSelector]:t=>Jr(t),[Ar.abiSelector]:t=>new Ar(t).toApiRequest(),[Sr.abiSelector]:t=>new Sr(t).toApiRequest(),[pi.abiSelector]:t=>Jr(t),[gi.abiSelector]:t=>Jr(t),[yi.abiSelector]:t=>Jr(t),[mi.abiSelector]:t=>Jr(t),[bi.abiSelector]:t=>Jr(t),[_i.abiSelector]:t=>new _i(t).toApiRequest(),[wi.abiSelector]:t=>new wi(t).toApiRequest(),[Ei.abiSelector]:t=>new Ei(t).toApiRequest(),[vi.abiSelector]:t=>new vi(t).toApiRequest(),[Ai.abiSelector]:t=>new Ai(t).toApiRequest()},response:{[ai.abiSelector]:t=>ai.factoryFromApiResponse(t).decodeUtf8(),[fi.abiSelector]:t=>fi.factoryFromApiResponse(t).decodeUtf8(),[wr.abiSelector]:t=>BigInt(Qn(t)),[Ar.abiSelector]:t=>Ar.factoryFromApiResponse(t).toBigInt(),[Sr.abiSelector]:t=>Sr.factoryFromApiResponse(t).toBigInt(),[pi.abiSelector]:t=>BigInt(Qn(t)),[gi.abiSelector]:t=>BigInt(Qn(t)),[yi.abiSelector]:t=>BigInt(Qn(t)),[mi.abiSelector]:t=>BigInt(Qn(t)),[bi.abiSelector]:t=>BigInt(Qn(t)),[_i.abiSelector]:t=>BigInt(Qn(t)),[wi.abiSelector]:t=>BigInt(Qn(t)),[Ei.abiSelector]:t=>BigInt(Qn(t)),[vi.abiSelector]:t=>BigInt(Qn(t)),[Ai.abiSelector]:t=>BigInt(Qn(t))}}),Si=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Ti}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>Ir(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Ii=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Ti}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function ki(t,e,n){return"constructor"===t&&!n&&!e.length}function xi(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0===--i)return r;return Number.POSITIVE_INFINITY}function Bi(t){return qr(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+xi(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+xi(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map(t=>n.length?t.replace(" ",n.shift()):t);return Cr(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Ci=class t{content;arrayType;constructor(e,n){vn(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}vn(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,n)=>(t[n]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function Ri({type:t,val:e,parser:n}){switch(!0){case Ar.isAbiType(t):case Sr.isAbiType(t):case pi.isAbiType(t):case gi.isAbiType(t):case yi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case _i.isAbiType(t):case wi.isAbiType(t):case Ei.isAbiType(t):case vi.isAbiType(t):case Ai.isAbiType(t):case ai.isAbiType(t):return n.getRequestParser(t)(e);case jr(t):{const t=Xt(Ln(e)).padStart(128,"0"),n=Wr(Jt(t.slice(-64))),r=Wr(Jt(t.slice(0,-64)));return[Jr(r.low),Jr(r.high),Jr(n.low),Jr(n.high)]}default:return n.getRequestParser(wr.abiSelector)(e)}}function Oi({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Ci.isTypeFixedArray(e)){const s=Ci.getFixedArrayType(e);let a=[];if(Array.isArray(t))a=new Ci(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);a=Object.values(t),vn(a.length===Ci.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Ci.getFixedArraySize(e)} items. ${a.length} items provided.`)}return a.reduce((t,e)=>t.concat(Oi({element:e,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(Jr(t.length));const a=zr(e);return t.reduce((t,e)=>t.concat(Oi({element:e,type:a,structs:n,enums:r,parser:i})),s)}if(Ar.isAbiType(e))return i.getRequestParser(e)(t);if(Sr.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(Mr(e))return Ri({type:e,val:t,parser:i});if(fi.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],a=t;return s.reduce((t,e)=>t.concat(Oi({element:a[e.name],type:e.type,structs:n,enums:r,parser:i})),[])}if(Br(e)){const s=function(t,e){const n=Bi(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map((t,e)=>({element:r[e],type:t.type??t}))}(t,e);return s.reduce((t,e)=>{const s=Oi({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)},[])}if(Or(e,r)){const{variants:s}=r[e];if(Nr(e)){const e=t;if(e.isSome()){const t=s.find(t=>"Some"===t.name);if(Tn(t))throw Error("Error in abi : Option has no 'Some' variant.");const a=t.type;if("()"===a)return ti.Some.toString();const o=Oi({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[ti.Some.toString(),...o]:[ti.Some.toString(),o]}return ti.None.toString()}if(Dr(e)){const e=t;if(e.isOk()){const t=s.find(t=>"Ok"===t.name);if(Tn(t))throw Error("Error in abi : Result has no 'Ok' variant.");const a=t.type;if("()"===a)return ni.Ok.toString();const o=Oi({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[ni.Ok.toString(),...o]:[ni.Ok.toString(),o]}const a=s.find(t=>"Err"===t.name);if(Tn(a))throw Error("Error in abi : Result has no 'Err' variant.");const o=a.type;if("()"===o)return ni.Err.toString();const c=Oi({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(c)?[ni.Err.toString(),...c]:[ni.Err.toString(),c]}const a=t,o=a.activeVariant(),c=s.find(t=>t.name===o);if(Tn(c))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=c.type,u=s.findIndex(t=>t.name===o);if("()"===l)return u.toString();const d=Oi({element:a.unwrap(),type:l,structs:n,enums:r,parser:i});return Array.isArray(d)?[u.toString(),...d]:[u.toString(),d]}if(Gr(e))return Ri({type:zr(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return Ri({type:e,val:t,parser:i})}function Ni(t,e,n){let r;switch(!0){case Vr(t):return r=e.next().value,Boolean(BigInt(r));case Ar.isAbiType(t):case Sr.isAbiType(t):case pi.isAbiType(t):case gi.isAbiType(t):case yi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case _i.isAbiType(t):case wi.isAbiType(t):case Ei.isAbiType(t):case vi.isAbiType(t):case Ai.isAbiType(t):return n.getResponseParser(t)(e);case Mr(t):return r=e.next().value,BigInt(r);case ai.isAbiType(t):return n.getResponseParser(t)(e);case jr(t):const i=Xt(e.next().value).padStart(32,"0"),s=Xt(e.next().value).padStart(32,"0"),a=Xt(e.next().value).padStart(32,"0"),o=Xt(e.next().value).padStart(32,"0");return BigInt(Jt(s+i+o+a));default:return n.getResponseParser(wr.abiSelector)(e)}}function Di(t,e,n,r,i){if("()"===e.type)return{};if(Ar.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Sr.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(fi.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Ci.isTypeFixedArray(e.type)){const s=[],a={name:"",type:Ci.getFixedArrayType(e.type)},o=Ci.getFixedArraySize(e.type);for(;s.length<o;)s.push(Di(t,a,n,r,i));return s}if(xr(e.type)){const s=[],a={name:"",type:zr(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Di(t,a,n,r,i));return s}if(Gr(e.type)){const s={name:"",type:zr(e.type)};return Di(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return Mr(e.type)?Ni(e.type,t,n):r[e.type].members.reduce((e,s)=>(e[s.name]=Di(t,s,n,r,i),e),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),a=i[e.type].variants.reduce((e,a,o)=>o===s?(e[a.name]=Di(t,{name:"",type:a.type},n,r,i),e):(e[a.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=s===ti.Some?a.Some:void 0;return new ei(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===ni.Ok?a.Ok:a.Err,new ri(s,t)}return new Qr(a)}if(Br(e.type))return Bi(e.type).reduce((e,s,a)=>{const o=s?.name?s.name:a,c={name:o,type:s?.type?s.type:s};return e[o]=Di(t,c,n,r,i),e},{});if(xr(e.type)){const s=[],a={name:"",type:zr(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Di(t,a,n,r,i));return s}return Ni(e.type,t,n)}function Li({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:a,type:o}=e;let c;switch(!0){case Ir(a):return c=t.next().value,BigInt(c);case n&&o in n||Br(o):case r&&Or(o,r):case Ci.isTypeFixedArray(o):return Di(t,e,s,n,r);case xr(o):if(qr(o))return Di(t,e,s,n,r);const l=[];if(i&&i[`${a}_len`]){const o=i[`${a}_len`];for(;l.length<o;)l.push(Di(t,{name:a,type:e.type.replace("*","")},s,n,r))}return l;case Gr(o):return Di(t,e,s,n,r);default:return Ni(o,t,s)}}var Pi=(t,e)=>{if(vn(xn(t)||Sn(t)||kn(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),xn(t)&&!Rn(t))return;const n=BigInt(t.toString(10));vn(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Ui=(t,e)=>{let n;switch(Sn(t)&&vn(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),vn(xn(t)||Sn(t)||kn(t)||Cn(t)&&"low"in t&&"high"in t||Cn(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case hn.u256:n=new Ar(t).toBigInt();break;case hn.u512:n=new Sr(t).toBigInt();break;default:n=Nn(t)}switch(e.type){case hn.u8:vn(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case hn.u16:vn(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case hn.u32:vn(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case hn.u64:vn(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case hn.u128:vn(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case hn.u256:vn(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case hn.u512:vn(Sr.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case pn.ClassHash:case pn.ContractAddress:vn(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case pn.Secp256k1Point:vn(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case pn.U96:vn(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Fi=(t,e)=>{vn(In(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Vi=(t,e,n)=>{if(e.type!==hn.u256&&e.type!==hn.u512){if(Mr(e.type)){vn(!Cn(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));return void vn(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}vn(Cn(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:n})=>{vn(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)})}else Ui(t,e)},Hi=(t,e)=>{vn(Cn(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(Nr(e.type)&&r.includes("isSome")&&r.includes("isNone")||Dr(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Mi=(t,e)=>{vn(Cn(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},$i=(t,e,n,r)=>{const i=xr(e.type),s=i?zr(e.type):Ci.getFixedArrayType(e.type);if(i&&kr(s)&&hr(t))return;let a=[];if(i)vn(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),a=t;else switch(!0){case Array.isArray(t):a=t;break;case"object"==typeof t:a=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case kr(s):a.forEach(t=>Pi(t,e));break;case Br(s):a.forEach(t=>Mi(t,{name:e.name,type:s}));break;case xr(s):a.forEach(t=>$i(t,{name:"",type:s},n,r));break;case Rr(s,n):a.forEach(t=>Vi(t,{name:e.name,type:s},n));break;case Or(s,r):a.forEach(t=>Hi(t,{name:e.name,type:s}));break;case Lr(s)||Fr(s):a.forEach(t=>Ui(t,{name:"",type:s}));break;case Vr(s):a.forEach(t=>Fi(t,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${a}`)}};function ji(t,e,n,r){t.inputs.reduce((t,i)=>{const s=e[t];switch(!0){case Ir(i.name):return t;case kr(i.type):Pi(s,i);break;case ai.isAbiType(i.type):ai.validate(s);break;case Lr(i.type)||Fr(i.type):Ui(s,i);break;case Vr(i.type):Fi(s,i);break;case fi.isAbiType(i.type):fi.validate(s);break;case _i.isAbiType(i.type):_i.validate(s);break;case wi.isAbiType(i.type):wi.validate(s);break;case Ei.isAbiType(i.type):Ei.validate(s);break;case vi.isAbiType(i.type):vi.validate(s);break;case Ai.isAbiType(i.type):Ai.validate(s);break;case xr(i.type)||Ci.isTypeFixedArray(i.type):$i(s,i,n,r);break;case Rr(i.type,n):Vi(s,i,n);break;case Or(i.type,r):Hi(s,i);break;case Br(i.type):Mi(s,i);break;case Gr(i.type):((t,e)=>{const n=zr(e.type);switch(vn(Lr(n)&&n!==Sr.abiSelector||kr(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case kr(n):Pi(t,e),vn(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Lr(n):Ui(t,{name:"",type:n}),n===hn.u256?vn(new Ar(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):vn(Nn(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1},0)}var qi=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const n=function(t){return t.find(t=>"interface"===t.type)?2:Yr(t)?1:0}(t);if(0===n||1===n)return new Si(t,e);if(2===n)return new Ii(t,e);throw Error(`Unsupported ABI version ${n}`)}(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==un&&vn(this.abi.filter(e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===dn?!n:n}).map(t=>t.name).includes(e),(t===dn?"invocable":"viewable")+" method not found in abi");const r=this.abi.find(n=>t===un?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type);if(ki(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);ji(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find(e=>e.name===t);if(ki(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(Ci.isTypeFixedArray(e))return function(t,e){const n=Ci.getFixedArrayType(e),r=Ci.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map(t=>i(t,n))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(xr(e))return function(t,e){const n=zr(e);return xn(t)?t:t.map(t=>i(t,n))}(t,e);if(Or(e,r)){const n=r[e];return a(t,n)}if(Br(e))return function(t,e){const n=Bi(e).reduce((e,n,r)=>{const s=Object.keys(t),a=n?.type?n.type:n;return o=i(t[s[r]],a),Object.defineProperty(e,r.toString(),{enumerable:!0,value:o??t[s[r]]}),e;var o},{});return n}(t,e);if(Mr(e))return t;if(Gr(e))return t;if(fi.isAbiType(e))return t;if($r(e))return t;if(jr(e))return t;if(Ar.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(Sr.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every(t=>t in n))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Rr(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce((e,n)=>{if("undefined"===t[n.name]&&(qr(n.type)||!Ir(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e},{}),a=(t,e)=>{if(Dr(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new ri(ni.Ok,i(t.unwrap(),r)):new ri(ni.Err,i(t.unwrap(),s))}if(Nr(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new ei(ti.Some,i(n.unwrap(),r)):new ei(ti.None,{})}const n=t,r=Object.entries(n.variant).map(t=>{if(Tn(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]});return new Qr(Object.fromEntries(r))};return e.reduce((e,n)=>{return Ir(n.name)&&!qr(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r},{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),ji(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce((t,e)=>Ir(e.name)&&!qr(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:a}=e;let{value:o}=t.next();switch(!0){case Ci.isTypeFixedArray(a):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${o}`);return Oi({element:o,type:e.type,structs:n,enums:r,parser:i});case xr(a):if(!Array.isArray(o)&&!ur(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return xn(o)&&(o=fr(o)),Oi({element:o,type:e.type,structs:n,enums:r,parser:i});case Gr(a):return Ri({type:zr(a),val:o,parser:i});case Mr(a):return Ri({type:a,val:o,parser:i});case Rr(a,n)||Br(a)||Ar.isAbiType(a):case Or(a,r):return Oi({element:o,type:a,structs:n,enums:r,parser:i});default:return Ri({type:a,val:o,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap(([t,i])=>{let s=i;"entrypoint"===t?s=nr(s):hr(s)&&(s=mr(s));const a=Array.isArray(r)&&"0"===t?"$$len":t;if(kn(s))return[[`${n}${a}`,Jr(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?ti.Some:ti.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${a}.`):[[`${n}${a}`,Jr(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?ni.Ok:ni.Err;return e({0:r,1:t.unwrap()},`${n}${a}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===r);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${a}`,Jr(i)]]:e({0:i,1:t.unwrap()},`${n}${a}.`)}return e(s,`${n}${a}.`)}return[[`${n}${a}`,Jr(s)]]})};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find(e=>e.name===t),r=e.flat()[Symbol.iterator](),i=n.flat().reduce((t,e,n)=>{const i=e.name??n;return t[i]=Li({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return si(this.parse(t,e),n)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Ln(t))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map(t=>Li({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}};Ut({},{calculateContractAddressFromHash:()=>bs,calculateDeclareTransactionHash:()=>ds,calculateDeployAccountTransactionHash:()=>hs,calculateInvokeTransactionHash:()=>us,calculateL2MessageTxHash:()=>ls,computeCompiledClassHash:()=>Ss,computeContractClassHash:()=>xs,computeHashOnElements:()=>gs,computeHintedClassHash:()=>Es,computeLegacyContractClassHash:()=>vs,computePedersenHash:()=>fs,computePedersenHashOnElements:()=>ys,computePoseidonHash:()=>ps,computePoseidonHashOnElements:()=>ms,computeSierraContractClassHash:()=>ks,formatSpaces:()=>ws,getL1MessageHash:()=>ar,getL2MessageHash:()=>sr,getSelector:()=>rr,getSelectorFromName:()=>nr,hashByteCodeSegments:()=>Ts,keccakBn:()=>tr,poseidon:()=>kt,solidityUint256PackedKeccak256:()=>ir,starknetKeccak:()=>er}),Ut({},{calculateDeclareTransactionHash:()=>ns,calculateDeployAccountTransactionHash:()=>es,calculateInvokeTransactionHash:()=>rs,calculateTransactionHashCommon:()=>ts,encodeDataResourceBoundsL1:()=>Ji,encodeResourceBoundsL1:()=>Zi,encodeResourceBoundsL2:()=>Xi,hashDAMode:()=>Wi,hashFeeFieldV3B3:()=>Qi});var zi=t=>t.map(t=>BigInt(t)),Yi=BigInt(pr("L1_GAS")),Gi=BigInt(pr("L2_GAS")),Ki=BigInt(pr("L1_DATA"));function Wi(t,e){return(BigInt(t)<<32n)+BigInt(e)}function Zi(t){return(Yi<<192n)+(t.l1_gas.max_amount<<128n)+t.l1_gas.max_price_per_unit}function Xi(t){return(Gi<<192n)+(t.l2_gas.max_amount<<128n)+t.l2_gas.max_price_per_unit}function Ji(t){return(Ki<<192n)+(t.l1_data_gas.max_amount<<128n)+t.l1_data_gas.max_price_per_unit}function Qi(t,e){const n=Zi(e),r=Xi(e),i=Ji(e);return(0,ot.poseidonHashMany)([BigInt(t),n,r,i])}function ts(t,e,n,r,i,s,a,o,c,l,u=[]){const d=Qi(s,l),h=Wi(o,c),f=zi([t,e,n,d,(0,ot.poseidonHashMany)(zi(a)),r,i,h,...zi(u)]);return Ln((0,ot.poseidonHashMany)(f))}function es(t,e,n,r,i,s,a,o,c,l,u,d){return ts(He.DEPLOY_ACCOUNT,i,t,s,a,u,d,o,c,l,[(0,ot.poseidonHashMany)(zi(n)),e,r])}function ns(t,e,n,r,i,s,a,o,c,l,u,d){return ts(He.DECLARE,r,n,i,s,u,zi(d),o,c,l,[(0,ot.poseidonHashMany)(zi(a)),t,e])}function rs(t,e,n,r,i,s,a,o,c,l,u){return ts(He.INVOKE,e,t,r,i,l,u,a,o,c,[(0,ot.poseidonHashMany)(zi(s)),(0,ot.poseidonHashMany)(zi(n))])}function is(t){return[...t,t.length].reduce((t,e)=>ot.pedersen(Nn(t),Nn(e)),0).toString()}function ss(t,e,n,r,i,s,a,o=[]){const c=is(i);return is([t,e,n,r,c,s,a,...o])}function as(t,e,n,r,i,s,a){return ss(He.DECLARE,n,e,0,[t],r,i,[s,...a?[a]:[]])}function os(t,e,n,r,i,s,a,o){const c=[e,r,...n];return ss(He.DEPLOY_ACCOUNT,i,t,0,c,s,a,[o])}function cs(t,e,n,r,i,s){return ss(He.INVOKE,e,t,0,n,r,i,[s])}function ls(t,e,n,r,i,s){const a=[t,...r];return ss(He.L1_HANDLER,0,e,rr(n),a,0,i,[s])}function us(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return rs(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function ds(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return ns(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function hs(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return es(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function fs(t,e){return ot.pedersen(BigInt(t),BigInt(e))}function ps(t,e){return Ln(ot.poseidonHash(BigInt(t),BigInt(e)))}function gs(t){return[...t,t.length].reduce((t,e)=>ot.pedersen(BigInt(t),BigInt(e)),0).toString()}Ut({},{calculateDeclareTransactionHash:()=>as,calculateDeployAccountTransactionHash:()=>os,calculateL2MessageTxHash:()=>ls,calculateTransactionHash:()=>cs,calculateTransactionHashCommon:()=>ss,computeHashOnElements:()=>is}),Ut({},{starkCurve:()=>ot,weierstrass:()=>xt});var ys=gs;function ms(t){return Ln((0,ot.poseidonHashMany)(t.map(t=>BigInt(t))))}function bs(t,e,n,r){const i=gs(qi.compile(n)),s=gs([Jr("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return Ln(BigInt(s)%ye)}function _s(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function ws(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function Es(t){const{abi:e,program:n}=t,r=ws(wn({abi:e,program:n},_s));return Jt(ot.keccak(Yt(r)).toString(16))}function vs(t){const e=xn(t)?bn(t):t,n=Ln(fe),r=gs(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=gs(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),s=gs(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),a=gs(e.program.builtins.map(t=>pr(t))),o=Es(e),c=gs(e.program.data);return gs([n,r,i,s,a,o,c])}function As(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,ot.poseidonHashMany)(e.flatMap(t=>BigInt(pr(t)))))];var e});return(0,ot.poseidonHashMany)(e)}function Ts(t){const e=t.bytecode.map(t=>BigInt(t)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(t=>{const n=e.slice(r,r+=t);return[BigInt(t),(0,ot.poseidonHashMany)(n)]});return 1n+(0,ot.poseidonHashMany)(i)}function Ss(t){const e=BigInt(pr("COMPILED_CLASS_V1")),n=As(t.entry_points_by_type.EXTERNAL),r=As(t.entry_points_by_type.L1_HANDLER),i=As(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?Ts(t):(0,ot.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Ln((0,ot.poseidonHashMany)([e,n,r,i,s]))}function Is(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,ot.poseidonHashMany)(e)}function ks(t){const e=BigInt(pr("CONTRACT_CLASS_V0.1.0")),n=Is(t.entry_points_by_type.EXTERNAL),r=Is(t.entry_points_by_type.L1_HANDLER),i=Is(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=ws(wn(t.abi,null));return BigInt(Jt(ot.keccak(Yt(e)).toString(16)))}(t),a=(0,ot.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Ln((0,ot.poseidonHashMany)([e,n,r,i,s,a]))}function xs(t){const e=xn(t)?bn(t):t;return"sierra_program"in e?ks(e):vs(e)}function Bs(t){const e=xn(t)?t:wn(t);return Wt((0,Bt.ZI)(e))}function Cs(t){if(Array.isArray(t))return t;const e=qt((0,Bt.Aq)(Kt(t)));return bn(e)}function Rs(){const t=ot.utils.randomPrivateKey();return(0,ot.getStarkKey)(t)}function Os(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Ln(t));try{const{r:e,s:n}=t;return[Ln(e),Ln(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Ns(t){return $n(Os(t))}function Ds(t){return jn(Os(t))}function Ls(){return Ps({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function Ps(t,e=Ye.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Zn(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:Zn(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Zn(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:Zn(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Zn(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:Zn(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function Us(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Fs(t,e=Ye.get("resourceBoundsOverhead")){return Zn(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*Zn(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+Zn(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*Zn(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+Zn(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*Zn(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Vs(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Hs(t){if(t===Qe.L1)return tn.L1;if(t===Qe.L2)return tn.L2;throw Error("EDAM conversion")}function Ms(t,e){const n=Ln(e||t);if(!Object.values(Je).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function $s(t){if(!t)return;const e=Ln(t);if(e===Ze.V0)return Ze.F0;if(e===Ze.V1)return Ze.F1;if(e===Ze.V2)return Ze.F2;if(e===Ze.V3)return Ze.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function js(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Qe.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Qe.L1,resourceBounds:t.resourceBounds??Ls()}}function qs(t){const e=Ln(t);return Jt(Zt((0,ot.getPublicKey)(e,!1)))}function zs(t){const e=t=>{if(kn(t))return Ln(t);if(Cn(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function Ys(t){const e=t=>{if(xn(t))return BigInt(t);if(Cn(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function Gs(t){return"sierra_program"in(xn(t)?bn(t):t)}function Ks(){return ne(Zt(Ct.bI.utils.randomPrivateKey()))}function Ws(t){Mn(t,ue,2n**160n-1n,"Ethereum Address ");const e=Jt(Xt(Ln(t)).padStart(40,"0"));return vn(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}Ut({},{ZeroFeeEstimate:()=>Vs,compressProgram:()=>Bs,decompressProgram:()=>Cs,formatSignature:()=>Os,getFullPublicKey:()=>qs,intDAM:()=>Hs,randomAddress:()=>Rs,resourceBoundsToBigInt:()=>Ys,resourceBoundsToEstimateFeeResponse:()=>Us,resourceBoundsToHexString:()=>zs,signatureToDecimalArray:()=>Ns,signatureToHexArray:()=>Ds,toFeeVersion:()=>$s,toOverheadOverallFee:()=>Fs,toOverheadResourceBounds:()=>Ps,toTransactionVersion:()=>Ms,v3Details:()=>js,zeroResourceBounds:()=>Ls}),Ut({},{ethRandomPrivateKey:()=>Ks,validateAndParseEthAddress:()=>Ws});var Zs="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==n.g&&n.g.fetch.bind(n.g)||(()=>{throw new li("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function Xs(t){const e=t.version?Ln(t.version):Ze.V3;return e===Ze.V3||e===Ze.F3}function Js(t,e){const n=t.split("."),r=e.split(".");return n.every((t,e)=>"*"===t||t===r[e])}function Qs(t,e={allowAnyPatchVersion:!1}){return Object.values(Me).some(n=>Js(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}(n):n,t))}function ta(t){return new Promise(e=>{setTimeout(e,t)})}function ea(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=ws(wn(t.abi)),e.sierra_program=ws(wn(t.sierra_program)),e.sierra_program=Bs(e.sierra_program),e}function na(t){const e=xn(t)?bn(t):t;return Gs(t)?ea(e):{...e,..."program"in e&&{program:Bs(e.program)}}}function ra(t){return xn(t.abi)?bn(t.abi):t.abi}Ut({},{Block:()=>ca,createSierraContractClass:()=>ea,extractAbi:()=>ra,getDefaultNodeUrl:()=>ia,getDefaultNodes:()=>sa,getSupportedRpcVersions:()=>aa,parseContract:()=>na,validBlockTags:()=>oa,wait:()=>ta});var ia=(t,e=!1,n)=>{e||Ke.info("Using default public node url, please provide nodeUrl in provider options!");const r=sa(n??Ye.get("rpcVersion"))[t??Fe.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function sa(t){const e={...je};return Object.keys(e).forEach(function(n,r){e[n]=e[n].map(e=>`${e}${function(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}(t)}`)}),e}function aa(){return[...new Set(Object.values(Me))]}var oa=Object.values(ln),ca=class{hash=null;number=null;tag=null;setIdentifier(t){if(xn(t))if(lr(t))this.number=parseInt(t,10);else if(Rn(t))this.hash=t;else{if(!oa.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else kn(t)?this.hash=Ln(t):Sn(t)?this.number=t:this.tag=ln.LATEST;if(Sn(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function la(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}Ut({},{fromCallsToExecuteCalldata:()=>da,fromCallsToExecuteCalldata_cairo1:()=>ha,getCompiledCalldata:()=>la,getExecuteCalldata:()=>fa,getVersionsByType:()=>pa,transformCallsToMulticallArrays:()=>ua});var ua=t=>{const e=[],n=[];return t.forEach(t=>{const r=qi.compile(t.calldata||[]);e.push({to:Nn(t.contractAddress).toString(10),selector:Nn(nr(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:e,calldata:qi.compile({calldata:n})}},da=t=>{const{callArray:e,calldata:n}=ua(t);return[...qi.compile({callArray:e}),...n]},ha=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:qi.compile(t.calldata)}));return qi.compile({orderCalls:e})},fa=(t,e="0")=>"1"===e?ha(t):da(t);function pa(t){return"fee"===t?{v3:Ze.F3}:{v3:Ze.V3}}var ga={headers:{"Content-Type":"application/json"},blockIdentifier:ln.LATEST,retries:200},ya=class{id="RPC081";channelSpecVersion=Me.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(Fe).includes(a)?this.nodeUrl=ia(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||ia(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Ye.get("fetch")||Zs,this.blockIdentifier=r??ga.blockIdentifier,this.chainId=i,this.headers={...ga.headers,...s},this.retries=o??ga.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,Sn(n)&&(this.batchClient=new En({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Ke.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:wn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ui(n,t,e);if(r instanceof li)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Js(this.channelSpecVersion,t)||Ke.error(ze.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Qs(t))throw new li(`${ze.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Ln(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new ca(r).identifier,s=jn(t),a=jn(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Ln(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new ca(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Ln(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new ca(n).identifier,o=[];return r&&o.push(a.vn.SKIP_VALIDATE),i&&o.push(a.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Ln(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const l=e?.retryInterval??this.transactionRetryIntervalDefault,u=e?.errorStates??[a.sI.REJECTED],d=e?.successStates??[a.sI.ACCEPTED_ON_L2,a.sI.ACCEPTED_ON_L1],h={[c.sI.RECEIVED]:ze.txEvictedFromMempool,[c.sI.PRE_CONFIRMED]:ze.consensusFailed,[c.sI.CANDIDATE]:ze.txFailsBlockBuildingValidation},f=[];let p;for(;!s;){await ta(l);try{p=await this.getTransactionStatus(n),f.push(p.finality_status);const t=p.execution_status,e=p.finality_status;if(!e)throw new Error("waiting for transaction status");if(u.includes(t)||u.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=p,o=!0,r}(d.includes(t)||d.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof ui&&t.isType("TXN_HASH_NOT_FOUND")){Ke.info("txLife: ",f);const t=h[f.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let g=null;for(;null===g;){try{g=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await ta(l)}return g}getStorageAt(t,e,n=this.blockIdentifier){const r=Ln(t),i=Un(e),s=new ca(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new ca(e).identifier,i={simulation_flags:n?[a.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){let n;if(!Xs(e))throw Error(ze.legacyTxRPC08Message);if(!en(e.resourceBounds))throw Error(ze.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),version:a.WY.V3,signature:Ds(t.signature),nonce:Ln(e.nonce),resource_bounds:zs(e.resourceBounds),tip:Ln(e.tip),paymaster_data:e.paymasterData.map(t=>Ln(t)),account_deployment_data:e.accountDeploymentData.map(t=>Ln(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(!Gs(t)||!Xs(i))throw Error(ze.legacyTxRPC08Message);if(!en(i.resourceBounds))throw Error(ze.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,sender_address:n,compiled_class_hash:r||"",version:a.WY.V3,signature:Ds(e),nonce:Ln(i.nonce),contract_class:{sierra_program:Cs(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:zs(i.resourceBounds),tip:Ln(i.tip),paymaster_data:i.paymasterData.map(t=>Ln(t)),account_deployment_data:i.accountDeploymentData.map(t=>Ln(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(!Xs(i))throw Error(ze.legacyTxRPC08Message);if(!en(i.resourceBounds))throw Error(ze.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.wV.DEPLOY_ACCOUNT,version:a.WY.V3,signature:Ds(r),nonce:Ln(i.nonce),contract_address_salt:Ln(n||0),constructor_calldata:qi.toHex(e||[]),class_hash:Ln(t),resource_bounds:zs(i.resourceBounds),tip:Ln(i.tip),paymaster_data:i.paymasterData.map(t=>Ln(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new ca(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:nr(t.entrypoint),calldata:qi.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:Ws(n),to_address:Ln(r),entry_point_selector:rr(i),payload:Gn(s)},o=new ca(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=pa(e);let r;if(!Xs(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:Ds(t.signature),nonce:Ln(t.nonce),resource_bounds:zs(t.resourceBounds),tip:Ln(t.tip),paymaster_data:t.paymasterData.map(t=>Ln(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Ln(t))},t.type===a.wV.INVOKE)return{type:a.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),version:Ln(t.version||n.v3),...r};if(t.type===a.wV.DECLARE){if(!Gs(t.contract))throw Ke.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Cs(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Ln(t.version||n.v3),...r}}if(t.type===a.wV.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=r;return{type:t.type,constructor_calldata:qi.toHex(t.constructorCalldata||[]),class_hash:Ln(t.classHash),contract_address_salt:Ln(t.addressSalt||0),version:Ln(t.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},ma={};Ut(ma,{RpcChannel:()=>_a});var ba={headers:{"Content-Type":"application/json"},blockIdentifier:ln.LATEST,retries:200},_a=class{id="RPC090";channelSpecVersion=Me.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(Fe).includes(a)?this.nodeUrl=ia(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||ia(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Ye.get("fetch")||Zs,this.blockIdentifier=r??ba.blockIdentifier,this.chainId=i,this.headers={...ba.headers,...s},this.retries=o??ba.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,Sn(n)&&(this.batchClient=new En({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Ke.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:wn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ui(n,t,e);if(r instanceof li)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Js(this.channelSpecVersion,t)||Ke.error(ze.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Qs(t))throw new li(`${ze.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Ln(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new ca(r).identifier,s=jn(t),a=jn(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Ln(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new ca(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new ca(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Ln(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Ln(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new ca(n).identifier,a=[];return r&&a.push(c.vn.SKIP_VALIDATE),i&&a.push(c.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:a})}async waitForTransaction(t,e){const n=Ln(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,a=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,l=e?.errorStates??[],u=e?.successStates??[c.en.ACCEPTED_ON_L2,c.en.ACCEPTED_ON_L1],d={[c.sI.RECEIVED]:ze.txEvictedFromMempool,[c.sI.PRE_CONFIRMED]:ze.consensusFailed,[c.sI.CANDIDATE]:ze.txFailsBlockBuildingValidation},h=[];let f;for(;!s;){await ta(o);try{f=await this.getTransactionStatus(n),h.push(f.finality_status);const t=f.execution_status,e=f.finality_status;if(!e)throw new Error("waiting for transaction status");if(l.includes(t)||l.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=f,a=!0,r}(u.includes(t)||u.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&a)throw t;if(t instanceof ui&&t.isType("TXN_HASH_NOT_FOUND")){Ke.info("txLife: ",h);const t=d[h.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let p=null;for(;null===p;){try{p=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await ta(o)}return p}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const a=r?.retryInterval??500,o=[c.If.REVERTED],l=[c.en.ACCEPTED_ON_L2,c.en.ACCEPTED_ON_L1,c.en.PRE_CONFIRMED];let u;const d=(new Date).getTime();for(;s>0;){await ta(a),u=await this.getTransactionStatus(t),Ke.info(`${s} ${JSON.stringify(u)} ${((new Date).getTime()-d)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(o.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=u,t}if(l.includes(r)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,ln.PRE_CONFIRMED)),Ke.info(`${s} Checking new nonce ${t} ${((new Date).getTime()-d)/1e3}s.`),t!==i)return!0;await ta(a),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=Ln(t),i=Un(e),s=new ca(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Ln(t),r=new ca(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new ca(e).identifier,i={simulation_flags:n?[c.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:Ht.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:Ht.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:Ht.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new ca(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:nr(t.entrypoint),calldata:qi.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:Ws(n),to_address:Ln(r),entry_point_selector:rr(i),payload:Gn(s)},o=new ca(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=pa(e);vn(Xs(t),ze.legacyTxRPC08Message),vn("transaction"!==e||en(t.resourceBounds),ze.SWOldV3);const r={signature:Ds(t.signature),nonce:Ln(t.nonce),resource_bounds:zs(t.resourceBounds),tip:Ln(t.tip),paymaster_data:t.paymasterData.map(t=>Ln(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Ln(t)),version:Ms(n.v3,t.version)};if(t.type===Ht.ETransactionType.INVOKE)return{type:c.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),...r};if(t.type===Ht.ETransactionType.DECLARE)return vn(Gs(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Cs(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===Ht.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:qi.toHex(t.constructorCalldata||[]),class_hash:Ln(t.classHash),contract_address_salt:Ln(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},wa=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==n.g&&n.g.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:Ps(t,this.resourceBoundsOverhead),overall_fee:Fs(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:Ps(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:Fs(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:xn(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function Ea(t){return"0x3"===t.version&&"tip"in t&&xn(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function va(t,e=!0){return t.transactions.filter(Ea).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function Aa(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Ta(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,a=t[r];return a+(t[i]-a)*BigInt(Math.round(1e3*s))/1000n}function Sa(t){vn(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,be.max),n=t.reduce((t,e)=>e>t?e:t,0n),r=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),s=Math.floor(i.length/2);let a;a=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:a,modeTip:c,recommendedTip:a,p90Tip:Ta(i,90),p95Tip:Ta(i,95)}}async function Ia(t,e){try{const n=await t.getBlockWithTxs(e);return Sn(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new li(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function ka(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Ke.warn(`Failed to fetch block ${e}:`,t),null}}function xa(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(e,n)=>t-n)}async function Ba(t,e=ln.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return vn(Number.isInteger(r),"maxBlocks parameter must be an integer"),vn(r>=1,"maxBlocks parameter must be greater than or equal to 1"),vn(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),vn(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),vn(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Ia(t,e),a=xa(n,r),o=await async function(t,e){const n=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Ke.warn(`Failed to fetch block ${e} in parallel:`,t),null}});return Promise.all(n)}(t,a),c=o.filter(t=>null!==t).flatMap(t=>va(t,s)),l=o.filter(t=>null!==t).length;return c.length<i?(Ke.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${l} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Aa(l,c)):{...Sa(c),metrics:{blocksAnalyzed:l,transactionsTipsFound:c}}}catch(t){throw new li(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Ia(t,e),a=xa(n,r),o=[];let c=0;for(const e of a){const n=await ka(t,e);if(n){c+=1;const t=va(n,s);if(o.push(...t),o.length>=i)break}}return o.length<i?(Ke.error(`Insufficient transaction data: found ${o.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Aa(c,o)):{...Sa(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new li(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var Ca=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===cn.SUCCEEDED}static isReverted(t){return t.execution_status===cn.REVERTED}},Ra={[cn.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[cn.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Oa(t){const e=Ra[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,a=s(t);n={...i(t),statusReceipt:r,value:a,match:t=>r in t?t[r](a):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,Ca.prototype),Object.defineProperty(n,"constructor",{value:Ca,writable:!1,enumerable:!1,configurable:!1}),n}Ut({},{encodeData:()=>Ga,encodeType:()=>qa,encodeValue:()=>Ya,getDependencies:()=>ja,getMessageHash:()=>Wa,getStructHash:()=>Ka,getTypeHash:()=>za,isMerkleTreeType:()=>$a,prepareSelector:()=>Ma,validateTypedData:()=>Ha,verifyMessage:()=>Za}),Ut({},{MerkleTree:()=>Na,proofMerklePath:()=>Da});var Na=class t{leaves;branches=[];root;hashMethod;constructor(t,e=fs){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=fs){const[r,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,a=(s?n[i+1]:n[i-1])??"0x0",o=[...r,a],c=this.leaves.length===n.length?-1:this.branches.findIndex(t=>t.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:a,s?a:e,this.hashMethod),l,o)}};function Da(t,e,n,r=fs){if(0===n.length)return t===e;const[i,...s]=n;return Da(t,Na.hash(e,i,r),s,r)}var La={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Pa={[Ht.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ms,hashMerkleMethod:ps,escapeTypeString:t=>`"${t}"`,presetTypes:La},[Ht.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:ys,hashMerkleMethod:fs,escapeTypeString:t=>t,presetTypes:{}}};function Ua(t,e,{min:n,max:r}){const i=BigInt(t);vn(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Fa({types:t,domain:e}){return Pa[Ht.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===Ht.TypedDataRevision.ACTIVE?Ht.TypedDataRevision.ACTIVE:Pa[Ht.TypedDataRevision.LEGACY].domain in t&&(e.revision??Ht.TypedDataRevision.LEGACY)===Ht.TypedDataRevision.LEGACY?Ht.TypedDataRevision.LEGACY:void 0}function Va(t){try{return Ln(t)}catch(e){if(xn(t))return Ln(pr(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Ha(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Fa(e))}function Ma(t){return Rn(t)?t:nr(t)}function $a(t){return"merkletree"===t.type}function ja(t,e,n=[],r="",i=Ht.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===Ht.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),s.filter(e=>!n.includes(e)&&t[e]).reduce((e,n)=>[...e,...[n,...t[n].reduce((e,n)=>[...e,...ja(t,n.type,e,n.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function qa(t,e,n=Ht.TypedDataRevision.LEGACY){const r=n===Ht.TypedDataRevision.ACTIVE?{...t,...Pa[n].presetTypes}:t,[i,...s]=ja(r,e,void 0,void 0,n),a=i?[i,...s.sort()]:[],o=Pa[n].escapeTypeString;return a.map(t=>{const e=r[t].map(t=>{const e="enum"===t.type&&n===Ht.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})`:o(e);return`${o(t.name)}:${r}`});return`${o(t)}(${e})`}).join("")}function za(t,e,n=Ht.TypedDataRevision.LEGACY){return nr(qa(t,e,n))}function Ya(t,e,n,r={},i=Ht.TypedDataRevision.LEGACY){if(t[e])return[e,Ka(t,e,n,i)];if(Pa[i].presetTypes[e])return[e,Ka(Pa[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map(n=>Ya(t,e.slice(0,-1),n,void 0,i)[1]);return[e,Pa[i].hashMethod(r)]}switch(e){case"enum":if(i===Ht.TypedDataRevision.ACTIVE){const[s,a]=Object.entries(n)[0],o=t[r.parent].find(t=>t.name===r.key),c=t[o.contains],l=c.find(t=>t.name===s),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((e,n)=>{if(!e)return e;const r=a[n];return Ya(t,e,r,void 0,i)[1]});return[e,Pa[i].hashMethod([u,...d])]}return[e,Va(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find(t=>t.name===e.key);if(!$a(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map(n=>Ya(t,e,n,void 0,i)[1]),{root:a}=new Na(s,Pa[i].hashMerkleMethod);return["felt",a]}case"selector":return["felt",Ma(n)];case"string":if(i===Ht.TypedDataRevision.ACTIVE){const t=mr(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Pa[i].hashMethod(r)]}return[e,Va(n)];case"i128":if(i===Ht.TypedDataRevision.ACTIVE){const t=BigInt(n);return Ua(t,e,Be),[e,Va(t<0n?pe+t:t)]}return[e,Va(n)];case"timestamp":case"u128":return i===Ht.TypedDataRevision.ACTIVE&&Ua(n,e,Te),[e,Va(n)];case"felt":case"shortstring":return i===Ht.TypedDataRevision.ACTIVE&&Ua(Va(n),e,be),[e,Va(n)];case"ClassHash":case"ContractAddress":return i===Ht.TypedDataRevision.ACTIVE&&Ua(n,e,be),[e,Va(n)];case"bool":return i===Ht.TypedDataRevision.ACTIVE&&vn(In(n),`Type mismatch for ${e} ${n}`),[e,Va(n)];default:if(i===Ht.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,Va(n)]}}function Ga(t,e,n,r=Ht.TypedDataRevision.LEGACY){const i=t[e]??Pa[r].presetTypes[e],[s,a]=i.reduce(([i,s],a)=>{if(void 0===n[a.name]||null===n[a.name]&&"enum"!==a.type)throw new Error(`Cannot encode data: missing data for '${a.name}'`);const o=n[a.name],c={parent:e,key:a.name},[l,u]=Ya(t,a.type,o,c,r);return[[...i,l],[...s,u]]},[["felt"],[za(t,e,r)]]);return[s,a]}function Ka(t,e,n,r=Ht.TypedDataRevision.LEGACY){return Pa[r].hashMethod(Ga(t,e,n,r)[1])}function Wa(t,e){if(!Ha(t))throw new Error("Typed data does not match JSON schema");const n=Fa(t),{domain:r,hashMethod:i}=Pa[n];return i([pr("StarkNet Message"),Ka(t.types,r,t.domain,n),e,Ka(t.types,t.primaryType,t.message,n)])}function Za(t,e,n,r){const i=Ha(t);if(!Jn(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Jn(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Wa(t,r):Ln(t),a=Array.isArray(e)?new ot.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Ln(n);return ot.verify(a,s,o)}var Xa=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new wa;else{const e=t;if(e&&e.specVersion)if(Js("0.8",e.specVersion))this.channel=new We.RpcChannel({...e,waitMode:!1});else{if(!Js("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new ma.RpcChannel({...e,waitMode:!1})}else if(Js("0.8",Ye.get("rpcVersion")))this.channel=new We.RpcChannel({...e,waitMode:!1});else{if(!Js("0.9",Ye.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new ma.RpcChannel({...e,waitMode:!1})}this.responseParser=new wa(e?.resourceBoundsOverhead)}}static async create(t){const e=new We.RpcChannel({...t}),n=await e.getSpecVersion();if(Qs(n)||Ke.warn(`Using incompatible node spec version ${n}`),Js("0.8",n))return new this({...t,specVersion:Me.v0_8_1});if(Js("0.9",n))return new this({...t,specVersion:Me.v0_9_0});throw new li(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(Me).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=ln.LATEST,e=5e3){if(t===ln.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===ln.PRE_CONFIRMED?n+1:Number(Ln(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,a=!1;for(;!a;)if(await this.getBlockNumber()===r?a=!0:await ta(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof ma.RpcChannel)return async function(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}(this.channel,t);throw new li("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);vn("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return ir([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Oa(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return Oa(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof ma.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return Gs(i)?r?{cairo:"1",compiler:Kr(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof We.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof ma.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return async function(t,e,n,r,i,s){const a=Ha(e);if(!Jn(e)&&!a)throw new Error("message has a wrong format.");if(!Jn(r))throw new Error("accountAddress shall be a BigNumberish");const o=a?Wa(e,r):Ln(e),c=i?[i]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const e of c)try{const i=await t.callContract({contractAddress:Ln(r),entrypoint:e,calldata:qi.compile({hash:Nn(o).toString(),signature:Os(n)})});if(l.nokResponse.includes(i[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(l.error.some(e=>t.message.includes(e)))return!1;u=t}throw Error(`Signature verification Error: ${u}`)}(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=function(t){const e={...t};if(Gs(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Ss(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??xs(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof li)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===Ht.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return Ba(this,t,e)}};Ut({},{StarknetIdContract:()=>oo,StarknetIdIdentityContract:()=>lo,StarknetIdMulticallContract:()=>ho,StarknetIdPfpContract:()=>yo,StarknetIdPopContract:()=>bo,StarknetIdVerifierContract:()=>po,dynamicCallData:()=>vo,dynamicFelt:()=>Eo,execution:()=>wo,getStarknetIdContract:()=>co,getStarknetIdIdentityContract:()=>uo,getStarknetIdMulticallContract:()=>fo,getStarknetIdPfpContract:()=>mo,getStarknetIdPopContract:()=>_o,getStarknetIdVerifierContract:()=>go,isStarkDomain:()=>Ao,useDecoded:()=>so,useEncoded:()=>ao});var Ja="abcdefghijklmnopqrstuvwxyz0123456789-",Qa=BigInt(38),to="",eo=BigInt(37),no=BigInt(2),ro=BigInt(3);function io(t){let e=0;for(;t.endsWith(to[1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function so(t){let e="";return t.forEach(t=>{for(;t!==ue;){const n=t%Qa;if(t/=Qa,n===BigInt(37)){const n=t/ro;if(n===ue){const r=t%ro;t=n,e+=r===ue?Ja[0]:to[Number(r)-1]}else e+=to[Number(t%no)],t/=no}else e+=Ja[Number(n)]}const[n,r]=io(e);r&&(e=n+(r%2==0?to[1].repeat(r/2-1)+to[0]+Ja[1]:to[1].repeat((r-1)/2+1))),e+="."}),e?e.concat("stark"):e}function ao(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(to[0]+Ja[1])){const[e,n]=io(t.substring(0,t.length-2));t=e+to[1].repeat(2*(n+1))}else{const[e,n]=io(t);n&&(t=e+to[1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=Ja.indexOf(i),a=BigInt(Ja.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===Ja[0]?(e+=n*eo,n*=Qa,n*=Qa):(e+=n*a,n*=Qa);else if(-1!==to.indexOf(i)){e+=n*eo,n*=Qa;const s=(r===t.length-1?1:0)+to.indexOf(i);e+=n*BigInt(s),n*=no}}return e}var oo={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function co(t){switch(t){case Ve.SN_MAIN:return oo.MAINNET;case Ve.SN_SEPOLIA:return oo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var lo={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function uo(t){switch(t){case Ve.SN_MAIN:return lo.MAINNET;case Ve.SN_SEPOLIA:return lo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ho="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function fo(t){switch(t){case Ve.SN_MAIN:case Ve.SN_SEPOLIA:return ho;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var po={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function go(t){switch(t){case Ve.SN_MAIN:return po.MAINNET;case Ve.SN_SEPOLIA:return po.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var yo={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function mo(t){switch(t){case Ve.SN_MAIN:return yo.MAINNET;case Ve.SN_SEPOLIA:return yo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var bo={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function _o(t){switch(t){case Ve.SN_MAIN:return bo.MAINNET;case Ve.SN_SEPOLIA:return bo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function wo(t,e=void 0,n=void 0){return new Qr({Static:t,IfEqual:e?Xr(e[0],e[1],e[2]):void 0,IfNotEqual:n?Xr(n[0],n[1],n[2]):void 0})}function Eo(t,e=void 0){return new Qr({Hardcoded:t,Reference:e?Xr(e[0],e[1]):void 0})}function vo(t,e=void 0,n=void 0){return new Qr({Hardcoded:t,Reference:e?Xr(e[0],e[1]):void 0,ArrayReference:n?Xr(n[0],n[1]):void 0})}function Ao(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}function To(t){return ao(t.endsWith(".brother")?t.replace(".brother",""):t)}function So(t){const e=so([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function Io(t){return Ve.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var ko=((0,Rt.Mixin)(Xa,class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,a,o){return t.getStarkProfile(this,e,n,r,i,s,a,o)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??co(r);try{const n=so((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:qi.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!Ao(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??co(i);try{const e=r.replace(".stark","").split(".").map(t=>ao(t).toString(10));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:qi.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,a,o){const c=await t.getChainId(),l=n??co(c),u=r??uo(c),d=i??go(c),h=s??mo(c),f=a??_o(c),p=o??fo(c);try{const n=[{execution:wo({}),to:vo(l),selector:vo(nr("address_to_domain")),calldata:[vo(e),vo("0")]},{execution:wo({}),to:Eo(l),selector:Eo(nr("domain_to_id")),calldata:[vo(void 0,void 0,[0,0])]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("twitter")),vo(d),vo("0")]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("github")),vo(d),vo("0")]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("discord")),vo(d),vo("0")]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("proof_of_personhood")),vo(f),vo("0")]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("nft_pp_contract")),vo(h),vo("0")]},{execution:wo({}),to:Eo(u),selector:Eo(nr("get_extended_verifier_data")),calldata:[vo(void 0,[1,0]),vo(pr("nft_pp_id")),vo("2"),vo(h),vo("0")]},{execution:wo(void 0,void 0,[6,0,0]),to:Eo(void 0,[6,0]),selector:Eo(nr("tokenURI")),calldata:[vo(void 0,[7,1]),vo(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:qi.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=so(e[0].slice(1).map(t=>BigInt(t))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,a="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:a,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map(t=>gr(t)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}},class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??Io();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:qi.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return So(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??Io();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:qi.compile({domain:To(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??Io();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:qi.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=So(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:qi.compile({domain:To(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}}),new Xa({default:!0}),{});function xo(t){return new Ar(t).toBigInt()}function Bo(t){return Ar.is(t)}function Co(t){return new Ar(t).toUint256HexString()}function Ro(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function Oo(t){const e=t.calldata??[],n=Array.isArray(e)?e:qi.compile(e);return{to:t.contractAddress,selector:nr(t.entrypoint),calldata:n}}function No(t,e){const n=Oo(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Do(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Lo(t,e,n,r,i){return"1"===i?{types:gn,primaryType:"OutsideExecution",domain:Do(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(t=>No(t,i))}}:{types:yn,primaryType:"OutsideExecution",domain:Do(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(t=>No(t,i))}}}function Po(t){const e=t.outsideExecution,n=Os(t.signature);return qi.compile({outside_execution:e,signature:n})}function Uo(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Ln(t.signerAddress),entrypoint:e,calldata:Po(t)}})}async function Fo(t,e,n){const r={contractAddress:Ln(e),entrypoint:"supports_interface",calldata:[Ln(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}Ut(ko,{bnToUint256:()=>Co,isUint256:()=>Bo,uint256ToBN:()=>xo}),Ut({},{buildExecuteFromOutsideCall:()=>Uo,buildExecuteFromOutsideCallData:()=>Po,getOutsideCall:()=>Oo,getTypedData:()=>Lo,toOutsideCallV2:()=>Ro}),Ut({},{supportsInterface:()=>Fo}),Ut({},{assertCallsAreStrictlyEqual:()=>Ho,assertPaymasterTransactionSafety:()=>Mo,getDefaultPaymasterNodeUrl:()=>Vo});var Vo=(t,e=!1)=>{e||Ke.info("Using default public node url, please provide nodeUrl in provider options!");const n=qe[t??Fe.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Ho(t,e){const n="Provided calls are not strictly equal to the returned calls";vn(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=Ro(e[r]),a=t=>Nn(t).toString(16).toLowerCase();vn(a(i.contractAddress)===a(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),vn(nr(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const o=qi.toCalldata(i.calldata),c=qi.toCalldata(s.Calldata);vn(o.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${o.length}, Got length: ${c.length}`);for(let t=0;t<o.length;t+=1)vn(BigInt(o[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${o[t]}, Got: ${c[t]}`)}}var Mo=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Ho(e,i),((t,e)=>{const n=Ro(t[t.length-1]);vn(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(vn(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=Ro(t[t.length-1]),r=qi.toCalldata(n.Calldata)[1];vn(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},$o=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},jo=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,qo=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},zo={"Content-Type":"application/json"},Yo=(new class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...zo,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Vo(void 0),this.headers={...zo,...e.headers},this.baseFetch=e.baseFetch??Zs,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(Fe).includes(n)?this.nodeUrl=Vo(n,e?.default):this.nodeUrl=n||Vo(void 0,e?.default),this.baseFetch=i??Zs,this.headers={...zo,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:wn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ui(n,t,e);if(r instanceof li)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map(t=>({to:t.contractAddress,selector:nr(t.entrypoint),calldata:qi.toHex(t.calldata)})))}};break;default:n=t}var r;const i={version:e.version,fee_mode:$o(e.feeMode),time_bounds:jo(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),a={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:qo(s.parameters),fee:a};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:qo(s.parameters),fee:a};default:return{type:"deploy",deployment:s.deployment,parameters:qo(s.parameters),fee:a}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Ds(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:$o(e.feeMode),time_bounds:jo(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}}({default:!0}),class{address;entryPoint;constructor(t,e){this.address=t??Re.ADDRESS,this.entryPoint=e??Re.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:a}=t,o=la(s,()=>{if(a){const t=new qi(a),e=Object.values(s);return t.validate(un,"constructor",e),t.compile("constructor",e)}return qi.compile(s)}),c=r??Rs();return{call:{contractAddress:Ln(this.address),entrypoint:this.entryPoint,calldata:[n,c,Kn(i),o.length,...o]},address:bs(i?ot.pedersen(e,c):c,n,o,i?this.address:0)}});return{calls:n.map(t=>t.call),addresses:n.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Hn(t.from_address)===Hn(Ln(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}});function Go(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function Ko(t){return t.request({type:"wallet_getPermissions"})}function Wo(t,e){return t.request({type:"wallet_watchAsset",params:e})}function Zo(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function Xo(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function Jo(t){return t.request({type:"wallet_requestChainId"})}function Qo(t){return t.request({type:"wallet_deploymentData"})}function tc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function ec(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function nc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function rc(t){return t.request({type:"wallet_supportedSpecs"})}function ic(t,e){t.on("accountsChanged",e)}function sc(t,e){t.on("networkChanged",e)}function ac(t){return"event"===t.type}function oc(t){const e=t.filter(t=>ac(t)&&"struct"===t.kind),n=t.filter(t=>ac(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let r=[],{name:i}=e,s=!1;const a=t=>t.type===i;for(;;){const t=n.find(t=>t.variants.some(a));if(Tn(t))break;const e=t.variants.find(a);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const o=r.pop();let c={[Jt(ot.keccak(Yt(o)).toString(16))]:e};for(;r.length>0;)c={[Jt(ot.keccak(Yt(r.pop())).toString(16))]:c};return c={...c},lc(t,c)},{})}function cc(t){return Yr(t)?oc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[Jt(ot.keccak(Yt(n)).toString(16))]:r}},{})}(t)}function lc(t,e){const n={...t};return Cn(t)&&Cn(e)&&Object.keys(e).forEach(r=>{Cn(e[r])?r in t?n[r]=lc(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function uc(t,e,n,r,i){return t.flat().reduce((t,s)=>{const a=JSON.parse(JSON.stringify(s));let o=e[a.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=a.keys.shift();vn(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const l=a.keys[Symbol.iterator](),u=a.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Li({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Li({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),"block_hash"in a&&(c.block_hash=a.block_hash),"block_number"in a&&(c.block_number=a.block_number),"transaction_hash"in a&&(c.transaction_hash=a.transaction_hash),t.push(c),t},[])}new Yo(Re.ADDRESS,Re.ENTRYPOINT),new Yo(Ce.ADDRESS,Ce.ENTRYPOINT),Ut({},{addDeclareTransaction:()=>ec,addInvokeTransaction:()=>tc,addStarknetChain:()=>Zo,deploymentData:()=>Qo,getPermissions:()=>Ko,onAccountChange:()=>ic,onNetworkChanged:()=>sc,requestAccounts:()=>Go,requestChainId:()=>Jo,signMessage:()=>nc,supportedSpecs:()=>rc,switchStarknetChain:()=>Xo,watchAsset:()=>Wo}),Ut({},{getAbiEvents:()=>cc,isAbiEvent:()=>ac,parseEvents:()=>uc}),Ht.TypedDataRevision;const dc=n(6885).ProjectivePoint;ot.CURVE.n;const hc=new dc(ot.CURVE.Gx,ot.CURVE.Gy,1n);function fc(t){return t instanceof Uint8Array?An.toBigInt("0x"+function(t){if(function(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}(t),r)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=i[t[n]];return e}(t)):An.toBigInt(t)}function pc(t){const e=t.low,n=t.high;return void 0!==e&&void 0!==n}function gc(t){return An.isBigNumberish(t)?An.toBigInt(t):ko.uint256ToBN(t)}function yc(t,e,n){return 0n===e?{L:t.multiplyUnsafe(n),R:hc.multiplyUnsafe(n)}:{L:hc.multiply(e).add(t.multiplyUnsafe(n)),R:hc.multiplyUnsafe(n)}}function mc(t,e,n){const r=n.multiply(t);if(r.equals(e))return 0n;const i=e.subtract(r);let s=1n,a=hc;if(a.equals(i))return 1n;for(;s<2**32;)if(s+=1n,a=a.add(hc),a.equals(i))return s;throw new Error("Decription of Cipherbalance has failed")}function bc(t,e,n,r){const i=r.multiply(t);return n.subtract(i).equals(hc.multiplyUnsafe(e))}function _c(t){return function(t){const e=t.toAffine();return{x:e.x,y:e.y}}(hc.multiply(t))}new dc(627088272801405713560985229077786158610581355215145837257248988047835443922n,962306405833205337611861169387935900858447421343428280515103558221889311122n,1n)},7526(t,e){"use strict";e.byteLength=function(t){var e=o(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,s=o(t),a=s[0],c=s[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,c)),u=0,d=c>0?a-4:a;for(n=0;n<d;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],a=16383,o=0,c=r-i;o<c;o+=a)s.push(l(t,o,o+a>c?c:o+a));return 1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function l(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(c(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8287(t,e,n){"use strict";const r=n(7526),i=n(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=o(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?o(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return u(t),o(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),n=o(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return r?-1:Y(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){let s,a=1,o=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){let r=-1;for(s=n;s<o;s++)if(l(t,s)===l(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===c)return r*a}else-1!==r&&(s-=s-r),r=-1}else for(n+c>o&&(n=o-c),s=n;s>=0;s--){let n=!0;for(let r=0;r<c;r++)if(l(t,s+r)!==l(e,r)){n=!1;break}if(n)return s}return-1}function w(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=e.length;let a;for(r>s/2&&(r=s/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(Z(r))return a;t[n+a]=r}return a}function E(t,e,n,r){return K(Y(e,t.length-n),t,n,r)}function v(t,e,n,r){return K(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return K(G(e),t,n,r)}function T(t,e,n,r){return K(function(t,e){let n,r,i;const s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let s=null,a=e>239?4:e>223?3:e>191?2:1;if(i+a<=n){let n,r,o,c;switch(a){case 1:e<128&&(s=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[i+1],r=t[i+2],o=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&o,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=k));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},c.allocUnsafe=function(t){return d(t)},c.allocUnsafeSlow=function(t){return d(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(W(e,Uint8Array))i+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,i){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const o=Math.min(s,a),l=this.slice(r,i),u=t.slice(e,n);for(let t=0;t<o;++t)if(l[t]!==u[t]){s=l[t],a=u[t];break}return s<a?-1:a<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return v(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function x(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=X[t[r]];return i}function R(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,i){$(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function L(t,e,n,r,i){$(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function P(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,s){return e=+e,n>>>=0,s||P(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,s){return e=+e,n>>>=0,s||P(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),c.prototype.readBigInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=J(function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=J(function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s|0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s|0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=J(function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=J(function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const s=c.isBuffer(t)?t:c.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};const V={};function H(t,e,n){V[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function M(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function $(t,e,n,r,i,s){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||q(e,t.length-(n+1))}(r,i,s)}function j(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,n){if(Math.floor(t)!==t)throw j(t,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),H("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=M(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);const z=/[^+/0-9A-Za-z-_]/g;function Y(t,e){let n;e=e||1/0;const r=t.length;let i=null;const s=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},251(t,e){e.read=function(t,e,n,r,i){var s,a,o=8*i-r-1,c=(1<<o)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=256*s+t[e+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=256*a+t[e+d],d+=h,u-=8);if(0===s)s=1-l;else{if(s===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=l}return(f?-1:1)*a*Math.pow(2,s-r)},e.write=function(t,e,n,r,i,s){var a,o,c,l=8*s-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(e*c-1)*Math.pow(2,i),a+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;t[n+f]=255&a,f+=p,a/=256,l-=8);t[n+f-p]|=128*g}},1668(t,e,n){"use strict";const{Deflate:r,deflate:i,deflateRaw:s,gzip:a}=n(3303),{Inflate:o,inflate:c,inflateRaw:l,ungzip:u}=n(7083),d=n(9681);t.exports.Deflate=r,t.exports.deflate=i,t.exports.deflateRaw=s,t.exports.gzip=a,t.exports.Inflate=o,t.exports.inflate=c,t.exports.inflateRaw=l,t.exports.ungzip=u,t.exports.constants=d},3303(t,e,n){"use strict";const r=n(8411),i=n(9805),s=n(1996),a=n(4674),o=n(4442),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:m}=n(9681);function b(t){this.options=i.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==f)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=r.deflateSetDictionary(this.strm,t),n!==f)throw new Error(a[n]);this._dict_set=!0}}function _(t,e){const n=new b(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let a,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?h:l,"string"==typeof t?n.input=s.string2buf(t):"[object ArrayBuffer]"===c.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===u||o===d)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=r.deflate(n,o),a===p)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=r.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===f;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===f&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=_,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,_(t,e)},t.exports.constants=n(9681)},7083(t,e,n){"use strict";const r=n(1447),i=n(9805),s=n(1996),a=n(4674),o=n(4442),c=n(7414),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_MEM_ERROR:m}=n(9681);function b(t){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let n=r.inflateInit2(this.strm,e.windowBits);if(n!==h)throw new Error(a[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary),n!==h)))throw new Error(a[n])}function _(t,e){const n=new b(e);if(n.push(t),n.err)throw n.msg||a[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let o,c,b;if(this.ended)return!1;for(c=e===~~e?e:!0===e?d:u,"[object ArrayBuffer]"===l.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=r.inflate(n,c),o===p&&a&&(o=r.inflateSetDictionary(n,a),o===h?o=r.inflate(n,c):o===y&&(o=p));n.avail_in>0&&o===f&&n.state.wrap>0&&0!==t[n.next_in];)r.inflateReset(n),o=r.inflate(n,c);switch(o){case g:case y:case p:case m:return this.onEnd(o),this.ended=!0,!1}if(b=n.avail_out,n.next_out&&(0===n.avail_out||o===f))if("string"===this.options.to){let t=s.utf8border(n.output,n.next_out),e=n.next_out-t,r=s.buf2string(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==h||0!==b){if(o===f)return o=r.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=_,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.ungzip=_,t.exports.constants=n(9681)},9805(t){"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const r=n.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const n in r)e(r,n)&&(t[n]=r[n])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n}},1996(t){"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const n=new Uint8Array(256);for(let t=0;t<256;t++)n[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;n[254]=n[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},t.exports.buf2string=(t,r)=>{const i=r||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,r));let s,a;const o=new Array(2*i);for(a=0,s=0;s<i;){let e=t[s++];if(e<128){o[a++]=e;continue}let r=n[e];if(r>4)o[a++]=65533,s+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&s<i;)e=e<<6|63&t[s++],r--;r>1?o[a++]=65533:e<65536?o[a++]=e:(e-=65536,o[a++]=55296|e>>10&1023,o[a++]=56320|1023&e)}}return((t,n)=>{if(n<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let r="";for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return r})(o,a)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+n[t[r]]>e?r:e}},3269(t){"use strict";t.exports=(t,e,n,r)=>{let i=65535&t,s=t>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+e[r++]|0,s=s+i|0}while(--a);i%=65521,s%=65521}return i|s<<16}},9681(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823(t){"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());t.exports=(t,n,r,i)=>{const s=e,a=i+r;t^=-1;for(let e=i;e<a;e++)t=t>>>8^s[255&(t^n[e])];return-1^t}},8411(t,e,n){"use strict";const{_tr_init:r,_tr_stored_block:i,_tr_flush_block:s,_tr_tally:a,_tr_align:o}=n(3665),c=n(3269),l=n(4823),u=n(4674),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:g,Z_OK:y,Z_STREAM_END:m,Z_STREAM_ERROR:b,Z_DATA_ERROR:_,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:E,Z_FILTERED:v,Z_HUFFMAN_ONLY:A,Z_RLE:T,Z_FIXED:S,Z_DEFAULT_STRATEGY:I,Z_UNKNOWN:k,Z_DEFLATED:x}=n(9681),B=258,C=262,R=42,O=113,N=666,D=(t,e)=>(t.msg=u[e],e),L=t=>2*t-(t>4?9:0),P=t=>{let e=t.length;for(;--e>=0;)t[e]=0},U=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let F=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const V=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},H=(t,e)=>{s(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,V(t.strm)},M=(t,e)=>{t.pending_buf[t.pending++]=e},$=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},j=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=c(t.adler,e,i,n):2===t.state.wrap&&(t.adler=l(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},q=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-C?t.strstart-(t.w_size-C):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+B;let f=l[s+a-1],p=l[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(n=e,l[n+a]===p&&l[n+a-1]===f&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<h);if(r=B-(h-s),s=h-B,r>a){if(t.match_start=e,a=r,r>=o)break;f=l[s+a-1],p=l[s+a]}}}while((e=d[e&u])>c&&0!==--i);return a<=t.lookahead?a:t.lookahead},z=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-C)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),U(t),r+=e),0===t.strm.avail_in)break;if(n=j(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=F(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=F(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<C&&0!==t.strm.avail_in)},Y=(t,e)=>{let n,r,s,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,c=t.strm.avail_in;do{if(n=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>s&&(n=s),n<a&&(0===n&&e!==p||e===d||n!==r+t.strm.avail_in))break;o=e===p&&n===r+t.strm.avail_in?1:0,i(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,V(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(j(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return c-=t.strm.avail_in,c&&(c>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=c&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-c,t.strm.next_in),t.strstart),t.strstart+=c,t.insert+=c>t.w_size-t.insert?t.w_size-t.insert:c),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==d&&e!==p&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(j(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,a=s>t.w_size?t.w_size:s,r=t.strstart-t.block_start,(r>=a||(r||e===p)&&e!==d&&0===t.strm.avail_in&&r<=s)&&(n=r>s?s:r,o=e===p&&0===t.strm.avail_in&&n===r?1:0,i(t,t.block_start,n,o),t.block_start+=n,V(t.strm)),o?3:1)},G=(t,e)=>{let n,r;for(;;){if(t.lookahead<C){if(z(t),t.lookahead<C&&e===d)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-C&&(t.match_length=q(t,n)),t.match_length>=3)if(r=a(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=F(t,t.ins_h,t.window[t.strstart+1]);else r=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2},K=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<C){if(z(t),t.lookahead<C&&e===d)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-C&&(t.match_length=q(t,n),t.match_length<=5&&(t.strategy===v||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=a(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(H(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=a(t,0,t.window[t.strstart-1]),r&&H(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=a(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2};function W(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Z=[new W(0,0,0,0,Y),new W(4,4,8,4,G),new W(4,5,16,8,G),new W(4,6,32,32,G),new W(4,4,16,16,K),new W(8,16,32,32,K),new W(8,16,128,128,K),new W(8,32,128,256,K),new W(32,128,258,1024,K),new W(32,258,258,4096,K)];function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),P(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const J=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==R&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==O&&e.status!==N?1:0},Q=t=>{if(J(t))return D(t,b);t.total_in=t.total_out=0,t.data_type=k;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?R:O,t.adler=2===e.wrap?0:1,e.last_flush=-2,r(e),y},tt=t=>{const e=Q(t);var n;return e===y&&((n=t.state).window_size=2*n.w_size,P(n.head),n.max_lazy_match=Z[n.level].max_lazy,n.good_match=Z[n.level].good_length,n.nice_match=Z[n.level].nice_length,n.max_chain_length=Z[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},et=(t,e,n,r,i,s)=>{if(!t)return b;let a=1;if(e===E&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==x||r<8||r>15||e<0||e>9||s<0||s>S||8===r&&1!==a)return D(t,b);8===r&&(r=9);const o=new X;return t.state=o,o.strm=t,o.status=R,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=n,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,x,15,8,I),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=Q,t.exports.deflateSetHeader=(t,e)=>J(t)||2!==t.state.wrap?b:(t.state.gzhead=e,y),t.exports.deflate=(t,e)=>{if(J(t)||e>g||e<0)return t?D(t,b):b;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===N&&e!==p)return D(t,0===t.avail_out?w:b);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(V(t),0===t.avail_out)return n.last_flush=-1,y}else if(0===t.avail_in&&L(e)<=L(r)&&e!==p)return D(t,w);if(n.status===N&&0!==t.avail_in)return D(t,w);if(n.status===R&&0===n.wrap&&(n.status=O),n.status===R){let e=x+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=A||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,$(n,e),0!==n.strstart&&($(n,t.adler>>>16),$(n,65535&t.adler)),t.adler=1,n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y}if(57===n.status)if(t.adler=0,M(n,31),M(n,139),M(n,8),n.gzhead)M(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),M(n,255&n.gzhead.time),M(n,n.gzhead.time>>8&255),M(n,n.gzhead.time>>16&255),M(n,n.gzhead.time>>24&255),M(n,9===n.level?2:n.strategy>=A||n.level<2?4:0),M(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(M(n,255&n.gzhead.extra.length),M(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=l(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(M(n,0),M(n,0),M(n,0),M(n,0),M(n,0),M(n,9===n.level?2:n.strategy>=A||n.level<2?4:0),M(n,3),n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=l(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,V(t),0!==n.pending)return n.last_flush=-1,y;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=l(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=l(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,y;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,M(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=l(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=l(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,y;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,M(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=l(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(V(t),0!==n.pending))return n.last_flush=-1,y;M(n,255&t.adler),M(n,t.adler>>8&255),t.adler=0}if(n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y}if(0!==t.avail_in||0!==n.lookahead||e!==d&&n.status!==N){let r=0===n.level?Y(n,e):n.strategy===A?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(z(t),0===t.lookahead)){if(e===d)return 1;break}if(t.match_length=0,n=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===T?((t,e)=>{let n,r,i,s;const o=t.window;for(;;){if(t.lookahead<=B){if(z(t),t.lookahead<=B&&e===d)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+B;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=B-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=a(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(n,e):Z[n.level].func(n,e);if(3!==r&&4!==r||(n.status=N),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),y;if(2===r&&(e===h?o(n):e!==g&&(i(n,0,0,!1),e===f&&(P(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),V(t),0===t.avail_out))return n.last_flush=-1,y}return e!==p?y:n.wrap<=0?m:(2===n.wrap?(M(n,255&t.adler),M(n,t.adler>>8&255),M(n,t.adler>>16&255),M(n,t.adler>>24&255),M(n,255&t.total_in),M(n,t.total_in>>8&255),M(n,t.total_in>>16&255),M(n,t.total_in>>24&255)):($(n,t.adler>>>16),$(n,65535&t.adler)),V(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?y:m)},t.exports.deflateEnd=t=>{if(J(t))return b;const e=t.state.status;return t.state=null,e===O?D(t,_):y},t.exports.deflateSetDictionary=(t,e)=>{let n=e.length;if(J(t))return b;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==R||r.lookahead)return b;if(1===i&&(t.adler=c(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(P(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,z(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=F(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,z(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,r.wrap=i,y},t.exports.deflateInfo="pako deflate (from Nodeca project)"},7414(t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293(t){"use strict";const e=16209;t.exports=function(t,n){let r,i,s,a,o,c,l,u,d,h,f,p,g,y,m,b,_,w,E,v,A,T,S,I;const k=t.state;r=t.next_in,S=t.input,i=r+(t.avail_in-5),s=t.next_out,I=t.output,a=s-(n-t.avail_out),o=s+(t.avail_out-257),c=k.dmax,l=k.wsize,u=k.whave,d=k.wnext,h=k.window,f=k.hold,p=k.bits,g=k.lencode,y=k.distcode,m=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;t:do{p<15&&(f+=S[r++]<<p,p+=8,f+=S[r++]<<p,p+=8),_=g[f&m];e:for(;;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,0===w)I[s++]=65535&_;else{if(!(16&w)){if(64&w){if(32&w){k.mode=16191;break t}t.msg="invalid literal/length code",k.mode=e;break t}_=g[(65535&_)+(f&(1<<w)-1)];continue e}for(E=65535&_,w&=15,w&&(p<w&&(f+=S[r++]<<p,p+=8),E+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=S[r++]<<p,p+=8,f+=S[r++]<<p,p+=8),_=y[f&b];;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,16&w){if(v=65535&_,w&=15,p<w&&(f+=S[r++]<<p,p+=8,p<w&&(f+=S[r++]<<p,p+=8)),v+=f&(1<<w)-1,v>c){t.msg="invalid distance too far back",k.mode=e;break t}if(f>>>=w,p-=w,w=s-a,v>w){if(w=v-w,w>u&&k.sane){t.msg="invalid distance too far back",k.mode=e;break t}if(A=0,T=h,0===d){if(A+=l-w,w<E){E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}}else if(d<w){if(A+=l+d-w,w-=d,w<E){E-=w;do{I[s++]=h[A++]}while(--w);if(A=0,d<E){w=d,E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}}}else if(A+=d-w,w<E){E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}for(;E>2;)I[s++]=T[A++],I[s++]=T[A++],I[s++]=T[A++],E-=3;E&&(I[s++]=T[A++],E>1&&(I[s++]=T[A++]))}else{A=s-v;do{I[s++]=I[A++],I[s++]=I[A++],I[s++]=I[A++],E-=3}while(E>2);E&&(I[s++]=I[A++],E>1&&(I[s++]=I[A++]))}break}if(64&w){t.msg="invalid distance code",k.mode=e;break t}_=y[(65535&_)+(f&(1<<w)-1)]}}break}}while(r<i&&s<o);E=p>>3,r-=E,p-=E<<3,f&=(1<<p)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<o?o-s+257:257-(s-o),k.hold=f,k.bits=p}},1447(t,e,n){"use strict";const r=n(3269),i=n(4823),s=n(7293),a=n(1998),{Z_FINISH:o,Z_BLOCK:c,Z_TREES:l,Z_OK:u,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:g,Z_BUF_ERROR:y,Z_DEFLATED:m}=n(9681),b=16180,_=16190,w=16191,E=16192,v=16194,A=16199,T=16200,S=16206,I=16209,k=16210,x=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const C=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<b||e.mode>16211?1:0},R=t=>{if(C(t))return f;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=b,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,u},O=t=>{if(C(t))return f;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,R(t)},N=(t,e)=>{let n;if(C(t))return f;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,O(t))},D=(t,e)=>{if(!t)return f;const n=new B;t.state=n,n.strm=t,n.window=null,n.mode=b;const r=N(t,e);return r!==u&&(t.state=null),r};let L,P,U=!0;const F=t=>{if(U){L=new Int32Array(512),P=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,L,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,P,0,t.work,{bits:5}),U=!1}t.lencode=L,t.lenbits=9,t.distcode=P,t.distbits=5},V=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};t.exports.inflateReset=O,t.exports.inflateReset2=N,t.exports.inflateResetKeep=R,t.exports.inflateInit=t=>D(t,15),t.exports.inflateInit2=D,t.exports.inflate=(t,e)=>{let n,B,R,O,N,D,L,P,U,H,M,$,j,q,z,Y,G,K,W,Z,X,J,Q=0;const tt=new Uint8Array(4);let et,nt;const rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(C(t)||!t.output||!t.input&&0!==t.avail_in)return f;n=t.state,n.mode===w&&(n.mode=E),N=t.next_out,R=t.output,L=t.avail_out,O=t.next_in,B=t.input,D=t.avail_in,P=n.hold,U=n.bits,H=D,M=L,J=u;t:for(;;)switch(n.mode){case b:if(0===n.wrap){n.mode=E;break}for(;U<16;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(2&n.wrap&&35615===P){0===n.wbits&&(n.wbits=15),n.check=0,tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0),P=0,U=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&P)<<8)+(P>>8))%31){t.msg="incorrect header check",n.mode=I;break}if((15&P)!==m){t.msg="unknown compression method",n.mode=I;break}if(P>>>=4,U-=4,X=8+(15&P),0===n.wbits&&(n.wbits=X),X>15||X>n.wbits){t.msg="invalid window size",n.mode=I;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&P?16189:w,P=0,U=0;break;case 16181:for(;U<16;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(n.flags=P,(255&n.flags)!==m){t.msg="unknown compression method",n.mode=I;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=I;break}n.head&&(n.head.text=P>>8&1),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0,n.mode=16182;case 16182:for(;U<32;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.head&&(n.head.time=P),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,tt[2]=P>>>16&255,tt[3]=P>>>24&255,n.check=i(n.check,tt,4,0)),P=0,U=0,n.mode=16183;case 16183:for(;U<16;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.head&&(n.head.xflags=255&P,n.head.os=P>>8),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0,n.mode=16184;case 16184:if(1024&n.flags){for(;U<16;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.length=P,n.head&&(n.head.extra_len=P),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&($=n.length,$>D&&($=D),$&&(n.head&&(X=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(B.subarray(O,O+$),X)),512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),D-=$,O+=$,n.length-=$),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===D)break t;$=0;do{X=B[O+$++],n.head&&X&&n.length<65536&&(n.head.name+=String.fromCharCode(X))}while(X&&$<D);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),D-=$,O+=$,X)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===D)break t;$=0;do{X=B[O+$++],n.head&&X&&n.length<65536&&(n.head.comment+=String.fromCharCode(X))}while(X&&$<D);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),D-=$,O+=$,X)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;U<16;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(4&n.wrap&&P!==(65535&n.check)){t.msg="header crc mismatch",n.mode=I;break}P=0,U=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=w;break;case 16189:for(;U<32;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}t.adler=n.check=x(P),P=0,U=0,n.mode=_;case _:if(0===n.havedict)return t.next_out=N,t.avail_out=L,t.next_in=O,t.avail_in=D,n.hold=P,n.bits=U,h;t.adler=n.check=1,n.mode=w;case w:if(e===c||e===l)break t;case E:if(n.last){P>>>=7&U,U-=7&U,n.mode=S;break}for(;U<3;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}switch(n.last=1&P,P>>>=1,U-=1,3&P){case 0:n.mode=16193;break;case 1:if(F(n),n.mode=A,e===l){P>>>=2,U-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=I}P>>>=2,U-=2;break;case 16193:for(P>>>=7&U,U-=7&U;U<32;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if((65535&P)!=(P>>>16^65535)){t.msg="invalid stored block lengths",n.mode=I;break}if(n.length=65535&P,P=0,U=0,n.mode=v,e===l)break t;case v:n.mode=16195;case 16195:if($=n.length,$){if($>D&&($=D),$>L&&($=L),0===$)break t;R.set(B.subarray(O,O+$),N),D-=$,O+=$,L-=$,N+=$,n.length-=$;break}n.mode=w;break;case 16196:for(;U<14;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(n.nlen=257+(31&P),P>>>=5,U-=5,n.ndist=1+(31&P),P>>>=5,U-=5,n.ncode=4+(15&P),P>>>=4,U-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=I;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;U<3;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.lens[rt[n.have++]]=7&P,P>>>=3,U-=3}for(;n.have<19;)n.lens[rt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,et={bits:n.lenbits},J=a(0,n.lens,0,19,n.lencode,0,n.work,et),n.lenbits=et.bits,J){t.msg="invalid code lengths set",n.mode=I;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;Q=n.lencode[P&(1<<n.lenbits)-1],z=Q>>>24,Y=Q>>>16&255,G=65535&Q,!(z<=U);){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(G<16)P>>>=z,U-=z,n.lens[n.have++]=G;else{if(16===G){for(nt=z+2;U<nt;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(P>>>=z,U-=z,0===n.have){t.msg="invalid bit length repeat",n.mode=I;break}X=n.lens[n.have-1],$=3+(3&P),P>>>=2,U-=2}else if(17===G){for(nt=z+3;U<nt;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}P>>>=z,U-=z,X=0,$=3+(7&P),P>>>=3,U-=3}else{for(nt=z+7;U<nt;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}P>>>=z,U-=z,X=0,$=11+(127&P),P>>>=7,U-=7}if(n.have+$>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=I;break}for(;$--;)n.lens[n.have++]=X}}if(n.mode===I)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=I;break}if(n.lenbits=9,et={bits:n.lenbits},J=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,et),n.lenbits=et.bits,J){t.msg="invalid literal/lengths set",n.mode=I;break}if(n.distbits=6,n.distcode=n.distdyn,et={bits:n.distbits},J=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,et),n.distbits=et.bits,J){t.msg="invalid distances set",n.mode=I;break}if(n.mode=A,e===l)break t;case A:n.mode=T;case T:if(D>=6&&L>=258){t.next_out=N,t.avail_out=L,t.next_in=O,t.avail_in=D,n.hold=P,n.bits=U,s(t,M),N=t.next_out,R=t.output,L=t.avail_out,O=t.next_in,B=t.input,D=t.avail_in,P=n.hold,U=n.bits,n.mode===w&&(n.back=-1);break}for(n.back=0;Q=n.lencode[P&(1<<n.lenbits)-1],z=Q>>>24,Y=Q>>>16&255,G=65535&Q,!(z<=U);){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(Y&&!(240&Y)){for(K=z,W=Y,Z=G;Q=n.lencode[Z+((P&(1<<K+W)-1)>>K)],z=Q>>>24,Y=Q>>>16&255,G=65535&Q,!(K+z<=U);){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}P>>>=K,U-=K,n.back+=K}if(P>>>=z,U-=z,n.back+=z,n.length=G,0===Y){n.mode=16205;break}if(32&Y){n.back=-1,n.mode=w;break}if(64&Y){t.msg="invalid literal/length code",n.mode=I;break}n.extra=15&Y,n.mode=16201;case 16201:if(n.extra){for(nt=n.extra;U<nt;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.length+=P&(1<<n.extra)-1,P>>>=n.extra,U-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;Q=n.distcode[P&(1<<n.distbits)-1],z=Q>>>24,Y=Q>>>16&255,G=65535&Q,!(z<=U);){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(!(240&Y)){for(K=z,W=Y,Z=G;Q=n.distcode[Z+((P&(1<<K+W)-1)>>K)],z=Q>>>24,Y=Q>>>16&255,G=65535&Q,!(K+z<=U);){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}P>>>=K,U-=K,n.back+=K}if(P>>>=z,U-=z,n.back+=z,64&Y){t.msg="invalid distance code",n.mode=I;break}n.offset=G,n.extra=15&Y,n.mode=16203;case 16203:if(n.extra){for(nt=n.extra;U<nt;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}n.offset+=P&(1<<n.extra)-1,P>>>=n.extra,U-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=I;break}n.mode=16204;case 16204:if(0===L)break t;if($=M-L,n.offset>$){if($=n.offset-$,$>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=I;break}$>n.wnext?($-=n.wnext,j=n.wsize-$):j=n.wnext-$,$>n.length&&($=n.length),q=n.window}else q=R,j=N-n.offset,$=n.length;$>L&&($=L),L-=$,n.length-=$;do{R[N++]=q[j++]}while(--$);0===n.length&&(n.mode=T);break;case 16205:if(0===L)break t;R[N++]=n.length,L--,n.mode=T;break;case S:if(n.wrap){for(;U<32;){if(0===D)break t;D--,P|=B[O++]<<U,U+=8}if(M-=L,t.total_out+=M,n.total+=M,4&n.wrap&&M&&(t.adler=n.check=n.flags?i(n.check,R,M,N-M):r(n.check,R,M,N-M)),M=L,4&n.wrap&&(n.flags?P:x(P))!==n.check){t.msg="incorrect data check",n.mode=I;break}P=0,U=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;U<32;){if(0===D)break t;D--,P+=B[O++]<<U,U+=8}if(4&n.wrap&&P!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=I;break}P=0,U=0}n.mode=16208;case 16208:J=d;break t;case I:J=p;break t;case k:return g;default:return f}return t.next_out=N,t.avail_out=L,t.next_in=O,t.avail_in=D,n.hold=P,n.bits=U,(n.wsize||M!==t.avail_out&&n.mode<I&&(n.mode<S||e!==o))&&V(t,t.output,t.next_out,M-t.avail_out)?(n.mode=k,g):(H-=t.avail_in,M-=t.avail_out,t.total_in+=H,t.total_out+=M,n.total+=M,4&n.wrap&&M&&(t.adler=n.check=n.flags?i(n.check,R,M,t.next_out-M):r(n.check,R,M,t.next_out-M)),t.data_type=n.bits+(n.last?64:0)+(n.mode===w?128:0)+(n.mode===A||n.mode===v?256:0),(0===H&&0===M||e===o)&&J===u&&(J=y),J)},t.exports.inflateEnd=t=>{if(C(t))return f;let e=t.state;return e.window&&(e.window=null),t.state=null,u},t.exports.inflateGetHeader=(t,e)=>{if(C(t))return f;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,u):f},t.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let i,s,a;return C(t)?f:(i=t.state,0!==i.wrap&&i.mode!==_?f:i.mode===_&&(s=1,s=r(s,e,n,0),s!==i.check)?p:(a=V(t,e,n,n),a?(i.mode=k,g):(i.havedict=1,u)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},1998(t){"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,s,a,o,c,l,u,d)=>{const h=d.bits;let f,p,g,y,m,b,_=0,w=0,E=0,v=0,A=0,T=0,S=0,I=0,k=0,x=0,B=null;const C=new Uint16Array(16),R=new Uint16Array(16);let O,N,D,L=null;for(_=0;_<=15;_++)C[_]=0;for(w=0;w<o;w++)C[s[a+w]]++;for(A=h,v=15;v>=1&&0===C[v];v--);if(A>v&&(A=v),0===v)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(E=1;E<v&&0===C[E];E++);for(A<E&&(A=E),I=1,_=1;_<=15;_++)if(I<<=1,I-=C[_],I<0)return-1;if(I>0&&(0===t||1!==v))return-1;for(R[1]=0,_=1;_<15;_++)R[_+1]=R[_]+C[_];for(w=0;w<o;w++)0!==s[a+w]&&(u[R[s[a+w]]++]=w);if(0===t?(B=L=u,b=20):1===t?(B=e,L=n,b=257):(B=r,L=i,b=0),x=0,w=0,_=E,m=l,T=A,S=0,g=-1,k=1<<A,y=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){O=_-S,u[w]+1<b?(N=0,D=u[w]):u[w]>=b?(N=L[u[w]-b],D=B[u[w]-b]):(N=96,D=0),f=1<<_-S,p=1<<T,E=p;do{p-=f,c[m+(x>>S)+p]=O<<24|N<<16|D}while(0!==p);for(f=1<<_-1;x&f;)f>>=1;if(0!==f?(x&=f-1,x+=f):x=0,w++,0===--C[_]){if(_===v)break;_=s[a+u[w]]}if(_>A&&(x&y)!==g){for(0===S&&(S=A),m+=E,T=_-S,I=1<<T;T+S<v&&(I-=C[T+S],!(I<=0));)T++,I<<=1;if(k+=1<<T,1===t&&k>852||2===t&&k>592)return 1;g=x&y,c[g]=A<<24|T<<16|m-l}}return 0!==x&&(c[m+x]=_-S<<24|64<<16),d.bits=A,0}},4674(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665(t){"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=new Array(576);e(a);const o=new Array(60);e(o);const c=new Array(512);e(c);const l=new Array(256);e(l);const u=new Array(29);e(u);const d=new Array(30);function h(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let f,p,g;function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(d);const m=t=>t<256?c[t]:c[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},_=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},w=(t,e,n)=>{_(t,n[2*e],n[2*e+1])},E=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},v=(t,e,n)=>{const r=new Array(16);let i,s,a=0;for(i=1;i<=15;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=E(r[e]++,e))}},A=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},T=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},I=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&S(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!S(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},k=(t,e,i)=>{let s,a,o,c,h=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+h++],s+=(255&t.pending_buf[t.sym_buf+h++])<<8,a=t.pending_buf[t.sym_buf+h++],0===s?w(t,a,e):(o=l[a],w(t,o+256+1,e),c=n[o],0!==c&&(a-=u[o],_(t,a,c)),s--,o=m(s),w(t,o,i),c=r[o],0!==c&&(s-=d[o],_(t,s,c)))}while(h<t.sym_next);w(t,256,e)},x=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,c,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):n[2*a+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)I(t,n,a);c=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,n,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,n[2*c]=n[2*a]+n[2*o],t.depth[c]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,n[2*a+1]=n[2*o+1]=c,t.heap[1]=c++,I(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],h=n[2*n[2*u+1]+1]+1,h>c&&(h=c,g++),n[2*u+1]=h,u>r||(t.bl_count[h]++,f=0,u>=o&&(f=a[u-o]),p=n[2*u],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[2*u+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=t.bl_count[h];0!==u;)d=t.heap[--l],d>r||(n[2*d+1]!==h&&(t.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(t,e),v(n,l,t.bl_count)},B=(t,e,n)=>{let r,i,s=-1,a=e[1],o=0,c=7,l=4;for(0===a&&(c=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++o<c&&i===a||(o<l?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},C=(t,e,n)=>{let r,i,s=-1,a=e[1],o=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++o<c&&i===a)){if(o<l)do{w(t,i,t.bl_tree)}while(0!==--o);else 0!==i?(i!==s&&(w(t,i,t.bl_tree),o--),w(t,16,t.bl_tree),_(t,o-3,2)):o<=10?(w(t,17,t.bl_tree),_(t,o-3,3)):(w(t,18,t.bl_tree),_(t,o-11,7));o=0,s=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}};let R=!1;const O=(t,e,n,r)=>{_(t,0+(r?1:0),3),T(t),b(t,n),b(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};t.exports._tr_init=t=>{R||((()=>{let t,e,s,y,m;const b=new Array(16);for(s=0,y=0;y<28;y++)for(u[y]=s,t=0;t<1<<n[y];t++)l[s++]=y;for(l[s-1]=y,m=0,y=0;y<16;y++)for(d[y]=m,t=0;t<1<<r[y];t++)c[m++]=y;for(m>>=7;y<30;y++)for(d[y]=m<<7,t=0;t<1<<r[y]-7;t++)c[256+m++]=y;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)a[2*t+1]=8,t++,b[8]++;for(;t<=255;)a[2*t+1]=9,t++,b[9]++;for(;t<=279;)a[2*t+1]=7,t++,b[7]++;for(;t<=287;)a[2*t+1]=8,t++,b[8]++;for(v(a,287,b),t=0;t<30;t++)o[2*t+1]=5,o[2*t]=E(t,5);f=new h(a,n,257,286,15),p=new h(o,r,0,30,15),g=new h(new Array(0),i,0,19,7)})(),R=!0),t.l_desc=new y(t.dyn_ltree,f),t.d_desc=new y(t.dyn_dtree,p),t.bl_desc=new y(t.bl_tree,g),t.bi_buf=0,t.bi_valid=0,A(t)},t.exports._tr_stored_block=O,t.exports._tr_flush_block=(t,e,n,r)=>{let i,c,l=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),x(t,t.l_desc),x(t,t.d_desc),l=(t=>{let e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,c=t.static_len+3+7>>>3,c<=i&&(i=c)):i=c=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||c===i?(_(t,2+(r?1:0),3),k(t,a,o)):(_(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(_(t,e-257,5),_(t,n-1,5),_(t,r-4,4),i=0;i<r;i++)_(t,t.bl_tree[2*s[i]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),k(t,t.dyn_ltree,t.dyn_dtree)),A(t),r&&T(t)},t.exports._tr_tally=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(l[n]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{_(t,2,3),w(t,256,a),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},4442(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},6993(t,e,n){"use strict";n.r(e),n.d(e,{Mixin:()=>_,decorate:()=>b,hasMixin:()=>h,mix:()=>E,settings:()=>l});const r=(t,e,n=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let t of n)delete r[t];Object.defineProperties(t,r)},i=(t,e=[t])=>{const n=Object.getPrototypeOf(t);return null===n?e:i(n,[...e,n])},s=(t,e,n=[])=>{var s;const a=null!==(s=((...t)=>{if(0===t.length)return;let e;const n=t.map(t=>i(t));for(;n.every(t=>t.length>0);){const t=n.map(t=>t.pop()),r=t[0];if(!t.every(t=>t===r))break;e=r}return e})(...t))&&void 0!==s?s:Object.prototype,o=Object.create(a),c=i(a);for(let e of t){let t=i(e);for(let e=t.length-1;e>=0;e--){let i=t[e];-1===c.indexOf(i)&&(r(o,i,["constructor",...n]),c.push(i))}}return o.constructor=e,o},a=t=>t.filter((e,n)=>t.indexOf(e)==n),o=(t,e)=>{const n=e.map(t=>i(t));let r=0,s=!0;for(;s;){s=!1;for(let i=e.length-1;i>=0;i--){const e=n[i][r];if(null!=e&&(s=!0,null!=Object.getOwnPropertyDescriptor(e,t)))return n[i][0]}r++}},c=(t,e=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>e,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(e,n)=>Object.getOwnPropertyDescriptor(o(n,t)||{},n),defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has:(n,r)=>void 0!==o(r,t)||void 0!==e[r],get:(n,r)=>(o(r,t)||e)[r],set(e,n,r){const i=o(n,t);if(void 0===i)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return i[n]=r,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>t.map(Object.getOwnPropertyNames).reduce((t,e)=>e.concat(t.filter(t=>e.indexOf(t)<0)))}),l={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},u=new WeakMap,d=t=>u.get(t),h=(t,e)=>{if(t instanceof e)return!0;const n=t.constructor,r=new Set;let s=new Set;for(s.add(n);s.size>0;){if(s.has(e))return!0;s.forEach(t=>r.add(t));const t=new Set;s.forEach(e=>{var n;const a=null!==(n=u.get(e))&&void 0!==n?n:i(e.prototype).map(t=>t.constructor).filter(t=>null!==t);a&&a.forEach(e=>{r.has(e)||s.has(e)||t.add(e)})}),s=t}return!1},f=(t,e)=>{var n,r;const i=a([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),s={};for(let o of i)s[o]=a([...null!==(n=null==t?void 0:t[o])&&void 0!==n?n:[],...null!==(r=null==e?void 0:e[o])&&void 0!==r?r:[]]);return s},p=(t,e)=>{var n,r,i,s;return{property:f(null!==(n=null==t?void 0:t.property)&&void 0!==n?n:{},null!==(r=null==e?void 0:e.property)&&void 0!==r?r:{}),method:f(null!==(i=null==t?void 0:t.method)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.method)&&void 0!==s?s:{})}},g=(t,e)=>{var n,r,i,s,o,c;return{class:a([...null!==(n=null==t?void 0:t.class)&&void 0!==n?n:[],...null!==(r=null==e?void 0:e.class)&&void 0!==r?r:[]]),static:p(null!==(i=null==t?void 0:t.static)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.static)&&void 0!==s?s:{}),instance:p(null!==(o=null==t?void 0:t.instance)&&void 0!==o?o:{},null!==(c=null==e?void 0:e.instance)&&void 0!==c?c:{})}},y=new Map,m=t=>{let e=y.get(t);return e||(e={},y.set(t,e)),e},b=t=>(...e)=>1===e.length?(t=>e=>{const n=m(e);let r=n.class;return r||(r=[],n.class=r),r.push(t),t(e)})(t)(e[0]):(t=>(e,n,...r)=>{var i,s,a;const o="function"==typeof e?"static":"instance",c="function"==typeof e[n]?"method":"property",l="static"===o?e:e.constructor,u=m(l),d=null!==(i=null==u?void 0:u[o])&&void 0!==i?i:{};u[o]=d;let h=null!==(s=null==d?void 0:d[c])&&void 0!==s?s:{};d[c]=h;let f=null!==(a=null==h?void 0:h[n])&&void 0!==a?a:[];return h[n]=f,f.push(t),t(e,n,...r)})(t)(...e);function _(...t){var e,n,a;const o=t.map(t=>t.prototype),h=l.initFunction;if(null!==h){const t=o.map(t=>t[h]).filter(t=>"function"==typeof t),e=function(...e){for(let n of t)n.apply(this,e)},n={[h]:e};o.push(n)}function f(...e){for(const n of t)r(this,new n(...e));null!==h&&"function"==typeof this[h]&&this[h].apply(this,e)}var p,b;f.prototype="copy"===l.prototypeStrategy?s(o,f):(p=o,b=f,c([...p,{constructor:b}])),Object.setPrototypeOf(f,"copy"===l.staticsStrategy?s(t,null,["prototype"]):c(t,Function.prototype));let _=f;if("none"!==l.decoratorInheritance){const r="deep"===l.decoratorInheritance?((...t)=>{const e=((...t)=>{var e;const n=new Set,r=new Set([...t]);for(;r.size>0;)for(let t of r){const s=[...i(t.prototype).map(t=>t.constructor),...null!==(e=d(t))&&void 0!==e?e:[]].filter(t=>!n.has(t));for(let t of s)r.add(t);n.add(t),r.delete(t)}return[...n]})(...t).map(t=>y.get(t)).filter(t=>!!t);return 0==e.length?{}:1==e.length?e[0]:e.reduce((t,e)=>g(t,e))})(...t):((...t)=>{const e=t.map(t=>m(t));return 0===e.length?{}:1===e.length?e[0]:e.reduce((t,e)=>g(t,e))})(...t);for(let t of null!==(e=null==r?void 0:r.class)&&void 0!==e?e:[]){const e=t(_);e&&(_=e)}w(null!==(n=null==r?void 0:r.static)&&void 0!==n?n:{},_),w(null!==(a=null==r?void 0:r.instance)&&void 0!==a?a:{},_.prototype)}var E,v;return E=_,v=t,u.set(E,v),_}const w=(t,e)=>{const n=t.property,r=t.method;if(n)for(let t in n)for(let r of n[t])r(e,t);if(r)for(let t in r)for(let n of r[t])n(e,t,Object.getOwnPropertyDescriptor(e,t))},E=(...t)=>e=>{const n=_(...t.concat([e]));return Object.defineProperty(n,"name",{value:e.name,writable:!1}),n}},7374(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4401(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_RECEIVED=e.STATUS_REJECTED=e.STATUS_PENDING=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_PENDING="PENDING",e.STATUS_REJECTED="REJECTED",e.STATUS_RECEIVED="RECEIVED",e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,REJECTED:e.STATUS_REJECTED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PENDING:"pending"},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},2484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4637(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7066(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},571(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9884(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(n(798),e),e.CONTRACT=n(2484),i(n(4637),e),i(n(7374),e),i(n(6552),e),i(n(4401),e),i(n(7066),e),i(n(571),e)},798(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6552(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5319(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(n(9884),e),e.API=n(9884),i(n(6868),e),e.WALLET_API=n(6868),e.PAYMASTER_API=n(5206)},9528(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1067(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5206(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8812),e),i(n(1067),e),i(n(9528),e),i(n(3674),e)},8812(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3674(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8861(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5670(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4329(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},53(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8655(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6868(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(4329),e),i(n(2780),e),i(n(8861),e),i(n(5670),e),i(n(9606),e),i(n(8655),e),i(n(53),e)},9606(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2780(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},569(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8472(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockStatus=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED=e.STATUS_CANDIDATE=e.STATUS_RECEIVED=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_RECEIVED="RECEIVED",e.STATUS_CANDIDATE="CANDIDATE",e.STATUS_PRE_CONFIRMED="PRE_CONFIRMED",e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED.toLowerCase(),e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,CANDIDATE:e.STATUS_CANDIDATE,PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED_LOWERCASE,L1_ACCEPTED:"l1_accepted"},e.EBlockStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},143(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1302(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3749(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9350(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4465(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(n(4827),e),e.CONTRACT=n(143),i(n(1302),e),i(n(569),e),i(n(8425),e),i(n(8472),e),i(n(3749),e),i(n(9350),e)},4827(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8425(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2066(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(n(4465),e),e.API=n(4465),i(n(5207),e),e.WALLET_API=n(5207),e.PAYMASTER_API=n(3247)},7511(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8312(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3247(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(5709),e),i(n(8312),e),i(n(7511),e),i(n(3063),e)},5709(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3063(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6112(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8943(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6362(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},3632(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2702(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5207(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(6362),e),i(n(3591),e),i(n(6112),e),i(n(8943),e),i(n(9365),e),i(n(2702),e),i(n(3632),e)},9365(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3591(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},7631(t,e){!function(t){"use strict";function e(t){return n.test(t)}const n=/^-?[0-9]+$/;function r(t){return i.test(t)}const i=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function s(t,n){if(e(t))return Number.isSafeInteger(Number.parseInt(t,10));const r=Number.parseFloat(t),i=String(r);if(t===i)return!0;const s=u(t),a=u(i);if(s===a)return!0;if(!0===n?.approx){const n=14;if(!e(t)&&a.length>=n&&s.startsWith(a.substring(0,n)))return!0}return!1}let a=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function o(t){if(s(t,{approx:!1}))return;if(e(t))return a.truncate_integer;const n=Number.parseFloat(t);return Number.isFinite(n)?0===n?a.underflow:a.truncate_float:a.overflow}function c(t){const e=t.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!e)throw new SyntaxError(`Invalid number: ${t}`);const n=e[1],r=e[2];let i=void 0!==e[4]?Number.parseInt(e[4],10):0;const s=r.indexOf(".");i+=-1!==s?s-1:r.length-1;const a=r.replace(".","").replace(/^0*/,t=>(i-=t.length,"")).replace(/0*$/,"");return a.length>0?{sign:n,digits:a,exponent:i}:{sign:n,digits:"0",exponent:i+1}}function l(t,e){if(t===e)return 0;const n=c(t),r=c(e),i="-"===n.sign?-1:1;return n.sign!==r.sign?"0"===n.digits&&"0"===r.digits?0:i:n.exponent!==r.exponent?n.exponent>r.exponent?i:n.exponent<r.exponent?-i:0:n.digits>r.digits?i:n.digits<r.digits?-i:0}function u(t){const{start:e,end:n}=d(t),r=t.substring(e,n),i=r.indexOf(".");return-1===i?r:r.substring(0,i)+r.substring(i+1)}function d(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let n=t.lastIndexOf("e");for(-1===n&&(n=t.lastIndexOf("E")),-1===n&&(n=t.length);("0"===t[n-1]||"."===t[n-1])&&n>e;)n--;return{start:e,end:n}}class h{isLosslessNumber=!0;constructor(t){if(!r(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=o(this.value);if(void 0===t||t===a.truncate_float)return Number.parseFloat(this.value);if(e(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function f(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}function p(t){return new h(t)}function g(t,e,n,r){return Array.isArray(n)?r.call(t,e,function(t,e){for(let n=0;n<t.length;n++)t[n]=g(t,String(n),t[n],e);return t}(n,r)):n&&"object"==typeof n&&!f(n)?r.call(t,e,function(t,e){for(const n of Object.keys(t)){const r=g(t,n,t[n],e);void 0!==r?t[n]=r:delete t[n]}return t}(n,r)):r.call(t,e,n)}function y(t){return t>=E&&t<=v||t>=A&&t<=S||t>=T&&t<=I}function m(t){return t>=E&&t<=v}function b(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,n)=>b(t,e[n])):!(!_(t)||!_(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(n=>b(t[n],e[n])))}function _(t){return"object"==typeof t&&null!==t}const w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},E=48,v=57,A=65,T=97,S=70,I=102,k=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;t.LosslessNumber=h,t.UnsafeNumberReason=a,t.compareLosslessNumber=function(t,e){return l(t.value,e.value)},t.compareNumber=l,t.config=function(t){throw new Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},t.getUnsafeNumberReason=o,t.isInteger=e,t.isLosslessNumber=f,t.isNumber=r,t.isSafeNumber=s,t.parse=function(t,e,n){const r="function"==typeof n?{parseNumber:n}:n,i=r?.parseNumber??p,s=r?.onDuplicateKey??function(t){let{key:e,position:n}=t;throw new SyntaxError(`Duplicate key '${e}' encountered at position ${n}`)};let a=0;const o=c();return function(t){if(void 0===t)throw new SyntaxError(`JSON value expected ${C()}`)}(o),function(){if(a<t.length)throw new SyntaxError(`Expected end of input ${C()}`)}(),e?function(t,e){return g({"":t},"",t,e)}(o,e):o;function c(){u();const e=d()??function(){const e=a;if(45===t.charCodeAt(a)&&(a++,A(e)),t.charCodeAt(a)===E)a++;else if((n=t.charCodeAt(a))>=49&&n<=v)for(a++;m(t.charCodeAt(a));)a++;var n;if(46===t.charCodeAt(a))for(a++,A(e);m(t.charCodeAt(a));)a++;if(101===t.charCodeAt(a)||69===t.charCodeAt(a))for(a++,45!==t.charCodeAt(a)&&43!==t.charCodeAt(a)||a++,A(e);m(t.charCodeAt(a));)a++;if(a>e)return i(t.slice(e,a))}()??function(){if(123===t.charCodeAt(a)){a++,u();const e={};let n=!0;for(;a<t.length&&125!==t.charCodeAt(a);){n?n=!1:(h(),u());const t=a,r=d();if(void 0===r)return void T();u(),f();const i=c();if(void 0===i)return void k();if(Object.prototype.hasOwnProperty.call(e,r)&&!b(i,e[r])){const n=s({key:r,position:t+1,oldValue:e[r],newValue:i});void 0!==n&&(e[r]=n)}else e[r]=i}return 125!==t.charCodeAt(a)&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${C()}`)}(),a++,e}}()??function(){if(91===t.charCodeAt(a)){a++,u();const e=[];let n=!0;for(;a<t.length&&93!==t.charCodeAt(a);){n?n=!1:h();const t=c();_(t),e.push(t)}return 93!==t.charCodeAt(a)&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${C()}`)}(),a++,e}}()??l("true",!0)??l("false",!1)??l("null",null);return u(),e}function l(e,n){if(t.slice(a,a+e.length)===e)return a+=e.length,n}function u(){for(;32===(e=t.charCodeAt(a))||10===e||9===e||13===e;)a++;var e}function d(){if(34===t.charCodeAt(a)){a++;let n="";for(;a<t.length&&34!==t.charCodeAt(a);){if(92===t.charCodeAt(a)){const e=t[a+1],r=w[e];void 0!==r?(n+=r,a++):"u"===e?y(t.charCodeAt(a+2))&&y(t.charCodeAt(a+3))&&y(t.charCodeAt(a+4))&&y(t.charCodeAt(a+5))?(n+=String.fromCharCode(Number.parseInt(t.slice(a+2,a+6),16)),a+=5):x(a):I(a)}else(e=t.charCodeAt(a))>=32&&e<=1114111?n+=t[a]:S(t[a]);a++}return function(){if(34!==t.charCodeAt(a))throw new SyntaxError(`End of string '"' expected ${C()}`)}(),a++,n}var e}function h(){if(44!==t.charCodeAt(a))throw new SyntaxError(`Comma ',' expected after value ${C()}`);a++}function f(){if(58!==t.charCodeAt(a))throw new SyntaxError(`Colon ':' expected after property name ${C()}`);a++}function _(t){if(void 0===t)throw new SyntaxError(`Array item expected ${C()}`)}function A(e){if(!m(t.charCodeAt(a))){const n=t.slice(e,a);throw new SyntaxError(`Invalid number '${n}', expecting a digit ${C()}`)}}function T(){throw new SyntaxError(`Quoted object key expected ${C()}`)}function S(t){throw new SyntaxError(`Invalid character '${t}' ${B()}`)}function I(e){const n=t.slice(e,e+2);throw new SyntaxError(`Invalid escape character '${n}' ${B()}`)}function k(){throw new SyntaxError(`Object value expected after ':' ${B()}`)}function x(e){const n=t.slice(e,e+6);throw new SyntaxError(`Invalid unicode character '${n}' ${B()}`)}function B(){return`at position ${a}`}function C(){return`${a<t.length?`but got '${t[a]}'`:"but reached end of input"} ${B()}`}},t.parseLosslessNumber=p,t.parseNumberAndBigInt=function(t){return e(t)?BigInt(t):Number.parseFloat(t)},t.reviveDate=function(t,e){return"string"==typeof e&&k.test(e)?new Date(e):e},t.splitNumber=c,t.stringify=function t(e,n,i,s){const a=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(i);return function e(c,l){if(Array.isArray(s)){const t=s.find(t=>t.test(c));if(t){const e=t.stringify(c);if("string"!=typeof e||!r(e))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${e})`);return e}}return"boolean"==typeof c||"number"==typeof c||"string"==typeof c||null===c||c instanceof Date||c instanceof Boolean||c instanceof Number||c instanceof String?JSON.stringify(c):c?.isLosslessNumber||"bigint"==typeof c?c.toString():Array.isArray(c)?function(t,r){if(0===t.length)return"[]";const i=a?r+a:void 0;let s=a?"[\n":"[";for(let r=0;r<t.length;r++){const o="function"==typeof n?n.call(t,String(r),t[r]):t[r];a&&(s+=i),s+=void 0!==o&&"function"!=typeof o?e(o,i):"null",r<t.length-1&&(s+=a?",\n":",")}return s+=a?`\n${r}]`:"]",s}(c,l):c&&"object"==typeof c?function(r,s){if("function"==typeof r.toJSON)return t(r.toJSON(),n,i,void 0);const c=Array.isArray(n)?n.map(String):Object.keys(r);if(0===c.length)return"{}";const l=a?s+a:void 0;let u=!0,d=a?"{\n":"{";for(const t of c){const i="function"==typeof n?n.call(r,t,r[t]):r[t];if(o(0,i)){u?u=!1:d+=a?",\n":",";const n=JSON.stringify(t);d+=a?`${l+n}: `:`${n}:`,d+=e(i,l)}}return d+=a?`\n${s}}`:"}",d}(c,l):void 0}("function"==typeof n?n.call({"":e},"",e):e,"");function o(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}},t.toLosslessNumber=function(t){if(function(t){const{start:e,end:n}=d(t),r=t.indexOf(".");return-1===r||r<e||r>n?n-e:n-e-1}(String(t))>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${t})`);if(Number.isNaN(t))throw new Error("Invalid number: NaN");if(!Number.isFinite(t))throw new Error(`Invalid number: ${t}`);return new h(String(t))},t.toSafeNumberOrThrow=function(t,e){const n=Number.parseFloat(t),r=o(t);if(!0===e?.approx?r&&r!==a.truncate_float:r){const e=r?.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${t}' would ${e} and become ${n}`)}return n}}(e)},1817(t,e,n){"use strict";n.d(e,{s:()=>l,Z:()=>c});var r=n(5493),i=n(6606);class s extends i.Vw{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,r.sd)(t);const n=(0,i.ZJ)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(n.length>s?t.create().update(n).digest():n);for(let t=0;t<a.length;t++)a[t]^=54;this.iHash.update(a),this.oHash=t.create();for(let t=0;t<a.length;t++)a[t]^=106;this.oHash.update(a),a.fill(0)}update(t){return(0,r.CC)(this),this.iHash.update(t),this}digestInto(t){(0,r.CC)(this),(0,r.DO)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:a}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const a=(t,e,n)=>new s(t,e).update(n).digest();a.create=(t,e)=>new s(t,e);var o=n(7713);function c(t){return{hash:t,hmac:(e,...n)=>a(t,e,(0,i.Id)(...n)),randomBytes:i.po}}function l(t,e){const n=e=>(0,o.weierstrass)({...t,...c(e)});return Object.freeze({...n(e),create:n})}},8030(t,e,n){"use strict";n.d(e,{B8:()=>p,D0:()=>_,LH:()=>b,Tp:()=>E,f4:()=>m,jr:()=>y,qy:()=>v,zH:()=>f,zi:()=>d});var r=n(8293);const i=BigInt(0),s=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function d(t,e){const n=t%e;return n>=i?n:e+n}function h(t,e,n){if(e<i)throw new Error("invalid exponent, negatives unsupported");if(n<=i)throw new Error("invalid modulus");if(n===s)return i;let r=s;for(;e>i;)e&s&&(r=r*t%n),t=t*t%n,e>>=s;return r}function f(t,e,n){let r=t;for(;e-- >i;)r*=r,r%=n;return r}function p(t,e){if(t===i)throw new Error("invert: expected non-zero number");if(e<=i)throw new Error("invert: expected positive modulus, got "+e);let n=d(t,e),r=e,a=i,o=s,c=s,l=i;for(;n!==i;){const t=r/n,e=r%n,i=a-c*t,s=o-l*t;r=n,n=e,a=c,o=l,c=i,l=s}if(r!==s)throw new Error("invert: does not exist");return d(a,e)}const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(t){const e=g.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.Q5)(t,e)}function m(t,e,n){if(n<i)throw new Error("invalid exponent, negatives unsupported");if(n===i)return t.ONE;if(n===s)return e;let r=t.ONE,a=e;for(;n>i;)n&s&&(r=t.mul(r,a)),a=t.sqr(a),n>>=s;return r}function b(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function _(t,e,n=!1,f={}){if(t<=i)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:g,nByteLength:y}=b(t,e);if(y>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const w=Object.freeze({ORDER:t,BITS:g,BYTES:y,MASK:(0,r.OG)(g),ZERO:i,ONE:s,create:e=>d(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&s)===s,neg:e=>d(-e,t),eql:(t,e)=>t===e,sqr:e=>d(e*e,t),add:(e,n)=>d(e+n,t),sub:(e,n)=>d(e-n,t),mul:(e,n)=>d(e*n,t),pow:(t,e)=>m(w,t,e),div:(e,n)=>d(e*p(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>p(e,t),sqrt:f.sqrt||(e=>(_||(_=function(t){if(t%c===o){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%u===l){const e=(t-l)/u;return function(t,n){const r=t.mul(n,a),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,a),i),c=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return function(t){const e=(t-s)/a;let n,r,o;for(n=t-s,r=0;n%a===i;n/=a,r++);for(o=a;o<t&&h(o,e,t)!==t-s;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const l=(n+s)/a;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,o),n),u=t.pow(i,l),d=t.pow(i,n);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(d);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,s<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),d=t.mul(d,c),a=e}return u}}(t)}(t)),_(w,e))),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r)),t.ONE),i=t.inv(r);return e.reduceRight((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r)),i),n}(w,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?(0,r.z)(t,y):(0,r.lq)(t,y),fromBytes:t=>{if(t.length!==y)throw new Error("Field.fromBytes: expected "+y+" bytes, got "+t.length);return n?(0,r.lX)(t):(0,r.Ph)(t)}});return Object.freeze(w)}function w(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function E(t){const e=w(t);return e+Math.ceil(e/2)}function v(t,e,n=!1){const i=t.length,a=w(e),o=E(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const c=d(n?(0,r.Ph)(t):(0,r.lX)(t),e-s)+s;return n?(0,r.z)(c,a):(0,r.lq)(c,a)}},5591(t,e,n){"use strict";n.r(e),n.d(e,{poseidon:()=>a,splitConstants:()=>s,validateOpts:()=>i});var r=n(8030);function i(t){const{Fp:e,mds:n,reversePartialPowIdx:i,roundConstants:s}=t,{roundsFull:a,roundsPartial:o,sboxPower:c,t:l}=t;(0,r.jr)(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: invalid MDS matrix");const u=n.map(t=>{if(!Array.isArray(t)||t.length!==l)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==i&&"boolean"!=typeof i)throw new Error("invalid param reversePartialPowIdx="+i);if(1&a)throw new Error("roundsFull is not even"+a);const d=a+o;if(!Array.isArray(s)||s.length!==d)throw new Error("Poseidon: invalid round constants");const h=s.map(t=>{if(!Array.isArray(t)||t.length!==l)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=t=>(0,r.f4)(e,t,f);return 3===c?p=t=>e.mul(e.sqrN(t),t):5===c&&(p=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:d,sboxFn:p,roundConstants:h,mds:u})}function s(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n}function a(t){const e=i(t),{Fp:n,mds:r,roundConstants:s,rounds:a,roundsPartial:o,sboxFn:c,t:l}=e,u=e.roundsFull/2,d=e.reversePartialPowIdx?l-1:0,h=(t,e,i)=>(t=t.map((t,e)=>n.add(t,s[i][e])),e?t=t.map(t=>c(t)):t[d]=c(t[d]),t=r.map(e=>e.reduce((e,r,i)=>n.add(e,n.mulN(r,t[i])),n.ZERO))),f=function(t){if(!Array.isArray(t)||t.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)});let e=0;for(let n=0;n<u;n++)t=h(t,!0,e++);for(let n=0;n<o;n++)t=h(t,!1,e++);for(let n=0;n<u;n++)t=h(t,!0,e++);if(e!==a)throw new Error("invalid number of rounds");return t};return f.roundConstants=s,f}},8293(t,e,n){"use strict";n.d(e,{DO:()=>o,IV:()=>_,Id:()=>E,ME:()=>h,My:()=>u,OG:()=>I,Ph:()=>g,Q5:()=>R,aK:()=>T,aT:()=>p,aY:()=>a,dJ:()=>S,e8:()=>c,fg:()=>B,lX:()=>y,lq:()=>m,qj:()=>w,r4:()=>A,x:()=>O,z:()=>b,zW:()=>d});const r=BigInt(0),i=BigInt(1),s=BigInt(2);function a(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function o(t){if(!a(t))throw new Error("Uint8Array expected")}function c(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const l=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u(t){o(t);let e="";for(let n=0;n<t.length;n++)e+=l[t[n]];return e}function d(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?r:BigInt("0x"+t)}function f(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function p(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=f(t.charCodeAt(i)),s=f(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function g(t){return h(u(t))}function y(t){return o(t),h(u(Uint8Array.from(t).reverse()))}function m(t,e){return p(t.toString(16).padStart(2*e,"0"))}function b(t,e){return m(t,e).reverse()}function _(t){return p(d(t))}function w(t,e,n){let r;if("string"==typeof e)try{r=p(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!a(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function E(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];o(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const v=t=>"bigint"==typeof t&&r<=t;function A(t,e,n){return v(t)&&v(e)&&v(n)&&e<=t&&t<n}function T(t,e,n,r){if(!A(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function S(t){let e;for(e=0;t>r;t>>=i,e+=1);return e}const I=t=>(s<<BigInt(t-1))-i,k=t=>new Uint8Array(t),x=t=>Uint8Array.from(t);function B(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=k(t),i=k(t),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...t)=>n(i,r,...t),c=(t=k())=>{i=o(x([0]),t),r=o(),0!==t.length&&(i=o(x([1]),t),r=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=o();const e=r.slice();n.push(e),t+=r.length}return E(...n)};return(t,e)=>{let n;for(a(),c(t);!(n=e(l()));)c();return a(),n}}const C={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||a(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function R(t,e,n={}){const r=(e,n,r)=>{const i=C[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}function O(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}}},7713(t,e,n){"use strict";n.r(e),n.d(e,{DER:()=>m,SWUFpSqrtRatio:()=>S,mapToCurveSimpleSWU:()=>I,weierstrass:()=>T,weierstrassPoints:()=>A});var r=n(8030),i=n(8293);const s=BigInt(0),a=BigInt(1);function o(t,e){const n=e.negate();return t?n:e}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function l(t,e){return c(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const u=new WeakMap,d=new WeakMap;function h(t){return d.get(t)||1}function f(t){return(0,r.jr)(t.Fp),(0,i.Q5)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.LH)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function p(t){void 0!==t.lowS&&(0,i.e8)("lowS",t.lowS),void 0!==t.prehash&&(0,i.e8)("prehash",t.prehash)}const{Ph:g,aT:y}=i,m={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:n}=m;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=i.zW(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?i.zW(s.length/2|128):"";return i.zW(t)+a+s+e},decode(t,e){const{Err:n}=m;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const a=e.subarray(r,r+t);if(a.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===a[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of a)s=s<<8|t;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const a=e.subarray(r,r+s);if(a.length!==s)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=m;if(t<b)throw new e("integer: negative integers are not allowed");let n=i.zW(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=m;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return g(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=m,s="string"==typeof t?y(t):t;i.DO(s);const{v:a,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l}=r.decode(2,a),{v:u,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=m,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},b=BigInt(0),_=BigInt(1),w=BigInt(2),E=BigInt(3),v=BigInt(4);function A(t){const e=function(t){const e=f(t);i.Q5(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,p=r.D0(e.n,e.nBitLength),g=e.toBytes||((t,e,r)=>{const s=e.toAffine();return i.Id(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),y=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function m(t){const{a:r,b:i}=e,s=n.sqr(t),a=n.mul(s,t);return n.add(n.add(a,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),m(e.Gx)))throw new Error("bad generator point: equation left != right");function w(t){const{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:a,n:o}=e;if(n&&"bigint"!=typeof t){if(i.aY(t)&&(t=i.My(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*s,"0")}let c;try{c="bigint"==typeof t?t:i.Ph((0,i.qj)("private key",t,s))}catch(e){throw new Error("invalid private key, expected hex or "+s+" bytes, got "+typeof t)}return a&&(c=r.zi(c,o)),i.aK("private key",c,_,o),c}function v(t){if(!(t instanceof S))throw new Error("ProjectivePoint expected")}const A=(0,i.x)((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const a=t.is0();null==e&&(e=a?n.ONE:n.inv(s));const o=n.mul(r,e),c=n.mul(i,e),l=n.mul(s,e);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),T=(0,i.x)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=m(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class S{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof S)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?S.ZERO:new S(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map(t=>t.pz));return t.map((t,n)=>t.toAffine(e[n])).map(S.fromAffine)}static fromHex(t){const e=S.fromAffine(y((0,i.qj)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return S.BASE.multiply(w(t))}static msm(t,e){return function(t,e,n,r){if(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,a=(0,i.dJ)(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,c=(1<<o)-1,l=new Array(c+1).fill(s);let u=s;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){l.fill(s);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(c));l[s]=l[s].add(n[e])}let e=s;for(let t=l.length-1,n=s;t>0;t--)n=n.add(l[t]),e=e.add(n);if(u=u.add(e),0!==t)for(let t=0;t<o;t++)u=u.double()}return u}(S,p,t,e)}_setWindowSize(t){k.setWindowSize(this,t)}assertValidity(){T(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){v(t);const{px:e,py:r,pz:i}=this,{px:s,py:a,pz:o}=t,c=n.eql(n.mul(e,o),n.mul(s,i)),l=n.eql(n.mul(r,o),n.mul(a,i));return c&&l}negate(){return new S(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,E),{px:s,py:a,pz:o}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,d=n.mul(s,s),h=n.mul(a,a),f=n.mul(o,o),p=n.mul(s,a);return p=n.add(p,p),u=n.mul(s,o),u=n.add(u,u),c=n.mul(t,u),l=n.mul(i,f),l=n.add(c,l),c=n.sub(h,l),l=n.add(h,l),l=n.mul(c,l),c=n.mul(p,c),u=n.mul(i,u),f=n.mul(t,f),p=n.sub(d,f),p=n.mul(t,p),p=n.add(p,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,f),d=n.mul(d,p),l=n.add(l,d),f=n.mul(a,o),f=n.add(f,f),d=n.mul(f,p),c=n.sub(c,d),u=n.mul(f,h),u=n.add(u,u),u=n.add(u,u),new S(c,l,u)}add(t){v(t);const{px:r,py:i,pz:s}=this,{px:a,py:o,pz:c}=t;let l=n.ZERO,u=n.ZERO,d=n.ZERO;const h=e.a,f=n.mul(e.b,E);let p=n.mul(r,a),g=n.mul(i,o),y=n.mul(s,c),m=n.add(r,i),b=n.add(a,o);m=n.mul(m,b),b=n.add(p,g),m=n.sub(m,b),b=n.add(r,s);let _=n.add(a,c);return b=n.mul(b,_),_=n.add(p,y),b=n.sub(b,_),_=n.add(i,s),l=n.add(o,c),_=n.mul(_,l),l=n.add(g,y),_=n.sub(_,l),d=n.mul(h,b),l=n.mul(f,y),d=n.add(l,d),l=n.sub(g,d),d=n.add(g,d),u=n.mul(l,d),g=n.add(p,p),g=n.add(g,p),y=n.mul(h,y),b=n.mul(f,b),g=n.add(g,y),y=n.sub(p,y),y=n.mul(h,y),b=n.add(b,y),p=n.mul(g,b),u=n.add(u,p),p=n.mul(_,b),l=n.mul(m,l),l=n.sub(l,p),p=n.mul(m,g),d=n.mul(_,d),d=n.add(d,p),new S(l,u,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(S.ZERO)}wNAF(t){return k.wNAFCached(this,t,S.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:s}=e;i.aK("scalar",t,b,s);const a=S.ZERO;if(t===b)return a;if(this.is0()||t===_)return this;if(!r||k.hasPrecomputes(this))return k.wNAFCachedUnsafe(this,t,S.normalizeZ);let{k1neg:o,k1:c,k2neg:l,k2:u}=r.splitScalar(t),d=a,h=a,f=this;for(;c>b||u>b;)c&_&&(d=d.add(f)),u&_&&(h=h.add(f)),f=f.double(),c>>=_,u>>=_;return o&&(d=d.negate()),l&&(h=h.negate()),h=new S(n.mul(h.px,r.beta),h.py,h.pz),d.add(h)}multiply(t){const{endo:r,n:s}=e;let a,o;if(i.aK("scalar",t,_,s),r){const{k1neg:e,k1:i,k2neg:s,k2:c}=r.splitScalar(t);let{p:l,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);l=k.constTimeNegate(e,l),d=k.constTimeNegate(s,d),d=new S(n.mul(d.px,r.beta),d.py,d.pz),a=l.add(d),o=u.add(h)}else{const{p:e,f:n}=this.wNAF(t);a=e,o=n}return S.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(t,e,n){const r=S.BASE,i=(t,e)=>e!==b&&e!==_&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return A(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===_)return!0;if(n)return n(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===_?this:n?n(S,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,i.e8)("isCompressed",t),this.assertValidity(),g(S,this,t)}toHex(t=!0){return(0,i.e8)("isCompressed",t),i.My(this.toRawBytes(t))}}S.BASE=new S(e.Gx,e.Gy,n.ONE),S.ZERO=new S(n.ZERO,n.ONE,n.ZERO);const I=e.nBitLength,k=(x=S,B=e.endo?Math.ceil(I/2):I,{constTimeNegate:o,hasPrecomputes:t=>1!==h(t),unsafeLadder(t,e,n=x.ZERO){let r=t;for(;e>s;)e&a&&(n=n.add(r)),r=r.double(),e>>=a;return n},precomputeWindow(t,e){const{windows:n,windowSize:r}=l(e,B),i=[];let s=t,a=s;for(let t=0;t<n;t++){a=s,i.push(a);for(let t=1;t<r;t++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,e,n){const{windows:r,windowSize:i}=l(t,B);let s=x.ZERO,c=x.BASE;const u=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let t=0;t<r;t++){const r=t*i;let l=Number(n&u);n>>=h,l>i&&(l-=d,n+=a);const f=r,p=r+Math.abs(l)-1,g=t%2!=0,y=l<0;0===l?c=c.add(o(g,e[f])):s=s.add(o(y,e[p]))}return{p:s,f:c}},wNAFUnsafe(t,e,n,r=x.ZERO){const{windows:i,windowSize:o}=l(t,B),c=BigInt(2**t-1),u=2**t,d=BigInt(t);for(let t=0;t<i;t++){const i=t*o;if(n===s)break;let l=Number(n&c);if(n>>=d,l>o&&(l-=u,n+=a),0===l)continue;let h=e[i+Math.abs(l)-1];l<0&&(h=h.negate()),r=r.add(h)}return r},getPrecomputes(t,e,n){let r=u.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&u.set(e,n(r))),r},wNAFCached(t,e,n){const r=h(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=h(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,e){c(e,B),d.set(t,e),u.delete(t)}});var x,B;return{CURVE:e,ProjectivePoint:S,normPrivateKeyToScalar:w,weierstrassEquation:m,isWithinCurveOrder:function(t){return i.r4(t,_,e.n)}}}function T(t){const e=function(t){const e=f(t);return i.Q5(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:s}=e,a=n.BYTES+1,o=2*n.BYTES+1;function c(t){return r.zi(t,s)}function l(t){return r.B8(t,s)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:g}=A({...e,toBytes(t,e,r){const s=e.toAffine(),a=n.toBytes(s.x),o=i.Id;return(0,i.e8)("isCompressed",r),r?o(Uint8Array.from([e.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,n.toBytes(s.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==a||2!==r&&3!==r){if(e===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+a+", or uncompressed "+o+", got "+e)}{const t=i.Ph(s);if(!i.r4(t,_,n.ORDER))throw new Error("Point is not on curve");const e=h(t);let a;try{a=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~r)!=((a&_)===_)&&(a=n.neg(a)),{x:t,y:a}}}}),y=t=>i.My(i.lq(t,e.nByteLength));function w(t){return t>s>>_}const E=(t,e,n)=>i.Ph(t.slice(e,n));class v{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=(0,i.qj)("compactSignature",t,2*n),new v(E(t,0,n),E(t,n,2*n))}static fromDER(t){const{r:e,s:n}=m.toSig((0,i.qj)("DER",t));return new v(e,n)}assertValidity(){i.aK("r",this.r,_,s),i.aK("s",this.s,_,s)}addRecoveryBit(t){return new v(this.r,this.s,t)}recoverPublicKey(t){const{r,s,recovery:a}=this,o=k((0,i.qj)("msgHash",t));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const d=2===a||3===a?r+e.n:r;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&a?"03":"02",f=u.fromHex(h+y(d)),p=l(d),g=c(-o*p),m=c(s*p),b=u.BASE.multiplyAndAddUnsafe(f,g,m);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return i.aT(this.toDERHex())}toDERHex(){return m.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.aT(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const T={isValidPrivateKey(t){try{return d(t),!0}catch(t){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const t=r.Tp(e.n);return r.qy(e.randomBytes(t),e.n)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function S(t){const e=i.aY(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===a||r===o:n?r===2*a||r===2*o:t instanceof u}const I=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const n=i.Ph(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},k=e.bits2int_modN||function(t){return c(I(t))},x=i.OG(e.nBitLength);function B(t){return i.aK("num < 2^"+e.nBitLength,t,b,x),i.lq(t,e.nByteLength)}const C={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(S(t))throw new Error("first arg must be private key");if(!S(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(d(t)).toRawBytes(n)},sign:function(t,r,s=C){const{seed:a,k2sig:o}=function(t,r,s=C){if(["recovered","canonical"].some(t=>t in s))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:o}=e;let{lowS:h,prehash:f,extraEntropy:y}=s;null==h&&(h=!0),t=(0,i.qj)("msgHash",t),p(s),f&&(t=(0,i.qj)("prehashed msgHash",a(t)));const m=k(t),E=d(r),A=[B(E),B(m)];if(null!=y&&!1!==y){const t=!0===y?o(n.BYTES):y;A.push((0,i.qj)("extraEntropy",t))}const T=i.Id(...A),S=m;return{seed:T,k2sig:function(t){const e=I(t);if(!g(e))return;const n=l(e),r=u.BASE.multiply(e).toAffine(),i=c(r.x);if(i===b)return;const s=c(n*c(S+i*E));if(s===b)return;let a=(r.x===i?0:2)|Number(r.y&_),o=s;return h&&w(s)&&(o=function(t){return w(t)?c(-t):t}(s),a^=1),new v(i,o,a)}}}(t,r,s),h=e;return i.fg(h.hash.outputLen,h.nByteLength,h.hmac)(a,o)},verify:function(t,n,r,s=R){const a=t;n=(0,i.qj)("msgHash",n),r=(0,i.qj)("publicKey",r);const{lowS:o,prehash:d,format:h}=s;if(p(s),"strict"in s)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof a||i.aY(a),g=!f&&!h&&"object"==typeof a&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!f&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y,b;try{if(g&&(y=new v(a.r,a.s)),f){try{"compact"!==h&&(y=v.fromDER(a))}catch(t){if(!(t instanceof m.Err))throw t}y||"der"===h||(y=v.fromCompact(a))}b=u.fromHex(r)}catch(t){return!1}if(!y)return!1;if(o&&y.hasHighS())return!1;d&&(n=e.hash(n));const{r:_,s:w}=y,E=k(n),A=l(w),T=c(E*A),S=c(_*A),I=u.BASE.multiplyAndAddUnsafe(b,T,S)?.toAffine();return!!I&&c(I.x)===_},ProjectivePoint:u,Signature:v,utils:T}}function S(t,e){const n=t.ORDER;let r=b;for(let t=n-_;t%w===b;t/=w)r+=_;const i=r,s=w<<i-_-_,a=s*w,o=(n-_)/a,c=(o-_)/w,l=a-_,u=s,d=t.pow(e,o),h=t.pow(e,(o+_)/w);let f=(e,n)=>{let r=d,s=t.pow(n,l),a=t.sqr(s);a=t.mul(a,n);let o=t.mul(e,a);o=t.pow(o,c),o=t.mul(o,s),s=t.mul(o,n),a=t.mul(o,e);let f=t.mul(a,s);o=t.pow(f,u);let p=t.eql(o,t.ONE);s=t.mul(a,h),o=t.mul(f,r),a=t.cmov(s,a,p),f=t.cmov(o,f,p);for(let e=i;e>_;e--){let n=e-w;n=w<<n-_;let i=t.pow(f,n);const o=t.eql(i,t.ONE);s=t.mul(a,r),r=t.mul(r,r),i=t.mul(f,r),a=t.cmov(s,a,o),f=t.cmov(i,f,o)}return{isValid:p,value:a}};if(t.ORDER%v===E){const n=(t.ORDER-E)/v,r=t.sqrt(t.neg(e));f=(e,i)=>{let s=t.sqr(i);const a=t.mul(e,i);s=t.mul(s,a);let o=t.pow(s,n);o=t.mul(o,a);const c=t.mul(o,r),l=t.mul(t.sqr(o),i),u=t.eql(l,e);return{isValid:u,value:t.cmov(c,o,u)}}}return f}function I(t,e){if(r.jr(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=S(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,a,o,c,l,u,d;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),a=t.add(s,t.ONE),a=t.mul(a,e.B),o=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),o=t.mul(o,e.A),s=t.sqr(a),l=t.sqr(o),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,a),l=t.mul(l,o),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(i,a);const{isValid:h,value:f}=n(s,l);d=t.mul(i,r),d=t.mul(d,f),u=t.cmov(u,a,h),d=t.cmov(d,f,h);const p=t.isOdd(r)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),u=t.div(u,o),{x:u,y:d}}}},9979(t,e,n){"use strict";n.d(e,{bI:()=>E});var r=n(5493),i=n(6606);const s=(t,e,n)=>t&e^~t&n,a=(t,e,n)=>t&e^t&n^e&n;class o extends i.Vw{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.O8)(this.buffer)}update(t){(0,r.CC)(this);const{view:e,buffer:n,blockLen:s}=this,a=(t=(0,i.ZJ)(t)).length;for(let r=0;r<a;){const o=Math.min(s-this.pos,a-r);if(o===s){const e=(0,i.O8)(t);for(;s<=a-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.CC)(this),(0,r.Ht)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:a}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let t=o;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,s-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,i.O8)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,d[t],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const c=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint32Array(64);class d extends o{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)u[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=u[t-15],n=u[t-2],r=(0,i.Ow)(e,7)^(0,i.Ow)(e,18)^e>>>3,s=(0,i.Ow)(n,17)^(0,i.Ow)(n,19)^n>>>10;u[t]=s+u[t-7]+r+u[t-16]|0}let{A:n,B:r,C:o,D:l,E:d,F:h,G:f,H:p}=this;for(let t=0;t<64;t++){const e=p+((0,i.Ow)(d,6)^(0,i.Ow)(d,11)^(0,i.Ow)(d,25))+s(d,h,f)+c[t]+u[t]|0,g=((0,i.Ow)(n,2)^(0,i.Ow)(n,13)^(0,i.Ow)(n,22))+a(n,r,o)|0;p=f,f=h,h=d,d=l+e|0,l=o,o=r,r=n,n=e+g|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,l=l+this.D|0,d=d+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(n,r,o,l,d,h,f,p)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const h=(0,i.ld)(()=>new d);var f=n(1817),p=n(8030);const g=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),y=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),m=BigInt(1),b=BigInt(2),_=(t,e)=>(t+e/b)/e;const w=(0,p.D0)(g,void 0,void 0,{sqrt:function(t){const e=g,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=(0,p.zH)(u,n,e)*u%e,h=(0,p.zH)(d,n,e)*u%e,f=(0,p.zH)(h,b,e)*l%e,y=(0,p.zH)(f,i,e)*f%e,m=(0,p.zH)(y,s,e)*y%e,_=(0,p.zH)(m,o,e)*m%e,E=(0,p.zH)(_,c,e)*_%e,v=(0,p.zH)(E,o,e)*m%e,A=(0,p.zH)(v,n,e)*u%e,T=(0,p.zH)(A,a,e)*y%e,S=(0,p.zH)(T,r,e)*l%e,I=(0,p.zH)(S,b,e);if(!w.eql(w.sqr(I),t))throw new Error("Cannot find square root");return I}}),E=(0,f.s)({a:BigInt(0),b:BigInt(7),Fp:w,n:y,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=y,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-m*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),o=_(s*t,e),c=_(-r*t,e);let l=(0,p.zi)(t-o*n-c*i,e),u=(0,p.zi)(-o*r-c*s,e);const d=l>a,h=u>a;if(d&&(l=e-l),h&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},h);BigInt(0),E.ProjectivePoint},5493(t,e,n){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o(t,e){i(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}n.d(e,{CC:()=>a,DO:()=>i,Ht:()=>o,sd:()=>s})},6606(t,e,n){"use strict";n.d(e,{Vw:()=>l,Id:()=>c,O8:()=>s,po:()=>d,Ow:()=>a,ZJ:()=>o,ld:()=>u});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=n(5493);const s=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),a=(t,e)=>t<<32-e|t>>>e;function o(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),(0,i.DO)(t),t}function c(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.DO)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}class l{clone(){return this._cloneInto()}}function u(t){const e=e=>t().update(o(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function d(t=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(t));if(r&&"function"==typeof r.randomBytes)return r.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}},235(t,e,n){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function a(t,e){i(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}n.r(e),n.d(e,{CURVE:()=>ct,Fp251:()=>Bt,MAX_VALUE:()=>W,ProjectivePoint:()=>lt,Signature:()=>ut,_poseidonMDS:()=>Rt,_starkCurve:()=>Q,computeHashOnElements:()=>St,ethSigToPrivate:()=>yt,getAccountPath:()=>bt,getPublicKey:()=>nt,getSharedSecret:()=>rt,getStarkKey:()=>gt,grindKey:()=>pt,keccak:()=>kt,normalizePrivateKey:()=>et,pedersen:()=>Tt,poseidonBasic:()=>Nt,poseidonCreate:()=>Dt,poseidonHash:()=>Pt,poseidonHashFunc:()=>Ut,poseidonHashMany:()=>Vt,poseidonHashSingle:()=>Ft,poseidonSmall:()=>Lt,sign:()=>at,utils:()=>dt,verify:()=>ot});const o=BigInt(2**32-1),c=BigInt(32);function l(t,e=!1){return e?{h:Number(t&o),l:Number(t>>c&o)}:{h:0|Number(t>>c&o),l:0|Number(t&o)}}function u(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=l(t[i],e);[n[i],r[i]]=[s,a]}return[n,r]}const d=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),h=(t,e)=>t<<32-e|t>>>e,f=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),p=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function g(t){for(let e=0;e<t.length;e++)t[e]=p(t[e])}function y(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function m(t){return"string"==typeof t&&(t=y(t)),i(t),t}class b{clone(){return this._cloneInto()}}function _(t){const e=e=>t().update(m(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const w=[],E=[],v=[],A=BigInt(0),T=BigInt(1),S=BigInt(2),I=BigInt(7),k=BigInt(256),x=BigInt(113);for(let t=0,e=T,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],w.push(2*(5*r+n)),E.push((t+1)*(t+2)/2%64);let i=A;for(let t=0;t<7;t++)e=(e<<T^(e>>I)*x)%k,e&S&&(i^=T<<(T<<BigInt(t))-T);v.push(i)}const[B,C]=u(v,!0),R=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),O=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class N extends b{constructor(t,e,n,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,r(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){f||g(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],a=n[i+1],o=R(s,a,1)^n[r],c=O(s,a,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=o,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=E[n],s=R(e,i,r),a=O(e,i,r),o=w[n];e=t[o],i=t[o+1],t[o]=s,t[o+1]=a}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=B[r],t[1]^=C[r]}n.fill(0)}(this.state32,this.rounds),f||g(this.state32),this.posOut=0,this.pos=0}update(t){s(this);const{blockLen:e,state:n}=this,r=(t=m(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){s(this,!1),i(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return r(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(a(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new N(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const D=((t,e,n)=>_(()=>new N(e,t,n)))(1,136,32),L=(t,e,n)=>t&e^~t&n,P=(t,e,n)=>t&e^t&n^e&n;class U extends b{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=d(this.buffer)}update(t){s(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=m(t)).length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const e=d(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){s(this),a(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let t=o;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const c=d(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)c.setUint32(4*t,h[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const F=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),V=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),H=new Uint32Array(64);class M extends U{constructor(){super(64,32,8,!1),this.A=0|V[0],this.B=0|V[1],this.C=0|V[2],this.D=0|V[3],this.E=0|V[4],this.F=0|V[5],this.G=0|V[6],this.H=0|V[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)H[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=H[t-15],n=H[t-2],r=h(e,7)^h(e,18)^e>>>3,i=h(n,17)^h(n,19)^n>>>10;H[t]=i+H[t-7]+r+H[t-16]|0}let{A:n,B:r,C:i,D:s,E:a,F:o,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(h(a,6)^h(a,11)^h(a,25))+L(a,o,c)+F[t]+H[t]|0,u=(h(n,2)^h(n,13)^h(n,22))+P(n,r,i)|0;l=c,c=o,o=a,a=s+e|0,s=i,i=r,r=n,n=e+u|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,s,a,o,c,l)}roundClean(){H.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $=_(()=>new M);var j=n(8030),q=n(5591),z=n(7713),Y=n(8293),G=n(1817);const K=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),W=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function Z(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,n=Y.Ph(t);return e>0?n>>BigInt(e):n}function X(t){return"string"==typeof t&&1&(t=ft(t)).length&&(t="0"+t),Y.aT(t)}const J=(0,z.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,j.D0)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:K,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,G.Z)($),bits2int:Z,bits2int_modN:t=>{const e=Y.Ph(t).toString(16);return 63===e.length&&(t=X(e+"0")),(0,j.zi)(Z(t),K)}}),Q=J;function tt(t){return Y.qj("","string"==typeof t?X(t):t)}function et(t){return Y.My(tt(t)).padStart(64,"0")}function nt(t,e=!1){return J.getPublicKey(et(t),e)}function rt(t,e){return J.getSharedSecret(et(t),e)}function it(t){const{r:e,s:n}=t;if(e<0n||e>=W)throw new Error(`Signature.r should be [1, ${W})`);const r=(0,j.B8)(n,K);if(r<0n||r>=W)throw new Error(`inv(Signature.s) should be [1, ${W})`)}function st(t){const e=tt(t);if(Y.Ph(e)>=W)throw new Error(`msgHash should be [0, ${W})`);return e}function at(t,e,n){const r=J.sign(st(t),et(e),n);return it(r),r}function ot(t,e,n){if(!(t instanceof ut)){const e=tt(t);try{t=ut.fromDER(e)}catch(n){if(!(n instanceof z.DER.Err))throw n;t=ut.fromCompact(e)}}return it(t),J.verify(t,st(e),tt(n))}const{CURVE:ct,ProjectivePoint:lt,Signature:ut,utils:dt}=J;function ht(t){return`0x${Y.My(t.subarray(1)).replace(/^0+/gm,"")}`}function ft(t){return t.replace(/^0x/i,"")}function pt(t){const e=tt(t),n=2n**256n,r=n-(0,j.zi)(n,K);for(let t=0;;t++){const n=xt(Y.Id(e,Y.IV(BigInt(t))));if(n<r)return(0,j.zi)(n,K).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function gt(t){return ht(nt(t,!0))}function yt(t){if(130!==(t=ft(t)).length)throw new Error("Wrong ethereum signature");return pt(t.substring(0,64))}const mt=t=>Number(2147483647n&t);function bt(t,e,n,r){const i=mt(xt(t)),s=mt(xt(e)),a=Y.ME(ft(n));return`m/2645'/${i}'/${s}'/${mt(a)}'/${mt(a>>31n)}'/${r}`}const _t=[new lt(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new lt(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new lt(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new lt(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new lt(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function wt(t,e){const n=[];let r=t;for(let t=0;t<248;t++)n.push(r),r=r.double();r=e;for(let t=0;t<4;t++)n.push(r),r=r.double();return n}const Et=wt(_t[1],_t[2]),vt=wt(_t[3],_t[4]);function At(t,e,n){let r=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=Y.Ph(tt(t));if(!(0n<=e&&e<J.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const i=n[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&r)&&(t=t.add(i)),r>>=1n}return t}function Tt(t,e){let n=_t[0];return n=At(n,t,Et),n=At(n,e,vt),ht(n.toRawBytes(!0))}const St=(t,e=Tt)=>[0,...t,t.length].reduce((t,n)=>e(t,n)),It=Y.OG(250),kt=t=>Y.Ph(D(t))&It,xt=t=>Y.Ph($(t)),Bt=(0,j.D0)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Ct(t,e,n){const r=t.fromBytes($(y(`${e}${n}`)));return t.create(r)}function Rt(t,e,n,r=0){const i=[],s=[];for(let a=0;a<n;a++)i.push(Ct(t,`${e}x`,r*n+a)),s.push(Ct(t,`${e}y`,r*n+a));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(e=>s.map(n=>t.inv(t.sub(e,n))))}const Ot=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function Nt(t,e){if((0,j.jr)(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<r;e++){const r=[];for(let i=0;i<n;i++)r.push(Ct(t.Fp,"Hades",n*e+i));i.push(r)}const s=(0,q.poseidon)({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function Dt(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return Nt(t,Rt(t.Fp,"HadesMDS",n,e))}const Lt=Nt({Fp:Bt,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Ot);function Pt(t,e,n=Lt){return n([t,e,2n])[0]}function Ut(t,e,n=Lt){return Y.IV(Pt(Y.Ph(t),Y.Ph(e),n))}function Ft(t,e=Lt){return e([t,0n,1n])[0]}function Vt(t,e=Lt){const{m:n,rate:r}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const i=Array.from(t);for(i.push(1n);i.length%r!==0;)i.push(0n);let s=new Array(n).fill(0n);for(let t=0;t<i.length;t+=r){for(let e=0;e<r;e++){const n=i[t+e];if(void 0===n)throw new Error("invalid index");if(void 0===s[e])throw new Error("state[j] is undefined");s[e]=s[e]+n}s=e(s)}return s[0]}},4302(t,e,n){"use strict";n.d(e,{$k:()=>f,$q:()=>O,If:()=>R,MI:()=>r,QY:()=>c,R8:()=>E,RF:()=>v,Sq:()=>N,Tj:()=>A,Tk:()=>i,Tw:()=>_,WY:()=>L,_K:()=>h,bG:()=>y,dT:()=>l,en:()=>C,f0:()=>p,hK:()=>U,i3:()=>S,jT:()=>s,lp:()=>m,mR:()=>g,nW:()=>a,oZ:()=>d,om:()=>P,pf:()=>u,rr:()=>b,sI:()=>B,sm:()=>w,sv:()=>D,u7:()=>I,vZ:()=>T,vn:()=>x,wV:()=>k,ze:()=>o});const r="ACCEPTED_ON_L2",i="ACCEPTED_ON_L1",s="SUCCEEDED",a="REVERTED",o="PENDING",c="REJECTED",l="RECEIVED",u="DECLARE",d="DEPLOY",h="DEPLOY_ACCOUNT",f="INVOKE",p="L1_HANDLER",g="struct",y="event",m="function",b="constructor",_="l1_handler",w="enum",E="view",v="external",A="WEI",T="FRI",S={BLOB:"BLOB",CALLDATA:"CALLDATA"},I={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},k={DECLARE:u,DEPLOY:d,DEPLOY_ACCOUNT:h,INVOKE:f,L1_HANDLER:p},x={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},B={RECEIVED:l,REJECTED:c,ACCEPTED_ON_L2:r,ACCEPTED_ON_L1:i},C={ACCEPTED_ON_L2:r,ACCEPTED_ON_L1:i},R={SUCCEEDED:s,REVERTED:a},O={LATEST:"latest",PENDING:"pending"},N={L1:"L1",L2:"L2"},D={L1:0,L2:1},L={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},P={V0:L.V0,V1:L.V1,V2:L.V2,F0:L.F0,F1:L.F1,F2:L.F2},U={V3:L.V3,F3:L.F3}},9321(t,e,n){"use strict";n.r(e),n.d(e,{ABI_TYPE_CONSTRUCTOR:()=>a.rr,ABI_TYPE_ENUM:()=>a.sm,ABI_TYPE_FUNCTION:()=>a.lp,ABI_TYPE_L1_HANDLER:()=>a.Tw,API:()=>i,CALL_TYPE:()=>a.u7,CONTRACT:()=>r,EBlockTag:()=>a.$q,EDAMode:()=>a.sv,EDataAvailabilityMode:()=>a.Sq,ESimulationFlag:()=>a.vn,ETransactionExecutionStatus:()=>a.If,ETransactionFinalityStatus:()=>a.en,ETransactionStatus:()=>a.sI,ETransactionType:()=>a.wV,ETransactionVersion:()=>a.WY,ETransactionVersion2:()=>a.om,ETransactionVersion3:()=>a.hK,EVENT_ABI_TYPE:()=>a.bG,L1_DA_MODE:()=>a.i3,PAYMASTER_API:()=>l,PRICE_UNIT_FRI:()=>a.vZ,PRICE_UNIT_WEI:()=>a.Tj,Permission:()=>o,STATE_MUTABILITY_EXTERNAL:()=>a.RF,STATE_MUTABILITY_VIEW:()=>a.R8,STATUS_ACCEPTED_ON_L1:()=>a.Tk,STATUS_ACCEPTED_ON_L2:()=>a.MI,STATUS_PENDING:()=>a.ze,STATUS_RECEIVED:()=>a.dT,STATUS_REJECTED:()=>a.QY,STATUS_REVERTED:()=>a.nW,STATUS_SUCCEEDED:()=>a.jT,STRUCT_ABI_TYPE:()=>a.mR,TXN_TYPE_DECLARE:()=>a.pf,TXN_TYPE_DEPLOY:()=>a.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>a._K,TXN_TYPE_INVOKE:()=>a.$k,TXN_TYPE_L1_HANDLER:()=>a.f0,TypedDataRevision:()=>c,WALLET_API:()=>s});var r={};n.r(r);var i={};n.r(i),n.d(i,{ABI_TYPE_CONSTRUCTOR:()=>a.rr,ABI_TYPE_ENUM:()=>a.sm,ABI_TYPE_FUNCTION:()=>a.lp,ABI_TYPE_L1_HANDLER:()=>a.Tw,CALL_TYPE:()=>a.u7,CONTRACT:()=>r,EBlockTag:()=>a.$q,EDAMode:()=>a.sv,EDataAvailabilityMode:()=>a.Sq,ESimulationFlag:()=>a.vn,ETransactionExecutionStatus:()=>a.If,ETransactionFinalityStatus:()=>a.en,ETransactionStatus:()=>a.sI,ETransactionType:()=>a.wV,ETransactionVersion:()=>a.WY,ETransactionVersion2:()=>a.om,ETransactionVersion3:()=>a.hK,EVENT_ABI_TYPE:()=>a.bG,L1_DA_MODE:()=>a.i3,PRICE_UNIT_FRI:()=>a.vZ,PRICE_UNIT_WEI:()=>a.Tj,STATE_MUTABILITY_EXTERNAL:()=>a.RF,STATE_MUTABILITY_VIEW:()=>a.R8,STATUS_ACCEPTED_ON_L1:()=>a.Tk,STATUS_ACCEPTED_ON_L2:()=>a.MI,STATUS_PENDING:()=>a.ze,STATUS_RECEIVED:()=>a.dT,STATUS_REJECTED:()=>a.QY,STATUS_REVERTED:()=>a.nW,STATUS_SUCCEEDED:()=>a.jT,STRUCT_ABI_TYPE:()=>a.mR,TXN_TYPE_DECLARE:()=>a.pf,TXN_TYPE_DEPLOY:()=>a.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>a._K,TXN_TYPE_INVOKE:()=>a.$k,TXN_TYPE_L1_HANDLER:()=>a.f0});var s={};n.r(s),n.d(s,{Permission:()=>o,TypedDataRevision:()=>c});var a=n(4302);const o={ACCOUNTS:"accounts"},c={ACTIVE:"1",LEGACY:"0"};var l=n(1605)},1605(t,e,n){"use strict";n.r(e)},591(t,e,n){"use strict";n.d(e,{$k:()=>p,$q:()=>N,D6:()=>D,If:()=>O,MI:()=>r,R8:()=>v,RF:()=>A,Sq:()=>L,Tj:()=>T,Tk:()=>i,Tw:()=>w,WY:()=>U,Z9:()=>l,ZU:()=>u,_K:()=>f,bG:()=>m,dT:()=>o,en:()=>R,f0:()=>g,hK:()=>V,i3:()=>I,jT:()=>s,lp:()=>b,mR:()=>y,nW:()=>a,oZ:()=>h,om:()=>F,pf:()=>d,rr:()=>_,sI:()=>C,sm:()=>E,sv:()=>P,u7:()=>k,vZ:()=>S,vn:()=>B,wV:()=>x,x:()=>c});const r="ACCEPTED_ON_L2",i="ACCEPTED_ON_L1",s="SUCCEEDED",a="REVERTED",o="RECEIVED",c="CANDIDATE",l="PRE_CONFIRMED",u=l.toLowerCase(),d="DECLARE",h="DEPLOY",f="DEPLOY_ACCOUNT",p="INVOKE",g="L1_HANDLER",y="struct",m="event",b="function",_="constructor",w="l1_handler",E="enum",v="view",A="external",T="WEI",S="FRI",I={BLOB:"BLOB",CALLDATA:"CALLDATA"},k={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},x={DECLARE:d,DEPLOY:h,DEPLOY_ACCOUNT:f,INVOKE:p,L1_HANDLER:g},B={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},C={RECEIVED:o,CANDIDATE:c,PRE_CONFIRMED:l,ACCEPTED_ON_L2:r,ACCEPTED_ON_L1:i},R={PRE_CONFIRMED:l,ACCEPTED_ON_L2:r,ACCEPTED_ON_L1:i},O={SUCCEEDED:s,REVERTED:a},N={LATEST:"latest",PRE_CONFIRMED:u,L1_ACCEPTED:"l1_accepted"},D={PRE_CONFIRMED:l,ACCEPTED_ON_L2:r,ACCEPTED_ON_L1:i},L={L1:"L1",L2:"L2"},P={L1:0,L2:1},U={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},F={V0:U.V0,V1:U.V1,V2:U.V2,F0:U.F0,F1:U.F1,F2:U.F2},V={V3:U.V3,F3:U.F3}},1809(t,e,n){"use strict";n.r(e),n.d(e,{ABI_TYPE_CONSTRUCTOR:()=>o.rr,ABI_TYPE_ENUM:()=>o.sm,ABI_TYPE_FUNCTION:()=>o.lp,ABI_TYPE_L1_HANDLER:()=>o.Tw,API:()=>i,CALL_TYPE:()=>o.u7,CONTRACT:()=>r,EBlockStatus:()=>o.D6,EBlockTag:()=>o.$q,EDAMode:()=>o.sv,EDataAvailabilityMode:()=>o.Sq,ESimulationFlag:()=>o.vn,ETransactionExecutionStatus:()=>o.If,ETransactionFinalityStatus:()=>o.en,ETransactionStatus:()=>o.sI,ETransactionType:()=>o.wV,ETransactionVersion:()=>o.WY,ETransactionVersion2:()=>o.om,ETransactionVersion3:()=>o.hK,EVENT_ABI_TYPE:()=>o.bG,L1_DA_MODE:()=>o.i3,PAYMASTER_API:()=>a,PRICE_UNIT_FRI:()=>o.vZ,PRICE_UNIT_WEI:()=>o.Tj,Permission:()=>c,STATE_MUTABILITY_EXTERNAL:()=>o.RF,STATE_MUTABILITY_VIEW:()=>o.R8,STATUS_ACCEPTED_ON_L1:()=>o.Tk,STATUS_ACCEPTED_ON_L2:()=>o.MI,STATUS_CANDIDATE:()=>o.x,STATUS_PRE_CONFIRMED:()=>o.Z9,STATUS_PRE_CONFIRMED_LOWERCASE:()=>o.ZU,STATUS_RECEIVED:()=>o.dT,STATUS_REVERTED:()=>o.nW,STATUS_SUCCEEDED:()=>o.jT,STRUCT_ABI_TYPE:()=>o.mR,TXN_TYPE_DECLARE:()=>o.pf,TXN_TYPE_DEPLOY:()=>o.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>o._K,TXN_TYPE_INVOKE:()=>o.$k,TXN_TYPE_L1_HANDLER:()=>o.f0,TypedDataRevision:()=>l,WALLET_API:()=>s});var r={};n.r(r);var i={};n.r(i),n.d(i,{ABI_TYPE_CONSTRUCTOR:()=>o.rr,ABI_TYPE_ENUM:()=>o.sm,ABI_TYPE_FUNCTION:()=>o.lp,ABI_TYPE_L1_HANDLER:()=>o.Tw,CALL_TYPE:()=>o.u7,CONTRACT:()=>r,EBlockStatus:()=>o.D6,EBlockTag:()=>o.$q,EDAMode:()=>o.sv,EDataAvailabilityMode:()=>o.Sq,ESimulationFlag:()=>o.vn,ETransactionExecutionStatus:()=>o.If,ETransactionFinalityStatus:()=>o.en,ETransactionStatus:()=>o.sI,ETransactionType:()=>o.wV,ETransactionVersion:()=>o.WY,ETransactionVersion2:()=>o.om,ETransactionVersion3:()=>o.hK,EVENT_ABI_TYPE:()=>o.bG,L1_DA_MODE:()=>o.i3,PRICE_UNIT_FRI:()=>o.vZ,PRICE_UNIT_WEI:()=>o.Tj,STATE_MUTABILITY_EXTERNAL:()=>o.RF,STATE_MUTABILITY_VIEW:()=>o.R8,STATUS_ACCEPTED_ON_L1:()=>o.Tk,STATUS_ACCEPTED_ON_L2:()=>o.MI,STATUS_CANDIDATE:()=>o.x,STATUS_PRE_CONFIRMED:()=>o.Z9,STATUS_PRE_CONFIRMED_LOWERCASE:()=>o.ZU,STATUS_RECEIVED:()=>o.dT,STATUS_REVERTED:()=>o.nW,STATUS_SUCCEEDED:()=>o.jT,STRUCT_ABI_TYPE:()=>o.mR,TXN_TYPE_DECLARE:()=>o.pf,TXN_TYPE_DEPLOY:()=>o.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>o._K,TXN_TYPE_INVOKE:()=>o.$k,TXN_TYPE_L1_HANDLER:()=>o.f0});var s={};n.r(s),n.d(s,{Permission:()=>c,TypedDataRevision:()=>l});var a={};n.r(a);var o=n(591);const c={ACCOUNTS:"accounts"},l={ACTIVE:"1",LEGACY:"0"}},4123(t,e,n){"use strict";function r(t){return i.test(t)}n.d(e,{Fq:()=>r,qg:()=>f,z3:()=>d,As:()=>z});const i=/^-?[0-9]+$/;function s(t){return a.test(t)}const a=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;let o=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function c(t){const{start:e,end:n}=function(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let n=t.lastIndexOf("e");for(-1===n&&(n=t.lastIndexOf("E")),-1===n&&(n=t.length);("0"===t[n-1]||"."===t[n-1])&&n>e;)n--;return{start:e,end:n}}(t),r=t.substring(e,n),i=r.indexOf(".");return-1===i?r:r.substring(0,i)+r.substring(i+1)}class l{isLosslessNumber=!0;constructor(t){if(!s(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=function(t){if(function(t){if(r(t))return Number.isSafeInteger(Number.parseInt(t,10));const e=Number.parseFloat(t),n=String(e);if(t===n)return!0;return c(t)===c(n)}(t))return;if(r(t))return o.truncate_integer;const e=Number.parseFloat(t);return Number.isFinite(e)?0===e?o.underflow:o.truncate_float:o.overflow}(this.value);if(void 0===t||t===o.truncate_float)return Number.parseFloat(this.value);if(r(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function u(t){return new l(t)}function d(t){return r(t)?BigInt(t):Number.parseFloat(t)}function h(t,e,n,r){return Array.isArray(n)?r.call(t,e,function(t,e){for(let n=0;n<t.length;n++)t[n]=h(t,String(n),t[n],e);return t}(n,r)):n&&"object"==typeof n&&!function(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}(n)?r.call(t,e,function(t,e){for(const n of Object.keys(t)){const r=h(t,n,t[n],e);void 0!==r?t[n]=r:delete t[n]}return t}(n,r)):r.call(t,e,n)}function f(t,e,n){const r="function"==typeof n?{parseNumber:n}:n,i=r?.parseNumber??u,s=r?.onDuplicateKey??function(t){let{key:e,position:n}=t;throw new SyntaxError(`Duplicate key '${e}' encountered at position ${n}`)};let a=0;const o=c();return function(t){if(void 0===t)throw new SyntaxError(`JSON value expected ${Y()}`)}(o),function(){if(a<t.length)throw new SyntaxError(`Expected end of input ${Y()}`)}(),e?function(t,e){return h({"":t},"",t,e)}(o,e):o;function c(){d();const e=f()??function(){const e=a;if(t.charCodeAt(a)===O&&(a++,x(e)),t.charCodeAt(a)===N)a++;else if((n=t.charCodeAt(a))>=D&&n<=L)for(a++;y(t.charCodeAt(a));)a++;var n;if(t.charCodeAt(a)===U)for(a++,x(e);y(t.charCodeAt(a));)a++;if(t.charCodeAt(a)===$||t.charCodeAt(a)===M)for(a++,t.charCodeAt(a)!==O&&t.charCodeAt(a)!==R||a++,x(e);y(t.charCodeAt(a));)a++;if(a>e)return i(t.slice(e,a))}()??function(){if(t.charCodeAt(a)===v){a++,d();const e={};let n=!0;for(;a<t.length&&t.charCodeAt(a)!==A;){n?n=!1:(_(),d());const t=a,r=f();if(void 0===r)return void B();d(),I();const i=c();if(void 0===i)return void j();if(Object.prototype.hasOwnProperty.call(e,r)&&!b(i,e[r])){const n=s({key:r,position:t+1,oldValue:e[r],newValue:i});void 0!==n&&(e[r]=n)}else e[r]=i}return t.charCodeAt(a)!==A&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${Y()}`)}(),a++,e}}()??function(){if(t.charCodeAt(a)===T){a++,d();const e=[];let n=!0;for(;a<t.length&&t.charCodeAt(a)!==S;){n?n=!1:_();const t=c();k(t),e.push(t)}return t.charCodeAt(a)!==S&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${Y()}`)}(),a++,e}}()??l("true",!0)??l("false",!1)??l("null",null);return d(),e}function l(e,n){if(t.slice(a,a+e.length)===e)return a+=e.length,n}function d(){for(;p(t.charCodeAt(a));)a++}function f(){if(t.charCodeAt(a)===C){a++;let e="";for(;a<t.length&&t.charCodeAt(a)!==C;){if(t.charCodeAt(a)===E){const n=t[a+1],r=w[n];void 0!==r?(e+=r,a++):"u"===n?g(t.charCodeAt(a+2))&&g(t.charCodeAt(a+3))&&g(t.charCodeAt(a+4))&&g(t.charCodeAt(a+5))?(e+=String.fromCharCode(Number.parseInt(t.slice(a+2,a+6),16)),a+=5):q(a):H(a)}else m(t.charCodeAt(a))?e+=t[a]:V(t[a]);a++}return function(){if(t.charCodeAt(a)!==C)throw new SyntaxError(`End of string '"' expected ${Y()}`)}(),a++,e}}function _(){if(t.charCodeAt(a)!==P)throw new SyntaxError(`Comma ',' expected after value ${Y()}`);a++}function I(){if(t.charCodeAt(a)!==F)throw new SyntaxError(`Colon ':' expected after property name ${Y()}`);a++}function k(t){if(void 0===t)throw new SyntaxError(`Array item expected ${Y()}`)}function x(e){if(!y(t.charCodeAt(a))){const n=t.slice(e,a);throw new SyntaxError(`Invalid number '${n}', expecting a digit ${Y()}`)}}function B(){throw new SyntaxError(`Quoted object key expected ${Y()}`)}function V(t){throw new SyntaxError(`Invalid character '${t}' ${z()}`)}function H(e){const n=t.slice(e,e+2);throw new SyntaxError(`Invalid escape character '${n}' ${z()}`)}function j(){throw new SyntaxError(`Object value expected after ':' ${z()}`)}function q(e){const n=t.slice(e,e+6);throw new SyntaxError(`Invalid unicode character '${n}' ${z()}`)}function z(){return`at position ${a}`}function Y(){return`${a<t.length?`but got '${t[a]}'`:"but reached end of input"} ${z()}`}}function p(t){return t===I||t===k||t===x||t===B}function g(t){return t>=N&&t<=L||t>=V&&t<=j||t>=H&&t<=q}function y(t){return t>=N&&t<=L}function m(t){return t>=32&&t<=1114111}function b(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,n)=>b(t,e[n])):!(!_(t)||!_(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(n=>b(t[n],e[n])))}function _(t){return"object"==typeof t&&null!==t}const w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},E=92,v=123,A=125,T=91,S=93,I=32,k=10,x=9,B=13,C=34,R=43,O=45,N=48,D=49,L=57,P=44,U=46,F=58,V=65,H=97,M=69,$=101,j=70,q=102;function z(t,e,n,r){const i=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(n);return function t(o,c){if(Array.isArray(r)){const t=r.find(t=>t.test(o));if(t){const e=t.stringify(o);if("string"!=typeof e||!s(e))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${e})`);return e}}return"boolean"==typeof o||"number"==typeof o||"string"==typeof o||null===o||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String?JSON.stringify(o):o?.isLosslessNumber||"bigint"==typeof o?o.toString():Array.isArray(o)?function(n,r){if(0===n.length)return"[]";const s=i?r+i:void 0;let a=i?"[\n":"[";for(let r=0;r<n.length;r++){const o="function"==typeof e?e.call(n,String(r),n[r]):n[r];i&&(a+=s),a+=void 0!==o&&"function"!=typeof o?t(o,s):"null",r<n.length-1&&(a+=i?",\n":",")}return a+=i?`\n${r}]`:"]",a}(o,c):o&&"object"==typeof o?function(r,s){if("function"==typeof r.toJSON)return z(r.toJSON(),e,n,void 0);const o=Array.isArray(e)?e.map(String):Object.keys(r);if(0===o.length)return"{}";const c=i?s+i:void 0;let l=!0,u=i?"{\n":"{";for(const n of o){const s="function"==typeof e?e.call(r,n,r[n]):r[n];if(a(0,s)){l?l=!1:u+=i?",\n":",";const e=JSON.stringify(n);u+=i?`${c+e}: `:`${e}:`,u+=t(s,c)}}return u+=i?`\n${s}}`:"}",u}(o,c):void 0}("function"==typeof e?e.call({"":t},"",t):t,"");function a(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}}},3075(t,e,n){"use strict";function r(t){let e=t.length;for(;--e>=0;)t[e]=0}n.d(e,{Aq:()=>Tn,ZI:()=>An});const i=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);r(c);const l=new Array(60);r(l);const u=new Array(512);r(u);const d=new Array(256);r(d);const h=new Array(29);r(h);const f=new Array(30);function p(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let g,y,m;function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}r(f);const _=t=>t<256?u[t]:u[256+(t>>>7)],w=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},E=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},v=(t,e,n)=>{E(t,n[2*e],n[2*e+1])},A=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},T=(t,e,n)=>{const r=new Array(16);let i,s,a=0;for(i=1;i<=15;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=A(r[e]++,e))}},S=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},I=t=>{t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},x=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&k(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!k(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},B=(t,e,n)=>{let r,a,o,c,l=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+l++],r+=(255&t.pending_buf[t.sym_buf+l++])<<8,a=t.pending_buf[t.sym_buf+l++],0===r?v(t,a,e):(o=d[a],v(t,o+256+1,e),c=i[o],0!==c&&(a-=h[o],E(t,a,c)),r--,o=_(r),v(t,o,n),c=s[o],0!==c&&(r-=f[o],E(t,r,c)))}while(l<t.sym_next);v(t,256,e)},C=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,c,l=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):n[2*a+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)x(t,n,a);c=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],x(t,n,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,n[2*c]=n[2*a]+n[2*o],t.depth[c]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,n[2*a+1]=n[2*o+1]=c,t.heap[1]=c++,x(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<573;l++)u=t.heap[l],h=n[2*n[2*u+1]+1]+1,h>c&&(h=c,g++),n[2*u+1]=h,u>r||(t.bl_count[h]++,f=0,u>=o&&(f=a[u-o]),p=n[2*u],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[2*u+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=t.bl_count[h];0!==u;)d=t.heap[--l],d>r||(n[2*d+1]!==h&&(t.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(t,e),T(n,l,t.bl_count)},R=(t,e,n)=>{let r,i,s=-1,a=e[1],o=0,c=7,l=4;for(0===a&&(c=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++o<c&&i===a||(o<l?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},O=(t,e,n)=>{let r,i,s=-1,a=e[1],o=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++o<c&&i===a)){if(o<l)do{v(t,i,t.bl_tree)}while(0!==--o);else 0!==i?(i!==s&&(v(t,i,t.bl_tree),o--),v(t,16,t.bl_tree),E(t,o-3,2)):o<=10?(v(t,17,t.bl_tree),E(t,o-3,3)):(v(t,18,t.bl_tree),E(t,o-11,7));o=0,s=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}};let N=!1;const D=(t,e,n,r)=>{E(t,0+(r?1:0),3),I(t),w(t,n),w(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var L={_tr_init:t=>{N||((()=>{let t,e,n,r,o;const b=new Array(16);for(n=0,r=0;r<28;r++)for(h[r]=n,t=0;t<1<<i[r];t++)d[n++]=r;for(d[n-1]=r,o=0,r=0;r<16;r++)for(f[r]=o,t=0;t<1<<s[r];t++)u[o++]=r;for(o>>=7;r<30;r++)for(f[r]=o<<7,t=0;t<1<<s[r]-7;t++)u[256+o++]=r;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,b[8]++;for(;t<=255;)c[2*t+1]=9,t++,b[9]++;for(;t<=279;)c[2*t+1]=7,t++,b[7]++;for(;t<=287;)c[2*t+1]=8,t++,b[8]++;for(T(c,287,b),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=A(t,5);g=new p(c,i,257,286,15),y=new p(l,s,0,30,15),m=new p(new Array(0),a,0,19,7)})(),N=!0),t.l_desc=new b(t.dyn_ltree,g),t.d_desc=new b(t.dyn_dtree,y),t.bl_desc=new b(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},_tr_stored_block:D,_tr_flush_block:(t,e,n,r)=>{let i,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),C(t,t.l_desc),C(t,t.d_desc),a=(t=>{let e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?D(t,e,n,r):4===t.strategy||s===i?(E(t,2+(r?1:0),3),B(t,c,l)):(E(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(E(t,e-257,5),E(t,n-1,5),E(t,r-4,4),i=0;i<r;i++)E(t,t.bl_tree[2*o[i]+1],3);O(t,t.dyn_ltree,e-1),O(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),B(t,t.dyn_ltree,t.dyn_dtree)),S(t),r&&I(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(d[n]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{E(t,2,3),v(t,256,c),(t=>{16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},P=(t,e,n,r)=>{let i=65535&t,s=t>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+e[r++]|0,s=s+i|0}while(--a);i%=65521,s%=65521}return i|s<<16};const U=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var F=(t,e,n,r)=>{const i=U,s=r+n;t^=-1;for(let n=r;n<s;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:M,_tr_stored_block:$,_tr_flush_block:j,_tr_tally:q,_tr_align:z}=L,{Z_NO_FLUSH:Y,Z_PARTIAL_FLUSH:G,Z_FULL_FLUSH:K,Z_FINISH:W,Z_BLOCK:Z,Z_OK:X,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:nt,Z_FILTERED:rt,Z_HUFFMAN_ONLY:it,Z_RLE:st,Z_FIXED:at,Z_DEFAULT_STRATEGY:ot,Z_UNKNOWN:ct,Z_DEFLATED:lt}=H,ut=258,dt=262,ht=42,ft=113,pt=666,gt=(t,e)=>(t.msg=V[e],e),yt=t=>2*t-(t>4?9:0),mt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},bt=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let _t=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const wt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Et=(t,e)=>{j(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,wt(t.strm)},vt=(t,e)=>{t.pending_buf[t.pending++]=e},At=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Tt=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=P(t.adler,e,i,n):2===t.state.wrap&&(t.adler=F(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},St=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-dt?t.strstart-(t.w_size-dt):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+ut;let f=l[s+a-1],p=l[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(n=e,l[n+a]===p&&l[n+a-1]===f&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<h);if(r=ut-(h-s),s=h-ut,r>a){if(t.match_start=e,a=r,r>=o)break;f=l[s+a-1],p=l[s+a]}}}while((e=d[e&u])>c&&0!==--i);return a<=t.lookahead?a:t.lookahead},It=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-dt)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),bt(t),r+=e),0===t.strm.avail_in)break;if(n=Tt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=_t(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<dt&&0!==t.strm.avail_in)},kt=(t,e)=>{let n,r,i,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,o=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&e!==W||e===Y||n!==r+t.strm.avail_in))break;a=e===W&&n===r+t.strm.avail_in?1:0,$(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,wt(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(Tt(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==Y&&e!==W&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(Tt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,s=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=s||(r||e===W)&&e!==Y&&0===t.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=e===W&&0===t.strm.avail_in&&n===r?1:0,$(t,t.block_start,n,a),t.block_start+=n,wt(t.strm)),a?3:1)},xt=(t,e)=>{let n,r;for(;;){if(t.lookahead<dt){if(It(t),t.lookahead<dt&&e===Y)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-dt&&(t.match_length=St(t,n)),t.match_length>=3)if(r=q(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Et(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===W?(Et(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Et(t,!1),0===t.strm.avail_out)?1:2},Bt=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<dt){if(It(t),t.lookahead<dt&&e===Y)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-dt&&(t.match_length=St(t,n),t.match_length<=5&&(t.strategy===rt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=q(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Et(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=q(t,0,t.window[t.strstart-1]),r&&Et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=q(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===W?(Et(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Et(t,!1),0===t.strm.avail_out)?1:2};function Ct(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Rt=[new Ct(0,0,0,0,kt),new Ct(4,4,8,4,xt),new Ct(4,5,16,8,xt),new Ct(4,6,32,32,xt),new Ct(4,4,16,16,Bt),new Ct(8,16,32,32,Bt),new Ct(8,16,128,128,Bt),new Ct(8,32,128,256,Bt),new Ct(32,128,258,1024,Bt),new Ct(32,258,258,4096,Bt)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==ht&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ft&&e.status!==pt?1:0},Dt=t=>{if(Nt(t))return gt(t,Q);t.total_in=t.total_out=0,t.data_type=ct;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?ht:ft,t.adler=2===e.wrap?0:1,e.last_flush=-2,M(e),X},Lt=t=>{const e=Dt(t);var n;return e===X&&((n=t.state).window_size=2*n.w_size,mt(n.head),n.max_lazy_match=Rt[n.level].max_lazy,n.good_match=Rt[n.level].good_length,n.nice_match=Rt[n.level].nice_length,n.max_chain_length=Rt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Pt=(t,e,n,r,i,s)=>{if(!t)return Q;let a=1;if(e===nt&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==lt||r<8||r>15||e<0||e>9||s<0||s>at||8===r&&1!==a)return gt(t,Q);8===r&&(r=9);const o=new Ot;return t.state=o,o.strm=t,o.status=ht,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=n,Lt(t)};var Ut=Pt,Ft=(t,e)=>Nt(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,X),Vt=(t,e)=>{if(Nt(t)||e>Z||e<0)return t?gt(t,Q):Q;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===pt&&e!==W)return gt(t,0===t.avail_out?et:Q);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(wt(t),0===t.avail_out)return n.last_flush=-1,X}else if(0===t.avail_in&&yt(e)<=yt(r)&&e!==W)return gt(t,et);if(n.status===pt&&0!==t.avail_in)return gt(t,et);if(n.status===ht&&0===n.wrap&&(n.status=ft),n.status===ht){let e=lt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=it||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,At(n,e),0!==n.strstart&&(At(n,t.adler>>>16),At(n,65535&t.adler)),t.adler=1,n.status=ft,wt(t),0!==n.pending)return n.last_flush=-1,X}if(57===n.status)if(t.adler=0,vt(n,31),vt(n,139),vt(n,8),n.gzhead)vt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),vt(n,255&n.gzhead.time),vt(n,n.gzhead.time>>8&255),vt(n,n.gzhead.time>>16&255),vt(n,n.gzhead.time>>24&255),vt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),vt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(vt(n,255&n.gzhead.extra.length),vt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=F(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(vt(n,0),vt(n,0),vt(n,0),vt(n,0),vt(n,0),vt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),vt(n,3),n.status=ft,wt(t),0!==n.pending)return n.last_flush=-1,X;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=F(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,wt(t),0!==n.pending)return n.last_flush=-1,X;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=F(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=F(t.adler,n.pending_buf,n.pending-r,r)),wt(t),0!==n.pending)return n.last_flush=-1,X;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,vt(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=F(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=F(t.adler,n.pending_buf,n.pending-r,r)),wt(t),0!==n.pending)return n.last_flush=-1,X;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,vt(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=F(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(wt(t),0!==n.pending))return n.last_flush=-1,X;vt(n,255&t.adler),vt(n,t.adler>>8&255),t.adler=0}if(n.status=ft,wt(t),0!==n.pending)return n.last_flush=-1,X}if(0!==t.avail_in||0!==n.lookahead||e!==Y&&n.status!==pt){let r=0===n.level?kt(n,e):n.strategy===it?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(It(t),0===t.lookahead)){if(e===Y)return 1;break}if(t.match_length=0,n=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Et(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===W?(Et(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Et(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===st?((t,e)=>{let n,r,i,s;const a=t.window;for(;;){if(t.lookahead<=ut){if(It(t),t.lookahead<=ut&&e===Y)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=t.strstart+ut;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=ut-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=q(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Et(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===W?(Et(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Et(t,!1),0===t.strm.avail_out)?1:2})(n,e):Rt[n.level].func(n,e);if(3!==r&&4!==r||(n.status=pt),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),X;if(2===r&&(e===G?z(n):e!==Z&&($(n,0,0,!1),e===K&&(mt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),wt(t),0===t.avail_out))return n.last_flush=-1,X}return e!==W?X:n.wrap<=0?J:(2===n.wrap?(vt(n,255&t.adler),vt(n,t.adler>>8&255),vt(n,t.adler>>16&255),vt(n,t.adler>>24&255),vt(n,255&t.total_in),vt(n,t.total_in>>8&255),vt(n,t.total_in>>16&255),vt(n,t.total_in>>24&255)):(At(n,t.adler>>>16),At(n,65535&t.adler)),wt(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?X:J)},Ht=t=>{if(Nt(t))return Q;const e=t.state.status;return t.state=null,e===ft?gt(t,tt):X},Mt=(t,e)=>{let n=e.length;if(Nt(t))return Q;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==ht||r.lookahead)return Q;if(1===i&&(t.adler=P(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(mt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,It(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,It(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,r.wrap=i,X};const $t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var jt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)$t(n,e)&&(t[e]=n[e])}}return t},qt=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n};let zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){zt=!1}const Yt=new Uint8Array(256);for(let t=0;t<256;t++)Yt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Yt[254]=Yt[254]=1;var Gt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,a=t.length,o=0;for(i=0;i<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<a&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},Kt=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){s[i++]=e;continue}let a=Yt[e];if(a>4)s[i++]=65533,r+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&r<n;)e=e<<6|63&t[r++],a--;a>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(s,i)},Wt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Yt[t[n]]>e?n:e},Zt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xt=Object.prototype.toString,{Z_NO_FLUSH:Jt,Z_SYNC_FLUSH:Qt,Z_FULL_FLUSH:te,Z_FINISH:ee,Z_OK:ne,Z_STREAM_END:re,Z_DEFAULT_COMPRESSION:ie,Z_DEFAULT_STRATEGY:se,Z_DEFLATED:ae}=H;function oe(t){this.options=jt({level:ie,method:ae,chunkSize:16384,windowBits:15,memLevel:8,strategy:se},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zt,this.strm.avail_out=0;let n=Ut(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==ne)throw new Error(V[n]);if(e.header&&Ft(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Gt(e.dictionary):"[object ArrayBuffer]"===Xt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Mt(this.strm,t),n!==ne)throw new Error(V[n]);this._dict_set=!0}}function ce(t,e){const n=new oe(e);if(n.push(t,!0),n.err)throw n.msg||V[n.err];return n.result}oe.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ee:Jt,"string"==typeof t?n.input=Gt(t):"[object ArrayBuffer]"===Xt.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Qt||s===te)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Vt(n,s),i===re)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ht(this.strm),this.onEnd(i),this.ended=!0,i===ne;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},oe.prototype.onData=function(t){this.chunks.push(t)},oe.prototype.onEnd=function(t){t===ne&&(this.result=qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var le={Deflate:oe,deflate:ce,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ce(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ce(t,e)},constants:H};const ue=16209;var de=function(t,e){let n,r,i,s,a,o,c,l,u,d,h,f,p,g,y,m,b,_,w,E,v,A,T,S;const I=t.state;n=t.next_in,T=t.input,r=n+(t.avail_in-5),i=t.next_out,S=t.output,s=i-(e-t.avail_out),a=i+(t.avail_out-257),o=I.dmax,c=I.wsize,l=I.whave,u=I.wnext,d=I.window,h=I.hold,f=I.bits,p=I.lencode,g=I.distcode,y=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=p[h&y];e:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,0===_)S[i++]=65535&b;else{if(!(16&_)){if(64&_){if(32&_){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=ue;break t}b=p[(65535&b)+(h&(1<<_)-1)];continue e}for(w=65535&b,_&=15,_&&(f<_&&(h+=T[n++]<<f,f+=8),w+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=g[h&m];;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,16&_){if(E=65535&b,_&=15,f<_&&(h+=T[n++]<<f,f+=8,f<_&&(h+=T[n++]<<f,f+=8)),E+=h&(1<<_)-1,E>o){t.msg="invalid distance too far back",I.mode=ue;break t}if(h>>>=_,f-=_,_=i-s,E>_){if(_=E-_,_>l&&I.sane){t.msg="invalid distance too far back",I.mode=ue;break t}if(v=0,A=d,0===u){if(v+=c-_,_<w){w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}}else if(u<_){if(v+=c+u-_,_-=u,_<w){w-=_;do{S[i++]=d[v++]}while(--_);if(v=0,u<w){_=u,w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}}}else if(v+=u-_,_<w){w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}for(;w>2;)S[i++]=A[v++],S[i++]=A[v++],S[i++]=A[v++],w-=3;w&&(S[i++]=A[v++],w>1&&(S[i++]=A[v++]))}else{v=i-E;do{S[i++]=S[v++],S[i++]=S[v++],S[i++]=S[v++],w-=3}while(w>2);w&&(S[i++]=S[v++],w>1&&(S[i++]=S[v++]))}break}if(64&_){t.msg="invalid distance code",I.mode=ue;break t}b=g[(65535&b)+(h&(1<<_)-1)]}}break}}while(n<r&&i<a);w=f>>3,n-=w,f-=w<<3,h&=(1<<f)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<a?a-i+257:257-(i-a),I.hold=h,I.bits=f};const he=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ge=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ye=(t,e,n,r,i,s,a,o)=>{const c=o.bits;let l,u,d,h,f,p,g=0,y=0,m=0,b=0,_=0,w=0,E=0,v=0,A=0,T=0,S=null;const I=new Uint16Array(16),k=new Uint16Array(16);let x,B,C,R=null;for(g=0;g<=15;g++)I[g]=0;for(y=0;y<r;y++)I[e[n+y]]++;for(_=c,b=15;b>=1&&0===I[b];b--);if(_>b&&(_=b),0===b)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(m=1;m<b&&0===I[m];m++);for(_<m&&(_=m),v=1,g=1;g<=15;g++)if(v<<=1,v-=I[g],v<0)return-1;if(v>0&&(0===t||1!==b))return-1;for(k[1]=0,g=1;g<15;g++)k[g+1]=k[g]+I[g];for(y=0;y<r;y++)0!==e[n+y]&&(a[k[e[n+y]]++]=y);if(0===t?(S=R=a,p=20):1===t?(S=he,R=fe,p=257):(S=pe,R=ge,p=0),T=0,y=0,g=m,f=s,w=_,E=0,d=-1,A=1<<_,h=A-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){x=g-E,a[y]+1<p?(B=0,C=a[y]):a[y]>=p?(B=R[a[y]-p],C=S[a[y]-p]):(B=96,C=0),l=1<<g-E,u=1<<w,m=u;do{u-=l,i[f+(T>>E)+u]=x<<24|B<<16|C}while(0!==u);for(l=1<<g-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,y++,0===--I[g]){if(g===b)break;g=e[n+a[y]]}if(g>_&&(T&h)!==d){for(0===E&&(E=_),f+=m,w=g-E,v=1<<w;w+E<b&&(v-=I[w+E],!(v<=0));)w++,v<<=1;if(A+=1<<w,1===t&&A>852||2===t&&A>592)return 1;d=T&h,i[d]=_<<24|w<<16|f-s}}return 0!==T&&(i[f+T]=g-E<<24|64<<16),o.bits=_,0};const{Z_FINISH:me,Z_BLOCK:be,Z_TREES:_e,Z_OK:we,Z_STREAM_END:Ee,Z_NEED_DICT:ve,Z_STREAM_ERROR:Ae,Z_DATA_ERROR:Te,Z_MEM_ERROR:Se,Z_BUF_ERROR:Ie,Z_DEFLATED:ke}=H,xe=16180,Be=16190,Ce=16191,Re=16192,Oe=16194,Ne=16199,De=16200,Le=16206,Pe=16209,Ue=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Fe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ve=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<xe||e.mode>16211?1:0},He=t=>{if(Ve(t))return Ae;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=xe,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,we},Me=t=>{if(Ve(t))return Ae;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,He(t)},$e=(t,e)=>{let n;if(Ve(t))return Ae;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ae:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Me(t))},je=(t,e)=>{if(!t)return Ae;const n=new Fe;t.state=n,n.strm=t,n.window=null,n.mode=xe;const r=$e(t,e);return r!==we&&(t.state=null),r};let qe,ze,Ye=!0;const Ge=t=>{if(Ye){qe=new Int32Array(512),ze=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ye(1,t.lens,0,288,qe,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ye(2,t.lens,0,32,ze,0,t.work,{bits:5}),Ye=!1}t.lencode=qe,t.lenbits=9,t.distcode=ze,t.distbits=5},Ke=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var We=Me,Ze=je,Xe=(t,e)=>{let n,r,i,s,a,o,c,l,u,d,h,f,p,g,y,m,b,_,w,E,v,A,T=0;const S=new Uint8Array(4);let I,k;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ve(t)||!t.output||!t.input&&0!==t.avail_in)return Ae;n=t.state,n.mode===Ce&&(n.mode=Re),a=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,l=n.hold,u=n.bits,d=o,h=c,A=we;t:for(;;)switch(n.mode){case xe:if(0===n.wrap){n.mode=Re;break}for(;u<16;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&l,S[1]=l>>>8&255,n.check=F(n.check,S,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=Pe;break}if((15&l)!==ke){t.msg="unknown compression method",n.mode=Pe;break}if(l>>>=4,u-=4,v=8+(15&l),0===n.wbits&&(n.wbits=v),v>15||v>n.wbits){t.msg="invalid window size",n.mode=Pe;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&l?16189:Ce,l=0,u=0;break;case 16181:for(;u<16;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==ke){t.msg="unknown compression method",n.mode=Pe;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Pe;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=F(n.check,S,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,n.check=F(n.check,S,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=F(n.check,S,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(S[0]=255&l,S[1]=l>>>8&255,n.check=F(n.check,S,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(v=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),v)),512&n.flags&&4&n.wrap&&(n.check=F(n.check,r,f,s)),o-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;f=0;do{v=r[s+f++],n.head&&v&&n.length<65536&&(n.head.name+=String.fromCharCode(v))}while(v&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=F(n.check,r,f,s)),o-=f,s+=f,v)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;f=0;do{v=r[s+f++],n.head&&v&&n.length<65536&&(n.head.comment+=String.fromCharCode(v))}while(v&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=F(n.check,r,f,s)),o-=f,s+=f,v)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Pe;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ce;break;case 16189:for(;u<32;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}t.adler=n.check=Ue(l),l=0,u=0,n.mode=Be;case Be:if(0===n.havedict)return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=l,n.bits=u,ve;t.adler=n.check=1,n.mode=Ce;case Ce:if(e===be||e===_e)break t;case Re:if(n.last){l>>>=7&u,u-=7&u,n.mode=Le;break}for(;u<3;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(Ge(n),n.mode=Ne,e===_e){l>>>=2,u-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Pe}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Pe;break}if(n.length=65535&l,l=0,u=0,n.mode=Oe,e===_e)break t;case Oe:n.mode=16195;case 16195:if(f=n.length,f){if(f>o&&(f=o),f>c&&(f=c),0===f)break t;i.set(r.subarray(s,s+f),a),o-=f,s+=f,c-=f,a+=f,n.length-=f;break}n.mode=Ce;break;case 16196:for(;u<14;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Pe;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.lens[x[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},A=ye(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid code lengths set",n.mode=Pe;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[l&(1<<n.lenbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=u);){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(b<16)l>>>=y,u-=y,n.lens[n.have++]=b;else{if(16===b){for(k=y+2;u<k;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(l>>>=y,u-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=Pe;break}v=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===b){for(k=y+3;u<k;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}l>>>=y,u-=y,v=0,f=3+(7&l),l>>>=3,u-=3}else{for(k=y+7;u<k;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}l>>>=y,u-=y,v=0,f=11+(127&l),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Pe;break}for(;f--;)n.lens[n.have++]=v}}if(n.mode===Pe)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Pe;break}if(n.lenbits=9,I={bits:n.lenbits},A=ye(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid literal/lengths set",n.mode=Pe;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},A=ye(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,A){t.msg="invalid distances set",n.mode=Pe;break}if(n.mode=Ne,e===_e)break t;case Ne:n.mode=De;case De:if(o>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=l,n.bits=u,de(t,h),a=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,o=t.avail_in,l=n.hold,u=n.bits,n.mode===Ce&&(n.back=-1);break}for(n.back=0;T=n.lencode[l&(1<<n.lenbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=u);){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(m&&!(240&m)){for(_=y,w=m,E=b;T=n.lencode[E+((l&(1<<_+w)-1)>>_)],y=T>>>24,m=T>>>16&255,b=65535&T,!(_+y<=u);){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=y,u-=y,n.back+=y,n.length=b,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Ce;break}if(64&m){t.msg="invalid literal/length code",n.mode=Pe;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;u<k;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[l&(1<<n.distbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=u);){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(!(240&m)){for(_=y,w=m,E=b;T=n.distcode[E+((l&(1<<_+w)-1)>>_)],y=T>>>24,m=T>>>16&255,b=65535&T,!(_+y<=u);){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}l>>>=_,u-=_,n.back+=_}if(l>>>=y,u-=y,n.back+=y,64&m){t.msg="invalid distance code",n.mode=Pe;break}n.offset=b,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;u<k;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Pe;break}n.mode=16204;case 16204:if(0===c)break t;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Pe;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=i,p=a-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[a++]=g[p++]}while(--f);0===n.length&&(n.mode=De);break;case 16205:if(0===c)break t;i[a++]=n.length,c--,n.mode=De;break;case Le:if(n.wrap){for(;u<32;){if(0===o)break t;o--,l|=r[s++]<<u,u+=8}if(h-=c,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?F(n.check,i,h,a-h):P(n.check,i,h,a-h)),h=c,4&n.wrap&&(n.flags?l:Ue(l))!==n.check){t.msg="incorrect data check",n.mode=Pe;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break t;o--,l+=r[s++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Pe;break}l=0,u=0}n.mode=16208;case 16208:A=Ee;break t;case Pe:A=Te;break t;case 16210:return Se;default:return Ae}return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,n.hold=l,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<Pe&&(n.mode<Le||e!==me))&&Ke(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?F(n.check,i,h,t.next_out-h):P(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ce?128:0)+(n.mode===Ne||n.mode===Oe?256:0),(0===d&&0===h||e===me)&&A===we&&(A=Ie),A},Je=t=>{if(Ve(t))return Ae;let e=t.state;return e.window&&(e.window=null),t.state=null,we},Qe=(t,e)=>{if(Ve(t))return Ae;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,we):Ae},tn=(t,e)=>{const n=e.length;let r,i,s;return Ve(t)?Ae:(r=t.state,0!==r.wrap&&r.mode!==Be?Ae:r.mode===Be&&(i=1,i=P(i,e,n,0),i!==r.check)?Te:(s=Ke(t,e,n,n),s?(r.mode=16210,Se):(r.havedict=1,we)))},en=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const nn=Object.prototype.toString,{Z_NO_FLUSH:rn,Z_FINISH:sn,Z_OK:an,Z_STREAM_END:on,Z_NEED_DICT:cn,Z_STREAM_ERROR:ln,Z_DATA_ERROR:un,Z_MEM_ERROR:dn}=H;function hn(t){this.options=jt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zt,this.strm.avail_out=0;let n=Ze(this.strm,e.windowBits);if(n!==an)throw new Error(V[n]);if(this.header=new en,Qe(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Gt(e.dictionary):"[object ArrayBuffer]"===nn.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=tn(this.strm,e.dictionary),n!==an)))throw new Error(V[n])}function fn(t,e){const n=new hn(e);if(n.push(t),n.err)throw n.msg||V[n.err];return n.result}hn.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?sn:rn,"[object ArrayBuffer]"===nn.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Xe(n,a),s===cn&&i&&(s=tn(n,i),s===an?s=Xe(n,a):s===un&&(s=cn));n.avail_in>0&&s===on&&n.state.wrap>0&&0!==t[n.next_in];)We(n),s=Xe(n,a);switch(s){case ln:case un:case cn:case dn:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===on))if("string"===this.options.to){let t=Wt(n.output,n.next_out),e=n.next_out-t,i=Kt(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==an||0!==o){if(s===on)return s=Je(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},hn.prototype.onData=function(t){this.chunks.push(t)},hn.prototype.onEnd=function(t){t===an&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var pn={Inflate:hn,inflate:fn,inflateRaw:function(t,e){return(e=e||{}).raw=!0,fn(t,e)},ungzip:fn,constants:H};const{Deflate:gn,deflate:yn,deflateRaw:mn,gzip:bn}=le,{Inflate:_n,inflate:wn,inflateRaw:En,ungzip:vn}=pn;var An=bn,Tn=vn}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(34),e=n(9321),r=n(4302),i=n(1809),s=n(591),a=n(1605);function o(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function c(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function l(t){if("function"!=typeof t)throw new Error("function expected");return!0}function u(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function d(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function h(t){if(!Array.isArray(t))throw new Error("array expected")}function f(t,e){if(!c(!0,e))throw new Error(`${t}: array of strings expected`)}function p(t,e){if(!c(!1,e))throw new Error(`${t}: array of numbers expected`)}function g(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map(t=>t.encode).reduceRight(n,e),decode:t.map(t=>t.decode).reduce(n,e)}}function y(t){const e="string"==typeof t?t.split(""):t,n=e.length;f("alphabet",e);const r=new Map(e.map((t,e)=>[t,e]));return{encode:r=>(h(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:e=>(h(e),e.map(e=>{u("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}function m(t=""){return u("join",t),{encode:e=>(f("join.decode",e),e.join(t)),decode:e=>(u("join.decode",e),e.split(t))}}function b(t,e="="){return d(t),u("padding",e),{encode(n){for(f("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){f("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function _(t){return l(t),{encode:t=>t,decode:e=>t(e)}}function w(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(h(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,t=>{if(d(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t}),a=s.length;for(;;){let t=0,o=!0;for(let i=r;i<a;i++){const a=s[i],c=e*t,l=c+a;if(!Number.isSafeInteger(l)||c/e!==t||l-a!==c)throw new Error("convertRadix: carry overflow");const u=l/n;t=l%n;const d=Math.floor(u);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==l)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const E=(t,e)=>0===e?t:E(e,t%e),v=(t,e)=>t+(e-E(t,e)),A=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function T(t,e,n,r){if(h(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(v(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${v(e,n)}`);let i=0,s=0;const a=A[e],o=A[n]-1,c=[];for(const r of t){if(d(r),r>=a)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((i>>s-n&o)>>>0);const t=A[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&o,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function S(t,e=!1){if(d(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(v(8,t)>32||v(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!o(n))throw new Error("radix2.encode input should be Uint8Array");return T(Array.from(n),8,t,!e)},decode:n=>(p("radix2.decode",n),Uint8Array.from(T(n,t,8,e)))}}function I(t){return l(t),function(...e){try{return t.apply(null,e)}catch(t){}}}g(S(4),y("0123456789ABCDEF"),m("")),g(S(5),y("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),b(5),m(""));const k=(g(S(5),y("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m("")),g(S(5),y("0123456789ABCDEFGHIJKLMNOPQRSTUV"),b(5),m("")),g(S(5),y("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m("")),g(S(5),y("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),m(""),_(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),g(S(6),y("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),b(6),m(""))),x=(g(S(6),y("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m("")),g(S(6),y("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),b(6),m("")),g(S(6),y("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m("")),t=>{return g((d(e=58),{encode:t=>{if(!o(t))throw new Error("radix.encode input should be Uint8Array");return w(Array.from(t),256,e)},decode:t=>(p("radix.decode",t),Uint8Array.from(w(t,e,256)))}),y(t),m(""));var e}),B=(x("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),x("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),x("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),g(y("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),m(""))),C=[996825010,642813549,513874426,1027748829,705979059];function R(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<C.length;t++)1==(e>>t&1)&&(n^=C[t]);return n}function O(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=R(i)^n>>5}i=R(i);for(let e=0;e<r;e++)i=R(i)^31&t.charCodeAt(e);for(let t of e)i=R(i)^t;for(let t=0;t<6;t++)i=R(i);return i^=n,B.encode(T([i%A[30]],30,5,!1))}function N(t){const e="bech32"===t?1:734539939,n=S(5),r=n.decode,i=n.encode,s=I(r);function a(t,n,r=90){u("bech32.encode prefix",t),o(n)&&(n=Array.from(n)),p("bech32.encode",n);const i=t.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const a=t.toLowerCase(),c=O(a,n,e);return`${a}1${B.encode(n)}${c}`}function c(t,n=90){u("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),o=i.slice(s+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const c=B.decode(o).slice(0,-6),l=O(a,c,e);if(!o.endsWith(l))throw new Error(`Invalid checksum in ${t}: expected "${l}"`);return{prefix:a,words:c}}return{encode:a,decode:c,encodeFromBytes:function(t,e){return a(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:n}=c(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:I(c),fromWords:r,fromWordsUnsafe:s,toWords:i}}N("bech32"),N("bech32m");g(S(4),y("0123456789abcdef"),m(""),_(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));var D=n(4123),L=n(8293);function P(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function U(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function F(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function V(t,e){U(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const H=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),M=(t,e)=>t<<32-e|t>>>e,$=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),j=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function q(t){for(let e=0;e<t.length;e++)t[e]=j(t[e])}function z(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),U(t),t}class Y{clone(){return this._cloneInto()}}function G(t){const e=e=>t().update(z(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const K=(t,e,n)=>t&e^~t&n,W=(t,e,n)=>t&e^t&n^e&n;class Z extends Y{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=H(this.buffer)}update(t){F(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=z(t)).length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const e=H(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){F(this),V(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const a=H(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)a.setUint32(4*t,l[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const X=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Q=new Uint32Array(64);class tt extends Z{constructor(){super(64,32,8,!1),this.A=0|J[0],this.B=0|J[1],this.C=0|J[2],this.D=0|J[3],this.E=0|J[4],this.F=0|J[5],this.G=0|J[6],this.H=0|J[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[t,e,n,r,i,s,a,o]}set(t,e,n,r,i,s,a,o){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let n=0;n<16;n++,e+=4)Q[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Q[t-15],n=Q[t-2],r=M(e,7)^M(e,18)^e>>>3,i=M(n,17)^M(n,19)^n>>>10;Q[t]=i+Q[t-7]+r+Q[t-16]|0}let{A:n,B:r,C:i,D:s,E:a,F:o,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(M(a,6)^M(a,11)^M(a,25))+K(a,o,c)+X[t]+Q[t]|0,u=(M(n,2)^M(n,13)^M(n,22))+W(n,r,i)|0;l=c,c=o,o=a,a=s+e|0,s=i,i=r,r=n,n=e+u|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,s,a,o,c,l)}roundClean(){Q.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const et=G(()=>new tt);var nt=n(235);const rt=BigInt(2**32-1),it=BigInt(32);function st(t,e=!1){return e?{h:Number(t&rt),l:Number(t>>it&rt)}:{h:0|Number(t>>it&rt),l:0|Number(t&rt)}}function at(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=st(t[i],e);[n[i],r[i]]=[s,a]}return[n,r]}const ot=[],ct=[],lt=[],ut=BigInt(0),dt=BigInt(1),ht=BigInt(2),ft=BigInt(7),pt=BigInt(256),gt=BigInt(113);for(let t=0,e=dt,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ot.push(2*(5*r+n)),ct.push((t+1)*(t+2)/2%64);let i=ut;for(let t=0;t<7;t++)e=(e<<dt^(e>>ft)*gt)%pt,e&ht&&(i^=dt<<(dt<<BigInt(t))-dt);lt.push(i)}const[yt,mt]=at(lt,!0),bt=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),_t=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class wt extends Y{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,P(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){$||q(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],a=n[i+1],o=bt(s,a,1)^n[r],c=_t(s,a,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=o,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=ct[n],s=bt(e,i,r),a=_t(e,i,r),o=ot[n];e=t[o],i=t[o+1],t[o]=s,t[o+1]=a}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=yt[r],t[1]^=mt[r]}n.fill(0)}(this.state32,this.rounds),$||q(this.state32),this.posOut=0,this.pos=0}update(t){F(this);const{blockLen:e,state:n}=this,r=(t=z(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){F(this,!1),U(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return P(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(V(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new wt(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const Et=((t,e,n)=>G(()=>new wt(e,t,n)))(1,136,32);var vt=n(5591),At=n(7713),Tt=n(3075),St=n(9979),It=n(6993),kt=n(8287).hp,xt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ct=Object.getOwnPropertyNames,Rt=Object.prototype.hasOwnProperty,Ot=(t,e)=>{for(var n in e)xt(t,n,{get:e[n],enumerable:!0})},Nt=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Ct(e))Rt.call(t,i)||i===n||xt(t,i,{get:()=>e[i],enumerable:!(r=Bt(e,i))||r.enumerable});return t},Dt=(t,e,n)=>(Nt(t,e,"default"),n&&Nt(n,e,"default"));Ot({},{ADDR_BOUND:()=>he,API_VERSION:()=>le,BaseUrl:()=>Ne,DEFAULT_GLOBAL_CONFIG:()=>Fe,HARDENING_4BYTES:()=>Oe,HARDENING_BYTE:()=>Re,IS_BROWSER:()=>Ft,LegacyUDC:()=>Ie,MASK_250:()=>oe,MASK_31:()=>ce,MAX_STORAGE_ITEM_SIZE:()=>de,NetworkName:()=>De,OutsideExecutionCallerAny:()=>xe,PAYMASTER_RPC_NODES:()=>He,PRIME:()=>ue,RANGE_FELT:()=>pe,RANGE_I128:()=>Se,RANGE_I16:()=>ve,RANGE_I32:()=>Ae,RANGE_I64:()=>Te,RANGE_I8:()=>Ee,RANGE_U128:()=>we,RANGE_U16:()=>ye,RANGE_U32:()=>me,RANGE_U64:()=>be,RANGE_U8:()=>ge,RANGE_U96:()=>_e,RPC_DEFAULT_NODES:()=>Ve,SNIP9_V1_INTERFACE_ID:()=>Be,SNIP9_V2_INTERFACE_ID:()=>Ce,SYSTEM_MESSAGES:()=>Me,StarknetChainId:()=>Le,SupportedRpcVersion:()=>Ue,TEXT_TO_FELT_MAX_LEN:()=>se,TransactionHashPrefix:()=>Pe,UDC:()=>ke,ZERO:()=>ae});var Lt={};Ot(Lt,{JRPC:()=>Pt,PAYMASTER_API:()=>a,RPCSPEC08:()=>e,RPCSPEC09:()=>i});var Pt={},Ut={};Dt(Ut,i),Dt(Lt,Ut),Ot({},{IS_BROWSER:()=>Ft,addHexPrefix:()=>Kt,arrayBufferToString:()=>Ht,atobUniversal:()=>qt,bigIntToUint8Array:()=>re,btoaUniversal:()=>zt,buf2hex:()=>Yt,calcByteLength:()=>Zt,concatenateArrayBuffer:()=>te,hexStringToUint8Array:()=>ee,padLeft:()=>Wt,pascalToSnake:()=>Qt,removeHexPrefix:()=>Gt,sanitizeBytes:()=>Xt,sanitizeHex:()=>Jt,stringToUint8Array:()=>ne,uint8ArrayToBigInt:()=>ie,utf8ToArray:()=>$t,utf8ToBigInt:()=>jt,utf8ToUint8Array:()=>Mt});var Ft="undefined"!=typeof window,Vt="0";function Ht(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function Mt(t){return(new TextEncoder).encode(t)}var $t=Mt;function jt(t){return ie(Mt(t))}function qt(t){return k.decode(t)}function zt(t){return k.encode(new Uint8Array(t))}function Yt(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function Gt(t){return t.replace(/^0x/i,"")}function Kt(t){return`0x${Gt(t)}`}function Wt(t,e,n=Vt){return function(t,e,n,r=Vt){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function Zt(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function Xt(t,e=8,n=Vt){return Wt(t,Zt(t,e),n)}function Jt(t){const e=Xt(Gt(t),2);return e?Kt(e):e}var Qt=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function te(t){const e=t.reduce((t,e)=>t+e.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(t,r),r+=t.byteLength}),n}function ee(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: "${t}" contains non-hexadecimal characters`);const n=e.length%2!=0?`0${e}`:e,r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2)r[t/2]=parseInt(n.substring(t,t+2),16);return r}function ne(t){return/^0[xX][0-9a-fA-F]*$/.test(t)?ee(t):function(t){return/^[0-9]+$/.test(t)}(t)?re(BigInt(t)):Mt(t)}function re(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function ie(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var se=31,ae=0n,oe=2n**250n-1n,ce=2n**31n-1n,le=ae,ue=2n**251n+17n*2n**192n+1n,de=256n,he=2n**251n-de,fe=(t,e)=>({min:t,max:e}),pe=fe(ae,ue-1n),ge=fe(ae,255n),ye=fe(ae,65535n),me=fe(ae,2n**32n-1n),be=fe(ae,2n**64n-1n),_e=fe(ae,2n**96n-1n),we=fe(ae,2n**128n-1n),Ee=fe(-128n,127n),ve=fe(-32768n,32767n),Ae=fe(-(2n**31n),2n**31n-1n),Te=fe(-(2n**63n),2n**63n-1n),Se=fe(-(2n**127n),2n**127n-1n),Ie={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ke={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},xe="0x414e595f43414c4c4552",Be="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Ce="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Re=128,Oe=2147483648n,Ne={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},De={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Le={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},Pe={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},Ue={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Fe={rpcVersion:"0.9.0",transactionVersion:Lt.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},Ve={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},He={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},Me={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},$e=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Fe}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),je={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},qe=class t{static instance;config;constructor(){this.config=$e}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=je[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(je[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(je).filter(t=>this.shouldLog(je[t])&&"OFF"!==t)}}.getInstance(),ze={};Ot(ze,{RpcChannel:()=>ma});var{ETransactionVersion:Ye}=i,{ETransactionVersion2:Ge}=i,{ETransactionVersion3:Ke}=i,{EDataAvailabilityMode:We}=e,{EDAMode:Ze}=e;function Xe(t){return"l1_data_gas"in t}var{ETransactionStatus:Je}=e,{ETransactionExecutionStatus:Qe}=e,{ETransactionType:tn}=i,{EBlockStatus:en}=i,{ETransactionFinalityStatus:nn}=i,{ETransactionExecutionStatus:rn}=i,{EBlockTag:sn}=i,an="DEPLOY",on="INVOKE",cn={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},ln={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},un={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},dn={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},hn={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};Ot({},{parse:()=>pn,parseAlwaysAsBig:()=>gn,stringify:()=>yn});var fn=t=>{if(!D.Fq(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},pn=t=>D.qg(String(t),void 0,fn),gn=t=>D.qg(String(t),void 0,D.z3),yn=(t,e,n,r)=>D.As(t,e,n,r),mn=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:yn(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const s=await this.batchPromises[r];delete this.batchPromises[r];const a=s.find(t=>t.id===r);if(!a)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return a}};function bn(t,e){if(!t)throw new Error(e||"Assertion failure")}Ot({},{addPercent:()=>zn,assertInRange:()=>Pn,bigNumberishArrayToDecimalStringArray:()=>Un,bigNumberishArrayToHexadecimalStringArray:()=>Fn,cleanHex:()=>Ln,getDecimalString:()=>Hn,getHexString:()=>Mn,getHexStringArray:()=>$n,getNext:()=>Kn,hexToBytes:()=>qn,hexToDecimalString:()=>Dn,isBigNumberish:()=>Gn,isHex:()=>In,isHexString:()=>kn,isStringWholeNumber:()=>Vn,stringToSha256ToArrayBuff4:()=>Yn,toBigInt:()=>xn,toCairoBool:()=>jn,toHex:()=>Cn,toHex64:()=>Nn,toHexString:()=>Rn,toStorageKey:()=>On,tryToBigInt:()=>Bn});var _n=t=>void 0===t||void 0===t;function wn(t){return"number"==typeof t}function En(t){return"boolean"==typeof t}function vn(t){return"bigint"==typeof t}function An(t){return"string"==typeof t}function Tn(t){return void 0!==kt&&t instanceof kt}function Sn(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function In(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var kn=In;function xn(t){return BigInt(t)}function Bn(t){return t?BigInt(t):void 0}function Cn(t){return Kt(xn(t).toString(16))}var Rn=Cn;function On(t){return Kt(xn(t).toString(16).padStart(64,"0"))}function Nn(t){const e=Kt(xn(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Dn(t){return BigInt(Kt(t)).toString(10)}function Ln(t){return t.toLowerCase().replace(/^(0x)0+/,"$1")}function Pn(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),a=BigInt(e),o=BigInt(n);bn(s>=a&&s<=o,`Message not signable, ${i}.`)}function Un(t){return t.map(t=>xn(t).toString(10))}function Fn(t){return t.map(t=>Cn(t))}function Vn(t){return/^\d+$/.test(t)}function Hn(t){if(In(t))return Dn(t);if(Vn(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Mn(t){if(In(t))return t;if(Vn(t))return Rn(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function $n(t){return t.map(Mn)}function jn(t){return(+t).toString()}function qn(t){if(!In(t))throw new Error(`${t} needs to be a hex-string`);let e=Gt(t);return e.length%2!=0&&(e=`0${e}`),(0,L.aT)(e)}function zn(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Yn(t){var e;return qn(Cn((e=BigInt(Kt(Yt(et(t)))),Number(e&ce))))}function Gn(t){return wn(t)||vn(t)||An(t)&&(In(t)||Vn(t))}function Kn(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function Wn(t){const e=Gt(Cn(BigInt(t))),n=e.length%2==0?e:`0${e}`;return Kt((0,nt.keccak)(qn(Kt(n))).toString(16))}function Zn(t){const e=BigInt(function(t){return Kt((0,nt.keccak)($t(t)).toString(16))}(t));return e&oe}function Xn(t){return Cn(Zn(t))}function Jn(t){return wn(t)||vn(t)?Cn(t):In(t)?t:Vn(t)?Cn(t):Xn(t)}function Qn(t){const e=Kt(t.reduce((t,e)=>t+Gt(Cn(e)).padStart(64,"0"),""));return Kt((0,L.My)(Et(qn(e))))}function tr(t,e,n,r,i){return Qn([t,e,i,n,r.length,...r])}function er(t,e,n){return Qn([t,e,n.length,...n])}function nr(t){return/^[\x00-\x7F]*$/.test(t)}function rr(t){return t.length<=se}function ir(t){return/^[0-9]*$/i.test(t)}function sr(t){return An(t)&&!In(t)&&!Vn(t)}Ot({},{getL1MessageHash:()=>er,getL2MessageHash:()=>tr,getSelector:()=>Jn,getSelectorFromName:()=>Xn,keccakBn:()=>Wn,solidityUint256PackedKeccak256:()=>Qn,starknetKeccak:()=>Zn}),Ot({},{decodeShortString:()=>ur,encodeShortString:()=>lr,isASCII:()=>nr,isDecimalString:()=>ir,isLongText:()=>or,isShortString:()=>rr,isShortText:()=>ar,isText:()=>sr,splitLongString:()=>cr});var ar=t=>sr(t)&&rr(t),or=t=>sr(t)&&!rr(t);function cr(t){const e=RegExp(`[^]{1,${se}}`,"g");return t.match(e)||[]}function lr(t){if(!nr(t))throw new Error(`${t} is not an ASCII string`);if(!rr(t))throw new Error(`${t} is too long`);return Kt(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function ur(t){if(!nr(t))throw new Error(`${t} is not an ASCII string`);if(In(t))return Gt(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(ir(t))return ur("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}function dr(t){const e=0n===BigInt(t.pending_word)?"":ur(Cn(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":ur(Cn(e))),"")+e}function hr(t){const e=cr(t),n=e[e.length-1],r=e.map(lr),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}Ot({},{byteArrayFromString:()=>hr,stringFromByteArray:()=>dr});function fr(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function pr(t){if(vn(t)||Number.isInteger(t))return t.toString();if(An(t)){if(In(t))return BigInt(t).toString();if(sr(t)){if(!rr(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(lr(t)).toString()}if(Vn(t))return t}if(En(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}Ot({},{felt:()=>Gr,getAbiContractVersion:()=>jr,getArrayType:()=>Hr,isCairo1Abi:()=>Mr,isCairo1Type:()=>Vr,isLen:()=>Er,isTypeArray:()=>Ar,isTypeBool:()=>Dr,isTypeContractAddress:()=>Lr,isTypeEnum:()=>kr,isTypeEthAddress:()=>Pr,isTypeFelt:()=>vr,isTypeInt:()=>Rr,isTypeLiteral:()=>Nr,isTypeNamedTuple:()=>Sr,isTypeNonZero:()=>$r,isTypeOption:()=>xr,isTypeResult:()=>Br,isTypeSecp256k1Point:()=>Fr,isTypeStruct:()=>Ir,isTypeTuple:()=>Tr,isTypeU96:()=>Ur,isTypeUint:()=>Cr,isTypeUint256:()=>Or,tuple:()=>Yr,uint256:()=>qr,uint512:()=>zr});var gr=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex(t=>t>0))}static __processData(t){if(An(t))return ne(t);if(vn(t))return re(t);if(Number.isInteger(t))return re(BigInt(t));if(En(t))return re(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return ie(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return Kt(this.toBigInt().toString(16))}toApiRequest(){return fr([this.toHexString()])}static validate(e){bn(null!==e,"null value is not allowed for felt252"),bn(void 0!==e,"undefined value is not allowed for felt252"),bn(An(e)||wn(e)||vn(e)||En(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=ie(n);bn(r>=0n&&r<ue,`Value ${n} is out of felt252 range [0, ${ue})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},yr=(1n<<128n)-1n,mr=(1n<<256n)-1n,br=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(Sn(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&yr,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){bn(null!==t,"null value is not allowed for u256"),bn(void 0!==t,"undefined value is not allowed for u256"),bn(Gn(t)||Sn(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return bn(e>=0n,"bigNumberish is smaller than UINT_256_MIN"),bn(e<=mr,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return bn(n>=0n&&n<=340282366920938463463374607431768211455n,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),bn(r>=0n&&r<=340282366920938463463374607431768211455n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=Kn(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Kt(this.low.toString(16)),high:Kt(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[pr(this.low),pr(this.high)]}},_r=(1n<<512n)-1n,wr=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(Sn(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&yr,this.limb1=(n&yr<<128n)>>128n,this.limb2=(n&yr<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){bn(null!==t,"null value is not allowed for u512"),bn(void 0!==t,"undefined value is not allowed for u512"),bn(Gn(t)||Sn(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return bn(e>=0n,"bigNumberish is smaller than UINT_512_MIN."),bn(e<=_r,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),a=BigInt(n),o=BigInt(r);return[i,s,a,o].forEach((t,e)=>{bn(t>=0n&&t<=yr,`limb${e} is not in the range of a u128 number`)}),{limb0:i,limb1:s,limb2:a,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=Kn(e),i=Kn(e),s=Kn(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Kt(this.limb0.toString(16)),limb1:Kt(this.limb1.toString(16)),limb2:Kt(this.limb2.toString(16)),limb3:Kt(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[pr(this.limb0),pr(this.limb1),pr(this.limb2),pr(this.limb3)]}},Er=t=>/_len$/.test(t),vr=t=>"felt"===t||"core::felt252"===t,Ar=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Tr=t=>/^\(.*\)$/i.test(t),Sr=t=>/\(.*\)/i.test(t)&&t.includes(":"),Ir=(t,e)=>t in e,kr=(t,e)=>t in e,xr=t=>t.startsWith("core::option::Option::"),Br=t=>t.startsWith("core::result::Result::"),Cr=t=>Object.values(cn).includes(t),Rr=t=>Object.values(ln).includes(t),Or=t=>br.isAbiType(t),Nr=t=>Object.values(un).includes(t),Dr=t=>"core::bool"===t,Lr=t=>t===un.ContractAddress,Pr=t=>"core::starknet::eth_address::EthAddress"===t,Ur=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Fr=t=>t===un.Secp256k1Point,Vr=t=>t.includes("::"),Hr=t=>Vr(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Mr(t){const{cairo:e}=jr(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function $r(t){return t.startsWith("core::zeroable::NonZero::")}function jr(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return Vr(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var qr=t=>new br(t).toUint256DecimalString(),zr=t=>new wr(t).toUint512DecimalString(),Yr=(...t)=>({...t});function Gr(t){return pr(t)}var Kr=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!_n(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!_n(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!_n(t[1]));return _n(t)?"":t[0]}},Wr={Some:0,None:1},Zr=class{Some;None;constructor(t,e){if(!(t in Object.values(Wr)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===Wr.Some){if(_n(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!_n(this.Some)}isNone(){return!0===this.None}},Xr={Ok:0,Err:1},Jr=class{Ok;Err;constructor(t,e){if(!(t in Object.values(Xr)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===Xr.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!_n(this.Ok))return this.Ok;if(!_n(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!_n(this.Ok)}isErr(){return!_n(this.Err)}},Qr=(t,e,n)=>{if(!vn(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function ti(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const a=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===a){if(Array.isArray(t[i])){const e=ti(t[i],t[i].map(t=>a));return r[i]=Object.values(e).join(""),r}return Qr(t,e,i),r[i]=ur(s),r}if("number"===a)return Qr(t,e,i),r[i]=Number(s),r;if("function"==typeof a)return r[i]=a(s),r;if(Array.isArray(a)){const e=ti(t[i],a,a[0]);return r[i]=Object.values(e),r}return Sn(a)?(r[i]=ti(t[i],a),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)},{})}var ei=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(An(t))return ne(t);if(Tn(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return ie(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return Kt("padded"===t?Yt(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;bn(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},ni={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ri=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},ii=class extends ri{},si=class extends ii{constructor(t,e,n){super(`RPC: ${e} with params ${yn(n,null,2)}\n\n      ${t.code}: ${t.message}: ${yn(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return ni[t]===this.code}},ai=$e.get("buffer")||void 0!==kt&&kt||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==n.g&&n.g.Buffer||class{constructor(){throw new ii("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new ii("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=$e.get("buffer")||void 0!==kt&&kt;return e&&e.isBuffer&&e.isBuffer(t)}},oi=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},ci=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return bn(Array.isArray(t)&&n instanceof gr&&r instanceof oi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(Tn(t))e=new Uint8Array(t);else if(An(t))e=ne(t);else if(vn(t))e=re(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=re(BigInt(t))}var n;const r=ei.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,a=[];let o,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);a.push(new ei(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");o=new gr(n),c=new oi(s)}else o=new gr(0),c=new oi(0);return{data:a,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),fr([Kt(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=te(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=te(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=te(this.toElements());return Kt(0===t.length?"0":Yt(t))}toBuffer(){const t=te(this.toElements());return ai.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){bn(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){bn(null!=t,"Invalid input: null or undefined"),bn(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),bn("object"!=typeof t||Tn(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),bn(!wn(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),bn(!wn(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),bn(!vn(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),bn(t instanceof Uint8Array||Tn(t)||An(t)||wn(t)||vn(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(Kn(e))},()=>ei.factoryFromApiResponse(e)),r=gr.factoryFromApiResponse(e),i=oi.factoryFromApiResponse(e);return new t(n,r,i)}},li=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=ge.min&&n<=ge.max,`Value is out of u8 range [${ge.min}, ${ge.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},ui=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=ye.min&&n<=ye.max,`Value is out of u16 range [${ye.min}, ${ye.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},di=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=be.min&&n<=be.max,`Value is out of u64 range [${be.min}, ${be.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},hi=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=_e.min&&n<=_e.max,`Value is out of u96 range [${_e.min}, ${_e.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},fi=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=we.min&&n<=we.max,`Value is out of u128 range [${we.min}, ${we.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Kn(e))}},pi=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(ue+t).toString(16):t.toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=Ee.min&&n<=Ee.max,`Value is out of i8 range [${Ee.min}, ${Ee.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=BigInt(n);return new t(r>ue/2n?r-ue:r)}},gi=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(ue+t).toString(16):t.toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=ve.min&&n<=ve.max,`Value is out of i16 range [${ve.min}, ${ve.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=BigInt(n);return new t(r>ue/2n?r-ue:r)}},yi=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(ue+t).toString(16):t.toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=Ae.min&&n<=Ae.max,`Value is out of i32 range [${Ae.min}, ${Ae.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=BigInt(n);return new t(r>ue/2n?r-ue:r)}},mi=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(ue+t).toString(16):t.toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=Te.min&&n<=Te.max,`Value is out of i64 range [${Te.min}, ${Te.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=BigInt(n);return new t(r>ue/2n?r-ue:r)}},bi=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return An(t)&&sr(t)?jt(t):BigInt(t)}toApiRequest(){return fr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(re(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(ue+t).toString(16):t.toString(16))}static validate(e){bn(null!=e,"Invalid input: null or undefined"),bn(!Sn(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),bn(!wn(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);bn(n>=Se.min&&n<=Se.max,`Value is out of i128 range [${Se.min}, ${Se.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Kn(e),r=BigInt(n);return new t(r>ue/2n?r-ue:r)}},_i=(ei.abiSelector,ci.abiSelector,gr.abiSelector,br.abiSelector,wr.abiSelector,li.abiSelector,ui.abiSelector,di.abiSelector,hi.abiSelector,fi.abiSelector,pi.abiSelector,gi.abiSelector,yi.abiSelector,mi.abiSelector,bi.abiSelector,ei.abiSelector,ci.abiSelector,gr.abiSelector,br.abiSelector,wr.abiSelector,li.abiSelector,ui.abiSelector,di.abiSelector,hi.abiSelector,fi.abiSelector,pi.abiSelector,gi.abiSelector,yi.abiSelector,mi.abiSelector,bi.abiSelector,{request:{[ei.abiSelector]:t=>new ei(t).toApiRequest(),[ci.abiSelector]:t=>new ci(t).toApiRequest(),[gr.abiSelector]:t=>Gr(t),[br.abiSelector]:t=>new br(t).toApiRequest(),[wr.abiSelector]:t=>new wr(t).toApiRequest(),[li.abiSelector]:t=>Gr(t),[ui.abiSelector]:t=>Gr(t),[di.abiSelector]:t=>Gr(t),[hi.abiSelector]:t=>Gr(t),[fi.abiSelector]:t=>Gr(t),[pi.abiSelector]:t=>new pi(t).toApiRequest(),[gi.abiSelector]:t=>new gi(t).toApiRequest(),[yi.abiSelector]:t=>new yi(t).toApiRequest(),[mi.abiSelector]:t=>new mi(t).toApiRequest(),[bi.abiSelector]:t=>new bi(t).toApiRequest()},response:{[ei.abiSelector]:t=>ei.factoryFromApiResponse(t).decodeUtf8(),[ci.abiSelector]:t=>ci.factoryFromApiResponse(t).decodeUtf8(),[gr.abiSelector]:t=>BigInt(Kn(t)),[br.abiSelector]:t=>br.factoryFromApiResponse(t).toBigInt(),[wr.abiSelector]:t=>wr.factoryFromApiResponse(t).toBigInt(),[li.abiSelector]:t=>BigInt(Kn(t)),[ui.abiSelector]:t=>BigInt(Kn(t)),[di.abiSelector]:t=>BigInt(Kn(t)),[hi.abiSelector]:t=>BigInt(Kn(t)),[fi.abiSelector]:t=>BigInt(Kn(t)),[pi.abiSelector]:t=>BigInt(Kn(t)),[gi.abiSelector]:t=>BigInt(Kn(t)),[yi.abiSelector]:t=>BigInt(Kn(t)),[mi.abiSelector]:t=>BigInt(Kn(t)),[bi.abiSelector]:t=>BigInt(Kn(t))}}),wi=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||_i}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>Er(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Ei=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||_i}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function vi(t,e,n){return"constructor"===t&&!n&&!e.length}function Ai(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0===--i)return r;return Number.POSITIVE_INFINITY}function Ti(t){return Vr(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+Ai(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+Ai(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map(t=>n.length?t.replace(" ",n.shift()):t);return Sr(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Si=class t{content;arrayType;constructor(e,n){bn(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}bn(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,n)=>(t[n]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function Ii({type:t,val:e,parser:n}){switch(!0){case br.isAbiType(t):case wr.isAbiType(t):case li.isAbiType(t):case ui.isAbiType(t):case di.isAbiType(t):case hi.isAbiType(t):case fi.isAbiType(t):case pi.isAbiType(t):case gi.isAbiType(t):case yi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case ei.isAbiType(t):return n.getRequestParser(t)(e);case Fr(t):{const t=Gt(Cn(e)).padStart(128,"0"),n=qr(Kt(t.slice(-64))),r=qr(Kt(t.slice(0,-64)));return[Gr(r.low),Gr(r.high),Gr(n.low),Gr(n.high)]}default:return n.getRequestParser(gr.abiSelector)(e)}}function ki({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Si.isTypeFixedArray(e)){const s=Si.getFixedArrayType(e);let a=[];if(Array.isArray(t))a=new Si(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);a=Object.values(t),bn(a.length===Si.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Si.getFixedArraySize(e)} items. ${a.length} items provided.`)}return a.reduce((t,e)=>t.concat(ki({element:e,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(Gr(t.length));const a=Hr(e);return t.reduce((t,e)=>t.concat(ki({element:e,type:a,structs:n,enums:r,parser:i})),s)}if(br.isAbiType(e))return i.getRequestParser(e)(t);if(wr.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(Pr(e))return Ii({type:e,val:t,parser:i});if(ci.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],a=t;return s.reduce((t,e)=>t.concat(ki({element:a[e.name],type:e.type,structs:n,enums:r,parser:i})),[])}if(Tr(e)){const s=function(t,e){const n=Ti(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map((t,e)=>({element:r[e],type:t.type??t}))}(t,e);return s.reduce((t,e)=>{const s=ki({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)},[])}if(kr(e,r)){const{variants:s}=r[e];if(xr(e)){const e=t;if(e.isSome()){const t=s.find(t=>"Some"===t.name);if(_n(t))throw Error("Error in abi : Option has no 'Some' variant.");const a=t.type;if("()"===a)return Wr.Some.toString();const o=ki({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[Wr.Some.toString(),...o]:[Wr.Some.toString(),o]}return Wr.None.toString()}if(Br(e)){const e=t;if(e.isOk()){const t=s.find(t=>"Ok"===t.name);if(_n(t))throw Error("Error in abi : Result has no 'Ok' variant.");const a=t.type;if("()"===a)return Xr.Ok.toString();const o=ki({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(o)?[Xr.Ok.toString(),...o]:[Xr.Ok.toString(),o]}const a=s.find(t=>"Err"===t.name);if(_n(a))throw Error("Error in abi : Result has no 'Err' variant.");const o=a.type;if("()"===o)return Xr.Err.toString();const c=ki({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(c)?[Xr.Err.toString(),...c]:[Xr.Err.toString(),c]}const a=t,o=a.activeVariant(),c=s.find(t=>t.name===o);if(_n(c))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=c.type,u=s.findIndex(t=>t.name===o);if("()"===l)return u.toString();const d=ki({element:a.unwrap(),type:l,structs:n,enums:r,parser:i});return Array.isArray(d)?[u.toString(),...d]:[u.toString(),d]}if($r(e))return Ii({type:Hr(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return Ii({type:e,val:t,parser:i})}function xi(t,e,n){let r;switch(!0){case Dr(t):return r=e.next().value,Boolean(BigInt(r));case br.isAbiType(t):case wr.isAbiType(t):case li.isAbiType(t):case ui.isAbiType(t):case di.isAbiType(t):case hi.isAbiType(t):case fi.isAbiType(t):case pi.isAbiType(t):case gi.isAbiType(t):case yi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):return n.getResponseParser(t)(e);case Pr(t):return r=e.next().value,BigInt(r);case ei.isAbiType(t):return n.getResponseParser(t)(e);case Fr(t):const i=Gt(e.next().value).padStart(32,"0"),s=Gt(e.next().value).padStart(32,"0"),a=Gt(e.next().value).padStart(32,"0"),o=Gt(e.next().value).padStart(32,"0");return BigInt(Kt(s+i+o+a));default:return n.getResponseParser(gr.abiSelector)(e)}}function Bi(t,e,n,r,i){if("()"===e.type)return{};if(br.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(wr.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(ci.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Si.isTypeFixedArray(e.type)){const s=[],a={name:"",type:Si.getFixedArrayType(e.type)},o=Si.getFixedArraySize(e.type);for(;s.length<o;)s.push(Bi(t,a,n,r,i));return s}if(Ar(e.type)){const s=[],a={name:"",type:Hr(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Bi(t,a,n,r,i));return s}if($r(e.type)){const s={name:"",type:Hr(e.type)};return Bi(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return Pr(e.type)?xi(e.type,t,n):r[e.type].members.reduce((e,s)=>(e[s.name]=Bi(t,s,n,r,i),e),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),a=i[e.type].variants.reduce((e,a,o)=>o===s?(e[a.name]=Bi(t,{name:"",type:a.type},n,r,i),e):(e[a.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=s===Wr.Some?a.Some:void 0;return new Zr(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===Xr.Ok?a.Ok:a.Err,new Jr(s,t)}return new Kr(a)}if(Tr(e.type))return Ti(e.type).reduce((e,s,a)=>{const o=s?.name?s.name:a,c={name:o,type:s?.type?s.type:s};return e[o]=Bi(t,c,n,r,i),e},{});if(Ar(e.type)){const s=[],a={name:"",type:Hr(e.type)},o=BigInt(t.next().value);for(;s.length<o;)s.push(Bi(t,a,n,r,i));return s}return xi(e.type,t,n)}function Ci({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:a,type:o}=e;let c;switch(!0){case Er(a):return c=t.next().value,BigInt(c);case n&&o in n||Tr(o):case r&&kr(o,r):case Si.isTypeFixedArray(o):return Bi(t,e,s,n,r);case Ar(o):if(Vr(o))return Bi(t,e,s,n,r);const l=[];if(i&&i[`${a}_len`]){const o=i[`${a}_len`];for(;l.length<o;)l.push(Bi(t,{name:a,type:e.type.replace("*","")},s,n,r))}return l;case $r(o):return Bi(t,e,s,n,r);default:return xi(o,t,s)}}var Ri=(t,e)=>{if(bn(An(t)||wn(t)||vn(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),An(t)&&!In(t))return;const n=BigInt(t.toString(10));bn(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Oi=(t,e)=>{let n;switch(wn(t)&&bn(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),bn(An(t)||wn(t)||vn(t)||Sn(t)&&"low"in t&&"high"in t||Sn(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case cn.u256:n=new br(t).toBigInt();break;case cn.u512:n=new wr(t).toBigInt();break;default:n=xn(t)}switch(e.type){case cn.u8:bn(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case cn.u16:bn(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case cn.u32:bn(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case cn.u64:bn(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case cn.u128:bn(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case cn.u256:bn(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case cn.u512:bn(wr.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case un.ClassHash:case un.ContractAddress:bn(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case un.Secp256k1Point:bn(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case un.U96:bn(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Ni=(t,e)=>{bn(En(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Di=(t,e,n)=>{if(e.type!==cn.u256&&e.type!==cn.u512){if(Pr(e.type)){bn(!Sn(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));return void bn(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}bn(Sn(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:n})=>{bn(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)})}else Oi(t,e)},Li=(t,e)=>{bn(Sn(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(xr(e.type)&&r.includes("isSome")&&r.includes("isNone")||Br(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Pi=(t,e)=>{bn(Sn(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},Ui=(t,e,n,r)=>{const i=Ar(e.type),s=i?Hr(e.type):Si.getFixedArrayType(e.type);if(i&&vr(s)&&or(t))return;let a=[];if(i)bn(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),a=t;else switch(!0){case Array.isArray(t):a=t;break;case"object"==typeof t:a=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case vr(s):a.forEach(t=>Ri(t,e));break;case Tr(s):a.forEach(t=>Pi(t,{name:e.name,type:s}));break;case Ar(s):a.forEach(t=>Ui(t,{name:"",type:s},n,r));break;case Ir(s,n):a.forEach(t=>Di(t,{name:e.name,type:s},n));break;case kr(s,r):a.forEach(t=>Li(t,{name:e.name,type:s}));break;case Cr(s)||Nr(s):a.forEach(t=>Oi(t,{name:"",type:s}));break;case Dr(s):a.forEach(t=>Ni(t,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${a}`)}};function Fi(t,e,n,r){t.inputs.reduce((t,i)=>{const s=e[t];switch(!0){case Er(i.name):return t;case vr(i.type):Ri(s,i);break;case ei.isAbiType(i.type):ei.validate(s);break;case Cr(i.type)||Nr(i.type):Oi(s,i);break;case Dr(i.type):Ni(s,i);break;case ci.isAbiType(i.type):ci.validate(s);break;case pi.isAbiType(i.type):pi.validate(s);break;case gi.isAbiType(i.type):gi.validate(s);break;case yi.isAbiType(i.type):yi.validate(s);break;case mi.isAbiType(i.type):mi.validate(s);break;case bi.isAbiType(i.type):bi.validate(s);break;case Ar(i.type)||Si.isTypeFixedArray(i.type):Ui(s,i,n,r);break;case Ir(i.type,n):Di(s,i,n);break;case kr(i.type,r):Li(s,i);break;case Tr(i.type):Pi(s,i);break;case $r(i.type):((t,e)=>{const n=Hr(e.type);switch(bn(Cr(n)&&n!==wr.abiSelector||vr(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case vr(n):Ri(t,e),bn(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Cr(n):Oi(t,{name:"",type:n}),n===cn.u256?bn(new br(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):bn(xn(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1},0)}var Vi=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const n=function(t){return t.find(t=>"interface"===t.type)?2:Mr(t)?1:0}(t);if(0===n||1===n)return new wi(t,e);if(2===n)return new Ei(t,e);throw Error(`Unsupported ABI version ${n}`)}(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==an&&bn(this.abi.filter(e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===on?!n:n}).map(t=>t.name).includes(e),(t===on?"invocable":"viewable")+" method not found in abi");const r=this.abi.find(n=>t===an?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type);if(vi(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);Fi(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find(e=>e.name===t);if(vi(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(Si.isTypeFixedArray(e))return function(t,e){const n=Si.getFixedArrayType(e),r=Si.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map(t=>i(t,n))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(Ar(e))return function(t,e){const n=Hr(e);return An(t)?t:t.map(t=>i(t,n))}(t,e);if(kr(e,r)){const n=r[e];return a(t,n)}if(Tr(e))return function(t,e){const n=Ti(e).reduce((e,n,r)=>{const s=Object.keys(t),a=n?.type?n.type:n;return o=i(t[s[r]],a),Object.defineProperty(e,r.toString(),{enumerable:!0,value:o??t[s[r]]}),e;var o},{});return n}(t,e);if(Pr(e))return t;if($r(e))return t;if(ci.isAbiType(e))return t;if(Ur(e))return t;if(Fr(e))return t;if(br.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(wr.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every(t=>t in n))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Ir(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce((e,n)=>{if("undefined"===t[n.name]&&(Vr(n.type)||!Er(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e},{}),a=(t,e)=>{if(Br(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new Jr(Xr.Ok,i(t.unwrap(),r)):new Jr(Xr.Err,i(t.unwrap(),s))}if(xr(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new Zr(Wr.Some,i(n.unwrap(),r)):new Zr(Wr.None,{})}const n=t,r=Object.entries(n.variant).map(t=>{if(_n(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]});return new Kr(Object.fromEntries(r))};return e.reduce((e,n)=>{return Er(n.name)&&!Vr(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r},{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),Fi(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce((t,e)=>Er(e.name)&&!Vr(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:a}=e;let{value:o}=t.next();switch(!0){case Si.isTypeFixedArray(a):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${o}`);return ki({element:o,type:e.type,structs:n,enums:r,parser:i});case Ar(a):if(!Array.isArray(o)&&!sr(o))throw Error(`ABI expected parameter ${s} to be array or long string, got ${o}`);return An(o)&&(o=cr(o)),ki({element:o,type:e.type,structs:n,enums:r,parser:i});case $r(a):return Ii({type:Hr(a),val:o,parser:i});case Pr(a):return Ii({type:a,val:o,parser:i});case Ir(a,n)||Tr(a)||br.isAbiType(a):case kr(a,r):return ki({element:o,type:a,structs:n,enums:r,parser:i});default:return Ii({type:a,val:o,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap(([t,i])=>{let s=i;"entrypoint"===t?s=Xn(s):or(s)&&(s=hr(s));const a=Array.isArray(r)&&"0"===t?"$$len":t;if(vn(s))return[[`${n}${a}`,Gr(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?Wr.Some:Wr.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${a}.`):[[`${n}${a}`,Gr(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?Xr.Ok:Xr.Err;return e({0:r,1:t.unwrap()},`${n}${a}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===r);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${a}`,Gr(i)]]:e({0:i,1:t.unwrap()},`${n}${a}.`)}return e(s,`${n}${a}.`)}return[[`${n}${a}`,Gr(s)]]})};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find(e=>e.name===t),r=e.flat()[Symbol.iterator](),i=n.flat().reduce((t,e,n)=>{const i=e.name??n;return t[i]=Ci({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return ti(this.parse(t,e),n)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Cn(t))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map(t=>Ci({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}};Ot({},{calculateContractAddressFromHash:()=>ms,calculateDeclareTransactionHash:()=>us,calculateDeployAccountTransactionHash:()=>ds,calculateInvokeTransactionHash:()=>ls,calculateL2MessageTxHash:()=>cs,computeCompiledClassHash:()=>Ts,computeContractClassHash:()=>ks,computeHashOnElements:()=>ps,computeHintedClassHash:()=>ws,computeLegacyContractClassHash:()=>Es,computePedersenHash:()=>hs,computePedersenHashOnElements:()=>gs,computePoseidonHash:()=>fs,computePoseidonHashOnElements:()=>ys,computeSierraContractClassHash:()=>Is,formatSpaces:()=>_s,getL1MessageHash:()=>er,getL2MessageHash:()=>tr,getSelector:()=>Jn,getSelectorFromName:()=>Xn,hashByteCodeSegments:()=>As,keccakBn:()=>Wn,poseidon:()=>vt,solidityUint256PackedKeccak256:()=>Qn,starknetKeccak:()=>Zn}),Ot({},{calculateDeclareTransactionHash:()=>ts,calculateDeployAccountTransactionHash:()=>Qi,calculateInvokeTransactionHash:()=>es,calculateTransactionHashCommon:()=>Ji,encodeDataResourceBoundsL1:()=>Zi,encodeResourceBoundsL1:()=>Ki,encodeResourceBoundsL2:()=>Wi,hashDAMode:()=>Gi,hashFeeFieldV3B3:()=>Xi});var Hi=t=>t.map(t=>BigInt(t)),Mi=32n,$i=128n,ji=64n+$i,qi=BigInt(lr("L1_GAS")),zi=BigInt(lr("L2_GAS")),Yi=BigInt(lr("L1_DATA"));function Gi(t,e){return(BigInt(t)<<Mi)+BigInt(e)}function Ki(t){return(qi<<ji)+(t.l1_gas.max_amount<<$i)+t.l1_gas.max_price_per_unit}function Wi(t){return(zi<<ji)+(t.l2_gas.max_amount<<$i)+t.l2_gas.max_price_per_unit}function Zi(t){return(Yi<<ji)+(t.l1_data_gas.max_amount<<$i)+t.l1_data_gas.max_price_per_unit}function Xi(t,e){const n=Ki(e),r=Wi(e),i=Zi(e);return(0,nt.poseidonHashMany)([BigInt(t),n,r,i])}function Ji(t,e,n,r,i,s,a,o,c,l,u=[]){const d=Xi(s,l),h=Gi(o,c),f=Hi([t,e,n,d,(0,nt.poseidonHashMany)(Hi(a)),r,i,h,...Hi(u)]);return Cn((0,nt.poseidonHashMany)(f))}function Qi(t,e,n,r,i,s,a,o,c,l,u,d){return Ji(Pe.DEPLOY_ACCOUNT,i,t,s,a,u,d,o,c,l,[(0,nt.poseidonHashMany)(Hi(n)),e,r])}function ts(t,e,n,r,i,s,a,o,c,l,u,d){return Ji(Pe.DECLARE,r,n,i,s,u,Hi(d),o,c,l,[(0,nt.poseidonHashMany)(Hi(a)),t,e])}function es(t,e,n,r,i,s,a,o,c,l,u){return Ji(Pe.INVOKE,e,t,r,i,l,u,a,o,c,[(0,nt.poseidonHashMany)(Hi(s)),(0,nt.poseidonHashMany)(Hi(n))])}Ot({},{calculateDeclareTransactionHash:()=>ss,calculateDeployAccountTransactionHash:()=>as,calculateL2MessageTxHash:()=>cs,calculateTransactionHash:()=>os,calculateTransactionHashCommon:()=>is,computeHashOnElements:()=>rs});var ns={};function rs(t){return[...t,t.length].reduce((t,e)=>nt.pedersen(xn(t),xn(e)),0).toString()}function is(t,e,n,r,i,s,a,o=[]){const c=rs(i);return rs([t,e,n,r,c,s,a,...o])}function ss(t,e,n,r,i,s,a){return is(Pe.DECLARE,n,e,0,[t],r,i,[s,...a?[a]:[]])}function as(t,e,n,r,i,s,a,o){const c=[e,r,...n];return is(Pe.DEPLOY_ACCOUNT,i,t,0,c,s,a,[o])}function os(t,e,n,r,i,s){return is(Pe.INVOKE,e,t,0,n,r,i,[s])}function cs(t,e,n,r,i,s){const a=[t,...r];return is(Pe.L1_HANDLER,0,e,Jn(n),a,0,i,[s])}function ls(t){if(function(t){return[Lt.ETransactionVersion.V3,Lt.ETransactionVersion.F3].includes(t.version)}(t))return es(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function us(t){if(function(t){return[Lt.ETransactionVersion.V3,Lt.ETransactionVersion.F3].includes(t.version)}(t))return ts(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function ds(t){if(function(t){return[Lt.ETransactionVersion.V3,Lt.ETransactionVersion.F3].includes(t.version)}(t))return Qi(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function hs(t,e){return nt.pedersen(BigInt(t),BigInt(e))}function fs(t,e){return Cn(nt.poseidonHash(BigInt(t),BigInt(e)))}function ps(t){return[...t,t.length].reduce((t,e)=>nt.pedersen(BigInt(t),BigInt(e)),0).toString()}Ot(ns,{starkCurve:()=>nt,weierstrass:()=>At});var gs=ps;function ys(t){return Cn((0,nt.poseidonHashMany)(t.map(t=>BigInt(t))))}function ms(t,e,n,r){const i=ps(Vi.compile(n)),s=ps([Gr("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return Cn(BigInt(s)%he)}function bs(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function _s(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function ws(t){const{abi:e,program:n}=t,r=_s(yn({abi:e,program:n},bs));return Kt(nt.keccak($t(r)).toString(16))}function Es(t){const e=An(t)?pn(t):t,n=Cn(le),r=ps(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=ps(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),s=ps(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),a=ps(e.program.builtins.map(t=>lr(t))),o=ws(e),c=ps(e.program.data);return ps([n,r,i,s,a,o,c])}function vs(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,nt.poseidonHashMany)(e.flatMap(t=>BigInt(lr(t)))))];var e});return(0,nt.poseidonHashMany)(e)}function As(t){const e=t.bytecode.map(t=>BigInt(t)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(t=>{const n=e.slice(r,r+=t);return[BigInt(t),(0,nt.poseidonHashMany)(n)]});return 1n+(0,nt.poseidonHashMany)(i)}function Ts(t){const e=BigInt(lr("COMPILED_CLASS_V1")),n=vs(t.entry_points_by_type.EXTERNAL),r=vs(t.entry_points_by_type.L1_HANDLER),i=vs(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?As(t):(0,nt.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Cn((0,nt.poseidonHashMany)([e,n,r,i,s]))}function Ss(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,nt.poseidonHashMany)(e)}function Is(t){const e=BigInt(lr("CONTRACT_CLASS_V0.1.0")),n=Ss(t.entry_points_by_type.EXTERNAL),r=Ss(t.entry_points_by_type.L1_HANDLER),i=Ss(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=_s(yn(t.abi,null));return BigInt(Kt(nt.keccak($t(e)).toString(16)))}(t),a=(0,nt.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Cn((0,nt.poseidonHashMany)([e,n,r,i,s,a]))}function ks(t){const e=An(t)?pn(t):t;return"sierra_program"in e?Is(e):Es(e)}var xs={};function Bs(t){const e=An(t)?t:yn(t);return zt((0,Tt.ZI)(e))}function Cs(t){if(Array.isArray(t))return t;const e=Ht((0,Tt.Aq)(qt(t)));return pn(e)}function Rs(){const t=nt.utils.randomPrivateKey();return(0,nt.getStarkKey)(t)}function Os(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Cn(t));try{const{r:e,s:n}=t;return[Cn(e),Cn(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Ns(t){return Un(Os(t))}function Ds(t){return Fn(Os(t))}function Ls(){return Ps({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function Ps(t,e=$e.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:zn(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:zn(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:zn(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:zn(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:zn(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:zn(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function Us(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Fs(t,e=$e.get("resourceBoundsOverhead")){return zn(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*zn(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+zn(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*zn(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+zn(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*zn(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Vs(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Hs(t){if(t===We.L1)return Ze.L1;if(t===We.L2)return Ze.L2;throw Error("EDAM conversion")}function Ms(t,e){const n=Cn(e||t);if(!Object.values(Ke).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function $s(t){if(!t)return;const e=Cn(t);if(e===Ye.V0)return Ye.F0;if(e===Ye.V1)return Ye.F1;if(e===Ye.V2)return Ye.F2;if(e===Ye.V3)return Ye.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function js(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||We.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||We.L1,resourceBounds:t.resourceBounds??Ls()}}function qs(t){const e=Cn(t);return Kt(Yt((0,nt.getPublicKey)(e,!1)))}function zs(t){const e=t=>{if(vn(t))return Cn(t);if(Sn(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function Ys(t){const e=t=>{if(An(t))return BigInt(t);if(Sn(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function Gs(t){return"sierra_program"in(An(t)?pn(t):t)}function Ks(t){const e={...t};if(Gs(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Ts(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??ks(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function Ws(){return Jt(Yt(St.bI.utils.randomPrivateKey()))}function Zs(t){Pn(t,ae,2n**160n-1n,"Ethereum Address ");const e=Kt(Gt(Cn(t)).padStart(40,"0"));return bn(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}Ot(xs,{ZeroFeeEstimate:()=>Vs,compressProgram:()=>Bs,decompressProgram:()=>Cs,formatSignature:()=>Os,getFullPublicKey:()=>qs,intDAM:()=>Hs,randomAddress:()=>Rs,resourceBoundsToBigInt:()=>Ys,resourceBoundsToEstimateFeeResponse:()=>Us,resourceBoundsToHexString:()=>zs,signatureToDecimalArray:()=>Ns,signatureToHexArray:()=>Ds,toFeeVersion:()=>$s,toOverheadOverallFee:()=>Fs,toOverheadResourceBounds:()=>Ps,toTransactionVersion:()=>Ms,v3Details:()=>js,zeroResourceBounds:()=>Ls}),Ot({},{ethRandomPrivateKey:()=>Ws,validateAndParseEthAddress:()=>Zs});var Xs="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==n.g&&n.g.fetch.bind(n.g)||(()=>{throw new ii("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function Js(t){const e=t.version?Cn(t.version):Ye.V3;return e===Ye.V3||e===Ye.F3}function Qs(t,e){const n=t.split("."),r=e.split(".");return n.every((t,e)=>"*"===t||t===r[e])}function ta(t,e={allowAnyPatchVersion:!1}){return Object.values(Ue).some(n=>Qs(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}(n):n,t))}function ea(t){return new Promise(e=>{setTimeout(e,t)})}function na(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=_s(yn(t.abi)),e.sierra_program=_s(yn(t.sierra_program)),e.sierra_program=Bs(e.sierra_program),e}function ra(t){const e=An(t)?pn(t):t;return Gs(t)?na(e):{...e,..."program"in e&&{program:Bs(e.program)}}}function ia(t){return An(t.abi)?pn(t.abi):t.abi}Ot({},{Block:()=>la,createSierraContractClass:()=>na,extractAbi:()=>ia,getDefaultNodeUrl:()=>sa,getDefaultNodes:()=>aa,getSupportedRpcVersions:()=>oa,parseContract:()=>ra,validBlockTags:()=>ca,wait:()=>ea});var sa=(t,e=!1,n)=>{e||qe.info("Using default public node url, please provide nodeUrl in provider options!");const r=aa(n??$e.get("rpcVersion"))[t??De.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function aa(t){const e={...Ve};return Object.keys(e).forEach(function(n,r){e[n]=e[n].map(e=>`${e}${function(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}(t)}`)}),e}function oa(){return[...new Set(Object.values(Ue))]}var ca=Object.values(sn),la=class{hash=null;number=null;tag=null;setIdentifier(t){if(An(t))if(ir(t))this.number=parseInt(t,10);else if(In(t))this.hash=t;else{if(!ca.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else vn(t)?this.hash=Cn(t):wn(t)?this.number=t:this.tag=sn.LATEST;if(wn(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function ua(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}Ot({},{fromCallsToExecuteCalldata:()=>ha,fromCallsToExecuteCalldata_cairo1:()=>fa,getCompiledCalldata:()=>ua,getExecuteCalldata:()=>pa,getVersionsByType:()=>ga,transformCallsToMulticallArrays:()=>da});var da=t=>{const e=[],n=[];return t.forEach(t=>{const r=Vi.compile(t.calldata||[]);e.push({to:xn(t.contractAddress).toString(10),selector:xn(Xn(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:e,calldata:Vi.compile({calldata:n})}},ha=t=>{const{callArray:e,calldata:n}=da(t);return[...Vi.compile({callArray:e}),...n]},fa=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:Vi.compile(t.calldata)}));return Vi.compile({orderCalls:e})},pa=(t,e="0")=>"1"===e?fa(t):ha(t);function ga(t){return"fee"===t?{v3:Ye.F3}:{v3:Ye.V3}}var ya={headers:{"Content-Type":"application/json"},blockIdentifier:sn.LATEST,retries:200},ma=class{id="RPC081";channelSpecVersion=Ue.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(De).includes(a)?this.nodeUrl=sa(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||sa(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||$e.get("fetch")||Xs,this.blockIdentifier=r??ya.blockIdentifier,this.chainId=i,this.headers={...ya.headers,...s},this.retries=o??ya.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,wn(n)&&(this.batchClient=new mn({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),qe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new si(n,t,e);if(r instanceof ii)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Qs(this.channelSpecVersion,t)||qe.error(Me.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ta(t))throw new ii(`${Me.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Cn(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new la(r).identifier,s=Fn(t),a=Fn(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Cn(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new la(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Cn(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:i=!0,skipFeeCharge:s=!0}=e,a=new la(n).identifier,o=[];return i&&o.push(r.vn.SKIP_VALIDATE),s&&o.push(r.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Cn(t);let{retries:i}=this,a=!1,o=!1;const c=e?.retryInterval??this.transactionRetryIntervalDefault,l=e?.errorStates??[r.sI.REJECTED],u=e?.successStates??[r.sI.ACCEPTED_ON_L2,r.sI.ACCEPTED_ON_L1],d=[];let h;for(;!a;){await ea(c);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(l.includes(t)||l.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,o=!0,r}(u.includes(t)||u.includes(e))&&(a=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof si&&t.isType("TXN_HASH_NOT_FOUND")){qe.info("txLife: ",d);const t={[s.sI.RECEIVED]:Me.txEvictedFromMempool,[s.sI.PRE_CONFIRMED]:Me.consensusFailed,[s.sI.CANDIDATE]:Me.txFailsBlockBuildingValidation}[d.at(-1)];if(t)throw new Error(t)}if(i<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(i<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1,await ea(c)}return f}getStorageAt(t,e,n=this.blockIdentifier){const r=Cn(t),i=On(e),s=new la(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const i=new la(e).identifier,s={simulation_flags:n?[r.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:i,...s})}async invoke(t,e){let n;if(!Js(e))throw Error(Me.legacyTxRPC08Message);if(!Xe(e.resourceBounds))throw Error(Me.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:r.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),version:r.WY.V3,signature:Ds(t.signature),nonce:Cn(e.nonce),resource_bounds:zs(e.resourceBounds),tip:Cn(e.tip),paymaster_data:e.paymasterData.map(t=>Cn(t)),account_deployment_data:e.accountDeploymentData.map(t=>Cn(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:i},s){let a;if(!Gs(t)||!Js(s))throw Error(Me.legacyTxRPC08Message);if(!Xe(s.resourceBounds))throw Error(Me.SWOldV3);return a=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:r.wV.DECLARE,sender_address:n,compiled_class_hash:i||"",version:r.WY.V3,signature:Ds(e),nonce:Cn(s.nonce),contract_class:{sierra_program:Cs(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:zs(s.resourceBounds),tip:Cn(s.tip),paymaster_data:s.paymasterData.map(t=>Cn(t)),account_deployment_data:s.accountDeploymentData.map(t=>Cn(t)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:i},s){let a;if(!Js(s))throw Error(Me.legacyTxRPC08Message);if(!Xe(s.resourceBounds))throw Error(Me.SWOldV3);return a=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:r.wV.DEPLOY_ACCOUNT,version:r.WY.V3,signature:Ds(i),nonce:Cn(s.nonce),contract_address_salt:Cn(n||0),constructor_calldata:Vi.toHex(e||[]),class_hash:Cn(t),resource_bounds:zs(s.resourceBounds),tip:Cn(s.tip),paymaster_data:s.paymasterData.map(t=>Cn(t)),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}callContract(t,e=this.blockIdentifier){const n=new la(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Xn(t.entrypoint),calldata:Vi.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:Zs(n),to_address:Cn(r),entry_point_selector:Jn(i),payload:$n(s)},o=new la(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=ga(e);let i;if(!Js(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(i={signature:Ds(t.signature),nonce:Cn(t.nonce),resource_bounds:zs(t.resourceBounds),tip:Cn(t.tip),paymaster_data:t.paymasterData.map(t=>Cn(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Cn(t))},t.type===r.wV.INVOKE)return{type:r.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),version:Cn(t.version||n.v3),...i};if(t.type===r.wV.DECLARE){if(!Gs(t.contract))throw qe.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Cs(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Cn(t.version||n.v3),...i}}if(t.type===r.wV.DEPLOY_ACCOUNT){const{account_deployment_data:e,...r}=i;return{type:t.type,constructor_calldata:Vi.toHex(t.constructorCalldata||[]),class_hash:Cn(t.classHash),contract_address_salt:Cn(t.addressSalt||0),version:Cn(t.version||n.v3),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}},ba={};Ot(ba,{RpcChannel:()=>wa});var _a={headers:{"Content-Type":"application/json"},blockIdentifier:sn.LATEST,retries:200},wa=class{id="RPC090";channelSpecVersion=Ue.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:a,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(De).includes(a)?this.nodeUrl=sa(a,t?.default,this.channelSpecVersion):this.nodeUrl=a||sa(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||$e.get("fetch")||Xs,this.blockIdentifier=r??_a.blockIdentifier,this.chainId=i,this.headers={..._a.headers,...s},this.retries=o??_a.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,wn(n)&&(this.batchClient=new mn({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),qe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new si(n,t,e);if(r instanceof ii)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Qs(this.channelSpecVersion,t)||qe.error(Me.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ta(t))throw new ii(`${Me.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Cn(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new la(r).identifier,s=Fn(t),a=Fn(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:a,contracts_storage_keys:n})}getCompiledCasm(t){const e=Cn(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new la(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new la(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Cn(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Cn(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,a=new la(n).identifier,o=[];return r&&o.push(s.vn.SKIP_VALIDATE),i&&o.push(s.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Cn(t);let{retries:r}=this,i=!1,a=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],l=e?.successStates??[s.en.ACCEPTED_ON_L2,s.en.ACCEPTED_ON_L1],u=[];let d;for(;!i;){await ea(o);try{d=await this.getTransactionStatus(n),u.push(d.finality_status);const t=d.execution_status,e=d.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=d,a=!0,r}(l.includes(t)||l.includes(e))&&(i=!0)}catch(t){if(t instanceof Error&&a)throw t;if(t instanceof si&&t.isType("TXN_HASH_NOT_FOUND")){qe.info("txLife: ",u);const t={[s.sI.RECEIVED]:Me.txEvictedFromMempool,[s.sI.PRE_CONFIRMED]:Me.consensusFailed,[s.sI.CANDIDATE]:Me.txFailsBlockBuildingValidation}[u.at(-1)];if(t)throw new Error(t)}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let h=null;for(;null===h;){try{h=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await ea(o)}return h}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let a=r?.retries??50;const o=r?.retryInterval??500,c=[s.If.REVERTED],l=[s.en.ACCEPTED_ON_L2,s.en.ACCEPTED_ON_L1,s.en.PRE_CONFIRMED];let u;const d=(new Date).getTime();for(;a>0;){await ea(o),u=await this.getTransactionStatus(t),qe.info(`${a} ${JSON.stringify(u)} ${((new Date).getTime()-d)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(c.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=u,t}if(l.includes(r)){let t=i;for(;t===i&&a>0;){if(t=BigInt(await this.getNonceForAddress(e,sn.PRE_CONFIRMED)),qe.info(`${a} Checking new nonce ${t} ${((new Date).getTime()-d)/1e3}s.`),t!==i)return!0;await ea(o),a-=1}return!1}a-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=Cn(t),i=On(e),s=new la(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Cn(t),r=new la(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new la(e).identifier,i={simulation_flags:n?[s.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:Lt.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:Lt.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:Lt.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new la(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Xn(t.entrypoint),calldata:Vi.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,a={from_address:Zs(n),to_address:Cn(r),entry_point_selector:Jn(i),payload:$n(s)},o=new la(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:a,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=ga(e);bn(Js(t),Me.legacyTxRPC08Message),bn("transaction"!==e||Xe(t.resourceBounds),Me.SWOldV3);const r={signature:Ds(t.signature),nonce:Cn(t.nonce),resource_bounds:zs(t.resourceBounds),tip:Cn(t.tip),paymaster_data:t.paymasterData.map(t=>Cn(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Cn(t)),version:Ms(n.v3,t.version)};if(t.type===Lt.ETransactionType.INVOKE)return{type:s.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),...r};if(t.type===Lt.ETransactionType.DECLARE)return bn(Gs(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Cs(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===Lt.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:Vi.toHex(t.constructorCalldata||[]),class_hash:Cn(t.classHash),contract_address_salt:Cn(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},Ea=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==n.g&&n.g.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:Ps(t,this.resourceBoundsOverhead),overall_fee:Fs(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:Ps(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:Fs(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:An(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function va(t){return"0x3"===t.version&&"tip"in t&&An(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function Aa(t,e=!0){return t.transactions.filter(va).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function Ta(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Sa(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,a=t[r];return a+(t[i]-a)*BigInt(Math.round(1e3*s))/1000n}function Ia(t){bn(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,pe.max),n=t.reduce((t,e)=>e>t?e:t,0n),r=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),s=Math.floor(i.length/2);let a;a=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:a,modeTip:c,recommendedTip:a,p90Tip:Sa(i,90),p95Tip:Sa(i,95)}}async function ka(t,e){try{const n=await t.getBlockWithTxs(e);return wn(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new ii(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function xa(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return qe.warn(`Failed to fetch block ${e}:`,t),null}}function Ba(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(e,n)=>t-n)}async function Ca(t,e=sn.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return bn(Number.isInteger(r),"maxBlocks parameter must be an integer"),bn(r>=1,"maxBlocks parameter must be greater than or equal to 1"),bn(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),bn(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),bn(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await ka(t,e),a=Ba(n,r),o=await async function(t,e){const n=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return qe.warn(`Failed to fetch block ${e} in parallel:`,t),null}});return Promise.all(n)}(t,a),c=o.filter(t=>null!==t).flatMap(t=>Aa(t,s)),l=o.filter(t=>null!==t).length;return c.length<i?(qe.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${l} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Ta(l,c)):{...Ia(c),metrics:{blocksAnalyzed:l,transactionsTipsFound:c}}}catch(t){throw new ii(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await ka(t,e),a=Ba(n,r),o=[];let c=0;for(const e of a){const n=await xa(t,e);if(n){c+=1;const t=Aa(n,s);if(o.push(...t),o.length>=i)break}}return o.length<i?(qe.error(`Insufficient transaction data: found ${o.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Ta(c,o)):{...Ia(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new ii(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var Ra=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===rn.SUCCEEDED}static isReverted(t){return t.execution_status===rn.REVERTED}},Oa={[rn.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[rn.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Na(t){const e=Oa[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,a=s(t);n={...i(t),statusReceipt:r,value:a,match:t=>r in t?t[r](a):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,Ra.prototype),Object.defineProperty(n,"constructor",{value:Ra,writable:!1,enumerable:!1,configurable:!1}),n}Ot({},{encodeData:()=>Ka,encodeType:()=>za,encodeValue:()=>Ga,getDependencies:()=>qa,getMessageHash:()=>Za,getStructHash:()=>Wa,getTypeHash:()=>Ya,isMerkleTreeType:()=>ja,prepareSelector:()=>$a,validateTypedData:()=>Ma,verifyMessage:()=>Xa}),Ot({},{MerkleTree:()=>Da,proofMerklePath:()=>La});var Da=class t{leaves;branches=[];root;hashMethod;constructor(t,e=hs){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=hs){const[r,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,a=(s?n[i+1]:n[i-1])??"0x0",o=[...r,a],c=this.leaves.length===n.length?-1:this.branches.findIndex(t=>t.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:a,s?a:e,this.hashMethod),l,o)}};function La(t,e,n,r=hs){if(0===n.length)return t===e;const[i,...s]=n;return La(t,Da.hash(e,i,r),s,r)}var Pa={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Ua={[Lt.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ys,hashMerkleMethod:fs,escapeTypeString:t=>`"${t}"`,presetTypes:Pa},[Lt.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:gs,hashMerkleMethod:hs,escapeTypeString:t=>t,presetTypes:{}}};function Fa(t,e,{min:n,max:r}){const i=BigInt(t);bn(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Va({types:t,domain:e}){return Ua[Lt.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===Lt.TypedDataRevision.ACTIVE?Lt.TypedDataRevision.ACTIVE:Ua[Lt.TypedDataRevision.LEGACY].domain in t&&(e.revision??Lt.TypedDataRevision.LEGACY)===Lt.TypedDataRevision.LEGACY?Lt.TypedDataRevision.LEGACY:void 0}function Ha(t){try{return Cn(t)}catch(e){if(An(t))return Cn(lr(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Ma(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Va(e))}function $a(t){return In(t)?t:Xn(t)}function ja(t){return"merkletree"===t.type}function qa(t,e,n=[],r="",i=Lt.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===Lt.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),s.filter(e=>!n.includes(e)&&t[e]).reduce((e,n)=>[...e,...[n,...t[n].reduce((e,n)=>[...e,...qa(t,n.type,e,n.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function za(t,e,n=Lt.TypedDataRevision.LEGACY){const r=n===Lt.TypedDataRevision.ACTIVE?{...t,...Ua[n].presetTypes}:t,[i,...s]=qa(r,e,void 0,void 0,n),a=i?[i,...s.sort()]:[],o=Ua[n].escapeTypeString;return a.map(t=>{const e=r[t].map(t=>{const e="enum"===t.type&&n===Lt.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})`:o(e);return`${o(t.name)}:${r}`});return`${o(t)}(${e})`}).join("")}function Ya(t,e,n=Lt.TypedDataRevision.LEGACY){return Xn(za(t,e,n))}function Ga(t,e,n,r={},i=Lt.TypedDataRevision.LEGACY){if(t[e])return[e,Wa(t,e,n,i)];if(Ua[i].presetTypes[e])return[e,Wa(Ua[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map(n=>Ga(t,e.slice(0,-1),n,void 0,i)[1]);return[e,Ua[i].hashMethod(r)]}switch(e){case"enum":if(i===Lt.TypedDataRevision.ACTIVE){const[s,a]=Object.entries(n)[0],o=t[r.parent].find(t=>t.name===r.key),c=t[o.contains],l=c.find(t=>t.name===s),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((e,n)=>{if(!e)return e;const r=a[n];return Ga(t,e,r,void 0,i)[1]});return[e,Ua[i].hashMethod([u,...d])]}return[e,Ha(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find(t=>t.name===e.key);if(!ja(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map(n=>Ga(t,e,n,void 0,i)[1]),{root:a}=new Da(s,Ua[i].hashMerkleMethod);return["felt",a]}case"selector":return["felt",$a(n)];case"string":if(i===Lt.TypedDataRevision.ACTIVE){const t=hr(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Ua[i].hashMethod(r)]}return[e,Ha(n)];case"i128":if(i===Lt.TypedDataRevision.ACTIVE){const t=BigInt(n);return Fa(t,e,Se),[e,Ha(t<0n?ue+t:t)]}return[e,Ha(n)];case"timestamp":case"u128":return i===Lt.TypedDataRevision.ACTIVE&&Fa(n,e,we),[e,Ha(n)];case"felt":case"shortstring":return i===Lt.TypedDataRevision.ACTIVE&&Fa(Ha(n),e,pe),[e,Ha(n)];case"ClassHash":case"ContractAddress":return i===Lt.TypedDataRevision.ACTIVE&&Fa(n,e,pe),[e,Ha(n)];case"bool":return i===Lt.TypedDataRevision.ACTIVE&&bn(En(n),`Type mismatch for ${e} ${n}`),[e,Ha(n)];default:if(i===Lt.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,Ha(n)]}}function Ka(t,e,n,r=Lt.TypedDataRevision.LEGACY){const i=t[e]??Ua[r].presetTypes[e],[s,a]=i.reduce(([i,s],a)=>{if(void 0===n[a.name]||null===n[a.name]&&"enum"!==a.type)throw new Error(`Cannot encode data: missing data for '${a.name}'`);const o=n[a.name],c={parent:e,key:a.name},[l,u]=Ga(t,a.type,o,c,r);return[[...i,l],[...s,u]]},[["felt"],[Ya(t,e,r)]]);return[s,a]}function Wa(t,e,n,r=Lt.TypedDataRevision.LEGACY){return Ua[r].hashMethod(Ka(t,e,n,r)[1])}function Za(t,e){if(!Ma(t))throw new Error("Typed data does not match JSON schema");const n=Va(t),{domain:r,hashMethod:i}=Ua[n];return i([lr("StarkNet Message"),Wa(t.types,r,t.domain,n),e,Wa(t.types,t.primaryType,t.message,n)])}function Xa(t,e,n,r){const i=Ma(t);if(!Gn(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Gn(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Za(t,r):Cn(t),a=Array.isArray(e)?new nt.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Cn(n);return nt.verify(a,s,o)}var Ja=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new Ea;else{const e=t;if(e&&e.specVersion)if(Qs("0.8",e.specVersion))this.channel=new ze.RpcChannel({...e,waitMode:!1});else{if(!Qs("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new ba.RpcChannel({...e,waitMode:!1})}else if(Qs("0.8",$e.get("rpcVersion")))this.channel=new ze.RpcChannel({...e,waitMode:!1});else{if(!Qs("0.9",$e.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new ba.RpcChannel({...e,waitMode:!1})}this.responseParser=new Ea(e?.resourceBoundsOverhead)}}static async create(t){const e=new ze.RpcChannel({...t}),n=await e.getSpecVersion();if(ta(n)||qe.warn(`Using incompatible node spec version ${n}`),Qs("0.8",n))return new this({...t,specVersion:Ue.v0_8_1});if(Qs("0.9",n))return new this({...t,specVersion:Ue.v0_9_0});throw new ii(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(Ue).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=sn.LATEST,e=5e3){if(t===sn.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===sn.PRE_CONFIRMED?n+1:Number(Cn(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,a=!1;for(;!a;)if(await this.getBlockNumber()===r?a=!0:await ea(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof ba.RpcChannel)return async function(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}(this.channel,t);throw new ii("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);bn("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return Qn([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Na(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return Na(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof ba.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return Gs(i)?r?{cairo:"1",compiler:jr(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Lt.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Lt.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:Lt.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof ze.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof ba.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return async function(t,e,n,r,i,s){const a=Ma(e);if(!Gn(e)&&!a)throw new Error("message has a wrong format.");if(!Gn(r))throw new Error("accountAddress shall be a BigNumberish");const o=a?Za(e,r):Cn(e),c=i?[i]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const e of c)try{const i=await t.callContract({contractAddress:Cn(r),entrypoint:e,calldata:Vi.compile({hash:xn(o).toString(),signature:Os(n)})});if(l.nokResponse.includes(i[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(l.error.some(e=>t.message.includes(e)))return!1;u=t}throw Error(`Signature verification Error: ${u}`)}(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=Ks(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof ii)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===Lt.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return Ca(this,t,e)}};Ot({},{StarknetIdContract:()=>co,StarknetIdIdentityContract:()=>uo,StarknetIdMulticallContract:()=>fo,StarknetIdPfpContract:()=>mo,StarknetIdPopContract:()=>_o,StarknetIdVerifierContract:()=>go,dynamicCallData:()=>Ao,dynamicFelt:()=>vo,execution:()=>Eo,getStarknetIdContract:()=>lo,getStarknetIdIdentityContract:()=>ho,getStarknetIdMulticallContract:()=>po,getStarknetIdPfpContract:()=>bo,getStarknetIdPopContract:()=>wo,getStarknetIdVerifierContract:()=>yo,isStarkDomain:()=>To,useDecoded:()=>ao,useEncoded:()=>oo});var Qa="abcdefghijklmnopqrstuvwxyz0123456789-",to=BigInt(Qa.length+1),eo="",no=BigInt(Qa.length),ro=BigInt(eo.length),io=BigInt(eo.length+1);function so(t){let e=0;for(;t.endsWith(eo[eo.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function ao(t){let e="";return t.forEach(t=>{for(;t!==ae;){const n=t%to;if(t/=to,n===BigInt(Qa.length)){const n=t/io;if(n===ae){const r=t%io;t=n,e+=r===ae?Qa[0]:eo[Number(r)-1]}else e+=eo[Number(t%ro)],t/=ro}else e+=Qa[Number(n)]}const[n,r]=so(e);r&&(e=n+(r%2==0?eo[eo.length-1].repeat(r/2-1)+eo[0]+Qa[1]:eo[eo.length-1].repeat((r-1)/2+1))),e+="."}),e?e.concat("stark"):e}function oo(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(eo[0]+Qa[1])){const[e,n]=so(t.substring(0,t.length-2));t=e+eo[eo.length-1].repeat(2*(n+1))}else{const[e,n]=so(t);n&&(t=e+eo[eo.length-1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=Qa.indexOf(i),a=BigInt(Qa.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===Qa[0]?(e+=n*no,n*=to,n*=to):(e+=n*a,n*=to);else if(-1!==eo.indexOf(i)){e+=n*no,n*=to;const s=(r===t.length-1?1:0)+eo.indexOf(i);e+=n*BigInt(s),n*=ro}}return e}var co={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function lo(t){switch(t){case Le.SN_MAIN:return co.MAINNET;case Le.SN_SEPOLIA:return co.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var uo={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function ho(t){switch(t){case Le.SN_MAIN:return uo.MAINNET;case Le.SN_SEPOLIA:return uo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var fo="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function po(t){switch(t){case Le.SN_MAIN:case Le.SN_SEPOLIA:return fo;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var go={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function yo(t){switch(t){case Le.SN_MAIN:return go.MAINNET;case Le.SN_SEPOLIA:return go.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var mo={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function bo(t){switch(t){case Le.SN_MAIN:return mo.MAINNET;case Le.SN_SEPOLIA:return mo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var _o={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function wo(t){switch(t){case Le.SN_MAIN:return _o.MAINNET;case Le.SN_SEPOLIA:return _o.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Eo(t,e=void 0,n=void 0){return new Kr({Static:t,IfEqual:e?Yr(e[0],e[1],e[2]):void 0,IfNotEqual:n?Yr(n[0],n[1],n[2]):void 0})}function vo(t,e=void 0){return new Kr({Hardcoded:t,Reference:e?Yr(e[0],e[1]):void 0})}function Ao(t,e=void 0,n=void 0){return new Kr({Hardcoded:t,Reference:e?Yr(e[0],e[1]):void 0,ArrayReference:n?Yr(n[0],n[1]):void 0})}function To(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var So=class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,a,o){return t.getStarkProfile(this,e,n,r,i,s,a,o)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??lo(r);try{const n=ao((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:Vi.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!To(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??lo(i);try{const e=r.replace(".stark","").split(".").map(t=>oo(t).toString(10));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:Vi.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,a,o){const c=await t.getChainId(),l=n??lo(c),u=r??ho(c),d=i??yo(c),h=s??bo(c),f=a??wo(c),p=o??po(c);try{const n=[{execution:Eo({}),to:Ao(l),selector:Ao(Xn("address_to_domain")),calldata:[Ao(e),Ao("0")]},{execution:Eo({}),to:vo(l),selector:vo(Xn("domain_to_id")),calldata:[Ao(void 0,void 0,[0,0])]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("twitter")),Ao(d),Ao("0")]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("github")),Ao(d),Ao("0")]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("discord")),Ao(d),Ao("0")]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("proof_of_personhood")),Ao(f),Ao("0")]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("nft_pp_contract")),Ao(h),Ao("0")]},{execution:Eo({}),to:vo(u),selector:vo(Xn("get_extended_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(lr("nft_pp_id")),Ao("2"),Ao(h),Ao("0")]},{execution:Eo(void 0,void 0,[6,0,0]),to:vo(void 0,[6,0]),selector:vo(Xn("tokenURI")),calldata:[Ao(void 0,[7,1]),Ao(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:Vi.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=ao(e[0].slice(1).map(t=>BigInt(t))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,a="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:a,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map(t=>ur(t)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function Io(t){return oo(t.endsWith(".brother")?t.replace(".brother",""):t)}function ko(t){const e=ao([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function xo(t){return Le.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var Bo=class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??xo();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Vi.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return ko(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??xo();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:Vi.compile({domain:Io(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??xo();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Vi.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=ko(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:Vi.compile({domain:Io(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},Co=class extends((0,It.Mixin)(Ja,So,Bo)){},Ro=(new Ja({default:!0}),class{pk;constructor(t=nt.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?Yt(t):Cn(t)}async getPubKey(){return nt.getStarkKey(this.pk)}async signMessage(t,e){const n=Za(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=pa(t,e.cairoVersion);let r;if(!Object.values(Lt.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=ls({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:Hs(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:Hs(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=Vi.compile(t.constructorCalldata);let n;if(!Object.values(Lt.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=ds({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:Hs(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Hs(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(Lt.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=us({...n,version:n.version,nonceDataAvailabilityMode:Hs(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Hs(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return nt.sign(t,this.pk)}});function Oo(t){return new br(t).toBigInt()}function No(t){return br.is(t)}function Do(t){return new br(t).toUint256HexString()}function Lo(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function Po(t){const e=t.calldata??[],n=Array.isArray(e)?e:Vi.compile(e);return{to:t.contractAddress,selector:Xn(t.entrypoint),calldata:n}}function Uo(t,e){const n=Po(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Fo(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Vo(t,e,n,r,i){return"1"===i?{types:dn,primaryType:"OutsideExecution",domain:Fo(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(t=>Uo(t,i))}}:{types:hn,primaryType:"OutsideExecution",domain:Fo(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(t=>Uo(t,i))}}}function Ho(t){const e=t.outsideExecution,n=Os(t.signature);return Vi.compile({outside_execution:e,signature:n})}function Mo(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Cn(t.signerAddress),entrypoint:e,calldata:Ho(t)}})}async function $o(t,e,n){const r={contractAddress:Cn(e),entrypoint:"supports_interface",calldata:[Cn(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}Ot({},{bnToUint256:()=>Do,isUint256:()=>No,uint256ToBN:()=>Oo}),Ot({},{buildExecuteFromOutsideCall:()=>Mo,buildExecuteFromOutsideCallData:()=>Ho,getOutsideCall:()=>Po,getTypedData:()=>Vo,toOutsideCallV2:()=>Lo}),Ot({},{supportsInterface:()=>$o}),Ot({},{assertCallsAreStrictlyEqual:()=>qo,assertPaymasterTransactionSafety:()=>zo,getDefaultPaymasterNodeUrl:()=>jo});var jo=(t,e=!1)=>{e||qe.info("Using default public node url, please provide nodeUrl in provider options!");const n=He[t??De.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function qo(t,e){const n="Provided calls are not strictly equal to the returned calls";bn(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=Lo(e[r]),a=t=>xn(t).toString(16).toLowerCase();bn(a(i.contractAddress)===a(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),bn(Xn(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const o=Vi.toCalldata(i.calldata),c=Vi.toCalldata(s.Calldata);bn(o.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${o.length}, Got length: ${c.length}`);for(let t=0;t<o.length;t+=1)bn(BigInt(o[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${o[t]}, Got: ${c[t]}`)}}var zo=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;qo(e,i),((t,e)=>{const n=Lo(t[t.length-1]);bn(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(bn(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=Lo(t[t.length-1]),r=Vi.toCalldata(n.Calldata)[1];bn(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},Yo=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},Go=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,Ko=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},Wo={"Content-Type":"application/json"},Zo=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...Wo,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??jo(void 0),this.headers={...Wo,...e.headers},this.baseFetch=e.baseFetch??Xs,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(De).includes(n)?this.nodeUrl=jo(n,e?.default):this.nodeUrl=n||jo(void 0,e?.default),this.baseFetch=i??Xs,this.headers={...Wo,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yn(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new si(n,t,e);if(r instanceof ii)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map(t=>({to:t.contractAddress,selector:Xn(t.entrypoint),calldata:Vi.toHex(t.calldata)})))}};break;default:n=t}var r;const i={version:e.version,fee_mode:Yo(e.feeMode),time_bounds:Go(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),a={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:Ko(s.parameters),fee:a};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:Ko(s.parameters),fee:a};default:return{type:"deploy",deployment:s.deployment,parameters:Ko(s.parameters),fee:a}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Ds(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:Yo(e.feeMode),time_bounds:Go(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},Xo=new Zo({default:!0}),Jo=class{address;entryPoint;constructor(t,e){this.address=t??ke.ADDRESS,this.entryPoint=e??ke.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:a}=t,o=ua(s,()=>{if(a){const t=new Vi(a),e=Object.values(s);return t.validate(an,"constructor",e),t.compile("constructor",e)}return Vi.compile(s)}),c=r??Rs();return{call:{contractAddress:Cn(this.address),entrypoint:this.entryPoint,calldata:[n,c,jn(i),o.length,...o]},address:ms(i?nt.pedersen(e,c):c,n,o,i?this.address:0)}});return{calls:n.map(t=>t.call),addresses:n.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Ln(t.from_address)===Ln(Cn(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},Qo=new Jo(ke.ADDRESS,ke.ENTRYPOINT),tc=(new Jo(Ie.ADDRESS,Ie.ENTRYPOINT),class extends Co{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:a,defaultTipType:o}=t;super(e),this.address=n.toLowerCase(),this.signer=An(r)||r instanceof Uint8Array?new Ro(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??$e.get("transactionVersion"),this.paymaster=a?new Zo(a):Xo,this.deployer=t.deployer??Qo,this.defaultTipType=o??$e.get("defaultTipType"),qe.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new ii("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return xn(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:Lt.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){bn(Gs(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:Lt.ETransactionType.DECLARE,payload:Ks(t)}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=Vi.compile(n),a=r??ms(e,t,s,0),o=[{type:Lt.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:a}}];return(await this.estimateFeeBulk(o,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[Us(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,a=await this.resolveDetailsWithTip(e),o=await this.accountInvocationsFactory(t,{...js(a),versions:[Ms($s(this.transactionVersion)||Ke.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(o,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:a}=e,o=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...js(o),versions:[this.resolveTransactionVersion(a)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:Lt.ETransactionType.INVOKE,payload:n}],{...js(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:a.contractAddress,calldata:a.calldata,signature:a.signature},{...js(r),resourceBounds:a.resourceBounds,nonce:a.nonce,version:a.version})}async fastExecute(t,e={},n={}){bn(this.channel instanceof ba.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),bn(this.channel.blockIdentifier===sn.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,sn.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i);return{txResult:s,isReady:await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n)}}async declareIfNot(t,e={}){const n=Ks(t);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){bn(Gs(t.contract),Me.declareNonSierra);const n=Ks(t),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:Lt.ETransactionType.DECLARE,payload:n}],{...js(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:a.senderAddress,signature:a.signature,contract:a.contract,compiledClassHash:a.compiledClassHash},{...js(r),nonce:a.nonce,resourceBounds:a.resourceBounds,version:a.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(""!==n.transaction_hash){const t=await this.waitForTransaction(n.transaction_hash,e);n={...n,...t}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=Vi.compile(e),a=r??ms(n,t,s,0),o=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let l=c;l||(l=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:a},o)).resourceBounds);const u=(await this.accountInvocationsFactory([{type:Lt.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:a}}],{...js(o),resourceBounds:l,versions:[this.resolveTransactionVersion(i.version)],nonce:ae,skipValidate:!1}))[0];return super.deployAccountContract({classHash:u.classHash,addressSalt:u.addressSalt,constructorCalldata:u.constructorCalldata,signature:u.signature},{...js(o),nonce:u.nonce,resourceBounds:u.resourceBounds,version:u.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Za(t,this.address)}async getSnip9Version(){return await $o(this,this.address,Ce)?"2":await $o(this,this.address,Be)?"1":"0"}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Cn(t)]},n=await this.callContract(e);return 0n!==BigInt(n[0])}catch(t){throw new Error(`Failed to check if nonce is valid: ${t}`)}}async getSnip9Nonce(){const t=Rs();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!In(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(`The caller ${t.caller} is not valid.`);const i=In(t.caller)?t.caller:xe,s=[e].flat(),a=n??await this.getSnip9Version();if(!a)throw new Error("This account is not handling outside transactions.");const o=r?Cn(r):await this.getSnip9Nonce(),c=Vo(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},o,s,a),l=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:o,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(Po)},signature:l,signerAddress:this.address,version:a}}async executeFromOutside(t,e){const n=Mo(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return Ms(this.transactionVersion||Ke.V3,t)}async buildInvocation(t,e){const n=pa(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...js(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=Ks(t),s=ra(r);bn(!_n(i)&&(e.version===Ke.F3||e.version===Ke.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const a=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...js(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:a,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=Vi.compile(n),a=r??ms(e,t,s,0),o=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...js(i),classHash:t,contractAddress:a,addressSalt:e,constructorCalldata:s});return{...js(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:o}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),a=await this.getChainId(),o=e.versions.map(t=>Ms(t)),c="payload"in t[0]?t[0].payload:t[0],l=t[0].type===Lt.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,n)=>{const c="payload"in t?t.payload:t,u={...js(e),walletAddress:this.address,nonce:xn(Number(s)+n),chainId:a,cairoVersion:l,version:o[0],skipValidate:i},d={type:t.type,nonce:xn(Number(s)+n),blockIdentifier:r,version:o[0]};if(t.type===Lt.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),u);return{...d,...t,...u}}if(t.type===Lt.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,u);return{...d,...e,...u,type:Lt.ETransactionType.INVOKE}}if(t.type===Lt.ETransactionType.DECLARE){bn(Gs(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,u);return{...d,...t,...u}}if(t.type===Lt.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,u);return{...d,...t,...u}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&"0"===await this.getSnip9Version())throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return r=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Ds(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Ds(n)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);zo(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}});function ec(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function nc(t){return t.request({type:"wallet_getPermissions"})}function rc(t,e){return t.request({type:"wallet_watchAsset",params:e})}function ic(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function sc(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function ac(t){return t.request({type:"wallet_requestChainId"})}function oc(t){return t.request({type:"wallet_deploymentData"})}function cc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function lc(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function uc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function dc(t){return t.request({type:"wallet_supportedSpecs"})}function hc(t,e){t.on("accountsChanged",e)}function fc(t,e){t.on("networkChanged",e)}function pc(t){return"event"===t.type}function gc(t){const e=t.filter(t=>pc(t)&&"struct"===t.kind),n=t.filter(t=>pc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let r=[],{name:i}=e,s=!1;const a=t=>t.type===i;for(;;){const t=n.find(t=>t.variants.some(a));if(_n(t))break;const e=t.variants.find(a);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const o=r.pop();let c={[Kt(nt.keccak($t(o)).toString(16))]:e};for(;r.length>0;)c={[Kt(nt.keccak($t(r.pop())).toString(16))]:c};return c={...c},mc(t,c)},{})}function yc(t){return Mr(t)?gc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[Kt(nt.keccak($t(n)).toString(16))]:r}},{})}(t)}function mc(t,e){const n={...t};return Sn(t)&&Sn(e)&&Object.keys(e).forEach(r=>{Sn(e[r])?r in t?n[r]=mc(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function bc(t,e,n,r,i){return t.flat().reduce((t,s)=>{const a=JSON.parse(JSON.stringify(s));let o=e[a.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=a.keys.shift();bn(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const l=a.keys[Symbol.iterator](),u=a.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Ci({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Ci({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[o.name]})}),"block_hash"in a&&(c.block_hash=a.block_hash),"block_number"in a&&(c.block_number=a.block_number),"transaction_hash"in a&&(c.transaction_hash=a.transaction_hash),t.push(c),t},[])}Ot({},{addDeclareTransaction:()=>lc,addInvokeTransaction:()=>cc,addStarknetChain:()=>ic,deploymentData:()=>oc,getPermissions:()=>nc,onAccountChange:()=>hc,onNetworkChanged:()=>fc,requestAccounts:()=>ec,requestChainId:()=>ac,signMessage:()=>uc,supportedSpecs:()=>dc,switchStarknetChain:()=>sc,watchAsset:()=>rc}),Ot({},{getAbiEvents:()=>yc,isAbiEvent:()=>pc,parseEvents:()=>bc}),Lt.TypedDataRevision;const _c={STRK:"0x0408163bfcfc2d76f34b444cb55e09dace5905cf84c0884e4637c2c0f06ab6ed",ETH:"0x02cf0dc1d9e8c7731353dd15e6f2f22140120ef2d27116b982fa4fed87f6fef5",USDC:"0x02caae365e67921979a4e5c16dd70eaa5776cfc6a9592bcb903d91933aaf2552"},wc={STRK:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",ETH:"0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",USDC:"0x053b40a647cedfca6ca84f542a0fe36736031905a9639a7f19a3c1e66bfd5080"};function Ec(t){return t?"0x"+t.replace(/^0x/i,"").padStart(64,"0"):t}let vc=null,Ac=null,Tc=null;async function Sc(){return await vc.getNonceForAddress(Tc.address)}function Ic(e,n="STRK"){if(!vc)throw new Error("Provider not initialized");const r=Ec(_c[n]);if(!r)throw new Error(`Unknown token: ${n}`);return Ac=new t.Account(e,r,vc),!0}const kc={ping:async()=>"pong",init:async({rpcUrl:t,tongoPrivateKey:e,token:n,starkAddress:r,starkPrivateKey:i})=>(function(t){vc=new Co({nodeUrl:t})}(t),Ic(e,n||"STRK"),r&&i&&function(t,e){if(!vc)throw new Error("Provider not initialized");Tc=new tc({provider:vc,address:Ec(t),signer:e})}(r,i),{success:!0}),switchToken:async({tongoPrivateKey:t,token:e})=>(Ic(t,e),{success:!0}),derivePublicKey:async({privateKey:e})=>{const n="string"==typeof e?BigInt(e):e,r=(0,t.derivePublicKey)(n);return{x:r.x.toString(),y:r.y.toString()}},getTongoAddress:async()=>{if(!Ac)throw new Error("Tongo account not initialized");return Ac.tongoAddress()},pubKeyToBase58:async({x:e,y:n})=>(0,t.pubKeyAffineToBase58)({x:BigInt(e),y:BigInt(n)}),base58ToPubKey:async({base58:e})=>{const n=(0,t.pubKeyBase58ToAffine)(e);return{x:n.x.toString(),y:n.y.toString()}},getState:async()=>{if(!Ac)throw new Error("Tongo account not initialized");const t=await Ac.state();return{balance:t.balance.toString(),pending:t.pending.toString(),nonce:t.nonce.toString()}},getRate:async()=>{if(!Ac)throw new Error("Tongo account not initialized");return(await Ac.rate()).toString()},erc20ToTongo:async({amount:t})=>{if(!Ac)throw new Error("Tongo account not initialized");return(await Ac.erc20ToTongo(BigInt(t))).toString()},tongoToErc20:async({amount:t})=>{if(!Ac)throw new Error("Tongo account not initialized");return(await Ac.tongoToErc20(BigInt(t))).toString()},fund:async({amount:t,sender:e})=>{if(!Ac)throw new Error("Tongo account not initialized");if(!Tc)throw new Error("Stark account not initialized");const n=await Ac.fund({amount:BigInt(t),sender:Ec(e)}),r=[];n.approve&&r.push(n.approve),r.push(n.toCalldata());const i=await Sc();return{txHash:(await Tc.execute(r,{nonce:i})).transaction_hash}},transfer:async({amount:e,recipientBase58:n,sender:r})=>{if(!Ac)throw new Error("Tongo account not initialized");if(!Tc)throw new Error("Stark account not initialized");const i=(0,t.pubKeyBase58ToAffine)(n),s=await Ac.transfer({amount:BigInt(e),to:i,sender:Ec(r)}),a=await Sc();return{txHash:(await Tc.execute([s.toCalldata()],{nonce:a})).transaction_hash}},withdraw:async({amount:t,to:e,sender:n})=>{if(!Ac)throw new Error("Tongo account not initialized");if(!Tc)throw new Error("Stark account not initialized");const r=await Ac.withdraw({amount:BigInt(t),to:Ec(e),sender:Ec(n)}),i=await Sc();return{txHash:(await Tc.execute([r.toCalldata()],{nonce:i})).transaction_hash}},rollover:async({sender:t})=>{if(!Ac)throw new Error("Tongo account not initialized");if(!Tc)throw new Error("Stark account not initialized");const e=await Ac.rollover({sender:Ec(t)}),n=await Sc();return{txHash:(await Tc.execute([e.toCalldata()],{nonce:n})).transaction_hash}},getTxHistory:async({fromBlock:t=0})=>{if(!Ac)throw new Error("Tongo account not initialized");return(await Ac.getTxHistory(t)).map(t=>{var e,n;return{...t,amount:null===(e=t.amount)||void 0===e?void 0:e.toString(),nonce:null===(n=t.nonce)||void 0===n?void 0:n.toString()}})},queryERC20Balance:async({token:t,address:e})=>{if(!vc)throw new Error("Provider not initialized");const n=wc[t];if(!n)throw new Error(`Unknown token: ${t}`);const r=await vc.callContract({contractAddress:Ec(n),entrypoint:"balanceOf",calldata:[Ec(e)]});return(BigInt(r[0]||"0")+(BigInt(r[1]||"0")<<128n)).toString()},generateKeypair:async()=>{const t=xs.randomAddress();return{privateKey:t,publicKey:ns.starkCurve.getStarkKey(t)}}};window.addEventListener("message",async t=>{let e;try{e="string"==typeof t.data?JSON.parse(t.data):t.data}catch{return}const{id:n,command:r,params:i}=e;if(n&&r)try{const t=kc[r];if(!t)throw new Error(`Unknown command: ${r}`);const e=await t(i||{});window.ReactNativeWebView.postMessage(JSON.stringify({id:n,result:e}))}catch(t){window.ReactNativeWebView.postMessage(JSON.stringify({id:n,error:t.message||String(t),stack:t.stack}))}}),window.ReactNativeWebView.postMessage(JSON.stringify({type:"bridge-ready"}))})()})();</script></body></html>