<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><script>window.onerror=function(m,s,l,c,e){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:'error',message:m,source:s,line:l,col:c,stack:e&&e.stack}))}</script><script defer="defer">/*! For license information please see bridge.js.LICENSE.txt */
(()=>{var t={5556(t,e,n){"use strict";var r,i=n(8287).hp,s=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,d=(t,e)=>{for(var n in e)o(t,n,{get:e[n],enumerable:!0})},h=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of c(e))l.call(t,i)||i===n||o(t,i,{get:()=>e[i],enumerable:!(r=a(e,i))||r.enumerable});return t},f=(t,e,n)=>(h(t,e,"default"),n&&h(n,e,"default")),p=(t,e,n)=>(n=null!=t?s(u(t)):{},h(!e&&t&&t.__esModule?n:o(n,"default",{value:t,enumerable:!0}),t)),g={};d(g,{AbiParser1:()=>Lr,AbiParser2:()=>Dr,AbiParserInterface:()=>dr,Account:()=>hc,AccountInterface:()=>fc,BatchClient:()=>ue,BlockStatus:()=>jt,BlockTag:()=>Yt,CairoByteArray:()=>Er,CairoBytes31:()=>hr,CairoCustomEnum:()=>ir,CairoFelt:()=>mn,CairoFelt252:()=>bn,CairoFixedArray:()=>Mr,CairoInt128:()=>Cr,CairoInt16:()=>xr,CairoInt32:()=>Br,CairoInt64:()=>Rr,CairoInt8:()=>kr,CairoOption:()=>or,CairoOptionVariant:()=>sr,CairoResult:()=>cr,CairoResultVariant:()=>ar,CairoUint128:()=>Ir,CairoUint16:()=>Ar,CairoUint256:()=>In,CairoUint32:()=>wr,CairoUint512:()=>Rn,CairoUint64:()=>Tr,CairoUint8:()=>vr,CairoUint96:()=>Sr,CallData:()=>ni,Contract:()=>Fc,ContractInterface:()=>Vc,Deployer:()=>cc,DeployerInterface:()=>uc,EDAMode:()=>Ut,EDataAvailabilityMode:()=>Pt,ETH_ADDRESS:()=>Xt,ETransactionExecutionStatus:()=>Mt,ETransactionStatus:()=>Ht,ETransactionVersion:()=>Nt,ETransactionVersion2:()=>Lt,ETransactionVersion3:()=>Dt,EntryPointType:()=>Ot,EthSigner:()=>Ra,Int:()=>Wt,LedgerSigner:()=>Ca,LedgerSigner111:()=>Ca,LedgerSigner221:()=>Fa,LedgerSigner231:()=>Ha,LibraryError:()=>gr,Literal:()=>Zt,LogLevelIndex:()=>Bt,NON_ZERO_PREFIX:()=>Jt,OutsideExecutionTypesV1:()=>te,OutsideExecutionTypesV2:()=>ee,OutsideExecutionVersion:()=>ne,PaymasterInterface:()=>oc,PaymasterRpc:()=>sc,Provider:()=>wa,ProviderInterface:()=>Ea,RPC:()=>m,RPC08:()=>Ct,RPC09:()=>Js,RPCResponseParser:()=>so,ReceiptTx:()=>yo,ResponseParser:()=>Hc,RpcChannel:()=>to,RpcError:()=>yr,RpcProvider:()=>wa,Signer:()=>Ta,SignerInterface:()=>Aa,Subscription:()=>ro,TimeoutError:()=>mr,TransactionExecutionStatus:()=>qt,TransactionFinalityStatus:()=>zt,TransactionType:()=>$t,TypedDataRevision:()=>m.TypedDataRevision,UINT_128_MAX:()=>_n,UINT_128_MIN:()=>Bn,UINT_256_HIGH_MAX:()=>An,UINT_256_HIGH_MIN:()=>Sn,UINT_256_LOW_MAX:()=>vn,UINT_256_LOW_MIN:()=>Tn,UINT_256_MAX:()=>wn,UINT_256_MIN:()=>En,UINT_512_MAX:()=>kn,UINT_512_MIN:()=>xn,Uint:()=>Gt,ValidateType:()=>Kt,WalletAccount:()=>xc,WebSocketChannel:()=>io,WebSocketNotConnectedError:()=>br,addAddressPadding:()=>La,byteArray:()=>hn,cairo:()=>gn,config:()=>xt,constants:()=>y,contractClassResponseToLegacyCompiledContract:()=>_s,createAbiParser:()=>Pr,createTransactionReceipt:()=>bo,defaultDeployer:()=>lc,defaultPaymaster:()=>ac,defaultProvider:()=>va,ec:()=>Ei,encode:()=>A,eth:()=>ws,events:()=>Bc,extractContractHashes:()=>bs,fastParsingStrategy:()=>Nr,getAbiVersion:()=>Ur,getChecksumAddress:()=>Pa,getGasPrices:()=>Ho,getLedgerPathBuffer:()=>Oa,getLedgerPathBuffer111:()=>Oa,getLedgerPathBuffer221:()=>Va,getTipStatsFromBlocks:()=>go,hash:()=>ri,hdParsingStrategy:()=>Or,isAccount:()=>Qt,isNoConstructorValid:()=>Fr,isPendingBlock:()=>Cs,isPendingStateUpdate:()=>Ns,isPendingTransaction:()=>Os,isRPC08Plus_ResourceBounds:()=>Ft,isRPC08Plus_ResourceBoundsBN:()=>Vt,isSierra:()=>ms,isSupportedSpecVersion:()=>xs,isV3Tx:()=>Is,isVersion:()=>ks,json:()=>re,legacyDeployer:()=>dc,logger:()=>Rt,merkle:()=>wo,num:()=>de,outsideExecution:()=>Ma,parseCalldataField:()=>zr,paymaster:()=>Xa,provider:()=>Ss,selector:()=>ze,shortString:()=>en,src5:()=>Wa,stark:()=>Zi,starknetId:()=>jo,toAnyPatchVersion:()=>Bs,toApiVersion:()=>Rs,transaction:()=>js,typedData:()=>_o,uint256:()=>Ia,units:()=>Mc,v2hash:()=>wi,v3hash:()=>si,validateAndParseAddress:()=>Da,validateChecksumAddress:()=>Ua,verifyMessageInStarknet:()=>Vo,wallet:()=>pc}),t.exports=(r=g,h(o({},"__esModule",{value:!0}),r));var y={};d(y,{ADDR_BOUND:()=>J,API_VERSION:()=>W,BaseUrl:()=>_t,DEFAULT_GLOBAL_CONFIG:()=>Tt,HARDENING_4BYTES:()=>bt,HARDENING_BYTE:()=>mt,IS_BROWSER:()=>S,LegacyUDC:()=>ht,MASK_250:()=>K,MASK_31:()=>G,MAX_STORAGE_ITEM_SIZE:()=>X,NetworkName:()=>wt,OutsideExecutionCallerAny:()=>pt,PAYMASTER_RPC_NODES:()=>It,PRIME:()=>Z,RANGE_FELT:()=>tt,RANGE_I128:()=>dt,RANGE_I16:()=>ct,RANGE_I32:()=>ut,RANGE_I64:()=>lt,RANGE_I8:()=>at,RANGE_U128:()=>ot,RANGE_U16:()=>nt,RANGE_U32:()=>rt,RANGE_U64:()=>it,RANGE_U8:()=>et,RANGE_U96:()=>st,RPC_DEFAULT_NODES:()=>St,SNIP9_V1_INTERFACE_ID:()=>gt,SNIP9_V2_INTERFACE_ID:()=>yt,SYSTEM_MESSAGES:()=>kt,StarknetChainId:()=>Et,SupportedRpcVersion:()=>At,TEXT_TO_FELT_MAX_LEN:()=>q,TransactionHashPrefix:()=>vt,UDC:()=>ft,ZERO:()=>Y});var m={};d(m,{JRPC:()=>b,PAYMASTER_API:()=>E.PAYMASTER_API,RPCSPEC08:()=>_,RPCSPEC09:()=>w});var b={},_=p(n(5319)),w=p(n(2066)),E=n(5319),v={};f(v,n(2066)),f(m,v);var A={};d(A,{IS_BROWSER:()=>S,addHexPrefix:()=>L,arrayBufferToString:()=>I,atobUniversal:()=>R,bigIntToUint8Array:()=>j,btoaUniversal:()=>C,buf2hex:()=>O,calcByteLength:()=>P,concatenateArrayBuffer:()=>H,hexStringToUint8Array:()=>M,padLeft:()=>D,pascalToSnake:()=>V,removeHexPrefix:()=>N,sanitizeBytes:()=>U,sanitizeHex:()=>F,stringToUint8Array:()=>$,uint8ArrayToBigInt:()=>z,utf8ToArray:()=>x,utf8ToBigInt:()=>B,utf8ToUint8Array:()=>k});var T=n(3203),S="undefined"!=typeof window;function I(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function k(t){return(new TextEncoder).encode(t)}var x=k;function B(t){return z(k(t))}function R(t){return T.base64.decode(t)}function C(t){return T.base64.encode(new Uint8Array(t))}function O(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function N(t){return t.replace(/^0x/i,"")}function L(t){return`0x${N(t)}`}function D(t,e,n="0"){return function(t,e,n,r="0"){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function P(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function U(t,e=8,n="0"){return D(t,P(t,e),n)}function F(t){const e=U(N(t),2);return e?L(e):e}var V=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function H(t){const e=t.reduce((t,e)=>t+e.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(t,r),r+=t.byteLength}),n}function M(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: "${t}" contains non-hexadecimal characters`);const n=e.length%2!=0?`0${e}`:e,r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2)r[t/2]=parseInt(n.substring(t,t+2),16);return r}function $(t){return/^0[xX][0-9a-fA-F]*$/.test(t)?M(t):function(t){return/^[0-9]+$/.test(t)}(t)?j(BigInt(t)):k(t)}function j(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function z(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var q=31,Y=0n,K=2n**250n-1n,G=2n**31n-1n,W=Y,Z=2n**251n+17n*2n**192n+1n,X=256n,J=2n**251n-X,Q=(t,e)=>({min:t,max:e}),tt=Q(Y,Z-1n),et=Q(Y,255n),nt=Q(Y,65535n),rt=Q(Y,2n**32n-1n),it=Q(Y,2n**64n-1n),st=Q(Y,2n**96n-1n),ot=Q(Y,2n**128n-1n),at=Q(-128n,127n),ct=Q(-32768n,32767n),ut=Q(-(2n**31n),2n**31n-1n),lt=Q(-(2n**63n),2n**63n-1n),dt=Q(-(2n**127n),2n**127n-1n),ht={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ft={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},pt="0x414e595f43414c4c4552",gt="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",yt="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",mt=128,bt=2147483648n,_t={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},wt={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Et={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},vt={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},At={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Tt={rpcVersion:"0.9.0",transactionVersion:m.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},St={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},It={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},kt={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},xt=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Tt}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Bt={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Rt=class t{static instance;config;constructor(){this.config=xt}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Bt[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(Bt[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Bt).filter(t=>this.shouldLog(Bt[t])&&"OFF"!==t)}}.getInstance(),Ct={};d(Ct,{RpcChannel:()=>Xs});var Ot={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},{ETransactionVersion:Nt}=w,{ETransactionVersion2:Lt}=w,{ETransactionVersion3:Dt}=w,{EDataAvailabilityMode:Pt}=_,{EDAMode:Ut}=_;function Ft(t){return"l1_data_gas"in t}function Vt(t){return"l1_data_gas"in t}var{ETransactionStatus:Ht}=_,{ETransactionExecutionStatus:Mt}=_,{ETransactionType:$t}=w,{EBlockStatus:jt}=w,{ETransactionFinalityStatus:zt}=w,{ETransactionExecutionStatus:qt}=w,{EBlockTag:Yt}=w,Kt={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Gt={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Wt={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},Zt={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Xt="core::starknet::eth_address::EthAddress",Jt="core::zeroable::NonZero::";function Qt(t){return"execute"in t}var te={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},ee={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},ne={UNSUPPORTED:"0",V1:"1",V2:"2"},re={};d(re,{parse:()=>oe,parseAlwaysAsBig:()=>ae,stringify:()=>ce});var ie=p(n(7631)),se=t=>{if(!ie.isInteger(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},oe=t=>ie.parse(String(t),void 0,se),ae=t=>ie.parse(String(t),void 0,ie.parseNumberAndBigInt),ce=(t,e,n,r)=>ie.stringify(t,e,n,r),ue=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ce(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const s=await this.batchPromises[r];delete this.batchPromises[r];const o=s.find(t=>t.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return o}};function le(t,e){if(!t)throw new Error(e||"Assertion failure")}var de={};d(de,{addPercent:()=>He,assertInRange:()=>Ce,bigNumberishArrayToDecimalStringArray:()=>Oe,bigNumberishArrayToHexadecimalStringArray:()=>Ne,cleanHex:()=>Re,getDecimalString:()=>De,getHexString:()=>Pe,getHexStringArray:()=>Ue,getNext:()=>je,hexToBytes:()=>Ve,hexToDecimalString:()=>Be,isBigNumberish:()=>$e,isHex:()=>Ee,isHexString:()=>ve,isStringWholeNumber:()=>Le,stringToSha256ToArrayBuff4:()=>Me,toBigInt:()=>Ae,toCairoBool:()=>Fe,toHex:()=>Se,toHex64:()=>xe,toHexString:()=>Ie,toStorageKey:()=>ke,tryToBigInt:()=>Te});var he=n(1484),fe=n(9981),pe=t=>void 0===t||void 0===t;function ge(t){return"number"==typeof t}function ye(t){return"boolean"==typeof t}function me(t){return"bigint"==typeof t}function be(t){return"string"==typeof t}function _e(t){return void 0!==i&&t instanceof i}function we(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Ee(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var ve=Ee;function Ae(t){return BigInt(t)}function Te(t){return t?BigInt(t):void 0}function Se(t){return L(Ae(t).toString(16))}var Ie=Se;function ke(t){return L(Ae(t).toString(16).padStart(64,"0"))}function xe(t){const e=L(Ae(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Be(t){return BigInt(L(t)).toString(10)}function Re(t){return t.toLowerCase().replace(/^(0x)0+/,"$1")}function Ce(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),o=BigInt(e),a=BigInt(n);le(s>=o&&s<=a,`Message not signable, ${i}.`)}function Oe(t){return t.map(t=>Ae(t).toString(10))}function Ne(t){return t.map(t=>Se(t))}function Le(t){return/^\d+$/.test(t)}function De(t){if(Ee(t))return Be(t);if(Le(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Pe(t){if(Ee(t))return t;if(Le(t))return Ie(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Ue(t){return t.map(Pe)}function Fe(t){return(+t).toString()}function Ve(t){if(!Ee(t))throw new Error(`${t} needs to be a hex-string`);let e=N(t);return e.length%2!=0&&(e=`0${e}`),(0,he.hexToBytes)(e)}function He(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Me(t){var e;return Ve(Se((e=BigInt(L(O((0,fe.sha256)(t)))),Number(e&G))))}function $e(t){return ge(t)||me(t)||be(t)&&(Ee(t)||Le(t))}function je(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}var ze={};d(ze,{getL1MessageHash:()=>tn,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,keccakBn:()=>Ge,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var qe=n(4246),Ye=n(1165),Ke=n(1484);function Ge(t){const e=N(Se(BigInt(t))),n=e.length%2==0?e:`0${e}`;return L((0,qe.keccak)(Ve(L(n))).toString(16))}function We(t){const e=BigInt(function(t){return L((0,qe.keccak)(x(t)).toString(16))}(t));return e&K}function Ze(t){return Se(We(t))}function Xe(t){return ge(t)||me(t)?Se(t):Ee(t)?t:Le(t)?Se(t):Ze(t)}function Je(t){const e=L(t.reduce((t,e)=>t+N(Se(e)).padStart(64,"0"),""));return L((0,Ke.bytesToHex)((0,Ye.keccak_256)(Ve(e))))}function Qe(t,e,n,r,i){return Je([t,e,i,n,r.length,...r])}function tn(t,e,n){return Je([t,e,n.length,...n])}var en={};function nn(t){return/^[\x00-\x7F]*$/.test(t)}function rn(t){return t.length<=q}function sn(t){return/^[0-9]*$/i.test(t)}function on(t){return be(t)&&!Ee(t)&&!Le(t)}d(en,{decodeShortString:()=>dn,encodeShortString:()=>ln,isASCII:()=>nn,isDecimalString:()=>sn,isLongText:()=>cn,isShortString:()=>rn,isShortText:()=>an,isText:()=>on,splitLongString:()=>un});var an=t=>on(t)&&rn(t),cn=t=>on(t)&&!rn(t);function un(t){const e=RegExp(`[^]{1,${q}}`,"g");return t.match(e)||[]}function ln(t){if(!nn(t))throw new Error(`${t} is not an ASCII string`);if(!rn(t))throw new Error(`${t} is too long`);return L(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function dn(t){if(!nn(t))throw new Error(`${t} is not an ASCII string`);if(Ee(t))return N(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(sn(t))return dn("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}var hn={};function fn(t){const e=0n===BigInt(t.pending_word)?"":dn(Se(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":dn(Se(e))),"")+e}function pn(t){const e=un(t),n=e[e.length-1],r=e.map(ln),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}d(hn,{byteArrayFromString:()=>pn,stringFromByteArray:()=>fn});var gn={};function yn(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function mn(t){if(me(t)||Number.isInteger(t))return t.toString();if(be(t)){if(Ee(t))return BigInt(t).toString();if(on(t)){if(!rn(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(ln(t)).toString()}if(Le(t))return t}if(ye(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}d(gn,{felt:()=>rr,getAbiContractVersion:()=>Qn,getArrayType:()=>Zn,isCairo1Abi:()=>Xn,isCairo1Type:()=>Wn,isLen:()=>Cn,isTypeArray:()=>Nn,isTypeBool:()=>zn,isTypeContractAddress:()=>qn,isTypeEnum:()=>Un,isTypeEthAddress:()=>Yn,isTypeFelt:()=>On,isTypeInt:()=>Mn,isTypeLiteral:()=>jn,isTypeNamedTuple:()=>Dn,isTypeNonZero:()=>Jn,isTypeOption:()=>Fn,isTypeResult:()=>Vn,isTypeSecp256k1Point:()=>Gn,isTypeStruct:()=>Pn,isTypeTuple:()=>Ln,isTypeU96:()=>Kn,isTypeUint:()=>Hn,isTypeUint256:()=>$n,tuple:()=>nr,uint256:()=>tr,uint512:()=>er});var bn=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex(t=>t>0))}static __processData(t){if(be(t))return $(t);if(me(t))return j(t);if(Number.isInteger(t))return j(BigInt(t));if(ye(t))return j(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return z(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return L(this.toBigInt().toString(16))}toApiRequest(){return yn([this.toHexString()])}static validate(e){le(null!==e,"null value is not allowed for felt252"),le(void 0!==e,"undefined value is not allowed for felt252"),le(be(e)||ge(e)||me(e)||ye(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=z(n);le(r>=0n&&r<Z,`Value ${n} is out of felt252 range [0, ${Z})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},_n=(1n<<128n)-1n,wn=(1n<<256n)-1n,En=0n,vn=340282366920938463463374607431768211455n,An=340282366920938463463374607431768211455n,Tn=0n,Sn=0n,In=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(we(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&_n,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){le(null!==t,"null value is not allowed for u256"),le(void 0!==t,"undefined value is not allowed for u256"),le($e(t)||we(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return le(e>=En,"bigNumberish is smaller than UINT_256_MIN"),le(e<=wn,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return le(n>=Tn&&n<=vn,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),le(r>=Sn&&r<=An,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=je(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:L(this.low.toString(16)),high:L(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[mn(this.low),mn(this.high)]}},kn=(1n<<512n)-1n,xn=0n,Bn=0n,Rn=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(we(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&_n,this.limb1=(n&_n<<128n)>>128n,this.limb2=(n&_n<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){le(null!==t,"null value is not allowed for u512"),le(void 0!==t,"undefined value is not allowed for u512"),le($e(t)||we(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return le(e>=xn,"bigNumberish is smaller than UINT_512_MIN."),le(e<=kn,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),o=BigInt(n),a=BigInt(r);return[i,s,o,a].forEach((t,e)=>{le(t>=Bn&&t<=_n,`limb${e} is not in the range of a u128 number`)}),{limb0:i,limb1:s,limb2:o,limb3:a}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=je(e),i=je(e),s=je(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:L(this.limb0.toString(16)),limb1:L(this.limb1.toString(16)),limb2:L(this.limb2.toString(16)),limb3:L(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[mn(this.limb0),mn(this.limb1),mn(this.limb2),mn(this.limb3)]}},Cn=t=>/_len$/.test(t),On=t=>"felt"===t||"core::felt252"===t,Nn=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Ln=t=>/^\(.*\)$/i.test(t),Dn=t=>/\(.*\)/i.test(t)&&t.includes(":"),Pn=(t,e)=>t in e,Un=(t,e)=>t in e,Fn=t=>t.startsWith("core::option::Option::"),Vn=t=>t.startsWith("core::result::Result::"),Hn=t=>Object.values(Gt).includes(t),Mn=t=>Object.values(Wt).includes(t),$n=t=>In.isAbiType(t),jn=t=>Object.values(Zt).includes(t),zn=t=>"core::bool"===t,qn=t=>t===Zt.ContractAddress,Yn=t=>t===Xt,Kn=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Gn=t=>t===Zt.Secp256k1Point,Wn=t=>t.includes("::"),Zn=t=>Wn(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Xn(t){const{cairo:e}=Qn(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Jn(t){return t.startsWith(Jt)}function Qn(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return Wn(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var tr=t=>new In(t).toUint256DecimalString(),er=t=>new Rn(t).toUint512DecimalString(),nr=(...t)=>({...t});function rr(t){return mn(t)}var ir=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!pe(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!pe(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!pe(t[1]));return pe(t)?"":t[0]}},sr={Some:0,None:1},or=class{Some;None;constructor(t,e){if(!(t in Object.values(sr)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===sr.Some){if(pe(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!pe(this.Some)}isNone(){return!0===this.None}},ar={Ok:0,Err:1},cr=class{Ok;Err;constructor(t,e){if(!(t in Object.values(ar)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===ar.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!pe(this.Ok))return this.Ok;if(!pe(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!pe(this.Ok)}isErr(){return!pe(this.Err)}},ur=(t,e,n)=>{if(!me(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function lr(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const o=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===o){if(Array.isArray(t[i])){const e=lr(t[i],t[i].map(t=>o));return r[i]=Object.values(e).join(""),r}return ur(t,e,i),r[i]=dn(s),r}if("number"===o)return ur(t,e,i),r[i]=Number(s),r;if("function"==typeof o)return r[i]=o(s),r;if(Array.isArray(o)){const e=lr(t[i],o,o[0]);return r[i]=Object.values(e),r}return we(o)?(r[i]=lr(t[i],o),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)},{})}var dr=class{},hr=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(be(t))return $(t);if(_e(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return z(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return L("padded"===t?O(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;le(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},fr={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},pr=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},gr=class extends pr{},yr=class extends gr{constructor(t,e,n){super(`RPC: ${e} with params ${ce(n,null,2)}\n\n      ${t.code}: ${t.message}: ${ce(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return fr[t]===this.code}},mr=class extends gr{constructor(t){super(t),this.name="TimeoutError"}},br=class extends gr{constructor(t){super(t),this.name="WebSocketNotConnectedError"}},_r=xt.get("buffer")||void 0!==i&&i||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==n.g&&n.g.Buffer||class{constructor(){throw new gr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new gr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=xt.get("buffer")||void 0!==i&&i;return e&&e.isBuffer&&e.isBuffer(t)}},wr=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Er=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return le(Array.isArray(t)&&n instanceof bn&&r instanceof wr,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(_e(t))e=new Uint8Array(t);else if(be(t))e=$(t);else if(me(t))e=j(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=j(BigInt(t))}var n;const r=hr.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,o=[];let a,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);o.push(new hr(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");a=new bn(n),c=new wr(s)}else a=new bn(0),c=new wr(0);return{data:o,pending_word:a,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),yn([L(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=H(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=H(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=H(this.toElements());return L(0===t.length?"0":O(t))}toBuffer(){const t=H(this.toElements());return _r.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){le(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){le(null!=t,"Invalid input: null or undefined"),le(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),le("object"!=typeof t||_e(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),le(!ge(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),le(!ge(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),le(!me(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),le(t instanceof Uint8Array||_e(t)||be(t)||ge(t)||me(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(je(e))},()=>hr.factoryFromApiResponse(e)),r=bn.factoryFromApiResponse(e),i=wr.factoryFromApiResponse(e);return new t(n,r,i)}},vr=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=et.min&&n<=et.max,`Value is out of u8 range [${et.min}, ${et.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Ar=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=nt.min&&n<=nt.max,`Value is out of u16 range [${nt.min}, ${nt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Tr=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=it.min&&n<=it.max,`Value is out of u64 range [${it.min}, ${it.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Sr=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=st.min&&n<=st.max,`Value is out of u96 range [${st.min}, ${st.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Ir=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=ot.min&&n<=ot.max,`Value is out of u128 range [${ot.min}, ${ot.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},kr=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return L(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=at.min&&n<=at.max,`Value is out of i8 range [${at.min}, ${at.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},xr=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return L(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=ct.min&&n<=ct.max,`Value is out of i16 range [${ct.min}, ${ct.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Br=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return L(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=ut.min&&n<=ut.max,`Value is out of i32 range [${ut.min}, ${ut.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Rr=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return L(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=lt.min&&n<=lt.max,`Value is out of i64 range [${lt.min}, ${lt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Cr=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&on(t)?B(t):BigInt(t)}toApiRequest(){return yn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return L(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ge(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);le(n>=dt.min&&n<=dt.max,`Value is out of i128 range [${dt.min}, ${dt.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=je(e),r=BigInt(n);return new t(r>Z/2n?r-Z:r)}},Or={request:{[hr.abiSelector]:t=>new hr(t).toApiRequest(),[Er.abiSelector]:t=>new Er(t).toApiRequest(),[bn.abiSelector]:t=>new bn(t).toApiRequest(),[In.abiSelector]:t=>new In(t).toApiRequest(),[Rn.abiSelector]:t=>new Rn(t).toApiRequest(),[vr.abiSelector]:t=>new vr(t).toApiRequest(),[Ar.abiSelector]:t=>new Ar(t).toApiRequest(),[Tr.abiSelector]:t=>new Tr(t).toApiRequest(),[Sr.abiSelector]:t=>new Sr(t).toApiRequest(),[Ir.abiSelector]:t=>new Ir(t).toApiRequest(),[kr.abiSelector]:t=>new kr(t).toApiRequest(),[xr.abiSelector]:t=>new xr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[Rr.abiSelector]:t=>new Rr(t).toApiRequest(),[Cr.abiSelector]:t=>new Cr(t).toApiRequest()},response:{[hr.abiSelector]:t=>hr.factoryFromApiResponse(t).decodeUtf8(),[Er.abiSelector]:t=>Er.factoryFromApiResponse(t).decodeUtf8(),[bn.abiSelector]:t=>bn.factoryFromApiResponse(t).toBigInt(),[In.abiSelector]:t=>In.factoryFromApiResponse(t).toBigInt(),[Rn.abiSelector]:t=>Rn.factoryFromApiResponse(t).toBigInt(),[vr.abiSelector]:t=>vr.factoryFromApiResponse(t).toBigInt(),[Ar.abiSelector]:t=>Ar.factoryFromApiResponse(t).toBigInt(),[Tr.abiSelector]:t=>Tr.factoryFromApiResponse(t).toBigInt(),[Sr.abiSelector]:t=>Sr.factoryFromApiResponse(t).toBigInt(),[Ir.abiSelector]:t=>Ir.factoryFromApiResponse(t).toBigInt(),[kr.abiSelector]:t=>kr.factoryFromApiResponse(t).toBigInt(),[xr.abiSelector]:t=>xr.factoryFromApiResponse(t).toBigInt(),[Br.abiSelector]:t=>Br.factoryFromApiResponse(t).toBigInt(),[Rr.abiSelector]:t=>Rr.factoryFromApiResponse(t).toBigInt(),[Cr.abiSelector]:t=>Cr.factoryFromApiResponse(t).toBigInt()}},Nr={request:{[hr.abiSelector]:t=>new hr(t).toApiRequest(),[Er.abiSelector]:t=>new Er(t).toApiRequest(),[bn.abiSelector]:t=>rr(t),[In.abiSelector]:t=>new In(t).toApiRequest(),[Rn.abiSelector]:t=>new Rn(t).toApiRequest(),[vr.abiSelector]:t=>rr(t),[Ar.abiSelector]:t=>rr(t),[Tr.abiSelector]:t=>rr(t),[Sr.abiSelector]:t=>rr(t),[Ir.abiSelector]:t=>rr(t),[kr.abiSelector]:t=>new kr(t).toApiRequest(),[xr.abiSelector]:t=>new xr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[Rr.abiSelector]:t=>new Rr(t).toApiRequest(),[Cr.abiSelector]:t=>new Cr(t).toApiRequest()},response:{[hr.abiSelector]:t=>hr.factoryFromApiResponse(t).decodeUtf8(),[Er.abiSelector]:t=>Er.factoryFromApiResponse(t).decodeUtf8(),[bn.abiSelector]:t=>BigInt(je(t)),[In.abiSelector]:t=>In.factoryFromApiResponse(t).toBigInt(),[Rn.abiSelector]:t=>Rn.factoryFromApiResponse(t).toBigInt(),[vr.abiSelector]:t=>BigInt(je(t)),[Ar.abiSelector]:t=>BigInt(je(t)),[Tr.abiSelector]:t=>BigInt(je(t)),[Sr.abiSelector]:t=>BigInt(je(t)),[Ir.abiSelector]:t=>BigInt(je(t)),[kr.abiSelector]:t=>BigInt(je(t)),[xr.abiSelector]:t=>BigInt(je(t)),[Br.abiSelector]:t=>BigInt(je(t)),[Rr.abiSelector]:t=>BigInt(je(t)),[Cr.abiSelector]:t=>BigInt(je(t))}},Lr=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nr}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>Cn(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Dr=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nr}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function Pr(t,e){const n=Ur(t);if(0===n||1===n)return new Lr(t,e);if(2===n)return new Dr(t,e);throw Error(`Unsupported ABI version ${n}`)}function Ur(t){return t.find(t=>"interface"===t.type)?2:Xn(t)?1:0}function Fr(t,e,n){return"constructor"===t&&!n&&!e.length}function Vr(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0===--i)return r;return Number.POSITIVE_INFINITY}function Hr(t){return Wn(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+Vr(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+Vr(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map(t=>n.length?t.replace(" ",n.shift()):t);return Dn(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Mr=class t{content;arrayType;constructor(e,n){le(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}le(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,n)=>(t[n]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function $r({type:t,val:e,parser:n}){switch(!0){case In.isAbiType(t):case Rn.isAbiType(t):case vr.isAbiType(t):case Ar.isAbiType(t):case Tr.isAbiType(t):case Sr.isAbiType(t):case Ir.isAbiType(t):case kr.isAbiType(t):case xr.isAbiType(t):case Br.isAbiType(t):case Rr.isAbiType(t):case Cr.isAbiType(t):case hr.isAbiType(t):return n.getRequestParser(t)(e);case Gn(t):{const t=N(Se(e)).padStart(128,"0"),n=tr(L(t.slice(-64))),r=tr(L(t.slice(0,-64)));return[rr(r.low),rr(r.high),rr(n.low),rr(n.high)]}default:return n.getRequestParser(bn.abiSelector)(e)}}function jr({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Mr.isTypeFixedArray(e)){const s=Mr.getFixedArrayType(e);let o=[];if(Array.isArray(t))o=new Mr(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);o=Object.values(t),le(o.length===Mr.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Mr.getFixedArraySize(e)} items. ${o.length} items provided.`)}return o.reduce((t,e)=>t.concat(jr({element:e,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(rr(t.length));const o=Zn(e);return t.reduce((t,e)=>t.concat(jr({element:e,type:o,structs:n,enums:r,parser:i})),s)}if(In.isAbiType(e))return i.getRequestParser(e)(t);if(Rn.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(Yn(e))return $r({type:e,val:t,parser:i});if(Er.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],o=t;return s.reduce((t,e)=>t.concat(jr({element:o[e.name],type:e.type,structs:n,enums:r,parser:i})),[])}if(Ln(e)){const s=function(t,e){const n=Hr(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map((t,e)=>({element:r[e],type:t.type??t}))}(t,e);return s.reduce((t,e)=>{const s=jr({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)},[])}if(Un(e,r)){const{variants:s}=r[e];if(Fn(e)){const e=t;if(e.isSome()){const t=s.find(t=>"Some"===t.name);if(pe(t))throw Error("Error in abi : Option has no 'Some' variant.");const o=t.type;if("()"===o)return sr.Some.toString();const a=jr({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[sr.Some.toString(),...a]:[sr.Some.toString(),a]}return sr.None.toString()}if(Vn(e)){const e=t;if(e.isOk()){const t=s.find(t=>"Ok"===t.name);if(pe(t))throw Error("Error in abi : Result has no 'Ok' variant.");const o=t.type;if("()"===o)return ar.Ok.toString();const a=jr({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[ar.Ok.toString(),...a]:[ar.Ok.toString(),a]}const o=s.find(t=>"Err"===t.name);if(pe(o))throw Error("Error in abi : Result has no 'Err' variant.");const a=o.type;if("()"===a)return ar.Err.toString();const c=jr({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(c)?[ar.Err.toString(),...c]:[ar.Err.toString(),c]}const o=t,a=o.activeVariant(),c=s.find(t=>t.name===a);if(pe(c))throw Error(`Not find in abi : Enum has no '${a}' variant.`);const u=c.type,l=s.findIndex(t=>t.name===a);if("()"===u)return l.toString();const d=jr({element:o.unwrap(),type:u,structs:n,enums:r,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(Jn(e))return $r({type:Zn(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return $r({type:e,val:t,parser:i})}function zr({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:o}=e;let{value:a}=t.next();switch(!0){case Mr.isTypeFixedArray(o):if(!Array.isArray(a)&&"object"!=typeof a)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${a}`);return jr({element:a,type:e.type,structs:n,enums:r,parser:i});case Nn(o):if(!Array.isArray(a)&&!on(a))throw Error(`ABI expected parameter ${s} to be array or long string, got ${a}`);return be(a)&&(a=un(a)),jr({element:a,type:e.type,structs:n,enums:r,parser:i});case Jn(o):return $r({type:Zn(o),val:a,parser:i});case Yn(o):return $r({type:o,val:a,parser:i});case Pn(o,n)||Ln(o)||In.isAbiType(o):case Un(o,r):return jr({element:a,type:o,structs:n,enums:r,parser:i});default:return $r({type:o,val:a,parser:i})}}function qr(t,e,n){let r;switch(!0){case zn(t):return r=e.next().value,Boolean(BigInt(r));case In.isAbiType(t):case Rn.isAbiType(t):case vr.isAbiType(t):case Ar.isAbiType(t):case Tr.isAbiType(t):case Sr.isAbiType(t):case Ir.isAbiType(t):case kr.isAbiType(t):case xr.isAbiType(t):case Br.isAbiType(t):case Rr.isAbiType(t):case Cr.isAbiType(t):return n.getResponseParser(t)(e);case Yn(t):return r=e.next().value,BigInt(r);case hr.isAbiType(t):return n.getResponseParser(t)(e);case Gn(t):const i=N(e.next().value).padStart(32,"0"),s=N(e.next().value).padStart(32,"0"),o=N(e.next().value).padStart(32,"0"),a=N(e.next().value).padStart(32,"0");return BigInt(L(s+i+a+o));default:return n.getResponseParser(bn.abiSelector)(e)}}function Yr(t,e,n,r,i){if("()"===e.type)return{};if(In.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Rn.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Er.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Mr.isTypeFixedArray(e.type)){const s=[],o={name:"",type:Mr.getFixedArrayType(e.type)},a=Mr.getFixedArraySize(e.type);for(;s.length<a;)s.push(Yr(t,o,n,r,i));return s}if(Nn(e.type)){const s=[],o={name:"",type:Zn(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Yr(t,o,n,r,i));return s}if(Jn(e.type)){const s={name:"",type:Zn(e.type)};return Yr(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return Yn(e.type)?qr(e.type,t,n):r[e.type].members.reduce((e,s)=>(e[s.name]=Yr(t,s,n,r,i),e),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),o=i[e.type].variants.reduce((e,o,a)=>a===s?(e[o.name]=Yr(t,{name:"",type:o.type},n,r,i),e):(e[o.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=s===sr.Some?o.Some:void 0;return new or(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===ar.Ok?o.Ok:o.Err,new cr(s,t)}return new ir(o)}if(Ln(e.type))return Hr(e.type).reduce((e,s,o)=>{const a=s?.name?s.name:o,c={name:a,type:s?.type?s.type:s};return e[a]=Yr(t,c,n,r,i),e},{});if(Nn(e.type)){const s=[],o={name:"",type:Zn(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Yr(t,o,n,r,i));return s}return qr(e.type,t,n)}function Kr({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:o,type:a}=e;let c;switch(!0){case Cn(o):return c=t.next().value,BigInt(c);case n&&a in n||Ln(a):case r&&Un(a,r):case Mr.isTypeFixedArray(a):return Yr(t,e,s,n,r);case Nn(a):if(Wn(a))return Yr(t,e,s,n,r);const u=[];if(i&&i[`${o}_len`]){const a=i[`${o}_len`];for(;u.length<a;)u.push(Yr(t,{name:o,type:e.type.replace("*","")},s,n,r))}return u;case Jn(a):return Yr(t,e,s,n,r);default:return qr(a,t,s)}}var Gr=(t,e)=>{if(le(be(t)||ge(t)||me(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),be(t)&&!Ee(t))return;const n=BigInt(t.toString(10));le(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Wr=(t,e)=>{let n;switch(ge(t)&&le(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),le(be(t)||ge(t)||me(t)||we(t)&&"low"in t&&"high"in t||we(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case Gt.u256:n=new In(t).toBigInt();break;case Gt.u512:n=new Rn(t).toBigInt();break;default:n=Ae(t)}switch(e.type){case Gt.u8:le(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case Gt.u16:le(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case Gt.u32:le(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case Gt.u64:le(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case Gt.u128:le(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case Gt.u256:le(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case Gt.u512:le(Rn.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case Zt.ClassHash:case Zt.ContractAddress:le(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case Zt.Secp256k1Point:le(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case Zt.U96:le(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Zr=(t,e)=>{le(ye(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Xr=(t,e,n)=>{if(e.type!==Gt.u256&&e.type!==Gt.u512){if(Yn(e.type)){le(!we(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));return void le(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}le(we(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:n})=>{le(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)})}else Wr(t,e)},Jr=(t,e)=>{le(we(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(Fn(e.type)&&r.includes("isSome")&&r.includes("isNone")||Vn(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Qr=(t,e)=>{le(we(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},ti=(t,e,n,r)=>{const i=Nn(e.type),s=i?Zn(e.type):Mr.getFixedArrayType(e.type);if(i&&On(s)&&cn(t))return;let o=[];if(i)le(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),o=t;else switch(!0){case Array.isArray(t):o=t;break;case"object"==typeof t:o=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case On(s):o.forEach(t=>Gr(t,e));break;case Ln(s):o.forEach(t=>Qr(t,{name:e.name,type:s}));break;case Nn(s):o.forEach(t=>ti(t,{name:"",type:s},n,r));break;case Pn(s,n):o.forEach(t=>Xr(t,{name:e.name,type:s},n));break;case Un(s,r):o.forEach(t=>Jr(t,{name:e.name,type:s}));break;case Hn(s)||jn(s):o.forEach(t=>Wr(t,{name:"",type:s}));break;case zn(s):o.forEach(t=>Zr(t,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${o}`)}};function ei(t,e,n,r){t.inputs.reduce((t,i)=>{const s=e[t];switch(!0){case Cn(i.name):return t;case On(i.type):Gr(s,i);break;case hr.isAbiType(i.type):hr.validate(s);break;case Hn(i.type)||jn(i.type):Wr(s,i);break;case zn(i.type):Zr(s,i);break;case Er.isAbiType(i.type):Er.validate(s);break;case kr.isAbiType(i.type):kr.validate(s);break;case xr.isAbiType(i.type):xr.validate(s);break;case Br.isAbiType(i.type):Br.validate(s);break;case Rr.isAbiType(i.type):Rr.validate(s);break;case Cr.isAbiType(i.type):Cr.validate(s);break;case Nn(i.type)||Mr.isTypeFixedArray(i.type):ti(s,i,n,r);break;case Pn(i.type,n):Xr(s,i,n);break;case Un(i.type,r):Jr(s,i);break;case Ln(i.type):Qr(s,i);break;case Jn(i.type):((t,e)=>{const n=Zn(e.type);switch(le(Hn(n)&&n!==Rn.abiSelector||On(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case On(n):Gr(t,e),le(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Hn(n):Wr(t,{name:"",type:n}),n===Gt.u256?le(new In(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):le(Ae(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1},0)}var ni=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=Pr(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==Kt.DEPLOY&&le(this.abi.filter(e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===Kt.INVOKE?!n:n}).map(t=>t.name).includes(e),(t===Kt.INVOKE?"invocable":"viewable")+" method not found in abi");const r=this.abi.find(n=>t===Kt.DEPLOY?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type);if(Fr(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);ei(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find(e=>e.name===t);if(Fr(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(Mr.isTypeFixedArray(e))return function(t,e){const n=Mr.getFixedArrayType(e),r=Mr.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map(t=>i(t,n))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(Nn(e))return function(t,e){const n=Zn(e);return be(t)?t:t.map(t=>i(t,n))}(t,e);if(Un(e,r)){const n=r[e];return o(t,n)}if(Ln(e))return function(t,e){const n=Hr(e).reduce((e,n,r)=>{const s=Object.keys(t),o=n?.type?n.type:n;return a=i(t[s[r]],o),Object.defineProperty(e,r.toString(),{enumerable:!0,value:a??t[s[r]]}),e;var a},{});return n}(t,e);if(Yn(e))return t;if(Jn(e))return t;if(Er.isAbiType(e))return t;if(Kn(e))return t;if(Gn(e))return t;if(In.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(Rn.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every(t=>t in n))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Pn(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce((e,n)=>{if("undefined"===t[n.name]&&(Wn(n.type)||!Cn(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e},{}),o=(t,e)=>{if(Vn(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new cr(ar.Ok,i(t.unwrap(),r)):new cr(ar.Err,i(t.unwrap(),s))}if(Fn(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new or(sr.Some,i(n.unwrap(),r)):new or(sr.None,{})}const n=t,r=Object.entries(n.variant).map(t=>{if(pe(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]});return new ir(Object.fromEntries(r))};return e.reduce((e,n)=>{return Cn(n.name)&&!Wn(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r},{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),ei(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce((t,e)=>Cn(e.name)&&!Wn(e.type)?t:t.concat(zr({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap(([t,i])=>{let s=i;"entrypoint"===t?s=Ze(s):cn(s)&&(s=pn(s));const o=Array.isArray(r)&&"0"===t?"$$len":t;if(me(s))return[[`${n}${o}`,rr(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?sr.Some:sr.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${o}.`):[[`${n}${o}`,rr(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?ar.Ok:ar.Err;return e({0:r,1:t.unwrap()},`${n}${o}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===r);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${o}`,rr(i)]]:e({0:i,1:t.unwrap()},`${n}${o}.`)}return e(s,`${n}${o}.`)}return[[`${n}${o}`,rr(s)]]})};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find(e=>e.name===t),r=e.flat()[Symbol.iterator](),i=n.flat().reduce((t,e,n)=>{const i=e.name??n;return t[i]=Kr({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return lr(this.parse(t,e),n)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Se(t))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map(t=>Kr({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}},ri={};d(ri,{calculateContractAddressFromHash:()=>Vi,calculateDeclareTransactionHash:()=>Ci,calculateDeployAccountTransactionHash:()=>Oi,calculateInvokeTransactionHash:()=>Ri,calculateL2MessageTxHash:()=>Bi,computeCompiledClassHash:()=>Yi,computeContractClassHash:()=>Wi,computeHashOnElements:()=>Pi,computeHintedClassHash:()=>$i,computeLegacyContractClassHash:()=>ji,computePedersenHash:()=>Li,computePedersenHashOnElements:()=>Ui,computePoseidonHash:()=>Di,computePoseidonHashOnElements:()=>Fi,computeSierraContractClassHash:()=>Gi,formatSpaces:()=>Mi,getL1MessageHash:()=>tn,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,hashByteCodeSegments:()=>qi,keccakBn:()=>Ge,poseidon:()=>ii,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var ii=p(n(5920)),si={};d(si,{calculateDeclareTransactionHash:()=>bi,calculateDeployAccountTransactionHash:()=>mi,calculateInvokeTransactionHash:()=>_i,calculateTransactionHashCommon:()=>yi,encodeDataResourceBoundsL1:()=>pi,encodeResourceBoundsL1:()=>hi,encodeResourceBoundsL2:()=>fi,hashDAMode:()=>di,hashFeeFieldV3B3:()=>gi});var oi=n(4246),ai=t=>t.map(t=>BigInt(t)),ci=BigInt(ln("L1_GAS")),ui=BigInt(ln("L2_GAS")),li=BigInt(ln("L1_DATA"));function di(t,e){return(BigInt(t)<<32n)+BigInt(e)}function hi(t){return(ci<<192n)+(t.l1_gas.max_amount<<128n)+t.l1_gas.max_price_per_unit}function fi(t){return(ui<<192n)+(t.l2_gas.max_amount<<128n)+t.l2_gas.max_price_per_unit}function pi(t){return(li<<192n)+(t.l1_data_gas.max_amount<<128n)+t.l1_data_gas.max_price_per_unit}function gi(t,e){const n=hi(e),r=fi(e),i=pi(e);return(0,oi.poseidonHashMany)([BigInt(t),n,r,i])}function yi(t,e,n,r,i,s,o,a,c,u,l=[]){const d=gi(s,u),h=di(a,c),f=ai([t,e,n,d,(0,oi.poseidonHashMany)(ai(o)),r,i,h,...ai(l)]);return Se((0,oi.poseidonHashMany)(f))}function mi(t,e,n,r,i,s,o,a,c,u,l,d){return yi(vt.DEPLOY_ACCOUNT,i,t,s,o,l,d,a,c,u,[(0,oi.poseidonHashMany)(ai(n)),e,r])}function bi(t,e,n,r,i,s,o,a,c,u,l,d){return yi(vt.DECLARE,r,n,i,s,l,ai(d),a,c,u,[(0,oi.poseidonHashMany)(ai(o)),t,e])}function _i(t,e,n,r,i,s,o,a,c,u,l){return yi(vt.INVOKE,e,t,r,i,u,l,o,a,c,[(0,oi.poseidonHashMany)(ai(s)),(0,oi.poseidonHashMany)(ai(n))])}var wi={};d(wi,{calculateDeclareTransactionHash:()=>Ii,calculateDeployAccountTransactionHash:()=>ki,calculateL2MessageTxHash:()=>Bi,calculateTransactionHash:()=>xi,calculateTransactionHashCommon:()=>Si,computeHashOnElements:()=>Ti});var Ei={};d(Ei,{starkCurve:()=>vi,weierstrass:()=>Ai});var vi=p(n(4246)),Ai=p(n(1705));function Ti(t){return[...t,t.length].reduce((t,e)=>vi.pedersen(Ae(t),Ae(e)),0).toString()}function Si(t,e,n,r,i,s,o,a=[]){const c=Ti(i);return Ti([t,e,n,r,c,s,o,...a])}function Ii(t,e,n,r,i,s,o){return Si(vt.DECLARE,n,e,0,[t],r,i,[s,...o?[o]:[]])}function ki(t,e,n,r,i,s,o,a){const c=[e,r,...n];return Si(vt.DEPLOY_ACCOUNT,i,t,0,c,s,o,[a])}function xi(t,e,n,r,i,s){return Si(vt.INVOKE,e,t,0,n,r,i,[s])}function Bi(t,e,n,r,i,s){const o=[t,...r];return Si(vt.L1_HANDLER,0,e,Xe(n),o,0,i,[s])}function Ri(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return _i(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Ci(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return bi(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Oi(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return mi(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}var Ni=n(4246);function Li(t,e){return vi.pedersen(BigInt(t),BigInt(e))}function Di(t,e){return Se(vi.poseidonHash(BigInt(t),BigInt(e)))}function Pi(t){return[...t,t.length].reduce((t,e)=>vi.pedersen(BigInt(t),BigInt(e)),0).toString()}var Ui=Pi;function Fi(t){return Se((0,Ni.poseidonHashMany)(t.map(t=>BigInt(t))))}function Vi(t,e,n,r){const i=Pi(ni.compile(n)),s=Pi([rr("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return Se(BigInt(s)%J)}function Hi(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function Mi(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function $i(t){const{abi:e,program:n}=t,r=Mi(ce({abi:e,program:n},Hi));return L(vi.keccak(x(r)).toString(16))}function ji(t){const e=be(t)?oe(t):t,n=Se(W),r=Pi(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=Pi(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),s=Pi(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),o=Pi(e.program.builtins.map(t=>ln(t))),a=$i(e),c=Pi(e.program.data);return Pi([n,r,i,s,o,a,c])}function zi(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,Ni.poseidonHashMany)(e.flatMap(t=>BigInt(ln(t)))))];var e});return(0,Ni.poseidonHashMany)(e)}function qi(t){const e=t.bytecode.map(t=>BigInt(t)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(t=>{const n=e.slice(r,r+=t);return[BigInt(t),(0,Ni.poseidonHashMany)(n)]});return 1n+(0,Ni.poseidonHashMany)(i)}function Yi(t){const e=BigInt(ln("COMPILED_CLASS_V1")),n=zi(t.entry_points_by_type.EXTERNAL),r=zi(t.entry_points_by_type.L1_HANDLER),i=zi(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?qi(t):(0,Ni.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,n,r,i,s]))}function Ki(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,Ni.poseidonHashMany)(e)}function Gi(t){const e=BigInt(ln("CONTRACT_CLASS_V0.1.0")),n=Ki(t.entry_points_by_type.EXTERNAL),r=Ki(t.entry_points_by_type.L1_HANDLER),i=Ki(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=Mi(ce(t.abi,null));return BigInt(L(vi.keccak(x(e)).toString(16)))}(t),o=(0,Ni.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,n,r,i,s,o]))}function Wi(t){const e=be(t)?oe(t):t;return"sierra_program"in e?Gi(e):ji(e)}var Zi={};d(Zi,{ZeroFeeEstimate:()=>us,compressProgram:()=>Qi,decompressProgram:()=>ts,formatSignature:()=>ns,getFullPublicKey:()=>ps,intDAM:()=>ls,randomAddress:()=>es,resourceBoundsToBigInt:()=>ys,resourceBoundsToEstimateFeeResponse:()=>as,resourceBoundsToHexString:()=>gs,signatureToDecimalArray:()=>rs,signatureToHexArray:()=>is,toFeeVersion:()=>hs,toOverheadOverallFee:()=>cs,toOverheadResourceBounds:()=>os,toTransactionVersion:()=>ds,v3Details:()=>fs,zeroResourceBounds:()=>ss});var Xi=n(4246),Ji=n(1668);function Qi(t){const e=be(t)?t:ce(t);return C((0,Ji.gzip)(e))}function ts(t){if(Array.isArray(t))return t;const e=I((0,Ji.ungzip)(R(t)));return oe(e)}function es(){const t=Xi.utils.randomPrivateKey();return(0,Xi.getStarkKey)(t)}function ns(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Se(t));try{const{r:e,s:n}=t;return[Se(e),Se(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function rs(t){return Oe(ns(t))}function is(t){return Ne(ns(t))}function ss(){return os({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function os(t,e=xt.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function as(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function cs(t,e=xt.get("resourceBoundsOverhead")){return He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function us(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function ls(t){if(t===Pt.L1)return Ut.L1;if(t===Pt.L2)return Ut.L2;throw Error("EDAM conversion")}function ds(t,e){const n=Se(e||t);if(!Object.values(Dt).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function hs(t){if(!t)return;const e=Se(t);if(e===Nt.V0)return Nt.F0;if(e===Nt.V1)return Nt.F1;if(e===Nt.V2)return Nt.F2;if(e===Nt.V3)return Nt.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function fs(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Pt.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Pt.L1,resourceBounds:t.resourceBounds??ss()}}function ps(t){const e=Se(t);return L(O((0,Xi.getPublicKey)(e,!1)))}function gs(t){const e=t=>{if(me(t))return Se(t);if(we(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function ys(t){const e=t=>{if(be(t))return BigInt(t);if(we(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function ms(t){return"sierra_program"in(be(t)?oe(t):t)}function bs(t){const e={...t};if(ms(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Yi(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??Wi(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function _s(t){if(ms(t))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const e=t;return{...e,program:ts(e.program)}}var ws={};d(ws,{ethRandomPrivateKey:()=>vs,validateAndParseEthAddress:()=>As});var Es=n(8510);function vs(){return F(O(Es.secp256k1.utils.randomPrivateKey()))}function As(t){Ce(t,Y,2n**160n-1n,"Ethereum Address ");const e=L(N(Se(t)).padStart(40,"0"));return le(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}var Ts="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==n.g&&n.g.fetch.bind(n.g)||(()=>{throw new gr("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),Ss={};function Is(t){const e=t.version?Se(t.version):Nt.V3;return e===Nt.V3||e===Nt.F3}function ks(t,e){const n=t.split("."),r=e.split(".");return n.every((t,e)=>"*"===t||t===r[e])}function xs(t,e={allowAnyPatchVersion:!1}){return Object.values(At).some(n=>ks(e.allowAnyPatchVersion?Bs(n):n,t))}function Bs(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}function Rs(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}function Cs(t){return"PENDING"===t.status}function Os(t){return!("block_hash"in t)}function Ns(t){return!("block_hash"in t)}function Ls(t){return new Promise(e=>{setTimeout(e,t)})}function Ds(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=Mi(ce(t.abi)),e.sierra_program=Mi(ce(t.sierra_program)),e.sierra_program=Qi(e.sierra_program),e}function Ps(t){const e=be(t)?oe(t):t;return ms(t)?Ds(e):{...e,..."program"in e&&{program:Qi(e.program)}}}function Us(t){return be(t.abi)?oe(t.abi):t.abi}d(Ss,{Block:()=>$s,createSierraContractClass:()=>Ds,extractAbi:()=>Us,getDefaultNodeUrl:()=>Fs,getDefaultNodes:()=>Vs,getSupportedRpcVersions:()=>Hs,parseContract:()=>Ps,validBlockTags:()=>Ms,wait:()=>Ls});var Fs=(t,e=!1,n)=>{e||Rt.info("Using default public node url, please provide nodeUrl in provider options!");const r=Vs(n??xt.get("rpcVersion"))[t??wt.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function Vs(t){const e={...St};return Object.keys(e).forEach(function(n,r){e[n]=e[n].map(e=>`${e}${Rs(t)}`)}),e}function Hs(){return[...new Set(Object.values(At))]}var Ms=Object.values(Yt),$s=class{hash=null;number=null;tag=null;setIdentifier(t){if(be(t))if(sn(t))this.number=parseInt(t,10);else if(Ee(t))this.hash=t;else{if(!Ms.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else me(t)?this.hash=Se(t):ge(t)?this.number=t:this.tag=Yt.LATEST;if(ge(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash},js={};function zs(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}d(js,{fromCallsToExecuteCalldata:()=>Ys,fromCallsToExecuteCalldata_cairo1:()=>Ks,getCompiledCalldata:()=>zs,getExecuteCalldata:()=>Gs,getVersionsByType:()=>Ws,transformCallsToMulticallArrays:()=>qs});var qs=t=>{const e=[],n=[];return t.forEach(t=>{const r=ni.compile(t.calldata||[]);e.push({to:Ae(t.contractAddress).toString(10),selector:Ae(Ze(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:e,calldata:ni.compile({calldata:n})}},Ys=t=>{const{callArray:e,calldata:n}=qs(t);return[...ni.compile({callArray:e}),...n]},Ks=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:ni.compile(t.calldata)}));return ni.compile({orderCalls:e})},Gs=(t,e="0")=>"1"===e?Ks(t):Ys(t);function Ws(t){return"fee"===t?{v3:Nt.F3}:{v3:Nt.V3}}var Zs={headers:{"Content-Type":"application/json"},blockIdentifier:Yt.LATEST,retries:200},Xs=class{id="RPC081";channelSpecVersion=At.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(wt).includes(o)?this.nodeUrl=Fs(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||Fs(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ts,this.blockIdentifier=r??Zs.blockIdentifier,this.chainId=i,this.headers={...Zs.headers,...s},this.retries=a??Zs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,ge(n)&&(this.batchClient=new ue({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Rt.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ks(this.channelSpecVersion,t)||Rt.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xs(t))throw new gr(`${kt.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new $s(r).identifier,s=Ne(t),o=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new $s(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new $s(n).identifier,o=[];return r&&o.push(_.ESimulationFlag.SKIP_VALIDATE),i&&o.push(_.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Se(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[_.ETransactionStatus.REJECTED],u=e?.successStates??[_.ETransactionStatus.ACCEPTED_ON_L2,_.ETransactionStatus.ACCEPTED_ON_L1],l={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Ls(a);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,o=!0,r}(u.includes(t)||u.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof yr&&t.isType("TXN_HASH_NOT_FOUND")){Rt.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ls(a)}return f}getStorageAt(t,e,n=this.blockIdentifier){const r=Se(t),i=ke(e),s=new $s(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new $s(e).identifier,i={simulation_flags:n?[_.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){let n;if(!Is(e))throw Error(kt.legacyTxRPC08Message);if(!Vt(e.resourceBounds))throw Error(kt.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),version:_.ETransactionVersion.V3,signature:is(t.signature),nonce:Se(e.nonce),resource_bounds:gs(e.resourceBounds),tip:Se(e.tip),paymaster_data:e.paymasterData.map(t=>Se(t)),account_deployment_data:e.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(!ms(t)||!Is(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:_.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:_.ETransactionVersion.V3,signature:is(e),nonce:Se(i.nonce),contract_class:{sierra_program:ts(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:gs(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),account_deployment_data:i.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(!Is(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:_.ETransactionType.DEPLOY_ACCOUNT,version:_.ETransactionVersion.V3,signature:is(r),nonce:Se(i.nonce),contract_address_salt:Se(n||0),constructor_calldata:ni.toHex(e||[]),class_hash:Se(t),resource_bounds:gs(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new $s(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:As(n),to_address:Se(r),entry_point_selector:Xe(i),payload:Ue(s)},a=new $s(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ws(e);let r;if(!Is(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:is(t.signature),nonce:Se(t.nonce),resource_bounds:gs(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t))},t.type===_.ETransactionType.INVOKE)return{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),version:Se(t.version||n.v3),...r};if(t.type===_.ETransactionType.DECLARE){if(!ms(t.contract))throw Rt.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:ts(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Se(t.version||n.v3),...r}}if(t.type===_.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=r;return{type:t.type,constructor_calldata:ni.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),version:Se(t.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},Js={};d(Js,{RpcChannel:()=>to});var Qs={headers:{"Content-Type":"application/json"},blockIdentifier:Yt.LATEST,retries:200},to=class{id="RPC090";channelSpecVersion=At.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(wt).includes(o)?this.nodeUrl=Fs(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||Fs(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ts,this.blockIdentifier=r??Qs.blockIdentifier,this.chainId=i,this.headers={...Qs.headers,...s},this.retries=a??Qs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,ge(n)&&(this.batchClient=new ue({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Rt.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ks(this.channelSpecVersion,t)||Rt.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xs(t))throw new gr(`${kt.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new $s(r).identifier,s=Ne(t),o=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new $s(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new $s(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new $s(n).identifier,o=[];return r&&o.push(w.ESimulationFlag.SKIP_VALIDATE),i&&o.push(w.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Se(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],u=e?.successStates??[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1],l={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Ls(a);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,o=!0,r}(u.includes(t)||u.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof yr&&t.isType("TXN_HASH_NOT_FOUND")){Rt.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Ls(a)}return f}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const o=r?.retryInterval??500,a=[w.ETransactionExecutionStatus.REVERTED],c=[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1,w.ETransactionFinalityStatus.PRE_CONFIRMED];let u;const l=(new Date).getTime();for(;s>0;){await Ls(o),u=await this.getTransactionStatus(t),Rt.info(`${s} ${JSON.stringify(u)} ${((new Date).getTime()-l)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(a.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=u,t}if(c.includes(r)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,Yt.PRE_CONFIRMED)),Rt.info(`${s} Checking new nonce ${t} ${((new Date).getTime()-l)/1e3}s.`),t!==i)return!0;await Ls(o),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=Se(t),i=ke(e),s=new $s(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Se(t),r=new $s(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new $s(e).identifier,i={simulation_flags:n?[w.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:m.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:m.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new $s(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:As(n),to_address:Se(r),entry_point_selector:Xe(i),payload:Ue(s)},a=new $s(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ws(e);le(Is(t),kt.legacyTxRPC08Message),le("transaction"!==e||Vt(t.resourceBounds),kt.SWOldV3);const r={signature:is(t.signature),nonce:Se(t.nonce),resource_bounds:gs(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t)),version:ds(n.v3,t.version)};if(t.type===m.ETransactionType.INVOKE)return{type:w.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ni.toHex(t.calldata),...r};if(t.type===m.ETransactionType.DECLARE)return le(ms(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:ts(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:ni.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},eo=class{listeners={};on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}off(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(t=>t!==e))}emit(t,e){this.listeners[t]&&this.listeners[t].forEach(t=>t(e))}clear(){this.listeners={}}},no="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==n.g&&n.g.WebSocket||class{constructor(){throw new gr("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},ro=class{channel;method;params;id;events=new eo;buffer=[];maxBufferSize;handler=null;_isClosed=!1;constructor(t){this.channel=t.channel,this.method=t.method,this.params=t.params??{},this.id=t.id,this.maxBufferSize=t.maxBufferSize}get isClosed(){return this._isClosed}_handleEvent(t){if(this.handler)this.handler(t);else{if(this.buffer.length>=this.maxBufferSize){const t=this.buffer.shift();Rt.warn(`Subscription ${this.id}: Buffer full. Dropping oldest event:`,t)}this.buffer.push(t)}}on(t){if(this.handler)throw new Error("A handler is already attached to this subscription.");for(this.handler=t;this.buffer.length>0;){const t=this.buffer.shift();t&&this.handler(t)}}async unsubscribe(){if(this._isClosed)return!0;const t=await this.channel.unsubscribe(this.id);return t&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),t}},io=class{nodeUrl;websocket;WsImplementation;activeSubscriptions=new Map;maxBufferSize;autoReconnect;reconnectOptions;requestTimeout;isReconnecting=!1;reconnectAttempts=0;userInitiatedClose=!1;reconnectTimeoutId=null;requestQueue=[];events=new eo;openListener=t=>this.events.emit("open",t);closeListener=this.onCloseProxy.bind(this);messageListener=this.onMessageProxy.bind(this);errorListener=t=>this.events.emit("error",t);sendId=0;constructor(t){this.nodeUrl=t.nodeUrl,this.maxBufferSize=t.maxBufferSize??1e3,this.autoReconnect=t.autoReconnect??!0,this.reconnectOptions={retries:t.reconnectOptions?.retries??5,delay:t.reconnectOptions?.delay??2e3},this.requestTimeout=t.requestTimeout??6e4,this.WsImplementation=t.websocket||xt.get("websocket")||no,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}idResolver(t){return t||this.sendId++}send(t,e,n){if(!this.isConnected())throw new br("WebSocketChannel.send() failed due to socket being disconnected");const r=this.idResolver(n),i={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.websocket.send(ce(i)),r}sendReceive(t,e){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return Rt.info(`WebSocket: Connection unavailable, queueing request: ${t}`),new Promise((n,r)=>{this.requestQueue.push({method:t,params:e,resolve:n,reject:r})});const n=this.send(t,e);return new Promise((e,r)=>{let i;if(!this.websocket||this.websocket.readyState!==no.OPEN)return void r(new br("WebSocket not available or not connected."));const s=a=>{if(!be(a.data))return void Rt.warn("WebSocket received non-string message data:",a.data);const c=JSON.parse(a.data);c.id===n&&(clearTimeout(i),this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",o),"result"in c?e(c.result):r(new Error(`Error on ${t} (id: ${n}): ${JSON.stringify(c.error)}`)))},o=e=>{clearTimeout(i),this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",o),r(new Error(`WebSocket error during ${t} (id: ${n}): ${e.type||"Unknown error"}`))};this.websocket.addEventListener("message",s),this.websocket.addEventListener("error",o),i=setTimeout(()=>{this.websocket.removeEventListener("message",s),this.websocket.removeEventListener("error",o),r(new mr(`Request ${t} (id: ${n}) timed out after ${this.requestTimeout}ms`))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===no.OPEN}async waitForConnection(){return this.websocket.readyState!==no.OPEN?new Promise((t,e)=>{this.websocket&&(this.websocket.onopen=()=>t(this.websocket.readyState),this.websocket.onerror=t=>e(t))}):this.websocket.readyState}disconnect(t,e){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(t,e),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==no.CLOSED?new Promise((t,e)=>{this.websocket&&(this.websocket.onclose=()=>t(this.websocket.readyState),this.websocket.onerror=e)}):this.websocket.readyState}async unsubscribe(t){const e=await this.sendReceive("starknet_unsubscribe",{subscription_id:t});return e&&this.events.emit("unsubscribe",t),e}waitForUnsubscription(t){return new Promise(e=>{const n=r=>{r===t&&(this.events.off("unsubscribe",n),e())};this.events.on("unsubscribe",n)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(Rt.info(`WebSocket: Processing ${this.requestQueue.length} queued requests.`);this.requestQueue.length>0;){const{method:t,params:e,resolve:n,reject:r}=this.requestQueue.shift();this.sendReceive(t,e).then(n).catch(r)}}async _restoreSubscriptions(){const t=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();const e=t.map(async t=>{try{const e=await this.sendReceive(t.method,t.params);t.id=e,this.activeSubscriptions.set(e,t),Rt.info(`Subscription ${t.method} restored with new ID: ${e}`)}catch(e){Rt.error(`Failed to restore subscription ${t.method}:`,e)}});await Promise.all(e)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;const t=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries)return Rt.error("WebSocket: Maximum reconnection retries reached. Giving up."),void(this.isReconnecting=!1);this.reconnectAttempts+=1,Rt.info(`WebSocket: Connection lost. Attempting to reconnect... (${this.reconnectAttempts}/${this.reconnectOptions.retries})`),this.reconnect(),this.websocket.onopen=async()=>{Rt.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{const e=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);Rt.info(`WebSocket: Reconnect attempt failed. Retrying in ${e}ms.`),this.reconnectTimeoutId=setTimeout(t,e)}};t()}onCloseProxy(t){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",t),this.userInitiatedClose||this._startReconnect()}onMessageProxy(t){let e;try{e=JSON.parse(t.data)}catch(e){return void Rt.error(`WebSocketChannel: Error parsing incoming message: ${t.data}, Error: ${e}`)}if(e.method&&we(e.params)&&"subscription_id"in e.params){const{result:t,subscription_id:n}=e.params,r=this.activeSubscriptions.get(n);r?r._handleEvent(t):Rt.warn(`WebSocketChannel: Received event for untracked subscription ID: ${n}.`)}Rt.debug("onMessageProxy:",t.data),this.events.emit("message",t)}async subscribeNewHeads(t={}){const e="starknet_subscribeNewHeads",n={block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0},r=await this.sendReceive(e,n),i=new ro({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeEvents(t={}){const e="starknet_subscribeEvents",n={from_address:void 0!==t.fromAddress?Se(t.fromAddress):void 0,keys:t.keys,block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0,finality_status:t.finalityStatus},r=await this.sendReceive(e,n),i=new ro({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeTransactionStatus(t){const e="starknet_subscribeTransactionStatus",n={transaction_hash:Se(t.transactionHash),block_id:t.blockIdentifier?new $s(t.blockIdentifier).identifier:void 0},r=await this.sendReceive(e,n),i=new ro({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeNewTransactionReceipts(t={}){const e="starknet_subscribeNewTransactionReceipts",n={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},r=await this.sendReceive(e,n),i=new ro({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}async subscribeNewTransactions(t={}){const e="starknet_subscribeNewTransactions",n={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},r=await this.sendReceive(e,n),i=new ro({channel:this,method:e,params:n,id:r,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(r,i),i}removeSubscription(t){this.activeSubscriptions.delete(t)}on(t,e){this.events.on(t,e)}off(t,e){this.events.off(t,e)}},so=class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:os(t,this.resourceBoundsOverhead),overall_fee:cs(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:os(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:cs(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:be(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}};function oo(t){return"0x3"===t.version&&"tip"in t&&be(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function ao(t,e=!0){return t.transactions.filter(oo).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function co(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function uo(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,o=t[r];return o+(t[i]-o)*BigInt(Math.round(1e3*s))/1000n}function lo(t){le(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,tt.max),n=t.reduce((t,e)=>e>t?e:t,0n),r=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),s=Math.floor(i.length/2);let o;o=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const a=new Map;t.forEach(t=>{a.set(t,(a.get(t)||0)+1)});const{modeTip:c}=Array.from(a.entries()).reduce((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:o,modeTip:c,recommendedTip:o,p90Tip:uo(i,90),p95Tip:uo(i,95)}}async function ho(t,e){try{const n=await t.getBlockWithTxs(e);return ge(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new gr(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function fo(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Rt.warn(`Failed to fetch block ${e}:`,t),null}}function po(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(e,n)=>t-n)}async function go(t,e=Yt.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return le(Number.isInteger(r),"maxBlocks parameter must be an integer"),le(r>=1,"maxBlocks parameter must be greater than or equal to 1"),le(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),le(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),le(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await ho(t,e),o=po(n,r),a=await async function(t,e){const n=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Rt.warn(`Failed to fetch block ${e} in parallel:`,t),null}});return Promise.all(n)}(t,o),c=a.filter(t=>null!==t).flatMap(t=>ao(t,s)),u=a.filter(t=>null!==t).length;return c.length<i?(Rt.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),co(u,c)):{...lo(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new gr(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await ho(t,e),o=po(n,r),a=[];let c=0;for(const e of o){const n=await fo(t,e);if(n){c+=1;const t=ao(n,s);if(a.push(...t),a.length>=i)break}}return a.length<i?(Rt.error(`Insufficient transaction data: found ${a.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),co(c,a)):{...lo(a),metrics:{blocksAnalyzed:c,transactionsTipsFound:a}}}catch(t){throw new gr(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var yo=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===qt.SUCCEEDED}static isReverted(t){return t.execution_status===qt.REVERTED}},mo={[qt.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[qt.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function bo(t){const e=mo[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,o=s(t);n={...i(t),statusReceipt:r,value:o,match:t=>r in t?t[r](o):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,yo.prototype),Object.defineProperty(n,"constructor",{value:yo,writable:!1,enumerable:!1,configurable:!1}),n}var _o={};d(_o,{encodeData:()=>Do,encodeType:()=>Oo,encodeValue:()=>Lo,getDependencies:()=>Co,getMessageHash:()=>Uo,getStructHash:()=>Po,getTypeHash:()=>No,isMerkleTreeType:()=>Ro,prepareSelector:()=>Bo,validateTypedData:()=>xo,verifyMessage:()=>Fo});var wo={};d(wo,{MerkleTree:()=>Eo,proofMerklePath:()=>vo});var Eo=class t{leaves;branches=[];root;hashMethod;constructor(t,e=Li){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=Li){const[r,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,o=(s?n[i+1]:n[i-1])??"0x0",a=[...r,o],c=this.leaves.length===n.length?-1:this.branches.findIndex(t=>t.length===n.length),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:o,s?o:e,this.hashMethod),u,a)}};function vo(t,e,n,r=Li){if(0===n.length)return t===e;const[i,...s]=n;return vo(t,Eo.hash(e,i,r),s,r)}var Ao={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},To={[m.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:Fi,hashMerkleMethod:Di,escapeTypeString:t=>`"${t}"`,presetTypes:Ao},[m.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:Ui,hashMerkleMethod:Li,escapeTypeString:t=>t,presetTypes:{}}};function So(t,e,{min:n,max:r}){const i=BigInt(t);le(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Io({types:t,domain:e}){return To[m.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===m.TypedDataRevision.ACTIVE?m.TypedDataRevision.ACTIVE:To[m.TypedDataRevision.LEGACY].domain in t&&(e.revision??m.TypedDataRevision.LEGACY)===m.TypedDataRevision.LEGACY?m.TypedDataRevision.LEGACY:void 0}function ko(t){try{return Se(t)}catch(e){if(be(t))return Se(ln(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function xo(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Io(e))}function Bo(t){return Ee(t)?t:Ze(t)}function Ro(t){return"merkletree"===t.type}function Co(t,e,n=[],r="",i=m.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===m.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),s.filter(e=>!n.includes(e)&&t[e]).reduce((e,n)=>[...e,...[n,...t[n].reduce((e,n)=>[...e,...Co(t,n.type,e,n.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function Oo(t,e,n=m.TypedDataRevision.LEGACY){const r=n===m.TypedDataRevision.ACTIVE?{...t,...To[n].presetTypes}:t,[i,...s]=Co(r,e,void 0,void 0,n),o=i?[i,...s.sort()]:[],a=To[n].escapeTypeString;return o.map(t=>{const e=r[t].map(t=>{const e="enum"===t.type&&n===m.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map(t=>t?a(t):t).join(",")})`:a(e);return`${a(t.name)}:${r}`});return`${a(t)}(${e})`}).join("")}function No(t,e,n=m.TypedDataRevision.LEGACY){return Ze(Oo(t,e,n))}function Lo(t,e,n,r={},i=m.TypedDataRevision.LEGACY){if(t[e])return[e,Po(t,e,n,i)];if(To[i].presetTypes[e])return[e,Po(To[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map(n=>Lo(t,e.slice(0,-1),n,void 0,i)[1]);return[e,To[i].hashMethod(r)]}switch(e){case"enum":if(i===m.TypedDataRevision.ACTIVE){const[s,o]=Object.entries(n)[0],a=t[r.parent].find(t=>t.name===r.key),c=t[a.contains],u=c.find(t=>t.name===s),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map((e,n)=>{if(!e)return e;const r=o[n];return Lo(t,e,r,void 0,i)[1]});return[e,To[i].hashMethod([l,...d])]}return[e,ko(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find(t=>t.name===e.key);if(!Ro(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map(n=>Lo(t,e,n,void 0,i)[1]),{root:o}=new Eo(s,To[i].hashMerkleMethod);return["felt",o]}case"selector":return["felt",Bo(n)];case"string":if(i===m.TypedDataRevision.ACTIVE){const t=pn(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,To[i].hashMethod(r)]}return[e,ko(n)];case"i128":if(i===m.TypedDataRevision.ACTIVE){const t=BigInt(n);return So(t,e,dt),[e,ko(t<0n?Z+t:t)]}return[e,ko(n)];case"timestamp":case"u128":return i===m.TypedDataRevision.ACTIVE&&So(n,e,ot),[e,ko(n)];case"felt":case"shortstring":return i===m.TypedDataRevision.ACTIVE&&So(ko(n),e,tt),[e,ko(n)];case"ClassHash":case"ContractAddress":return i===m.TypedDataRevision.ACTIVE&&So(n,e,tt),[e,ko(n)];case"bool":return i===m.TypedDataRevision.ACTIVE&&le(ye(n),`Type mismatch for ${e} ${n}`),[e,ko(n)];default:if(i===m.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,ko(n)]}}function Do(t,e,n,r=m.TypedDataRevision.LEGACY){const i=t[e]??To[r].presetTypes[e],[s,o]=i.reduce(([i,s],o)=>{if(void 0===n[o.name]||null===n[o.name]&&"enum"!==o.type)throw new Error(`Cannot encode data: missing data for '${o.name}'`);const a=n[o.name],c={parent:e,key:o.name},[u,l]=Lo(t,o.type,a,c,r);return[[...i,u],[...s,l]]},[["felt"],[No(t,e,r)]]);return[s,o]}function Po(t,e,n,r=m.TypedDataRevision.LEGACY){return To[r].hashMethod(Do(t,e,n,r)[1])}function Uo(t,e){if(!xo(t))throw new Error("Typed data does not match JSON schema");const n=Io(t),{domain:r,hashMethod:i}=To[n];return i([ln("StarkNet Message"),Po(t.types,r,t.domain,n),e,Po(t.types,t.primaryType,t.message,n)])}function Fo(t,e,n,r){const i=xo(t);if(!$e(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!$e(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Uo(t,r):Se(t),o=Array.isArray(e)?new vi.Signature(BigInt(e[0]),BigInt(e[1])):e,a=Se(n);return vi.verify(o,s,a)}async function Vo(t,e,n,r,i,s){const o=xo(e);if(!$e(e)&&!o)throw new Error("message has a wrong format.");if(!$e(r))throw new Error("accountAddress shall be a BigNumberish");const a=o?Uo(e,r):Se(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:Se(r),entrypoint:e,calldata:ni.compile({hash:Ae(a).toString(),signature:ns(n)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some(e=>t.message.includes(e)))return!1;l=t}throw Error(`Signature verification Error: ${l}`)}async function Ho(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}var Mo=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new so;else{const e=t;if(e&&e.specVersion)if(ks("0.8",e.specVersion))this.channel=new Ct.RpcChannel({...e,waitMode:!1});else{if(!ks("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new Js.RpcChannel({...e,waitMode:!1})}else if(ks("0.8",xt.get("rpcVersion")))this.channel=new Ct.RpcChannel({...e,waitMode:!1});else{if(!ks("0.9",xt.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Js.RpcChannel({...e,waitMode:!1})}this.responseParser=new so(e?.resourceBoundsOverhead)}}static async create(t){const e=new Ct.RpcChannel({...t}),n=await e.getSpecVersion();if(xs(n)||Rt.warn(`Using incompatible node spec version ${n}`),ks("0.8",n))return new this({...t,specVersion:At.v0_8_1});if(ks("0.9",n))return new this({...t,specVersion:At.v0_9_0});throw new gr(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(At).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=Yt.LATEST,e=5e3){if(t===Yt.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===Yt.PRE_CONFIRMED?n+1:Number(Se(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Ls(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof Js.RpcChannel)return Ho(this.channel,t);throw new gr("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);le("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return Je([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return bo(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return bo(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof Js.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return ms(i)?r?{cairo:"1",compiler:Qn(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Ct.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof Js.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return Vo(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=bs(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof gr)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===m.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return go(this,t,e)}},$o=n(6993),jo={};d(jo,{StarknetIdContract:()=>Qo,StarknetIdIdentityContract:()=>ea,StarknetIdMulticallContract:()=>ra,StarknetIdPfpContract:()=>aa,StarknetIdPopContract:()=>ua,StarknetIdVerifierContract:()=>sa,dynamicCallData:()=>fa,dynamicFelt:()=>ha,execution:()=>da,getStarknetIdContract:()=>ta,getStarknetIdIdentityContract:()=>na,getStarknetIdMulticallContract:()=>ia,getStarknetIdPfpContract:()=>ca,getStarknetIdPopContract:()=>la,getStarknetIdVerifierContract:()=>oa,isStarkDomain:()=>pa,useDecoded:()=>Xo,useEncoded:()=>Jo});var zo="abcdefghijklmnopqrstuvwxyz0123456789-",qo=BigInt(38),Yo="",Ko=BigInt(37),Go=BigInt(2),Wo=BigInt(3);function Zo(t){let e=0;for(;t.endsWith(Yo[1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function Xo(t){let e="";return t.forEach(t=>{for(;t!==Y;){const n=t%qo;if(t/=qo,n===BigInt(37)){const n=t/Wo;if(n===Y){const r=t%Wo;t=n,e+=r===Y?zo[0]:Yo[Number(r)-1]}else e+=Yo[Number(t%Go)],t/=Go}else e+=zo[Number(n)]}const[n,r]=Zo(e);r&&(e=n+(r%2==0?Yo[1].repeat(r/2-1)+Yo[0]+zo[1]:Yo[1].repeat((r-1)/2+1))),e+="."}),e?e.concat("stark"):e}function Jo(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(Yo[0]+zo[1])){const[e,n]=Zo(t.substring(0,t.length-2));t=e+Yo[1].repeat(2*(n+1))}else{const[e,n]=Zo(t);n&&(t=e+Yo[1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=zo.indexOf(i),o=BigInt(zo.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===zo[0]?(e+=n*Ko,n*=qo,n*=qo):(e+=n*o,n*=qo);else if(-1!==Yo.indexOf(i)){e+=n*Ko,n*=qo;const s=(r===t.length-1?1:0)+Yo.indexOf(i);e+=n*BigInt(s),n*=Go}}return e}var Qo={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ta(t){switch(t){case Et.SN_MAIN:return Qo.MAINNET;case Et.SN_SEPOLIA:return Qo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var ea={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function na(t){switch(t){case Et.SN_MAIN:return ea.MAINNET;case Et.SN_SEPOLIA:return ea.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ra="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ia(t){switch(t){case Et.SN_MAIN:case Et.SN_SEPOLIA:return ra;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var sa={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function oa(t){switch(t){case Et.SN_MAIN:return sa.MAINNET;case Et.SN_SEPOLIA:return sa.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var aa={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function ca(t){switch(t){case Et.SN_MAIN:return aa.MAINNET;case Et.SN_SEPOLIA:return aa.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ua={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function la(t){switch(t){case Et.SN_MAIN:return ua.MAINNET;case Et.SN_SEPOLIA:return ua.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function da(t,e=void 0,n=void 0){return new ir({Static:t,IfEqual:e?nr(e[0],e[1],e[2]):void 0,IfNotEqual:n?nr(n[0],n[1],n[2]):void 0})}function ha(t,e=void 0){return new ir({Hardcoded:t,Reference:e?nr(e[0],e[1]):void 0})}function fa(t,e=void 0,n=void 0){return new ir({Hardcoded:t,Reference:e?nr(e[0],e[1]):void 0,ArrayReference:n?nr(n[0],n[1]):void 0})}function pa(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var ga=class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,o,a){return t.getStarkProfile(this,e,n,r,i,s,o,a)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??ta(r);try{const n=Xo((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:ni.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!pa(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??ta(i);try{const e=r.replace(".stark","").split(".").map(t=>Jo(t).toString(10));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:ni.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,o,a){const c=await t.getChainId(),u=n??ta(c),l=r??na(c),d=i??oa(c),h=s??ca(c),f=o??la(c),p=a??ia(c);try{const n=[{execution:da({}),to:fa(u),selector:fa(Ze("address_to_domain")),calldata:[fa(e),fa("0")]},{execution:da({}),to:ha(u),selector:ha(Ze("domain_to_id")),calldata:[fa(void 0,void 0,[0,0])]},{execution:da({}),to:ha(l),selector:ha(Ze("get_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("twitter")),fa(d),fa("0")]},{execution:da({}),to:ha(l),selector:ha(Ze("get_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("github")),fa(d),fa("0")]},{execution:da({}),to:ha(l),selector:ha(Ze("get_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("discord")),fa(d),fa("0")]},{execution:da({}),to:ha(l),selector:ha(Ze("get_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("proof_of_personhood")),fa(f),fa("0")]},{execution:da({}),to:ha(l),selector:ha(Ze("get_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("nft_pp_contract")),fa(h),fa("0")]},{execution:da({}),to:ha(l),selector:ha(Ze("get_extended_verifier_data")),calldata:[fa(void 0,[1,0]),fa(ln("nft_pp_id")),fa("2"),fa(h),fa("0")]},{execution:da(void 0,void 0,[6,0,0]),to:ha(void 0,[6,0]),selector:ha(Ze("tokenURI")),calldata:[fa(void 0,[7,1]),fa(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:ni.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=Xo(e[0].slice(1).map(t=>BigInt(t))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,o="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,a="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:o,discord:a,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map(t=>dn(t)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function ya(t){return Jo(t.endsWith(".brother")?t.replace(".brother",""):t)}function ma(t){const e=Xo([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function ba(t){return Et.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var _a=class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??ba();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:ni.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return ma(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??ba();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:ni.compile({domain:ya(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??ba();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:ni.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=ma(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:ni.compile({domain:ya(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},wa=class extends((0,$o.Mixin)(Mo,ga,_a)){},Ea=class{},va=new Mo({default:!0}),Aa=class{},Ta=class{pk;constructor(t=vi.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?O(t):Se(t)}async getPubKey(){return vi.getStarkKey(this.pk)}async signMessage(t,e){const n=Uo(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=Gs(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ri({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:ls(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:ls(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ci({...n,version:n.version,nonceDataAvailabilityMode:ls(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return vi.sign(t,this.pk)}},Sa=n(8510),Ia={};function ka(t){return new In(t).toBigInt()}function xa(t){return In.is(t)}function Ba(t){return new In(t).toUint256HexString()}d(Ia,{bnToUint256:()=>Ba,isUint256:()=>xa,uint256ToBN:()=>ka});var Ra=class{pk;constructor(t=vs()){this.pk=t instanceof Uint8Array?O(t).padStart(64,"0"):N(Se(t)).padStart(64,"0")}async getPubKey(){return L(O(Sa.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(t,e){const n=Uo(t,e),r=Sa.secp256k1.sign(N(F(n)),this.pk);return this.formatEthSignature(r)}async signTransaction(t,e){const n=Gs(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ri({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:ls(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(t.feeDataAvailabilityMode)})}const i=Sa.secp256k1.sign(N(F(r)),this.pk);return this.formatEthSignature(i)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:ls(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(r.feeDataAvailabilityMode)})}const r=Sa.secp256k1.sign(N(F(n)),this.pk);return this.formatEthSignature(r)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ci({...n,version:n.version,nonceDataAvailabilityMode:ls(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(n.feeDataAvailabilityMode)})}const n=Sa.secp256k1.sign(N(F(e)),this.pk);return this.formatEthSignature(n)}formatEthSignature(t){const e=Ba(t.r),n=Ba(t.s);return[Se(e.low),Se(e.high),Se(n.low),Se(n.high),Se(t.recovery)]}},Ca=class{transporter;_transporter;accountID;eip2645applicationName;pathBuffer;appVersion;pubKey;fullPubKey;constructor(t,e,n="LedgerW",r=Oa){le(e>=0,"Ledger account ID shall not be a negative number."),le(e<=G,"Ledger account ID shall be < 2**31."),le(!!n,"Ledger application name shall not be empty."),this.transporter=t,this._transporter=this.transporter,this.accountID=e,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=n,this.appVersion="",this.pathBuffer=r(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const t=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion=`${t[0]}.${t[1]}.${t[2]}`}return this.appVersion}async signMessage(t,e){const n=Uo(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=Gs(t,e.cairoVersion);let r;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Ri({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:ls(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:ls(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Ci({...n,version:n.version,nonceDataAvailabilityMode:ls(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){L(O(await this._transporter.send(Number("0x5a"),2,0,0,_r.from(this.pathBuffer))));const e=Ve(Se(BigInt(t)<<4n)),n=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,_r.from(e))),r=BigInt(L(O(n.subarray(1,33)))),i=BigInt(L(O(n.subarray(33,65)))),s=n[65];return new vi.Signature(r,i).addRecoveryBit(s)}async getPublicKeys(){const t=this.pathBuffer,e=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,_r.from(t)));this.pubKey=L(O(e.subarray(1,33))),this.fullPubKey=L(O(e.subarray(0,65)))}};function Oa(t,e="LedgerW"){return H([new Uint8Array([128,0,10,85]),new Uint8Array([71,65,233,201]),"LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),new Uint8Array([0,0,0,0]),Ve(L(N(Se(t)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var Na=n(1484);function La(t){const e=Se(be(t)?L(t):t);return L(N(e).padStart(64,"0"))}function Da(t){const e=La(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return Ce(e,Y,J-1n,"Starknet Address"),e}function Pa(t){const e=N(Da(t)).toLowerCase().split(""),n=N(Ge(t)),r=(0,Na.hexToBytes)(n.padStart(64,"0"));for(let t=0;t<e.length;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return L(e.join(""))}function Ua(t){return Pa(t)===t}var Fa=class extends Ca{constructor(t,e,n="LedgerW",r=Va){super(t,e,n,r)}async signTransaction(t,e){const n=Gs(t,e.cairoVersion);if(Object.values(m.ETransactionVersion3).includes(e.version)){const r=e,i=Ri({...r,senderAddress:r.walletAddress,compiledCalldata:n,version:r.version,nonceDataAvailabilityMode:ls(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(r.feeDataAvailabilityMode)}),s=await this.signTxV3(r,t);return le(Ae(i)===s.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),s.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(t){const e=ni.compile(t.constructorCalldata);let n;if(Object.values(m.ETransactionVersion3).includes(t.version)){const r=t;n=Oi({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:ls(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:ls(r.feeDataAvailabilityMode)});const i=await this.signDeployAccountV3(r);return le(Ae(n)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(t){return Ve(La(Se(t)))}decodeSignatureLedger(t){const e=BigInt(L(O(t.subarray(0,32)))),n=BigInt(L(O(t.subarray(33,65)))),r=BigInt(L(O(t.subarray(65,97)))),i=t[97];return{hash:e,signature:new vi.Signature(n,r).addRecoveryBit(i)}}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),n=Ve(La(Xe(t.entrypoint)));let r=new Uint8Array([]);t.calldata&&(r=H(ni.compile(t.calldata).map(t=>this.convertBnToLedger(t))));const i=H([e,n,r]),s=[];for(let t=0;t<i.length;t+=224)s.push(i.subarray(t,t+224));return s}async signTxV3(t,e){le(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),le(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_r.from(this.pathBuffer));const n=this.convertBnToLedger(t.walletAddress),r=this.convertBnToLedger(t.tip),i=this.convertBnToLedger(t.chainId),s=this.convertBnToLedger(t.nonce),o=this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),a=H([n,r,this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),i,s,o]);await this._transporter.send(Number("0x5a"),3,1,0,_r.from(a));const c=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,2,0,_r.from(c));const u=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_r.from(u));const l=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,4,0,_r.from(l));let d=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);await this._transporter.send(Number("0x5a"),3,5,0,_r.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{await this._transporter.send(Number("0x5a"),3,5,1,_r.from(t))}),d=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(d)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_r.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,_r.from(e));const n=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_r.from(n));const r=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_r.from(r));const i=ni.compile(t.constructorCalldata),s=this.convertBnToLedger(i.length);await this._transporter.send(Number("0x5a"),5,4,0,_r.from(s));const o=H(i.map(t=>this.convertBnToLedger(t))),a=[];for(let t=0;t<o.length;t+=224)a.push(o.subarray(t,t+224));let c=new Uint8Array(0);for(const t of a)c=await this._transporter.send(Number("0x5a"),5,5,0,_r.from(t));return this.decodeSignatureLedger(c)}};function Va(t,e="LedgerW"){const n=new Uint8Array([mt,0,10,85]),r=new Uint8Array([71|mt,65,233,201]),i="LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),s=H([new Uint8Array([i[0]|mt]),i.subarray(1)]);return H([n,r,s,new Uint8Array([mt,0,0,0]),Ve(L(N(Se(BigInt(t)|bt)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var Ha=class extends Fa{constructor(t,e,n="LedgerW",r=Va){super(t,e,n,r)}async signTxV3(t,e){le(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),le(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_r.from(this.pathBuffer));const n=H([this.convertBnToLedger(t.walletAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(ls(t.nonceDataAvailabilityMode),ls(t.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,_r.from(n)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,_r.from(e))}const r=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_r.from(r));const i=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,4,0,_r.from(i));const s=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,5,0,_r.from(s));let o=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);o=await this._transporter.send(Number("0x5a"),3,6,0,_r.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{o=await this._transporter.send(Number("0x5a"),3,6,1,_r.from(t))})}return this.decodeSignatureLedger(o)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_r.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(ls(t.nonceDataAvailabilityMode),ls(t.feeDataAvailabilityMode))),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,_r.from(e)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_r.from(e))}const n=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_r.from(n));const r=ni.compile(t.constructorCalldata),i=this.convertBnToLedger(r.length);await this._transporter.send(Number("0x5a"),5,4,0,_r.from(i));const s=H(r.map(t=>this.convertBnToLedger(t))),o=[];for(let t=0;t<s.length;t+=224)o.push(s.subarray(t,t+224));let a=new Uint8Array(0);for(const t of o)a=await this._transporter.send(Number("0x5a"),5,5,0,_r.from(t));return this.decodeSignatureLedger(a)}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),n=Ve(La(Xe(t.entrypoint)));let r=new Uint8Array([]);if(t.calldata){const e=ni.compile(t.calldata);r=H([this.convertBnToLedger(e.length),...e.map(t=>this.convertBnToLedger(t))])}else r=this.convertBnToLedger("0x00");const i=H([e,n,r]),s=[];for(let t=0;t<i.length;t+=224)s.push(i.subarray(t,t+224));return s}},Ma={};function $a(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function ja(t){const e=t.calldata??[],n=Array.isArray(e)?e:ni.compile(e);return{to:t.contractAddress,selector:Ze(t.entrypoint),calldata:n}}function za(t,e){const n=ja(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function qa(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Ya(t,e,n,r,i){return"1"===i?{types:te,primaryType:"OutsideExecution",domain:qa(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(t=>za(t,i))}}:{types:ee,primaryType:"OutsideExecution",domain:qa(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(t=>za(t,i))}}}function Ka(t){const e=t.outsideExecution,n=ns(t.signature);return ni.compile({outside_execution:e,signature:n})}function Ga(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if(t.version===ne.V1)e="execute_from_outside";else{if(t.version!==ne.V2)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Se(t.signerAddress),entrypoint:e,calldata:Ka(t)}})}d(Ma,{buildExecuteFromOutsideCall:()=>Ga,buildExecuteFromOutsideCallData:()=>Ka,getOutsideCall:()=>ja,getTypedData:()=>Ya,toOutsideCallV2:()=>$a});var Wa={};async function Za(t,e,n){const r={contractAddress:Se(e),entrypoint:"supports_interface",calldata:[Se(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}d(Wa,{supportsInterface:()=>Za});var Xa={};d(Xa,{assertCallsAreStrictlyEqual:()=>Qa,assertPaymasterTransactionSafety:()=>tc,getDefaultPaymasterNodeUrl:()=>Ja});var Ja=(t,e=!1)=>{e||Rt.info("Using default public node url, please provide nodeUrl in provider options!");const n=It[t??wt.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Qa(t,e){const n="Provided calls are not strictly equal to the returned calls";le(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=$a(e[r]),o=t=>Ae(t).toString(16).toLowerCase();le(o(i.contractAddress)===o(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),le(Ze(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const a=ni.toCalldata(i.calldata),c=ni.toCalldata(s.Calldata);le(a.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${a.length}, Got length: ${c.length}`);for(let t=0;t<a.length;t+=1)le(BigInt(a[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${a[t]}, Got: ${c[t]}`)}}var tc=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Qa(e,i),((t,e)=>{const n=$a(t[t.length-1]);le(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(le(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=$a(t[t.length-1]),r=ni.toCalldata(n.Calldata)[1];le(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},ec=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},nc=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,rc=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},ic={"Content-Type":"application/json"},sc=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Ja(void 0),this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch??Ts,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(wt).includes(n)?this.nodeUrl=Ja(n,e?.default):this.nodeUrl=n||Ja(void 0,e?.default),this.baseFetch=i??Ts,this.headers={...ic,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new yr(n,t,e);if(r instanceof gr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map(t=>({to:t.contractAddress,selector:Ze(t.entrypoint),calldata:ni.toHex(t.calldata)})))}};break;default:n=t}var r;const i={version:e.version,fee_mode:ec(e.feeMode),time_bounds:nc(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),o={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:rc(s.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:rc(s.parameters),fee:o};default:return{type:"deploy",deployment:s.deployment,parameters:rc(s.parameters),fee:o}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:is(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:ec(e.feeMode),time_bounds:nc(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},oc=class{},ac=new sc({default:!0}),cc=class{address;entryPoint;constructor(t,e){this.address=t??ft.ADDRESS,this.entryPoint=e??ft.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:o}=t,a=zs(s,()=>{if(o){const t=new ni(o),e=Object.values(s);return t.validate(Kt.DEPLOY,"constructor",e),t.compile("constructor",e)}return ni.compile(s)}),c=r??es();return{call:{contractAddress:Se(this.address),entrypoint:this.entryPoint,calldata:[n,c,Fe(i),a.length,...a]},address:Vi(i?vi.pedersen(e,c):c,n,a,i?this.address:0)}});return{calls:n.map(t=>t.call),addresses:n.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Re(t.from_address)===Re(Se(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},uc=class{},lc=new cc(ft.ADDRESS,ft.ENTRYPOINT),dc=new cc(ht.ADDRESS,ht.ENTRYPOINT),hc=class extends wa{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:o,defaultTipType:a}=t;super(e),this.address=n.toLowerCase(),this.signer=be(r)||r instanceof Uint8Array?new Ta(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??xt.get("transactionVersion"),this.paymaster=o?new sc(o):ac,this.deployer=t.deployer??lc,this.defaultTipType=a??xt.get("defaultTipType"),Rt.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new gr("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Ae(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:m.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){le(ms(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:m.ETransactionType.DECLARE,payload:bs(t)}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=ni.compile(n),o=r??Vi(e,t,s,0),a=[{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:o}}];return(await this.estimateFeeBulk(a,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[as(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,o=await this.resolveDetailsWithTip(e),a=await this.accountInvocationsFactory(t,{...fs(o),versions:[ds(hs(this.transactionVersion)||Dt.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(a,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:o}=e,a=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...fs(a),versions:[this.resolveTransactionVersion(o)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:m.ETransactionType.INVOKE,payload:n}],{...fs(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:o.contractAddress,calldata:o.calldata,signature:o.signature},{...fs(r),resourceBounds:o.resourceBounds,nonce:o.nonce,version:o.version})}async fastExecute(t,e={},n={}){le(this.channel instanceof Js.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),le(this.channel.blockIdentifier===Yt.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,Yt.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i);return{txResult:s,isReady:await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n)}}async declareIfNot(t,e={}){const n=bs(t);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){le(ms(t.contract),kt.declareNonSierra);const n=bs(t),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:m.ETransactionType.DECLARE,payload:n}],{...fs(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:o.senderAddress,signature:o.signature,contract:o.contract,compiledClassHash:o.compiledClassHash},{...fs(r),nonce:o.nonce,resourceBounds:o.resourceBounds,version:o.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(""!==n.transaction_hash){const t=await this.waitForTransaction(n.transaction_hash,e);n={...n,...t}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=ni.compile(e),o=r??Vi(n,t,s,0),a=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let u=c;u||(u=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:o},a)).resourceBounds);const l=(await this.accountInvocationsFactory([{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:o}}],{...fs(a),resourceBounds:u,versions:[this.resolveTransactionVersion(i.version)],nonce:Y,skipValidate:!1}))[0];return super.deployAccountContract({classHash:l.classHash,addressSalt:l.addressSalt,constructorCalldata:l.constructorCalldata,signature:l.signature},{...fs(a),nonce:l.nonce,resourceBounds:l.resourceBounds,version:l.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Uo(t,this.address)}async getSnip9Version(){return await Za(this,this.address,yt)?ne.V2:await Za(this,this.address,gt)?ne.V1:ne.UNSUPPORTED}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Se(t)]},n=await this.callContract(e);return 0n!==BigInt(n[0])}catch(t){throw new Error(`Failed to check if nonce is valid: ${t}`)}}async getSnip9Nonce(){const t=es();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!Ee(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(`The caller ${t.caller} is not valid.`);const i=Ee(t.caller)?t.caller:pt,s=[e].flat(),o=n??await this.getSnip9Version();if(!o)throw new Error("This account is not handling outside transactions.");const a=r?Se(r):await this.getSnip9Nonce(),c=Ya(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},a,s,o),u=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:a,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(ja)},signature:u,signerAddress:this.address,version:o}}async executeFromOutside(t,e){const n=Ga(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return ds(this.transactionVersion||Dt.V3,t)}async buildInvocation(t,e){const n=Gs(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...fs(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=bs(t),s=Ps(r);le(!pe(i)&&(e.version===Dt.F3||e.version===Dt.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const o=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...fs(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:o,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=ni.compile(n),o=r??Vi(e,t,s,0),a=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...fs(i),classHash:t,contractAddress:o,addressSalt:e,constructorCalldata:s});return{...fs(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:a}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),o=await this.getChainId(),a=e.versions.map(t=>ds(t)),c="payload"in t[0]?t[0].payload:t[0],u=t[0].type===m.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,n)=>{const c="payload"in t?t.payload:t,l={...fs(e),walletAddress:this.address,nonce:Ae(Number(s)+n),chainId:o,cairoVersion:u,version:a[0],skipValidate:i},d={type:t.type,nonce:Ae(Number(s)+n),blockIdentifier:r,version:a[0]};if(t.type===m.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),l);return{...d,...t,...l}}if(t.type===m.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,l);return{...d,...e,...l,type:m.ETransactionType.INVOKE}}if(t.type===m.ETransactionType.DECLARE){le(ms(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,l);return{...d,...t,...l}}if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,l);return{...d,...t,...l}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&await this.getSnip9Version()===ne.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return r=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:is(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:is(n)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);tc(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},fc=class extends Ea{},pc={};function gc(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function yc(t){return t.request({type:"wallet_getPermissions"})}function mc(t,e){return t.request({type:"wallet_watchAsset",params:e})}function bc(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function _c(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function wc(t){return t.request({type:"wallet_requestChainId"})}function Ec(t){return t.request({type:"wallet_deploymentData"})}function vc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function Ac(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function Tc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function Sc(t){return t.request({type:"wallet_supportedSpecs"})}function Ic(t,e){t.on("accountsChanged",e)}function kc(t,e){t.on("networkChanged",e)}d(pc,{addDeclareTransaction:()=>Ac,addInvokeTransaction:()=>vc,addStarknetChain:()=>bc,deploymentData:()=>Ec,getPermissions:()=>yc,onAccountChange:()=>Ic,onNetworkChanged:()=>kc,requestAccounts:()=>gc,requestChainId:()=>wc,signMessage:()=>Tc,supportedSpecs:()=>Sc,switchStarknetChain:()=>_c,watchAsset:()=>mc});var xc=class t extends hc{walletProvider;constructor(t){super({...t,signer:""}),this.walletProvider=t.walletProvider,this.walletProvider.on("accountsChanged",t=>{t&&(this.address=t[0].toLowerCase())}),this.walletProvider.on("networkChanged",t=>{t&&this.channel.setChainId(t)})}onAccountChange(t){Ic(this.walletProvider,t)}onNetworkChanged(t){kc(this.walletProvider,t)}requestAccounts(t=!1){return gc(this.walletProvider,t)}getPermissions(){return yc(this.walletProvider)}switchStarknetChain(t){return _c(this.walletProvider,t)}watchAsset(t){return mc(this.walletProvider,t)}addStarknetChain(t){return bc(this.walletProvider,t)}execute(t){const e={calls:[].concat(t).map(t=>{const{contractAddress:e,entrypoint:n,calldata:r}=t;return{contract_address:e,entry_point:n,calldata:r}})};return vc(this.walletProvider,e)}declare(t){const e=bs(t),n=t.contract,r={...n,abi:ce(n.abi)};if(!e.compiledClassHash)throw Error("compiledClassHash is required");const i={compiled_class_hash:e.compiledClassHash,contract_class:r};return Ac(this.walletProvider,i)}async deploy(t){const{calls:e,addresses:n}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(e),contract_address:n}}signMessage(t){return Tc(this.walletProvider,t)}static async connect(e,n,r,i,s=!1){const[o]=await gc(n,s);return new t({provider:e,walletProvider:n,address:o,cairoVersion:r,paymaster:i})}static async connectSilent(e,n,r,i){return t.connect(e,n,r,i,!0)}},Bc={};function Rc(t){return"event"===t.type}function Cc(t){const e=t.filter(t=>Rc(t)&&"struct"===t.kind),n=t.filter(t=>Rc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let r=[],{name:i}=e,s=!1;const o=t=>t.type===i;for(;;){const t=n.find(t=>t.variants.some(o));if(pe(t))break;const e=t.variants.find(o);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const a=r.pop();let c={[L(vi.keccak(x(a)).toString(16))]:e};for(;r.length>0;)c={[L(vi.keccak(x(r.pop())).toString(16))]:c};return c={...c},Nc(t,c)},{})}function Oc(t){return Xn(t)?Cc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[L(vi.keccak(x(n)).toString(16))]:r}},{})}(t)}function Nc(t,e){const n={...t};return we(t)&&we(e)&&Object.keys(e).forEach(r=>{we(e[r])?r in t?n[r]=Nc(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function Lc(t,e,n,r,i){return t.flat().reduce((t,s)=>{const o=JSON.parse(JSON.stringify(s));let a=e[o.keys.shift()??0];if(!a)return t;for(;!a.name;){const t=o.keys.shift();le(!!t,'Not enough data in "keys" property of this event.'),a=a[t]}const c={};c[a.name]={};const u=o.keys[Symbol.iterator](),l=o.data[Symbol.iterator](),d=a.members?.filter(t=>"key"===t.kind)||a.keys,h=a.members?.filter(t=>"data"===t.kind)||a.data;return d.forEach(t=>{c[a.name][t.name]=Kr({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})}),h.forEach(t=>{c[a.name][t.name]=Kr({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})}),"block_hash"in o&&(c.block_hash=o.block_hash),"block_number"in o&&(c.block_number=o.block_number),"transaction_hash"in o&&(c.transaction_hash=o.transaction_hash),t.push(c),t},[])}function Dc(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.call(e.name,n,{parseRequest:t.parseRequest,parseResponse:t.parseResponse,...r})}}function Pc(t,e){return"view"===e.stateMutability||"view"===e.state_mutability?Dc(t,e):function(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.invoke(e.name,n,{parseRequest:t.parseRequest,...r})}}(t,e)}function Uc(t,e){return function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.estimate(e.name,n,r)}}d(Bc,{getAbiEvents:()=>Oc,isAbiEvent:()=>Rc,parseEvents:()=>Lc});var Fc=class t{abi;address;providerOrAccount;classHash;parseRequest;parseResponse;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;withOptionsProps;parsingStrategy;constructor(t){this.parsingStrategy=t.parsingStrategy;const e=Pr(t.abi,t.parsingStrategy);this.abi=e.getLegacyFormat(),this.address=t.address&&t.address.toLowerCase(),this.providerOrAccount=t.providerOrAccount??va,this.parseRequest=t.parseRequest??!0,this.parseResponse=t.parseResponse??!0,this.classHash=t.classHash,this.callData=new ni(t.abi,t.parsingStrategy),this.structs=ni.getAbiStruct(t.abi),this.events=Oc(t.abi);const n={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(t=>{if("function"!==t.type)return;const e=t.name;var r,i;this[e]||Object.defineProperty(this,e,{...n,value:Pc(this,t)}),this.functions[e]||Object.defineProperty(this.functions,e,{...n,value:Pc(this,t)}),this.callStatic[e]||Object.defineProperty(this.callStatic,e,{...n,value:Dc(this,t)}),this.populateTransaction[e]||Object.defineProperty(this.populateTransaction,e,{...n,value:(r=this,i=t,function(...t){return r.populate(i.name,t)})}),this.estimateFee[e]||Object.defineProperty(this.estimateFee,e,{...n,value:Uc(this,t)})})}withOptions(t){return this.withOptionsProps=t,this}attach(t,e){if(this.address=t,e){const t=Pr(e,this.parsingStrategy);this.abi=t.getLegacyFormat(),this.callData=new ni(e,this.parsingStrategy),this.structs=ni.getAbiStruct(e),this.events=Oc(e)}}async isDeployed(){try{await this.providerOrAccount.getClassHashAt(this.address)}catch(t){const e=t instanceof Error?t.message:String(t);throw new Error(`Contract not deployed at address ${this.address}: ${e}`)}return this}async call(t,e=[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:i,blockIdentifier:s}={}){le(null!==this.address,"contract is not connected to an address");const o=zs(e,()=>n?(this.callData.validate(Kt.CALL,t,e),this.callData.compile(t,e)):(Rt.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:o,entrypoint:t},s).then(e=>r?i?this.callData.format(t,e,i):this.callData.parse(t,e):e)}async invoke(t,e=[],n={}){const{parseRequest:r=!0,signature:i,waitForTransaction:s,...o}=n;le(null!==this.address,"contract is not connected to an address");const a=zs(e,()=>r?(this.callData.validate(Kt.INVOKE,t,e),this.callData.compile(t,e)):(Rt.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),e)),c={contractAddress:this.address,calldata:a,entrypoint:t};if(Qt(this.providerOrAccount)){const t=await this.providerOrAccount.execute(c,{...o});if(s){const e=await this.providerOrAccount.waitForTransaction(t.transaction_hash);if(e.isSuccess())return e;throw new Error("Transaction failed",{cause:e})}return t}if(!o.nonce)throw new Error("Manual nonce is required when invoking a function without an account");return Rt.warn(`Invoking ${t} without an account.`),this.providerOrAccount.invokeFunction({...c,signature:i},{...o,nonce:o.nonce})}async estimate(t,e=[],n={}){le(null!==this.address,"contract is not connected to an address"),zs(e,()=>!1)||this.callData.validate(Kt.INVOKE,t,e);const r=this.populate(t,e);if(Qt(this.providerOrAccount))return this.providerOrAccount.estimateInvokeFee(r,n);throw Error("Contract must be connected to the account contract to estimate")}populate(t,e=[]){const n=zs(e,()=>this.callData.compile(t,e));return{contractAddress:this.address,entrypoint:t,calldata:n}}parseEvents(t){let e=[];return t.match({SUCCEEDED:t=>{const n=t.events?.map(e=>({block_hash:t.block_hash,block_number:t.block_number,transaction_hash:t.transaction_hash,...e})).filter(t=>Re(t.from_address)===Re(this.address),[])||[];e=Lc(n,this.events,this.structs,ni.getAbiEnum(this.abi),this.callData.parser)},_:()=>{throw Error("This transaction was not successful.")}}),Object.defineProperty(e,"getByPath",{value:t=>{const n=e.find(e=>Object.keys(e).some(e=>e.includes(t))),r=Object.keys(n||{}).find(e=>e.includes(t));return r&&n?n[r]:null},writable:!1,enumerable:!1,configurable:!1}),e}isCairo1(){return gn.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(t){return this}static async factory(e,n={}){const{account:r,parseRequest:i=!0}=e;let s,o,a;if("classHash"in e&&e.classHash&&!("contract"in e)){const t=e;o=t.classHash.toString(),s=t.abi?t.abi:(await r.getClass(o)).abi,a=(await r.deployContract({classHash:o,constructorCalldata:t.constructorCalldata,salt:t.salt,unique:t.unique,abi:i?s:void 0},n)).contract_address}else{const t=e,c=Ps(t.contract);s=t.abi?t.abi:Us(c);const{declare:{class_hash:u},deploy:{contract_address:l}}=await r.declareAndDeploy({...t,abi:i?s:void 0},n);o=u.toString(),a=l}return le(Boolean(a),"Deployment of the contract failed"),new t({abi:s,address:a,providerOrAccount:r,classHash:o,parseRequest:e.parseRequest,parseResponse:e.parseResponse,parsingStrategy:e.parsingStrategy})}},Vc=class{functions;callStatic;populateTransaction;estimateFee},Hc=class{};function Mc(t,e="fri"){if("strk"===e){let e="";me(t)?e=t.toString():be(t)&&(e=Ee(t)?BigInt(t).toString():t);const[n,r="0"]=e.split(".");return`${n}${r.padEnd(18,"0")}`.replace(/\b0+/g,"")}const n=BigInt(t).toString();let r;return r=n.length<=18?`0.${n.padStart(18,"0")}`:`${n.slice(0,n.length-18)}.${n.slice(n.length-18)}`,r.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}},3611(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=o;const a={number:n,bytes:r,hash:i,exists:s,output:o};e.default=a},1604(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(3611),i=n(8761);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,o=(t=(0,i.toBytes)(t)).length;for(let r=0;r<o;){const a=Math.min(s-this.pos,o-r);if(a===s){const e=(0,i.createView)(t);for(;s<=o-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:o}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let t=a;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,s-8,BigInt(8*this.length),o),this.process(n,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},1832(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=s,e.add=_;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:o,l:a}=i(t[s],e);[n[s],r[s]]=[o,a]}return[n,r]}const o=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=o;const a=(t,e,n)=>t>>>n;e.shrSH=a;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const u=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=u;const l=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=l;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:o,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},367(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},9981(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(1604),i=n(8761),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)a[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=a[t-15],n=a[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;a[t]=s+a[t-7]+r+a[t-16]|0}let{A:n,B:o,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,r.Chi)(l,d,h)+s[t]+a[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,o,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=o,o=n,n=e+p|0}n=n+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,o,c,u,l,d,h,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},1165(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const r=n(3611),i=n(1832),s=n(8761),o=[],a=[],c=[],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=l,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],o.push(2*(5*r+n)),a.push((t+1)*(t+2)/2%64);let i=u;for(let t=0;t<7;t++)e=(e<<l^(e>>h)*p)%f,e&d&&(i^=l<<(l<<BigInt(t))-l);c.push(i)}const[g,y]=(0,i.split)(c,!0),m=(t,e,n)=>n>32?(0,i.rotlBH)(t,e,n):(0,i.rotlSH)(t,e,n),b=(t,e,n)=>n>32?(0,i.rotlBL)(t,e,n):(0,i.rotlSL)(t,e,n);function _(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=m(s,o,1)^n[r],c=b(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=a[n],s=m(e,i,r),c=b(e,i,r),u=o[n];e=t[u],i=t[u+1],t[u]=s,t[u+1]=c}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=g[r],t[1]^=y[r]}n.fill(0)}class w extends s.Hash{constructor(t,e,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),_(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,r.aexists)(this);const{blockLen:e,state:n}=this,i=(t=(0,s.toBytes)(t)).length;for(let r=0;r<i;){const s=Math.min(e-this.pos,i-r);for(let e=0;e<s;e++)n[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,r.aexists)(this,!1),(0,r.abytes)(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,r.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,r.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new w(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}e.Keccak=w;const E=(t,e,n)=>(0,s.wrapConstructor)(()=>new w(e,t,n));e.sha3_224=E(6,144,28),e.sha3_256=E(6,136,32),e.sha3_384=E(6,104,48),e.sha3_512=E(6,72,64),e.keccak_224=E(1,144,28),e.keccak_256=E(1,136,32),e.keccak_384=E(1,104,48),e.keccak_512=E(1,72,64);const v=(t,e,n)=>(0,s.wrapXOFConstructorWithOpts)((r={})=>new w(e,t,void 0===r.dkLen?n:r.dkLen,!0));e.shake128=v(31,168,16),e.shake256=v(31,136,32)},8761(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=o(t.charCodeAt(i)),s=o(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(367),i=n(3611);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function o(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function a(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=a(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2506(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rotl=function(t,e){return t<<e|t>>>32-e},e.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:i,counterLength:s,counterRight:o,rounds:f}=(0,r.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return(0,r.anumber)(s),(0,r.anumber)(f),(0,r.abool)(o),(0,r.abool)(n),(e,p,g,y,m=0)=>{(0,r.abytes)(e),(0,r.abytes)(p),(0,r.abytes)(g);const b=g.length;if(void 0===y&&(y=new Uint8Array(b)),(0,r.abytes)(y),(0,r.anumber)(m),m<0||m>=d)throw new Error("arx: counter overflow");if(y.length<b)throw new Error(`arx: output (${y.length}) is shorter than data (${b})`);const _=[];let w,E,v=e.length;if(32===v)_.push(w=(0,r.copyBytes)(e)),E=c;else{if(16!==v||!n)throw new Error(`arx: invalid 32-byte key, got length=${v}`);w=new Uint8Array(32),w.set(e),w.set(e,16),E=a,_.push(w)}u(p)||_.push(p=(0,r.copyBytes)(p));const A=(0,r.u32)(w);if(i){if(24!==p.length)throw new Error("arx: extended nonce must be 24 bytes");i(E,A,(0,r.u32)(p.subarray(0,16)),A),p=p.subarray(16)}const T=16-s;if(T!==p.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(12!==T){const t=new Uint8Array(12);t.set(p,o?0:12-p.length),p=t,_.push(p)}const S=(0,r.u32)(p);return function(t,e,n,i,s,o,a,c){const f=s.length,p=new Uint8Array(l),g=(0,r.u32)(p),y=u(s)&&u(o),m=y?(0,r.u32)(s):h,b=y?(0,r.u32)(o):h;for(let r=0;r<f;a++){if(t(e,n,i,g,a,c),a>=d)throw new Error("arx: counter overflow");const u=Math.min(l,f-r);if(y&&u===l){const t=r/4;if(r%4!=0)throw new Error("arx: invalid block position");for(let e,n=0;n<16;n++)e=t+n,b[e]=m[e]^g[n];r+=l;continue}for(let t,e=0;e<u;e++)t=r+e,o[t]=s[t]^p[e];r+=u}}(t,E,A,S,g,y,m,f),(0,r.clean)(..._),y}};const r=n(6527),i=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),s=i("expand 16-byte k"),o=i("expand 32-byte k"),a=(0,r.u32)(s),c=(0,r.u32)(o);function u(t){return t.byteOffset%4==0}const l=64,d=2**32-1,h=new Uint32Array},1210(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poly1305=void 0,e.wrapConstructorWithKey=o;const r=n(6527),i=(t,e)=>255&t[e++]|(255&t[e++])<<8;class s{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,r.toBytes)(t),(0,r.abytes)(t,32);const e=i(t,0),n=i(t,2),s=i(t,4),o=i(t,6),a=i(t,8),c=i(t,10),u=i(t,12),l=i(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|s<<6),this.r[3]=8191&(s>>>7|o<<9),this.r[4]=255&(o>>>4|a<<12),this.r[5]=a>>>1&8190,this.r[6]=8191&(a>>>14|c<<2),this.r[7]=8065&(c>>>11|u<<5),this.r[8]=8191&(u>>>8|l<<8),this.r[9]=l>>>5&127;for(let e=0;e<8;e++)this.pad[e]=i(t,16+2*e)}process(t,e,n=!1){const r=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=i(t,e+0),b=i(t,e+2),_=i(t,e+4),w=i(t,e+6),E=i(t,e+8),v=i(t,e+10),A=i(t,e+12),T=i(t,e+14);let S=s[0]+(8191&m),I=s[1]+(8191&(m>>>13|b<<3)),k=s[2]+(8191&(b>>>10|_<<6)),x=s[3]+(8191&(_>>>7|w<<9)),B=s[4]+(8191&(w>>>4|E<<12)),R=s[5]+(E>>>1&8191),C=s[6]+(8191&(E>>>14|v<<2)),O=s[7]+(8191&(v>>>11|A<<5)),N=s[8]+(8191&(A>>>8|T<<8)),L=s[9]+(T>>>5|r),D=0,P=D+S*a+I*(5*y)+k*(5*g)+x*(5*p)+B*(5*f);D=P>>>13,P&=8191,P+=R*(5*h)+C*(5*d)+O*(5*l)+N*(5*u)+L*(5*c),D+=P>>>13,P&=8191;let U=D+S*c+I*a+k*(5*y)+x*(5*g)+B*(5*p);D=U>>>13,U&=8191,U+=R*(5*f)+C*(5*h)+O*(5*d)+N*(5*l)+L*(5*u),D+=U>>>13,U&=8191;let F=D+S*u+I*c+k*a+x*(5*y)+B*(5*g);D=F>>>13,F&=8191,F+=R*(5*p)+C*(5*f)+O*(5*h)+N*(5*d)+L*(5*l),D+=F>>>13,F&=8191;let V=D+S*l+I*u+k*c+x*a+B*(5*y);D=V>>>13,V&=8191,V+=R*(5*g)+C*(5*p)+O*(5*f)+N*(5*h)+L*(5*d),D+=V>>>13,V&=8191;let H=D+S*d+I*l+k*u+x*c+B*a;D=H>>>13,H&=8191,H+=R*(5*y)+C*(5*g)+O*(5*p)+N*(5*f)+L*(5*h),D+=H>>>13,H&=8191;let M=D+S*h+I*d+k*l+x*u+B*c;D=M>>>13,M&=8191,M+=R*a+C*(5*y)+O*(5*g)+N*(5*p)+L*(5*f),D+=M>>>13,M&=8191;let $=D+S*f+I*h+k*d+x*l+B*u;D=$>>>13,$&=8191,$+=R*c+C*a+O*(5*y)+N*(5*g)+L*(5*p),D+=$>>>13,$&=8191;let j=D+S*p+I*f+k*h+x*d+B*l;D=j>>>13,j&=8191,j+=R*u+C*c+O*a+N*(5*y)+L*(5*g),D+=j>>>13,j&=8191;let z=D+S*g+I*p+k*f+x*h+B*d;D=z>>>13,z&=8191,z+=R*l+C*u+O*c+N*a+L*(5*y),D+=z>>>13,z&=8191;let q=D+S*y+I*g+k*p+x*f+B*h;D=q>>>13,q&=8191,q+=R*d+C*l+O*u+N*c+L*a,D+=q>>>13,q&=8191,D=(D<<2)+D|0,D=D+P|0,P=8191&D,D>>>=13,U+=D,s[0]=P,s[1]=U,s[2]=F,s[3]=V,s[4]=H,s[5]=M,s[6]=$,s[7]=j,s[8]=z,s[9]=q}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=i,i=t[e]>>>13,t[e]&=8191;t[0]+=5*i,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,n[0]=t[0]+5,i=n[0]>>>13,n[0]&=8191;for(let e=1;e<10;e++)n[e]=t[e]+i,i=n[e]>>>13,n[e]&=8191;n[9]-=8192;let s=(1^i)-1;for(let t=0;t<10;t++)n[t]&=s;s=~s;for(let e=0;e<10;e++)t[e]=t[e]&s|n[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let o=t[0]+e[0];t[0]=65535&o;for(let n=1;n<8;n++)o=(t[n]+e[n]|0)+(o>>>16)|0,t[n]=65535&o;(0,r.clean)(n)}update(t){(0,r.aexists)(this),t=(0,r.toBytes)(t),(0,r.abytes)(t);const{buffer:e,blockLen:n}=this,i=t.length;for(let r=0;r<i;){const s=Math.min(n-this.pos,i-r);if(s!==n)e.set(t.subarray(r,r+s),this.pos),this.pos+=s,r+=s,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=i-r;r+=n)this.process(t,r)}return this}destroy(){(0,r.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let s=0;for(let e=0;e<8;e++)t[s++]=n[e]>>>0,t[s++]=n[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}function o(t){const e=(e,n)=>t(n).update((0,r.toBytes)(e)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}e.poly1305=o(t=>new s(t))},8900(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=a;const r=n(2506),i=n(1210),s=n(6527);function o(t,e,n,i,s,o=20){let a=t[0],c=t[1],u=t[2],l=t[3],d=e[0],h=e[1],f=e[2],p=e[3],g=e[4],y=e[5],m=e[6],b=e[7],_=s,w=n[0],E=n[1],v=n[2],A=a,T=c,S=u,I=l,k=d,x=h,B=f,R=p,C=g,O=y,N=m,L=b,D=_,P=w,U=E,F=v;for(let t=0;t<o;t+=2)A=A+k|0,D=(0,r.rotl)(D^A,16),C=C+D|0,k=(0,r.rotl)(k^C,12),A=A+k|0,D=(0,r.rotl)(D^A,8),C=C+D|0,k=(0,r.rotl)(k^C,7),T=T+x|0,P=(0,r.rotl)(P^T,16),O=O+P|0,x=(0,r.rotl)(x^O,12),T=T+x|0,P=(0,r.rotl)(P^T,8),O=O+P|0,x=(0,r.rotl)(x^O,7),S=S+B|0,U=(0,r.rotl)(U^S,16),N=N+U|0,B=(0,r.rotl)(B^N,12),S=S+B|0,U=(0,r.rotl)(U^S,8),N=N+U|0,B=(0,r.rotl)(B^N,7),I=I+R|0,F=(0,r.rotl)(F^I,16),L=L+F|0,R=(0,r.rotl)(R^L,12),I=I+R|0,F=(0,r.rotl)(F^I,8),L=L+F|0,R=(0,r.rotl)(R^L,7),A=A+x|0,F=(0,r.rotl)(F^A,16),N=N+F|0,x=(0,r.rotl)(x^N,12),A=A+x|0,F=(0,r.rotl)(F^A,8),N=N+F|0,x=(0,r.rotl)(x^N,7),T=T+B|0,D=(0,r.rotl)(D^T,16),L=L+D|0,B=(0,r.rotl)(B^L,12),T=T+B|0,D=(0,r.rotl)(D^T,8),L=L+D|0,B=(0,r.rotl)(B^L,7),S=S+R|0,P=(0,r.rotl)(P^S,16),C=C+P|0,R=(0,r.rotl)(R^C,12),S=S+R|0,P=(0,r.rotl)(P^S,8),C=C+P|0,R=(0,r.rotl)(R^C,7),I=I+k|0,U=(0,r.rotl)(U^I,16),O=O+U|0,k=(0,r.rotl)(k^O,12),I=I+k|0,U=(0,r.rotl)(U^I,8),O=O+U|0,k=(0,r.rotl)(k^O,7);let V=0;i[V++]=a+A|0,i[V++]=c+T|0,i[V++]=u+S|0,i[V++]=l+I|0,i[V++]=d+k|0,i[V++]=h+x|0,i[V++]=f+B|0,i[V++]=p+R|0,i[V++]=g+C|0,i[V++]=y+O|0,i[V++]=m+N|0,i[V++]=b+L|0,i[V++]=_+D|0,i[V++]=w+P|0,i[V++]=E+U|0,i[V++]=v+F|0}function a(t,e,n,i){let s=t[0],o=t[1],a=t[2],c=t[3],u=e[0],l=e[1],d=e[2],h=e[3],f=e[4],p=e[5],g=e[6],y=e[7],m=n[0],b=n[1],_=n[2],w=n[3];for(let t=0;t<20;t+=2)s=s+u|0,m=(0,r.rotl)(m^s,16),f=f+m|0,u=(0,r.rotl)(u^f,12),s=s+u|0,m=(0,r.rotl)(m^s,8),f=f+m|0,u=(0,r.rotl)(u^f,7),o=o+l|0,b=(0,r.rotl)(b^o,16),p=p+b|0,l=(0,r.rotl)(l^p,12),o=o+l|0,b=(0,r.rotl)(b^o,8),p=p+b|0,l=(0,r.rotl)(l^p,7),a=a+d|0,_=(0,r.rotl)(_^a,16),g=g+_|0,d=(0,r.rotl)(d^g,12),a=a+d|0,_=(0,r.rotl)(_^a,8),g=g+_|0,d=(0,r.rotl)(d^g,7),c=c+h|0,w=(0,r.rotl)(w^c,16),y=y+w|0,h=(0,r.rotl)(h^y,12),c=c+h|0,w=(0,r.rotl)(w^c,8),y=y+w|0,h=(0,r.rotl)(h^y,7),s=s+l|0,w=(0,r.rotl)(w^s,16),g=g+w|0,l=(0,r.rotl)(l^g,12),s=s+l|0,w=(0,r.rotl)(w^s,8),g=g+w|0,l=(0,r.rotl)(l^g,7),o=o+d|0,m=(0,r.rotl)(m^o,16),y=y+m|0,d=(0,r.rotl)(d^y,12),o=o+d|0,m=(0,r.rotl)(m^o,8),y=y+m|0,d=(0,r.rotl)(d^y,7),a=a+h|0,b=(0,r.rotl)(b^a,16),f=f+b|0,h=(0,r.rotl)(h^f,12),a=a+h|0,b=(0,r.rotl)(b^a,8),f=f+b|0,h=(0,r.rotl)(h^f,7),c=c+u|0,_=(0,r.rotl)(_^c,16),p=p+_|0,u=(0,r.rotl)(u^p,12),c=c+u|0,_=(0,r.rotl)(_^c,8),p=p+_|0,u=(0,r.rotl)(u^p,7);let E=0;i[E++]=s,i[E++]=o,i[E++]=a,i[E++]=c,i[E++]=m,i[E++]=b,i[E++]=_,i[E++]=w}e.chacha20orig=(0,r.createCipher)(o,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,r.createCipher)(o,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,r.createCipher)(o,{counterRight:!1,counterLength:8,extendNonceFn:a,allowShortKeys:!1}),e.chacha8=(0,r.createCipher)(o,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,r.createCipher)(o,{counterRight:!1,counterLength:4,rounds:12});const c=new Uint8Array(16),u=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(c.subarray(n))},l=new Uint8Array(32);function d(t,e,n,r,o){const a=t(e,n,l),c=i.poly1305.create(a);o&&u(c,o),u(c,r);const d=(0,s.u64Lengths)(r.length,o?o.length:0,!0);c.update(d);const h=c.digest();return(0,s.clean)(a,d),h}e._poly1305_aead=t=>(e,n,r)=>({encrypt(i,o){const a=i.length;(o=(0,s.getOutput)(a+16,o,!1)).set(i);const c=o.subarray(0,-16);t(e,n,c,c,1);const u=d(t,e,n,c,r);return o.set(u,a),(0,s.clean)(u),o},decrypt(i,o){o=(0,s.getOutput)(i.length-16,o,!1);const a=i.subarray(0,-16),c=i.subarray(-16),u=d(t,e,n,a,r);if(!(0,s.equalBytes)(c,u))throw new Error("invalid tag");return o.set(i.subarray(0,-16)),t(e,n,o,o,1),(0,s.clean)(u),o}}),e.chacha20poly1305=(0,s.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,s.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))},5297(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},6527(t,e){"use strict";function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function r(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function o(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=void 0,e.isBytes=n,e.abool=r,e.anumber=i,e.abytes=s,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");i(t.outputLen),i(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){s(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=o,e.bytesToHex=u,e.hexToBytes=d,e.hexToNumber=h,e.bytesToNumberBE=function(t){return h(u(t))},e.numberToBytesBE=function(t,e){return d(t.toString(16).padStart(2*e,"0"))},e.utf8ToBytes=f,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=function(t){if("string"==typeof t)t=f(t);else{if(!n(t))throw new Error("Uint8Array expected, got "+typeof t);t=m(t)}return t},e.overlapBytes=p,e.complexOverlapBytes=function(t,e){if(p(t,e)&&t.byteOffset<e.byteOffset)throw new Error("complex overlap of input and output is not supported")},e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];s(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)},e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},e.getOutput=function(t,e,n=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!y(e))throw new Error("invalid output, must be aligned");return e},e.setBigUint64=g,e.u64Lengths=function(t,e,n){r(n);const i=new Uint8Array(16),s=o(i);return g(s,0,BigInt(e),n),g(s,8,BigInt(t),n),i},e.isAligned32=y,e.copyBytes=m,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];const a=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),c=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u(t){if(s(t),a)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=c[t[n]];return e}function l(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function d(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(a)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=l(t.charCodeAt(i)),s=l(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":"0x"+t)}function f(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function p(t,e){return t.buffer===e.buffer&&t.byteOffset<e.byteOffset+e.byteLength&&e.byteOffset<t.byteOffset+t.byteLength}function g(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function y(t){return t.byteOffset%4==0}function m(t){return Uint8Array.from(t)}e.nextTick=async()=>{},e.Hash=class{},e.wrapCipher=(t,n)=>{function r(r,...i){if(s(r),!e.isLE)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const e=i[0];if(!e)throw new Error("nonce / iv required");t.varSizeNonce?s(e):s(e,t.nonceLength)}const o=t.tagLength;o&&void 0!==i[1]&&s(i[1]);const a=n(r,...i),c=(t,e)=>{if(void 0!==e){if(2!==t)throw new Error("cipher output not supported");s(e)}};let u=!1;return{encrypt(t,e){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,s(t),c(a.encrypt.length,e),a.encrypt(t,e)},decrypt(t,e){if(s(t),o&&t.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(a.decrypt.length,e),a.decrypt(t,e)}}}return Object.assign(r,t),r}},8489(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=s,e.getWebcryptoSubtle=o,e.managedNonce=function(t){const{nonceLength:e}=t;return(0,i.anumber)(e),(n,...r)=>({encrypt(o,...a){const c=s(e),u=t(n,c,...r).encrypt(o,...a),l=(0,i.concatBytes)(c,u);return u.fill(0),l},decrypt(i,...s){const o=i.subarray(0,e),a=i.subarray(e);return t(n,o,...r).decrypt(a,...s)}})};const r=n(5297),i=n(6527);function s(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function o(){if(r.crypto&&"object"==typeof r.crypto.subtle&&null!=r.crypto.subtle)return r.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={async encrypt(t,e,n,r){const i=o(),s=await i.importKey("raw",t,e,!0,["encrypt"]),a=await i.encrypt(n,s,r);return new Uint8Array(a)},async decrypt(t,e,n,r){const i=o(),s=await i.importKey("raw",t,e,!0,["decrypt"]),a=await i.decrypt(n,s,r);return new Uint8Array(a)}};const a="AES-CBC",c="AES-CTR",u="AES-GCM";function l(t){return(n,r,s)=>{(0,i.abytes)(n),(0,i.abytes)(r);const o={name:t,length:8*n.length},l=function(t,e,n){if(t===a)return{name:a,iv:e};if(t===c)return{name:c,counter:e,length:64};if(t===u)return n?{name:u,iv:e,additionalData:n}:{name:u,iv:e};throw new Error("unknown aes block mode")}(t,r,s);let d=!1;return{encrypt(t){if((0,i.abytes)(t),d)throw new Error("Cannot encrypt() twice with same key / nonce");return d=!0,e.utils.encrypt(n,o,l,t)},decrypt:t=>((0,i.abytes)(t),e.utils.decrypt(n,o,l,t))}}}e.cbc=l(a),e.ctr=l(c),e.gcm=(()=>l(u))()},3562(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=o,e.createCurve=function(t,e){const n=e=>(0,s.weierstrass)({...t,...o(e)});return Object.freeze({...n(e),create:n})};const r=n(3788),i=n(1130),s=n(1705);function o(t){return{hash:t,hmac:(e,...n)=>(0,r.hmac)(t,e,(0,i.concatBytes)(...n)),randomBytes:i.randomBytes}}},2422(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wNAF=function(t,e){return{constTimeNegate:a,hasPrecomputes:t=>1!==p(t),unsafeLadder(e,n,r=t.ZERO){let i=e;for(;n>s;)n&o&&(r=r.add(i)),i=i.double(),n>>=o;return r},precomputeWindow(t,n){const{windows:r,windowSize:i}=u(n,e),s=[];let o=t,a=o;for(let t=0;t<r;t++){a=o,s.push(a);for(let t=1;t<i;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(n,r,i){const{windows:s,windowSize:c}=u(n,e);let l=t.ZERO,d=t.BASE;const h=BigInt(2**n-1),f=2**n,p=BigInt(n);for(let t=0;t<s;t++){const e=t*c;let n=Number(i&h);i>>=p,n>c&&(n-=f,i+=o);const s=e,u=e+Math.abs(n)-1,g=t%2!=0,y=n<0;0===n?d=d.add(a(g,r[s])):l=l.add(a(y,r[u]))}return{p:l,f:d}},wNAFUnsafe(n,r,i,a=t.ZERO){const{windows:c,windowSize:l}=u(n,e),d=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let t=0;t<c;t++){const e=t*l;if(i===s)break;let n=Number(i&d);if(i>>=f,n>l&&(n-=h,i+=o),0===n)continue;let c=r[e+Math.abs(n)-1];n<0&&(c=c.negate()),a=a.add(c)}return a},getPrecomputes(t,e,n){let r=h.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&h.set(e,n(r))),r},wNAFCached(t,e,n){const r=p(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=p(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,n){c(n,e),f.set(t,n),h.delete(t)}}},e.pippenger=function(t,e,n,r){if(l(n,t),d(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,o=(0,i.bitLen)(BigInt(n.length)),a=o>12?o-3:o>4?o-2:o?2:1,c=(1<<a)-1,u=new Array(c+1).fill(s);let h=s;for(let t=Math.floor((e.BITS-1)/a)*a;t>=0;t-=a){u.fill(s);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(c));u[s]=u[s].add(n[e])}let e=s;for(let t=u.length-1,n=s;t>0;t--)n=n.add(u[t]),e=e.add(n);if(h=h.add(e),0!==t)for(let t=0;t<a;t++)h=h.double()}return h},e.precomputeMSMUnsafe=function(t,e,n,r){c(r,e.BITS),l(n,t);const i=t.ZERO,s=2**r-1,o=Math.ceil(e.BITS/r),a=BigInt((1<<r)-1),u=n.map(t=>{const e=[];for(let n=0,r=t;n<s;n++)e.push(r),r=r.add(t);return e});return t=>{if(d(t,e),t.length>n.length)throw new Error("array of scalars must be smaller than array of points");let s=i;for(let e=0;e<o;e++){if(s!==i)for(let t=0;t<r;t++)s=s.double();const n=BigInt(o*r-(e+1)*r);for(let e=0;e<t.length;e++){const r=t[e],i=Number(r>>n&a);i&&(s=s.add(u[e][i-1]))}}return s}},e.validateBasic=function(t){return(0,r.validateField)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const r=n(4967),i=n(1484),s=BigInt(0),o=BigInt(1);function a(t,e){const n=e.negate();return t?n:e}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function u(t,e){return c(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}function l(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function d(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const h=new WeakMap,f=new WeakMap;function p(t){return f.get(t)||1}},1761(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expand_message_xmd=u,e.expand_message_xof=l,e.hash_to_field=d,e.isogenyMap=function(t,e){const n=e.map(t=>Array.from(t).reverse());return(e,r)=>{const[i,s,o,a]=n.map(n=>n.reduce((n,r)=>t.add(t.mul(n,e),r)));return e=t.div(i,s),r=t.mul(r,t.div(o,a)),{x:e,y:r}}},e.createHasher=function(t,e,n){if("function"!=typeof e)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=d(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=d(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const t of n)if("bigint"!=typeof t)throw new Error("mapToCurve: expected array of bigints");const r=t.fromAffine(e(n)).clearCofactor();return r.assertValidity(),r}}};const r=n(4967),i=n(1484),s=i.bytesToNumberBE;function o(t,e){if(c(t),c(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function a(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function c(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function u(t,e,n,r){(0,i.abytes)(t),(0,i.abytes)(e),c(n),e.length>255&&(e=r((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:u}=r,l=Math.ceil(n/s);if(n>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");const d=(0,i.concatBytes)(e,o(e.length,1)),h=o(0,u),f=o(n,2),p=new Array(l),g=r((0,i.concatBytes)(h,t,f,o(0,1),d));p[0]=r((0,i.concatBytes)(g,o(1,1),d));for(let t=1;t<=l;t++){const e=[a(g,p[t-1]),o(t+1,1),d];p[t]=r((0,i.concatBytes)(...e))}return(0,i.concatBytes)(...p).slice(0,n)}function l(t,e,n,r,s){if((0,i.abytes)(t),(0,i.abytes)(e),c(n),e.length>255){const t=Math.ceil(2*r/8);e=s.create({dkLen:t}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(o(n,2)).update(e).update(o(e.length,1)).digest()}function d(t,e,n){(0,i.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:o,k:a,m:d,hash:h,expand:f,DST:p}=n;(0,i.abytes)(t),c(e);const g="string"==typeof p?(0,i.utf8ToBytes)(p):p,y=o.toString(2).length,m=Math.ceil((y+a)/8),b=e*d*m;let _;if("xmd"===f)_=u(t,g,b,h);else if("xof"===f)_=l(t,g,b,a,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');_=t}const w=new Array(e);for(let t=0;t<e;t++){const e=new Array(d);for(let n=0;n<d;n++){const i=m*(n+t*d),a=_.subarray(i,i+m);e[n]=(0,r.mod)(s(a),o)}w[t]=e}return w}},4967(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNegativeLE=void 0,e.mod=d,e.pow=h,e.pow2=function(t,e,n){let r=t;for(;e-- >i;)r*=r,r%=n;return r},e.invert=f,e.tonelliShanks=p,e.FpSqrt=g,e.validateField=function(t){const e=y.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(t,e)},e.FpPow=m,e.FpInvertBatch=b,e.FpDiv=function(t,e,n){return t.mul(e,"bigint"==typeof n?f(n,t.ORDER):t.inv(n))},e.FpLegendre=_,e.FpIsSquare=function(t){const e=_(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},e.nLength=w,e.Field=function(t,e,n=!1,o={}){if(t<=i)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:a,nByteLength:c}=w(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:t,BITS:a,BYTES:c,MASK:(0,r.bitMask)(a),ZERO:i,ONE:s,create:e=>d(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&s)===s,neg:e=>d(-e,t),eql:(t,e)=>t===e,sqr:e=>d(e*e,t),add:(e,n)=>d(e+n,t),sub:(e,n)=>d(e-n,t),mul:(e,n)=>d(e*n,t),pow:(t,e)=>m(l,t,e),div:(e,n)=>d(e*f(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>f(e,t),sqrt:o.sqrt||(e=>(u||(u=g(t)),u(l,e))),invertBatch:t=>b(l,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?(0,r.numberToBytesLE)(t,c):(0,r.numberToBytesBE)(t,c),fromBytes:t=>{if(t.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+t.length);return n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t)}});return Object.freeze(l)},e.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},e.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},e.hashToPrivateScalar=function(t,e,n=!1){const i=(t=(0,r.ensureBytes)("privateHash",t)).length,o=w(e).nByteLength+8;if(o<24||i<o||i>1024)throw new Error("hashToPrivateScalar: expected "+o+"-1024 bytes of input, got "+i);return d(n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t),e-s)+s},e.getFieldBytesLength=E,e.getMinHashLength=v,e.mapHashToField=function(t,e,n=!1){const i=t.length,o=E(e),a=v(e);if(i<16||i<a||i>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+i);const c=d(n?(0,r.bytesToNumberBE)(t):(0,r.bytesToNumberLE)(t),e-s)+s;return n?(0,r.numberToBytesLE)(c,o):(0,r.numberToBytesBE)(c,o)};const r=n(1484),i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);function d(t,e){const n=t%e;return n>=i?n:e+n}function h(t,e,n){if(e<i)throw new Error("invalid exponent, negatives unsupported");if(n<=i)throw new Error("invalid modulus");if(n===s)return i;let r=s;for(;e>i;)e&s&&(r=r*t%n),t=t*t%n,e>>=s;return r}function f(t,e){if(t===i)throw new Error("invert: expected non-zero number");if(e<=i)throw new Error("invert: expected positive modulus, got "+e);let n=d(t,e),r=e,o=i,a=s,c=s,u=i;for(;n!==i;){const t=r/n,e=r%n,i=o-c*t,s=a-u*t;r=n,n=e,o=c,a=u,c=i,u=s}if(r!==s)throw new Error("invert: does not exist");return d(o,e)}function p(t){const e=(t-s)/o;let n,r,a;for(n=t-s,r=0;n%o===i;n/=o,r++);for(a=o;a<t&&h(a,e,t)!==t-s;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(n+s)/o;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let o=r,c=t.pow(t.mul(t.ONE,a),n),l=t.pow(i,u),d=t.pow(i,n);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(d);e<o&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,s<<BigInt(o-e-1));c=t.sqr(n),l=t.mul(l,n),d=t.mul(d,c),o=e}return l}}function g(t){if(t%c===a){const e=(t+s)/c;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%l===u){const e=(t-u)/l;return function(t,n){const r=t.mul(n,o),i=t.pow(r,e),s=t.mul(n,i),a=t.mul(t.mul(s,o),i),c=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(t)}e.isNegativeLE=(t,e)=>(d(t,e)&s)===s;const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(t,e,n){if(n<i)throw new Error("invalid exponent, negatives unsupported");if(n===i)return t.ONE;if(n===s)return e;let r=t.ONE,o=e;for(;n>i;)n&s&&(r=t.mul(r,o)),o=t.sqr(o),n>>=s;return r}function b(t,e){const n=new Array(e.length),r=e.reduce((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r)),t.ONE),i=t.inv(r);return e.reduceRight((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r)),i),n}function _(t){const e=(t-s)/o;return(t,n)=>t.pow(n,e)}function w(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function E(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function v(t){const e=E(t);return e+Math.ceil(e/2)}},5920(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateOpts=i,e.splitConstants=function(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n},e.poseidon=function(t){const e=i(t),{Fp:n,mds:r,roundConstants:s,rounds:o,roundsPartial:a,sboxFn:c,t:u}=e,l=e.roundsFull/2,d=e.reversePartialPowIdx?u-1:0,h=(t,e,i)=>(t=t.map((t,e)=>n.add(t,s[i][e])),e?t=t.map(t=>c(t)):t[d]=c(t[d]),t=r.map(e=>e.reduce((e,r,i)=>n.add(e,n.mulN(r,t[i])),n.ZERO))),f=function(t){if(!Array.isArray(t)||t.length!==u)throw new Error("invalid values, expected array of bigints with length "+u);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)});let e=0;for(let n=0;n<l;n++)t=h(t,!0,e++);for(let n=0;n<a;n++)t=h(t,!1,e++);for(let n=0;n<l;n++)t=h(t,!0,e++);if(e!==o)throw new Error("invalid number of rounds");return t};return f.roundConstants=s,f};const r=n(4967);function i(t){const{Fp:e,mds:n,reversePartialPowIdx:i,roundConstants:s}=t,{roundsFull:o,roundsPartial:a,sboxPower:c,t:u}=t;(0,r.validateField)(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==u)throw new Error("Poseidon: invalid MDS matrix");const l=n.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==i&&"boolean"!=typeof i)throw new Error("invalid param reversePartialPowIdx="+i);if(1&o)throw new Error("roundsFull is not even"+o);const d=o+a;if(!Array.isArray(s)||s.length!==d)throw new Error("Poseidon: invalid round constants");const h=s.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=t=>(0,r.FpPow)(e,t,f);return 3===c?p=t=>e.mul(e.sqrN(t),t):5===c&&(p=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:d,sboxFn:p,roundConstants:h,mds:l})}},1484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=e.bitMask=void 0,e.isBytes=s,e.abytes=o,e.abool=function(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)},e.bytesToHex=c,e.numberToHexUnpadded=u,e.hexToNumber=l,e.hexToBytes=h,e.bytesToNumberBE=function(t){return l(c(t))},e.bytesToNumberLE=function(t){return o(t),l(c(Uint8Array.from(t).reverse()))},e.numberToBytesBE=f,e.numberToBytesLE=function(t,e){return f(t,e).reverse()},e.numberToVarBytesBE=function(t){return h(u(t))},e.ensureBytes=function(t,e,n){let r;if("string"==typeof e)try{r=h(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!s(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r},e.concatBytes=p,e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},e.utf8ToBytes=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))},e.inRange=y,e.aInRange=function(t,e,n,r){if(!y(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)},e.bitLen=function(t){let e;for(e=0;t>n;t>>=r,e+=1);return e},e.bitGet=function(t,e){return t>>BigInt(e)&r},e.bitSet=function(t,e,i){return t|(i?r:n)<<BigInt(e)},e.createHmacDrbg=function(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=m(t),i=m(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...t)=>n(i,r,...t),c=(t=m())=>{i=a(b([0]),t),r=a(),0!==t.length&&(i=a(b([1]),t),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return p(...n)};return(t,e)=>{let n;for(o(),c(t);!(n=e(u()));)c();return o(),n}},e.validateObject=function(t,e,n={}){const r=(e,n,r)=>{const i=_[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t},e.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}};const n=BigInt(0),r=BigInt(1),i=BigInt(2);function s(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function o(t){if(!s(t))throw new Error("Uint8Array expected")}const a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function c(t){o(t);let e="";for(let n=0;n<t.length;n++)e+=a[t[n]];return e}function u(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function l(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?n:BigInt("0x"+t)}function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=d(t.charCodeAt(i)),s=d(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function f(t,e){return h(t.toString(16).padStart(2*e,"0"))}function p(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];o(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const g=t=>"bigint"==typeof t&&n<=t;function y(t,e,n){return g(t)&&g(e)&&g(n)&&e<=t&&t<n}e.bitMask=t=>(i<<BigInt(t-1))-r;const m=t=>new Uint8Array(t),b=t=>Uint8Array.from(t),_={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||s(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};e.notImplemented=()=>{throw new Error("not implemented")}},1705(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=g,e.weierstrass=function(t){const n=function(t){const e=(0,r.validateBasic)(t);return s.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:c,n:u}=n,h=c.BYTES+1,f=2*c.BYTES+1;function p(t){return i.mod(t,u)}function y(t){return i.invert(t,u)}const{ProjectivePoint:m,normPrivateKeyToScalar:b,weierstrassEquation:_,isWithinCurveOrder:w}=g({...n,toBytes(t,e,n){const r=e.toAffine(),i=c.toBytes(r.x),a=s.concatBytes;return(0,o.abool)("isCompressed",n),n?a(Uint8Array.from([e.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,c.toBytes(r.y))},fromBytes(t){const e=t.length,n=t[0],r=t.subarray(1);if(e!==h||2!==n&&3!==n){if(e===f&&4===n)return{x:c.fromBytes(r.subarray(0,c.BYTES)),y:c.fromBytes(r.subarray(c.BYTES,2*c.BYTES))};throw new Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+e)}{const t=s.bytesToNumberBE(r);if(!s.inRange(t,d,c.ORDER))throw new Error("Point is not on curve");const e=_(t);let i;try{i=c.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!=((i&d)===d)&&(i=c.neg(i)),{x:t,y:i}}}}),E=t=>s.bytesToHex(s.numberToBytesBE(t,n.nByteLength));function v(t){return t>u>>d}const A=(t,e,n)=>s.bytesToNumberBE(t.slice(e,n));class T{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const e=n.nByteLength;return t=(0,o.ensureBytes)("compactSignature",t,2*e),new T(A(t,0,e),A(t,e,2*e))}static fromDER(t){const{r:n,s:r}=e.DER.toSig((0,o.ensureBytes)("DER",t));return new T(n,r)}assertValidity(){s.aInRange("r",this.r,d,u),s.aInRange("s",this.s,d,u)}addRecoveryBit(t){return new T(this.r,this.s,t)}recoverPublicKey(t){const{r:e,s:r,recovery:i}=this,s=x((0,o.ensureBytes)("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const a=2===i||3===i?e+n.n:e;if(a>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&i?"03":"02",l=m.fromHex(u+E(a)),d=y(a),h=p(-s*d),f=p(r*d),g=m.BASE.multiplyAndAddUnsafe(l,h,f);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return s.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const S={isValidPrivateKey(t){try{return b(t),!0}catch(t){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const t=i.getMinHashLength(n.n);return i.mapHashToField(n.randomBytes(t),n.n)},precompute:(t=8,e=m.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function I(t){const e=s.isBytes(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===h||r===f:n?r===2*h||r===2*f:t instanceof m}const k=n.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=s.bytesToNumberBE(t),r=8*t.length-n.nBitLength;return r>0?e>>BigInt(r):e},x=n.bits2int_modN||function(t){return p(k(t))},B=s.bitMask(n.nBitLength);function R(t){return s.aInRange("num < 2^"+n.nBitLength,t,l,B),s.numberToBytesBE(t,n.nByteLength)}const C={lowS:n.lowS,prehash:!1},O={lowS:n.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function(t,e=!0){return m.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(I(t))throw new Error("first arg must be private key");if(!I(e))throw new Error("second arg must be public key");return m.fromHex(e).multiply(b(t)).toRawBytes(n)},sign:function(t,e,r=C){const{seed:i,k2sig:u}=function(t,e,r=C){if(["recovered","canonical"].some(t=>t in r))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=n;let{lowS:h,prehash:f,extraEntropy:g}=r;null==h&&(h=!0),t=(0,o.ensureBytes)("msgHash",t),a(r),f&&(t=(0,o.ensureBytes)("prehashed msgHash",i(t)));const _=x(t),E=b(e),A=[R(E),R(_)];if(null!=g&&!1!==g){const t=!0===g?u(c.BYTES):g;A.push((0,o.ensureBytes)("extraEntropy",t))}const S=s.concatBytes(...A),I=_;return{seed:S,k2sig:function(t){const e=k(t);if(!w(e))return;const n=y(e),r=m.BASE.multiply(e).toAffine(),i=p(r.x);if(i===l)return;const s=p(n*p(I+i*E));if(s===l)return;let o=(r.x===i?0:2)|Number(r.y&d),a=s;return h&&v(s)&&(a=function(t){return v(t)?p(-t):t}(s),o^=1),new T(i,a,o)}}}(t,e,r),h=n;return s.createHmacDrbg(h.hash.outputLen,h.nByteLength,h.hmac)(i,u)},verify:function(t,r,i,c=O){const u=t;r=(0,o.ensureBytes)("msgHash",r),i=(0,o.ensureBytes)("publicKey",i);const{lowS:l,prehash:d,format:h}=c;if(a(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof u||s.isBytes(u),g=!f&&!h&&"object"==typeof u&&null!==u&&"bigint"==typeof u.r&&"bigint"==typeof u.s;if(!f&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,_;try{if(g&&(b=new T(u.r,u.s)),f){try{"compact"!==h&&(b=T.fromDER(u))}catch(t){if(!(t instanceof e.DER.Err))throw t}b||"der"===h||(b=T.fromCompact(u))}_=m.fromHex(i)}catch(t){return!1}if(!b)return!1;if(l&&b.hasHighS())return!1;d&&(r=n.hash(r));const{r:w,s:E}=b,v=x(r),A=y(E),S=p(v*A),I=p(w*A),k=m.BASE.multiplyAndAddUnsafe(_,S,I)?.toAffine();return!!k&&p(k.x)===w},ProjectivePoint:m,Signature:T,utils:S}},e.SWUFpSqrtRatio=y,e.mapToCurveSimpleSWU=function(t,e){if(i.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=y(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,l,d;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),c=t.mul(u,e.A),s=t.add(s,c),s=t.mul(s,o),u=t.mul(u,a),c=t.mul(u,e.B),s=t.add(s,c),l=t.mul(i,o);const{isValid:h,value:f}=n(s,u);d=t.mul(i,r),d=t.mul(d,f),l=t.cmov(l,o,h),d=t.cmov(d,f,h);const p=t.isOdd(r)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),l=t.div(l,a),{x:l,y:d}}};const r=n(2422),i=n(4967),s=n(1484),o=n(1484);function a(t){void 0!==t.lowS&&(0,o.abool)("lowS",t.lowS),void 0!==t.prehash&&(0,o.abool)("prehash",t.prehash)}const{bytesToNumberBE:c,hexToBytes:u}=s;e.DER={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,n)=>{const{Err:r}=e.DER;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&n.length)throw new r("tlv.encode: unpadded data");const i=n.length/2,o=s.numberToHexUnpadded(i);if(o.length/2&128)throw new r("tlv.encode: long form length too big");const a=i>127?s.numberToHexUnpadded(o.length/2|128):"";return s.numberToHexUnpadded(t)+a+o+n},decode(t,n){const{Err:r}=e.DER;let i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");const s=n[i++];let o=0;if(128&s){const t=127&s;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");const e=n.subarray(i,i+t);if(e.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===e[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of e)o=o<<8|t;if(i+=t,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=s;const a=n.subarray(i,i+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:n.subarray(i+o)}}},_int:{encode(t){const{Err:n}=e.DER;if(t<l)throw new n("integer: negative integers are not allowed");let r=s.numberToHexUnpadded(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new n("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:n}=e.DER;if(128&t[0])throw new n("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("invalid signature integer: unnecessary leading zero");return c(t)}},toSig(t){const{Err:n,_int:r,_tlv:i}=e.DER,o="string"==typeof t?u(t):t;s.abytes(o);const{v:a,l:c}=i.decode(48,o);if(c.length)throw new n("invalid signature: left bytes after parsing");const{v:l,l:d}=i.decode(2,a),{v:h,l:f}=i.decode(2,d);if(f.length)throw new n("invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(h)}},hexFromSig(t){const{_tlv:n,_int:r}=e.DER,i=n.encode(2,r.encode(t.r))+n.encode(2,r.encode(t.s));return n.encode(48,i)}};const l=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function g(t){const e=function(t){const e=(0,r.validateBasic)(t);s.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:i,a:o}=e;if(n){if(!i.eql(o,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,a=i.Field(e.n,e.nBitLength),c=e.toBytes||((t,e,r)=>{const i=e.toAffine();return s.concatBytes(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),u=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function h(t){const{a:r,b:i}=e,s=n.sqr(t),o=n.mul(s,t);return n.add(n.add(o,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),h(e.Gx)))throw new Error("bad generator point: equation left != right");function p(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:a,n:c}=e;if(n&&"bigint"!=typeof t){if(s.isBytes(t)&&(t=s.bytesToHex(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let u;try{u="bigint"==typeof t?t:s.bytesToNumberBE((0,o.ensureBytes)("private key",t,r))}catch(e){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return a&&(u=i.mod(u,c)),s.aInRange("private key",u,d,c),u}function g(t){if(!(t instanceof b))throw new Error("ProjectivePoint expected")}const y=(0,o.memoized)((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const o=t.is0();null==e&&(e=o?n.ONE:n.inv(s));const a=n.mul(r,e),c=n.mul(i,e),u=n.mul(s,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),m=(0,o.memoized)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),o=h(r);if(!n.eql(s,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof b)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?b.ZERO:new b(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map(t=>t.pz));return t.map((t,n)=>t.toAffine(e[n])).map(b.fromAffine)}static fromHex(t){const e=b.fromAffine(u((0,o.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return b.BASE.multiply(p(t))}static msm(t,e){return(0,r.pippenger)(b,a,t,e)}_setWindowSize(t){w.setWindowSize(this,t)}assertValidity(){m(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){g(t);const{px:e,py:r,pz:i}=this,{px:s,py:o,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return c&&u}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,f),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(s,s),h=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),l=n.mul(s,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(d,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,p),d=n.mul(d,g),u=n.add(u,d),p=n.mul(o,a),p=n.add(p,p),d=n.mul(p,g),c=n.sub(c,d),l=n.mul(p,h),l=n.add(l,l),l=n.add(l,l),new b(c,u,l)}add(t){g(t);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:c}=t;let u=n.ZERO,l=n.ZERO,d=n.ZERO;const h=e.a,p=n.mul(e.b,f);let y=n.mul(r,o),m=n.mul(i,a),_=n.mul(s,c),w=n.add(r,i),E=n.add(o,a);w=n.mul(w,E),E=n.add(y,m),w=n.sub(w,E),E=n.add(r,s);let v=n.add(o,c);return E=n.mul(E,v),v=n.add(y,_),E=n.sub(E,v),v=n.add(i,s),u=n.add(a,c),v=n.mul(v,u),u=n.add(m,_),v=n.sub(v,u),d=n.mul(h,E),u=n.mul(p,_),d=n.add(u,d),u=n.sub(m,d),d=n.add(m,d),l=n.mul(u,d),m=n.add(y,y),m=n.add(m,y),_=n.mul(h,_),E=n.mul(p,E),m=n.add(m,_),_=n.sub(y,_),_=n.mul(h,_),E=n.add(E,_),y=n.mul(m,E),l=n.add(l,y),y=n.mul(v,E),u=n.mul(w,u),u=n.sub(u,y),y=n.mul(w,m),d=n.mul(v,d),d=n.add(d,y),new b(u,l,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(b.ZERO)}wNAF(t){return w.wNAFCached(this,t,b.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:i}=e;s.aInRange("scalar",t,l,i);const o=b.ZERO;if(t===l)return o;if(this.is0()||t===d)return this;if(!r||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,t,b.normalizeZ);let{k1neg:a,k1:c,k2neg:u,k2:h}=r.splitScalar(t),f=o,p=o,g=this;for(;c>l||h>l;)c&d&&(f=f.add(g)),h&d&&(p=p.add(g)),g=g.double(),c>>=d,h>>=d;return a&&(f=f.negate()),u&&(p=p.negate()),p=new b(n.mul(p.px,r.beta),p.py,p.pz),f.add(p)}multiply(t){const{endo:r,n:i}=e;let o,a;if(s.aInRange("scalar",t,d,i),r){const{k1neg:e,k1:i,k2neg:s,k2:c}=r.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);u=w.constTimeNegate(e,u),d=w.constTimeNegate(s,d),d=new b(n.mul(d.px,r.beta),d.py,d.pz),o=u.add(d),a=l.add(h)}else{const{p:e,f:n}=this.wNAF(t);o=e,a=n}return b.normalizeZ([o,a])[0]}multiplyAndAddUnsafe(t,e,n){const r=b.BASE,i=(t,e)=>e!==l&&e!==d&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return y(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===d)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===d?this:n?n(b,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,o.abool)("isCompressed",t),this.assertValidity(),c(b,this,t)}toHex(t=!0){return(0,o.abool)("isCompressed",t),s.bytesToHex(this.toRawBytes(t))}}b.BASE=new b(e.Gx,e.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const _=e.nBitLength,w=(0,r.wNAF)(b,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(t){return s.inRange(t,d,e.n)}}}function y(t,e){const n=t.ORDER;let r=l;for(let t=n-d;t%h===l;t/=h)r+=d;const i=r,s=h<<i-d-d,o=s*h,a=(n-d)/o,c=(a-d)/h,u=o-d,g=s,y=t.pow(e,a),m=t.pow(e,(a+d)/h);let b=(e,n)=>{let r=y,s=t.pow(n,u),o=t.sqr(s);o=t.mul(o,n);let a=t.mul(e,o);a=t.pow(a,c),a=t.mul(a,s),s=t.mul(a,n),o=t.mul(a,e);let l=t.mul(o,s);a=t.pow(l,g);let f=t.eql(a,t.ONE);s=t.mul(o,m),a=t.mul(l,r),o=t.cmov(s,o,f),l=t.cmov(a,l,f);for(let e=i;e>d;e--){let n=e-h;n=h<<n-d;let i=t.pow(l,n);const a=t.eql(i,t.ONE);s=t.mul(o,r),r=t.mul(r,r),i=t.mul(l,r),o=t.cmov(s,o,a),l=t.cmov(i,l,a)}return{isValid:f,value:o}};if(t.ORDER%p===f){const n=(t.ORDER-f)/p,r=t.sqrt(t.neg(e));b=(e,i)=>{let s=t.sqr(i);const o=t.mul(e,i);s=t.mul(s,o);let a=t.pow(s,n);a=t.mul(a,o);const c=t.mul(a,r),u=t.mul(t.sqr(a),i),l=t.eql(u,e);return{isValid:l,value:t.cmov(c,a,l)}}}return b}},3764(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=o;const a={number:n,bytes:r,hash:i,exists:s,output:o};e.default=a},5311(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(3764),i=n(1130);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,o=(t=(0,i.toBytes)(t)).length;for(let r=0;r<o;){const a=Math.min(s-this.pos,o-r);if(a===s){const e=(0,i.createView)(t);for(;s<=o-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:o}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let t=a;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,s-8,BigInt(8*this.length),o),this.process(n,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},5510(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},3788(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const r=n(3764),i=n(1130);class s extends i.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(t);const n=(0,i.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?t.create().update(n).digest():n);for(let t=0;t<o.length;t++)o[t]^=54;this.iHash.update(o),this.oHash=t.create();for(let t=0;t<o.length;t++)o[t]^=106;this.oHash.update(o),o.fill(0)}update(t){return(0,r.aexists)(this),this.iHash.update(t),this}digestInto(t){(0,r.aexists)(this),(0,r.abytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=s,e.hmac=(t,e,n)=>new s(t,e).update(n).digest(),e.hmac.create=(t,e)=>new s(t,e)},1696(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(5311),i=n(1130),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)a[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=a[t-15],n=a[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;a[t]=s+a[t-7]+r+a[t-16]|0}let{A:n,B:o,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,r.Chi)(l,d,h)+s[t]+a[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,o,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=o,o=n,n=e+p|0}n=n+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,o,c,u,l,d,h,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},1130(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=o(t.charCodeAt(i)),s=o(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(5510),i=n(3764);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function o(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function a(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=a(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},8510(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;const r=n(1696),i=n(1130),s=n(3562),o=n(1761),a=n(4967),c=n(1484),u=n(1705),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(t,e)=>(t+e/f)/e;function g(t){const e=l,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),d=t*t*t%e,h=d*d*t%e,p=(0,a.pow2)(h,n,e)*h%e,g=(0,a.pow2)(p,n,e)*h%e,m=(0,a.pow2)(g,f,e)*d%e,b=(0,a.pow2)(m,i,e)*m%e,_=(0,a.pow2)(b,s,e)*b%e,w=(0,a.pow2)(_,c,e)*_%e,E=(0,a.pow2)(w,u,e)*w%e,v=(0,a.pow2)(E,c,e)*_%e,A=(0,a.pow2)(v,n,e)*h%e,T=(0,a.pow2)(A,o,e)*b%e,S=(0,a.pow2)(T,r,e)*d%e,I=(0,a.pow2)(S,f,e);if(!y.eql(y.sqr(I),t))throw new Error("Cannot find square root");return I}const y=(0,a.Field)(l,void 0,void 0,{sqrt:g});e.secp256k1=(0,s.createCurve)({a:BigInt(0),b:BigInt(7),Fp:y,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=d,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),c=p(s*t,e),u=p(-r*t,e);let l=(0,a.mod)(t-c*n-u*i,e),f=(0,a.mod)(-c*r-u*s,e);const g=l>o,y=f>o;if(g&&(l=e-l),y&&(f=e-f),l>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:g,k1:l,k2neg:y,k2:f}}}},r.sha256);const m=BigInt(0),b={};function _(t,...e){let n=b[t];if(void 0===n){const e=(0,r.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));n=(0,c.concatBytes)(e,e),b[t]=n}return(0,r.sha256)((0,c.concatBytes)(n,...e))}const w=t=>t.toRawBytes(!0).slice(1),E=t=>(0,c.numberToBytesBE)(t,32),v=t=>(0,a.mod)(t,l),A=t=>(0,a.mod)(t,d),T=e.secp256k1.ProjectivePoint;function S(t){let n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=T.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:A(-n),bytes:w(r)}}function I(t){(0,c.aInRange)("x",t,h,l);const e=v(t*t);let n=g(v(e*t+BigInt(7)));n%f!==m&&(n=v(-n));const r=new T(t,n,h);return r.assertValidity(),r}const k=c.bytesToNumberBE;function x(...t){return A(k(_("BIP0340/challenge",...t)))}function B(t,e,n){const r=(0,c.ensureBytes)("signature",t,64),i=(0,c.ensureBytes)("message",e),s=(0,c.ensureBytes)("publicKey",n,32);try{const t=I(k(s)),e=k(r.subarray(0,32));if(!(0,c.inRange)(e,h,l))return!1;const n=k(r.subarray(32,64));if(!(0,c.inRange)(n,h,d))return!1;const f=x(E(e),w(t),i),p=(o=t,a=n,u=A(-f),T.BASE.multiplyAndAddUnsafe(o,a,u));return!(!p||!p.hasEvenY()||p.toAffine().x!==e)}catch(t){return!1}var o,a,u}e.schnorr={getPublicKey:function(t){return S(t).bytes},sign:function(t,e,n=(0,i.randomBytes)(32)){const r=(0,c.ensureBytes)("message",t),{bytes:s,scalar:o}=S(e),a=(0,c.ensureBytes)("auxRand",n,32),u=E(o^k(_("BIP0340/aux",a))),l=_("BIP0340/nonce",u,s,r),d=A(k(l));if(d===m)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=S(d),p=x(h,s,r),g=new Uint8Array(64);if(g.set(h,0),g.set(E(A(f+p*o)),32),!B(g,r,s))throw new Error("sign: Invalid signature produced");return g},verify:B,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:w,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:_,mod:a.mod}};const R=(()=>(0,o.isogenyMap)(y,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))))(),C=(()=>(0,u.mapToCurveSimpleSWU)(y,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:y.create(BigInt("-11"))}))(),O=(()=>(0,o.createHasher)(e.secp256k1.ProjectivePoint,t=>{const{x:e,y:n}=C(y.create(t[0]));return R(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve},7202(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA512_IV=e.SHA384_IV=e.SHA224_IV=e.SHA256_IV=e.HashMD=void 0,e.setBigUint64=i,e.Chi=function(t,e,n){return t&e^~t&n},e.Maj=function(t,e,n){return t&e^t&n^e&n};const r=n(9175);function i(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}class s extends r.Hash{constructor(t,e,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=(0,r.createView)(this.buffer)}update(t){(0,r.aexists)(this),t=(0,r.toBytes)(t),(0,r.abytes)(t);const{view:e,buffer:n,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const e=(0,r.createView)(t);for(;i<=s-o;o+=i)this.process(e,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:o}=this;let{pos:a}=this;e[a++]=128,(0,r.clean)(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(n,0),a=0);for(let t=a;t<s;t++)e[t]=0;i(n,s-8,BigInt(8*this.length),o),this.process(n,0);const c=(0,r.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.destroyed=s,t.finished=i,t.length=r,t.pos=o,r%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}e.HashMD=s,e.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),e.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),e.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])},2318(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toBig=e.shrSL=e.shrSH=e.rotrSL=e.rotrSH=e.rotrBL=e.rotrBH=e.rotr32L=e.rotr32H=e.rotlSL=e.rotlSH=e.rotlBL=e.rotlBH=e.add5L=e.add5H=e.add4L=e.add4H=e.add3L=e.add3H=void 0,e.add=_,e.fromBig=i,e.split=s;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:n,l:a}=i(t[o],e);[r[o],s[o]]=[n,a]}return[r,s]}const o=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=o;const a=(t,e,n)=>t>>>n;e.shrSH=a;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const u=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=u;const l=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=l;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:o,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},5145(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},7076(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha512_224=e.sha512_256=e.sha384=e.sha512=e.sha224=e.sha256=e.SHA512_256=e.SHA512_224=e.SHA384=e.SHA512=e.SHA224=e.SHA256=void 0;const r=n(7202),i=n(2318),s=n(9175),o=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array(64);class c extends r.HashMD{constructor(t=32){super(64,t,8,!1),this.A=0|r.SHA256_IV[0],this.B=0|r.SHA256_IV[1],this.C=0|r.SHA256_IV[2],this.D=0|r.SHA256_IV[3],this.E=0|r.SHA256_IV[4],this.F=0|r.SHA256_IV[5],this.G=0|r.SHA256_IV[6],this.H=0|r.SHA256_IV[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)a[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=a[t-15],n=a[t-2],r=(0,s.rotr)(e,7)^(0,s.rotr)(e,18)^e>>>3,i=(0,s.rotr)(n,17)^(0,s.rotr)(n,19)^n>>>10;a[t]=i+a[t-7]+r+a[t-16]|0}let{A:n,B:i,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,s.rotr)(l,6)^(0,s.rotr)(l,11)^(0,s.rotr)(l,25))+(0,r.Chi)(l,d,h)+o[t]+a[t]|0,p=((0,s.rotr)(n,2)^(0,s.rotr)(n,13)^(0,s.rotr)(n,22))+(0,r.Maj)(n,i,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=i,i=n,n=e+p|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,c,u,l,d,h,f)}roundClean(){(0,s.clean)(a)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,s.clean)(this.buffer)}}e.SHA256=c;class u extends c{constructor(){super(28),this.A=0|r.SHA224_IV[0],this.B=0|r.SHA224_IV[1],this.C=0|r.SHA224_IV[2],this.D=0|r.SHA224_IV[3],this.E=0|r.SHA224_IV[4],this.F=0|r.SHA224_IV[5],this.G=0|r.SHA224_IV[6],this.H=0|r.SHA224_IV[7]}}e.SHA224=u;const l=(()=>i.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),d=(()=>l[0])(),h=(()=>l[1])(),f=new Uint32Array(80),p=new Uint32Array(80);class g extends r.HashMD{constructor(t=64){super(128,t,16,!1),this.Ah=0|r.SHA512_IV[0],this.Al=0|r.SHA512_IV[1],this.Bh=0|r.SHA512_IV[2],this.Bl=0|r.SHA512_IV[3],this.Ch=0|r.SHA512_IV[4],this.Cl=0|r.SHA512_IV[5],this.Dh=0|r.SHA512_IV[6],this.Dl=0|r.SHA512_IV[7],this.Eh=0|r.SHA512_IV[8],this.El=0|r.SHA512_IV[9],this.Fh=0|r.SHA512_IV[10],this.Fl=0|r.SHA512_IV[11],this.Gh=0|r.SHA512_IV[12],this.Gl=0|r.SHA512_IV[13],this.Hh=0|r.SHA512_IV[14],this.Hl=0|r.SHA512_IV[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[t,e,n,r,i,s,o,a,c,u,l,d,h,f,p,g]}set(t,e,n,r,i,s,o,a,c,u,l,d,h,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)f[n]=t.getUint32(e),p[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|f[t-15],n=0|p[t-15],r=i.rotrSH(e,n,1)^i.rotrSH(e,n,8)^i.shrSH(e,n,7),s=i.rotrSL(e,n,1)^i.rotrSL(e,n,8)^i.shrSL(e,n,7),o=0|f[t-2],a=0|p[t-2],c=i.rotrSH(o,a,19)^i.rotrBH(o,a,61)^i.shrSH(o,a,6),u=i.rotrSL(o,a,19)^i.rotrBL(o,a,61)^i.shrSL(o,a,6),l=i.add4L(s,u,p[t-7],p[t-16]),d=i.add4H(l,r,c,f[t-7],f[t-16]);f[t]=0|d,p[t]=0|l}let{Ah:n,Al:r,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:g,El:y,Fh:m,Fl:b,Gh:_,Gl:w,Hh:E,Hl:v}=this;for(let t=0;t<80;t++){const e=i.rotrSH(g,y,14)^i.rotrSH(g,y,18)^i.rotrBH(g,y,41),A=i.rotrSL(g,y,14)^i.rotrSL(g,y,18)^i.rotrBL(g,y,41),T=g&m^~g&_,S=y&b^~y&w,I=i.add5L(v,A,S,h[t],p[t]),k=i.add5H(I,E,e,T,d[t],f[t]),x=0|I,B=i.rotrSH(n,r,28)^i.rotrBH(n,r,34)^i.rotrBH(n,r,39),R=i.rotrSL(n,r,28)^i.rotrBL(n,r,34)^i.rotrBL(n,r,39),C=n&s^n&a^s&a,O=r&o^r&c^o&c;E=0|_,v=0|w,_=0|m,w=0|b,m=0|g,b=0|y,({h:g,l:y}=i.add(0|u,0|l,0|k,0|x)),u=0|a,l=0|c,a=0|s,c=0|o,s=0|n,o=0|r;const N=i.add3L(x,R,O);n=i.add3H(N,k,B,C),r=0|N}({h:n,l:r}=i.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:o}=i.add(0|this.Bh,0|this.Bl,0|s,0|o)),({h:a,l:c}=i.add(0|this.Ch,0|this.Cl,0|a,0|c)),({h:u,l}=i.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:g,l:y}=i.add(0|this.Eh,0|this.El,0|g,0|y)),({h:m,l:b}=i.add(0|this.Fh,0|this.Fl,0|m,0|b)),({h:_,l:w}=i.add(0|this.Gh,0|this.Gl,0|_,0|w)),({h:E,l:v}=i.add(0|this.Hh,0|this.Hl,0|E,0|v)),this.set(n,r,s,o,a,c,u,l,g,y,m,b,_,w,E,v)}roundClean(){(0,s.clean)(f,p)}destroy(){(0,s.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.SHA512=g;class y extends g{constructor(){super(48),this.Ah=0|r.SHA384_IV[0],this.Al=0|r.SHA384_IV[1],this.Bh=0|r.SHA384_IV[2],this.Bl=0|r.SHA384_IV[3],this.Ch=0|r.SHA384_IV[4],this.Cl=0|r.SHA384_IV[5],this.Dh=0|r.SHA384_IV[6],this.Dl=0|r.SHA384_IV[7],this.Eh=0|r.SHA384_IV[8],this.El=0|r.SHA384_IV[9],this.Fh=0|r.SHA384_IV[10],this.Fl=0|r.SHA384_IV[11],this.Gh=0|r.SHA384_IV[12],this.Gl=0|r.SHA384_IV[13],this.Hh=0|r.SHA384_IV[14],this.Hl=0|r.SHA384_IV[15]}}e.SHA384=y;const m=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),b=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class _ extends g{constructor(){super(28),this.Ah=0|m[0],this.Al=0|m[1],this.Bh=0|m[2],this.Bl=0|m[3],this.Ch=0|m[4],this.Cl=0|m[5],this.Dh=0|m[6],this.Dl=0|m[7],this.Eh=0|m[8],this.El=0|m[9],this.Fh=0|m[10],this.Fl=0|m[11],this.Gh=0|m[12],this.Gl=0|m[13],this.Hh=0|m[14],this.Hl=0|m[15]}}e.SHA512_224=_;class w extends g{constructor(){super(32),this.Ah=0|b[0],this.Al=0|b[1],this.Bh=0|b[2],this.Bl=0|b[3],this.Ch=0|b[4],this.Cl=0|b[5],this.Dh=0|b[6],this.Dl=0|b[7],this.Eh=0|b[8],this.El=0|b[9],this.Fh=0|b[10],this.Fl=0|b[11],this.Gh=0|b[12],this.Gl=0|b[13],this.Hh=0|b[14],this.Hl=0|b[15]}}e.SHA512_256=w,e.sha256=(0,s.createHasher)(()=>new c),e.sha224=(0,s.createHasher)(()=>new u),e.sha512=(0,s.createHasher)(()=>new g),e.sha384=(0,s.createHasher)(()=>new y),e.sha512_256=(0,s.createHasher)(()=>new w),e.sha512_224=(0,s.createHasher)(()=>new _)},9175(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=i,e.anumber=s,e.abytes=o,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){o(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=function(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)},e.rotr=function(t,e){return t<<32-e|t>>>e},e.rotl=function(t,e){return t<<e|t>>>32-e>>>0},e.byteSwap=a,e.byteSwap32=c,e.bytesToHex=function(t){if(o(t),u)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=l[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(u)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=d(t.charCodeAt(i)),s=d(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=h,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=f,e.kdfInputToBytes=function(t){return"string"==typeof t&&(t=h(t)),o(t),t},e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];o(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("options should be object or undefined");return Object.assign(t,e)},e.createHasher=p,e.createOptHasher=g,e.createXOFer=y,e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")};const r=n(5145);function i(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function o(t,...e){if(!i(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function c(t){for(let e=0;e<t.length;e++)t[e]=a(t[e]);return t}e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.swap8IfBE=e.isLE?t=>t:t=>a(t),e.byteSwapIfBE=e.swap8IfBE,e.swap32IfBE=e.isLE?t=>t:c;const u=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),l=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function f(t){return"string"==typeof t&&(t=h(t)),o(t),t}function p(t){const e=e=>t().update(f(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function g(t){const e=(e,n)=>t(n).update(f(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}function y(t){const e=(e,n)=>t(n).update(f(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}e.nextTick=async()=>{},e.Hash=class{},e.wrapConstructor=p,e.wrapConstructorWithOpts=g,e.wrapXOFConstructorWithOpts=y},3203(t,e){"use strict";function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function r(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function s(t){if("function"!=typeof t)throw new Error("function expected");return!0}function o(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function a(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function c(t){if(!Array.isArray(t))throw new Error("array expected")}function u(t,e){if(!i(!0,e))throw new Error(`${t}: array of strings expected`)}function l(t,e){if(!i(!1,e))throw new Error(`${t}: array of numbers expected`)}function d(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map(t=>t.encode).reduceRight(n,e),decode:t.map(t=>t.decode).reduce(n,e)}}function h(t){const e="string"==typeof t?t.split(""):t,n=e.length;u("alphabet",e);const r=new Map(e.map((t,e)=>[t,e]));return{encode:r=>(c(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:e=>(c(e),e.map(e=>{o("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}function f(t=""){return o("join",t),{encode:e=>(u("join.decode",e),e.join(t)),decode:e=>(o("join.decode",e),e.split(t))}}function p(t,e="="){return a(t),o("padding",e),{encode(n){for(u("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){u("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function g(t){return s(t),{encode:t=>t,decode:e=>t(e)}}function y(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(c(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,t=>{if(a(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t}),o=s.length;for(;;){let t=0,a=!0;for(let i=r;i<o;i++){const o=s[i],c=e*t,u=c+o;if(!Number.isSafeInteger(u)||c/e!==t||u-o!==c)throw new Error("convertRadix: carry overflow");const l=u/n;t=u%n;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==u)throw new Error("convertRadix: carry overflow");a&&(d?a=!1:r=i)}if(i.push(t),a)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0;const m=(t,e)=>0===e?t:m(e,t%e),b=(t,e)=>t+(e-m(t,e)),_=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function w(t,e,n,r){if(c(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(b(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${b(e,n)}`);let i=0,s=0;const o=_[e],u=_[n]-1,l=[];for(const r of t){if(a(r),r>=o)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)l.push((i>>s-n&u)>>>0);const t=_[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&u,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&l.push(i>>>0),l}function E(t){return a(t),{encode:e=>{if(!n(e))throw new Error("radix.encode input should be Uint8Array");return y(Array.from(e),256,t)},decode:e=>(l("radix.decode",e),Uint8Array.from(y(e,t,256)))}}function v(t,e=!1){if(a(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,t)>32||b(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return w(Array.from(r),8,t,!e)},decode:n=>(l("radix2.decode",n),Uint8Array.from(w(n,t,8,e)))}}function A(t){return s(t),function(...e){try{return t.apply(null,e)}catch(t){}}}function T(t,e){return a(t),s(e),{encode(r){if(!n(r))throw new Error("checksum.encode: input should be Uint8Array");const i=e(r).slice(0,t),s=new Uint8Array(r.length+t);return s.set(r),s.set(i,r.length),s},decode(r){if(!n(r))throw new Error("checksum.decode: input should be Uint8Array");const i=r.slice(0,-t),s=r.slice(-t),o=e(i).slice(0,t);for(let e=0;e<t;e++)if(o[e]!==s[e])throw new Error("Invalid checksum");return i}}}e.utils={alphabet:h,chain:d,checksum:T,convertRadix:y,convertRadix2:w,radix:E,radix2:v,join:f,padding:p},e.base16=d(v(4),h("0123456789ABCDEF"),f("")),e.base32=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),e.base32nopad=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),e.base32hex=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),e.base32hexnopad=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),e.base32crockford=d(v(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),g(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const S=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)();e.base64=S?{encode:t=>(r(t),t.toBase64()),decode:t=>(o("base64",t),Uint8Array.fromBase64(t,{lastChunkHandling:"strict"}))}:d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),e.base64nopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),e.base64url=S?{encode:t=>(r(t),t.toBase64({alphabet:"base64url"})),decode:t=>(o("base64",t),Uint8Array.fromBase64(t,{alphabet:"base64url"}))}:d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),e.base64urlnopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));const I=t=>d(E(58),h(t),f(""));e.base58=I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=I("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=I("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const k=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let n="";for(let r=0;r<t.length;r+=8){const i=t.subarray(r,r+8);n+=e.base58.encode(i).padStart(k[i.length],"1")}return n},decode(t){let n=[];for(let r=0;r<t.length;r+=11){const i=t.slice(r,r+11),s=k.indexOf(i.length),o=e.base58.decode(i);for(let t=0;t<o.length-s;t++)if(0!==o[t])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(n)}},e.createBase58check=t=>d(T(4,e=>t(t(e))),e.base58),e.base58check=e.createBase58check;const x=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),B=[996825010,642813549,513874426,1027748829,705979059];function R(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<B.length;t++)1==(e>>t&1)&&(n^=B[t]);return n}function C(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=R(i)^n>>5}i=R(i);for(let e=0;e<r;e++)i=R(i)^31&t.charCodeAt(e);for(let t of e)i=R(i)^t;for(let t=0;t<6;t++)i=R(i);return i^=n,x.encode(w([i%_[30]],30,5,!1))}function O(t){const e="bech32"===t?1:734539939,r=v(5),i=r.decode,s=r.encode,a=A(i);function c(t,r,i=90){o("bech32.encode prefix",t),n(r)&&(r=Array.from(r)),l("bech32.encode",r);const s=t.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const a=s+7+r.length;if(!1!==i&&a>i)throw new TypeError(`Length ${a} exceeds limit ${i}`);const c=t.toLowerCase(),u=C(c,r,e);return`${c}1${x.encode(r)}${u}`}function u(t,n=90){o("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=x.decode(c).slice(0,-6),l=C(a,u,e);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${t}: expected "${l}"`);return{prefix:a,words:u}}return{encode:c,decode:u,encodeFromBytes:function(t,e){return c(t,s(e))},decodeToBytes:function(t){const{prefix:e,words:n}=u(t,!1);return{prefix:e,words:n,bytes:i(n)}},decodeUnsafe:A(u),fromWords:i,fromWordsUnsafe:a,toWords:s}}e.bech32=O("bech32"),e.bech32m=O("bech32m"),e.utf8={encode:t=>(new TextDecoder).decode(t),decode:t=>(new TextEncoder).encode(t)};const N=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),L={encode:t=>(r(t),t.toHex()),decode:t=>(o("hex",t),Uint8Array.fromHex(t))};e.hex=N?L:d(v(4),h("0123456789abcdef"),f(""),g(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));const D={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},P="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";e.bytesToString=(t,e)=>{if("string"!=typeof t||!D.hasOwnProperty(t))throw new TypeError(P);if(!n(e))throw new TypeError("bytesToString() expects Uint8Array");return D[t].encode(e)},e.str=e.bytesToString,e.stringToBytes=(t,e)=>{if(!D.hasOwnProperty(t))throw new TypeError(P);if("string"!=typeof e)throw new TypeError("stringToBytes() expects string");return D[t].decode(e)},e.bytes=e.stringToBytes},4246(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poseidonSmall=e.Fp251=e.keccak=e.computeHashOnElements=e.utils=e.Signature=e.ProjectivePoint=e.CURVE=e._starkCurve=e.MAX_VALUE=void 0,e.normalizePrivateKey=y,e.getPublicKey=m,e.getSharedSecret=function(t,e){return p.getSharedSecret(y(t),e)},e.sign=function(t,e,n){const r=p.sign(_(t),y(e),n);return b(r),r},e.verify=function(t,e,n){if(!(t instanceof v)){const e=g(t);try{t=v.fromDER(e)}catch(n){if(!(n instanceof c.DER.Err))throw n;t=v.fromCompact(e)}}return b(t),p.verify(t,_(e),g(n))},e.grindKey=I,e.getStarkKey=function(t){return T(m(t,!0))},e.ethSigToPrivate=function(t){if(130!==(t=S(t)).length)throw new Error("Wrong ethereum signature");return I(t.substring(0,64))},e.getAccountPath=function(t,e,n,r){const i=k(D(t)),s=k(D(e)),o=u.hexToNumber(S(n));return`m/2645'/${i}'/${s}'/${k(o)}'/${k(o>>31n)}'/${r}`},e.pedersen=N,e._poseidonMDS=U,e.poseidonBasic=V,e.poseidonCreate=function(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return V(t,U(t.Fp,"HadesMDS",n,e))},e.poseidonHash=H,e.poseidonHashFunc=function(t,n,r=e.poseidonSmall){return u.numberToVarBytesBE(H(u.bytesToNumberBE(t),u.bytesToNumberBE(n),r))},e.poseidonHashSingle=function(t,n=e.poseidonSmall){return n([t,0n,1n])[0]},e.poseidonHashMany=function(t,n=e.poseidonSmall){const{m:r,rate:i}=n;if(!Array.isArray(t))throw new Error("bigint array expected in values");const s=Array.from(t);for(s.push(1n);s.length%i!==0;)s.push(0n);let o=new Array(r).fill(0n);for(let t=0;t<s.length;t+=i){for(let e=0;e<i;e++){const n=s[t+e];if(void 0===n)throw new Error("invalid index");if(void 0===o[e])throw new Error("state[j] is undefined");o[e]=o[e]+n}o=n(o)}return o[0]};const r=n(7240),i=n(8112),s=n(4762),o=n(4967),a=n(5920),c=n(1705),u=n(1484),l=n(3562),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,n=u.bytesToNumberBE(t);return e>0?n>>BigInt(e):n}function f(t){return"string"==typeof t&&1&(t=S(t)).length&&(t="0"+t),u.hexToBytes(t)}e.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");const p=(0,c.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,o.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,l.getHash)(i.sha256),bits2int:h,bits2int_modN:t=>{const e=u.bytesToNumberBE(t).toString(16);return 63===e.length&&(t=f(e+"0")),(0,o.mod)(h(t),d)}});function g(t){return u.ensureBytes("","string"==typeof t?f(t):t)}function y(t){return u.bytesToHex(g(t)).padStart(64,"0")}function m(t,e=!1){return p.getPublicKey(y(t),e)}function b(t){const{r:n,s:r}=t;if(n<0n||n>=e.MAX_VALUE)throw new Error(`Signature.r should be [1, ${e.MAX_VALUE})`);const i=(0,o.invert)(r,d);if(i<0n||i>=e.MAX_VALUE)throw new Error(`inv(Signature.s) should be [1, ${e.MAX_VALUE})`)}function _(t){const n=g(t);if(u.bytesToNumberBE(n)>=e.MAX_VALUE)throw new Error(`msgHash should be [0, ${e.MAX_VALUE})`);return n}e._starkCurve=p;const{CURVE:w,ProjectivePoint:E,Signature:v,utils:A}=p;function T(t){return`0x${u.bytesToHex(t.subarray(1)).replace(/^0+/gm,"")}`}function S(t){return t.replace(/^0x/i,"")}function I(t){const e=g(t),n=2n**256n,r=n-(0,o.mod)(n,d);for(let t=0;;t++){const n=D(u.concatBytes(e,u.numberToVarBytesBE(BigInt(t))));if(n<r)return(0,o.mod)(n,d).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}e.CURVE=w,e.ProjectivePoint=E,e.Signature=v,e.utils=A;const k=t=>Number(2147483647n&t),x=[new E(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new E(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new E(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new E(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new E(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function B(t,e){const n=[];let r=t;for(let t=0;t<248;t++)n.push(r),r=r.double();r=e;for(let t=0;t<4;t++)n.push(r),r=r.double();return n}const R=B(x[1],x[2]),C=B(x[3],x[4]);function O(t,e,n){let r=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=u.bytesToNumberBE(g(t));if(!(0n<=e&&e<p.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const i=n[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&r)&&(t=t.add(i)),r>>=1n}return t}function N(t,e){let n=x[0];return n=O(n,t,R),n=O(n,e,C),T(n.toRawBytes(!0))}e.computeHashOnElements=(t,e=N)=>[0,...t,t.length].reduce((t,n)=>e(t,n));const L=u.bitMask(250);e.keccak=t=>u.bytesToNumberBE((0,r.keccak_256)(t))&L;const D=t=>u.bytesToNumberBE((0,i.sha256)(t));function P(t,e,n){const r=t.fromBytes((0,i.sha256)((0,s.utf8ToBytes)(`${e}${n}`)));return t.create(r)}function U(t,e,n,r=0){const i=[],s=[];for(let o=0;o<n;o++)i.push(P(t,`${e}x`,r*n+o)),s.push(P(t,`${e}y`,r*n+o));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(e=>s.map(n=>t.inv(t.sub(e,n))))}e.Fp251=(0,o.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));const F=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function V(t,e){if((0,o.validateField)(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<r;e++){const r=[];for(let i=0;i<n;i++)r.push(P(t.Fp,"Hades",n*e+i));i.push(r)}const s=(0,a.poseidon)({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function H(t,n,r=e.poseidonSmall){return r([t,n,2n])[0]}e.poseidonSmall=V({Fp:e.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},F)},788(t,e){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function r(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o(t,e){r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=n,e.number=n,e.abytes=r,e.bytes=r,e.ahash=i,e.aexists=s,e.aoutput=o;const a={number:n,bytes:r,hash:i,exists:s,output:o};e.default=a},3487(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const r=n(788),i=n(4762);e.Chi=(t,e,n)=>t&e^~t&n,e.Maj=(t,e,n)=>t&e^t&n^e&n;class s extends i.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,r.aexists)(this);const{view:e,buffer:n,blockLen:s}=this,o=(t=(0,i.toBytes)(t)).length;for(let r=0;r<o;){const a=Math.min(s-this.pos,o-r);if(a===s){const e=(0,i.createView)(t);for(;s<=o-r;r+=s)this.process(e,r);continue}n.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.aexists)(this),(0,r.aoutput)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:o}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let t=a;t<s;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,s-8,BigInt(8*this.length),o),this.process(n,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}e.HashMD=s},1529(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=s,e.add=_;const n=BigInt(2**32-1),r=BigInt(32);function i(t,e=!1){return e?{h:Number(t&n),l:Number(t>>r&n)}:{h:0|Number(t>>r&n),l:0|Number(t&n)}}function s(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:o,l:a}=i(t[s],e);[n[s],r[s]]=[o,a]}return[n,r]}const o=(t,e)=>BigInt(t>>>0)<<r|BigInt(e>>>0);e.toBig=o;const a=(t,e,n)=>t>>>n;e.shrSH=a;const c=(t,e,n)=>t<<32-n|e>>>n;e.shrSL=c;const u=(t,e,n)=>t>>>n|e<<32-n;e.rotrSH=u;const l=(t,e,n)=>t<<32-n|e>>>n;e.rotrSL=l;const d=(t,e,n)=>t<<64-n|e>>>n-32;e.rotrBH=d;const h=(t,e,n)=>t>>>n-32|e<<64-n;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const g=(t,e,n)=>t<<n|e>>>32-n;e.rotlSH=g;const y=(t,e,n)=>e<<n|t>>>32-n;e.rotlSL=y;const m=(t,e,n)=>e<<n-32|t>>>64-n;e.rotlBH=m;const b=(t,e,n)=>t<<n-32|e>>>64-n;function _(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);e.add3L=w;const E=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;e.add3H=E;const v=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);e.add4L=v;const A=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);e.add5L=T;const S=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:s,toBig:o,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:y,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:E,add4L:v,add4H:A,add5H:S,add5L:T};e.default=I},1238(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},8112(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const r=n(3487),i=n(4762),s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)a[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=a[t-15],n=a[t-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;a[t]=s+a[t-7]+r+a[t-16]|0}let{A:n,B:o,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,r.Chi)(l,d,h)+s[t]+a[t]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,o,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=o,o=n,n=e+p|0}n=n+this.A|0,o=o+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,o,c,u,l,d,h,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},7240(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const r=n(788),i=n(1529),s=n(4762),o=[],a=[],c=[],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=l,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],o.push(2*(5*r+n)),a.push((t+1)*(t+2)/2%64);let i=u;for(let t=0;t<7;t++)e=(e<<l^(e>>h)*p)%f,e&d&&(i^=l<<(l<<BigInt(t))-l);c.push(i)}const[g,y]=(0,i.split)(c,!0),m=(t,e,n)=>n>32?(0,i.rotlBH)(t,e,n):(0,i.rotlSH)(t,e,n),b=(t,e,n)=>n>32?(0,i.rotlBL)(t,e,n):(0,i.rotlSL)(t,e,n);function _(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=m(s,o,1)^n[r],c=b(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=a[n],s=m(e,i,r),c=b(e,i,r),u=o[n];e=t[u],i=t[u+1],t[u]=s,t[u+1]=c}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=g[r],t[1]^=y[r]}n.fill(0)}class w extends s.Hash{constructor(t,e,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),_(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,r.aexists)(this);const{blockLen:e,state:n}=this,i=(t=(0,s.toBytes)(t)).length;for(let r=0;r<i;){const s=Math.min(e-this.pos,i-r);for(let e=0;e<s;e++)n[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){(0,r.aexists)(this,!1),(0,r.abytes)(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,r.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,r.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new w(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}e.Keccak=w;const E=(t,e,n)=>(0,s.wrapConstructor)(()=>new w(e,t,n));e.sha3_224=E(6,144,28),e.sha3_256=E(6,136,32),e.sha3_384=E(6,104,48),e.sha3_512=E(6,72,64),e.keccak_224=E(1,144,28),e.keccak_256=E(1,136,32),e.keccak_384=E(1,104,48),e.keccak_512=E(1,72,64);const v=(t,e,n)=>(0,s.wrapXOFConstructorWithOpts)((r={})=>new w(e,t,void 0===r.dkLen?n:r.dkLen,!0));e.shake128=v(31,168,16),e.shake256=v(31,136,32)},4762(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let n=0;n<t.length;n++)e+=s[t[n]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=o(t.charCodeAt(i)),s=o(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];(0,i.abytes)(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,n)=>t(n).update(c(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(t));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const r=n(1238),i=n(788);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function o(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function a(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=a(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2828(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CURVE_ORDER=void 0;const r=n(4246);e.CURVE_ORDER=r.CURVE.n},2747(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LengthMismatchError=e.PreconditionError=e.OutOfRangeError=e.InvalidInputError=e.ProtocolError=void 0;class n extends Error{errorCode;constructor(t,e){super(t),this.errorCode=e,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}e.ProtocolError=n;class r extends n{constructor(t){super(t,"INVALID_INPUT")}}e.InvalidInputError=r,e.OutOfRangeError=class extends n{value;range;constructor(t,e,n){super(t,"OUT_OF_RANGE"),this.value=e,this.range=n}},e.PreconditionError=class extends n{constructor(t){super(t,"PRECONDITION_FAILED")}},e.LengthMismatchError=class extends r{constructor(t,e,n="arrays"){super(`Length mismatch: expected ${t} but got ${e} for ${n}`)}}},6885(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(2828),e),i(n(5900),e),i(n(4288),e),i(n(2747),e)},5356(t,e,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(r=function(t){return r=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},r(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=r(t),o=0;o<n.length;o++)"default"!==n[o]&&i(e,t,n[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.SameEncryptUnknownRandom=e.SameEncrypt=e.ElGamal=e.range=e.bit=e.poeN=e.poe2=e.poe=void 0,e.poe=o(n(8431)),e.poe2=o(n(6313)),e.poeN=o(n(2362)),e.bit=o(n(8368)),e.range=o(n(8678)),e.ElGamal=o(n(5602)),e.SameEncrypt=o(n(2528)),e.SameEncryptUnknownRandom=o(n(1979))},5602(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L:n,R:r,g1:i,g2:s}=t,{AL:a,AR:c,c:u,sb:l,sr:d}=e;return o(n,r,i,s,a,c,u,l,d)},e.verify_with_prefix=function(t,e){const{L:n,R:i,g1:s,g2:a}=t,{AL:c,AR:u,prefix:l,sb:d,sr:h}=e,f=[c,u];return o(n,i,s,a,c,u,(0,r.compute_challenge)(l,f),d,h)},e._verify=o,e.prove=function(t,e,n,i,s){const o=n.multiply(t).add(i.multiplyUnsafe(e)),a=n.multiplyUnsafe(e),c=(0,r.generateRandom)(),u=(0,r.generateRandom)(),l=n.multiply(c).add(i.multiply(u)),d=n.multiply(u),h=(0,r.compute_challenge)(s,[l,d]),f=(0,r.compute_s)(u,e,h);return{inputs:{L:o,R:a,g1:n,g2:i},proof:{AL:l,AR:d,sb:(0,r.compute_s)(c,t,h),sr:f,prefix:s}}};const r=n(4288),i=n(8431),s=n(6313);function o(t,e,n,r,o,a,c,u,l){return!!(0,i._verify)(e,n,a,c,l)&&!!(0,s._verify)(t,n,r,o,c,u,l)}},8368(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{V:n,g1:r,g2:i}=t,{A0:o,A1:a,c,c0:u,s0:l,s1:d}=e;return s(n,r,i,o,a,c,u,l,d)},e.verify_with_prefix=function(t,e){const{V:n,g1:i,g2:o}=t,{A0:a,A1:c,prefix:u,c0:l,s0:d,s1:h}=e,f=[n,a,c];return s(n,i,o,a,c,(0,r.compute_challenge)(u,f),l,d,h)},e._verify=s,e.prove=function(t,e,n,i,s){return 0===t?function(t,e,n,i){const s=n.multiplyUnsafe(t),a={V:s,g1:e,g2:n},c=s.subtract(e),{A:u,c:l,s:d}=o(c,n),h=(0,r.generateRandom)(),f=n.multiply(h),p=[s,f,u],g=(0,r.compute_challenge)(i,p),y=(0,r.subtract_modulo_curve_order)(g,l);return{inputs:a,proof:{A0:f,A1:u,prefix:i,c0:y,s0:(0,r.compute_s)(h,t,y),s1:d}}}(e,n,i,s):function(t,e,n,i){const s=e.add(n.multiplyUnsafe(t)),a={V:s,g1:e,g2:n},c=s,{A:u,c:l,s:d}=o(c,n),h=(0,r.generateRandom)(),f=n.multiply(h),p=[s,u,f],g=(0,r.compute_challenge)(i,p),y=(0,r.subtract_modulo_curve_order)(g,l);return{inputs:a,proof:{A0:u,A1:f,prefix:i,c0:l,s0:d,s1:(0,r.compute_s)(h,t,y)}}}(e,n,i,s)};const r=n(4288),i=n(8431);function s(t,e,n,s,o,a,c,u,l){if(!(0,r.validate_challenge)(a))throw new Error("invalid challenge");const d=(0,r.subtract_modulo_curve_order)(a,c);if(!(0,i._verify)(t,n,s,c,u))return!1;const h=t.subtract(e);return!!(0,i._verify)(h,n,o,d,l)}function o(t,e){const n=(0,r.generateRandom)(),i=(0,r.generateRandom)();return{A:e.multiplyUnsafe(n).subtract(t.multiplyUnsafe(i)),c:i,s:n}}},8431(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,g:r}=t,{A:s,c:o,s:a}=e;return i(n,r,s,o,a)},e.verify_with_prefix=function(t,e){const{y:n,g:s}=t,{A:o,prefix:a,s:c}=e,u=[o];return i(n,s,o,(0,r.compute_challenge)(a,u),c)},e._verify=i,e.prove=function(t,e,n){const i={y:e.multiply(t),g:e},s=(0,r.generateRandom)(),o=e.multiplyUnsafe(s),a=(0,r.compute_challenge)(n,[o]);return{inputs:i,proof:{A:o,s:(0,r.compute_s)(s,t,a),prefix:n}}};const r=n(4288);function i(t,e,n,i,s){if(!(0,r.in_curve_order)(s))throw new Error(" s not in curve order");if(!(0,r.validate_challenge)(i))throw new Error("invalid challenge");const o=e.multiplyUnsafe(s),a=n.add(t.multiplyUnsafe(i));return o.equals(a)}},6313(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,g1:r,g2:s}=t,{A:o,c:a,s1:c,s2:u}=e;return i(n,r,s,o,a,c,u)},e.verify_with_prefix=function(t,e){const{y:n,g1:s,g2:o}=t,{A:a,prefix:c,s1:u,s2:l}=e,d=[a];return i(n,s,o,a,(0,r.compute_challenge)(c,d),u,l)},e._verify=i,e.prove=function(t,e,n,i,s){const o={y:n.multiply(t).add(i.multiply(e)),g1:n,g2:i},a=(0,r.generateRandom)(),c=(0,r.generateRandom)(),u=n.multiplyUnsafe(a).add(i.multiplyUnsafe(c)),l=(0,r.compute_challenge)(s,[u]);return{inputs:o,proof:{A:u,prefix:s,s1:(0,r.compute_s)(a,t,l),s2:(0,r.compute_s)(c,e,l)}}};const r=n(4288);function i(t,e,n,i,s,o,a){if(!(0,r.in_curve_order)(o))throw new Error(" s1 not in curve order");if(!(0,r.in_curve_order)(a))throw new Error(" s2 not in curve order");if(!(0,r.validate_challenge)(s))throw new Error("invalid challenge");const c=e.multiplyUnsafe(o).add(n.multiplyUnsafe(a)),u=i.add(t.multiplyUnsafe(s));return c.equals(u)}},2362(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{y:n,generators:r}=t,{A:i,c:s,ss:a}=e;return o(n,r,i,s,a)},e.verify_with_prefix=function(t,e){const{y:n,generators:r}=t,{A:i,prefix:a,ss:c}=e,u=[i];return o(n,r,i,(0,s.compute_challenge)(a,u),c)},e._verify=o,e.prove=function(t,e,n){if(e.length!==t.length)throw new r.LengthMismatchError(e.length,t.length,"generators and scalars");let o=[],a=i.ProjectivePoint.ZERO,c=i.ProjectivePoint.ZERO;for(let n=0;n<e.length;n++){const r=e[n],i=(0,s.generateRandom)();a=a.add(r.multiply(t[n])),c=c.add(r.multiply(i)),o.push(i)}const u={y:a,generators:e},l=[c],d=(0,s.compute_challenge)(n,l),h=[];for(let n=0;n<e.length;n++)h.push((0,s.compute_s)(o[n],t[n],d));return{inputs:u,proof:{A:c,prefix:n,ss:h}}};const r=n(2747),i=n(5900),s=n(4288);function o(t,e,n,o,a){if(e.length!==a.length)throw new r.LengthMismatchError(e.length,a.length,"generators and responses");if(!(0,s.validate_challenge)(o))throw new Error("invalid challenge");let c=i.ProjectivePoint.ZERO;for(let t=0;t<e.length;t++){if(!(0,s.in_curve_order)(a[t]))throw new Error(" s not in curve order");c=c.add(e[t].multiplyUnsafe(a[t]))}const u=n.add(t.multiplyUnsafe(o));return c.equals(u)}},8678(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{g1:n,g2:r,bit_size:o,commitments:c}=t,{proofs:u}=e;if(c.length!==o||u.length!==o)throw new i.LengthMismatchError(c.length,o,"commitments and bit_size");const l=u[0].prefix;let d=s.ProjectivePoint.ZERO;for(let t=0;t<o;t++){const e=2n**BigInt(t),i=c[t],s=u[t];if(s.prefix!==l+BigInt(t))return!1;const o={V:i,g1:n,g2:r};if(!(0,a.verify_with_prefix)(o,s))return!1;d=d.add(i.multiply(e))}return d},e.pregenerate_randomness=function(t){let e=[],n=0n;for(let i=0;i<t;i++){const t=2n**BigInt(i),s=(0,o.generateRandom)();e.push(s),n=(n+s*t)%r.CURVE_ORDER}return{randomness:e,total_random:n}},e.prove=function(t,e,n,s,o,c){if(t>=2**e)throw new i.OutOfRangeError(`Value ${t} is not in range [0, ${2**e-1}]`,t,`[0, ${2**e-1}]`);if(o.length!==e)throw new Error("Randomness length does not match bit_size");const u=t.toString(2).padStart(e,"0").split("").map(Number).map(t=>t).reverse(),l=[],d=[];let h=0n;for(let t=0;t<e;t++){const e=2n**BigInt(t),i=o[t],{inputs:f,proof:p}=(0,a.prove)(u[t],i,n,s,c+BigInt(t));l.push(p),d.push(f.V),h=(h+i*e)%r.CURVE_ORDER}return{inputs:{commitments:d,g1:n,g2:s,bit_size:e},proofs:{proofs:l},r:h}};const r=n(2828),i=n(2747),s=n(5900),o=n(4288),a=n(8368)},2528(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L1:n,R1:r,L2:i,R2:o,g:a,y1:c,y2:u}=t,{AL1:l,AR1:d,AL2:h,AR2:f,c:p,sb:g,sr1:y,sr2:m}=e;return s(n,r,i,o,a,c,u,l,d,h,f,p,g,y,m)},e.verify_with_prefix=function(t,e){const{L1:n,R1:i,L2:o,R2:a,g:c,y1:u,y2:l}=t,{AL1:d,AR1:h,AL2:f,AR2:p,prefix:g,sb:y,sr1:m,sr2:b}=e,_=[d,h,f,p];return s(n,i,o,a,c,u,l,d,h,f,p,(0,r.compute_challenge)(g,_),y,m,b)},e._verify=s,e.prove=function(t,e,n,i,s,o,a){const c={L1:t.multiply(i).add(e.multiply(s)),R1:t.multiply(s),L2:t.multiply(i).add(n.multiply(o)),R2:t.multiply(o),y1:e,y2:n,g:t},u=(0,r.generateRandom)(),l=(0,r.generateRandom)(),d=(0,r.generateRandom)(),h=t.multiply(u).add(e.multiply(l)),f=t.multiply(l),p=t.multiply(u).add(n.multiply(d)),g=t.multiply(d),y=[h,f,p,g],m=(0,r.compute_challenge)(a,y);return{inputs:c,proof:{AL1:h,AR1:f,AL2:p,AR2:g,prefix:a,sb:(0,r.compute_s)(u,i,m),sr1:(0,r.compute_s)(l,s,m),sr2:(0,r.compute_s)(d,o,m)}}};const r=n(4288),i=n(5602);function s(t,e,n,r,s,o,a,c,u,l,d,h,f,p,g){return!!(0,i._verify)(t,e,s,o,c,u,h,f,p)&&!!(0,i._verify)(n,r,s,a,l,d,h,f,g)}},1979(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){const{L1:n,R1:r,L2:i,R2:s,g:o,y1:a,y2:u}=t,{Ax:l,AL1:d,AL2:h,AR2:f,c:p,sb:g,sx:y,sr2:m}=e;return c(n,r,i,s,o,a,u,l,d,h,f,p,g,y,m)},e.verify_with_prefix=function(t,e){const{L1:n,R1:i,L2:s,R2:o,g:a,y1:u,y2:l}=t,{Ax:d,AL1:h,AL2:f,AR2:p,prefix:g,sb:y,sx:m,sr2:b}=e,_=[d,h,f,p];return c(n,i,s,o,a,u,l,d,h,f,p,(0,r.compute_challenge)(g,_),y,m,b)},e._verify=c,e.prove=function(t,e,n,s,o,a,c,u){const l=t.multiply(e);if(!s.subtract(o.multiply(e)).equals(t.multiply(a)))throw new i.PreconditionError("The provided ciphertext (L1, R1) does not encrypt the specified message under the derived public key");const d={L1:s,R1:o,L2:t.multiply(a).add(n.multiply(c)),R2:t.multiply(c),g:t,y1:l,y2:n},h=(0,r.generateRandom)(),f=(0,r.generateRandom)(),p=(0,r.generateRandom)(),g=t.multiply(h),y=t.multiply(f).add(o.multiply(h)),m=t.multiply(f).add(n.multiply(p)),b=t.multiply(p),_=[g,y,m,b],w=(0,r.compute_challenge)(u,_);return{inputs:d,proof:{Ax:g,AL1:y,AL2:m,AR2:b,prefix:u,sx:(0,r.compute_s)(h,e,w),sb:(0,r.compute_s)(f,a,w),sr2:(0,r.compute_s)(p,c,w)}}};const r=n(4288),i=n(2747),s=n(5602),o=n(8431),a=n(6313);function c(t,e,n,r,i,c,u,l,d,h,f,p,g,y,m){return!!(0,o._verify)(c,i,l,p,y)&&!!(0,a._verify)(t,i,e,d,p,g,y)&&!!(0,s._verify)(n,r,i,u,h,f,p,g,m)}},5900(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=e.CURVE_ORDER=void 0;const r=n(4246);var i=n(2828);Object.defineProperty(e,"CURVE_ORDER",{enumerable:!0,get:function(){return i.CURVE_ORDER}}),e.ProjectivePoint=r.ProjectivePoint},4288(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateRandom=function(){const t=r.utils.randomPrivateKey();return r.utils.normPrivateKeyToScalar(t)},e.in_curve_order=s,e.validate_challenge=function(t){return 0n!=t&&s(t)},e.reduce_modulo_order=o,e.compute_challenge=function(t,e){const n=[t];return e.forEach(t=>{const{x:e,y:r}=t.toAffine();n.push(e),n.push(r)}),o((0,r.poseidonHashMany)(n))},e.compute_s=function(t,e,n){return(t+e*n)%i.CURVE_ORDER},e.subtract_modulo_curve_order=function(t,e){return((t-e)%i.CURVE_ORDER+i.CURVE_ORDER)%i.CURVE_ORDER};const r=n(4246),i=n(2828);function s(t){return t<i.CURVE_ORDER}function o(t){return t%i.CURVE_ORDER}},6072(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6985(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;const r=n(5556),i=n(9839),s=n(6641),o=n(3496),a=n(4499),c=n(9705),u=n(7340),l=n(5401),d=n(3829),h=n(2445),f=n(546),p=n(6451),g=n(2540),y=n(8138),m=n(2479),b=n(9889),_=n(6783),w=n(227),E=n(8697);class v{publicKey;pk;provider;Tongo;constructor(t,e,n){this.pk=(0,w.bytesOrNumToBigInt)(t),this.Tongo=new r.Contract({abi:b.tongoAbi,address:e,providerOrAccount:n}).typedv2(b.tongoAbi),this.publicKey=(0,w.pubKeyFromSecret)(this.pk),this.provider=n}tongoAddress(){return(0,_.pubKeyAffineToBase58)(this.publicKey)}static tongoAddress(t){return(0,_.pubKeyAffineToBase58)((0,w.pubKeyFromSecret)((0,w.bytesOrNumToBigInt)(t)))}async nonce(){const{nonce:t}=await this.rawState();return t}async state(){const{balance:t,pending:e,aeBalance:n,nonce:r}=await this.rawState(),i=n?await this.decryptAEBalance(n,r):void 0;return{balance:this.decryptCipherBalance(t,i),pending:this.decryptCipherBalance(e),nonce:r}}async rawState(){const t=await this.Tongo.get_state(this.publicKey);return v.parseAccountState(t)}async rate(){const t=await this.Tongo.get_rate();return(0,w.castBigInt)(t)}async bit_size(){const t=await this.Tongo.get_bit_size();return"bigint"==typeof t?Number(t):t}async erc20ToTongo(t){const e=await this.rate(),n=t/e;return t%e!=0n?n+1n:n}async tongoToErc20(t){return t*await this.rate()}async auditorKey(){return await this.Tongo.auditor_key()}async createAuditPart(t,e,n){let s=new r.CairoOption(r.CairoOptionVariant.None);const o=await this.auditorKey();if(o.isSome()){const a=(0,_.starkPointToProjectivePoint)(o.unwrap()),{inputs:c,proof:u}=(0,i.proveAudit)(this.pk,t,e,a,n),l=await this.nonce(),d=await this.computeAEHintForPubKey(t,l,a),h={auditedBalance:c.auditedBalance,hint:d,proof:u};s=new r.CairoOption(r.CairoOptionVariant.Some,h)}return s}async fund(t){const{amount:e,sender:n}=t,{nonce:r,balance:i,aeBalance:o}=await this.rawState(),a=o?await this.decryptAEBalance(o,r):void 0,c=this.decryptCipherBalance(i,a),u={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:l,proof:d,newBalance:h}=(0,s.proveFund)(this.pk,e,c,i,r,u),p=await this.createAuditPart(e+c,h,u),g=await this.computeAEHintForSelf(e+c,r+1n),y=new f.FundOperation({to:l.y,amount:e,hint:g,proof:d,auditPart:p,Tongo:this.Tongo});return await y.populateApprove(),y}async transfer(t){const{amount:e,sender:n}=t,r=await this.bit_size(),{nonce:i,balance:s,aeBalance:o}=await this.rawState(),a=o?await this.decryptAEBalance(o,i):void 0,u=this.decryptCipherBalance(s,a);if(u<e)throw new Error("You dont have enough balance");const l=(0,_.starkPointToProjectivePoint)(t.to),d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:h,proof:f,newBalance:p}=(0,c.proveTransfer)(this.pk,l,u,e,s,i,r,d),g=await this.computeAEHintForPubKey(e,i,l),m=await this.computeAEHintForSelf(u-e,i+1n),b=await this.createAuditPart(u-e,p,d),w=await this.createAuditPart(e,h.transferBalanceSelf,d);return new y.TransferOperation({from:h.from,to:h.to,transferBalance:h.transferBalance,transferBalanceSelf:h.transferBalanceSelf,auxiliarCipher:h.auxiliarCipher,auxiliarCipher2:h.auxiliarCipher2,hintTransfer:g,hintLeftover:m,proof:f,auditPart:b,auditPartTransfer:w,Tongo:this.Tongo})}async ragequit(t){const{to:e,sender:n}=t,{nonce:r,balance:i,aeBalance:s}=await this.rawState(),a=s?await this.decryptAEBalance(s,r):void 0,c=this.decryptCipherBalance(i,a);if(0n===c)throw new Error("You dont have enough balance");const u={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},{inputs:l,proof:d,newBalance:h}=(0,o.proveRagequit)(this.pk,i,r,BigInt(e),c,u),f=await this.computeAEHintForSelf(0n,r+1n),g=await this.createAuditPart(0n,h,u);return new p.RagequitOperation({from:l.y,to:l.to,amount:l.amount,hint:f,proof:d,Tongo:this.Tongo,auditPart:g})}async withdraw(t){const{amount:e,to:n,sender:r}=t,i=await this.bit_size(),{nonce:s,balance:o,aeBalance:a}=await this.rawState(),c=a?await this.decryptAEBalance(a,s):void 0,l=this.decryptCipherBalance(o,c);if(l<e)throw new Error("You dont have enought balance");const d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(r)},{inputs:h,proof:f,newBalance:p}=(0,u.proveWithdraw)(this.pk,l,e,BigInt(n),o,s,i,d),g=await this.computeAEHintForSelf(l-e,s+1n),y=await this.createAuditPart(l-e,p,d);return new m.WithdrawOperation({from:h.y,to:h.to,amount:h.amount,auxiliarCipher:h.auxiliarCipher,hint:g,proof:f,auditPart:y,Tongo:this.Tongo})}async rollover(t){const{sender:e}=t,n=await this.rawState(),{nonce:r,balance:i,aeBalance:s,pending:o}=n,c=s?await this.decryptAEBalance(s,r):void 0,u=this.decryptCipherBalance(i,c),l=this.decryptCipherBalance(o);if(0n==l)throw new Error("Your pending ammount is 0");const d={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(e)},{inputs:h,proof:f}=(0,a.proveRollover)(this.pk,r,d),p=await this.computeAEHintForSelf(l+u,r+1n);return new g.RollOverOperation({to:h.y,proof:f,Tongo:this.Tongo,hint:p})}async decryptAEBalance(t,e){return this.decryptAEHintForPubKey(t,e,this.publicKey)}async decryptAEHintForPubKey(t,e,n){const r=await this.deriveSymmetricKeyForPubKey(e,n),{ciphertext:i,nonce:s}=(0,l.AEHintToBytes)(t);return new l.AEChaCha(r).decryptBalance({ciphertext:i,nonce:s})}decryptCipherBalance({L:t,R:e},n){return n&&(0,w.assertBalance)(this.pk,n,t,e)?n:(0,w.decipherBalance)(this.pk,t,e)}async generateExPost(t,e,n){if(null==e.L)throw new Error("L is null");if(null==e.R)throw new Error("R is null");const r={chain_id:BigInt(await this.provider.getChainId()),tongo_address:BigInt(this.Tongo.address),sender_address:BigInt(n)},s=this.decryptCipherBalance(e),{inputs:o,proof:a}=(0,i.proveAudit)(this.pk,s,e,(0,_.starkPointToProjectivePoint)(t),r);return{inputs:o,proof:a}}verifyExPost(t){if((0,_.projectivePointToStarkPoint)(t.inputs.y)!=this.publicKey)throw new Error("The expost is not for you");return(0,i.verifyAudit)(t.inputs,t.proof),this.decryptCipherBalance({L:t.inputs.auditedBalance.L,R:t.inputs.auditedBalance.R})}_diffieHellman(t){const e=(0,_.pubKeyBase58ToHex)(t);return(0,h.ECDiffieHellman)(this.pk,e)}async computeAEHintForPubKey(t,e,n){const r=await this.deriveSymmetricKeyForPubKey(e,n);return(0,l.bytesToAEHint)(new l.AEChaCha(r).encryptBalance(t))}async computeAEHintForSelf(t,e){return this.computeAEHintForPubKey(t,e,this.publicKey)}async deriveSymmetricKeyForPubKey(t,e){const n=(0,h.ECDiffieHellman)(this.pk,(0,_.pubKeyAffineToHex)(e));return(0,h.deriveSymmetricEncryptionKey)({contractAddress:this.Tongo.address,nonce:t,secret:n})}static parseAccountState(t){const{balance:e,pending:n,audit:i,nonce:s,ae_balance:o,ae_audit_balance:a}=t;let c;return i.isSome()&&(c=(0,_.parseCipherBalance)(i.unwrap())),{balance:(0,_.parseCipherBalance)(e),pending:(0,_.parseCipherBalance)(n),audit:c,nonce:r.num.toBigInt(s),aeBalance:o.isSome()?(0,l.parseAEBalance)(o.unwrap()):void 0,aeAuditBalance:a.isSome()?(0,l.parseAEBalance)(a.unwrap()):void 0}}async getEventsFund(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsFund(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount}))}async getEventsRollover(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsRollover(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.rollovered))}))}async getEventsWithdraw(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsWithdraw(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:r.num.toHex(t.to)}))}async getEventsRagequit(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address);return(await e.getEventsRagequit(t,this.publicKey)).map(t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:r.num.toHex(t.to)}))}async getEventsTransferOut(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address),n=await e.getEventsTransferOut(t,this.publicKey);return Promise.all(n.map(async t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.transferBalanceSelf),await this.decryptAEHintForPubKey(t.hintTransfer,t.nonce,t.to)),to:(0,_.pubKeyAffineToBase58)(t.to)})))}async getEventsTransferIn(t){const e=new d.StarknetEventReader(this.provider,this.Tongo.address),n=await e.getEventsTransferIn(t,this.publicKey);return Promise.all(n.map(async t=>({type:E.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:this.decryptCipherBalance((0,_.parseCipherBalance)(t.transferBalance),await this.decryptAEHintForPubKey(t.hintTransfer,t.nonce,t.from)),from:(0,_.pubKeyAffineToBase58)(t.from)})))}async getTxHistory(t){const e=Promise.all([this.getEventsFund(t),this.getEventsRollover(t),this.getEventsWithdraw(t),this.getEventsRagequit(t),this.getEventsTransferOut(t),this.getEventsTransferIn(t)]);return(await e).flat().sort((t,e)=>e.block_number-t.block_number)}}e.Account=v},8697(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReaderToAccountEvents=void 0;const r=n(3829);e.ReaderToAccountEvents={[r.ReaderEventType.Fund]:"fund",[r.ReaderEventType.Rollover]:"rollover",[r.ReaderEventType.Withdraw]:"withdraw",[r.ReaderEventType.Ragequit]:"ragequit",[r.ReaderEventType.TransferIn]:"transferIn",[r.ReaderEventType.TransferOut]:"transferOut"}},866(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(6985),e),i(n(6072),e),i(n(8697),e)},5401(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AEChaCha=void 0,e.AEHintToBytes=function({ciphertext:t,nonce:e}){return{ciphertext:(0,i.numberToBytesBE)(t,64),nonce:(0,i.numberToBytesBE)(e,24)}},e.bytesToAEHint=function({ciphertext:t,nonce:e}){return{ciphertext:(0,i.bytesToNumberBE)(t),nonce:(0,i.bytesToNumberBE)(e)}},e.parseAEBalance=function({ciphertext:t,nonce:e}){let n;return n=(0,a.isUint256)(e)?o.uint256.uint256ToBN(e):BigInt(e),{ciphertext:BigInt(t),nonce:n}};const r=n(8900),i=n(6527),s=n(8489),o=n(5556),a=n(227);e.AEChaCha=class{key;constructor(t){if(this.key=t,32!=this.key.length)throw new Error(`Key length must be exactly 32 Bytes, not '${this.key.length}'`)}encryptBalance(t){if(t>=2n**32n)throw new Error("This implementation only supports 32 bit balances");const e=(0,s.randomBytes)(24),n=(0,s.randomBytes)(44),o=(0,i.numberToBytesBE)(t,48);return o.set(n,0),{ciphertext:(0,r.xchacha20poly1305)(this.key,e).encrypt(o),nonce:e}}decryptBalance({ciphertext:t,nonce:e}){const n=(0,r.xchacha20poly1305)(this.key,e);try{const e=n.decrypt(t);if(48!==e.length)throw new Error("Malformed plaintext");return(0,i.bytesToNumberBE)(e.slice(44,48))}catch{throw new Error("Malformed or tampered ciphertext")}}}},9043(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SECONDARY_GENERATOR=e.GENERATOR=e.CURVE_ORDER=void 0;const r=n(4246),i=n(6783);e.CURVE_ORDER=r.CURVE.n,e.GENERATOR=new i.ProjectivePoint(r.CURVE.Gx,r.CURVE.Gy,1n),e.SECONDARY_GENERATOR=new i.ProjectivePoint(627088272801405713560985229077786158610581355215145837257248988047835443922n,962306405833205337611861169387935900858447421343428280515103558221889311122n,1n)},3829(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StarknetEventReader=e.ReaderEventType=void 0;const r=n(5556),i=n(9889),s=r.events.getAbiEvents(i.tongoAbi),o=r.CallData.getAbiStruct(i.tongoAbi),a=r.CallData.getAbiEnum(i.tongoAbi),c=r.num.toHex(r.hash.starknetKeccak("FundEvent")),u=r.num.toHex(r.hash.starknetKeccak("RolloverEvent")),l=r.num.toHex(r.hash.starknetKeccak("TransferEvent")),d=r.num.toHex(r.hash.starknetKeccak("WithdrawEvent")),h=r.num.toHex(r.hash.starknetKeccak("RagequitEvent")),f=r.num.toHex(r.hash.starknetKeccak("BalanceDeclared")),p=r.num.toHex(r.hash.starknetKeccak("TransferDeclared")),g="tongo::structs::events::FundEvent",y="tongo::structs::events::RolloverEvent",m="tongo::structs::events::TransferEvent",b="tongo::structs::events::WithdrawEvent",_="tongo::structs::events::RagequitEvent",w="tongo::structs::events::BalanceDeclared",E="tongo::structs::events::TransferDeclared";function v(t){const n=t[E];return{type:e.ReaderEventType.TransferDeclared,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}e.ReaderEventType={Fund:"fund",Withdraw:"withdraw",Ragequit:"ragequit",Rollover:"rollover",TransferIn:"transferIn",TransferOut:"transferOut",BalanceDeclared:"balanceDeclared",TransferDeclared:"transferDeclared"};class A{provider;static abiParser=new r.AbiParser2(i.tongoAbi);abiParser=A.abiParser;tongoAddress;constructor(t,e){this.provider=t,this.tongoAddress=e}async getEventsFund(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[c],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[g]).map(t=>function(t){const n=t[g];return{type:e.ReaderEventType.Fund,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsWithdraw(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[d],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[b]).map(t=>function(t){const n=t[b];return{type:e.ReaderEventType.Withdraw,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsRagequit(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[h],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[_]).map(t=>function(t){const n=t[_];return{type:e.ReaderEventType.Ragequit,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsRollover(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[u],[r.num.toHex(n.x)],[r.num.toHex(n.y)]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[y]).map(t=>function(t){const n=t[y];return{type:e.ReaderEventType.Rollover,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferOut(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[l],[],[],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[m]).map(t=>function(t){const n=t[m];return{type:e.ReaderEventType.TransferOut,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferIn(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[l],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[m]).map(t=>function(t){const n=t[m];return{type:e.ReaderEventType.TransferIn,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getAllEvents(t,e){const n=Promise.all([this.getEventsFund(t,e),this.getEventsRollover(t,e),this.getEventsWithdraw(t,e),this.getEventsRagequit(t,e),this.getEventsTransferOut(t,e),this.getEventsTransferIn(t,e)]);return(await n).flat().sort((t,e)=>e.block_number-t.block_number)}async getEventsBalanceDeclared(t,n){const i=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[f],[r.num.toHex(n.x)],[r.num.toHex(n.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(i.events,s,o,a,this.abiParser).filter(t=>void 0!==t[w]).map(t=>function(t){const n=t[w];return{type:e.ReaderEventType.BalanceDeclared,tx_hash:t.transaction_hash,block_number:t.block_number,...n}}(t))}async getEventsTransferFrom(t,e){const n=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[p],[r.num.toHex(e.x)],[r.num.toHex(e.y)],[],[],[]],chunk_size:100});return r.events.parseEvents(n.events,s,o,a,this.abiParser).filter(t=>void 0!==t[E]).map(t=>v(t))}async getEventsTransferTo(t,e){const n=await this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:t},to_block:"latest",keys:[[p],[],[],[r.num.toHex(e.x)],[r.num.toHex(e.y)],[]],chunk_size:100});return r.events.parseEvents(n.events,s,o,a,this.abiParser).filter(t=>void 0!==t[E]).map(t=>v(t))}}e.StarknetEventReader=A},34(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(866),e),i(n(3001),e),i(n(5401),e),i(n(2445),e),i(n(6783),e)},2445(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ECDiffieHellman=function(t,e){return s._starkCurve.getSharedSecret(t,e,!1)},e.buildInfo=o,e.buildSalt=a,e.deriveSymmetricEncryptionKey=async function(t){const{contractAddress:e,nonce:n,secret:r}=t,i={name:"HKDF",hash:"SHA-256",salt:a(n,r),info:o(e),length:32},s=await crypto.subtle.importKey("raw",r,"HKDF",!1,["deriveKey"]),c=await crypto.subtle.deriveKey(i,s,{name:"HMAC",hash:"SHA-256",length:256},!0,["sign"]),u=await crypto.subtle.exportKey("raw",c);return new Uint8Array(u)};const r=n(6527),i=n(7076),s=n(4246);function o(t){const e=new Uint8Array([116,111,110,103,111]),n=(0,r.hexToBytes)(t.replace(/^0x/,"").padStart(64,"0")),i=new Uint8Array(27).fill(0),s=new Uint8Array(64);return s.set(e),s.set(n,e.length),s.set(i,n.length+e.length),s}function a(t,e){const n=new Uint8Array(72),s=(0,r.numberToBytesBE)(t,8);if(n.set(s),4!==e.at(0))throw new Error("InvalidSharedSecret");return n.set(e.slice(1),s.length),(0,i.sha256)(n)}},8726(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},546(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FundOperation=void 0;const r=n(5556),i=n(227),s=n(6508);e.FundOperation=class{type;Tongo;to;amount;hint;proof;auditPart;approve;constructor({to:t,amount:e,proof:n,auditPart:r,Tongo:i,hint:o}){this.type=s.OperationType.Fund,this.to=t,this.amount=e,this.hint=o,this.auditPart=r,this.proof=n,this.Tongo=i}toCalldata(){return this.Tongo.populate("fund",[{to:this.to,amount:this.amount,hint:this.hint,proof:this.proof,auditPart:this.auditPart}])}async populateApprove(){const t=await this.Tongo.ERC20(),e=r.num.toHex(t),n=this.Tongo.address,s=await this.Tongo.get_rate(),o=r.cairo.uint256(this.amount*(0,i.castBigInt)(s)),a=r.CallData.compile({spender:n,amount:o});this.approve={contractAddress:e,entrypoint:"approve",calldata:a}}}},3001(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8726),e),i(n(546),e),i(n(6508),e),i(n(6451),e),i(n(2540),e),i(n(8138),e),i(n(2479),e)},6508(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationType=void 0,e.OperationType={Audit:"audit",Fund:"fund",Ragequit:"ragequit",Withdraw:"withdraw",Rollover:"rollover",Transfer:"transfer"}},6451(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RagequitOperation=void 0;const r=n(6508);e.RagequitOperation=class{type=r.OperationType.Ragequit;from;to;amount;hint;auditPart;proof;Tongo;constructor({from:t,to:e,amount:n,proof:r,Tongo:i,hint:s,auditPart:o}){this.from=t,this.to=e,this.amount=n,this.hint=s,this.proof=r,this.auditPart=o,this.Tongo=i}toCalldata(){return this.Tongo.populate("ragequit",[{from:this.from,amount:this.amount,to:"0x"+this.to.toString(16),proof:this.proof,hint:this.hint,auditPart:this.auditPart}])}}},2540(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RollOverOperation=void 0;const r=n(6508);e.RollOverOperation=class{type=r.OperationType.Rollover;to;proof;Tongo;hint;constructor({to:t,proof:e,Tongo:n,hint:r}){this.to=t,this.proof=e,this.Tongo=n,this.hint=r}toCalldata(){return this.Tongo.populate("rollover",[{to:this.to,proof:this.proof,hint:this.hint}])}}},8138(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransferOperation=void 0;const r=n(6508);e.TransferOperation=class{type=r.OperationType.Transfer;Tongo;from;to;transferBalance;transferBalanceSelf;auxiliarCipher;auxiliarCipher2;hintTransfer;hintLeftover;proof;auditPart;auditPartTransfer;constructor({from:t,to:e,transferBalance:n,transferBalanceSelf:r,proof:i,auditPart:s,auditPartTransfer:o,auxiliarCipher:a,auxiliarCipher2:c,Tongo:u,hintTransfer:l,hintLeftover:d}){this.from=t,this.to=e,this.transferBalance=n,this.transferBalanceSelf=r,this.auxiliarCipher=a,this.auxiliarCipher2=c,this.hintTransfer=l,this.hintLeftover=d,this.proof=i,this.auditPart=s,this.auditPartTransfer=o,this.Tongo=u}toCalldata(){return this.Tongo.populate("transfer",[{from:this.from,to:this.to,transferBalance:this.transferBalance,transferBalanceSelf:this.transferBalanceSelf,auxiliarCipher:this.auxiliarCipher,auxiliarCipher2:this.auxiliarCipher2,hintTransfer:this.hintTransfer,hintLeftover:this.hintLeftover,proof:this.proof,auditPart:this.auditPart,auditPartTransfer:this.auditPartTransfer}])}}},2479(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WithdrawOperation=void 0;const r=n(5556),i=n(6508);e.WithdrawOperation=class{type=i.OperationType.Withdraw;from;to;amount;hint;auxiliarCipher;proof;auditPart;Tongo;constructor({from:t,to:e,amount:n,proof:r,auditPart:i,Tongo:s,hint:o,auxiliarCipher:a}){this.from=t,this.to=e,this.amount=n,this.auxiliarCipher=a,this.hint=o,this.proof=r,this.auditPart=i,this.Tongo=s}toCalldata(){return this.Tongo.populate("withdraw",[{from:this.from,amount:this.amount,hint:this.hint,to:r.num.toHex(this.to),auxiliarCipher:this.auxiliarCipher,auditPart:this.auditPart,proof:this.proof}])}}},9839(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIT_CAIRO_STRING=void 0,e.proveAudit=function(t,n,i,c,u){const l=t,d=s.GENERATOR.multiply(l),{L:h,R:f}=i,p=h.subtract(f.multiplyUnsafe(l)),g=s.GENERATOR.multiplyUnsafe(n);if(!p.equals(g))throw new Error("storedBalance is not an encryption of balance");const y=(0,r.generateRandom)(),m={y:d,storedBalance:i,auditorPubKey:c,auditedBalance:(0,a.createCipherBalance)(c,n,y),prefix_data:u},b=function(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.AUDIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.auditorPubKey.toAffine().x,t.auditorPubKey.toAffine().y,t.storedBalance.L.toAffine().x,t.storedBalance.L.toAffine().y,t.storedBalance.R.toAffine().x,t.storedBalance.R.toAffine().y,t.auditedBalance.L.toAffine().x,t.auditedBalance.L.toAffine().y,t.auditedBalance.R.toAffine().x,t.auditedBalance.R.toAffine().y];return(0,o.compute_prefix)(s)}(m),_=(0,r.generateRandom)(),w=(0,r.generateRandom)(),E=(0,r.generateRandom)(),v=s.GENERATOR.multiplyUnsafe(_),A=s.GENERATOR.multiplyUnsafe(w).add(f.multiplyUnsafe(_)),T=s.GENERATOR.multiplyUnsafe(E),S=s.GENERATOR.multiplyUnsafe(w).add(c.multiplyUnsafe(E)),I=(0,r.compute_challenge)(b,[v,A,S,T]),k=(0,r.compute_s)(_,l,I),x=(0,r.compute_s)(E,y,I);return{inputs:m,proof:{Ax:v,AL0:A,AL1:S,AR1:T,sx:k,sb:(0,r.compute_s)(w,n,I),sr:x}}},e.verifyAudit=function(t,n){const o=(0,r.compute_challenge)(e.AUDIT_CAIRO_STRING,[n.Ax,n.AL0,n.AL1,n.AR1]),{L:a,R:c}=t.storedBalance,{L:u,R:l}=t.auditedBalance;return i.SameEncryptUnknownRandom._verify(a,c,u,l,s.GENERATOR,t.y,t.auditorPubKey,n.Ax,n.AL0,n.AL1,n.AR1,o,n.sb,n.sx,n.sr)};const r=n(6885),i=n(5356),s=n(9043),o=n(6783),a=n(227);e.AUDIT_CAIRO_STRING=418581342580n},6641(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FUND_CAIRO_STRING=void 0,e.proveFund=function(t,n,r,a,u,l){const d=t,h=s.GENERATOR.multiply(d),{L:f,R:p}=a,g=f.subtract(p.multiplyUnsafe(d)),y=s.GENERATOR.multiplyUnsafe(r);if(!g.equals(y))throw new Error("storedBalance is not an encryption of balance");const m={y:h,nonce:u,amount:n,prefix_data:l},b=c(m),{proof:{s:_,A:w}}=i.poe.prove(d,s.GENERATOR,b),E=(0,o.createCipherBalance)(h,n,e.FUND_CAIRO_STRING);return{inputs:m,proof:{sx:_,Ax:w},newBalance:{L:f.add(E.L),R:p.add(E.R)}}},e.verifyFund=function(t,e){const n=c(t),o=(0,r.compute_challenge)(n,[e.Ax]);if(0==i.poe._verify(t.y,s.GENERATOR,e.Ax,o,e.sx))throw new Error("verifyFund failed")};const r=n(6885),i=n(5356),s=n(9043),o=n(227),a=n(6783);function c(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.FUND_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.amount,t.nonce];return(0,a.compute_prefix)(s)}e.FUND_CAIRO_STRING=1718972004n},3496(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RAGEQUIT_CAIRO_STRING=void 0,e.proveRagequit=function(t,e,n,r,s,u){const l=t,d=i.GENERATOR.multiply(l),{L:h,R:f}=e,p=h.subtract(f.multiplyUnsafe(l)),g=i.GENERATOR.multiplyUnsafe(s);if(!p.equals(g))throw new Error("storedBalance is not an encryption of balance");const y={y:d,nonce:n,to:r,amount:s,currentBalance:e,prefix_data:u},m=c(y),b=(0,a.generateRandom)(),_=i.GENERATOR.multiply(b),w=f.multiplyUnsafe(b),E=(0,a.compute_challenge)(m,[_,w]);return{inputs:y,proof:{Ax:_,AR:w,sx:(0,a.compute_s)(b,l,E)},newBalance:(0,o.createCipherBalance)(d,0n,1n)}},e.verifyRagequit=function(t,e){const n=c(t),s=(0,a.compute_challenge)(n,[e.Ax,e.AR]);let o=r.poe._verify(t.y,i.GENERATOR,e.Ax,s,e.sx);if(0==o)throw new Error("error in poe y");const{L:u,R:l}=t.currentBalance,d=u.subtract(i.GENERATOR.multiply(t.amount));if(o=r.poe._verify(d,l,e.AR,s,e.sx),0==o)throw new Error("error in poe R")};const r=n(5356),i=n(9043),s=n(6783),o=n(227),a=n(6885);function c(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,o=[n,r,i,e.RAGEQUIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,t.currentBalance.L.toAffine().x,t.currentBalance.L.toAffine().y,t.currentBalance.R.toAffine().x,t.currentBalance.R.toAffine().y];return(0,s.compute_prefix)(o)}e.RAGEQUIT_CAIRO_STRING=8241982478457596276n},3373(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateRangeProof=function(t,e,n,s){const{inputs:o,proofs:a,r:c}=r.range.prove(t,e,i.GENERATOR,i.SECONDARY_GENERATOR,n,s),u=a.proofs.map(({prefix:t,...e})=>e);return{r:c,range:{commitments:o.commitments,proofs:u}}},e.verifyRangeProof=function(t,e,n){const s={g1:i.GENERATOR,g2:i.SECONDARY_GENERATOR,bit_size:e,commitments:t.commitments},o={proofs:t.proofs.map((t,e)=>({...t,prefix:n+BigInt(e)}))};return r.range.verify(s,o)};const r=n(5356),i=n(9043)},4499(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROLLOVER_CAIRO_STRING=void 0,e.proveRollover=function(t,e,n){const r=t,o={y:s.GENERATOR.multiply(r),nonce:e,prefix_data:n},c=a(o),{proof:{A:u,s:l}}=i.poe.prove(r,s.GENERATOR,c);return{inputs:o,proof:{Ax:u,sx:l}}},e.verifyRollover=function(t,e){const n=a(t),o=(0,r.compute_challenge)(n,[e.Ax]);if(0==i.poe._verify(t.y,s.GENERATOR,e.Ax,o,e.sx))throw new Error("verifyRollover failed")};const r=n(6885),i=n(5356),s=n(9043),o=n(6783);function a(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,s=[n,r,i,e.ROLLOVER_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce];return(0,o.compute_prefix)(s)}e.ROLLOVER_CAIRO_STRING=8245928655720965490n},9705(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSFER_CAIRO_STRING=void 0,e.proveTransfer=function(t,e,n,i,c,d,h,f){const p=t,g=o.GENERATOR.multiply(p),{L:y,R:m}=c,b=i,_=n-b,{randomness:w,total_random:E}=s.range.pregenerate_randomness(h),v=(0,u.createCipherBalance)(o.SECONDARY_GENERATOR,i,E),A=(0,u.createCipherBalance)(g,b,E),T=(0,u.createCipherBalance)(e,b,E),{randomness:S,total_random:I}=s.range.pregenerate_randomness(h),k={from:g,to:e,nonce:d,currentBalance:c,transferBalance:T,transferBalanceSelf:A,auxiliarCipher:v,auxiliarCipher2:(0,u.createCipherBalance)(o.SECONDARY_GENERATOR,_,I),bit_size:h,prefix_data:f},x=l(k),{r:B,range:R}=(0,a.generateRangeProof)(b,h,w,x);if(B!==E)throw new Error("random missmatch");const{r:C,range:O}=(0,a.generateRangeProof)(_,h,S,x);if(C!==I)throw new Error("random missmatch");const N=m.subtract(A.R),L=(0,r.generateRandom)(),D=(0,r.generateRandom)(),P=(0,r.generateRandom)(),U=(0,r.generateRandom)(),F=(0,r.generateRandom)(),V=o.GENERATOR.multiplyUnsafe(L),H=o.GENERATOR.multiplyUnsafe(P),M=o.GENERATOR.multiplyUnsafe(F),$=o.GENERATOR.multiplyUnsafe(D).add(g.multiplyUnsafe(P)),j=o.GENERATOR.multiplyUnsafe(D).add(e.multiplyUnsafe(P)),z=o.GENERATOR.multiplyUnsafe(D).add(o.SECONDARY_GENERATOR.multiplyUnsafe(P)),q=o.GENERATOR.multiplyUnsafe(U).add(N.multiplyUnsafe(L)),Y=o.GENERATOR.multiplyUnsafe(U).add(o.SECONDARY_GENERATOR.multiplyUnsafe(F)),K=[V,H,M,$,q,z,Y,j],G=(0,r.compute_challenge)(x,K),W=(0,r.compute_s)(L,p,G),Z=(0,r.compute_s)(D,b,G);return{inputs:k,proof:{A_x:V,A_r:H,A_r2:M,A_b:$,A_b2:q,A_v:z,A_v2:Y,A_bar:j,s_x:W,s_r:(0,r.compute_s)(P,B,G),s_b:Z,s_b2:(0,r.compute_s)(U,_,G),s_r2:(0,r.compute_s)(F,C,G),range:R,range2:O},newBalance:{L:y.subtract(A.L),R:m.subtract(A.R)}}},e.verifyTransfer=function(t,e){const n=t.bit_size,s=l(t),c=(0,r.compute_challenge)(s,[e.A_x,e.A_r,e.A_r2,e.A_b,e.A_b2,e.A_v,e.A_v2,e.A_bar]),{L:u,R:d}=t.currentBalance,{L:h,R:f}=t.transferBalanceSelf,{L:p,R:g}=t.transferBalance,{L:y,R:m}=t.auxiliarCipher,{L:b,R:_}=t.auxiliarCipher2;let w=i.poe._verify(t.from,o.GENERATOR,e.A_x,c,e.s_x);if(0==w)throw new Error("error in poe for y");let E={L1:h,R1:f,L2:p,R2:g,g:o.GENERATOR,y1:t.from,y2:t.to},v={AL1:e.A_b,AR1:e.A_r,AL2:e.A_bar,AR2:e.A_r,c,sb:e.s_b,sr1:e.s_r,sr2:e.s_r};if(w=i.SameEncrypt.verify(E,v),0==w)throw new Error("error SameEncryp");const A=(0,a.verifyRangeProof)(e.range,n,s);if(0==A)throw new Error("erro in range for V");if(!y.equals(A))throw new Error("V missmatch");let T={L:y,R:m,g1:o.GENERATOR,g2:o.SECONDARY_GENERATOR},S={AL:e.A_v,AR:e.A_r,c,sb:e.s_b,sr:e.s_r};if(w=i.ElGamal.verify(T,S),0==w)throw new Error("erro elGamalProof");const I=u.subtract(h),k=d.subtract(f),x=(0,a.verifyRangeProof)(e.range2,n,s);if(0==x)throw new Error("erro in range for V2");if(!b.equals(x))throw new Error("V2 missmatch");let B={L1:I,R1:k,L2:b,R2:_,g:o.GENERATOR,y1:t.from,y2:o.SECONDARY_GENERATOR},R={Ax:e.A_x,AL1:e.A_b2,AL2:e.A_v2,AR2:e.A_r2,c,sb:e.s_b2,sx:e.s_x,sr2:e.s_r2};if(w=i.SameEncryptUnknownRandom.verify(B,R),0==w)throw new Error("error in sameEncrypUnkownRandom")};const r=n(6885),i=n(5356),s=n(5356),o=n(9043),a=n(3373),c=n(6783),u=n(227);function l(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,{L:s,R:o}=t.currentBalance,{L:a,R:u}=t.transferBalanceSelf,{L:l,R:d}=t.transferBalance,{L:h,R:f}=t.auxiliarCipher,{L:p,R:g}=t.auxiliarCipher2,y=[n,r,i,e.TRANSFER_CAIRO_STRING,t.from.toAffine().x,t.from.toAffine().y,t.to.toAffine().x,t.to.toAffine().y,t.nonce,s.toAffine().x,s.toAffine().y,o.toAffine().x,o.toAffine().y,a.toAffine().x,a.toAffine().y,u.toAffine().x,u.toAffine().y,l.toAffine().x,l.toAffine().y,d.toAffine().x,d.toAffine().y,h.toAffine().x,h.toAffine().y,f.toAffine().x,f.toAffine().y,p.toAffine().x,p.toAffine().y,g.toAffine().x,g.toAffine().y];return(0,c.compute_prefix)(y)}e.TRANSFER_CAIRO_STRING=8390876182755042674n},7340(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WITHDRAW_CAIRO_STRING=void 0,e.proveWithdraw=function(t,n,i,c,d,h,f,p){const g=t,y=o.GENERATOR.multiply(g),{L:m,R:b}=d,_=m.subtract(b.multiplyUnsafe(g)),w=o.GENERATOR.multiplyUnsafe(n);if(!_.equals(w))throw new Error("storedBalance is not an encryption of balance");const E=n-i,{randomness:v,total_random:A}=s.range.pregenerate_randomness(f),T={y,nonce:h,currentBalance:d,to:c,amount:i,bit_size:f,auxiliarCipher:(0,u.createCipherBalance)(o.SECONDARY_GENERATOR,E,A),prefix_data:p},S=l(T),{r:I,range:k}=(0,a.generateRangeProof)(E,f,v,S);if(I!==A)throw new Error("random mismatch");const x=(0,r.generateRandom)(),B=(0,r.generateRandom)(),R=(0,r.generateRandom)(),C=o.GENERATOR.multiplyUnsafe(B),O=o.GENERATOR.multiplyUnsafe(R),N=o.GENERATOR.multiplyUnsafe(x).add(b.multiplyUnsafe(B)),L=o.GENERATOR.multiplyUnsafe(x).add(o.SECONDARY_GENERATOR.multiplyUnsafe(R)),D=(0,r.compute_challenge)(S,[C,O,N,L]),P=(0,r.compute_s)(x,E,D),U={A_x:C,A_r:O,A:N,A_v:L,sx:(0,r.compute_s)(B,g,D),sb:P,sr:(0,r.compute_s)(R,I,D),range:k},F=(0,u.createCipherBalance)(y,i,e.WITHDRAW_CAIRO_STRING);return{inputs:T,proof:U,newBalance:{L:m.subtract(F.L),R:b.subtract(F.R)}}},e.verifyWithdraw=function(t,e){const n=t.bit_size,s=l(t),c=(0,r.compute_challenge)(s,[e.A_x,e.A_r,e.A,e.A_v]);let{L:u,R:d}=t.currentBalance,{L:h,R:f}=t.auxiliarCipher;u=u.subtract(o.GENERATOR.multiply(t.amount));const p=(0,a.verifyRangeProof)(e.range,n,s);if(0==p)throw new Error("erro in range for V");if(!h.equals(p))throw new Error("V missmatch");let g={L1:u,R1:d,L2:h,R2:f,g:o.GENERATOR,y1:t.y,y2:o.SECONDARY_GENERATOR},y={Ax:e.A_x,AL1:e.A,AL2:e.A_v,AR2:e.A_r,c,sb:e.sb,sx:e.sx,sr2:e.sr};if(0==i.SameEncryptUnknownRandom.verify(g,y))throw new Error("error in SameEncrpyUnkownRandom")};const r=n(6885),i=n(5356),s=n(5356),o=n(9043),a=n(3373),c=n(6783),u=n(227);function l(t){const{chain_id:n,tongo_address:r,sender_address:i}=t.prefix_data,{L:s,R:o}=t.currentBalance,{L:a,R:u}=t.auxiliarCipher,l=[n,r,i,e.WITHDRAW_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,s.toAffine().x,s.toAffine().y,o.toAffine().x,o.toAffine().y,a.toAffine().x,a.toAffine().y,u.toAffine().x,u.toAffine().y];return(0,c.compute_prefix)(l)}e.WITHDRAW_CAIRO_STRING=8604536554778681719n},9889(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tongoAbi=void 0,e.tongoAbi=[{type:"impl",name:"TongoImpl",interface_name:"tongo::tongo::ITongo::ITongo"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::common::pubkey::PubKey",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"core::integer::u512",members:[{name:"limb0",type:"core::integer::u128"},{name:"limb1",type:"core::integer::u128"},{name:"limb2",type:"core::integer::u128"},{name:"limb3",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::aecipher::AEBalance",members:[{name:"ciphertext",type:"core::integer::u512"},{name:"nonce",type:"core::integer::u256"}]},{type:"struct",name:"tongo::structs::common::starkpoint::StarkPoint",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::fund::ProofOfFund",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::common::cipherbalance::CipherBalance",members:[{name:"L",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"R",type:"tongo::structs::common::starkpoint::StarkPoint"}]},{type:"struct",name:"tongo::structs::operations::audit::ProofOfAudit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::audit::Audit",members:[{name:"auditedBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::audit::ProofOfAudit"}]},{type:"enum",name:"core::option::Option::<tongo::structs::operations::audit::Audit>",variants:[{name:"Some",type:"tongo::structs::operations::audit::Audit"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::operations::fund::Fund",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::fund::ProofOfFund"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::structs::common::starkpoint::StarkPoint>"}]},{type:"struct",name:"tongo::verifier::range::bitProof",members:[{name:"A0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"c0",type:"core::felt252"},{name:"s0",type:"core::felt252"},{name:"s1",type:"core::felt252"}]},{type:"struct",name:"core::array::Span::<tongo::verifier::range::bitProof>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::verifier::range::Range",members:[{name:"commitments",type:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>"},{name:"proofs",type:"core::array::Span::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::structs::operations::withdraw::ProofOfWithdraw",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::withdraw::Withdraw",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::withdraw::ProofOfWithdraw"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::ragequit::ProofOfRagequit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::ragequit::Ragequit",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::ragequit::ProofOfRagequit"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::transfer::ProofOfTransfer",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_bar",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"s_x",type:"core::felt252"},{name:"s_r",type:"core::felt252"},{name:"s_b",type:"core::felt252"},{name:"s_b2",type:"core::felt252"},{name:"s_r2",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"},{name:"range2",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::transfer::Transfer",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"auxiliarCipher2",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::transfer::ProofOfTransfer"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"},{name:"auditPartTransfer",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::rollover::ProofOfRollOver",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::rollover::Rollover",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::rollover::ProofOfRollOver"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>",variants:[{name:"Some",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"None",type:"()"}]},{type:"enum",name:"core::option::Option::<tongo::structs::aecipher::AEBalance>",variants:[{name:"Some",type:"tongo::structs::aecipher::AEBalance"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::common::state::State",members:[{name:"balance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"pending",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"nonce",type:"core::integer::u64"},{name:"audit",type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"},{name:"ae_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"},{name:"ae_audit_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::pubkey::PubKey>",variants:[{name:"Some",type:"tongo::structs::common::pubkey::PubKey"},{name:"None",type:"()"}]},{type:"interface",name:"tongo::tongo::ITongo::ITongo",items:[{type:"function",name:"ERC20",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"get_rate",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"get_bit_size",inputs:[],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"get_owner",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"fund",inputs:[{name:"fund",type:"tongo::structs::operations::fund::Fund"}],outputs:[],state_mutability:"external"},{type:"function",name:"withdraw",inputs:[{name:"withdraw",type:"tongo::structs::operations::withdraw::Withdraw"}],outputs:[],state_mutability:"external"},{type:"function",name:"ragequit",inputs:[{name:"ragequit",type:"tongo::structs::operations::ragequit::Ragequit"}],outputs:[],state_mutability:"external"},{type:"function",name:"transfer",inputs:[{name:"transfer",type:"tongo::structs::operations::transfer::Transfer"}],outputs:[],state_mutability:"external"},{type:"function",name:"rollover",inputs:[{name:"rollover",type:"tongo::structs::operations::rollover::Rollover"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_pending",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_audit",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"}],state_mutability:"view"},{type:"function",name:"get_nonce",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"get_state",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::state::State"}],state_mutability:"view"},{type:"function",name:"auditor_key",inputs:[],outputs:[{type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}],state_mutability:"view"},{type:"function",name:"change_auditor_key",inputs:[{name:"new_auditor_key",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"ERC20",type:"core::starknet::contract_address::ContractAddress"},{name:"rate",type:"core::integer::u256"},{name:"bit_size",type:"core::integer::u32"},{name:"auditor_key",type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}]},{type:"event",name:"tongo::structs::events::TransferEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance",kind:"data"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::FundEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"}]},{type:"event",name:"tongo::structs::events::RolloverEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"rollovered",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::WithdrawEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::RagequitEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::BalanceDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::TransferDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::AuditorPubKeySet",kind:"struct",members:[{name:"keyNumber",type:"core::integer::u128",kind:"key"},{name:"AuditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"}]},{type:"event",name:"tongo::tongo::Tongo::Tongo::Event",kind:"enum",variants:[{name:"TransferEvent",type:"tongo::structs::events::TransferEvent",kind:"nested"},{name:"FundEvent",type:"tongo::structs::events::FundEvent",kind:"nested"},{name:"RolloverEvent",type:"tongo::structs::events::RolloverEvent",kind:"nested"},{name:"WithdrawEvent",type:"tongo::structs::events::WithdrawEvent",kind:"nested"},{name:"RagequitEvent",type:"tongo::structs::events::RagequitEvent",kind:"nested"},{name:"BalanceDeclared",type:"tongo::structs::events::BalanceDeclared",kind:"nested"},{name:"TransferDeclared",type:"tongo::structs::events::TransferDeclared",kind:"nested"},{name:"AuditorPubKeySet",type:"tongo::structs::events::AuditorPubKeySet",kind:"nested"}]}]},6783(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=void 0,e.createCipherBalance=function(t,e,n){if(0n===e)return{L:t.multiplyUnsafe(n),R:a.GENERATOR.multiplyUnsafe(n)};return{L:a.GENERATOR.multiply(e).add(t.multiplyUnsafe(n)),R:a.GENERATOR.multiplyUnsafe(n)}},e.compute_prefix=function(t){return(0,o.poseidonHashMany)(t)},e.starkPointToProjectivePoint=c,e.projectivePointToStarkPoint=u,e.derivePublicKey=function(t){return u(a.GENERATOR.multiply(t))},e.pubKeyAffineToHex=function(t){const e=c(t);return(0,s.bytesToHex)(e.toRawBytes(!0))},e.pubKeyAffineToBase58=function(t){const e=c(t);return i.base58.encode(e.toRawBytes(!0))},e.pubKeyBase58ToAffine=function(t){const n=i.base58.decode(t);return e.ProjectivePoint.fromHex((0,s.bytesToHex)(n))},e.pubKeyBase58ToHex=function(t){const e=i.base58.decode(t);return(0,s.bytesToHex)(e)},e.parseCipherBalance=function({L:t,R:e}){return{L:c(t),R:c(e)}};const r=n(6885),i=n(3203),s=n(9175),o=n(4246),a=n(9043);function c({x:t,y:n}){return new e.ProjectivePoint(BigInt(t),BigInt(n),1n)}function u(t){const e=t.toAffine();return{x:e.x,y:e.y}}e.ProjectivePoint=r.ProjectivePoint},227(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesOrNumToBigInt=function(t){return t instanceof Uint8Array?i.num.toBigInt("0x"+(0,r.bytesToHex)(t)):i.num.toBigInt(t)},e.isUint256=function(t){const e=t.low,n=t.high;return void 0!==e&&void 0!==n},e.castBigInt=function(t){return i.num.isBigNumberish(t)?i.num.toBigInt(t):i.uint256.uint256ToBN(t)},e.createCipherBalance=function(t,e,n){if(0n===e)return{L:t.multiplyUnsafe(n),R:s.GENERATOR.multiplyUnsafe(n)};return{L:s.GENERATOR.multiply(e).add(t.multiplyUnsafe(n)),R:s.GENERATOR.multiplyUnsafe(n)}},e.decipherBalance=function(t,e,n){const r=n.multiply(t);if(r.equals(e))return 0n;const i=e.subtract(r);let o=1n,a=s.GENERATOR;if(a.equals(i))return 1n;for(;o<2**32;)if(o+=1n,a=a.add(s.GENERATOR),a.equals(i))return o;throw new Error("Decription of Cipherbalance has failed")},e.assertBalance=function(t,e,n,r){const i=r.multiply(t);return n.subtract(i).equals(s.GENERATOR.multiplyUnsafe(e))},e.pubKeyFromSecret=function(t){return(0,o.projectivePointToStarkPoint)(s.GENERATOR.multiply(t))};const r=n(9175),i=n(5556),s=n(9043),o=n(6783)},7526(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,s=a(t),o=s[0],c=s[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),l=0,d=c>0?o-4:o;for(n=0;n<d;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(u(t,a,a+o>c?c:a+o));return 1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function u(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(c(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8287(t,e,n){"use strict";const r=n(7526),i=n(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=a(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return l(t),a(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(i)return r?-1:Y(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){let s,o=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===c)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){let n=!0;for(let r=0;r<c;r++)if(u(t,s+r)!==u(e,r)){n=!1;break}if(n)return s}return-1}function w(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(Z(r))return o;t[n+o]=r}return o}function E(t,e,n,r){return G(Y(e,t.length-n),t,n,r)}function v(t,e,n,r){return G(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return G(K(e),t,n,r)}function T(t,e,n,r){return G(function(t,e){let n,r,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=k));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return d(t)},c.allocUnsafeSlow=function(t){return d(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(W(e,Uint8Array))i+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,i){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0);const a=Math.min(s,o),u=this.slice(r,i),l=t.slice(e,n);for(let t=0;t<a;++t)if(u[t]!==l[t]){s=u[t],o=l[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return v(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function x(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=X[t[r]];return i}function C(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,i){$(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function D(t,e,n,r,i){$(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function P(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,s){return e=+e,n>>>=0,s||P(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,s){return e=+e,n>>>=0,s||P(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),c.prototype.readBigInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||N(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=J(function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=J(function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=J(function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=J(function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const s=c.isBuffer(t)?t:c.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};const V={};function H(t,e,n){V[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function M(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function $(t,e,n,r,i,s){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||z(e,t.length-(n+1))}(r,i,s)}function j(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,n){if(Math.floor(t)!==t)throw j(t,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),H("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=M(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);const q=/[^+/0-9A-Za-z-_]/g;function Y(t,e){let n;e=e||1/0;const r=t.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function K(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},251(t,e){e.read=function(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+d],d+=h,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=u}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,n,r,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+f]=255&o,f+=p,o/=256,u-=8);t[n+f-p]|=128*g}},1668(t,e,n){"use strict";const{Deflate:r,deflate:i,deflateRaw:s,gzip:o}=n(3303),{Inflate:a,inflate:c,inflateRaw:u,ungzip:l}=n(7083),d=n(9681);t.exports.Deflate=r,t.exports.deflate=i,t.exports.deflateRaw=s,t.exports.gzip=o,t.exports.Inflate=a,t.exports.inflate=c,t.exports.inflateRaw=u,t.exports.ungzip=l,t.exports.constants=d},3303(t,e,n){"use strict";const r=n(8411),i=n(9805),s=n(1996),o=n(4674),a=n(4442),c=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:m}=n(9681);function b(t){this.options=i.assign({level:g,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==f)throw new Error(o[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=r.deflateSetDictionary(this.strm,t),n!==f)throw new Error(o[n]);this._dict_set=!0}}function _(t,e){const n=new b(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize;let o,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?h:u,"string"==typeof t?n.input=s.string2buf(t):"[object ArrayBuffer]"===c.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===l||a===d)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=r.deflate(n,a),o===p)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=r.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===f;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===f&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=_,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,_(t,e)},t.exports.constants=n(9681)},7083(t,e,n){"use strict";const r=n(1447),i=n(9805),s=n(1996),o=n(4674),a=n(4442),c=n(7414),u=Object.prototype.toString,{Z_NO_FLUSH:l,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_MEM_ERROR:m}=n(9681);function b(t){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=r.inflateInit2(this.strm,e.windowBits);if(n!==h)throw new Error(o[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary),n!==h)))throw new Error(o[n])}function _(t,e){const n=new b(e);if(n.push(t),n.err)throw n.msg||o[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let a,c,b;if(this.ended)return!1;for(c=e===~~e?e:!0===e?d:l,"[object ArrayBuffer]"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=r.inflate(n,c),a===p&&o&&(a=r.inflateSetDictionary(n,o),a===h?a=r.inflate(n,c):a===y&&(a=p));n.avail_in>0&&a===f&&n.state.wrap>0&&0!==t[n.next_in];)r.inflateReset(n),a=r.inflate(n,c);switch(a){case g:case y:case p:case m:return this.onEnd(a),this.ended=!0,!1}if(b=n.avail_out,n.next_out&&(0===n.avail_out||a===f))if("string"===this.options.to){let t=s.utf8border(n.output,n.next_out),e=n.next_out-t,r=s.buf2string(n.output,t);n.next_out=e,n.avail_out=i-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==h||0!==b){if(a===f)return a=r.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=_,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.ungzip=_,t.exports.constants=n(9681)},9805(t){"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const r=n.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const n in r)e(r,n)&&(t[n]=r[n])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n}},1996(t){"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const n=new Uint8Array(256);for(let t=0;t<256;t++)n[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;n[254]=n[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},t.exports.buf2string=(t,r)=>{const i=r||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,r));let s,o;const a=new Array(2*i);for(o=0,s=0;s<i;){let e=t[s++];if(e<128){a[o++]=e;continue}let r=n[e];if(r>4)a[o++]=65533,s+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&s<i;)e=e<<6|63&t[s++],r--;r>1?a[o++]=65533:e<65536?a[o++]=e:(e-=65536,a[o++]=55296|e>>10&1023,a[o++]=56320|1023&e)}}return((t,n)=>{if(n<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let r="";for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return r})(a,o)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+n[t[r]]>e?r:e}},3269(t){"use strict";t.exports=(t,e,n,r)=>{let i=65535&t,s=t>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16}},9681(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823(t){"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());t.exports=(t,n,r,i)=>{const s=e,o=i+r;t^=-1;for(let e=i;e<o;e++)t=t>>>8^s[255&(t^n[e])];return-1^t}},8411(t,e,n){"use strict";const{_tr_init:r,_tr_stored_block:i,_tr_flush_block:s,_tr_tally:o,_tr_align:a}=n(3665),c=n(3269),u=n(4823),l=n(4674),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:g,Z_OK:y,Z_STREAM_END:m,Z_STREAM_ERROR:b,Z_DATA_ERROR:_,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:E,Z_FILTERED:v,Z_HUFFMAN_ONLY:A,Z_RLE:T,Z_FIXED:S,Z_DEFAULT_STRATEGY:I,Z_UNKNOWN:k,Z_DEFLATED:x}=n(9681),B=258,R=262,C=42,O=113,N=666,L=(t,e)=>(t.msg=l[e],e),D=t=>2*t-(t>4?9:0),P=t=>{let e=t.length;for(;--e>=0;)t[e]=0},U=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let F=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const V=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},H=(t,e)=>{s(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,V(t.strm)},M=(t,e)=>{t.pending_buf[t.pending++]=e},$=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},j=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=c(t.adler,e,i,n):2===t.state.wrap&&(t.adler=u(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},z=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-R?t.strstart-(t.w_size-R):0,u=t.window,l=t.w_mask,d=t.prev,h=t.strstart+B;let f=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+o]===p&&u[n+o-1]===f&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<h);if(r=B-(h-s),s=h-B,r>o){if(t.match_start=e,o=r,r>=a)break;f=u[s+o-1],p=u[s+o]}}}while((e=d[e&l])>c&&0!==--i);return o<=t.lookahead?o:t.lookahead},q=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-R)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),U(t),r+=e),0===t.strm.avail_in)break;if(n=j(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=F(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=F(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<R&&0!==t.strm.avail_in)},Y=(t,e)=>{let n,r,s,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,c=t.strm.avail_in;do{if(n=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>s&&(n=s),n<o&&(0===n&&e!==p||e===d||n!==r+t.strm.avail_in))break;a=e===p&&n===r+t.strm.avail_in?1:0,i(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,V(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(j(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return c-=t.strm.avail_in,c&&(c>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=c&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-c,t.strm.next_in),t.strstart),t.strstart+=c,t.insert+=c>t.w_size-t.insert?t.w_size-t.insert:c),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==d&&e!==p&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(j(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,o=s>t.w_size?t.w_size:s,r=t.strstart-t.block_start,(r>=o||(r||e===p)&&e!==d&&0===t.strm.avail_in&&r<=s)&&(n=r>s?s:r,a=e===p&&0===t.strm.avail_in&&n===r?1:0,i(t,t.block_start,n,a),t.block_start+=n,V(t.strm)),a?3:1)},K=(t,e)=>{let n,r;for(;;){if(t.lookahead<R){if(q(t),t.lookahead<R&&e===d)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-R&&(t.match_length=z(t,n)),t.match_length>=3)if(r=o(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=F(t,t.ins_h,t.window[t.strstart+1]);else r=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2},G=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<R){if(q(t),t.lookahead<R&&e===d)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-R&&(t.match_length=z(t,n),t.match_length<=5&&(t.strategy===v||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=o(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(H(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=o(t,0,t.window[t.strstart-1]),r&&H(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2};function W(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Z=[new W(0,0,0,0,Y),new W(4,4,8,4,K),new W(4,5,16,8,K),new W(4,6,32,32,K),new W(4,4,16,16,G),new W(8,16,32,32,G),new W(8,16,128,128,G),new W(8,32,128,256,G),new W(32,128,258,1024,G),new W(32,258,258,4096,G)];function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),P(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const J=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==C&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==O&&e.status!==N?1:0},Q=t=>{if(J(t))return L(t,b);t.total_in=t.total_out=0,t.data_type=k;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?C:O,t.adler=2===e.wrap?0:1,e.last_flush=-2,r(e),y},tt=t=>{const e=Q(t);var n;return e===y&&((n=t.state).window_size=2*n.w_size,P(n.head),n.max_lazy_match=Z[n.level].max_lazy,n.good_match=Z[n.level].good_length,n.nice_match=Z[n.level].nice_length,n.max_chain_length=Z[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},et=(t,e,n,r,i,s)=>{if(!t)return b;let o=1;if(e===E&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==x||r<8||r>15||e<0||e>9||s<0||s>S||8===r&&1!==o)return L(t,b);8===r&&(r=9);const a=new X;return t.state=a,a.strm=t,a.status=C,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=n,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,x,15,8,I),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=Q,t.exports.deflateSetHeader=(t,e)=>J(t)||2!==t.state.wrap?b:(t.state.gzhead=e,y),t.exports.deflate=(t,e)=>{if(J(t)||e>g||e<0)return t?L(t,b):b;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===N&&e!==p)return L(t,0===t.avail_out?w:b);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(V(t),0===t.avail_out)return n.last_flush=-1,y}else if(0===t.avail_in&&D(e)<=D(r)&&e!==p)return L(t,w);if(n.status===N&&0!==t.avail_in)return L(t,w);if(n.status===C&&0===n.wrap&&(n.status=O),n.status===C){let e=x+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=A||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,$(n,e),0!==n.strstart&&($(n,t.adler>>>16),$(n,65535&t.adler)),t.adler=1,n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y}if(57===n.status)if(t.adler=0,M(n,31),M(n,139),M(n,8),n.gzhead)M(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),M(n,255&n.gzhead.time),M(n,n.gzhead.time>>8&255),M(n,n.gzhead.time>>16&255),M(n,n.gzhead.time>>24&255),M(n,9===n.level?2:n.strategy>=A||n.level<2?4:0),M(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(M(n,255&n.gzhead.extra.length),M(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=u(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(M(n,0),M(n,0),M(n,0),M(n,0),M(n,0),M(n,9===n.level?2:n.strategy>=A||n.level<2?4:0),M(n,3),n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,V(t),0!==n.pending)return n.last_flush=-1,y;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=u(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,y;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,M(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=u(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=u(t.adler,n.pending_buf,n.pending-r,r)),V(t),0!==n.pending)return n.last_flush=-1,y;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,M(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=u(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(V(t),0!==n.pending))return n.last_flush=-1,y;M(n,255&t.adler),M(n,t.adler>>8&255),t.adler=0}if(n.status=O,V(t),0!==n.pending)return n.last_flush=-1,y}if(0!==t.avail_in||0!==n.lookahead||e!==d&&n.status!==N){let r=0===n.level?Y(n,e):n.strategy===A?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(q(t),0===t.lookahead)){if(e===d)return 1;break}if(t.match_length=0,n=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===T?((t,e)=>{let n,r,i,s;const a=t.window;for(;;){if(t.lookahead<=B){if(q(t),t.lookahead<=B&&e===d)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=t.strstart+B;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);t.match_length=B-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(n,e):Z[n.level].func(n,e);if(3!==r&&4!==r||(n.status=N),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),y;if(2===r&&(e===h?a(n):e!==g&&(i(n,0,0,!1),e===f&&(P(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),V(t),0===t.avail_out))return n.last_flush=-1,y}return e!==p?y:n.wrap<=0?m:(2===n.wrap?(M(n,255&t.adler),M(n,t.adler>>8&255),M(n,t.adler>>16&255),M(n,t.adler>>24&255),M(n,255&t.total_in),M(n,t.total_in>>8&255),M(n,t.total_in>>16&255),M(n,t.total_in>>24&255)):($(n,t.adler>>>16),$(n,65535&t.adler)),V(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?y:m)},t.exports.deflateEnd=t=>{if(J(t))return b;const e=t.state.status;return t.state=null,e===O?L(t,_):y},t.exports.deflateSetDictionary=(t,e)=>{let n=e.length;if(J(t))return b;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==C||r.lookahead)return b;if(1===i&&(t.adler=c(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(P(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,q(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=F(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,q(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,y},t.exports.deflateInfo="pako deflate (from Nodeca project)"},7414(t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293(t){"use strict";const e=16209;t.exports=function(t,n){let r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,b,_,w,E,v,A,T,S,I;const k=t.state;r=t.next_in,S=t.input,i=r+(t.avail_in-5),s=t.next_out,I=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),c=k.dmax,u=k.wsize,l=k.whave,d=k.wnext,h=k.window,f=k.hold,p=k.bits,g=k.lencode,y=k.distcode,m=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;t:do{p<15&&(f+=S[r++]<<p,p+=8,f+=S[r++]<<p,p+=8),_=g[f&m];e:for(;;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,0===w)I[s++]=65535&_;else{if(!(16&w)){if(64&w){if(32&w){k.mode=16191;break t}t.msg="invalid literal/length code",k.mode=e;break t}_=g[(65535&_)+(f&(1<<w)-1)];continue e}for(E=65535&_,w&=15,w&&(p<w&&(f+=S[r++]<<p,p+=8),E+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=S[r++]<<p,p+=8,f+=S[r++]<<p,p+=8),_=y[f&b];;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,16&w){if(v=65535&_,w&=15,p<w&&(f+=S[r++]<<p,p+=8,p<w&&(f+=S[r++]<<p,p+=8)),v+=f&(1<<w)-1,v>c){t.msg="invalid distance too far back",k.mode=e;break t}if(f>>>=w,p-=w,w=s-o,v>w){if(w=v-w,w>l&&k.sane){t.msg="invalid distance too far back",k.mode=e;break t}if(A=0,T=h,0===d){if(A+=u-w,w<E){E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}}else if(d<w){if(A+=u+d-w,w-=d,w<E){E-=w;do{I[s++]=h[A++]}while(--w);if(A=0,d<E){w=d,E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}}}else if(A+=d-w,w<E){E-=w;do{I[s++]=h[A++]}while(--w);A=s-v,T=I}for(;E>2;)I[s++]=T[A++],I[s++]=T[A++],I[s++]=T[A++],E-=3;E&&(I[s++]=T[A++],E>1&&(I[s++]=T[A++]))}else{A=s-v;do{I[s++]=I[A++],I[s++]=I[A++],I[s++]=I[A++],E-=3}while(E>2);E&&(I[s++]=I[A++],E>1&&(I[s++]=I[A++]))}break}if(64&w){t.msg="invalid distance code",k.mode=e;break t}_=y[(65535&_)+(f&(1<<w)-1)]}}break}}while(r<i&&s<a);E=p>>3,r-=E,p-=E<<3,f&=(1<<p)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<a?a-s+257:257-(s-a),k.hold=f,k.bits=p}},1447(t,e,n){"use strict";const r=n(3269),i=n(4823),s=n(7293),o=n(1998),{Z_FINISH:a,Z_BLOCK:c,Z_TREES:u,Z_OK:l,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:g,Z_BUF_ERROR:y,Z_DEFLATED:m}=n(9681),b=16180,_=16190,w=16191,E=16192,v=16194,A=16199,T=16200,S=16206,I=16209,k=16210,x=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const R=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<b||e.mode>16211?1:0},C=t=>{if(R(t))return f;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=b,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,l},O=t=>{if(R(t))return f;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,C(t)},N=(t,e)=>{let n;if(R(t))return f;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,O(t))},L=(t,e)=>{if(!t)return f;const n=new B;t.state=n,n.strm=t,n.window=null,n.mode=b;const r=N(t,e);return r!==l&&(t.state=null),r};let D,P,U=!0;const F=t=>{if(U){D=new Int32Array(512),P=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,D,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,P,0,t.work,{bits:5}),U=!1}t.lencode=D,t.lenbits=9,t.distcode=P,t.distbits=5},V=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};t.exports.inflateReset=O,t.exports.inflateReset2=N,t.exports.inflateResetKeep=C,t.exports.inflateInit=t=>L(t,15),t.exports.inflateInit2=L,t.exports.inflate=(t,e)=>{let n,B,C,O,N,L,D,P,U,H,M,$,j,z,q,Y,K,G,W,Z,X,J,Q=0;const tt=new Uint8Array(4);let et,nt;const rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(R(t)||!t.output||!t.input&&0!==t.avail_in)return f;n=t.state,n.mode===w&&(n.mode=E),N=t.next_out,C=t.output,D=t.avail_out,O=t.next_in,B=t.input,L=t.avail_in,P=n.hold,U=n.bits,H=L,M=D,J=l;t:for(;;)switch(n.mode){case b:if(0===n.wrap){n.mode=E;break}for(;U<16;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(2&n.wrap&&35615===P){0===n.wbits&&(n.wbits=15),n.check=0,tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0),P=0,U=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&P)<<8)+(P>>8))%31){t.msg="incorrect header check",n.mode=I;break}if((15&P)!==m){t.msg="unknown compression method",n.mode=I;break}if(P>>>=4,U-=4,X=8+(15&P),0===n.wbits&&(n.wbits=X),X>15||X>n.wbits){t.msg="invalid window size",n.mode=I;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&P?16189:w,P=0,U=0;break;case 16181:for(;U<16;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(n.flags=P,(255&n.flags)!==m){t.msg="unknown compression method",n.mode=I;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=I;break}n.head&&(n.head.text=P>>8&1),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0,n.mode=16182;case 16182:for(;U<32;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.head&&(n.head.time=P),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,tt[2]=P>>>16&255,tt[3]=P>>>24&255,n.check=i(n.check,tt,4,0)),P=0,U=0,n.mode=16183;case 16183:for(;U<16;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.head&&(n.head.xflags=255&P,n.head.os=P>>8),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0,n.mode=16184;case 16184:if(1024&n.flags){for(;U<16;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.length=P,n.head&&(n.head.extra_len=P),512&n.flags&&4&n.wrap&&(tt[0]=255&P,tt[1]=P>>>8&255,n.check=i(n.check,tt,2,0)),P=0,U=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&($=n.length,$>L&&($=L),$&&(n.head&&(X=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(B.subarray(O,O+$),X)),512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),L-=$,O+=$,n.length-=$),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===L)break t;$=0;do{X=B[O+$++],n.head&&X&&n.length<65536&&(n.head.name+=String.fromCharCode(X))}while(X&&$<L);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),L-=$,O+=$,X)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===L)break t;$=0;do{X=B[O+$++],n.head&&X&&n.length<65536&&(n.head.comment+=String.fromCharCode(X))}while(X&&$<L);if(512&n.flags&&4&n.wrap&&(n.check=i(n.check,B,$,O)),L-=$,O+=$,X)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;U<16;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(4&n.wrap&&P!==(65535&n.check)){t.msg="header crc mismatch",n.mode=I;break}P=0,U=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=w;break;case 16189:for(;U<32;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}t.adler=n.check=x(P),P=0,U=0,n.mode=_;case _:if(0===n.havedict)return t.next_out=N,t.avail_out=D,t.next_in=O,t.avail_in=L,n.hold=P,n.bits=U,h;t.adler=n.check=1,n.mode=w;case w:if(e===c||e===u)break t;case E:if(n.last){P>>>=7&U,U-=7&U,n.mode=S;break}for(;U<3;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}switch(n.last=1&P,P>>>=1,U-=1,3&P){case 0:n.mode=16193;break;case 1:if(F(n),n.mode=A,e===u){P>>>=2,U-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=I}P>>>=2,U-=2;break;case 16193:for(P>>>=7&U,U-=7&U;U<32;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if((65535&P)!=(P>>>16^65535)){t.msg="invalid stored block lengths",n.mode=I;break}if(n.length=65535&P,P=0,U=0,n.mode=v,e===u)break t;case v:n.mode=16195;case 16195:if($=n.length,$){if($>L&&($=L),$>D&&($=D),0===$)break t;C.set(B.subarray(O,O+$),N),L-=$,O+=$,D-=$,N+=$,n.length-=$;break}n.mode=w;break;case 16196:for(;U<14;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(n.nlen=257+(31&P),P>>>=5,U-=5,n.ndist=1+(31&P),P>>>=5,U-=5,n.ncode=4+(15&P),P>>>=4,U-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=I;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;U<3;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.lens[rt[n.have++]]=7&P,P>>>=3,U-=3}for(;n.have<19;)n.lens[rt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,et={bits:n.lenbits},J=o(0,n.lens,0,19,n.lencode,0,n.work,et),n.lenbits=et.bits,J){t.msg="invalid code lengths set",n.mode=I;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;Q=n.lencode[P&(1<<n.lenbits)-1],q=Q>>>24,Y=Q>>>16&255,K=65535&Q,!(q<=U);){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(K<16)P>>>=q,U-=q,n.lens[n.have++]=K;else{if(16===K){for(nt=q+2;U<nt;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(P>>>=q,U-=q,0===n.have){t.msg="invalid bit length repeat",n.mode=I;break}X=n.lens[n.have-1],$=3+(3&P),P>>>=2,U-=2}else if(17===K){for(nt=q+3;U<nt;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}P>>>=q,U-=q,X=0,$=3+(7&P),P>>>=3,U-=3}else{for(nt=q+7;U<nt;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}P>>>=q,U-=q,X=0,$=11+(127&P),P>>>=7,U-=7}if(n.have+$>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=I;break}for(;$--;)n.lens[n.have++]=X}}if(n.mode===I)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=I;break}if(n.lenbits=9,et={bits:n.lenbits},J=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,et),n.lenbits=et.bits,J){t.msg="invalid literal/lengths set",n.mode=I;break}if(n.distbits=6,n.distcode=n.distdyn,et={bits:n.distbits},J=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,et),n.distbits=et.bits,J){t.msg="invalid distances set",n.mode=I;break}if(n.mode=A,e===u)break t;case A:n.mode=T;case T:if(L>=6&&D>=258){t.next_out=N,t.avail_out=D,t.next_in=O,t.avail_in=L,n.hold=P,n.bits=U,s(t,M),N=t.next_out,C=t.output,D=t.avail_out,O=t.next_in,B=t.input,L=t.avail_in,P=n.hold,U=n.bits,n.mode===w&&(n.back=-1);break}for(n.back=0;Q=n.lencode[P&(1<<n.lenbits)-1],q=Q>>>24,Y=Q>>>16&255,K=65535&Q,!(q<=U);){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(Y&&!(240&Y)){for(G=q,W=Y,Z=K;Q=n.lencode[Z+((P&(1<<G+W)-1)>>G)],q=Q>>>24,Y=Q>>>16&255,K=65535&Q,!(G+q<=U);){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}P>>>=G,U-=G,n.back+=G}if(P>>>=q,U-=q,n.back+=q,n.length=K,0===Y){n.mode=16205;break}if(32&Y){n.back=-1,n.mode=w;break}if(64&Y){t.msg="invalid literal/length code",n.mode=I;break}n.extra=15&Y,n.mode=16201;case 16201:if(n.extra){for(nt=n.extra;U<nt;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.length+=P&(1<<n.extra)-1,P>>>=n.extra,U-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;Q=n.distcode[P&(1<<n.distbits)-1],q=Q>>>24,Y=Q>>>16&255,K=65535&Q,!(q<=U);){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(!(240&Y)){for(G=q,W=Y,Z=K;Q=n.distcode[Z+((P&(1<<G+W)-1)>>G)],q=Q>>>24,Y=Q>>>16&255,K=65535&Q,!(G+q<=U);){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}P>>>=G,U-=G,n.back+=G}if(P>>>=q,U-=q,n.back+=q,64&Y){t.msg="invalid distance code",n.mode=I;break}n.offset=K,n.extra=15&Y,n.mode=16203;case 16203:if(n.extra){for(nt=n.extra;U<nt;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}n.offset+=P&(1<<n.extra)-1,P>>>=n.extra,U-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=I;break}n.mode=16204;case 16204:if(0===D)break t;if($=M-D,n.offset>$){if($=n.offset-$,$>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=I;break}$>n.wnext?($-=n.wnext,j=n.wsize-$):j=n.wnext-$,$>n.length&&($=n.length),z=n.window}else z=C,j=N-n.offset,$=n.length;$>D&&($=D),D-=$,n.length-=$;do{C[N++]=z[j++]}while(--$);0===n.length&&(n.mode=T);break;case 16205:if(0===D)break t;C[N++]=n.length,D--,n.mode=T;break;case S:if(n.wrap){for(;U<32;){if(0===L)break t;L--,P|=B[O++]<<U,U+=8}if(M-=D,t.total_out+=M,n.total+=M,4&n.wrap&&M&&(t.adler=n.check=n.flags?i(n.check,C,M,N-M):r(n.check,C,M,N-M)),M=D,4&n.wrap&&(n.flags?P:x(P))!==n.check){t.msg="incorrect data check",n.mode=I;break}P=0,U=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;U<32;){if(0===L)break t;L--,P+=B[O++]<<U,U+=8}if(4&n.wrap&&P!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=I;break}P=0,U=0}n.mode=16208;case 16208:J=d;break t;case I:J=p;break t;case k:return g;default:return f}return t.next_out=N,t.avail_out=D,t.next_in=O,t.avail_in=L,n.hold=P,n.bits=U,(n.wsize||M!==t.avail_out&&n.mode<I&&(n.mode<S||e!==a))&&V(t,t.output,t.next_out,M-t.avail_out)?(n.mode=k,g):(H-=t.avail_in,M-=t.avail_out,t.total_in+=H,t.total_out+=M,n.total+=M,4&n.wrap&&M&&(t.adler=n.check=n.flags?i(n.check,C,M,t.next_out-M):r(n.check,C,M,t.next_out-M)),t.data_type=n.bits+(n.last?64:0)+(n.mode===w?128:0)+(n.mode===A||n.mode===v?256:0),(0===H&&0===M||e===a)&&J===l&&(J=y),J)},t.exports.inflateEnd=t=>{if(R(t))return f;let e=t.state;return e.window&&(e.window=null),t.state=null,l},t.exports.inflateGetHeader=(t,e)=>{if(R(t))return f;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,l):f},t.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let i,s,o;return R(t)?f:(i=t.state,0!==i.wrap&&i.mode!==_?f:i.mode===_&&(s=1,s=r(s,e,n,0),s!==i.check)?p:(o=V(t,e,n,n),o?(i.mode=k,g):(i.havedict=1,l)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},1998(t){"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,s,o,a,c,u,l,d)=>{const h=d.bits;let f,p,g,y,m,b,_=0,w=0,E=0,v=0,A=0,T=0,S=0,I=0,k=0,x=0,B=null;const R=new Uint16Array(16),C=new Uint16Array(16);let O,N,L,D=null;for(_=0;_<=15;_++)R[_]=0;for(w=0;w<a;w++)R[s[o+w]]++;for(A=h,v=15;v>=1&&0===R[v];v--);if(A>v&&(A=v),0===v)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(E=1;E<v&&0===R[E];E++);for(A<E&&(A=E),I=1,_=1;_<=15;_++)if(I<<=1,I-=R[_],I<0)return-1;if(I>0&&(0===t||1!==v))return-1;for(C[1]=0,_=1;_<15;_++)C[_+1]=C[_]+R[_];for(w=0;w<a;w++)0!==s[o+w]&&(l[C[s[o+w]]++]=w);if(0===t?(B=D=l,b=20):1===t?(B=e,D=n,b=257):(B=r,D=i,b=0),x=0,w=0,_=E,m=u,T=A,S=0,g=-1,k=1<<A,y=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){O=_-S,l[w]+1<b?(N=0,L=l[w]):l[w]>=b?(N=D[l[w]-b],L=B[l[w]-b]):(N=96,L=0),f=1<<_-S,p=1<<T,E=p;do{p-=f,c[m+(x>>S)+p]=O<<24|N<<16|L}while(0!==p);for(f=1<<_-1;x&f;)f>>=1;if(0!==f?(x&=f-1,x+=f):x=0,w++,0===--R[_]){if(_===v)break;_=s[o+l[w]]}if(_>A&&(x&y)!==g){for(0===S&&(S=A),m+=E,T=_-S,I=1<<T;T+S<v&&(I-=R[T+S],!(I<=0));)T++,I<<=1;if(k+=1<<T,1===t&&k>852||2===t&&k>592)return 1;g=x&y,c[g]=A<<24|T<<16|m-u}}return 0!==x&&(c[m+x]=_-S<<24|64<<16),d.bits=A,0}},4674(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665(t){"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);const a=new Array(60);e(a);const c=new Array(512);e(c);const u=new Array(256);e(u);const l=new Array(29);e(l);const d=new Array(30);function h(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let f,p,g;function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(d);const m=t=>t<256?c[t]:c[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},_=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},w=(t,e,n)=>{_(t,n[2*e],n[2*e+1])},E=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},v=(t,e,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=E(r[e]++,e))}},A=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},T=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},I=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&S(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!S(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},k=(t,e,i)=>{let s,o,a,c,h=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+h++],s+=(255&t.pending_buf[t.sym_buf+h++])<<8,o=t.pending_buf[t.sym_buf+h++],0===s?w(t,o,e):(a=u[o],w(t,a+256+1,e),c=n[a],0!==c&&(o-=l[a],_(t,o,c)),s--,a=m(s),w(t,a,i),c=r[a],0!==c&&(s-=d[a],_(t,s,c)))}while(h<t.sym_next);w(t,256,e)},x=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,n[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)I(t,n,o);c=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[2*c]=n[2*o]+n[2*a],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[2*o+1]=n[2*a+1]=c,t.heap[1]=c++,I(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,l,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],h=n[2*n[2*l+1]+1]+1,h>c&&(h=c,g++),n[2*l+1]=h,l>r||(t.bl_count[h]++,f=0,l>=a&&(f=o[l-a]),p=n[2*l],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[2*l+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(l=t.bl_count[h];0!==l;)d=t.heap[--u],d>r||(n[2*d+1]!==h&&(t.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),l--)}})(t,e),v(n,u,t.bl_count)},B=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<c&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},R=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<c&&i===o)){if(a<u)do{w(t,i,t.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(w(t,i,t.bl_tree),a--),w(t,16,t.bl_tree),_(t,a-3,2)):a<=10?(w(t,17,t.bl_tree),_(t,a-3,3)):(w(t,18,t.bl_tree),_(t,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}};let C=!1;const O=(t,e,n,r)=>{_(t,0+(r?1:0),3),T(t),b(t,n),b(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};t.exports._tr_init=t=>{C||((()=>{let t,e,s,y,m;const b=new Array(16);for(s=0,y=0;y<28;y++)for(l[y]=s,t=0;t<1<<n[y];t++)u[s++]=y;for(u[s-1]=y,m=0,y=0;y<16;y++)for(d[y]=m,t=0;t<1<<r[y];t++)c[m++]=y;for(m>>=7;y<30;y++)for(d[y]=m<<7,t=0;t<1<<r[y]-7;t++)c[256+m++]=y;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,b[8]++;for(;t<=255;)o[2*t+1]=9,t++,b[9]++;for(;t<=279;)o[2*t+1]=7,t++,b[7]++;for(;t<=287;)o[2*t+1]=8,t++,b[8]++;for(v(o,287,b),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=E(t,5);f=new h(o,n,257,286,15),p=new h(a,r,0,30,15),g=new h(new Array(0),i,0,19,7)})(),C=!0),t.l_desc=new y(t.dyn_ltree,f),t.d_desc=new y(t.dyn_dtree,p),t.bl_desc=new y(t.bl_tree,g),t.bi_buf=0,t.bi_valid=0,A(t)},t.exports._tr_stored_block=O,t.exports._tr_flush_block=(t,e,n,r)=>{let i,c,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),x(t,t.l_desc),x(t,t.d_desc),u=(t=>{let e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*s[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,c=t.static_len+3+7>>>3,c<=i&&(i=c)):i=c=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||c===i?(_(t,2+(r?1:0),3),k(t,o,a)):(_(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(_(t,e-257,5),_(t,n-1,5),_(t,r-4,4),i=0;i<r;i++)_(t,t.bl_tree[2*s[i]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),k(t,t.dyn_ltree,t.dyn_dtree)),A(t),r&&T(t)},t.exports._tr_tally=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(u[n]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{_(t,2,3),w(t,256,o),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},4442(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},6993(t,e,n){"use strict";n.r(e),n.d(e,{Mixin:()=>_,decorate:()=>b,hasMixin:()=>h,mix:()=>E,settings:()=>u});const r=(t,e,n=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let t of n)delete r[t];Object.defineProperties(t,r)},i=(t,e=[t])=>{const n=Object.getPrototypeOf(t);return null===n?e:i(n,[...e,n])},s=(t,e,n=[])=>{var s;const o=null!==(s=((...t)=>{if(0===t.length)return;let e;const n=t.map(t=>i(t));for(;n.every(t=>t.length>0);){const t=n.map(t=>t.pop()),r=t[0];if(!t.every(t=>t===r))break;e=r}return e})(...t))&&void 0!==s?s:Object.prototype,a=Object.create(o),c=i(o);for(let e of t){let t=i(e);for(let e=t.length-1;e>=0;e--){let i=t[e];-1===c.indexOf(i)&&(r(a,i,["constructor",...n]),c.push(i))}}return a.constructor=e,a},o=t=>t.filter((e,n)=>t.indexOf(e)==n),a=(t,e)=>{const n=e.map(t=>i(t));let r=0,s=!0;for(;s;){s=!1;for(let i=e.length-1;i>=0;i--){const e=n[i][r];if(null!=e&&(s=!0,null!=Object.getOwnPropertyDescriptor(e,t)))return n[i][0]}r++}},c=(t,e=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>e,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(e,n)=>Object.getOwnPropertyDescriptor(a(n,t)||{},n),defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has:(n,r)=>void 0!==a(r,t)||void 0!==e[r],get:(n,r)=>(a(r,t)||e)[r],set(e,n,r){const i=a(n,t);if(void 0===i)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return i[n]=r,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>t.map(Object.getOwnPropertyNames).reduce((t,e)=>e.concat(t.filter(t=>e.indexOf(t)<0)))}),u={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},l=new WeakMap,d=t=>l.get(t),h=(t,e)=>{if(t instanceof e)return!0;const n=t.constructor,r=new Set;let s=new Set;for(s.add(n);s.size>0;){if(s.has(e))return!0;s.forEach(t=>r.add(t));const t=new Set;s.forEach(e=>{var n;const o=null!==(n=l.get(e))&&void 0!==n?n:i(e.prototype).map(t=>t.constructor).filter(t=>null!==t);o&&o.forEach(e=>{r.has(e)||s.has(e)||t.add(e)})}),s=t}return!1},f=(t,e)=>{var n,r;const i=o([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),s={};for(let a of i)s[a]=o([...null!==(n=null==t?void 0:t[a])&&void 0!==n?n:[],...null!==(r=null==e?void 0:e[a])&&void 0!==r?r:[]]);return s},p=(t,e)=>{var n,r,i,s;return{property:f(null!==(n=null==t?void 0:t.property)&&void 0!==n?n:{},null!==(r=null==e?void 0:e.property)&&void 0!==r?r:{}),method:f(null!==(i=null==t?void 0:t.method)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.method)&&void 0!==s?s:{})}},g=(t,e)=>{var n,r,i,s,a,c;return{class:o([...null!==(n=null==t?void 0:t.class)&&void 0!==n?n:[],...null!==(r=null==e?void 0:e.class)&&void 0!==r?r:[]]),static:p(null!==(i=null==t?void 0:t.static)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.static)&&void 0!==s?s:{}),instance:p(null!==(a=null==t?void 0:t.instance)&&void 0!==a?a:{},null!==(c=null==e?void 0:e.instance)&&void 0!==c?c:{})}},y=new Map,m=t=>{let e=y.get(t);return e||(e={},y.set(t,e)),e},b=t=>(...e)=>1===e.length?(t=>e=>{const n=m(e);let r=n.class;return r||(r=[],n.class=r),r.push(t),t(e)})(t)(e[0]):(t=>(e,n,...r)=>{var i,s,o;const a="function"==typeof e?"static":"instance",c="function"==typeof e[n]?"method":"property",u="static"===a?e:e.constructor,l=m(u),d=null!==(i=null==l?void 0:l[a])&&void 0!==i?i:{};l[a]=d;let h=null!==(s=null==d?void 0:d[c])&&void 0!==s?s:{};d[c]=h;let f=null!==(o=null==h?void 0:h[n])&&void 0!==o?o:[];return h[n]=f,f.push(t),t(e,n,...r)})(t)(...e);function _(...t){var e,n,o;const a=t.map(t=>t.prototype),h=u.initFunction;if(null!==h){const t=a.map(t=>t[h]).filter(t=>"function"==typeof t),e=function(...e){for(let n of t)n.apply(this,e)},n={[h]:e};a.push(n)}function f(...e){for(const n of t)r(this,new n(...e));null!==h&&"function"==typeof this[h]&&this[h].apply(this,e)}var p,b;f.prototype="copy"===u.prototypeStrategy?s(a,f):(p=a,b=f,c([...p,{constructor:b}])),Object.setPrototypeOf(f,"copy"===u.staticsStrategy?s(t,null,["prototype"]):c(t,Function.prototype));let _=f;if("none"!==u.decoratorInheritance){const r="deep"===u.decoratorInheritance?((...t)=>{const e=((...t)=>{var e;const n=new Set,r=new Set([...t]);for(;r.size>0;)for(let t of r){const s=[...i(t.prototype).map(t=>t.constructor),...null!==(e=d(t))&&void 0!==e?e:[]].filter(t=>!n.has(t));for(let t of s)r.add(t);n.add(t),r.delete(t)}return[...n]})(...t).map(t=>y.get(t)).filter(t=>!!t);return 0==e.length?{}:1==e.length?e[0]:e.reduce((t,e)=>g(t,e))})(...t):((...t)=>{const e=t.map(t=>m(t));return 0===e.length?{}:1===e.length?e[0]:e.reduce((t,e)=>g(t,e))})(...t);for(let t of null!==(e=null==r?void 0:r.class)&&void 0!==e?e:[]){const e=t(_);e&&(_=e)}w(null!==(n=null==r?void 0:r.static)&&void 0!==n?n:{},_),w(null!==(o=null==r?void 0:r.instance)&&void 0!==o?o:{},_.prototype)}var E,v;return E=_,v=t,l.set(E,v),_}const w=(t,e)=>{const n=t.property,r=t.method;if(n)for(let t in n)for(let r of n[t])r(e,t);if(r)for(let t in r)for(let n of r[t])n(e,t,Object.getOwnPropertyDescriptor(e,t))},E=(...t)=>e=>{const n=_(...t.concat([e]));return Object.defineProperty(n,"name",{value:e.name,writable:!1}),n}},7374(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4401(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_RECEIVED=e.STATUS_REJECTED=e.STATUS_PENDING=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_PENDING="PENDING",e.STATUS_REJECTED="REJECTED",e.STATUS_RECEIVED="RECEIVED",e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,REJECTED:e.STATUS_REJECTED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PENDING:"pending"},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},2484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4637(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7066(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},571(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9884(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(n(798),e),e.CONTRACT=n(2484),i(n(4637),e),i(n(7374),e),i(n(6552),e),i(n(4401),e),i(n(7066),e),i(n(571),e)},798(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6552(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5319(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(n(9884),e),e.API=n(9884),i(n(6868),e),e.WALLET_API=n(6868),e.PAYMASTER_API=n(5206)},9528(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1067(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5206(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(8812),e),i(n(1067),e),i(n(9528),e),i(n(3674),e)},8812(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3674(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8861(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5670(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4329(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},53(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8655(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6868(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(4329),e),i(n(2780),e),i(n(8861),e),i(n(5670),e),i(n(9606),e),i(n(8655),e),i(n(53),e)},9606(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2780(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},569(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8472(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockStatus=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED=e.STATUS_CANDIDATE=e.STATUS_RECEIVED=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_RECEIVED="RECEIVED",e.STATUS_CANDIDATE="CANDIDATE",e.STATUS_PRE_CONFIRMED="PRE_CONFIRMED",e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED.toLowerCase(),e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,CANDIDATE:e.STATUS_CANDIDATE,PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED_LOWERCASE,L1_ACCEPTED:"l1_accepted"},e.EBlockStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},143(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1302(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3749(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9350(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4465(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(n(4827),e),e.CONTRACT=n(143),i(n(1302),e),i(n(569),e),i(n(8425),e),i(n(8472),e),i(n(3749),e),i(n(9350),e)},4827(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8425(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2066(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(n(4465),e),e.API=n(4465),i(n(5207),e),e.WALLET_API=n(5207),e.PAYMASTER_API=n(3247)},7511(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8312(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3247(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(5709),e),i(n(8312),e),i(n(7511),e),i(n(3063),e)},5709(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3063(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6112(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8943(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6362(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},3632(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2702(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5207(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(6362),e),i(n(3591),e),i(n(6112),e),i(n(8943),e),i(n(9365),e),i(n(2702),e),i(n(3632),e)},9365(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3591(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},7631(t,e){!function(t){"use strict";function e(t){return n.test(t)}const n=/^-?[0-9]+$/;function r(t){return i.test(t)}const i=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function s(t,n){if(e(t))return Number.isSafeInteger(Number.parseInt(t,10));const r=Number.parseFloat(t),i=String(r);if(t===i)return!0;const s=l(t),o=l(i);if(s===o)return!0;if(!0===n?.approx){const n=14;if(!e(t)&&o.length>=n&&s.startsWith(o.substring(0,n)))return!0}return!1}let o=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function a(t){if(s(t,{approx:!1}))return;if(e(t))return o.truncate_integer;const n=Number.parseFloat(t);return Number.isFinite(n)?0===n?o.underflow:o.truncate_float:o.overflow}function c(t){const e=t.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!e)throw new SyntaxError(`Invalid number: ${t}`);const n=e[1],r=e[2];let i=void 0!==e[4]?Number.parseInt(e[4],10):0;const s=r.indexOf(".");i+=-1!==s?s-1:r.length-1;const o=r.replace(".","").replace(/^0*/,t=>(i-=t.length,"")).replace(/0*$/,"");return o.length>0?{sign:n,digits:o,exponent:i}:{sign:n,digits:"0",exponent:i+1}}function u(t,e){if(t===e)return 0;const n=c(t),r=c(e),i="-"===n.sign?-1:1;return n.sign!==r.sign?"0"===n.digits&&"0"===r.digits?0:i:n.exponent!==r.exponent?n.exponent>r.exponent?i:n.exponent<r.exponent?-i:0:n.digits>r.digits?i:n.digits<r.digits?-i:0}function l(t){const{start:e,end:n}=d(t),r=t.substring(e,n),i=r.indexOf(".");return-1===i?r:r.substring(0,i)+r.substring(i+1)}function d(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let n=t.lastIndexOf("e");for(-1===n&&(n=t.lastIndexOf("E")),-1===n&&(n=t.length);("0"===t[n-1]||"."===t[n-1])&&n>e;)n--;return{start:e,end:n}}class h{isLosslessNumber=!0;constructor(t){if(!r(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=a(this.value);if(void 0===t||t===o.truncate_float)return Number.parseFloat(this.value);if(e(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function f(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}function p(t){return new h(t)}function g(t,e,n,r){return Array.isArray(n)?r.call(t,e,function(t,e){for(let n=0;n<t.length;n++)t[n]=g(t,String(n),t[n],e);return t}(n,r)):n&&"object"==typeof n&&!f(n)?r.call(t,e,function(t,e){for(const n of Object.keys(t)){const r=g(t,n,t[n],e);void 0!==r?t[n]=r:delete t[n]}return t}(n,r)):r.call(t,e,n)}function y(t){return t>=E&&t<=v||t>=A&&t<=S||t>=T&&t<=I}function m(t){return t>=E&&t<=v}function b(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,n)=>b(t,e[n])):!(!_(t)||!_(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(n=>b(t[n],e[n])))}function _(t){return"object"==typeof t&&null!==t}const w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},E=48,v=57,A=65,T=97,S=70,I=102,k=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;t.LosslessNumber=h,t.UnsafeNumberReason=o,t.compareLosslessNumber=function(t,e){return u(t.value,e.value)},t.compareNumber=u,t.config=function(t){throw new Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},t.getUnsafeNumberReason=a,t.isInteger=e,t.isLosslessNumber=f,t.isNumber=r,t.isSafeNumber=s,t.parse=function(t,e,n){const r="function"==typeof n?{parseNumber:n}:n,i=r?.parseNumber??p,s=r?.onDuplicateKey??function(t){let{key:e,position:n}=t;throw new SyntaxError(`Duplicate key '${e}' encountered at position ${n}`)};let o=0;const a=c();return function(t){if(void 0===t)throw new SyntaxError(`JSON value expected ${R()}`)}(a),function(){if(o<t.length)throw new SyntaxError(`Expected end of input ${R()}`)}(),e?function(t,e){return g({"":t},"",t,e)}(a,e):a;function c(){l();const e=d()??function(){const e=o;if(45===t.charCodeAt(o)&&(o++,A(e)),t.charCodeAt(o)===E)o++;else if((n=t.charCodeAt(o))>=49&&n<=v)for(o++;m(t.charCodeAt(o));)o++;var n;if(46===t.charCodeAt(o))for(o++,A(e);m(t.charCodeAt(o));)o++;if(101===t.charCodeAt(o)||69===t.charCodeAt(o))for(o++,45!==t.charCodeAt(o)&&43!==t.charCodeAt(o)||o++,A(e);m(t.charCodeAt(o));)o++;if(o>e)return i(t.slice(e,o))}()??function(){if(123===t.charCodeAt(o)){o++,l();const e={};let n=!0;for(;o<t.length&&125!==t.charCodeAt(o);){n?n=!1:(h(),l());const t=o,r=d();if(void 0===r)return void T();l(),f();const i=c();if(void 0===i)return void k();if(Object.prototype.hasOwnProperty.call(e,r)&&!b(i,e[r])){const n=s({key:r,position:t+1,oldValue:e[r],newValue:i});void 0!==n&&(e[r]=n)}else e[r]=i}return 125!==t.charCodeAt(o)&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${R()}`)}(),o++,e}}()??function(){if(91===t.charCodeAt(o)){o++,l();const e=[];let n=!0;for(;o<t.length&&93!==t.charCodeAt(o);){n?n=!1:h();const t=c();_(t),e.push(t)}return 93!==t.charCodeAt(o)&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${R()}`)}(),o++,e}}()??u("true",!0)??u("false",!1)??u("null",null);return l(),e}function u(e,n){if(t.slice(o,o+e.length)===e)return o+=e.length,n}function l(){for(;32===(e=t.charCodeAt(o))||10===e||9===e||13===e;)o++;var e}function d(){if(34===t.charCodeAt(o)){o++;let n="";for(;o<t.length&&34!==t.charCodeAt(o);){if(92===t.charCodeAt(o)){const e=t[o+1],r=w[e];void 0!==r?(n+=r,o++):"u"===e?y(t.charCodeAt(o+2))&&y(t.charCodeAt(o+3))&&y(t.charCodeAt(o+4))&&y(t.charCodeAt(o+5))?(n+=String.fromCharCode(Number.parseInt(t.slice(o+2,o+6),16)),o+=5):x(o):I(o)}else(e=t.charCodeAt(o))>=32&&e<=1114111?n+=t[o]:S(t[o]);o++}return function(){if(34!==t.charCodeAt(o))throw new SyntaxError(`End of string '"' expected ${R()}`)}(),o++,n}var e}function h(){if(44!==t.charCodeAt(o))throw new SyntaxError(`Comma ',' expected after value ${R()}`);o++}function f(){if(58!==t.charCodeAt(o))throw new SyntaxError(`Colon ':' expected after property name ${R()}`);o++}function _(t){if(void 0===t)throw new SyntaxError(`Array item expected ${R()}`)}function A(e){if(!m(t.charCodeAt(o))){const n=t.slice(e,o);throw new SyntaxError(`Invalid number '${n}', expecting a digit ${R()}`)}}function T(){throw new SyntaxError(`Quoted object key expected ${R()}`)}function S(t){throw new SyntaxError(`Invalid character '${t}' ${B()}`)}function I(e){const n=t.slice(e,e+2);throw new SyntaxError(`Invalid escape character '${n}' ${B()}`)}function k(){throw new SyntaxError(`Object value expected after ':' ${B()}`)}function x(e){const n=t.slice(e,e+6);throw new SyntaxError(`Invalid unicode character '${n}' ${B()}`)}function B(){return`at position ${o}`}function R(){return`${o<t.length?`but got '${t[o]}'`:"but reached end of input"} ${B()}`}},t.parseLosslessNumber=p,t.parseNumberAndBigInt=function(t){return e(t)?BigInt(t):Number.parseFloat(t)},t.reviveDate=function(t,e){return"string"==typeof e&&k.test(e)?new Date(e):e},t.splitNumber=c,t.stringify=function t(e,n,i,s){const o=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(i);return function e(c,u){if(Array.isArray(s)){const t=s.find(t=>t.test(c));if(t){const e=t.stringify(c);if("string"!=typeof e||!r(e))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${e})`);return e}}return"boolean"==typeof c||"number"==typeof c||"string"==typeof c||null===c||c instanceof Date||c instanceof Boolean||c instanceof Number||c instanceof String?JSON.stringify(c):c?.isLosslessNumber||"bigint"==typeof c?c.toString():Array.isArray(c)?function(t,r){if(0===t.length)return"[]";const i=o?r+o:void 0;let s=o?"[\n":"[";for(let r=0;r<t.length;r++){const a="function"==typeof n?n.call(t,String(r),t[r]):t[r];o&&(s+=i),s+=void 0!==a&&"function"!=typeof a?e(a,i):"null",r<t.length-1&&(s+=o?",\n":",")}return s+=o?`\n${r}]`:"]",s}(c,u):c&&"object"==typeof c?function(r,s){if("function"==typeof r.toJSON)return t(r.toJSON(),n,i,void 0);const c=Array.isArray(n)?n.map(String):Object.keys(r);if(0===c.length)return"{}";const u=o?s+o:void 0;let l=!0,d=o?"{\n":"{";for(const t of c){const i="function"==typeof n?n.call(r,t,r[t]):r[t];if(a(0,i)){l?l=!1:d+=o?",\n":",";const n=JSON.stringify(t);d+=o?`${u+n}: `:`${n}:`,d+=e(i,u)}}return d+=o?`\n${s}}`:"}",d}(c,u):void 0}("function"==typeof n?n.call({"":e},"",e):e,"");function a(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}},t.toLosslessNumber=function(t){if(function(t){const{start:e,end:n}=d(t),r=t.indexOf(".");return-1===r||r<e||r>n?n-e:n-e-1}(String(t))>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${t})`);if(Number.isNaN(t))throw new Error("Invalid number: NaN");if(!Number.isFinite(t))throw new Error(`Invalid number: ${t}`);return new h(String(t))},t.toSafeNumberOrThrow=function(t,e){const n=Number.parseFloat(t),r=a(t);if(!0===e?.approx?r&&r!==o.truncate_float:r){const e=r?.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${t}' would ${e} and become ${n}`)}return n}}(e)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t);var e={};n.r(e),n.d(e,{ABI_TYPE_CONSTRUCTOR:()=>C,ABI_TYPE_ENUM:()=>N,ABI_TYPE_FUNCTION:()=>R,ABI_TYPE_L1_HANDLER:()=>O,CALL_TYPE:()=>V,CONTRACT:()=>t,EBlockTag:()=>q,EDAMode:()=>K,EDataAvailabilityMode:()=>Y,ESimulationFlag:()=>M,ETransactionExecutionStatus:()=>z,ETransactionFinalityStatus:()=>j,ETransactionStatus:()=>$,ETransactionType:()=>H,ETransactionVersion:()=>G,ETransactionVersion2:()=>W,ETransactionVersion3:()=>Z,EVENT_ABI_TYPE:()=>B,L1_DA_MODE:()=>F,PRICE_UNIT_FRI:()=>U,PRICE_UNIT_WEI:()=>P,STATE_MUTABILITY_EXTERNAL:()=>D,STATE_MUTABILITY_VIEW:()=>L,STATUS_ACCEPTED_ON_L1:()=>m,STATUS_ACCEPTED_ON_L2:()=>y,STATUS_PENDING:()=>w,STATUS_RECEIVED:()=>v,STATUS_REJECTED:()=>E,STATUS_REVERTED:()=>_,STATUS_SUCCEEDED:()=>b,STRUCT_ABI_TYPE:()=>x,TXN_TYPE_DECLARE:()=>A,TXN_TYPE_DEPLOY:()=>T,TXN_TYPE_DEPLOY_ACCOUNT:()=>S,TXN_TYPE_INVOKE:()=>I,TXN_TYPE_L1_HANDLER:()=>k});var r={};n.r(r),n.d(r,{Permission:()=>X,TypedDataRevision:()=>J});var i={};n.r(i);var s={};n.r(s),n.d(s,{ABI_TYPE_CONSTRUCTOR:()=>C,ABI_TYPE_ENUM:()=>N,ABI_TYPE_FUNCTION:()=>R,ABI_TYPE_L1_HANDLER:()=>O,API:()=>e,CALL_TYPE:()=>V,CONTRACT:()=>t,EBlockTag:()=>q,EDAMode:()=>K,EDataAvailabilityMode:()=>Y,ESimulationFlag:()=>M,ETransactionExecutionStatus:()=>z,ETransactionFinalityStatus:()=>j,ETransactionStatus:()=>$,ETransactionType:()=>H,ETransactionVersion:()=>G,ETransactionVersion2:()=>W,ETransactionVersion3:()=>Z,EVENT_ABI_TYPE:()=>B,L1_DA_MODE:()=>F,PAYMASTER_API:()=>i,PRICE_UNIT_FRI:()=>U,PRICE_UNIT_WEI:()=>P,Permission:()=>X,STATE_MUTABILITY_EXTERNAL:()=>D,STATE_MUTABILITY_VIEW:()=>L,STATUS_ACCEPTED_ON_L1:()=>m,STATUS_ACCEPTED_ON_L2:()=>y,STATUS_PENDING:()=>w,STATUS_RECEIVED:()=>v,STATUS_REJECTED:()=>E,STATUS_REVERTED:()=>_,STATUS_SUCCEEDED:()=>b,STRUCT_ABI_TYPE:()=>x,TXN_TYPE_DECLARE:()=>A,TXN_TYPE_DEPLOY:()=>T,TXN_TYPE_DEPLOY_ACCOUNT:()=>S,TXN_TYPE_INVOKE:()=>I,TXN_TYPE_L1_HANDLER:()=>k,TypedDataRevision:()=>J,WALLET_API:()=>r});var o={};n.r(o);var a={};n.r(a),n.d(a,{ABI_TYPE_CONSTRUCTOR:()=>gt,ABI_TYPE_ENUM:()=>mt,ABI_TYPE_FUNCTION:()=>pt,ABI_TYPE_L1_HANDLER:()=>yt,CALL_TYPE:()=>At,CONTRACT:()=>o,EBlockStatus:()=>Rt,EBlockTag:()=>Bt,EDAMode:()=>Ot,EDataAvailabilityMode:()=>Ct,ESimulationFlag:()=>St,ETransactionExecutionStatus:()=>xt,ETransactionFinalityStatus:()=>kt,ETransactionStatus:()=>It,ETransactionType:()=>Tt,ETransactionVersion:()=>Nt,ETransactionVersion2:()=>Lt,ETransactionVersion3:()=>Dt,EVENT_ABI_TYPE:()=>ft,L1_DA_MODE:()=>vt,PRICE_UNIT_FRI:()=>Et,PRICE_UNIT_WEI:()=>wt,STATE_MUTABILITY_EXTERNAL:()=>_t,STATE_MUTABILITY_VIEW:()=>bt,STATUS_ACCEPTED_ON_L1:()=>tt,STATUS_ACCEPTED_ON_L2:()=>Q,STATUS_CANDIDATE:()=>it,STATUS_PRE_CONFIRMED:()=>st,STATUS_PRE_CONFIRMED_LOWERCASE:()=>ot,STATUS_RECEIVED:()=>rt,STATUS_REVERTED:()=>nt,STATUS_SUCCEEDED:()=>et,STRUCT_ABI_TYPE:()=>ht,TXN_TYPE_DECLARE:()=>at,TXN_TYPE_DEPLOY:()=>ct,TXN_TYPE_DEPLOY_ACCOUNT:()=>ut,TXN_TYPE_INVOKE:()=>lt,TXN_TYPE_L1_HANDLER:()=>dt});var c={};n.r(c),n.d(c,{Permission:()=>Pt,TypedDataRevision:()=>Ut});var u={};n.r(u);var l={};n.r(l),n.d(l,{ABI_TYPE_CONSTRUCTOR:()=>gt,ABI_TYPE_ENUM:()=>mt,ABI_TYPE_FUNCTION:()=>pt,ABI_TYPE_L1_HANDLER:()=>yt,API:()=>a,CALL_TYPE:()=>At,CONTRACT:()=>o,EBlockStatus:()=>Rt,EBlockTag:()=>Bt,EDAMode:()=>Ot,EDataAvailabilityMode:()=>Ct,ESimulationFlag:()=>St,ETransactionExecutionStatus:()=>xt,ETransactionFinalityStatus:()=>kt,ETransactionStatus:()=>It,ETransactionType:()=>Tt,ETransactionVersion:()=>Nt,ETransactionVersion2:()=>Lt,ETransactionVersion3:()=>Dt,EVENT_ABI_TYPE:()=>ft,L1_DA_MODE:()=>vt,PAYMASTER_API:()=>u,PRICE_UNIT_FRI:()=>Et,PRICE_UNIT_WEI:()=>wt,Permission:()=>Pt,STATE_MUTABILITY_EXTERNAL:()=>_t,STATE_MUTABILITY_VIEW:()=>bt,STATUS_ACCEPTED_ON_L1:()=>tt,STATUS_ACCEPTED_ON_L2:()=>Q,STATUS_CANDIDATE:()=>it,STATUS_PRE_CONFIRMED:()=>st,STATUS_PRE_CONFIRMED_LOWERCASE:()=>ot,STATUS_RECEIVED:()=>rt,STATUS_REVERTED:()=>nt,STATUS_SUCCEEDED:()=>et,STRUCT_ABI_TYPE:()=>ht,TXN_TYPE_DECLARE:()=>at,TXN_TYPE_DEPLOY:()=>ct,TXN_TYPE_DEPLOY_ACCOUNT:()=>ut,TXN_TYPE_INVOKE:()=>lt,TXN_TYPE_L1_HANDLER:()=>dt,TypedDataRevision:()=>Ut,WALLET_API:()=>c});var d={};n.r(d),n.d(d,{aK:()=>An,e8:()=>on,DO:()=>sn,dJ:()=>Tn,OG:()=>Sn,My:()=>cn,Ph:()=>pn,lX:()=>gn,Id:()=>wn,fg:()=>xn,qj:()=>_n,aT:()=>fn,ME:()=>ln,r4:()=>vn,aY:()=>rn,x:()=>Cn,lq:()=>yn,z:()=>mn,zW:()=>un,IV:()=>bn,Q5:()=>Rn});var h={};n.r(h),n.d(h,{poseidon:()=>ii,splitConstants:()=>ri,validateOpts:()=>ni});var f={};n.r(f),n.d(f,{DER:()=>mi,SWUFpSqrtRatio:()=>Si,mapToCurveSimpleSWU:()=>Ii,weierstrass:()=>Ti,weierstrassPoints:()=>Ai});var p={};n.r(p),n.d(p,{CURVE:()=>ts,Fp251:()=>Es,MAX_VALUE:()=>Mi,ProjectivePoint:()=>es,Signature:()=>ns,_poseidonMDS:()=>As,_starkCurve:()=>qi,computeHashOnElements:()=>ms,ethSigToPrivate:()=>cs,getAccountPath:()=>ls,getPublicKey:()=>Gi,getSharedSecret:()=>Wi,getStarkKey:()=>as,grindKey:()=>os,keccak:()=>_s,normalizePrivateKey:()=>Ki,pedersen:()=>ys,poseidonBasic:()=>Ss,poseidonCreate:()=>Is,poseidonHash:()=>xs,poseidonHashFunc:()=>Bs,poseidonHashMany:()=>Cs,poseidonHashSingle:()=>Rs,poseidonSmall:()=>ks,sign:()=>Ji,utils:()=>rs,verify:()=>Qi});var g=n(34);const y="ACCEPTED_ON_L2",m="ACCEPTED_ON_L1",b="SUCCEEDED",_="REVERTED",w="PENDING",E="REJECTED",v="RECEIVED",A="DECLARE",T="DEPLOY",S="DEPLOY_ACCOUNT",I="INVOKE",k="L1_HANDLER",x="struct",B="event",R="function",C="constructor",O="l1_handler",N="enum",L="view",D="external",P="WEI",U="FRI",F={BLOB:"BLOB",CALLDATA:"CALLDATA"},V={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},H={DECLARE:A,DEPLOY:T,DEPLOY_ACCOUNT:S,INVOKE:I,L1_HANDLER:k},M={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},$={RECEIVED:v,REJECTED:E,ACCEPTED_ON_L2:y,ACCEPTED_ON_L1:m},j={ACCEPTED_ON_L2:y,ACCEPTED_ON_L1:m},z={SUCCEEDED:b,REVERTED:_},q={LATEST:"latest",PENDING:"pending"},Y={L1:"L1",L2:"L2"},K={L1:0,L2:1},G={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},W={V0:G.V0,V1:G.V1,V2:G.V2,F0:G.F0,F1:G.F1,F2:G.F2},Z={V3:G.V3,F3:G.F3},X={ACCOUNTS:"accounts"},J={ACTIVE:"1",LEGACY:"0"},Q="ACCEPTED_ON_L2",tt="ACCEPTED_ON_L1",et="SUCCEEDED",nt="REVERTED",rt="RECEIVED",it="CANDIDATE",st="PRE_CONFIRMED",ot=st.toLowerCase(),at="DECLARE",ct="DEPLOY",ut="DEPLOY_ACCOUNT",lt="INVOKE",dt="L1_HANDLER",ht="struct",ft="event",pt="function",gt="constructor",yt="l1_handler",mt="enum",bt="view",_t="external",wt="WEI",Et="FRI",vt={BLOB:"BLOB",CALLDATA:"CALLDATA"},At={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Tt={DECLARE:at,DEPLOY:ct,DEPLOY_ACCOUNT:ut,INVOKE:lt,L1_HANDLER:dt},St={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},It={RECEIVED:rt,CANDIDATE:it,PRE_CONFIRMED:st,ACCEPTED_ON_L2:Q,ACCEPTED_ON_L1:tt},kt={PRE_CONFIRMED:st,ACCEPTED_ON_L2:Q,ACCEPTED_ON_L1:tt},xt={SUCCEEDED:et,REVERTED:nt},Bt={LATEST:"latest",PRE_CONFIRMED:ot,L1_ACCEPTED:"l1_accepted"},Rt={PRE_CONFIRMED:st,ACCEPTED_ON_L2:Q,ACCEPTED_ON_L1:tt},Ct={L1:"L1",L2:"L2"},Ot={L1:0,L2:1},Nt={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Lt={V0:Nt.V0,V1:Nt.V1,V2:Nt.V2,F0:Nt.F0,F1:Nt.F1,F2:Nt.F2},Dt={V3:Nt.V3,F3:Nt.F3},Pt={ACCOUNTS:"accounts"},Ut={ACTIVE:"1",LEGACY:"0"};function Ft(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Vt(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function Ht(t){if("function"!=typeof t)throw new Error("function expected");return!0}function Mt(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function $t(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function jt(t){if(!Array.isArray(t))throw new Error("array expected")}function zt(t,e){if(!Vt(!0,e))throw new Error(`${t}: array of strings expected`)}function qt(t,e){if(!Vt(!1,e))throw new Error(`${t}: array of numbers expected`)}function Yt(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map(t=>t.encode).reduceRight(n,e),decode:t.map(t=>t.decode).reduce(n,e)}}function Kt(t){const e="string"==typeof t?t.split(""):t,n=e.length;zt("alphabet",e);const r=new Map(e.map((t,e)=>[t,e]));return{encode:r=>(jt(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]})),decode:e=>(jt(e),e.map(e=>{Mt("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n}))}}function Gt(t=""){return Mt("join",t),{encode:e=>(zt("join.decode",e),e.join(t)),decode:e=>(Mt("join.decode",e),e.split(t))}}function Wt(t,e="="){return $t(t),Mt("padding",e),{encode(n){for(zt("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){zt("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Zt(t){return Ht(t),{encode:t=>t,decode:e=>t(e)}}function Xt(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(jt(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,t=>{if($t(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t}),o=s.length;for(;;){let t=0,a=!0;for(let i=r;i<o;i++){const o=s[i],c=e*t,u=c+o;if(!Number.isSafeInteger(u)||c/e!==t||u-o!==c)throw new Error("convertRadix: carry overflow");const l=u/n;t=u%n;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==u)throw new Error("convertRadix: carry overflow");a&&(d?a=!1:r=i)}if(i.push(t),a)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const Jt=(t,e)=>0===e?t:Jt(e,t%e),Qt=(t,e)=>t+(e-Jt(t,e)),te=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function ee(t,e,n,r){if(jt(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Qt(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Qt(e,n)}`);let i=0,s=0;const o=te[e],a=te[n]-1,c=[];for(const r of t){if($t(r),r>=o)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const t=te[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&a,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function ne(t,e=!1){if($t(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Qt(8,t)>32||Qt(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Ft(n))throw new Error("radix2.encode input should be Uint8Array");return ee(Array.from(n),8,t,!e)},decode:n=>(qt("radix2.decode",n),Uint8Array.from(ee(n,t,8,e)))}}function re(t){return Ht(t),function(...e){try{return t.apply(null,e)}catch(t){}}}Yt(ne(4),Kt("0123456789ABCDEF"),Gt("")),Yt(ne(5),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Wt(5),Gt(""));const ie=(Yt(ne(5),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Gt("")),Yt(ne(5),Kt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Wt(5),Gt("")),Yt(ne(5),Kt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Gt("")),Yt(ne(5),Kt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Gt(""),Zt(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Yt(ne(6),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Wt(6),Gt(""))),se=(Yt(ne(6),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Gt("")),Yt(ne(6),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Wt(6),Gt("")),Yt(ne(6),Kt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Gt("")),t=>{return Yt(($t(e=58),{encode:t=>{if(!Ft(t))throw new Error("radix.encode input should be Uint8Array");return Xt(Array.from(t),256,e)},decode:t=>(qt("radix.decode",t),Uint8Array.from(Xt(t,e,256)))}),Kt(t),Gt(""));var e}),oe=(se("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),se("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),se("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Yt(Kt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Gt(""))),ae=[996825010,642813549,513874426,1027748829,705979059];function ce(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<ae.length;t++)1==(e>>t&1)&&(n^=ae[t]);return n}function ue(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=ce(i)^n>>5}i=ce(i);for(let e=0;e<r;e++)i=ce(i)^31&t.charCodeAt(e);for(let t of e)i=ce(i)^t;for(let t=0;t<6;t++)i=ce(i);return i^=n,oe.encode(ee([i%te[30]],30,5,!1))}function le(t){const e="bech32"===t?1:734539939,n=ne(5),r=n.decode,i=n.encode,s=re(r);function o(t,n,r=90){Mt("bech32.encode prefix",t),Ft(n)&&(n=Array.from(n)),qt("bech32.encode",n);const i=t.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const o=t.toLowerCase(),a=ue(o,n,e);return`${o}1${oe.encode(n)}${a}`}function a(t,n=90){Mt("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),a=i.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const c=oe.decode(a).slice(0,-6),u=ue(o,c,e);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${t}: expected "${u}"`);return{prefix:o,words:c}}return{encode:o,decode:a,encodeFromBytes:function(t,e){return o(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:n}=a(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:re(a),fromWords:r,fromWordsUnsafe:s,toWords:i}}le("bech32"),le("bech32m");function de(t){return he.test(t)}Yt(ne(4),Kt("0123456789abcdef"),Gt(""),Zt(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}));const he=/^-?[0-9]+$/;function fe(t){return pe.test(t)}const pe=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;let ge=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function ye(t){const{start:e,end:n}=function(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let n=t.lastIndexOf("e");for(-1===n&&(n=t.lastIndexOf("E")),-1===n&&(n=t.length);("0"===t[n-1]||"."===t[n-1])&&n>e;)n--;return{start:e,end:n}}(t),r=t.substring(e,n),i=r.indexOf(".");return-1===i?r:r.substring(0,i)+r.substring(i+1)}class me{isLosslessNumber=!0;constructor(t){if(!fe(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=function(t){if(function(t){if(de(t))return Number.isSafeInteger(Number.parseInt(t,10));const e=Number.parseFloat(t),n=String(e);if(t===n)return!0;return ye(t)===ye(n)}(t))return;if(de(t))return ge.truncate_integer;const e=Number.parseFloat(t);return Number.isFinite(e)?0===e?ge.underflow:ge.truncate_float:ge.overflow}(this.value);if(void 0===t||t===ge.truncate_float)return Number.parseFloat(this.value);if(de(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function be(t){return new me(t)}function _e(t){return de(t)?BigInt(t):Number.parseFloat(t)}function we(t,e,n,r){return Array.isArray(n)?r.call(t,e,function(t,e){for(let n=0;n<t.length;n++)t[n]=we(t,String(n),t[n],e);return t}(n,r)):n&&"object"==typeof n&&!function(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}(n)?r.call(t,e,function(t,e){for(const n of Object.keys(t)){const r=we(t,n,t[n],e);void 0!==r?t[n]=r:delete t[n]}return t}(n,r)):r.call(t,e,n)}function Ee(t,e,n){const r="function"==typeof n?{parseNumber:n}:n,i=r?.parseNumber??be,s=r?.onDuplicateKey??function(t){let{key:e,position:n}=t;throw new SyntaxError(`Duplicate key '${e}' encountered at position ${n}`)};let o=0;const a=c();return function(t){if(void 0===t)throw new SyntaxError(`JSON value expected ${v()}`)}(a),function(){if(o<t.length)throw new SyntaxError(`Expected end of input ${v()}`)}(),e?function(t,e){return we({"":t},"",t,e)}(a,e):a;function c(){l();const e=d()??function(){const e=o;if(t.charCodeAt(o)===He&&(o++,g(e)),t.charCodeAt(o)===Me)o++;else if((n=t.charCodeAt(o))>=$e&&n<=je)for(o++;Te(t.charCodeAt(o));)o++;var n;if(t.charCodeAt(o)===qe)for(o++,g(e);Te(t.charCodeAt(o));)o++;if(t.charCodeAt(o)===Ze||t.charCodeAt(o)===We)for(o++,t.charCodeAt(o)!==He&&t.charCodeAt(o)!==Ve||o++,g(e);Te(t.charCodeAt(o));)o++;if(o>e)return i(t.slice(e,o))}()??function(){if(t.charCodeAt(o)===Re){o++,l();const e={};let n=!0;for(;o<t.length&&t.charCodeAt(o)!==Ce;){n?n=!1:(h(),l());const t=o,r=d();if(void 0===r)return void y();l(),f();const i=c();if(void 0===i)return void _();if(Object.prototype.hasOwnProperty.call(e,r)&&!Ie(i,e[r])){const n=s({key:r,position:t+1,oldValue:e[r],newValue:i});void 0!==n&&(e[r]=n)}else e[r]=i}return t.charCodeAt(o)!==Ce&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${v()}`)}(),o++,e}}()??function(){if(t.charCodeAt(o)===Oe){o++,l();const e=[];let n=!0;for(;o<t.length&&t.charCodeAt(o)!==Ne;){n?n=!1:h();const t=c();p(t),e.push(t)}return t.charCodeAt(o)!==Ne&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${v()}`)}(),o++,e}}()??u("true",!0)??u("false",!1)??u("null",null);return l(),e}function u(e,n){if(t.slice(o,o+e.length)===e)return o+=e.length,n}function l(){for(;ve(t.charCodeAt(o));)o++}function d(){if(t.charCodeAt(o)===Fe){o++;let e="";for(;o<t.length&&t.charCodeAt(o)!==Fe;){if(t.charCodeAt(o)===Be){const n=t[o+1],r=xe[n];void 0!==r?(e+=r,o++):"u"===n?Ae(t.charCodeAt(o+2))&&Ae(t.charCodeAt(o+3))&&Ae(t.charCodeAt(o+4))&&Ae(t.charCodeAt(o+5))?(e+=String.fromCharCode(Number.parseInt(t.slice(o+2,o+6),16)),o+=5):w(o):b(o)}else Se(t.charCodeAt(o))?e+=t[o]:m(t[o]);o++}return function(){if(t.charCodeAt(o)!==Fe)throw new SyntaxError(`End of string '"' expected ${v()}`)}(),o++,e}}function h(){if(t.charCodeAt(o)!==ze)throw new SyntaxError(`Comma ',' expected after value ${v()}`);o++}function f(){if(t.charCodeAt(o)!==Ye)throw new SyntaxError(`Colon ':' expected after property name ${v()}`);o++}function p(t){if(void 0===t)throw new SyntaxError(`Array item expected ${v()}`)}function g(e){if(!Te(t.charCodeAt(o))){const n=t.slice(e,o);throw new SyntaxError(`Invalid number '${n}', expecting a digit ${v()}`)}}function y(){throw new SyntaxError(`Quoted object key expected ${v()}`)}function m(t){throw new SyntaxError(`Invalid character '${t}' ${E()}`)}function b(e){const n=t.slice(e,e+2);throw new SyntaxError(`Invalid escape character '${n}' ${E()}`)}function _(){throw new SyntaxError(`Object value expected after ':' ${E()}`)}function w(e){const n=t.slice(e,e+6);throw new SyntaxError(`Invalid unicode character '${n}' ${E()}`)}function E(){return`at position ${o}`}function v(){return`${o<t.length?`but got '${t[o]}'`:"but reached end of input"} ${E()}`}}function ve(t){return t===Le||t===De||t===Pe||t===Ue}function Ae(t){return t>=Me&&t<=je||t>=Ke&&t<=Xe||t>=Ge&&t<=Je}function Te(t){return t>=Me&&t<=je}function Se(t){return t>=32&&t<=1114111}function Ie(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,n)=>Ie(t,e[n])):!(!ke(t)||!ke(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(n=>Ie(t[n],e[n])))}function ke(t){return"object"==typeof t&&null!==t}const xe={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Be=92,Re=123,Ce=125,Oe=91,Ne=93,Le=32,De=10,Pe=9,Ue=13,Fe=34,Ve=43,He=45,Me=48,$e=49,je=57,ze=44,qe=46,Ye=58,Ke=65,Ge=97,We=69,Ze=101,Xe=70,Je=102;function Qe(t,e,n,r){const i=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(n);return function t(o,a){if(Array.isArray(r)){const t=r.find(t=>t.test(o));if(t){const e=t.stringify(o);if("string"!=typeof e||!fe(e))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${e})`);return e}}return"boolean"==typeof o||"number"==typeof o||"string"==typeof o||null===o||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String?JSON.stringify(o):o?.isLosslessNumber||"bigint"==typeof o?o.toString():Array.isArray(o)?function(n,r){if(0===n.length)return"[]";const s=i?r+i:void 0;let o=i?"[\n":"[";for(let r=0;r<n.length;r++){const a="function"==typeof e?e.call(n,String(r),n[r]):n[r];i&&(o+=s),o+=void 0!==a&&"function"!=typeof a?t(a,s):"null",r<n.length-1&&(o+=i?",\n":",")}return o+=i?`\n${r}]`:"]",o}(o,a):o&&"object"==typeof o?function(r,o){if("function"==typeof r.toJSON)return Qe(r.toJSON(),e,n,void 0);const a=Array.isArray(e)?e.map(String):Object.keys(r);if(0===a.length)return"{}";const c=i?o+i:void 0;let u=!0,l=i?"{\n":"{";for(const n of a){const o="function"==typeof e?e.call(r,n,r[n]):r[n];if(s(0,o)){u?u=!1:l+=i?",\n":",";const e=JSON.stringify(n);l+=i?`${c+e}: `:`${e}:`,l+=t(o,c)}}return l+=i?`\n${o}}`:"}",l}(o,a):void 0}("function"==typeof e?e.call({"":t},"",t):t,"");function s(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}}const tn=BigInt(0),en=BigInt(1),nn=BigInt(2);function rn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function sn(t){if(!rn(t))throw new Error("Uint8Array expected")}function on(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const an=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cn(t){sn(t);let e="";for(let n=0;n<t.length;n++)e+=an[t[n]];return e}function un(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function ln(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?tn:BigInt("0x"+t)}const dn={_0:48,_9:57,A:65,F:70,a:97,f:102};function hn(t){return t>=dn._0&&t<=dn._9?t-dn._0:t>=dn.A&&t<=dn.F?t-(dn.A-10):t>=dn.a&&t<=dn.f?t-(dn.a-10):void 0}function fn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=hn(t.charCodeAt(i)),s=hn(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function pn(t){return ln(cn(t))}function gn(t){return sn(t),ln(cn(Uint8Array.from(t).reverse()))}function yn(t,e){return fn(t.toString(16).padStart(2*e,"0"))}function mn(t,e){return yn(t,e).reverse()}function bn(t){return fn(un(t))}function _n(t,e,n){let r;if("string"==typeof e)try{r=fn(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!rn(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function wn(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];sn(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const En=t=>"bigint"==typeof t&&tn<=t;function vn(t,e,n){return En(t)&&En(e)&&En(n)&&e<=t&&t<n}function An(t,e,n,r){if(!vn(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Tn(t){let e;for(e=0;t>tn;t>>=en,e+=1);return e}const Sn=t=>(nn<<BigInt(t-1))-en,In=t=>new Uint8Array(t),kn=t=>Uint8Array.from(t);function xn(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=In(t),i=In(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...t)=>n(i,r,...t),c=(t=In())=>{i=a(kn([0]),t),r=a(),0!==t.length&&(i=a(kn([1]),t),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return wn(...n)};return(t,e)=>{let n;for(o(),c(t);!(n=e(u()));)c();return o(),n}}const Bn={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||rn(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Rn(t,e,n={}){const r=(e,n,r)=>{const i=Bn[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}function Cn(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}}function On(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Nn(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ln(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Dn(t,e){Nn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Pn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Un=(t,e)=>t<<32-e|t>>>e,Fn=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),Vn=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function Hn(t){for(let e=0;e<t.length;e++)t[e]=Vn(t[e])}function Mn(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),Nn(t),t}class $n{clone(){return this._cloneInto()}}function jn(t){const e=e=>t().update(Mn(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const zn=(t,e,n)=>t&e^~t&n,qn=(t,e,n)=>t&e^t&n^e&n;class Yn extends $n{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Pn(this.buffer)}update(t){Ln(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Mn(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){const e=Pn(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ln(this),Dn(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Pn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Kn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wn=new Uint32Array(64);class Zn extends Yn{constructor(){super(64,32,8,!1),this.A=0|Gn[0],this.B=0|Gn[1],this.C=0|Gn[2],this.D=0|Gn[3],this.E=0|Gn[4],this.F=0|Gn[5],this.G=0|Gn[6],this.H=0|Gn[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Wn[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Wn[t-15],n=Wn[t-2],r=Un(e,7)^Un(e,18)^e>>>3,i=Un(n,17)^Un(n,19)^n>>>10;Wn[t]=i+Wn[t-7]+r+Wn[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(Un(o,6)^Un(o,11)^Un(o,25))+zn(o,a,c)+Kn[t]+Wn[t]|0,l=(Un(n,2)^Un(n,13)^Un(n,22))+qn(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Wn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Xn=jn(()=>new Zn);function Jn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qn(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function er(t,e){Qn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const nr=BigInt(2**32-1),rr=BigInt(32);function ir(t,e=!1){return e?{h:Number(t&nr),l:Number(t>>rr&nr)}:{h:0|Number(t>>rr&nr),l:0|Number(t&nr)}}function sr(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=ir(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const or=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ar=(t,e)=>t<<32-e|t>>>e,cr=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),ur=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function lr(t){for(let e=0;e<t.length;e++)t[e]=ur(t[e])}function dr(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function hr(t){return"string"==typeof t&&(t=dr(t)),Qn(t),t}class fr{clone(){return this._cloneInto()}}function pr(t){const e=e=>t().update(hr(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const gr=[],yr=[],mr=[],br=BigInt(0),_r=BigInt(1),wr=BigInt(2),Er=BigInt(7),vr=BigInt(256),Ar=BigInt(113);for(let t=0,e=_r,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],gr.push(2*(5*r+n)),yr.push((t+1)*(t+2)/2%64);let i=br;for(let t=0;t<7;t++)e=(e<<_r^(e>>Er)*Ar)%vr,e&wr&&(i^=_r<<(_r<<BigInt(t))-_r);mr.push(i)}const[Tr,Sr]=sr(mr,!0),Ir=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),kr=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class xr extends fr{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jn(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){cr||lr(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=Ir(s,o,1)^n[r],c=kr(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=yr[n],s=Ir(e,i,r),o=kr(e,i,r),a=gr[n];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=Tr[r],t[1]^=Sr[r]}n.fill(0)}(this.state32,this.rounds),cr||lr(this.state32),this.posOut=0,this.pos=0}update(t){tr(this);const{blockLen:e,state:n}=this,r=(t=hr(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){tr(this,!1),Qn(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Jn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(er(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new xr(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const Br=((t,e,n)=>pr(()=>new xr(e,t,n)))(1,136,32),Rr=(t,e,n)=>t&e^~t&n,Cr=(t,e,n)=>t&e^t&n^e&n;class Or extends fr{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=or(this.buffer)}update(t){tr(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=hr(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){const e=or(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){tr(this),er(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=or(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Nr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dr=new Uint32Array(64);class Pr extends Or{constructor(){super(64,32,8,!1),this.A=0|Lr[0],this.B=0|Lr[1],this.C=0|Lr[2],this.D=0|Lr[3],this.E=0|Lr[4],this.F=0|Lr[5],this.G=0|Lr[6],this.H=0|Lr[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Dr[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Dr[t-15],n=Dr[t-2],r=ar(e,7)^ar(e,18)^e>>>3,i=ar(n,17)^ar(n,19)^n>>>10;Dr[t]=i+Dr[t-7]+r+Dr[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(ar(o,6)^ar(o,11)^ar(o,25))+Rr(o,a,c)+Nr[t]+Dr[t]|0,l=(ar(n,2)^ar(n,13)^ar(n,22))+Cr(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Dr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ur=pr(()=>new Pr),Fr=BigInt(0),Vr=BigInt(1),Hr=BigInt(2),Mr=BigInt(3),$r=BigInt(4),jr=BigInt(5),zr=BigInt(8);function qr(t,e){const n=t%e;return n>=Fr?n:e+n}function Yr(t,e,n){if(e<Fr)throw new Error("invalid exponent, negatives unsupported");if(n<=Fr)throw new Error("invalid modulus");if(n===Vr)return Fr;let r=Vr;for(;e>Fr;)e&Vr&&(r=r*t%n),t=t*t%n,e>>=Vr;return r}function Kr(t,e,n){let r=t;for(;e-- >Fr;)r*=r,r%=n;return r}function Gr(t,e){if(t===Fr)throw new Error("invert: expected non-zero number");if(e<=Fr)throw new Error("invert: expected positive modulus, got "+e);let n=qr(t,e),r=e,i=Fr,s=Vr,o=Vr,a=Fr;for(;n!==Fr;){const t=r/n,e=r%n,c=i-o*t,u=s-a*t;r=n,n=e,i=o,s=a,o=c,a=u}if(r!==Vr)throw new Error("invert: does not exist");return qr(i,e)}const Wr=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zr(t){return Rn(t,Wr.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function Xr(t,e,n){if(n<Fr)throw new Error("invalid exponent, negatives unsupported");if(n===Fr)return t.ONE;if(n===Vr)return e;let r=t.ONE,i=e;for(;n>Fr;)n&Vr&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Vr;return r}function Jr(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Qr(t,e,n=!1,r={}){if(t<=Fr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Jr(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Sn(i),ZERO:Fr,ONE:Vr,create:e=>qr(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return Fr<=e&&e<t},is0:t=>t===Fr,isOdd:t=>(t&Vr)===Vr,neg:e=>qr(-e,t),eql:(t,e)=>t===e,sqr:e=>qr(e*e,t),add:(e,n)=>qr(e+n,t),sub:(e,n)=>qr(e-n,t),mul:(e,n)=>qr(e*n,t),pow:(t,e)=>Xr(a,t,e),div:(e,n)=>qr(e*Gr(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Gr(e,t),sqrt:r.sqrt||(e=>(o||(o=function(t){if(t%$r===Mr){const e=(t+Vr)/$r;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%zr===jr){const e=(t-jr)/zr;return function(t,n){const r=t.mul(n,Hr),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,Hr),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Vr)/Hr;let n,r,i;for(n=t-Vr,r=0;n%Hr===Fr;n/=Hr,r++);for(i=Hr;i<t&&Yr(i,e,t)!==t-Vr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+Vr)/$r;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+Vr)/Hr;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(o,s),l=t.pow(o,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(l);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,Vr<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}(t)}(t)),o(a,e))),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r)),t.ONE),i=t.inv(r);return e.reduceRight((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r)),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?mn(t,s):yn(t,s),fromBytes:t=>{if(t.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+t.length);return n?gn(t):pn(t)}});return Object.freeze(a)}function ti(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ei(t){const e=ti(t);return e+Math.ceil(e/2)}function ni(t){const{Fp:e,mds:n,reversePartialPowIdx:r,roundConstants:i}=t,{roundsFull:s,roundsPartial:o,sboxPower:a,t:c}=t;Zr(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==c)throw new Error("Poseidon: invalid MDS matrix");const u=n.map(t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==r&&"boolean"!=typeof r)throw new Error("invalid param reversePartialPowIdx="+r);if(1&s)throw new Error("roundsFull is not even"+s);const l=s+o;if(!Array.isArray(i)||i.length!==l)throw new Error("Poseidon: invalid round constants");const d=i.map(t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!a||![3,5,7].includes(a))throw new Error("invalid sboxPower");const h=BigInt(a);let f=t=>Xr(e,t,h);return 3===a?f=t=>e.mul(e.sqrN(t),t):5===a&&(f=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:l,sboxFn:f,roundConstants:d,mds:u})}function ri(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n}function ii(t){const e=ni(t),{Fp:n,mds:r,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:a,t:c}=e,u=e.roundsFull/2,l=e.reversePartialPowIdx?c-1:0,d=(t,e,s)=>(t=t.map((t,e)=>n.add(t,i[s][e])),e?t=t.map(t=>a(t)):t[l]=a(t[l]),t=r.map(e=>e.reduce((e,r,i)=>n.add(e,n.mulN(r,t[i])),n.ZERO))),h=function(t){if(!Array.isArray(t)||t.length!==c)throw new Error("invalid values, expected array of bigints with length "+c);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)});let e=0;for(let n=0;n<u;n++)t=d(t,!0,e++);for(let n=0;n<o;n++)t=d(t,!1,e++);for(let n=0;n<u;n++)t=d(t,!0,e++);if(e!==s)throw new Error("invalid number of rounds");return t};return h.roundConstants=i,h}const si=BigInt(0),oi=BigInt(1);function ai(t,e){const n=e.negate();return t?n:e}function ci(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ui(t,e){return ci(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const li=new WeakMap,di=new WeakMap;function hi(t){return di.get(t)||1}function fi(t){return Zr(t.Fp),Rn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Jr(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function pi(t){void 0!==t.lowS&&on("lowS",t.lowS),void 0!==t.prehash&&on("prehash",t.prehash)}const{Ph:gi,aT:yi}=d,mi={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:n}=mi;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=un(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?un(i.length/2|128):"";return un(t)+s+i+e},decode(t,e){const{Err:n}=mi;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const o=e.subarray(r,r+t);if(o.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=mi;if(t<bi)throw new e("integer: negative integers are not allowed");let n=un(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=mi;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return gi(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=mi,i="string"==typeof t?yi(t):t;sn(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=mi,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},bi=BigInt(0),_i=BigInt(1),wi=BigInt(2),Ei=BigInt(3),vi=BigInt(4);function Ai(t){const e=function(t){const e=fi(t);Rn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=Qr(e.n,e.nBitLength),i=e.toBytes||((t,e,r)=>{const i=e.toAffine();return wn(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,s=n.sqr(t),o=n.mul(s,t);return n.add(n.add(o,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=e;if(n&&"bigint"!=typeof t){if(rn(t)&&(t=cn(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let o;try{o="bigint"==typeof t?t:pn(_n("private key",t,r))}catch(e){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return i&&(o=qr(o,s)),An("private key",o,_i,s),o}function c(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}const u=Cn((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const o=t.is0();null==e&&(e=o?n.ONE:n.inv(s));const a=n.mul(r,e),c=n.mul(i,e),u=n.mul(s,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),l=Cn(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=o(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?d.ZERO:new d(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map(t=>t.pz));return t.map((t,n)=>t.toAffine(e[n])).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s(_n("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(a(t))}static msm(t,e){return function(t,e,n,r){if(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Tn(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){c.fill(i);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(a));c[s]=c[s].add(n[e])}let e=i;for(let t=c.length-1,n=i;t>0;t--)n=n.add(c[t]),e=e.add(n);if(u=u.add(e),0!==t)for(let t=0;t<o;t++)u=u.double()}return u}(d,r,t,e)}_setWindowSize(t){f.setWindowSize(this,t)}assertValidity(){l(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){c(t);const{px:e,py:r,pz:i}=this,{px:s,py:o,pz:a}=t,u=n.eql(n.mul(e,a),n.mul(s,i)),l=n.eql(n.mul(r,a),n.mul(o,i));return u&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,Ei),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),l=n.mul(s,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(h,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(h,h),h=n.add(l,h),h=n.add(h,p),h=n.mul(h,g),u=n.add(u,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,g),c=n.sub(c,h),l=n.mul(p,f),l=n.add(l,l),l=n.add(l,l),new d(c,u,l)}add(t){c(t);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=t;let l=n.ZERO,h=n.ZERO,f=n.ZERO;const p=e.a,g=n.mul(e.b,Ei);let y=n.mul(r,o),m=n.mul(i,a),b=n.mul(s,u),_=n.add(r,i),w=n.add(o,a);_=n.mul(_,w),w=n.add(y,m),_=n.sub(_,w),w=n.add(r,s);let E=n.add(o,u);return w=n.mul(w,E),E=n.add(y,b),w=n.sub(w,E),E=n.add(i,s),l=n.add(a,u),E=n.mul(E,l),l=n.add(m,b),E=n.sub(E,l),f=n.mul(p,w),l=n.mul(g,b),f=n.add(l,f),l=n.sub(m,f),f=n.add(m,f),h=n.mul(l,f),m=n.add(y,y),m=n.add(m,y),b=n.mul(p,b),w=n.mul(g,w),m=n.add(m,b),b=n.sub(y,b),b=n.mul(p,b),w=n.add(w,b),y=n.mul(m,w),h=n.add(h,y),y=n.mul(E,w),l=n.mul(_,l),l=n.sub(l,y),y=n.mul(_,m),f=n.mul(E,f),f=n.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,t,d.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:i}=e;An("scalar",t,bi,i);const s=d.ZERO;if(t===bi)return s;if(this.is0()||t===_i)return this;if(!r||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,t,d.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(t),l=s,h=s,p=this;for(;a>bi||u>bi;)a&_i&&(l=l.add(p)),u&_i&&(h=h.add(p)),p=p.double(),a>>=_i,u>>=_i;return o&&(l=l.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,r.beta),h.py,h.pz),l.add(h)}multiply(t){const{endo:r,n:i}=e;let s,o;if(An("scalar",t,_i,i),r){const{k1neg:e,k1:i,k2neg:a,k2:c}=r.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:h,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,r.beta),h.py,h.pz),s=u.add(h),o=l.add(p)}else{const{p:e,f:n}=this.wNAF(t);s=e,o=n}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,n){const r=d.BASE,i=(t,e)=>e!==bi&&e!==_i&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return u(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===_i)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===_i?this:n?n(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return on("isCompressed",t),this.assertValidity(),i(d,this,t)}toHex(t=!0){return on("isCompressed",t),cn(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=(p=d,g=e.endo?Math.ceil(h/2):h,{constTimeNegate:ai,hasPrecomputes:t=>1!==hi(t),unsafeLadder(t,e,n=p.ZERO){let r=t;for(;e>si;)e&oi&&(n=n.add(r)),r=r.double(),e>>=oi;return n},precomputeWindow(t,e){const{windows:n,windowSize:r}=ui(e,g),i=[];let s=t,o=s;for(let t=0;t<n;t++){o=s,i.push(o);for(let t=1;t<r;t++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(t,e,n){const{windows:r,windowSize:i}=ui(t,g);let s=p.ZERO,o=p.BASE;const a=BigInt(2**t-1),c=2**t,u=BigInt(t);for(let t=0;t<r;t++){const r=t*i;let l=Number(n&a);n>>=u,l>i&&(l-=c,n+=oi);const d=r,h=r+Math.abs(l)-1,f=t%2!=0,p=l<0;0===l?o=o.add(ai(f,e[d])):s=s.add(ai(p,e[h]))}return{p:s,f:o}},wNAFUnsafe(t,e,n,r=p.ZERO){const{windows:i,windowSize:s}=ui(t,g),o=BigInt(2**t-1),a=2**t,c=BigInt(t);for(let t=0;t<i;t++){const i=t*s;if(n===si)break;let u=Number(n&o);if(n>>=c,u>s&&(u-=a,n+=oi),0===u)continue;let l=e[i+Math.abs(u)-1];u<0&&(l=l.negate()),r=r.add(l)}return r},getPrecomputes(t,e,n){let r=li.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&li.set(e,n(r))),r},wNAFCached(t,e,n){const r=hi(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=hi(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,e){ci(e,g),di.set(t,e),li.delete(t)}});var p,g;return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(t){return vn(t,_i,e.n)}}}function Ti(t){const e=function(t){const e=fi(t);return Rn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(t){return qr(t,r)}function a(t){return Gr(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Ai({...e,toBytes(t,e,r){const i=e.toAffine(),s=n.toBytes(i.x),o=wn;return on("isCompressed",r),r?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],o=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===s&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+e)}{const t=pn(o);if(!vn(t,_i,n.ORDER))throw new Error("Point is not on curve");const e=l(t);let i;try{i=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~r)!=((i&_i)===_i)&&(i=n.neg(i)),{x:t,y:i}}}}),h=t=>cn(yn(t,e.nByteLength));function f(t){return t>r>>_i}const p=(t,e,n)=>pn(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=_n("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=mi.toSig(_n("DER",t));return new g(e,n)}assertValidity(){An("r",this.r,_i,r),An("s",this.s,_i,r)}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:s}=this,u=_(_n("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&s?"03":"02",f=c.fromHex(d+h(l)),p=a(l),g=o(-u*p),y=o(i*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return fn(this.toDERHex())}toDERHex(){return mi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fn(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const t=ei(e.n);return function(t,e,n=!1){const r=t.length,i=ti(e),s=ei(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=qr(n?pn(t):gn(t),e-Vr)+Vr;return n?mn(o,i):yn(o,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=rn(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===s:n?r===2*i||r===2*s:t instanceof c}const b=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const n=pn(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},_=e.bits2int_modN||function(t){return o(b(t))},w=Sn(e.nBitLength);function E(t){return An("num < 2^"+e.nBitLength,t,bi,w),yn(t,e.nByteLength)}const v={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(t)).toRawBytes(n)},sign:function(t,r,i=v){const{seed:s,k2sig:l}=function(t,r,i=v){if(["recovered","canonical"].some(t=>t in i))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:l}=e;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),t=_n("msgHash",t),pi(i),p&&(t=_n("prehashed msgHash",s(t)));const m=_(t),w=u(r),A=[E(w),E(m)];if(null!=y&&!1!==y){const t=!0===y?l(n.BYTES):y;A.push(_n("extraEntropy",t))}const T=wn(...A),S=m;return{seed:T,k2sig:function(t){const e=b(t);if(!d(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=o(r.x);if(i===bi)return;const s=o(n*o(S+i*w));if(s===bi)return;let u=(r.x===i?0:2)|Number(r.y&_i),l=s;return h&&f(s)&&(l=function(t){return f(t)?o(-t):t}(s),u^=1),new g(i,l,u)}}}(t,r,i),h=e;return xn(h.hash.outputLen,h.nByteLength,h.hmac)(s,l)},verify:function(t,n,r,i=A){const s=t;n=_n("msgHash",n),r=_n("publicKey",r);const{lowS:u,prehash:l,format:d}=i;if(pi(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const h="string"==typeof s||rn(s),f=!h&&!d&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(f&&(p=new g(s.r,s.s)),h){try{"compact"!==d&&(p=g.fromDER(s))}catch(t){if(!(t instanceof mi.Err))throw t}p||"der"===d||(p=g.fromCompact(s))}y=c.fromHex(r)}catch(t){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;l&&(n=e.hash(n));const{r:m,s:b}=p,w=_(n),E=a(b),v=o(w*E),T=o(m*E),S=c.BASE.multiplyAndAddUnsafe(y,v,T)?.toAffine();return!!S&&o(S.x)===m},ProjectivePoint:c,Signature:g,utils:y}}function Si(t,e){const n=t.ORDER;let r=bi;for(let t=n-_i;t%wi===bi;t/=wi)r+=_i;const i=r,s=wi<<i-_i-_i,o=s*wi,a=(n-_i)/o,c=(a-_i)/wi,u=o-_i,l=s,d=t.pow(e,a),h=t.pow(e,(a+_i)/wi);let f=(e,n)=>{let r=d,s=t.pow(n,u),o=t.sqr(s);o=t.mul(o,n);let a=t.mul(e,o);a=t.pow(a,c),a=t.mul(a,s),s=t.mul(a,n),o=t.mul(a,e);let f=t.mul(o,s);a=t.pow(f,l);let p=t.eql(a,t.ONE);s=t.mul(o,h),a=t.mul(f,r),o=t.cmov(s,o,p),f=t.cmov(a,f,p);for(let e=i;e>_i;e--){let n=e-wi;n=wi<<n-_i;let i=t.pow(f,n);const a=t.eql(i,t.ONE);s=t.mul(o,r),r=t.mul(r,r),i=t.mul(f,r),o=t.cmov(s,o,a),f=t.cmov(i,f,a)}return{isValid:p,value:o}};if(t.ORDER%vi===Ei){const n=(t.ORDER-Ei)/vi,r=t.sqrt(t.neg(e));f=(e,i)=>{let s=t.sqr(i);const o=t.mul(e,i);s=t.mul(s,o);let a=t.pow(s,n);a=t.mul(a,o);const c=t.mul(a,r),u=t.mul(t.sqr(a),i),l=t.eql(u,e);return{isValid:l,value:t.cmov(c,a,l)}}}return f}function Ii(t,e){if(Zr(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=Si(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,l,d;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),c=t.mul(u,e.A),s=t.add(s,c),s=t.mul(s,o),u=t.mul(u,a),c=t.mul(u,e.B),s=t.add(s,c),l=t.mul(i,o);const{isValid:h,value:f}=n(s,u);d=t.mul(i,r),d=t.mul(d,f),l=t.cmov(l,o,h),d=t.cmov(d,f,h);const p=t.isOdd(r)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),l=t.div(l,a),{x:l,y:d}}}function ki(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xi(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Ri="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Ci=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Oi=(t,e)=>t<<32-e|t>>>e;function Ni(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),xi(t),t}class Li{clone(){return this._cloneInto()}}function Di(t){const e=e=>t().update(Ni(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Pi(t=32){if(Ri&&"function"==typeof Ri.getRandomValues)return Ri.getRandomValues(new Uint8Array(t));if(Ri&&"function"==typeof Ri.randomBytes)return Ri.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}class Ui extends Li{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ki(t.outputLen),ki(t.blockLen)}(t);const n=Ni(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return Bi(this),this.iHash.update(t),this}digestInto(t){Bi(this),xi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Fi=(t,e,n)=>new Ui(t,e).update(n).digest();function Vi(t){return{hash:t,hmac:(e,...n)=>Fi(t,e,function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];xi(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}(...n)),randomBytes:Pi}}Fi.create=(t,e)=>new Ui(t,e);const Hi=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),Mi=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function $i(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,n=pn(t);return e>0?n>>BigInt(e):n}function ji(t){return"string"==typeof t&&1&(t=ss(t)).length&&(t="0"+t),fn(t)}const zi=Ti({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Qr(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:Hi,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...Vi(Ur),bits2int:$i,bits2int_modN:t=>{const e=pn(t).toString(16);return 63===e.length&&(t=ji(e+"0")),qr($i(t),Hi)}}),qi=zi;function Yi(t){return _n("","string"==typeof t?ji(t):t)}function Ki(t){return cn(Yi(t)).padStart(64,"0")}function Gi(t,e=!1){return zi.getPublicKey(Ki(t),e)}function Wi(t,e){return zi.getSharedSecret(Ki(t),e)}function Zi(t){const{r:e,s:n}=t;if(e<0n||e>=Mi)throw new Error(`Signature.r should be [1, ${Mi})`);const r=Gr(n,Hi);if(r<0n||r>=Mi)throw new Error(`inv(Signature.s) should be [1, ${Mi})`)}function Xi(t){const e=Yi(t);if(pn(e)>=Mi)throw new Error(`msgHash should be [0, ${Mi})`);return e}function Ji(t,e,n){const r=zi.sign(Xi(t),Ki(e),n);return Zi(r),r}function Qi(t,e,n){if(!(t instanceof ns)){const e=Yi(t);try{t=ns.fromDER(e)}catch(n){if(!(n instanceof mi.Err))throw n;t=ns.fromCompact(e)}}return Zi(t),zi.verify(t,Xi(e),Yi(n))}const{CURVE:ts,ProjectivePoint:es,Signature:ns,utils:rs}=zi;function is(t){return`0x${cn(t.subarray(1)).replace(/^0+/gm,"")}`}function ss(t){return t.replace(/^0x/i,"")}function os(t){const e=Yi(t),n=2n**256n,r=n-qr(n,Hi);for(let t=0;;t++){const n=ws(wn(e,bn(BigInt(t))));if(n<r)return qr(n,Hi).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function as(t){return is(Gi(t,!0))}function cs(t){if(130!==(t=ss(t)).length)throw new Error("Wrong ethereum signature");return os(t.substring(0,64))}const us=t=>Number(2147483647n&t);function ls(t,e,n,r){const i=us(ws(t)),s=us(ws(e)),o=ln(ss(n));return`m/2645'/${i}'/${s}'/${us(o)}'/${us(o>>31n)}'/${r}`}const ds=[new es(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new es(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new es(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new es(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new es(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function hs(t,e){const n=[];let r=t;for(let t=0;t<248;t++)n.push(r),r=r.double();r=e;for(let t=0;t<4;t++)n.push(r),r=r.double();return n}const fs=hs(ds[1],ds[2]),ps=hs(ds[3],ds[4]);function gs(t,e,n){let r=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=pn(Yi(t));if(!(0n<=e&&e<zi.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const i=n[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&r)&&(t=t.add(i)),r>>=1n}return t}function ys(t,e){let n=ds[0];return n=gs(n,t,fs),n=gs(n,e,ps),is(n.toRawBytes(!0))}const ms=(t,e=ys)=>[0,...t,t.length].reduce((t,n)=>e(t,n)),bs=Sn(250),_s=t=>pn(Br(t))&bs,ws=t=>pn(Ur(t)),Es=Qr(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function vs(t,e,n){const r=t.fromBytes(Ur(dr(`${e}${n}`)));return t.create(r)}function As(t,e,n,r=0){const i=[],s=[];for(let o=0;o<n;o++)i.push(vs(t,`${e}x`,r*n+o)),s.push(vs(t,`${e}y`,r*n+o));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(e=>s.map(n=>t.inv(t.sub(e,n))))}const Ts=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function Ss(t,e){if(Zr(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<r;e++){const r=[];for(let i=0;i<n;i++)r.push(vs(t.Fp,"Hades",n*e+i));i.push(r)}const s=ii({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function Is(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return Ss(t,As(t.Fp,"HadesMDS",n,e))}const ks=Ss({Fp:Es,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Ts);function xs(t,e,n=ks){return n([t,e,2n])[0]}function Bs(t,e,n=ks){return bn(xs(pn(t),pn(e),n))}function Rs(t,e=ks){return e([t,0n,1n])[0]}function Cs(t,e=ks){const{m:n,rate:r}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const i=Array.from(t);for(i.push(1n);i.length%r!==0;)i.push(0n);let s=new Array(n).fill(0n);for(let t=0;t<i.length;t+=r){for(let e=0;e<r;e++){const n=i[t+e];if(void 0===n)throw new Error("invalid index");if(void 0===s[e])throw new Error("state[j] is undefined");s[e]=s[e]+n}s=e(s)}return s[0]}const Os=BigInt(2**32-1),Ns=BigInt(32);function Ls(t,e=!1){return e?{h:Number(t&Os),l:Number(t>>Ns&Os)}:{h:0|Number(t>>Ns&Os),l:0|Number(t&Os)}}function Ds(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Ls(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Ps=[],Us=[],Fs=[],Vs=BigInt(0),Hs=BigInt(1),Ms=BigInt(2),$s=BigInt(7),js=BigInt(256),zs=BigInt(113);for(let t=0,e=Hs,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ps.push(2*(5*r+n)),Us.push((t+1)*(t+2)/2%64);let i=Vs;for(let t=0;t<7;t++)e=(e<<Hs^(e>>$s)*zs)%js,e&Ms&&(i^=Hs<<(Hs<<BigInt(t))-Hs);Fs.push(i)}const[qs,Ys]=Ds(Fs,!0),Ks=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),Gs=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class Ws extends $n{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,On(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){Fn||Hn(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=Ks(s,o,1)^n[r],c=Gs(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=Us[n],s=Ks(e,i,r),o=Gs(e,i,r),a=Ps[n];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=qs[r],t[1]^=Ys[r]}n.fill(0)}(this.state32,this.rounds),Fn||Hn(this.state32),this.posOut=0,this.pos=0}update(t){Ln(this);const{blockLen:e,state:n}=this,r=(t=Mn(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,128&e&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Ln(this,!1),Nn(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return On(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Dn(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new Ws(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const Zs=((t,e,n)=>jn(()=>new Ws(e,t,n)))(1,136,32);function Xs(t){let e=t.length;for(;--e>=0;)t[e]=0}const Js=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Qs=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),to=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),eo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),no=new Array(576);Xs(no);const ro=new Array(60);Xs(ro);const io=new Array(512);Xs(io);const so=new Array(256);Xs(so);const oo=new Array(29);Xs(oo);const ao=new Array(30);function co(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let uo,lo,ho;function fo(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Xs(ao);const po=t=>t<256?io[t]:io[256+(t>>>7)],go=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},yo=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,go(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},mo=(t,e,n)=>{yo(t,n[2*e],n[2*e+1])},bo=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},_o=(t,e,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=bo(r[e]++,e))}},wo=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Eo=t=>{t.bi_valid>8?go(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},vo=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},Ao=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&vo(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!vo(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},To=(t,e,n)=>{let r,i,s,o,a=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+a++],r+=(255&t.pending_buf[t.sym_buf+a++])<<8,i=t.pending_buf[t.sym_buf+a++],0===r?mo(t,i,e):(s=so[i],mo(t,s+256+1,e),o=Js[s],0!==o&&(i-=oo[s],yo(t,i,o)),r--,s=po(r),mo(t,s,n),o=Qs[s],0!==o&&(r-=ao[s],yo(t,r,o)))}while(a<t.sym_next);mo(t,256,e)},So=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,n[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)Ao(t,n,o);c=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Ao(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[2*c]=n[2*o]+n[2*a],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[2*o+1]=n[2*a+1]=c,t.heap[1]=c++,Ao(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,l,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],h=n[2*n[2*l+1]+1]+1,h>c&&(h=c,g++),n[2*l+1]=h,l>r||(t.bl_count[h]++,f=0,l>=a&&(f=o[l-a]),p=n[2*l],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[2*l+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(l=t.bl_count[h];0!==l;)d=t.heap[--u],d>r||(n[2*d+1]!==h&&(t.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),l--)}})(t,e),_o(n,u,t.bl_count)},Io=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<c&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},ko=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<c&&i===o)){if(a<u)do{mo(t,i,t.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(mo(t,i,t.bl_tree),a--),mo(t,16,t.bl_tree),yo(t,a-3,2)):a<=10?(mo(t,17,t.bl_tree),yo(t,a-3,3)):(mo(t,18,t.bl_tree),yo(t,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}};let xo=!1;const Bo=(t,e,n,r)=>{yo(t,0+(r?1:0),3),Eo(t),go(t,n),go(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var Ro={_tr_init:t=>{xo||((()=>{let t,e,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(oo[r]=n,t=0;t<1<<Js[r];t++)so[n++]=r;for(so[n-1]=r,i=0,r=0;r<16;r++)for(ao[r]=i,t=0;t<1<<Qs[r];t++)io[i++]=r;for(i>>=7;r<30;r++)for(ao[r]=i<<7,t=0;t<1<<Qs[r]-7;t++)io[256+i++]=r;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)no[2*t+1]=8,t++,s[8]++;for(;t<=255;)no[2*t+1]=9,t++,s[9]++;for(;t<=279;)no[2*t+1]=7,t++,s[7]++;for(;t<=287;)no[2*t+1]=8,t++,s[8]++;for(_o(no,287,s),t=0;t<30;t++)ro[2*t+1]=5,ro[2*t]=bo(t,5);uo=new co(no,Js,257,286,15),lo=new co(ro,Qs,0,30,15),ho=new co(new Array(0),to,0,19,7)})(),xo=!0),t.l_desc=new fo(t.dyn_ltree,uo),t.d_desc=new fo(t.dyn_dtree,lo),t.bl_desc=new fo(t.bl_tree,ho),t.bi_buf=0,t.bi_valid=0,wo(t)},_tr_stored_block:Bo,_tr_flush_block:(t,e,n,r)=>{let i,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),So(t,t.l_desc),So(t,t.d_desc),o=(t=>{let e;for(Io(t,t.dyn_ltree,t.l_desc.max_code),Io(t,t.dyn_dtree,t.d_desc.max_code),So(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*eo[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?Bo(t,e,n,r):4===t.strategy||s===i?(yo(t,2+(r?1:0),3),To(t,no,ro)):(yo(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(yo(t,e-257,5),yo(t,n-1,5),yo(t,r-4,4),i=0;i<r;i++)yo(t,t.bl_tree[2*eo[i]+1],3);ko(t,t.dyn_ltree,e-1),ko(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),To(t,t.dyn_ltree,t.dyn_dtree)),wo(t),r&&Eo(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(so[n]+256+1)]++,t.dyn_dtree[2*po(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{yo(t,2,3),mo(t,256,no),(t=>{16===t.bi_valid?(go(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},Co=(t,e,n,r)=>{let i=65535&t,s=t>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const Oo=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var No=(t,e,n,r)=>{const i=Oo,s=r+n;t^=-1;for(let n=r;n<s;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},Lo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Do={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Po,_tr_stored_block:Uo,_tr_flush_block:Fo,_tr_tally:Vo,_tr_align:Ho}=Ro,{Z_NO_FLUSH:Mo,Z_PARTIAL_FLUSH:$o,Z_FULL_FLUSH:jo,Z_FINISH:zo,Z_BLOCK:qo,Z_OK:Yo,Z_STREAM_END:Ko,Z_STREAM_ERROR:Go,Z_DATA_ERROR:Wo,Z_BUF_ERROR:Zo,Z_DEFAULT_COMPRESSION:Xo,Z_FILTERED:Jo,Z_HUFFMAN_ONLY:Qo,Z_RLE:ta,Z_FIXED:ea,Z_DEFAULT_STRATEGY:na,Z_UNKNOWN:ra,Z_DEFLATED:ia}=Do,sa=258,oa=262,aa=42,ca=113,ua=666,la=(t,e)=>(t.msg=Lo[e],e),da=t=>2*t-(t>4?9:0),ha=t=>{let e=t.length;for(;--e>=0;)t[e]=0},fa=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let pa=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const ga=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},ya=(t,e)=>{Fo(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ga(t.strm)},ma=(t,e)=>{t.pending_buf[t.pending++]=e},ba=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},_a=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=Co(t.adler,e,i,n):2===t.state.wrap&&(t.adler=No(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},wa=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-oa?t.strstart-(t.w_size-oa):0,u=t.window,l=t.w_mask,d=t.prev,h=t.strstart+sa;let f=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+o]===p&&u[n+o-1]===f&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<h);if(r=sa-(h-s),s=h-sa,r>o){if(t.match_start=e,o=r,r>=a)break;f=u[s+o-1],p=u[s+o]}}}while((e=d[e&l])>c&&0!==--i);return o<=t.lookahead?o:t.lookahead},Ea=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-oa)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),fa(t),r+=e),0===t.strm.avail_in)break;if(n=_a(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=pa(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=pa(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<oa&&0!==t.strm.avail_in)},va=(t,e)=>{let n,r,i,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&e!==zo||e===Mo||n!==r+t.strm.avail_in))break;o=e===zo&&n===r+t.strm.avail_in?1:0,Uo(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,ga(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(_a(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==Mo&&e!==zo&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(_a(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,s=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=s||(r||e===zo)&&e!==Mo&&0===t.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=e===zo&&0===t.strm.avail_in&&n===r?1:0,Uo(t,t.block_start,n,o),t.block_start+=n,ga(t.strm)),o?3:1)},Aa=(t,e)=>{let n,r;for(;;){if(t.lookahead<oa){if(Ea(t),t.lookahead<oa&&e===Mo)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=pa(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-oa&&(t.match_length=wa(t,n)),t.match_length>=3)if(r=Vo(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=pa(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=pa(t,t.ins_h,t.window[t.strstart+1]);else r=Vo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(ya(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===zo?(ya(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ya(t,!1),0===t.strm.avail_out)?1:2},Ta=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<oa){if(Ea(t),t.lookahead<oa&&e===Mo)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=pa(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-oa&&(t.match_length=wa(t,n),t.match_length<=5&&(t.strategy===Jo||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=Vo(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=pa(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(ya(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=Vo(t,0,t.window[t.strstart-1]),r&&ya(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Vo(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===zo?(ya(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ya(t,!1),0===t.strm.avail_out)?1:2};function Sa(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Ia=[new Sa(0,0,0,0,va),new Sa(4,4,8,4,Aa),new Sa(4,5,16,8,Aa),new Sa(4,6,32,32,Aa),new Sa(4,4,16,16,Ta),new Sa(8,16,32,32,Ta),new Sa(8,16,128,128,Ta),new Sa(8,32,128,256,Ta),new Sa(32,128,258,1024,Ta),new Sa(32,258,258,4096,Ta)];function ka(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ia,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ha(this.dyn_ltree),ha(this.dyn_dtree),ha(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ha(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ha(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const xa=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==aa&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ca&&e.status!==ua?1:0},Ba=t=>{if(xa(t))return la(t,Go);t.total_in=t.total_out=0,t.data_type=ra;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?aa:ca,t.adler=2===e.wrap?0:1,e.last_flush=-2,Po(e),Yo},Ra=t=>{const e=Ba(t);var n;return e===Yo&&((n=t.state).window_size=2*n.w_size,ha(n.head),n.max_lazy_match=Ia[n.level].max_lazy,n.good_match=Ia[n.level].good_length,n.nice_match=Ia[n.level].nice_length,n.max_chain_length=Ia[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Ca=(t,e,n,r,i,s)=>{if(!t)return Go;let o=1;if(e===Xo&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==ia||r<8||r>15||e<0||e>9||s<0||s>ea||8===r&&1!==o)return la(t,Go);8===r&&(r=9);const a=new ka;return t.state=a,a.strm=t,a.status=aa,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=n,Ra(t)};var Oa=Ca,Na=(t,e)=>xa(t)||2!==t.state.wrap?Go:(t.state.gzhead=e,Yo),La=(t,e)=>{if(xa(t)||e>qo||e<0)return t?la(t,Go):Go;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===ua&&e!==zo)return la(t,0===t.avail_out?Zo:Go);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(ga(t),0===t.avail_out)return n.last_flush=-1,Yo}else if(0===t.avail_in&&da(e)<=da(r)&&e!==zo)return la(t,Zo);if(n.status===ua&&0!==t.avail_in)return la(t,Zo);if(n.status===aa&&0===n.wrap&&(n.status=ca),n.status===aa){let e=ia+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Qo||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,ba(n,e),0!==n.strstart&&(ba(n,t.adler>>>16),ba(n,65535&t.adler)),t.adler=1,n.status=ca,ga(t),0!==n.pending)return n.last_flush=-1,Yo}if(57===n.status)if(t.adler=0,ma(n,31),ma(n,139),ma(n,8),n.gzhead)ma(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ma(n,255&n.gzhead.time),ma(n,n.gzhead.time>>8&255),ma(n,n.gzhead.time>>16&255),ma(n,n.gzhead.time>>24&255),ma(n,9===n.level?2:n.strategy>=Qo||n.level<2?4:0),ma(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ma(n,255&n.gzhead.extra.length),ma(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=No(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ma(n,0),ma(n,0),ma(n,0),ma(n,0),ma(n,0),ma(n,9===n.level?2:n.strategy>=Qo||n.level<2?4:0),ma(n,3),n.status=ca,ga(t),0!==n.pending)return n.last_flush=-1,Yo;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=No(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,ga(t),0!==n.pending)return n.last_flush=-1,Yo;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=No(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=No(t.adler,n.pending_buf,n.pending-r,r)),ga(t),0!==n.pending)return n.last_flush=-1,Yo;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ma(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=No(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=No(t.adler,n.pending_buf,n.pending-r,r)),ga(t),0!==n.pending)return n.last_flush=-1,Yo;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ma(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=No(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ga(t),0!==n.pending))return n.last_flush=-1,Yo;ma(n,255&t.adler),ma(n,t.adler>>8&255),t.adler=0}if(n.status=ca,ga(t),0!==n.pending)return n.last_flush=-1,Yo}if(0!==t.avail_in||0!==n.lookahead||e!==Mo&&n.status!==ua){let r=0===n.level?va(n,e):n.strategy===Qo?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Ea(t),0===t.lookahead)){if(e===Mo)return 1;break}if(t.match_length=0,n=Vo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(ya(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===zo?(ya(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ya(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===ta?((t,e)=>{let n,r,i,s;const o=t.window;for(;;){if(t.lookahead<=sa){if(Ea(t),t.lookahead<=sa&&e===Mo)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+sa;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=sa-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=Vo(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Vo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(ya(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===zo?(ya(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ya(t,!1),0===t.strm.avail_out)?1:2})(n,e):Ia[n.level].func(n,e);if(3!==r&&4!==r||(n.status=ua),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),Yo;if(2===r&&(e===$o?Ho(n):e!==qo&&(Uo(n,0,0,!1),e===jo&&(ha(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ga(t),0===t.avail_out))return n.last_flush=-1,Yo}return e!==zo?Yo:n.wrap<=0?Ko:(2===n.wrap?(ma(n,255&t.adler),ma(n,t.adler>>8&255),ma(n,t.adler>>16&255),ma(n,t.adler>>24&255),ma(n,255&t.total_in),ma(n,t.total_in>>8&255),ma(n,t.total_in>>16&255),ma(n,t.total_in>>24&255)):(ba(n,t.adler>>>16),ba(n,65535&t.adler)),ga(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Yo:Ko)},Da=t=>{if(xa(t))return Go;const e=t.state.status;return t.state=null,e===ca?la(t,Wo):Yo},Pa=(t,e)=>{let n=e.length;if(xa(t))return Go;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==aa||r.lookahead)return Go;if(1===i&&(t.adler=Co(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(ha(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Ea(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=pa(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,Ea(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,Yo};const Ua=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Fa=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ua(n,e)&&(t[e]=n[e])}}return t},Va=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n};let Ha=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ha=!1}const Ma=new Uint8Array(256);for(let t=0;t<256;t++)Ma[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ma[254]=Ma[254]=1;var $a=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},ja=(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){s[i++]=e;continue}let o=Ma[e];if(o>4)s[i++]=65533,r+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&r<n;)e=e<<6|63&t[r++],o--;o>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ha)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(s,i)},za=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Ma[t[n]]>e?n:e},qa=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ya=Object.prototype.toString,{Z_NO_FLUSH:Ka,Z_SYNC_FLUSH:Ga,Z_FULL_FLUSH:Wa,Z_FINISH:Za,Z_OK:Xa,Z_STREAM_END:Ja,Z_DEFAULT_COMPRESSION:Qa,Z_DEFAULT_STRATEGY:tc,Z_DEFLATED:ec}=Do;function nc(t){this.options=Fa({level:Qa,method:ec,chunkSize:16384,windowBits:15,memLevel:8,strategy:tc},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qa,this.strm.avail_out=0;let n=Oa(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Xa)throw new Error(Lo[n]);if(e.header&&Na(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?$a(e.dictionary):"[object ArrayBuffer]"===Ya.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Pa(this.strm,t),n!==Xa)throw new Error(Lo[n]);this._dict_set=!0}}function rc(t,e){const n=new nc(e);if(n.push(t,!0),n.err)throw n.msg||Lo[n.err];return n.result}nc.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Za:Ka,"string"==typeof t?n.input=$a(t):"[object ArrayBuffer]"===Ya.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Ga||s===Wa)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=La(n,s),i===Ja)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Da(this.strm),this.onEnd(i),this.ended=!0,i===Xa;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},nc.prototype.onData=function(t){this.chunks.push(t)},nc.prototype.onEnd=function(t){t===Xa&&(this.result=Va(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ic={Deflate:nc,deflate:rc,deflateRaw:function(t,e){return(e=e||{}).raw=!0,rc(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,rc(t,e)},constants:Do};const sc=16209;var oc=function(t,e){let n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,b,_,w,E,v,A,T,S;const I=t.state;n=t.next_in,T=t.input,r=n+(t.avail_in-5),i=t.next_out,S=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),a=I.dmax,c=I.wsize,u=I.whave,l=I.wnext,d=I.window,h=I.hold,f=I.bits,p=I.lencode,g=I.distcode,y=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=p[h&y];e:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,0===_)S[i++]=65535&b;else{if(!(16&_)){if(64&_){if(32&_){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=sc;break t}b=p[(65535&b)+(h&(1<<_)-1)];continue e}for(w=65535&b,_&=15,_&&(f<_&&(h+=T[n++]<<f,f+=8),w+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=T[n++]<<f,f+=8,h+=T[n++]<<f,f+=8),b=g[h&m];;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,16&_){if(E=65535&b,_&=15,f<_&&(h+=T[n++]<<f,f+=8,f<_&&(h+=T[n++]<<f,f+=8)),E+=h&(1<<_)-1,E>a){t.msg="invalid distance too far back",I.mode=sc;break t}if(h>>>=_,f-=_,_=i-s,E>_){if(_=E-_,_>u&&I.sane){t.msg="invalid distance too far back",I.mode=sc;break t}if(v=0,A=d,0===l){if(v+=c-_,_<w){w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}}else if(l<_){if(v+=c+l-_,_-=l,_<w){w-=_;do{S[i++]=d[v++]}while(--_);if(v=0,l<w){_=l,w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}}}else if(v+=l-_,_<w){w-=_;do{S[i++]=d[v++]}while(--_);v=i-E,A=S}for(;w>2;)S[i++]=A[v++],S[i++]=A[v++],S[i++]=A[v++],w-=3;w&&(S[i++]=A[v++],w>1&&(S[i++]=A[v++]))}else{v=i-E;do{S[i++]=S[v++],S[i++]=S[v++],S[i++]=S[v++],w-=3}while(w>2);w&&(S[i++]=S[v++],w>1&&(S[i++]=S[v++]))}break}if(64&_){t.msg="invalid distance code",I.mode=sc;break t}b=g[(65535&b)+(h&(1<<_)-1)]}}break}}while(n<r&&i<o);w=f>>3,n-=w,f-=w<<3,h&=(1<<f)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<o?o-i+257:257-(i-o),I.hold=h,I.bits=f};const ac=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var dc=(t,e,n,r,i,s,o,a)=>{const c=a.bits;let u,l,d,h,f,p,g=0,y=0,m=0,b=0,_=0,w=0,E=0,v=0,A=0,T=0,S=null;const I=new Uint16Array(16),k=new Uint16Array(16);let x,B,R,C=null;for(g=0;g<=15;g++)I[g]=0;for(y=0;y<r;y++)I[e[n+y]]++;for(_=c,b=15;b>=1&&0===I[b];b--);if(_>b&&(_=b),0===b)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<b&&0===I[m];m++);for(_<m&&(_=m),v=1,g=1;g<=15;g++)if(v<<=1,v-=I[g],v<0)return-1;if(v>0&&(0===t||1!==b))return-1;for(k[1]=0,g=1;g<15;g++)k[g+1]=k[g]+I[g];for(y=0;y<r;y++)0!==e[n+y]&&(o[k[e[n+y]]++]=y);if(0===t?(S=C=o,p=20):1===t?(S=ac,C=cc,p=257):(S=uc,C=lc,p=0),T=0,y=0,g=m,f=s,w=_,E=0,d=-1,A=1<<_,h=A-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){x=g-E,o[y]+1<p?(B=0,R=o[y]):o[y]>=p?(B=C[o[y]-p],R=S[o[y]-p]):(B=96,R=0),u=1<<g-E,l=1<<w,m=l;do{l-=u,i[f+(T>>E)+l]=x<<24|B<<16|R}while(0!==l);for(u=1<<g-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,y++,0===--I[g]){if(g===b)break;g=e[n+o[y]]}if(g>_&&(T&h)!==d){for(0===E&&(E=_),f+=m,w=g-E,v=1<<w;w+E<b&&(v-=I[w+E],!(v<=0));)w++,v<<=1;if(A+=1<<w,1===t&&A>852||2===t&&A>592)return 1;d=T&h,i[d]=_<<24|w<<16|f-s}}return 0!==T&&(i[f+T]=g-E<<24|64<<16),a.bits=_,0};const{Z_FINISH:hc,Z_BLOCK:fc,Z_TREES:pc,Z_OK:gc,Z_STREAM_END:yc,Z_NEED_DICT:mc,Z_STREAM_ERROR:bc,Z_DATA_ERROR:_c,Z_MEM_ERROR:wc,Z_BUF_ERROR:Ec,Z_DEFLATED:vc}=Do,Ac=16180,Tc=16190,Sc=16191,Ic=16192,kc=16194,xc=16199,Bc=16200,Rc=16206,Cc=16209,Oc=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Nc(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Lc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ac||e.mode>16211?1:0},Dc=t=>{if(Lc(t))return bc;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ac,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,gc},Pc=t=>{if(Lc(t))return bc;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Dc(t)},Uc=(t,e)=>{let n;if(Lc(t))return bc;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?bc:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Pc(t))},Fc=(t,e)=>{if(!t)return bc;const n=new Nc;t.state=n,n.strm=t,n.window=null,n.mode=Ac;const r=Uc(t,e);return r!==gc&&(t.state=null),r};let Vc,Hc,Mc=!0;const $c=t=>{if(Mc){Vc=new Int32Array(512),Hc=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(dc(1,t.lens,0,288,Vc,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;dc(2,t.lens,0,32,Hc,0,t.work,{bits:5}),Mc=!1}t.lencode=Vc,t.lenbits=9,t.distcode=Hc,t.distbits=5},jc=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var zc=Pc,qc=Fc,Yc=(t,e)=>{let n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,b,_,w,E,v,A,T=0;const S=new Uint8Array(4);let I,k;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Lc(t)||!t.output||!t.input&&0!==t.avail_in)return bc;n=t.state,n.mode===Sc&&(n.mode=Ic),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,l=n.bits,d=a,h=c,A=gc;t:for(;;)switch(n.mode){case Ac:if(0===n.wrap){n.mode=Ic;break}for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=No(n.check,S,2,0),u=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Cc;break}if((15&u)!==vc){t.msg="unknown compression method",n.mode=Cc;break}if(u>>>=4,l-=4,v=8+(15&u),0===n.wbits&&(n.wbits=v),v>15||v>n.wbits){t.msg="invalid window size",n.mode=Cc;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&u?16189:Sc,u=0,l=0;break;case 16181:for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(n.flags=u,(255&n.flags)!==vc){t.msg="unknown compression method",n.mode=Cc;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Cc;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=No(n.check,S,2,0)),u=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=No(n.check,S,4,0)),u=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=No(n.check,S,2,0)),u=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=No(n.check,S,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(v=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),v)),512&n.flags&&4&n.wrap&&(n.check=No(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break t;f=0;do{v=r[s+f++],n.head&&v&&n.length<65536&&(n.head.name+=String.fromCharCode(v))}while(v&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=No(n.check,r,f,s)),a-=f,s+=f,v)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break t;f=0;do{v=r[s+f++],n.head&&v&&n.length<65536&&(n.head.comment+=String.fromCharCode(v))}while(v&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=No(n.check,r,f,s)),a-=f,s+=f,v)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(4&n.wrap&&u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Cc;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Sc;break;case 16189:for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}t.adler=n.check=Oc(u),u=0,l=0,n.mode=Tc;case Tc:if(0===n.havedict)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,mc;t.adler=n.check=1,n.mode=Sc;case Sc:if(e===fc||e===pc)break t;case Ic:if(n.last){u>>>=7&l,l-=7&l,n.mode=Rc;break}for(;l<3;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}switch(n.last=1&u,u>>>=1,l-=1,3&u){case 0:n.mode=16193;break;case 1:if($c(n),n.mode=xc,e===pc){u>>>=2,l-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Cc}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Cc;break}if(n.length=65535&u,u=0,l=0,n.mode=kc,e===pc)break t;case kc:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break t;i.set(r.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,n.length-=f;break}n.mode=Sc;break;case 16196:for(;l<14;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Cc;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.lens[x[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},A=dc(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid code lengths set",n.mode=Cc;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[u&(1<<n.lenbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(b<16)u>>>=y,l-=y,n.lens[n.have++]=b;else{if(16===b){for(k=y+2;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(u>>>=y,l-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=Cc;break}v=n.lens[n.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===b){for(k=y+3;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=y,l-=y,v=0,f=3+(7&u),u>>>=3,l-=3}else{for(k=y+7;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=y,l-=y,v=0,f=11+(127&u),u>>>=7,l-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Cc;break}for(;f--;)n.lens[n.have++]=v}}if(n.mode===Cc)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Cc;break}if(n.lenbits=9,I={bits:n.lenbits},A=dc(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid literal/lengths set",n.mode=Cc;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},A=dc(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,A){t.msg="invalid distances set",n.mode=Cc;break}if(n.mode=xc,e===pc)break t;case xc:n.mode=Bc;case Bc:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,oc(t,h),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,l=n.bits,n.mode===Sc&&(n.back=-1);break}for(n.back=0;T=n.lencode[u&(1<<n.lenbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(m&&!(240&m)){for(_=y,w=m,E=b;T=n.lencode[E+((u&(1<<_+w)-1)>>_)],y=T>>>24,m=T>>>16&255,b=65535&T,!(_+y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=_,l-=_,n.back+=_}if(u>>>=y,l-=y,n.back+=y,n.length=b,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Sc;break}if(64&m){t.msg="invalid literal/length code",n.mode=Cc;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[u&(1<<n.distbits)-1],y=T>>>24,m=T>>>16&255,b=65535&T,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(!(240&m)){for(_=y,w=m,E=b;T=n.distcode[E+((u&(1<<_+w)-1)>>_)],y=T>>>24,m=T>>>16&255,b=65535&T,!(_+y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=_,l-=_,n.back+=_}if(u>>>=y,l-=y,n.back+=y,64&m){t.msg="invalid distance code",n.mode=Cc;break}n.offset=b,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Cc;break}n.mode=16204;case 16204:if(0===c)break t;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Cc;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=i,p=o-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[o++]=g[p++]}while(--f);0===n.length&&(n.mode=Bc);break;case 16205:if(0===c)break t;i[o++]=n.length,c--,n.mode=Bc;break;case Rc:if(n.wrap){for(;l<32;){if(0===a)break t;a--,u|=r[s++]<<l,l+=8}if(h-=c,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?No(n.check,i,h,o-h):Co(n.check,i,h,o-h)),h=c,4&n.wrap&&(n.flags?u:Oc(u))!==n.check){t.msg="incorrect data check",n.mode=Cc;break}u=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(4&n.wrap&&u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Cc;break}u=0,l=0}n.mode=16208;case 16208:A=yc;break t;case Cc:A=_c;break t;case 16210:return wc;default:return bc}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,(n.wsize||h!==t.avail_out&&n.mode<Cc&&(n.mode<Rc||e!==hc))&&jc(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?No(n.check,i,h,t.next_out-h):Co(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Sc?128:0)+(n.mode===xc||n.mode===kc?256:0),(0===d&&0===h||e===hc)&&A===gc&&(A=Ec),A},Kc=t=>{if(Lc(t))return bc;let e=t.state;return e.window&&(e.window=null),t.state=null,gc},Gc=(t,e)=>{if(Lc(t))return bc;const n=t.state;return 2&n.wrap?(n.head=e,e.done=!1,gc):bc},Wc=(t,e)=>{const n=e.length;let r,i,s;return Lc(t)?bc:(r=t.state,0!==r.wrap&&r.mode!==Tc?bc:r.mode===Tc&&(i=1,i=Co(i,e,n,0),i!==r.check)?_c:(s=jc(t,e,n,n),s?(r.mode=16210,wc):(r.havedict=1,gc)))},Zc=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Xc=Object.prototype.toString,{Z_NO_FLUSH:Jc,Z_FINISH:Qc,Z_OK:tu,Z_STREAM_END:eu,Z_NEED_DICT:nu,Z_STREAM_ERROR:ru,Z_DATA_ERROR:iu,Z_MEM_ERROR:su}=Do;function ou(t){this.options=Fa({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qa,this.strm.avail_out=0;let n=qc(this.strm,e.windowBits);if(n!==tu)throw new Error(Lo[n]);if(this.header=new Zc,Gc(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=$a(e.dictionary):"[object ArrayBuffer]"===Xc.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Wc(this.strm,e.dictionary),n!==tu)))throw new Error(Lo[n])}function au(t,e){const n=new ou(e);if(n.push(t),n.err)throw n.msg||Lo[n.err];return n.result}ou.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?Qc:Jc,"[object ArrayBuffer]"===Xc.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Yc(n,o),s===nu&&i&&(s=Wc(n,i),s===tu?s=Yc(n,o):s===iu&&(s=nu));n.avail_in>0&&s===eu&&n.state.wrap>0&&0!==t[n.next_in];)zc(n),s=Yc(n,o);switch(s){case ru:case iu:case nu:case su:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===eu))if("string"===this.options.to){let t=za(n.output,n.next_out),e=n.next_out-t,i=ja(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==tu||0!==a){if(s===eu)return s=Kc(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ou.prototype.onData=function(t){this.chunks.push(t)},ou.prototype.onEnd=function(t){t===tu&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Va(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var cu={Inflate:ou,inflate:au,inflateRaw:function(t,e){return(e=e||{}).raw=!0,au(t,e)},ungzip:au,constants:Do};const{Deflate:uu,deflate:lu,deflateRaw:du,gzip:hu}=ic,{Inflate:fu,inflate:pu,inflateRaw:gu,ungzip:yu}=cu;var mu=hu,bu=yu;const _u=(t,e,n)=>t&e^~t&n,wu=(t,e,n)=>t&e^t&n^e&n;class Eu extends Li{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ci(this.buffer)}update(t){Bi(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Ni(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){const e=Ci(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Bi(this),function(t,e){xi(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Ci(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const vu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Au=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tu=new Uint32Array(64);class Su extends Eu{constructor(){super(64,32,8,!1),this.A=0|Au[0],this.B=0|Au[1],this.C=0|Au[2],this.D=0|Au[3],this.E=0|Au[4],this.F=0|Au[5],this.G=0|Au[6],this.H=0|Au[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Tu[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Tu[t-15],n=Tu[t-2],r=Oi(e,7)^Oi(e,18)^e>>>3,i=Oi(n,17)^Oi(n,19)^n>>>10;Tu[t]=i+Tu[t-7]+r+Tu[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(Oi(o,6)^Oi(o,11)^Oi(o,25))+_u(o,a,c)+vu[t]+Tu[t]|0,l=(Oi(n,2)^Oi(n,13)^Oi(n,22))+wu(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+l|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Tu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Iu=Di(()=>new Su),ku=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),xu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bu=BigInt(1),Ru=BigInt(2),Cu=(t,e)=>(t+e/Ru)/e;const Ou=Qr(ku,void 0,void 0,{sqrt:function(t){const e=ku,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Kr(l,n,e)*l%e,h=Kr(d,n,e)*l%e,f=Kr(h,Ru,e)*u%e,p=Kr(f,i,e)*f%e,g=Kr(p,s,e)*p%e,y=Kr(g,a,e)*g%e,m=Kr(y,c,e)*y%e,b=Kr(m,a,e)*g%e,_=Kr(b,n,e)*l%e,w=Kr(_,o,e)*p%e,E=Kr(w,r,e)*u%e,v=Kr(E,Ru,e);if(!Ou.eql(Ou.sqr(v),t))throw new Error("Cannot find square root");return v}}),Nu=function(t,e){const n=e=>Ti({...t,...Vi(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Ou,n:xu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=xu,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Bu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Cu(s*t,e),c=Cu(-r*t,e);let u=qr(t-a*n-c*i,e),l=qr(-a*r-c*s,e);const d=u>o,h=l>o;if(d&&(u=e-u),h&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},Iu);BigInt(0),Nu.ProjectivePoint;var Lu=n(6993),Du=n(8287).hp,Pu=Object.defineProperty,Uu=Object.getOwnPropertyDescriptor,Fu=Object.getOwnPropertyNames,Vu=Object.prototype.hasOwnProperty,Hu=(t,e)=>{for(var n in e)Pu(t,n,{get:e[n],enumerable:!0})},Mu=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Fu(e))Vu.call(t,i)||i===n||Pu(t,i,{get:()=>e[i],enumerable:!(r=Uu(e,i))||r.enumerable});return t},$u=(t,e,n)=>(Mu(t,e,"default"),n&&Mu(n,e,"default"));Hu({},{ADDR_BOUND:()=>wl,API_VERSION:()=>ml,BaseUrl:()=>Ml,DEFAULT_GLOBAL_CONFIG:()=>Yl,HARDENING_4BYTES:()=>Hl,HARDENING_BYTE:()=>Vl,IS_BROWSER:()=>Yu,LegacyUDC:()=>Ll,MASK_250:()=>gl,MASK_31:()=>yl,MAX_STORAGE_ITEM_SIZE:()=>_l,NetworkName:()=>$l,OutsideExecutionCallerAny:()=>Pl,PAYMASTER_RPC_NODES:()=>Gl,PRIME:()=>bl,RANGE_FELT:()=>vl,RANGE_I128:()=>Nl,RANGE_I16:()=>Rl,RANGE_I32:()=>Cl,RANGE_I64:()=>Ol,RANGE_I8:()=>Bl,RANGE_U128:()=>xl,RANGE_U16:()=>Tl,RANGE_U32:()=>Sl,RANGE_U64:()=>Il,RANGE_U8:()=>Al,RANGE_U96:()=>kl,RPC_DEFAULT_NODES:()=>Kl,SNIP9_V1_INTERFACE_ID:()=>Ul,SNIP9_V2_INTERFACE_ID:()=>Fl,SYSTEM_MESSAGES:()=>Wl,StarknetChainId:()=>jl,SupportedRpcVersion:()=>ql,TEXT_TO_FELT_MAX_LEN:()=>fl,TransactionHashPrefix:()=>zl,UDC:()=>Dl,ZERO:()=>pl});var ju={};Hu(ju,{JRPC:()=>zu,PAYMASTER_API:()=>i,RPCSPEC08:()=>s,RPCSPEC09:()=>l});var zu={},qu={};$u(qu,l),$u(ju,qu),Hu({},{IS_BROWSER:()=>Yu,addHexPrefix:()=>nl,arrayBufferToString:()=>Gu,atobUniversal:()=>Ju,bigIntToUint8Array:()=>dl,btoaUniversal:()=>Qu,buf2hex:()=>tl,calcByteLength:()=>il,concatenateArrayBuffer:()=>cl,hexStringToUint8Array:()=>ul,padLeft:()=>rl,pascalToSnake:()=>al,removeHexPrefix:()=>el,sanitizeBytes:()=>sl,sanitizeHex:()=>ol,stringToUint8Array:()=>ll,uint8ArrayToBigInt:()=>hl,utf8ToArray:()=>Zu,utf8ToBigInt:()=>Xu,utf8ToUint8Array:()=>Wu});var Yu="undefined"!=typeof window,Ku="0";function Gu(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function Wu(t){return(new TextEncoder).encode(t)}var Zu=Wu;function Xu(t){return hl(Wu(t))}function Ju(t){return ie.decode(t)}function Qu(t){return ie.encode(new Uint8Array(t))}function tl(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function el(t){return t.replace(/^0x/i,"")}function nl(t){return`0x${el(t)}`}function rl(t,e,n=Ku){return function(t,e,n,r=Ku){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function il(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function sl(t,e=8,n=Ku){return rl(t,il(t,e),n)}function ol(t){const e=sl(el(t),2);return e?nl(e):e}var al=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function cl(t){const e=t.reduce((t,e)=>t+e.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(t,r),r+=t.byteLength}),n}function ul(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+$/.test(e))throw new Error(`Invalid hex string: "${t}" contains non-hexadecimal characters`);const n=e.length%2!=0?`0${e}`:e,r=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2)r[t/2]=parseInt(n.substring(t,t+2),16);return r}function ll(t){return/^0[xX][0-9a-fA-F]*$/.test(t)?ul(t):function(t){return/^[0-9]+$/.test(t)}(t)?dl(BigInt(t)):Wu(t)}function dl(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function hl(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var fl=31,pl=0n,gl=2n**250n-1n,yl=2n**31n-1n,ml=pl,bl=2n**251n+17n*2n**192n+1n,_l=256n,wl=2n**251n-_l,El=(t,e)=>({min:t,max:e}),vl=El(pl,bl-1n),Al=El(pl,255n),Tl=El(pl,65535n),Sl=El(pl,2n**32n-1n),Il=El(pl,2n**64n-1n),kl=El(pl,2n**96n-1n),xl=El(pl,2n**128n-1n),Bl=El(-128n,127n),Rl=El(-32768n,32767n),Cl=El(-(2n**31n),2n**31n-1n),Ol=El(-(2n**63n),2n**63n-1n),Nl=El(-(2n**127n),2n**127n-1n),Ll={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Dl={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},Pl="0x414e595f43414c4c4552",Ul="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Fl="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Vl=128,Hl=2147483648n,Ml={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},$l={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},jl={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},zl={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},ql={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Yl={rpcVersion:"0.9.0",transactionVersion:ju.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},Kl={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},Gl={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},Wl={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},Zl=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Yl}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Xl={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Jl=class t{static instance;config;constructor(){this.config=Zl}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Xl[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(Xl[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Xl).filter(t=>this.shouldLog(Xl[t])&&"OFF"!==t)}}.getInstance(),Ql={};Hu(Ql,{RpcChannel:()=>Sg});var{ETransactionVersion:td}=l,{ETransactionVersion2:ed}=l,{ETransactionVersion3:nd}=l,{EDataAvailabilityMode:rd}=s,{EDAMode:id}=s;function sd(t){return"l1_data_gas"in t}var{ETransactionStatus:od}=s,{ETransactionExecutionStatus:ad}=s,{ETransactionType:cd}=l,{EBlockStatus:ud}=l,{ETransactionFinalityStatus:ld}=l,{ETransactionExecutionStatus:dd}=l,{EBlockTag:hd}=l,fd="DEPLOY",pd="INVOKE",gd={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},yd={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},md={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},bd={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},_d={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};Hu({},{parse:()=>Ed,parseAlwaysAsBig:()=>vd,stringify:()=>Ad});var wd=t=>{if(!de(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},Ed=t=>Ee(String(t),void 0,wd),vd=t=>Ee(String(t),void 0,_e),Ad=(t,e,n,r)=>Qe(t,e,n,r),Td=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:Ad(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const s=await this.batchPromises[r];delete this.batchPromises[r];const o=s.find(t=>t.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return o}};function Sd(t,e){if(!t)throw new Error(e||"Assertion failure")}Hu({},{addPercent:()=>Jd,assertInRange:()=>jd,bigNumberishArrayToDecimalStringArray:()=>zd,bigNumberishArrayToHexadecimalStringArray:()=>qd,cleanHex:()=>$d,getDecimalString:()=>Kd,getHexString:()=>Gd,getHexStringArray:()=>Wd,getNext:()=>eh,hexToBytes:()=>Xd,hexToDecimalString:()=>Md,isBigNumberish:()=>th,isHex:()=>Nd,isHexString:()=>Ld,isStringWholeNumber:()=>Yd,stringToSha256ToArrayBuff4:()=>Qd,toBigInt:()=>Dd,toCairoBool:()=>Zd,toHex:()=>Ud,toHex64:()=>Hd,toHexString:()=>Fd,toStorageKey:()=>Vd,tryToBigInt:()=>Pd});var Id=t=>void 0===t||void 0===t;function kd(t){return"number"==typeof t}function xd(t){return"boolean"==typeof t}function Bd(t){return"bigint"==typeof t}function Rd(t){return"string"==typeof t}function Cd(t){return void 0!==Du&&t instanceof Du}function Od(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Nd(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var Ld=Nd;function Dd(t){return BigInt(t)}function Pd(t){return t?BigInt(t):void 0}function Ud(t){return nl(Dd(t).toString(16))}var Fd=Ud;function Vd(t){return nl(Dd(t).toString(16).padStart(64,"0"))}function Hd(t){const e=nl(Dd(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Md(t){return BigInt(nl(t)).toString(10)}function $d(t){return t.toLowerCase().replace(/^(0x)0+/,"$1")}function jd(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),o=BigInt(e),a=BigInt(n);Sd(s>=o&&s<=a,`Message not signable, ${i}.`)}function zd(t){return t.map(t=>Dd(t).toString(10))}function qd(t){return t.map(t=>Ud(t))}function Yd(t){return/^\d+$/.test(t)}function Kd(t){if(Nd(t))return Md(t);if(Yd(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Gd(t){if(Nd(t))return t;if(Yd(t))return Fd(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Wd(t){return t.map(Gd)}function Zd(t){return(+t).toString()}function Xd(t){if(!Nd(t))throw new Error(`${t} needs to be a hex-string`);let e=el(t);return e.length%2!=0&&(e=`0${e}`),fn(e)}function Jd(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Qd(t){var e;return Xd(Ud((e=BigInt(nl(tl(Xn(t)))),Number(e&yl))))}function th(t){return kd(t)||Bd(t)||Rd(t)&&(Nd(t)||Yd(t))}function eh(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function nh(t){const e=el(Ud(BigInt(t))),n=e.length%2==0?e:`0${e}`;return nl(_s(Xd(nl(n))).toString(16))}function rh(t){const e=BigInt(function(t){return nl(_s(Zu(t)).toString(16))}(t));return e&gl}function ih(t){return Ud(rh(t))}function sh(t){return kd(t)||Bd(t)?Ud(t):Nd(t)?t:Yd(t)?Ud(t):ih(t)}function oh(t){const e=nl(t.reduce((t,e)=>t+el(Ud(e)).padStart(64,"0"),""));return nl(cn(Zs(Xd(e))))}function ah(t,e,n,r,i){return oh([t,e,i,n,r.length,...r])}function ch(t,e,n){return oh([t,e,n.length,...n])}function uh(t){return/^[\x00-\x7F]*$/.test(t)}function lh(t){return t.length<=fl}function dh(t){return/^[0-9]*$/i.test(t)}function hh(t){return Rd(t)&&!Nd(t)&&!Yd(t)}Hu({},{getL1MessageHash:()=>ch,getL2MessageHash:()=>ah,getSelector:()=>sh,getSelectorFromName:()=>ih,keccakBn:()=>nh,solidityUint256PackedKeccak256:()=>oh,starknetKeccak:()=>rh}),Hu({},{decodeShortString:()=>mh,encodeShortString:()=>yh,isASCII:()=>uh,isDecimalString:()=>dh,isLongText:()=>ph,isShortString:()=>lh,isShortText:()=>fh,isText:()=>hh,splitLongString:()=>gh});var fh=t=>hh(t)&&lh(t),ph=t=>hh(t)&&!lh(t);function gh(t){const e=RegExp(`[^]{1,${fl}}`,"g");return t.match(e)||[]}function yh(t){if(!uh(t))throw new Error(`${t} is not an ASCII string`);if(!lh(t))throw new Error(`${t} is too long`);return nl(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function mh(t){if(!uh(t))throw new Error(`${t} is not an ASCII string`);if(Nd(t))return el(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(dh(t))return mh("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}function bh(t){const e=0n===BigInt(t.pending_word)?"":mh(Ud(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":mh(Ud(e))),"")+e}function _h(t){const e=gh(t),n=e[e.length-1],r=e.map(yh),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}Hu({},{byteArrayFromString:()=>_h,stringFromByteArray:()=>bh});function wh(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function Eh(t){if(Bd(t)||Number.isInteger(t))return t.toString();if(Rd(t)){if(Nd(t))return BigInt(t).toString();if(hh(t)){if(!lh(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(yh(t)).toString()}if(Yd(t))return t}if(xd(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}Hu({},{felt:()=>tf,getAbiContractVersion:()=>Zh,getArrayType:()=>Kh,isCairo1Abi:()=>Gh,isCairo1Type:()=>Yh,isLen:()=>xh,isTypeArray:()=>Rh,isTypeBool:()=>Mh,isTypeContractAddress:()=>$h,isTypeEnum:()=>Lh,isTypeEthAddress:()=>jh,isTypeFelt:()=>Bh,isTypeInt:()=>Fh,isTypeLiteral:()=>Hh,isTypeNamedTuple:()=>Oh,isTypeNonZero:()=>Wh,isTypeOption:()=>Dh,isTypeResult:()=>Ph,isTypeSecp256k1Point:()=>qh,isTypeStruct:()=>Nh,isTypeTuple:()=>Ch,isTypeU96:()=>zh,isTypeUint:()=>Uh,isTypeUint256:()=>Vh,tuple:()=>Qh,uint256:()=>Xh,uint512:()=>Jh});var vh=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex(t=>t>0))}static __processData(t){if(Rd(t))return ll(t);if(Bd(t))return dl(t);if(Number.isInteger(t))return dl(BigInt(t));if(xd(t))return dl(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return hl(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return nl(this.toBigInt().toString(16))}toApiRequest(){return wh([this.toHexString()])}static validate(e){Sd(null!==e,"null value is not allowed for felt252"),Sd(void 0!==e,"undefined value is not allowed for felt252"),Sd(Rd(e)||kd(e)||Bd(e)||xd(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=hl(n);Sd(r>=0n&&r<bl,`Value ${n} is out of felt252 range [0, ${bl})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},Ah=(1n<<128n)-1n,Th=(1n<<256n)-1n,Sh=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(Od(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&Ah,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){Sd(null!==t,"null value is not allowed for u256"),Sd(void 0!==t,"undefined value is not allowed for u256"),Sd(th(t)||Od(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return Sd(e>=0n,"bigNumberish is smaller than UINT_256_MIN"),Sd(e<=Th,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return Sd(n>=0n&&n<=340282366920938463463374607431768211455n,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),Sd(r>=0n&&r<=340282366920938463463374607431768211455n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=eh(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:nl(this.low.toString(16)),high:nl(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[Eh(this.low),Eh(this.high)]}},Ih=(1n<<512n)-1n,kh=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(Od(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&Ah,this.limb1=(n&Ah<<128n)>>128n,this.limb2=(n&Ah<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){Sd(null!==t,"null value is not allowed for u512"),Sd(void 0!==t,"undefined value is not allowed for u512"),Sd(th(t)||Od(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return Sd(e>=0n,"bigNumberish is smaller than UINT_512_MIN."),Sd(e<=Ih,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),o=BigInt(n),a=BigInt(r);return[i,s,o,a].forEach((t,e)=>{Sd(t>=0n&&t<=Ah,`limb${e} is not in the range of a u128 number`)}),{limb0:i,limb1:s,limb2:o,limb3:a}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=eh(e),i=eh(e),s=eh(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:nl(this.limb0.toString(16)),limb1:nl(this.limb1.toString(16)),limb2:nl(this.limb2.toString(16)),limb3:nl(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[Eh(this.limb0),Eh(this.limb1),Eh(this.limb2),Eh(this.limb3)]}},xh=t=>/_len$/.test(t),Bh=t=>"felt"===t||"core::felt252"===t,Rh=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Ch=t=>/^\(.*\)$/i.test(t),Oh=t=>/\(.*\)/i.test(t)&&t.includes(":"),Nh=(t,e)=>t in e,Lh=(t,e)=>t in e,Dh=t=>t.startsWith("core::option::Option::"),Ph=t=>t.startsWith("core::result::Result::"),Uh=t=>Object.values(gd).includes(t),Fh=t=>Object.values(yd).includes(t),Vh=t=>Sh.isAbiType(t),Hh=t=>Object.values(md).includes(t),Mh=t=>"core::bool"===t,$h=t=>t===md.ContractAddress,jh=t=>"core::starknet::eth_address::EthAddress"===t,zh=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,qh=t=>t===md.Secp256k1Point,Yh=t=>t.includes("::"),Kh=t=>Yh(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Gh(t){const{cairo:e}=Zh(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Wh(t){return t.startsWith("core::zeroable::NonZero::")}function Zh(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return Yh(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Xh=t=>new Sh(t).toUint256DecimalString(),Jh=t=>new kh(t).toUint512DecimalString(),Qh=(...t)=>({...t});function tf(t){return Eh(t)}var ef=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!Id(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!Id(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!Id(t[1]));return Id(t)?"":t[0]}},nf={Some:0,None:1},rf=class{Some;None;constructor(t,e){if(!(t in Object.values(nf)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===nf.Some){if(Id(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Id(this.Some)}isNone(){return!0===this.None}},sf={Ok:0,Err:1},of=class{Ok;Err;constructor(t,e){if(!(t in Object.values(sf)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===sf.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!Id(this.Ok))return this.Ok;if(!Id(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Id(this.Ok)}isErr(){return!Id(this.Err)}},af=(t,e,n)=>{if(!Bd(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function cf(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const o=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===o){if(Array.isArray(t[i])){const e=cf(t[i],t[i].map(t=>o));return r[i]=Object.values(e).join(""),r}return af(t,e,i),r[i]=mh(s),r}if("number"===o)return af(t,e,i),r[i]=Number(s),r;if("function"==typeof o)return r[i]=o(s),r;if(Array.isArray(o)){const e=cf(t[i],o,o[0]);return r[i]=Object.values(e),r}return Od(o)?(r[i]=cf(t[i],o),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)},{})}var uf=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(Rd(t))return ll(t);if(Cd(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return hl(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return nl("padded"===t?tl(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;Sd(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},lf={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},df=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},hf=class extends df{},ff=class extends hf{constructor(t,e,n){super(`RPC: ${e} with params ${Ad(n,null,2)}\n\n      ${t.code}: ${t.message}: ${Ad(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return lf[t]===this.code}},pf=Zl.get("buffer")||void 0!==Du&&Du||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==n.g&&n.g.Buffer||class{constructor(){throw new hf("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new hf("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=Zl.get("buffer")||void 0!==Du&&Du;return e&&e.isBuffer&&e.isBuffer(t)}},gf=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},yf=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return Sd(Array.isArray(t)&&n instanceof vh&&r instanceof gf,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(Cd(t))e=new Uint8Array(t);else if(Rd(t))e=ll(t);else if(Bd(t))e=dl(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=dl(BigInt(t))}var n;const r=uf.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,o=[];let a,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);o.push(new uf(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");a=new vh(n),c=new gf(s)}else a=new vh(0),c=new gf(0);return{data:o,pending_word:a,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),wh([nl(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=cl(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=cl(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=cl(this.toElements());return nl(0===t.length?"0":tl(t))}toBuffer(){const t=cl(this.toElements());return pf.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){Sd(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){Sd(null!=t,"Invalid input: null or undefined"),Sd(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),Sd("object"!=typeof t||Cd(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),Sd(!kd(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),Sd(!kd(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),Sd(!Bd(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),Sd(t instanceof Uint8Array||Cd(t)||Rd(t)||kd(t)||Bd(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(eh(e))},()=>uf.factoryFromApiResponse(e)),r=vh.factoryFromApiResponse(e),i=gf.factoryFromApiResponse(e);return new t(n,r,i)}},mf=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Al.min&&n<=Al.max,`Value is out of u8 range [${Al.min}, ${Al.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},bf=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Tl.min&&n<=Tl.max,`Value is out of u16 range [${Tl.min}, ${Tl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},_f=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Il.min&&n<=Il.max,`Value is out of u64 range [${Il.min}, ${Il.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},wf=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=kl.min&&n<=kl.max,`Value is out of u96 range [${kl.min}, ${kl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},Ef=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data))}toHexString(){return nl(this.toBigInt().toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=xl.min&&n<=xl.max,`Value is out of u128 range [${xl.min}, ${xl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(eh(e))}},vf=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return nl(t<0n?(bl+t).toString(16):t.toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Bl.min&&n<=Bl.max,`Value is out of i8 range [${Bl.min}, ${Bl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=BigInt(n);return new t(r>bl/2n?r-bl:r)}},Af=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return nl(t<0n?(bl+t).toString(16):t.toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Rl.min&&n<=Rl.max,`Value is out of i16 range [${Rl.min}, ${Rl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=BigInt(n);return new t(r>bl/2n?r-bl:r)}},Tf=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return nl(t<0n?(bl+t).toString(16):t.toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Cl.min&&n<=Cl.max,`Value is out of i32 range [${Cl.min}, ${Cl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=BigInt(n);return new t(r>bl/2n?r-bl:r)}},Sf=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return nl(t<0n?(bl+t).toString(16):t.toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Ol.min&&n<=Ol.max,`Value is out of i64 range [${Ol.min}, ${Ol.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=BigInt(n);return new t(r>bl/2n?r-bl:r)}},If=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Rd(t)&&hh(t)?Xu(t):BigInt(t)}toApiRequest(){return wh([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(dl(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return nl(t<0n?(bl+t).toString(16):t.toString(16))}static validate(e){Sd(null!=e,"Invalid input: null or undefined"),Sd(!Od(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),Sd(!kd(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);Sd(n>=Nl.min&&n<=Nl.max,`Value is out of i128 range [${Nl.min}, ${Nl.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=eh(e),r=BigInt(n);return new t(r>bl/2n?r-bl:r)}},kf=(uf.abiSelector,yf.abiSelector,vh.abiSelector,Sh.abiSelector,kh.abiSelector,mf.abiSelector,bf.abiSelector,_f.abiSelector,wf.abiSelector,Ef.abiSelector,vf.abiSelector,Af.abiSelector,Tf.abiSelector,Sf.abiSelector,If.abiSelector,uf.abiSelector,yf.abiSelector,vh.abiSelector,Sh.abiSelector,kh.abiSelector,mf.abiSelector,bf.abiSelector,_f.abiSelector,wf.abiSelector,Ef.abiSelector,vf.abiSelector,Af.abiSelector,Tf.abiSelector,Sf.abiSelector,If.abiSelector,{request:{[uf.abiSelector]:t=>new uf(t).toApiRequest(),[yf.abiSelector]:t=>new yf(t).toApiRequest(),[vh.abiSelector]:t=>tf(t),[Sh.abiSelector]:t=>new Sh(t).toApiRequest(),[kh.abiSelector]:t=>new kh(t).toApiRequest(),[mf.abiSelector]:t=>tf(t),[bf.abiSelector]:t=>tf(t),[_f.abiSelector]:t=>tf(t),[wf.abiSelector]:t=>tf(t),[Ef.abiSelector]:t=>tf(t),[vf.abiSelector]:t=>new vf(t).toApiRequest(),[Af.abiSelector]:t=>new Af(t).toApiRequest(),[Tf.abiSelector]:t=>new Tf(t).toApiRequest(),[Sf.abiSelector]:t=>new Sf(t).toApiRequest(),[If.abiSelector]:t=>new If(t).toApiRequest()},response:{[uf.abiSelector]:t=>uf.factoryFromApiResponse(t).decodeUtf8(),[yf.abiSelector]:t=>yf.factoryFromApiResponse(t).decodeUtf8(),[vh.abiSelector]:t=>BigInt(eh(t)),[Sh.abiSelector]:t=>Sh.factoryFromApiResponse(t).toBigInt(),[kh.abiSelector]:t=>kh.factoryFromApiResponse(t).toBigInt(),[mf.abiSelector]:t=>BigInt(eh(t)),[bf.abiSelector]:t=>BigInt(eh(t)),[_f.abiSelector]:t=>BigInt(eh(t)),[wf.abiSelector]:t=>BigInt(eh(t)),[Ef.abiSelector]:t=>BigInt(eh(t)),[vf.abiSelector]:t=>BigInt(eh(t)),[Af.abiSelector]:t=>BigInt(eh(t)),[Tf.abiSelector]:t=>BigInt(eh(t)),[Sf.abiSelector]:t=>BigInt(eh(t)),[If.abiSelector]:t=>BigInt(eh(t))}}),xf=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||kf}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>xh(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Bf=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||kf}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function Rf(t,e,n){return"constructor"===t&&!n&&!e.length}function Cf(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0===--i)return r;return Number.POSITIVE_INFINITY}function Of(t){return Yh(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+Cf(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+Cf(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map(t=>n.length?t.replace(" ",n.shift()):t);return Oh(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Nf=class t{content;arrayType;constructor(e,n){Sd(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}Sd(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,n)=>(t[n]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function Lf({type:t,val:e,parser:n}){switch(!0){case Sh.isAbiType(t):case kh.isAbiType(t):case mf.isAbiType(t):case bf.isAbiType(t):case _f.isAbiType(t):case wf.isAbiType(t):case Ef.isAbiType(t):case vf.isAbiType(t):case Af.isAbiType(t):case Tf.isAbiType(t):case Sf.isAbiType(t):case If.isAbiType(t):case uf.isAbiType(t):return n.getRequestParser(t)(e);case qh(t):{const t=el(Ud(e)).padStart(128,"0"),n=Xh(nl(t.slice(-64))),r=Xh(nl(t.slice(0,-64)));return[tf(r.low),tf(r.high),tf(n.low),tf(n.high)]}default:return n.getRequestParser(vh.abiSelector)(e)}}function Df({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(Nf.isTypeFixedArray(e)){const s=Nf.getFixedArrayType(e);let o=[];if(Array.isArray(t))o=new Nf(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);o=Object.values(t),Sd(o.length===Nf.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Nf.getFixedArraySize(e)} items. ${o.length} items provided.`)}return o.reduce((t,e)=>t.concat(Df({element:e,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(tf(t.length));const o=Kh(e);return t.reduce((t,e)=>t.concat(Df({element:e,type:o,structs:n,enums:r,parser:i})),s)}if(Sh.isAbiType(e))return i.getRequestParser(e)(t);if(kh.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(jh(e))return Lf({type:e,val:t,parser:i});if(yf.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],o=t;return s.reduce((t,e)=>t.concat(Df({element:o[e.name],type:e.type,structs:n,enums:r,parser:i})),[])}if(Ch(e)){const s=function(t,e){const n=Of(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map((t,e)=>({element:r[e],type:t.type??t}))}(t,e);return s.reduce((t,e)=>{const s=Df({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)},[])}if(Lh(e,r)){const{variants:s}=r[e];if(Dh(e)){const e=t;if(e.isSome()){const t=s.find(t=>"Some"===t.name);if(Id(t))throw Error("Error in abi : Option has no 'Some' variant.");const o=t.type;if("()"===o)return nf.Some.toString();const a=Df({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[nf.Some.toString(),...a]:[nf.Some.toString(),a]}return nf.None.toString()}if(Ph(e)){const e=t;if(e.isOk()){const t=s.find(t=>"Ok"===t.name);if(Id(t))throw Error("Error in abi : Result has no 'Ok' variant.");const o=t.type;if("()"===o)return sf.Ok.toString();const a=Df({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[sf.Ok.toString(),...a]:[sf.Ok.toString(),a]}const o=s.find(t=>"Err"===t.name);if(Id(o))throw Error("Error in abi : Result has no 'Err' variant.");const a=o.type;if("()"===a)return sf.Err.toString();const c=Df({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(c)?[sf.Err.toString(),...c]:[sf.Err.toString(),c]}const o=t,a=o.activeVariant(),c=s.find(t=>t.name===a);if(Id(c))throw Error(`Not find in abi : Enum has no '${a}' variant.`);const u=c.type,l=s.findIndex(t=>t.name===a);if("()"===u)return l.toString();const d=Df({element:o.unwrap(),type:u,structs:n,enums:r,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(Wh(e))return Lf({type:Kh(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return Lf({type:e,val:t,parser:i})}function Pf(t,e,n){let r;switch(!0){case Mh(t):return r=e.next().value,Boolean(BigInt(r));case Sh.isAbiType(t):case kh.isAbiType(t):case mf.isAbiType(t):case bf.isAbiType(t):case _f.isAbiType(t):case wf.isAbiType(t):case Ef.isAbiType(t):case vf.isAbiType(t):case Af.isAbiType(t):case Tf.isAbiType(t):case Sf.isAbiType(t):case If.isAbiType(t):return n.getResponseParser(t)(e);case jh(t):return r=e.next().value,BigInt(r);case uf.isAbiType(t):return n.getResponseParser(t)(e);case qh(t):const i=el(e.next().value).padStart(32,"0"),s=el(e.next().value).padStart(32,"0"),o=el(e.next().value).padStart(32,"0"),a=el(e.next().value).padStart(32,"0");return BigInt(nl(s+i+a+o));default:return n.getResponseParser(vh.abiSelector)(e)}}function Uf(t,e,n,r,i){if("()"===e.type)return{};if(Sh.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(kh.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(yf.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Nf.isTypeFixedArray(e.type)){const s=[],o={name:"",type:Nf.getFixedArrayType(e.type)},a=Nf.getFixedArraySize(e.type);for(;s.length<a;)s.push(Uf(t,o,n,r,i));return s}if(Rh(e.type)){const s=[],o={name:"",type:Kh(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Uf(t,o,n,r,i));return s}if(Wh(e.type)){const s={name:"",type:Kh(e.type)};return Uf(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return jh(e.type)?Pf(e.type,t,n):r[e.type].members.reduce((e,s)=>(e[s.name]=Uf(t,s,n,r,i),e),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),o=i[e.type].variants.reduce((e,o,a)=>a===s?(e[o.name]=Uf(t,{name:"",type:o.type},n,r,i),e):(e[o.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=s===nf.Some?o.Some:void 0;return new rf(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===sf.Ok?o.Ok:o.Err,new of(s,t)}return new ef(o)}if(Ch(e.type))return Of(e.type).reduce((e,s,o)=>{const a=s?.name?s.name:o,c={name:a,type:s?.type?s.type:s};return e[a]=Uf(t,c,n,r,i),e},{});if(Rh(e.type)){const s=[],o={name:"",type:Kh(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Uf(t,o,n,r,i));return s}return Pf(e.type,t,n)}function Ff({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:o,type:a}=e;let c;switch(!0){case xh(o):return c=t.next().value,BigInt(c);case n&&a in n||Ch(a):case r&&Lh(a,r):case Nf.isTypeFixedArray(a):return Uf(t,e,s,n,r);case Rh(a):if(Yh(a))return Uf(t,e,s,n,r);const u=[];if(i&&i[`${o}_len`]){const a=i[`${o}_len`];for(;u.length<a;)u.push(Uf(t,{name:o,type:e.type.replace("*","")},s,n,r))}return u;case Wh(a):return Uf(t,e,s,n,r);default:return Pf(a,t,s)}}var Vf=(t,e)=>{if(Sd(Rd(t)||kd(t)||Bd(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),Rd(t)&&!Nd(t))return;const n=BigInt(t.toString(10));Sd(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Hf=(t,e)=>{let n;switch(kd(t)&&Sd(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),Sd(Rd(t)||kd(t)||Bd(t)||Od(t)&&"low"in t&&"high"in t||Od(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case gd.u256:n=new Sh(t).toBigInt();break;case gd.u512:n=new kh(t).toBigInt();break;default:n=Dd(t)}switch(e.type){case gd.u8:Sd(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case gd.u16:Sd(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case gd.u32:Sd(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case gd.u64:Sd(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case gd.u128:Sd(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case gd.u256:Sd(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case gd.u512:Sd(kh.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case md.ClassHash:case md.ContractAddress:Sd(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case md.Secp256k1Point:Sd(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case md.U96:Sd(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Mf=(t,e)=>{Sd(xd(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},$f=(t,e,n)=>{if(e.type!==gd.u256&&e.type!==gd.u512){if(jh(e.type)){Sd(!Od(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));return void Sd(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}Sd(Od(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:n})=>{Sd(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)})}else Hf(t,e)},jf=(t,e)=>{Sd(Od(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(Dh(e.type)&&r.includes("isSome")&&r.includes("isNone")||Ph(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},zf=(t,e)=>{Sd(Od(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},qf=(t,e,n,r)=>{const i=Rh(e.type),s=i?Kh(e.type):Nf.getFixedArrayType(e.type);if(i&&Bh(s)&&ph(t))return;let o=[];if(i)Sd(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),o=t;else switch(!0){case Array.isArray(t):o=t;break;case"object"==typeof t:o=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case Bh(s):o.forEach(t=>Vf(t,e));break;case Ch(s):o.forEach(t=>zf(t,{name:e.name,type:s}));break;case Rh(s):o.forEach(t=>qf(t,{name:"",type:s},n,r));break;case Nh(s,n):o.forEach(t=>$f(t,{name:e.name,type:s},n));break;case Lh(s,r):o.forEach(t=>jf(t,{name:e.name,type:s}));break;case Uh(s)||Hh(s):o.forEach(t=>Hf(t,{name:"",type:s}));break;case Mh(s):o.forEach(t=>Mf(t,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${o}`)}};function Yf(t,e,n,r){t.inputs.reduce((t,i)=>{const s=e[t];switch(!0){case xh(i.name):return t;case Bh(i.type):Vf(s,i);break;case uf.isAbiType(i.type):uf.validate(s);break;case Uh(i.type)||Hh(i.type):Hf(s,i);break;case Mh(i.type):Mf(s,i);break;case yf.isAbiType(i.type):yf.validate(s);break;case vf.isAbiType(i.type):vf.validate(s);break;case Af.isAbiType(i.type):Af.validate(s);break;case Tf.isAbiType(i.type):Tf.validate(s);break;case Sf.isAbiType(i.type):Sf.validate(s);break;case If.isAbiType(i.type):If.validate(s);break;case Rh(i.type)||Nf.isTypeFixedArray(i.type):qf(s,i,n,r);break;case Nh(i.type,n):$f(s,i,n);break;case Lh(i.type,r):jf(s,i);break;case Ch(i.type):zf(s,i);break;case Wh(i.type):((t,e)=>{const n=Kh(e.type);switch(Sd(Uh(n)&&n!==kh.abiSelector||Bh(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case Bh(n):Vf(t,e),Sd(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Uh(n):Hf(t,{name:"",type:n}),n===gd.u256?Sd(new Sh(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):Sd(Dd(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1},0)}var Kf=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const n=function(t){return t.find(t=>"interface"===t.type)?2:Gh(t)?1:0}(t);if(0===n||1===n)return new xf(t,e);if(2===n)return new Bf(t,e);throw Error(`Unsupported ABI version ${n}`)}(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==fd&&Sd(this.abi.filter(e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===pd?!n:n}).map(t=>t.name).includes(e),(t===pd?"invocable":"viewable")+" method not found in abi");const r=this.abi.find(n=>t===fd?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type);if(Rf(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);Yf(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find(e=>e.name===t);if(Rf(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(Nf.isTypeFixedArray(e))return function(t,e){const n=Nf.getFixedArrayType(e),r=Nf.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map(t=>i(t,n))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(Rh(e))return function(t,e){const n=Kh(e);return Rd(t)?t:t.map(t=>i(t,n))}(t,e);if(Lh(e,r)){const n=r[e];return o(t,n)}if(Ch(e))return function(t,e){const n=Of(e).reduce((e,n,r)=>{const s=Object.keys(t),o=n?.type?n.type:n;return a=i(t[s[r]],o),Object.defineProperty(e,r.toString(),{enumerable:!0,value:a??t[s[r]]}),e;var a},{});return n}(t,e);if(jh(e))return t;if(Wh(e))return t;if(yf.isAbiType(e))return t;if(zh(e))return t;if(qh(e))return t;if(Sh.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(kh.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every(t=>t in n))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Nh(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce((e,n)=>{if("undefined"===t[n.name]&&(Yh(n.type)||!xh(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e},{}),o=(t,e)=>{if(Ph(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new of(sf.Ok,i(t.unwrap(),r)):new of(sf.Err,i(t.unwrap(),s))}if(Dh(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new rf(nf.Some,i(n.unwrap(),r)):new rf(nf.None,{})}const n=t,r=Object.entries(n.variant).map(t=>{if(Id(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]});return new ef(Object.fromEntries(r))};return e.reduce((e,n)=>{return xh(n.name)&&!Yh(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r},{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),Yf(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce((t,e)=>xh(e.name)&&!Yh(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:o}=e;let{value:a}=t.next();switch(!0){case Nf.isTypeFixedArray(o):if(!Array.isArray(a)&&"object"!=typeof a)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${a}`);return Df({element:a,type:e.type,structs:n,enums:r,parser:i});case Rh(o):if(!Array.isArray(a)&&!hh(a))throw Error(`ABI expected parameter ${s} to be array or long string, got ${a}`);return Rd(a)&&(a=gh(a)),Df({element:a,type:e.type,structs:n,enums:r,parser:i});case Wh(o):return Lf({type:Kh(o),val:a,parser:i});case jh(o):return Lf({type:o,val:a,parser:i});case Nh(o,n)||Ch(o)||Sh.isAbiType(o):case Lh(o,r):return Df({element:a,type:o,structs:n,enums:r,parser:i});default:return Lf({type:o,val:a,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap(([t,i])=>{let s=i;"entrypoint"===t?s=ih(s):ph(s)&&(s=_h(s));const o=Array.isArray(r)&&"0"===t?"$$len":t;if(Bd(s))return[[`${n}${o}`,tf(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?nf.Some:nf.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${o}.`):[[`${n}${o}`,tf(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?sf.Ok:sf.Err;return e({0:r,1:t.unwrap()},`${n}${o}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===r);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${o}`,tf(i)]]:e({0:i,1:t.unwrap()},`${n}${o}.`)}return e(s,`${n}${o}.`)}return[[`${n}${o}`,tf(s)]]})};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find(e=>e.name===t),r=e.flat()[Symbol.iterator](),i=n.flat().reduce((t,e,n)=>{const i=e.name??n;return t[i]=Ff({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return cf(this.parse(t,e),n)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Ud(t))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map(t=>Ff({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}};Hu({},{calculateContractAddressFromHash:()=>Sp,calculateDeclareTransactionHash:()=>bp,calculateDeployAccountTransactionHash:()=>_p,calculateInvokeTransactionHash:()=>mp,calculateL2MessageTxHash:()=>yp,computeCompiledClassHash:()=>Op,computeContractClassHash:()=>Dp,computeHashOnElements:()=>vp,computeHintedClassHash:()=>xp,computeLegacyContractClassHash:()=>Bp,computePedersenHash:()=>wp,computePedersenHashOnElements:()=>Ap,computePoseidonHash:()=>Ep,computePoseidonHashOnElements:()=>Tp,computeSierraContractClassHash:()=>Lp,formatSpaces:()=>kp,getL1MessageHash:()=>ch,getL2MessageHash:()=>ah,getSelector:()=>sh,getSelectorFromName:()=>ih,hashByteCodeSegments:()=>Cp,keccakBn:()=>nh,poseidon:()=>h,solidityUint256PackedKeccak256:()=>oh,starknetKeccak:()=>rh}),Hu({},{calculateDeclareTransactionHash:()=>cp,calculateDeployAccountTransactionHash:()=>ap,calculateInvokeTransactionHash:()=>up,calculateTransactionHashCommon:()=>op,encodeDataResourceBoundsL1:()=>ip,encodeResourceBoundsL1:()=>np,encodeResourceBoundsL2:()=>rp,hashDAMode:()=>ep,hashFeeFieldV3B3:()=>sp});var Gf=t=>t.map(t=>BigInt(t)),Wf=32n,Zf=128n,Xf=64n+Zf,Jf=BigInt(yh("L1_GAS")),Qf=BigInt(yh("L2_GAS")),tp=BigInt(yh("L1_DATA"));function ep(t,e){return(BigInt(t)<<Wf)+BigInt(e)}function np(t){return(Jf<<Xf)+(t.l1_gas.max_amount<<Zf)+t.l1_gas.max_price_per_unit}function rp(t){return(Qf<<Xf)+(t.l2_gas.max_amount<<Zf)+t.l2_gas.max_price_per_unit}function ip(t){return(tp<<Xf)+(t.l1_data_gas.max_amount<<Zf)+t.l1_data_gas.max_price_per_unit}function sp(t,e){const n=np(e),r=rp(e),i=ip(e);return Cs([BigInt(t),n,r,i])}function op(t,e,n,r,i,s,o,a,c,u,l=[]){const d=sp(s,u),h=ep(a,c),f=Gf([t,e,n,d,Cs(Gf(o)),r,i,h,...Gf(l)]);return Ud(Cs(f))}function ap(t,e,n,r,i,s,o,a,c,u,l,d){return op(zl.DEPLOY_ACCOUNT,i,t,s,o,l,d,a,c,u,[Cs(Gf(n)),e,r])}function cp(t,e,n,r,i,s,o,a,c,u,l,d){return op(zl.DECLARE,r,n,i,s,l,Gf(d),a,c,u,[Cs(Gf(o)),t,e])}function up(t,e,n,r,i,s,o,a,c,u,l){return op(zl.INVOKE,e,t,r,i,u,l,o,a,c,[Cs(Gf(s)),Cs(Gf(n))])}Hu({},{calculateDeclareTransactionHash:()=>fp,calculateDeployAccountTransactionHash:()=>pp,calculateL2MessageTxHash:()=>yp,calculateTransactionHash:()=>gp,calculateTransactionHashCommon:()=>hp,computeHashOnElements:()=>dp});var lp={};function dp(t){return[...t,t.length].reduce((t,e)=>ys(Dd(t),Dd(e)),0).toString()}function hp(t,e,n,r,i,s,o,a=[]){const c=dp(i);return dp([t,e,n,r,c,s,o,...a])}function fp(t,e,n,r,i,s,o){return hp(zl.DECLARE,n,e,0,[t],r,i,[s,...o?[o]:[]])}function pp(t,e,n,r,i,s,o,a){const c=[e,r,...n];return hp(zl.DEPLOY_ACCOUNT,i,t,0,c,s,o,[a])}function gp(t,e,n,r,i,s){return hp(zl.INVOKE,e,t,0,n,r,i,[s])}function yp(t,e,n,r,i,s){const o=[t,...r];return hp(zl.L1_HANDLER,0,e,sh(n),o,0,i,[s])}function mp(t){if(function(t){return[ju.ETransactionVersion.V3,ju.ETransactionVersion.F3].includes(t.version)}(t))return up(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function bp(t){if(function(t){return[ju.ETransactionVersion.V3,ju.ETransactionVersion.F3].includes(t.version)}(t))return cp(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function _p(t){if(function(t){return[ju.ETransactionVersion.V3,ju.ETransactionVersion.F3].includes(t.version)}(t))return ap(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function wp(t,e){return ys(BigInt(t),BigInt(e))}function Ep(t,e){return Ud(xs(BigInt(t),BigInt(e)))}function vp(t){return[...t,t.length].reduce((t,e)=>ys(BigInt(t),BigInt(e)),0).toString()}Hu(lp,{starkCurve:()=>p,weierstrass:()=>f});var Ap=vp;function Tp(t){return Ud(Cs(t.map(t=>BigInt(t))))}function Sp(t,e,n,r){const i=vp(Kf.compile(n)),s=vp([tf("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return Ud(BigInt(s)%wl)}function Ip(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function kp(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function xp(t){const{abi:e,program:n}=t,r=kp(Ad({abi:e,program:n},Ip));return nl(_s(Zu(r)).toString(16))}function Bp(t){const e=Rd(t)?Ed(t):t,n=Ud(ml),r=vp(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=vp(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),s=vp(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),o=vp(e.program.builtins.map(t=>yh(t))),a=xp(e),c=vp(e.program.data);return vp([n,r,i,s,o,a,c])}function Rp(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,Cs(e.flatMap(t=>BigInt(yh(t)))))];var e});return Cs(e)}function Cp(t){const e=t.bytecode.map(t=>BigInt(t)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(t=>{const n=e.slice(r,r+=t);return[BigInt(t),Cs(n)]});return 1n+Cs(i)}function Op(t){const e=BigInt(yh("COMPILED_CLASS_V1")),n=Rp(t.entry_points_by_type.EXTERNAL),r=Rp(t.entry_points_by_type.L1_HANDLER),i=Rp(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?Cp(t):Cs(t.bytecode.map(t=>BigInt(t)));return Ud(Cs([e,n,r,i,s]))}function Np(t){return Cs(t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]))}function Lp(t){const e=BigInt(yh("CONTRACT_CLASS_V0.1.0")),n=Np(t.entry_points_by_type.EXTERNAL),r=Np(t.entry_points_by_type.L1_HANDLER),i=Np(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=kp(Ad(t.abi,null));return BigInt(nl(_s(Zu(e)).toString(16)))}(t),o=Cs(t.sierra_program.map(t=>BigInt(t)));return Ud(Cs([e,n,r,i,s,o]))}function Dp(t){const e=Rd(t)?Ed(t):t;return"sierra_program"in e?Lp(e):Bp(e)}var Pp={};function Up(t){const e=Rd(t)?t:Ad(t);return Qu(mu(e))}function Fp(t){if(Array.isArray(t))return t;const e=Gu(bu(Ju(t)));return Ed(e)}function Vp(){return as(rs.randomPrivateKey())}function Hp(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Ud(t));try{const{r:e,s:n}=t;return[Ud(e),Ud(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Mp(t){return zd(Hp(t))}function $p(t){return qd(Hp(t))}function jp(){return zp({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function zp(t,e=Zl.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Jd(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:Jd(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Jd(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:Jd(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Jd(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:Jd(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function qp(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Yp(t,e=Zl.get("resourceBoundsOverhead")){return Jd(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*Jd(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+Jd(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*Jd(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+Jd(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*Jd(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Kp(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Gp(t){if(t===rd.L1)return id.L1;if(t===rd.L2)return id.L2;throw Error("EDAM conversion")}function Wp(t,e){const n=Ud(e||t);if(!Object.values(nd).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function Zp(t){if(!t)return;const e=Ud(t);if(e===td.V0)return td.F0;if(e===td.V1)return td.F1;if(e===td.V2)return td.F2;if(e===td.V3)return td.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function Xp(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||rd.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||rd.L1,resourceBounds:t.resourceBounds??jp()}}function Jp(t){return nl(tl(Gi(Ud(t),!1)))}function Qp(t){const e=t=>{if(Bd(t))return Ud(t);if(Od(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function tg(t){const e=t=>{if(Rd(t))return BigInt(t);if(Od(t)){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}return t};return e(t)}function eg(t){return"sierra_program"in(Rd(t)?Ed(t):t)}function ng(t){const e={...t};if(eg(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Op(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??Dp(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function rg(){return ol(tl(Nu.utils.randomPrivateKey()))}function ig(t){jd(t,pl,2n**160n-1n,"Ethereum Address ");const e=nl(el(Ud(t)).padStart(40,"0"));return Sd(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}Hu(Pp,{ZeroFeeEstimate:()=>Kp,compressProgram:()=>Up,decompressProgram:()=>Fp,formatSignature:()=>Hp,getFullPublicKey:()=>Jp,intDAM:()=>Gp,randomAddress:()=>Vp,resourceBoundsToBigInt:()=>tg,resourceBoundsToEstimateFeeResponse:()=>qp,resourceBoundsToHexString:()=>Qp,signatureToDecimalArray:()=>Mp,signatureToHexArray:()=>$p,toFeeVersion:()=>Zp,toOverheadOverallFee:()=>Yp,toOverheadResourceBounds:()=>zp,toTransactionVersion:()=>Wp,v3Details:()=>Xp,zeroResourceBounds:()=>jp}),Hu({},{ethRandomPrivateKey:()=>rg,validateAndParseEthAddress:()=>ig});var sg="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==n.g&&n.g.fetch.bind(n.g)||(()=>{throw new hf("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function og(t){const e=t.version?Ud(t.version):td.V3;return e===td.V3||e===td.F3}function ag(t,e){const n=t.split("."),r=e.split(".");return n.every((t,e)=>"*"===t||t===r[e])}function cg(t,e={allowAnyPatchVersion:!1}){return Object.values(ql).some(n=>ag(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}(n):n,t))}function ug(t){return new Promise(e=>{setTimeout(e,t)})}function lg(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=kp(Ad(t.abi)),e.sierra_program=kp(Ad(t.sierra_program)),e.sierra_program=Up(e.sierra_program),e}function dg(t){const e=Rd(t)?Ed(t):t;return eg(t)?lg(e):{...e,..."program"in e&&{program:Up(e.program)}}}function hg(t){return Rd(t.abi)?Ed(t.abi):t.abi}Hu({},{Block:()=>mg,createSierraContractClass:()=>lg,extractAbi:()=>hg,getDefaultNodeUrl:()=>fg,getDefaultNodes:()=>pg,getSupportedRpcVersions:()=>gg,parseContract:()=>dg,validBlockTags:()=>yg,wait:()=>ug});var fg=(t,e=!1,n)=>{e||Jl.info("Using default public node url, please provide nodeUrl in provider options!");const r=pg(n??Zl.get("rpcVersion"))[t??$l.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function pg(t){const e={...Kl};return Object.keys(e).forEach(function(n,r){e[n]=e[n].map(e=>`${e}${function(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}(t)}`)}),e}function gg(){return[...new Set(Object.values(ql))]}var yg=Object.values(hd),mg=class{hash=null;number=null;tag=null;setIdentifier(t){if(Rd(t))if(dh(t))this.number=parseInt(t,10);else if(Nd(t))this.hash=t;else{if(!yg.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else Bd(t)?this.hash=Ud(t):kd(t)?this.number=t:this.tag=hd.LATEST;if(kd(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function bg(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}Hu({},{fromCallsToExecuteCalldata:()=>wg,fromCallsToExecuteCalldata_cairo1:()=>Eg,getCompiledCalldata:()=>bg,getExecuteCalldata:()=>vg,getVersionsByType:()=>Ag,transformCallsToMulticallArrays:()=>_g});var _g=t=>{const e=[],n=[];return t.forEach(t=>{const r=Kf.compile(t.calldata||[]);e.push({to:Dd(t.contractAddress).toString(10),selector:Dd(ih(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:e,calldata:Kf.compile({calldata:n})}},wg=t=>{const{callArray:e,calldata:n}=_g(t);return[...Kf.compile({callArray:e}),...n]},Eg=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:Kf.compile(t.calldata)}));return Kf.compile({orderCalls:e})},vg=(t,e="0")=>"1"===e?Eg(t):wg(t);function Ag(t){return"fee"===t?{v3:td.F3}:{v3:td.V3}}var Tg={headers:{"Content-Type":"application/json"},blockIdentifier:hd.LATEST,retries:200},Sg=class{id="RPC081";channelSpecVersion=ql.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values($l).includes(o)?this.nodeUrl=fg(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||fg(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Zl.get("fetch")||sg,this.blockIdentifier=r??Tg.blockIdentifier,this.chainId=i,this.headers={...Tg.headers,...s},this.retries=a??Tg.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,kd(n)&&(this.batchClient=new Td({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Jl.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ad(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ff(n,t,e);if(r instanceof hf)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ag(this.channelSpecVersion,t)||Jl.error(Wl.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!cg(t))throw new hf(`${Wl.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Ud(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new mg(r).identifier,s=qd(t),o=qd(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=Ud(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new mg(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Ud(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new mg(n).identifier,o=[];return r&&o.push(M.SKIP_VALIDATE),i&&o.push(M.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Ud(t);let{retries:r}=this,i=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,a=e?.errorStates??[$.REJECTED],c=e?.successStates??[$.ACCEPTED_ON_L2,$.ACCEPTED_ON_L1],u=[];let l;for(;!i;){await ug(o);try{l=await this.getTransactionStatus(n),u.push(l.finality_status);const t=l.execution_status,e=l.finality_status;if(!e)throw new Error("waiting for transaction status");if(a.includes(t)||a.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=l,s=!0,r}(c.includes(t)||c.includes(e))&&(i=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof ff&&t.isType("TXN_HASH_NOT_FOUND")){Jl.info("txLife: ",u);const t={[It.RECEIVED]:Wl.txEvictedFromMempool,[It.PRE_CONFIRMED]:Wl.consensusFailed,[It.CANDIDATE]:Wl.txFailsBlockBuildingValidation}[u.at(-1)];if(t)throw new Error(t)}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await ug(o)}return d}getStorageAt(t,e,n=this.blockIdentifier){const r=Ud(t),i=Vd(e),s=new mg(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new mg(e).identifier,i={simulation_flags:n?[M.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){let n;if(!og(e))throw Error(Wl.legacyTxRPC08Message);if(!sd(e.resourceBounds))throw Error(Wl.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:H.INVOKE,sender_address:t.contractAddress,calldata:Kf.toHex(t.calldata),version:G.V3,signature:$p(t.signature),nonce:Ud(e.nonce),resource_bounds:Qp(e.resourceBounds),tip:Ud(e.tip),paymaster_data:e.paymasterData.map(t=>Ud(t)),account_deployment_data:e.accountDeploymentData.map(t=>Ud(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(!eg(t)||!og(i))throw Error(Wl.legacyTxRPC08Message);if(!sd(i.resourceBounds))throw Error(Wl.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:H.DECLARE,sender_address:n,compiled_class_hash:r||"",version:G.V3,signature:$p(e),nonce:Ud(i.nonce),contract_class:{sierra_program:Fp(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:Qp(i.resourceBounds),tip:Ud(i.tip),paymaster_data:i.paymasterData.map(t=>Ud(t)),account_deployment_data:i.accountDeploymentData.map(t=>Ud(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(!og(i))throw Error(Wl.legacyTxRPC08Message);if(!sd(i.resourceBounds))throw Error(Wl.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:H.DEPLOY_ACCOUNT,version:G.V3,signature:$p(r),nonce:Ud(i.nonce),contract_address_salt:Ud(n||0),constructor_calldata:Kf.toHex(e||[]),class_hash:Ud(t),resource_bounds:Qp(i.resourceBounds),tip:Ud(i.tip),paymaster_data:i.paymasterData.map(t=>Ud(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new mg(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:ih(t.entrypoint),calldata:Kf.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:ig(n),to_address:Ud(r),entry_point_selector:sh(i),payload:Wd(s)},a=new mg(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ag(e);let r;if(!og(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:$p(t.signature),nonce:Ud(t.nonce),resource_bounds:Qp(t.resourceBounds),tip:Ud(t.tip),paymaster_data:t.paymasterData.map(t=>Ud(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Ud(t))},t.type===H.INVOKE)return{type:H.INVOKE,sender_address:t.contractAddress,calldata:Kf.toHex(t.calldata),version:Ud(t.version||n.v3),...r};if(t.type===H.DECLARE){if(!eg(t.contract))throw Jl.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Fp(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Ud(t.version||n.v3),...r}}if(t.type===H.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=r;return{type:t.type,constructor_calldata:Kf.toHex(t.constructorCalldata||[]),class_hash:Ud(t.classHash),contract_address_salt:Ud(t.addressSalt||0),version:Ud(t.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},Ig={};Hu(Ig,{RpcChannel:()=>xg});var kg={headers:{"Content-Type":"application/json"},blockIdentifier:hd.LATEST,retries:200},xg=class{id="RPC090";channelSpecVersion=ql.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values($l).includes(o)?this.nodeUrl=fg(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||fg(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Zl.get("fetch")||sg,this.blockIdentifier=r??kg.blockIdentifier,this.chainId=i,this.headers={...kg.headers,...s},this.retries=a??kg.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,kd(n)&&(this.batchClient=new Td({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Jl.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ad(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ff(n,t,e);if(r instanceof hf)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ag(this.channelSpecVersion,t)||Jl.error(Wl.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!cg(t))throw new hf(`${Wl.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Ud(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new mg(r).identifier,s=qd(t),o=qd(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=Ud(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new mg(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new mg(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Ud(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Ud(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new mg(n).identifier,o=[];return r&&o.push(St.SKIP_VALIDATE),i&&o.push(St.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const n=Ud(t);let{retries:r}=this,i=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,a=e?.errorStates??[],c=e?.successStates??[kt.ACCEPTED_ON_L2,kt.ACCEPTED_ON_L1],u=[];let l;for(;!i;){await ug(o);try{l=await this.getTransactionStatus(n),u.push(l.finality_status);const t=l.execution_status,e=l.finality_status;if(!e)throw new Error("waiting for transaction status");if(a.includes(t)||a.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=l,s=!0,r}(c.includes(t)||c.includes(e))&&(i=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof ff&&t.isType("TXN_HASH_NOT_FOUND")){Jl.info("txLife: ",u);const t={[It.RECEIVED]:Wl.txEvictedFromMempool,[It.PRE_CONFIRMED]:Wl.consensusFailed,[It.CANDIDATE]:Wl.txFailsBlockBuildingValidation}[u.at(-1)];if(t)throw new Error(t)}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await ug(o)}return d}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const o=r?.retryInterval??500,a=[xt.REVERTED],c=[kt.ACCEPTED_ON_L2,kt.ACCEPTED_ON_L1,kt.PRE_CONFIRMED];let u;const l=(new Date).getTime();for(;s>0;){await ug(o),u=await this.getTransactionStatus(t),Jl.info(`${s} ${JSON.stringify(u)} ${((new Date).getTime()-l)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(a.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=u,t}if(c.includes(r)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,hd.PRE_CONFIRMED)),Jl.info(`${s} Checking new nonce ${t} ${((new Date).getTime()-l)/1e3}s.`),t!==i)return!0;await ug(o),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=Ud(t),i=Vd(e),s=new mg(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=Ud(t),r=new mg(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new mg(e).identifier,i={simulation_flags:n?[St.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:ju.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:ju.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:ju.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new mg(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:ih(t.entrypoint),calldata:Kf.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:ig(n),to_address:Ud(r),entry_point_selector:sh(i),payload:Wd(s)},a=new mg(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=Ag(e);Sd(og(t),Wl.legacyTxRPC08Message),Sd("transaction"!==e||sd(t.resourceBounds),Wl.SWOldV3);const r={signature:$p(t.signature),nonce:Ud(t.nonce),resource_bounds:Qp(t.resourceBounds),tip:Ud(t.tip),paymaster_data:t.paymasterData.map(t=>Ud(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Ud(t)),version:Wp(n.v3,t.version)};if(t.type===ju.ETransactionType.INVOKE)return{type:Tt.INVOKE,sender_address:t.contractAddress,calldata:Kf.toHex(t.calldata),...r};if(t.type===ju.ETransactionType.DECLARE)return Sd(eg(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Fp(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===ju.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:Kf.toHex(t.constructorCalldata||[]),class_hash:Ud(t.classHash),contract_address_salt:Ud(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},Bg=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==n.g&&n.g.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:zp(t,this.resourceBoundsOverhead),overall_fee:Yp(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:zp(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:Yp(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:Rd(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function Rg(t){return"0x3"===t.version&&"tip"in t&&Rd(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function Cg(t,e=!0){return t.transactions.filter(Rg).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function Og(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Ng(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,o=t[r];return o+(t[i]-o)*BigInt(Math.round(1e3*s))/1000n}function Lg(t){Sd(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,vl.max),n=t.reduce((t,e)=>e>t?e:t,0n),r=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),s=Math.floor(i.length/2);let o;o=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const a=new Map;t.forEach(t=>{a.set(t,(a.get(t)||0)+1)});const{modeTip:c}=Array.from(a.entries()).reduce((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:o,modeTip:c,recommendedTip:o,p90Tip:Ng(i,90),p95Tip:Ng(i,95)}}async function Dg(t,e){try{const n=await t.getBlockWithTxs(e);return kd(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new hf(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function Pg(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Jl.warn(`Failed to fetch block ${e}:`,t),null}}function Ug(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(e,n)=>t-n)}async function Fg(t,e=hd.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return Sd(Number.isInteger(r),"maxBlocks parameter must be an integer"),Sd(r>=1,"maxBlocks parameter must be greater than or equal to 1"),Sd(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),Sd(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),Sd(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Dg(t,e),o=Ug(n,r),a=await async function(t,e){const n=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Jl.warn(`Failed to fetch block ${e} in parallel:`,t),null}});return Promise.all(n)}(t,o),c=a.filter(t=>null!==t).flatMap(t=>Cg(t,s)),u=a.filter(t=>null!==t).length;return c.length<i?(Jl.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Og(u,c)):{...Lg(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new hf(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Dg(t,e),o=Ug(n,r),a=[];let c=0;for(const e of o){const n=await Pg(t,e);if(n){c+=1;const t=Cg(n,s);if(a.push(...t),a.length>=i)break}}return a.length<i?(Jl.error(`Insufficient transaction data: found ${a.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Og(c,a)):{...Lg(a),metrics:{blocksAnalyzed:c,transactionsTipsFound:a}}}catch(t){throw new hf(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var Vg=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===dd.SUCCEEDED}static isReverted(t){return t.execution_status===dd.REVERTED}},Hg={[dd.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[dd.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Mg(t){const e=Hg[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,o=s(t);n={...i(t),statusReceipt:r,value:o,match:t=>r in t?t[r](o):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,Vg.prototype),Object.defineProperty(n,"constructor",{value:Vg,writable:!1,enumerable:!1,configurable:!1}),n}Hu({},{encodeData:()=>ny,encodeType:()=>Qg,encodeValue:()=>ey,getDependencies:()=>Jg,getMessageHash:()=>iy,getStructHash:()=>ry,getTypeHash:()=>ty,isMerkleTreeType:()=>Xg,prepareSelector:()=>Zg,validateTypedData:()=>Wg,verifyMessage:()=>sy}),Hu({},{MerkleTree:()=>$g,proofMerklePath:()=>jg});var $g=class t{leaves;branches=[];root;hashMethod;constructor(t,e=wp){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=wp){const[r,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,o=(s?n[i+1]:n[i-1])??"0x0",a=[...r,o],c=this.leaves.length===n.length?-1:this.branches.findIndex(t=>t.length===n.length),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:o,s?o:e,this.hashMethod),u,a)}};function jg(t,e,n,r=wp){if(0===n.length)return t===e;const[i,...s]=n;return jg(t,$g.hash(e,i,r),s,r)}var zg={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},qg={[ju.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:Tp,hashMerkleMethod:Ep,escapeTypeString:t=>`"${t}"`,presetTypes:zg},[ju.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:Ap,hashMerkleMethod:wp,escapeTypeString:t=>t,presetTypes:{}}};function Yg(t,e,{min:n,max:r}){const i=BigInt(t);Sd(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Kg({types:t,domain:e}){return qg[ju.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===ju.TypedDataRevision.ACTIVE?ju.TypedDataRevision.ACTIVE:qg[ju.TypedDataRevision.LEGACY].domain in t&&(e.revision??ju.TypedDataRevision.LEGACY)===ju.TypedDataRevision.LEGACY?ju.TypedDataRevision.LEGACY:void 0}function Gg(t){try{return Ud(t)}catch(e){if(Rd(t))return Ud(yh(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Wg(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Kg(e))}function Zg(t){return Nd(t)?t:ih(t)}function Xg(t){return"merkletree"===t.type}function Jg(t,e,n=[],r="",i=ju.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===ju.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),s.filter(e=>!n.includes(e)&&t[e]).reduce((e,n)=>[...e,...[n,...t[n].reduce((e,n)=>[...e,...Jg(t,n.type,e,n.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function Qg(t,e,n=ju.TypedDataRevision.LEGACY){const r=n===ju.TypedDataRevision.ACTIVE?{...t,...qg[n].presetTypes}:t,[i,...s]=Jg(r,e,void 0,void 0,n),o=i?[i,...s.sort()]:[],a=qg[n].escapeTypeString;return o.map(t=>{const e=r[t].map(t=>{const e="enum"===t.type&&n===ju.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map(t=>t?a(t):t).join(",")})`:a(e);return`${a(t.name)}:${r}`});return`${a(t)}(${e})`}).join("")}function ty(t,e,n=ju.TypedDataRevision.LEGACY){return ih(Qg(t,e,n))}function ey(t,e,n,r={},i=ju.TypedDataRevision.LEGACY){if(t[e])return[e,ry(t,e,n,i)];if(qg[i].presetTypes[e])return[e,ry(qg[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map(n=>ey(t,e.slice(0,-1),n,void 0,i)[1]);return[e,qg[i].hashMethod(r)]}switch(e){case"enum":if(i===ju.TypedDataRevision.ACTIVE){const[s,o]=Object.entries(n)[0],a=t[r.parent].find(t=>t.name===r.key),c=t[a.contains],u=c.find(t=>t.name===s),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map((e,n)=>{if(!e)return e;const r=o[n];return ey(t,e,r,void 0,i)[1]});return[e,qg[i].hashMethod([l,...d])]}return[e,Gg(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find(t=>t.name===e.key);if(!Xg(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map(n=>ey(t,e,n,void 0,i)[1]),{root:o}=new $g(s,qg[i].hashMerkleMethod);return["felt",o]}case"selector":return["felt",Zg(n)];case"string":if(i===ju.TypedDataRevision.ACTIVE){const t=_h(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,qg[i].hashMethod(r)]}return[e,Gg(n)];case"i128":if(i===ju.TypedDataRevision.ACTIVE){const t=BigInt(n);return Yg(t,e,Nl),[e,Gg(t<0n?bl+t:t)]}return[e,Gg(n)];case"timestamp":case"u128":return i===ju.TypedDataRevision.ACTIVE&&Yg(n,e,xl),[e,Gg(n)];case"felt":case"shortstring":return i===ju.TypedDataRevision.ACTIVE&&Yg(Gg(n),e,vl),[e,Gg(n)];case"ClassHash":case"ContractAddress":return i===ju.TypedDataRevision.ACTIVE&&Yg(n,e,vl),[e,Gg(n)];case"bool":return i===ju.TypedDataRevision.ACTIVE&&Sd(xd(n),`Type mismatch for ${e} ${n}`),[e,Gg(n)];default:if(i===ju.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,Gg(n)]}}function ny(t,e,n,r=ju.TypedDataRevision.LEGACY){const i=t[e]??qg[r].presetTypes[e],[s,o]=i.reduce(([i,s],o)=>{if(void 0===n[o.name]||null===n[o.name]&&"enum"!==o.type)throw new Error(`Cannot encode data: missing data for '${o.name}'`);const a=n[o.name],c={parent:e,key:o.name},[u,l]=ey(t,o.type,a,c,r);return[[...i,u],[...s,l]]},[["felt"],[ty(t,e,r)]]);return[s,o]}function ry(t,e,n,r=ju.TypedDataRevision.LEGACY){return qg[r].hashMethod(ny(t,e,n,r)[1])}function iy(t,e){if(!Wg(t))throw new Error("Typed data does not match JSON schema");const n=Kg(t),{domain:r,hashMethod:i}=qg[n];return i([yh("StarkNet Message"),ry(t.types,r,t.domain,n),e,ry(t.types,t.primaryType,t.message,n)])}function sy(t,e,n,r){const i=Wg(t);if(!th(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!th(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?iy(t,r):Ud(t);return Qi(Array.isArray(e)?new ns(BigInt(e[0]),BigInt(e[1])):e,s,Ud(n))}var oy=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new Bg;else{const e=t;if(e&&e.specVersion)if(ag("0.8",e.specVersion))this.channel=new Ql.RpcChannel({...e,waitMode:!1});else{if(!ag("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new Ig.RpcChannel({...e,waitMode:!1})}else if(ag("0.8",Zl.get("rpcVersion")))this.channel=new Ql.RpcChannel({...e,waitMode:!1});else{if(!ag("0.9",Zl.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Ig.RpcChannel({...e,waitMode:!1})}this.responseParser=new Bg(e?.resourceBoundsOverhead)}}static async create(t){const e=new Ql.RpcChannel({...t}),n=await e.getSpecVersion();if(cg(n)||Jl.warn(`Using incompatible node spec version ${n}`),ag("0.8",n))return new this({...t,specVersion:ql.v0_8_1});if(ag("0.9",n))return new this({...t,specVersion:ql.v0_9_0});throw new hf(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(ql).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=hd.LATEST,e=5e3){if(t===hd.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===hd.PRE_CONFIRMED?n+1:Number(Ud(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await ug(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof Ig.RpcChannel)return async function(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}(this.channel,t);throw new hf("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);Sd("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return oh([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Mg(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return Mg(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof Ig.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return eg(i)?r?{cairo:"1",compiler:Zh(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:ju.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:ju.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:ju.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Ql.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof Ig.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return async function(t,e,n,r,i,s){const o=Wg(e);if(!th(e)&&!o)throw new Error("message has a wrong format.");if(!th(r))throw new Error("accountAddress shall be a BigNumberish");const a=o?iy(e,r):Ud(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:Ud(r),entrypoint:e,calldata:Kf.compile({hash:Dd(a).toString(),signature:Hp(n)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some(e=>t.message.includes(e)))return!1;l=t}throw Error(`Signature verification Error: ${l}`)}(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=ng(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof hf)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===ju.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return Fg(this,t,e)}};Hu({},{StarknetIdContract:()=>yy,StarknetIdIdentityContract:()=>by,StarknetIdMulticallContract:()=>wy,StarknetIdPfpContract:()=>Ty,StarknetIdPopContract:()=>Iy,StarknetIdVerifierContract:()=>vy,dynamicCallData:()=>Ry,dynamicFelt:()=>By,execution:()=>xy,getStarknetIdContract:()=>my,getStarknetIdIdentityContract:()=>_y,getStarknetIdMulticallContract:()=>Ey,getStarknetIdPfpContract:()=>Sy,getStarknetIdPopContract:()=>ky,getStarknetIdVerifierContract:()=>Ay,isStarkDomain:()=>Cy,useDecoded:()=>py,useEncoded:()=>gy});var ay="abcdefghijklmnopqrstuvwxyz0123456789-",cy=BigInt(ay.length+1),uy="",ly=BigInt(ay.length),dy=BigInt(uy.length),hy=BigInt(uy.length+1);function fy(t){let e=0;for(;t.endsWith(uy[uy.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function py(t){let e="";return t.forEach(t=>{for(;t!==pl;){const n=t%cy;if(t/=cy,n===BigInt(ay.length)){const n=t/hy;if(n===pl){const r=t%hy;t=n,e+=r===pl?ay[0]:uy[Number(r)-1]}else e+=uy[Number(t%dy)],t/=dy}else e+=ay[Number(n)]}const[n,r]=fy(e);r&&(e=n+(r%2==0?uy[uy.length-1].repeat(r/2-1)+uy[0]+ay[1]:uy[uy.length-1].repeat((r-1)/2+1))),e+="."}),e?e.concat("stark"):e}function gy(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(uy[0]+ay[1])){const[e,n]=fy(t.substring(0,t.length-2));t=e+uy[uy.length-1].repeat(2*(n+1))}else{const[e,n]=fy(t);n&&(t=e+uy[uy.length-1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=ay.indexOf(i),o=BigInt(ay.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===ay[0]?(e+=n*ly,n*=cy,n*=cy):(e+=n*o,n*=cy);else if(-1!==uy.indexOf(i)){e+=n*ly,n*=cy;const s=(r===t.length-1?1:0)+uy.indexOf(i);e+=n*BigInt(s),n*=dy}}return e}var yy={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function my(t){switch(t){case jl.SN_MAIN:return yy.MAINNET;case jl.SN_SEPOLIA:return yy.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var by={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function _y(t){switch(t){case jl.SN_MAIN:return by.MAINNET;case jl.SN_SEPOLIA:return by.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var wy="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Ey(t){switch(t){case jl.SN_MAIN:case jl.SN_SEPOLIA:return wy;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var vy={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function Ay(t){switch(t){case jl.SN_MAIN:return vy.MAINNET;case jl.SN_SEPOLIA:return vy.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Ty={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function Sy(t){switch(t){case jl.SN_MAIN:return Ty.MAINNET;case jl.SN_SEPOLIA:return Ty.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var Iy={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function ky(t){switch(t){case jl.SN_MAIN:return Iy.MAINNET;case jl.SN_SEPOLIA:return Iy.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function xy(t,e=void 0,n=void 0){return new ef({Static:t,IfEqual:e?Qh(e[0],e[1],e[2]):void 0,IfNotEqual:n?Qh(n[0],n[1],n[2]):void 0})}function By(t,e=void 0){return new ef({Hardcoded:t,Reference:e?Qh(e[0],e[1]):void 0})}function Ry(t,e=void 0,n=void 0){return new ef({Hardcoded:t,Reference:e?Qh(e[0],e[1]):void 0,ArrayReference:n?Qh(n[0],n[1]):void 0})}function Cy(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var Oy=class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,o,a){return t.getStarkProfile(this,e,n,r,i,s,o,a)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??my(r);try{const n=py((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:Kf.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!Cy(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??my(i);try{const e=r.replace(".stark","").split(".").map(t=>gy(t).toString(10));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:Kf.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,o,a){const c=await t.getChainId(),u=n??my(c),l=r??_y(c),d=i??Ay(c),h=s??Sy(c),f=o??ky(c),p=a??Ey(c);try{const n=[{execution:xy({}),to:Ry(u),selector:Ry(ih("address_to_domain")),calldata:[Ry(e),Ry("0")]},{execution:xy({}),to:By(u),selector:By(ih("domain_to_id")),calldata:[Ry(void 0,void 0,[0,0])]},{execution:xy({}),to:By(l),selector:By(ih("get_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("twitter")),Ry(d),Ry("0")]},{execution:xy({}),to:By(l),selector:By(ih("get_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("github")),Ry(d),Ry("0")]},{execution:xy({}),to:By(l),selector:By(ih("get_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("discord")),Ry(d),Ry("0")]},{execution:xy({}),to:By(l),selector:By(ih("get_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("proof_of_personhood")),Ry(f),Ry("0")]},{execution:xy({}),to:By(l),selector:By(ih("get_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("nft_pp_contract")),Ry(h),Ry("0")]},{execution:xy({}),to:By(l),selector:By(ih("get_extended_verifier_data")),calldata:[Ry(void 0,[1,0]),Ry(yh("nft_pp_id")),Ry("2"),Ry(h),Ry("0")]},{execution:xy(void 0,void 0,[6,0,0]),to:By(void 0,[6,0]),selector:By(ih("tokenURI")),calldata:[Ry(void 0,[7,1]),Ry(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:Kf.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=py(e[0].slice(1).map(t=>BigInt(t))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,o="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,a="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:o,discord:a,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map(t=>mh(t)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function Ny(t){return gy(t.endsWith(".brother")?t.replace(".brother",""):t)}function Ly(t){const e=py([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function Dy(t){return jl.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var Py=class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??Dy();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Kf.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return Ly(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??Dy();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:Kf.compile({domain:Ny(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??Dy();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Kf.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=Ly(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:Kf.compile({domain:Ny(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},Uy=class extends((0,Lu.Mixin)(oy,Oy,Py)){},Fy=(new oy({default:!0}),class{pk;constructor(t=rs.randomPrivateKey()){this.pk=t instanceof Uint8Array?tl(t):Ud(t)}async getPubKey(){return as(this.pk)}async signMessage(t,e){const n=iy(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=vg(t,e.cairoVersion);let r;if(!Object.values(ju.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=mp({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:Gp(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:Gp(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=Kf.compile(t.constructorCalldata);let n;if(!Object.values(ju.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=_p({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:Gp(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Gp(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(ju.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=bp({...n,version:n.version,nonceDataAvailabilityMode:Gp(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Gp(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return Ji(t,this.pk)}});function Vy(t){return new Sh(t).toBigInt()}function Hy(t){return Sh.is(t)}function My(t){return new Sh(t).toUint256HexString()}function $y(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function jy(t){const e=t.calldata??[],n=Array.isArray(e)?e:Kf.compile(e);return{to:t.contractAddress,selector:ih(t.entrypoint),calldata:n}}function zy(t,e){const n=jy(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function qy(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Yy(t,e,n,r,i){return"1"===i?{types:bd,primaryType:"OutsideExecution",domain:qy(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(t=>zy(t,i))}}:{types:_d,primaryType:"OutsideExecution",domain:qy(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(t=>zy(t,i))}}}function Ky(t){const e=t.outsideExecution,n=Hp(t.signature);return Kf.compile({outside_execution:e,signature:n})}function Gy(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Ud(t.signerAddress),entrypoint:e,calldata:Ky(t)}})}async function Wy(t,e,n){const r={contractAddress:Ud(e),entrypoint:"supports_interface",calldata:[Ud(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}Hu({},{bnToUint256:()=>My,isUint256:()=>Hy,uint256ToBN:()=>Vy}),Hu({},{buildExecuteFromOutsideCall:()=>Gy,buildExecuteFromOutsideCallData:()=>Ky,getOutsideCall:()=>jy,getTypedData:()=>Yy,toOutsideCallV2:()=>$y}),Hu({},{supportsInterface:()=>Wy}),Hu({},{assertCallsAreStrictlyEqual:()=>Xy,assertPaymasterTransactionSafety:()=>Jy,getDefaultPaymasterNodeUrl:()=>Zy});var Zy=(t,e=!1)=>{e||Jl.info("Using default public node url, please provide nodeUrl in provider options!");const n=Gl[t??$l.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Xy(t,e){const n="Provided calls are not strictly equal to the returned calls";Sd(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=$y(e[r]),o=t=>Dd(t).toString(16).toLowerCase();Sd(o(i.contractAddress)===o(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),Sd(ih(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const a=Kf.toCalldata(i.calldata),c=Kf.toCalldata(s.Calldata);Sd(a.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${a.length}, Got length: ${c.length}`);for(let t=0;t<a.length;t+=1)Sd(BigInt(a[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${a[t]}, Got: ${c[t]}`)}}var Jy=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Xy(e,i),((t,e)=>{const n=$y(t[t.length-1]);Sd(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(Sd(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=$y(t[t.length-1]),r=Kf.toCalldata(n.Calldata)[1];Sd(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},Qy=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},tm=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,em=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},nm={"Content-Type":"application/json"},rm=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...nm,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Zy(void 0),this.headers={...nm,...e.headers},this.baseFetch=e.baseFetch??sg,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values($l).includes(n)?this.nodeUrl=Zy(n,e?.default):this.nodeUrl=n||Zy(void 0,e?.default),this.baseFetch=i??sg,this.headers={...nm,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ad(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ff(n,t,e);if(r instanceof hf)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map(t=>({to:t.contractAddress,selector:ih(t.entrypoint),calldata:Kf.toHex(t.calldata)})))}};break;default:n=t}var r;const i={version:e.version,fee_mode:Qy(e.feeMode),time_bounds:tm(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),o={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:em(s.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:em(s.parameters),fee:o};default:return{type:"deploy",deployment:s.deployment,parameters:em(s.parameters),fee:o}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:$p(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:Qy(e.feeMode),time_bounds:tm(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},im=new rm({default:!0}),sm=class{address;entryPoint;constructor(t,e){this.address=t??Dl.ADDRESS,this.entryPoint=e??Dl.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:o}=t,a=bg(s,()=>{if(o){const t=new Kf(o),e=Object.values(s);return t.validate(fd,"constructor",e),t.compile("constructor",e)}return Kf.compile(s)}),c=r??Vp();return{call:{contractAddress:Ud(this.address),entrypoint:this.entryPoint,calldata:[n,c,Zd(i),a.length,...a]},address:Sp(i?ys(e,c):c,n,a,i?this.address:0)}});return{calls:n.map(t=>t.call),addresses:n.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>$d(t.from_address)===$d(Ud(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},om=new sm(Dl.ADDRESS,Dl.ENTRYPOINT),am=(new sm(Ll.ADDRESS,Ll.ENTRYPOINT),class extends Uy{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:o,defaultTipType:a}=t;super(e),this.address=n.toLowerCase(),this.signer=Rd(r)||r instanceof Uint8Array?new Fy(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??Zl.get("transactionVersion"),this.paymaster=o?new rm(o):im,this.deployer=t.deployer??om,this.defaultTipType=a??Zl.get("defaultTipType"),Jl.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new hf("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Dd(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:ju.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){Sd(eg(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:ju.ETransactionType.DECLARE,payload:ng(t)}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=Kf.compile(n),o=r??Sp(e,t,s,0),a=[{type:ju.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:o}}];return(await this.estimateFeeBulk(a,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[qp(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,o=await this.resolveDetailsWithTip(e),a=await this.accountInvocationsFactory(t,{...Xp(o),versions:[Wp(Zp(this.transactionVersion)||nd.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(a,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:o}=e,a=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...Xp(a),versions:[this.resolveTransactionVersion(o)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:ju.ETransactionType.INVOKE,payload:n}],{...Xp(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:o.contractAddress,calldata:o.calldata,signature:o.signature},{...Xp(r),resourceBounds:o.resourceBounds,nonce:o.nonce,version:o.version})}async fastExecute(t,e={},n={}){Sd(this.channel instanceof Ig.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),Sd(this.channel.blockIdentifier===hd.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,hd.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i);return{txResult:s,isReady:await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n)}}async declareIfNot(t,e={}){const n=ng(t);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){Sd(eg(t.contract),Wl.declareNonSierra);const n=ng(t),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:ju.ETransactionType.DECLARE,payload:n}],{...Xp(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:o.senderAddress,signature:o.signature,contract:o.contract,compiledClassHash:o.compiledClassHash},{...Xp(r),nonce:o.nonce,resourceBounds:o.resourceBounds,version:o.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(""!==n.transaction_hash){const t=await this.waitForTransaction(n.transaction_hash,e);n={...n,...t}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=Kf.compile(e),o=r??Sp(n,t,s,0),a=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let u=c;u||(u=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:o},a)).resourceBounds);const l=(await this.accountInvocationsFactory([{type:ju.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:o}}],{...Xp(a),resourceBounds:u,versions:[this.resolveTransactionVersion(i.version)],nonce:pl,skipValidate:!1}))[0];return super.deployAccountContract({classHash:l.classHash,addressSalt:l.addressSalt,constructorCalldata:l.constructorCalldata,signature:l.signature},{...Xp(a),nonce:l.nonce,resourceBounds:l.resourceBounds,version:l.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return iy(t,this.address)}async getSnip9Version(){return await Wy(this,this.address,Fl)?"2":await Wy(this,this.address,Ul)?"1":"0"}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Ud(t)]},n=await this.callContract(e);return 0n!==BigInt(n[0])}catch(t){throw new Error(`Failed to check if nonce is valid: ${t}`)}}async getSnip9Nonce(){const t=Vp();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!Nd(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(`The caller ${t.caller} is not valid.`);const i=Nd(t.caller)?t.caller:Pl,s=[e].flat(),o=n??await this.getSnip9Version();if(!o)throw new Error("This account is not handling outside transactions.");const a=r?Ud(r):await this.getSnip9Nonce(),c=Yy(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},a,s,o),u=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:a,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(jy)},signature:u,signerAddress:this.address,version:o}}async executeFromOutside(t,e){const n=Gy(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return Wp(this.transactionVersion||nd.V3,t)}async buildInvocation(t,e){const n=vg(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...Xp(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=ng(t),s=dg(r);Sd(!Id(i)&&(e.version===nd.F3||e.version===nd.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const o=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...Xp(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:o,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=Kf.compile(n),o=r??Sp(e,t,s,0),a=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...Xp(i),classHash:t,contractAddress:o,addressSalt:e,constructorCalldata:s});return{...Xp(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:a}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),o=await this.getChainId(),a=e.versions.map(t=>Wp(t)),c="payload"in t[0]?t[0].payload:t[0],u=t[0].type===ju.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,n)=>{const c="payload"in t?t.payload:t,l={...Xp(e),walletAddress:this.address,nonce:Dd(Number(s)+n),chainId:o,cairoVersion:u,version:a[0],skipValidate:i},d={type:t.type,nonce:Dd(Number(s)+n),blockIdentifier:r,version:a[0]};if(t.type===ju.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),l);return{...d,...t,...l}}if(t.type===ju.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,l);return{...d,...e,...l,type:ju.ETransactionType.INVOKE}}if(t.type===ju.ETransactionType.DECLARE){Sd(eg(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,l);return{...d,...t,...l}}if(t.type===ju.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,l);return{...d,...t,...l}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&"0"===await this.getSnip9Version())throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return r=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:$p(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:$p(n)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);Jy(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}});function cm(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function um(t){return t.request({type:"wallet_getPermissions"})}function lm(t,e){return t.request({type:"wallet_watchAsset",params:e})}function dm(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function hm(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function fm(t){return t.request({type:"wallet_requestChainId"})}function pm(t){return t.request({type:"wallet_deploymentData"})}function gm(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function ym(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function mm(t,e){return t.request({type:"wallet_signTypedData",params:e})}function bm(t){return t.request({type:"wallet_supportedSpecs"})}function _m(t,e){t.on("accountsChanged",e)}function wm(t,e){t.on("networkChanged",e)}function Em(t){return"event"===t.type}function vm(t){const e=t.filter(t=>Em(t)&&"struct"===t.kind),n=t.filter(t=>Em(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let r=[],{name:i}=e,s=!1;const o=t=>t.type===i;for(;;){const t=n.find(t=>t.variants.some(o));if(Id(t))break;const e=t.variants.find(o);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const a=r.pop();let c={[nl(_s(Zu(a)).toString(16))]:e};for(;r.length>0;)c={[nl(_s(Zu(r.pop())).toString(16))]:c};return c={...c},Tm(t,c)},{})}function Am(t){return Gh(t)?vm(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[nl(_s(Zu(n)).toString(16))]:r}},{})}(t)}function Tm(t,e){const n={...t};return Od(t)&&Od(e)&&Object.keys(e).forEach(r=>{Od(e[r])?r in t?n[r]=Tm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function Sm(t,e,n,r,i){return t.flat().reduce((t,s)=>{const o=JSON.parse(JSON.stringify(s));let a=e[o.keys.shift()??0];if(!a)return t;for(;!a.name;){const t=o.keys.shift();Sd(!!t,'Not enough data in "keys" property of this event.'),a=a[t]}const c={};c[a.name]={};const u=o.keys[Symbol.iterator](),l=o.data[Symbol.iterator](),d=a.members?.filter(t=>"key"===t.kind)||a.keys,h=a.members?.filter(t=>"data"===t.kind)||a.data;return d.forEach(t=>{c[a.name][t.name]=Ff({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})}),h.forEach(t=>{c[a.name][t.name]=Ff({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})}),"block_hash"in o&&(c.block_hash=o.block_hash),"block_number"in o&&(c.block_number=o.block_number),"transaction_hash"in o&&(c.transaction_hash=o.transaction_hash),t.push(c),t},[])}Hu({},{addDeclareTransaction:()=>ym,addInvokeTransaction:()=>gm,addStarknetChain:()=>dm,deploymentData:()=>pm,getPermissions:()=>um,onAccountChange:()=>_m,onNetworkChanged:()=>wm,requestAccounts:()=>cm,requestChainId:()=>fm,signMessage:()=>mm,supportedSpecs:()=>bm,switchStarknetChain:()=>hm,watchAsset:()=>lm}),Hu({},{getAbiEvents:()=>Am,isAbiEvent:()=>Em,parseEvents:()=>Sm}),ju.TypedDataRevision;const Im={STRK:"0x0408163bfcfc2d76f34b444cb55e09dace5905cf84c0884e4637c2c0f06ab6ed",ETH:"0x02cf0dc1d9e8c7731353dd15e6f2f22140120ef2d27116b982fa4fed87f6fef5",USDC:"0x02caae365e67921979a4e5c16dd70eaa5776cfc6a9592bcb903d91933aaf2552"},km={STRK:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",ETH:"0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",USDC:"0x053b40a647cedfca6ca84f542a0fe36736031905a9639a7f19a3c1e66bfd5080"};function xm(t){return t?"0x"+t.replace(/^0x/i,"").padStart(64,"0"):t}if("undefined"==typeof crypto||!crypto.subtle){const t="[Bridge] WARNING: crypto.subtle unavailable (non-secure context). Cryptographic operations will fail.";console.warn(t),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:"bridge-error",error:t}))}let Bm=null,Rm=null,Cm=null;async function Om(){return await Bm.getNonceForAddress(Cm.address)}function Nm(t,e="STRK"){if(!Bm)throw new Error("Provider not initialized");const n=xm(Im[e]);if(!n)throw new Error(`Unknown token: ${e}`);return Rm=new g.Account(t,n,Bm),!0}function Lm(t){return{contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:(t.calldata||[]).map(t=>t.toString())}}function Dm(t){if("bigint"==typeof t)return t.toString();if(Array.isArray(t))return t.map(t=>Dm(t));if(function(t){return t&&"object"==typeof t&&!Array.isArray(t)}(t)){if("function"==typeof t.toAffine){const e=t.toAffine(),n={x:e.x.toString(),y:e.y.toString()};return"z"in t&&void 0!==t.z&&null!==t.z&&(n.z=t.z.toString()),n}return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,Dm(e)]))}return t}const Pm={ping:async()=>"pong",init:async({rpcUrl:t,tongoPrivateKey:e,token:n,starkAddress:r,starkPrivateKey:i})=>(function(t){Bm=new Uy({nodeUrl:t})}(t),Nm(e,n||"STRK"),r&&i&&function(t,e){if(!Bm)throw new Error("Provider not initialized");Cm=new am({provider:Bm,address:xm(t),signer:e})}(r,i),{success:!0}),switchToken:async({tongoPrivateKey:t,token:e})=>(Nm(t,e),{success:!0}),derivePublicKey:async({privateKey:t})=>{const e="string"==typeof t?BigInt(t):t,n=(0,g.derivePublicKey)(e);return{x:n.x.toString(),y:n.y.toString()}},getTongoAddress:async()=>{if(!Rm)throw new Error("Tongo account not initialized");return Rm.tongoAddress()},pubKeyToBase58:async({x:t,y:e})=>(0,g.pubKeyAffineToBase58)({x:BigInt(t),y:BigInt(e)}),base58ToPubKey:async({base58:t})=>{const e=(0,g.pubKeyBase58ToAffine)(t);return{x:e.x.toString(),y:e.y.toString()}},getState:async()=>{if(!Rm)throw new Error("Tongo account not initialized");const t=await Rm.state();return{balance:t.balance.toString(),pending:t.pending.toString(),nonce:t.nonce.toString()}},getRate:async()=>{if(!Rm)throw new Error("Tongo account not initialized");return(await Rm.rate()).toString()},erc20ToTongo:async({amount:t})=>{if(!Rm)throw new Error("Tongo account not initialized");return(await Rm.erc20ToTongo(BigInt(t))).toString()},tongoToErc20:async({amount:t})=>{if(!Rm)throw new Error("Tongo account not initialized");return(await Rm.tongoToErc20(BigInt(t))).toString()},fund:async({amount:t,sender:e})=>{if(!Rm)throw new Error("Tongo account not initialized");if(!Cm)throw new Error("Stark account not initialized");const n=await Rm.fund({amount:BigInt(t),sender:xm(e)}),r=[];n.approve&&r.push(n.approve),r.push(n.toCalldata());const i=await Om();return{txHash:(await Cm.execute(r,{nonce:i})).transaction_hash}},transfer:async({amount:t,recipientBase58:e,sender:n})=>{if(!Rm)throw new Error("Tongo account not initialized");if(!Cm)throw new Error("Stark account not initialized");const r=(0,g.pubKeyBase58ToAffine)(e),i=await Rm.transfer({amount:BigInt(t),to:r,sender:xm(n)}),s=await Om();return{txHash:(await Cm.execute([i.toCalldata()],{nonce:s})).transaction_hash}},withdraw:async({amount:t,to:e,sender:n})=>{if(!Rm)throw new Error("Tongo account not initialized");if(!Cm)throw new Error("Stark account not initialized");const r=await Rm.withdraw({amount:BigInt(t),to:xm(e),sender:xm(n)}),i=await Om();return{txHash:(await Cm.execute([r.toCalldata()],{nonce:i})).transaction_hash}},x402Pay:async({amount:t,recipientBase58:e,recipient:n,sender:r})=>{if(!Rm)throw new Error("Tongo account not initialized");if(!Cm)throw new Error("Stark account not initialized");if(!Bm)throw new Error("Provider not initialized");const i=xm(r||Cm.address),s=BigInt(t),o=await Rm.bit_size(),a=await Rm.rawState(),c=BigInt(await Bm.getChainId());if(e){console.log("[tongo-bridge] x402Pay shielded transfer  amount="+s.toString()+" recipientBase58="+e.slice(0,12)+"");const t=(0,g.pubKeyBase58ToAffine)(e),n=await Rm.transfer({amount:s,to:t,sender:i}),r={y:n.from,nonce:a.nonce,to:n.to,amount:n.amount,currentBalance:a.balance,auxiliarCipher:n.auxiliarCipher,bit_size:o,prefix_data:{chain_id:c,tongo_address:BigInt(Rm.Tongo.address),sender_address:BigInt(i)}},u=await Om();return{txHash:(await Cm.execute([n.toCalldata()],{nonce:u})).transaction_hash,tongoProof:{operation:"transfer",inputs:Dm(r),proof:Dm(n.proof)}}}console.log("[tongo-bridge] x402Pay withdraw fallback  amount="+s.toString()+" recipient="+n);const u=xm(n),l=await Rm.withdraw({amount:s,to:u,sender:i}),d={y:l.from,nonce:a.nonce,to:l.to,amount:l.amount,currentBalance:a.balance,auxiliarCipher:l.auxiliarCipher,bit_size:o,prefix_data:{chain_id:c,tongo_address:BigInt(Rm.Tongo.address),sender_address:BigInt(i)}},h=await Om();return{txHash:(await Cm.execute([l.toCalldata()],{nonce:h})).transaction_hash,tongoProof:{operation:"withdraw",inputs:Dm(d),proof:Dm(l.proof)}}},rollover:async({sender:t})=>{if(!Rm)throw new Error("Tongo account not initialized");if(!Cm)throw new Error("Stark account not initialized");const e=await Rm.rollover({sender:xm(t)}),n=await Om();return{txHash:(await Cm.execute([e.toCalldata()],{nonce:n})).transaction_hash}},prepareFund:async({amount:t,sender:e})=>{if(!Rm)throw new Error("Tongo account not initialized");const n=await Rm.fund({amount:BigInt(t),sender:xm(e)}),r=[];return n.approve&&r.push(Lm(n.approve)),r.push(Lm(n.toCalldata())),{calls:r}},prepareTransfer:async({amount:t,recipientBase58:e,sender:n})=>{if(!Rm)throw new Error("Tongo account not initialized");const r=(0,g.pubKeyBase58ToAffine)(e);return{calls:[Lm((await Rm.transfer({amount:BigInt(t),to:r,sender:xm(n)})).toCalldata())]}},prepareWithdraw:async({amount:t,to:e,sender:n})=>{if(!Rm)throw new Error("Tongo account not initialized");return{calls:[Lm((await Rm.withdraw({amount:BigInt(t),to:xm(e),sender:xm(n)})).toCalldata())]}},prepareRollover:async({sender:t})=>{if(!Rm)throw new Error("Tongo account not initialized");return{calls:[Lm((await Rm.rollover({sender:xm(t)})).toCalldata())]}},getTxHistory:async({fromBlock:t=0})=>{if(!Rm)throw new Error("Tongo account not initialized");return(await Rm.getTxHistory(t)).map(t=>{var e,n;return{...t,amount:null===(e=t.amount)||void 0===e?void 0:e.toString(),nonce:null===(n=t.nonce)||void 0===n?void 0:n.toString()}})},queryERC20Balance:async({token:t,address:e})=>{if(!Bm)throw new Error("Provider not initialized");const n=km[t];if(!n)throw new Error(`Unknown token: ${t}`);const r=await Bm.callContract({contractAddress:xm(n),entrypoint:"balanceOf",calldata:[xm(e)]});return(BigInt(r[0]||"0")+(BigInt(r[1]||"0")<<128n)).toString()},generateKeypair:async()=>{const t=Pp.randomAddress();return{privateKey:t,publicKey:lp.starkCurve.getStarkKey(t)}}};window.addEventListener("message",async t=>{let e;try{e="string"==typeof t.data?JSON.parse(t.data):t.data}catch{return}const{id:n,command:r,params:i}=e;if(n&&r)try{const t=Pm[r];if(!t)throw new Error(`Unknown command: ${r}`);const e=await t(i||{});window.ReactNativeWebView.postMessage(JSON.stringify({id:n,result:e}))}catch(t){window.ReactNativeWebView.postMessage(JSON.stringify({id:n,error:t.message||String(t),stack:t.stack}))}}),window.ReactNativeWebView.postMessage(JSON.stringify({type:"bridge-ready"}))})()})();</script></body></html>