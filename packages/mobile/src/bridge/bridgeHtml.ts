export const BRIDGE_HTML = `<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><script>window.onerror=function(m,s,l,c,e){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({type:"error",message:m,stack:e&&e.stack}))}</script><script>/*! For license information please see bridge.js.LICENSE.txt */
(()=>{var t={5556(t,e,r){"use strict";var n,i=r(8287).hp,a=Object.create,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,d=(t,e)=>{for(var r in e)s(t,r,{get:e[r],enumerable:!0})},h=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of c(e))l.call(t,i)||i===r||s(t,i,{get:()=>e[i],enumerable:!(n=o(e,i))||n.enumerable});return t},f=(t,e,r)=>(h(t,e,"default"),r&&h(r,e,"default")),p=(t,e,r)=>(r=null!=t?a(u(t)):{},h(!e&&t&&t.__esModule?r:s(r,"default",{value:t,enumerable:!0}),t)),y={};d(y,{AbiParser1:()=>Dn,AbiParser2:()=>Pn,AbiParserInterface:()=>dn,Account:()=>hc,AccountInterface:()=>fc,BatchClient:()=>ue,BlockStatus:()=>jt,BlockTag:()=>Gt,CairoByteArray:()=>vn,CairoBytes31:()=>hn,CairoCustomEnum:()=>nn,CairoFelt:()=>gr,CairoFelt252:()=>mr,CairoFixedArray:()=>Mn,CairoInt128:()=>Rn,CairoInt16:()=>xn,CairoInt32:()=>Bn,CairoInt64:()=>Cn,CairoInt8:()=>kn,CairoOption:()=>sn,CairoOptionVariant:()=>an,CairoResult:()=>cn,CairoResultVariant:()=>on,CairoUint128:()=>In,CairoUint16:()=>An,CairoUint256:()=>Sr,CairoUint32:()=>wn,CairoUint512:()=>Br,CairoUint64:()=>Tn,CairoUint8:()=>En,CairoUint96:()=>Sn,CallData:()=>ri,Contract:()=>Fc,ContractInterface:()=>Vc,Deployer:()=>cc,DeployerInterface:()=>uc,EDAMode:()=>Ut,EDataAvailabilityMode:()=>Lt,ETH_ADDRESS:()=>Xt,ETransactionExecutionStatus:()=>Mt,ETransactionStatus:()=>Ht,ETransactionVersion:()=>Nt,ETransactionVersion2:()=>Dt,ETransactionVersion3:()=>Pt,EntryPointType:()=>Ot,EthSigner:()=>Co,Int:()=>Wt,LedgerSigner:()=>Ro,LedgerSigner111:()=>Ro,LedgerSigner221:()=>Fo,LedgerSigner231:()=>Ho,LibraryError:()=>yn,Literal:()=>Zt,LogLevelIndex:()=>Bt,NON_ZERO_PREFIX:()=>Jt,OutsideExecutionTypesV1:()=>te,OutsideExecutionTypesV2:()=>ee,OutsideExecutionVersion:()=>re,PaymasterInterface:()=>sc,PaymasterRpc:()=>ac,Provider:()=>wo,ProviderInterface:()=>vo,RPC:()=>m,RPC08:()=>Rt,RPC09:()=>Ja,RPCResponseParser:()=>as,ReceiptTx:()=>ys,ResponseParser:()=>Hc,RpcChannel:()=>ts,RpcError:()=>gn,RpcProvider:()=>wo,Signer:()=>To,SignerInterface:()=>Ao,Subscription:()=>ns,TimeoutError:()=>mn,TransactionExecutionStatus:()=>zt,TransactionFinalityStatus:()=>qt,TransactionType:()=>\$t,TypedDataRevision:()=>m.TypedDataRevision,UINT_128_MAX:()=>br,UINT_128_MIN:()=>xr,UINT_256_HIGH_MAX:()=>Er,UINT_256_HIGH_MIN:()=>Tr,UINT_256_LOW_MAX:()=>vr,UINT_256_LOW_MIN:()=>Ar,UINT_256_MAX:()=>_r,UINT_256_MIN:()=>wr,UINT_512_MAX:()=>Ir,UINT_512_MIN:()=>kr,Uint:()=>Kt,ValidateType:()=>Yt,WalletAccount:()=>xc,WebSocketChannel:()=>is,WebSocketNotConnectedError:()=>bn,addAddressPadding:()=>Do,byteArray:()=>dr,cairo:()=>pr,config:()=>xt,constants:()=>g,contractClassResponseToLegacyCompiledContract:()=>_a,createAbiParser:()=>Ln,createTransactionReceipt:()=>ms,defaultDeployer:()=>lc,defaultPaymaster:()=>oc,defaultProvider:()=>Eo,ec:()=>vi,encode:()=>A,eth:()=>wa,events:()=>Bc,extractContractHashes:()=>ba,fastParsingStrategy:()=>Nn,getAbiVersion:()=>Un,getChecksumAddress:()=>Lo,getGasPrices:()=>Vs,getLedgerPathBuffer:()=>Oo,getLedgerPathBuffer111:()=>Oo,getLedgerPathBuffer221:()=>Vo,getTipStatsFromBlocks:()=>ps,hash:()=>ni,hdParsingStrategy:()=>On,isAccount:()=>Qt,isNoConstructorValid:()=>Fn,isPendingBlock:()=>Ra,isPendingStateUpdate:()=>Na,isPendingTransaction:()=>Oa,isRPC08Plus_ResourceBounds:()=>Ft,isRPC08Plus_ResourceBoundsBN:()=>Vt,isSierra:()=>ma,isSupportedSpecVersion:()=>xa,isV3Tx:()=>Ia,isVersion:()=>ka,json:()=>ne,legacyDeployer:()=>dc,logger:()=>Ct,merkle:()=>_s,num:()=>de,outsideExecution:()=>Mo,parseCalldataField:()=>qn,paymaster:()=>Xo,provider:()=>Sa,selector:()=>qe,shortString:()=>er,src5:()=>Wo,stark:()=>Zi,starknetId:()=>\$s,toAnyPatchVersion:()=>Ba,toApiVersion:()=>Ca,transaction:()=>ja,typedData:()=>bs,uint256:()=>Io,units:()=>Mc,v2hash:()=>wi,v3hash:()=>ai,validateAndParseAddress:()=>Po,validateChecksumAddress:()=>Uo,verifyMessageInStarknet:()=>Fs,wallet:()=>pc}),t.exports=(n=y,h(s({},"__esModule",{value:!0}),n));var g={};d(g,{ADDR_BOUND:()=>J,API_VERSION:()=>W,BaseUrl:()=>_t,DEFAULT_GLOBAL_CONFIG:()=>Tt,HARDENING_4BYTES:()=>bt,HARDENING_BYTE:()=>mt,IS_BROWSER:()=>S,LegacyUDC:()=>ht,MASK_250:()=>Y,MASK_31:()=>K,MAX_STORAGE_ITEM_SIZE:()=>X,NetworkName:()=>wt,OutsideExecutionCallerAny:()=>pt,PAYMASTER_RPC_NODES:()=>It,PRIME:()=>Z,RANGE_FELT:()=>tt,RANGE_I128:()=>dt,RANGE_I16:()=>ct,RANGE_I32:()=>ut,RANGE_I64:()=>lt,RANGE_I8:()=>ot,RANGE_U128:()=>st,RANGE_U16:()=>rt,RANGE_U32:()=>nt,RANGE_U64:()=>it,RANGE_U8:()=>et,RANGE_U96:()=>at,RPC_DEFAULT_NODES:()=>St,SNIP9_V1_INTERFACE_ID:()=>yt,SNIP9_V2_INTERFACE_ID:()=>gt,SYSTEM_MESSAGES:()=>kt,StarknetChainId:()=>vt,SupportedRpcVersion:()=>At,TEXT_TO_FELT_MAX_LEN:()=>z,TransactionHashPrefix:()=>Et,UDC:()=>ft,ZERO:()=>G});var m={};d(m,{JRPC:()=>b,PAYMASTER_API:()=>v.PAYMASTER_API,RPCSPEC08:()=>_,RPCSPEC09:()=>w});var b={},_=p(r(5319)),w=p(r(2066)),v=r(5319),E={};f(E,r(2066)),f(m,E);var A={};d(A,{IS_BROWSER:()=>S,addHexPrefix:()=>D,arrayBufferToString:()=>I,atobUniversal:()=>C,bigIntToUint8Array:()=>j,btoaUniversal:()=>R,buf2hex:()=>O,calcByteLength:()=>L,concatenateArrayBuffer:()=>H,hexStringToUint8Array:()=>M,padLeft:()=>P,pascalToSnake:()=>V,removeHexPrefix:()=>N,sanitizeBytes:()=>U,sanitizeHex:()=>F,stringToUint8Array:()=>\$,uint8ArrayToBigInt:()=>q,utf8ToArray:()=>x,utf8ToBigInt:()=>B,utf8ToUint8Array:()=>k});var T=r(3203),S="undefined"!=typeof window;function I(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function k(t){return(new TextEncoder).encode(t)}var x=k;function B(t){return q(k(t))}function C(t){return T.base64.decode(t)}function R(t){return T.base64.encode(new Uint8Array(t))}function O(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function N(t){return t.replace(/^0x/i,"")}function D(t){return\`0x\${N(t)}\`}function P(t,e,r="0"){return function(t,e,r,n="0"){const i=e-t.length;let a=t;if(i>0){const e=n.repeat(i);a=r?e+t:t+e}return a}(t,e,!0,r)}function L(t,e=8){const{length:r}=t,n=r%e;return n?(r-n)/e*e+e:r}function U(t,e=8,r="0"){return P(t,L(t,e),r)}function F(t){const e=U(N(t),2);return e?D(e):e}var V=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function H(t){const e=t.reduce((t,e)=>t+e.byteLength,0),r=new Uint8Array(e);let n=0;return t.forEach(t=>{r.set(t,n),n+=t.byteLength}),r}function M(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+\$/.test(e))throw new Error(\`Invalid hex string: "\${t}" contains non-hexadecimal characters\`);const r=e.length%2!=0?\`0\${e}\`:e,n=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2)n[t/2]=parseInt(r.substring(t,t+2),16);return n}function \$(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)?M(t):function(t){return/^[0-9]+\$/.test(t)}(t)?j(BigInt(t)):k(t)}function j(t){if(t<0n)throw new Error(\`Cannot convert negative bigint \${t} to Uint8Array\`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=\`0\${e}\`);const r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t/2]=parseInt(e.substring(t,t+2),16);return r}function q(t){if(!t||0===t.length)return 0n;let e="0x";for(let r=0;r<t.length;r+=1)e+=t[r].toString(16).padStart(2,"0");return BigInt(e)}var z=31,G=0n,Y=2n**250n-1n,K=2n**31n-1n,W=G,Z=2n**251n+17n*2n**192n+1n,X=256n,J=2n**251n-X,Q=(t,e)=>({min:t,max:e}),tt=Q(G,Z-1n),et=Q(G,255n),rt=Q(G,65535n),nt=Q(G,2n**32n-1n),it=Q(G,2n**64n-1n),at=Q(G,2n**96n-1n),st=Q(G,2n**128n-1n),ot=Q(-128n,127n),ct=Q(-32768n,32767n),ut=Q(-(2n**31n),2n**31n-1n),lt=Q(-(2n**63n),2n**63n-1n),dt=Q(-(2n**127n),2n**127n-1n),ht={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ft={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},pt="0x414e595f43414c4c4552",yt="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",gt="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",mt=128,bt=2147483648n,_t={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},wt={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},vt={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},Et={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},At={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Tt={rpcVersion:"0.9.0",transactionVersion:m.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},St={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},It={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},kt={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},xt=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Tt}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Bt={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Ct=class t{static instance;config;constructor(){this.config=xt}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Bt[e]}formatMessage(t){const{level:e,message:r,timestamp:n,data:i}=t;let a=\`[\${n}] \${e}: \${r}\`;if(i)try{a+=\`\\n\${JSON.stringify(i,null,2)}\`}catch(t){a+=\`\\n[JSON.stringify Error/Circular]: \${t}\`}return a}log(t,e,r){if(!this.shouldLog(Bt[t]))return;const n={level:t,message:e,timestamp:this.getTimestamp(),data:r},i=this.formatMessage(n);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Bt).filter(t=>this.shouldLog(Bt[t])&&"OFF"!==t)}}.getInstance(),Rt={};d(Rt,{RpcChannel:()=>Xa});var Ot={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},{ETransactionVersion:Nt}=w,{ETransactionVersion2:Dt}=w,{ETransactionVersion3:Pt}=w,{EDataAvailabilityMode:Lt}=_,{EDAMode:Ut}=_;function Ft(t){return"l1_data_gas"in t}function Vt(t){return"l1_data_gas"in t}var{ETransactionStatus:Ht}=_,{ETransactionExecutionStatus:Mt}=_,{ETransactionType:\$t}=w,{EBlockStatus:jt}=w,{ETransactionFinalityStatus:qt}=w,{ETransactionExecutionStatus:zt}=w,{EBlockTag:Gt}=w,Yt={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Kt={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Wt={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},Zt={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Xt="core::starknet::eth_address::EthAddress",Jt="core::zeroable::NonZero::";function Qt(t){return"execute"in t}var te={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},ee={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},re={UNSUPPORTED:"0",V1:"1",V2:"2"},ne={};d(ne,{parse:()=>se,parseAlwaysAsBig:()=>oe,stringify:()=>ce});var ie=p(r(7631)),ae=t=>{if(!ie.isInteger(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},se=t=>ie.parse(String(t),void 0,ae),oe=t=>ie.parse(String(t),void 0,ie.parseNumberAndBigInt),ce=(t,e,r,n)=>ie.stringify(t,e,r,n),ue=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,r){const n={id:r??\`batched_\${this.requestId+=1}\`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ce(t),headers:this.headers})).json()}async fetch(t,e,r){const n=this.addPendingRequest(t,e,r);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const a=await this.batchPromises[n];delete this.batchPromises[n];const s=a.find(t=>t.id===n);if(!s)throw new Error(\`Couldn't find the result for the request. Method: \${String(t)}\`);return s}};function le(t,e){if(!t)throw new Error(e||"Assertion failure")}var de={};d(de,{addPercent:()=>He,assertInRange:()=>Re,bigNumberishArrayToDecimalStringArray:()=>Oe,bigNumberishArrayToHexadecimalStringArray:()=>Ne,cleanHex:()=>Ce,getDecimalString:()=>Pe,getHexString:()=>Le,getHexStringArray:()=>Ue,getNext:()=>je,hexToBytes:()=>Ve,hexToDecimalString:()=>Be,isBigNumberish:()=>\$e,isHex:()=>ve,isHexString:()=>Ee,isStringWholeNumber:()=>De,stringToSha256ToArrayBuff4:()=>Me,toBigInt:()=>Ae,toCairoBool:()=>Fe,toHex:()=>Se,toHex64:()=>xe,toHexString:()=>Ie,toStorageKey:()=>ke,tryToBigInt:()=>Te});var he=r(1484),fe=r(9981),pe=t=>void 0===t||void 0===t;function ye(t){return"number"==typeof t}function ge(t){return"boolean"==typeof t}function me(t){return"bigint"==typeof t}function be(t){return"string"==typeof t}function _e(t){return void 0!==i&&t instanceof i}function we(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function ve(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)}var Ee=ve;function Ae(t){return BigInt(t)}function Te(t){return t?BigInt(t):void 0}function Se(t){return D(Ae(t).toString(16))}var Ie=Se;function ke(t){return D(Ae(t).toString(16).padStart(64,"0"))}function xe(t){const e=D(Ae(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Be(t){return BigInt(D(t)).toString(10)}function Ce(t){return t.toLowerCase().replace(/^(0x)0+/,"\$1")}function Re(t,e,r,n=""){const i=""===n?"invalid length":\`invalid \${n} length\`,a=BigInt(t),s=BigInt(e),o=BigInt(r);le(a>=s&&a<=o,\`Message not signable, \${i}.\`)}function Oe(t){return t.map(t=>Ae(t).toString(10))}function Ne(t){return t.map(t=>Se(t))}function De(t){return/^\\d+\$/.test(t)}function Pe(t){if(ve(t))return Be(t);if(De(t))return t;throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function Le(t){if(ve(t))return t;if(De(t))return Ie(t);throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function Ue(t){return t.map(Le)}function Fe(t){return(+t).toString()}function Ve(t){if(!ve(t))throw new Error(\`\${t} needs to be a hex-string\`);let e=N(t);return e.length%2!=0&&(e=\`0\${e}\`),(0,he.hexToBytes)(e)}function He(t,e){const r=BigInt(t);return r+r*BigInt(e)/100n}function Me(t){var e;return Ve(Se((e=BigInt(D(O((0,fe.sha256)(t)))),Number(e&K))))}function \$e(t){return ye(t)||me(t)||be(t)&&(ve(t)||De(t))}function je(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}var qe={};d(qe,{getL1MessageHash:()=>tr,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,keccakBn:()=>Ke,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var ze=r(4246),Ge=r(1165),Ye=r(1484);function Ke(t){const e=N(Se(BigInt(t))),r=e.length%2==0?e:\`0\${e}\`;return D((0,ze.keccak)(Ve(D(r))).toString(16))}function We(t){const e=BigInt(function(t){return D((0,ze.keccak)(x(t)).toString(16))}(t));return e&Y}function Ze(t){return Se(We(t))}function Xe(t){return ye(t)||me(t)?Se(t):ve(t)?t:De(t)?Se(t):Ze(t)}function Je(t){const e=D(t.reduce((t,e)=>t+N(Se(e)).padStart(64,"0"),""));return D((0,Ye.bytesToHex)((0,Ge.keccak_256)(Ve(e))))}function Qe(t,e,r,n,i){return Je([t,e,i,r,n.length,...n])}function tr(t,e,r){return Je([t,e,r.length,...r])}var er={};function rr(t){return/^[\\x00-\\x7F]*\$/.test(t)}function nr(t){return t.length<=z}function ir(t){return/^[0-9]*\$/i.test(t)}function ar(t){return be(t)&&!ve(t)&&!De(t)}d(er,{decodeShortString:()=>lr,encodeShortString:()=>ur,isASCII:()=>rr,isDecimalString:()=>ir,isLongText:()=>or,isShortString:()=>nr,isShortText:()=>sr,isText:()=>ar,splitLongString:()=>cr});var sr=t=>ar(t)&&nr(t),or=t=>ar(t)&&!nr(t);function cr(t){const e=RegExp(\`[^]{1,\${z}}\`,"g");return t.match(e)||[]}function ur(t){if(!rr(t))throw new Error(\`\${t} is not an ASCII string\`);if(!nr(t))throw new Error(\`\${t} is too long\`);return D(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function lr(t){if(!rr(t))throw new Error(\`\${t} is not an ASCII string\`);if(ve(t))return N(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(ir(t))return lr("0X".concat(BigInt(t).toString(16)));throw new Error(\`\${t} is not Hex or decimal\`)}var dr={};function hr(t){const e=0n===BigInt(t.pending_word)?"":lr(Se(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":lr(Se(e))),"")+e}function fr(t){const e=cr(t),r=e[e.length-1],n=e.map(ur),[i,a]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:i,pending_word_len:a}}d(dr,{byteArrayFromString:()=>fr,stringFromByteArray:()=>hr});var pr={};function yr(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function gr(t){if(me(t)||Number.isInteger(t))return t.toString();if(be(t)){if(ve(t))return BigInt(t).toString();if(ar(t)){if(!nr(t))throw new Error(\`\${t} is a long string > 31 chars. Please split it into an array of short strings.\`);return BigInt(ur(t)).toString()}if(De(t))return t}if(ge(t))return""+ +t;throw new Error(\`\${t} can't be computed by felt()\`)}d(pr,{felt:()=>rn,getAbiContractVersion:()=>Jr,getArrayType:()=>Wr,isCairo1Abi:()=>Zr,isCairo1Type:()=>Kr,isLen:()=>Cr,isTypeArray:()=>Or,isTypeBool:()=>jr,isTypeContractAddress:()=>qr,isTypeEnum:()=>Lr,isTypeEthAddress:()=>zr,isTypeFelt:()=>Rr,isTypeInt:()=>Hr,isTypeLiteral:()=>\$r,isTypeNamedTuple:()=>Dr,isTypeNonZero:()=>Xr,isTypeOption:()=>Ur,isTypeResult:()=>Fr,isTypeSecp256k1Point:()=>Yr,isTypeStruct:()=>Pr,isTypeTuple:()=>Nr,isTypeU96:()=>Gr,isTypeUint:()=>Vr,isTypeUint256:()=>Mr,tuple:()=>en,uint256:()=>Qr,uint512:()=>tn});var mr=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const r=t.__processData(e);this.data=r.subarray(r.findIndex(t=>t>0))}static __processData(t){if(be(t))return \$(t);if(me(t))return j(t);if(Number.isInteger(t))return j(BigInt(t));if(ge(t))return j(BigInt(t?1:0));throw new Error(\`\${t} can't be computed by felt()\`)}toBigInt(){return q(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return D(this.toBigInt().toString(16))}toApiRequest(){return yr([this.toHexString()])}static validate(e){le(null!==e,"null value is not allowed for felt252"),le(void 0!==e,"undefined value is not allowed for felt252"),le(be(e)||ye(e)||me(e)||ge(e),\`Unsupported data type '\${typeof e}' for felt252. Expected string, number, bigint, or boolean\`);const r=t.__processData(e),n=q(r);le(n>=0n&&n<Z,\`Value \${r} is out of felt252 range [0, \${Z})\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},br=(1n<<128n)-1n,_r=(1n<<256n)-1n,wr=0n,vr=340282366920938463463374607431768211455n,Er=340282366920938463463374607431768211455n,Ar=0n,Tr=0n,Sr=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(we(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const r=t.validateProps(e[0].low,e[0].high);this.low=r.low,this.high=r.high}else if(1===e.length){const r=t.validate(e[0]);this.low=r&br,this.high=r>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const r=t.validateProps(e[0],e[1]);this.low=r.low,this.high=r.high}}}static validate(t){le(null!==t,"null value is not allowed for u256"),le(void 0!==t,"undefined value is not allowed for u256"),le(\$e(t)||we(t),\`Unsupported data type '\${typeof t}' for u256. Expected string, number, bigint, or Uint256 object\`);const e=BigInt(t);return le(e>=wr,"bigNumberish is smaller than UINT_256_MIN"),le(e<=_r,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const r=BigInt(t),n=BigInt(e);return le(r>=Ar&&r<=vr,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),le(n>=Tr&&n<=Er,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:n}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=je(e);return new t(r,n)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:D(this.low.toString(16)),high:D(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[gr(this.low),gr(this.high)]}},Ir=(1n<<512n)-1n,kr=0n,xr=0n,Br=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(we(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const r=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===e.length){const r=t.validate(e[0]);this.limb0=r&br,this.limb1=(r&br<<128n)>>128n,this.limb2=(r&br<<256n)>>256n,this.limb3=r>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const r=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}}}static validate(t){le(null!==t,"null value is not allowed for u512"),le(void 0!==t,"undefined value is not allowed for u512"),le(\$e(t)||we(t),\`Unsupported data type '\${typeof t}' for u512. Expected string, number, bigint, or Uint512 object\`);const e=BigInt(t);return le(e>=kr,"bigNumberish is smaller than UINT_512_MIN."),le(e<=Ir,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,r,n){const i=BigInt(t),a=BigInt(e),s=BigInt(r),o=BigInt(n);return[i,a,s,o].forEach((t,e)=>{le(t>=xr&&t<=br,\`limb\${e} is not in the range of a u128 number\`)}),{limb0:i,limb1:a,limb2:s,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=je(e),i=je(e),a=je(e);return new t(r,n,i,a)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:D(this.limb0.toString(16)),limb1:D(this.limb1.toString(16)),limb2:D(this.limb2.toString(16)),limb3:D(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[gr(this.limb0),gr(this.limb1),gr(this.limb2),gr(this.limb3)]}},Cr=t=>/_len\$/.test(t),Rr=t=>"felt"===t||"core::felt252"===t,Or=t=>/\\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Nr=t=>/^\\(.*\\)\$/i.test(t),Dr=t=>/\\(.*\\)/i.test(t)&&t.includes(":"),Pr=(t,e)=>t in e,Lr=(t,e)=>t in e,Ur=t=>t.startsWith("core::option::Option::"),Fr=t=>t.startsWith("core::result::Result::"),Vr=t=>Object.values(Kt).includes(t),Hr=t=>Object.values(Wt).includes(t),Mr=t=>Sr.isAbiType(t),\$r=t=>Object.values(Zt).includes(t),jr=t=>"core::bool"===t,qr=t=>t===Zt.ContractAddress,zr=t=>t===Xt,Gr=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Yr=t=>t===Zt.Secp256k1Point,Kr=t=>t.includes("::"),Wr=t=>Kr(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Zr(t){const{cairo:e}=Jr(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Xr(t){return t.startsWith(Jt)}function Jr(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const r=e.inputs.length?e.inputs:e.outputs;return Kr(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Qr=t=>new Sr(t).toUint256DecimalString(),tn=t=>new Br(t).toUint512DecimalString(),en=(...t)=>({...t});function rn(t){return gr(t)}var nn=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!pe(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!pe(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!pe(t[1]));return pe(t)?"":t[0]}},an={Some:0,None:1},sn=class{Some;None;constructor(t,e){if(!(t in Object.values(an)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===an.Some){if(pe(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!pe(this.Some)}isNone(){return!0===this.None}},on={Ok:0,Err:1},cn=class{Ok;Err;constructor(t,e){if(!(t in Object.values(on)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===on.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!pe(this.Ok))return this.Ok;if(!pe(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!pe(this.Ok)}isErr(){return!pe(this.Err)}},un=(t,e,r)=>{if(!me(t[r]))throw new Error(\`Data and formatter mismatch on \${r}:\${e[r]}, expected response data \${r}:\${t[r]} to be BN instead it is \${typeof t[r]}\`)};function ln(t,e,r){return Object.entries(t).reduce((n,[i,a])=>{const s=r??e[i];if(!(i in e)&&!r)return n[i]=a,n;if("string"===s){if(Array.isArray(t[i])){const e=ln(t[i],t[i].map(t=>s));return n[i]=Object.values(e).join(""),n}return un(t,e,i),n[i]=lr(a),n}if("number"===s)return un(t,e,i),n[i]=Number(a),n;if("function"==typeof s)return n[i]=s(a),n;if(Array.isArray(s)){const e=ln(t[i],s,s[0]);return n[i]=Object.values(e),n}return we(s)?(n[i]=ln(t[i],s),n):(((t,e,r)=>{throw new Error(\`Unhandled formatter type on \${r}:\${e[r]} for data \${r}:\${t[r]}\`)})(t,e,i),n)},{})}var dn=class{},hn=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const r=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(r,t.MAX_BYTE_SIZE-r.length)}static __processData(t){if(be(t))return \$(t);if(_e(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return q(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return D("padded"===t?O(this.data):this.toBigInt().toString(16))}static validate(e){const r=t.__processData(e).length;le(r<=this.MAX_BYTE_SIZE,\`Data is too long: \${r} bytes (max \${this.MAX_BYTE_SIZE} bytes)\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},fn={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},pn=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:r}=Object;r?r(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:r}=Error;r&&r(t,e)}(this)}},yn=class extends pn{},gn=class extends yn{constructor(t,e,r){super(\`RPC: \${e} with params \${ce(r,null,2)}\\n\\n      \${t.code}: \${t.message}: \${ce(t.data)}\`),this.baseError=t,this.request={method:e,params:r}}request;get code(){return this.baseError.code}isType(t){return fn[t]===this.code}},mn=class extends yn{constructor(t){super(t),this.name="TimeoutError"}},bn=class extends yn{constructor(t){super(t),this.name="WebSocketNotConnectedError"}},_n=xt.get("buffer")||void 0!==i&&i||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==r.g&&r.g.Buffer||class{constructor(){throw new yn("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new yn("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=xt.get("buffer")||void 0!==i&&i;return e&&e.isBuffer&&e.isBuffer(t)}},wn=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=0n&&r<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},vn=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,r,n]=e;return le(Array.isArray(t)&&r instanceof mr&&n instanceof wn,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=r,void(this.pending_word_len=n)}const r=e[0];t.validate(r);const{data:n,pending_word:i,pending_word_len:a}=t.__processData(r);this.data=n,this.pending_word=i,this.pending_word_len=a}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(_e(t))e=new Uint8Array(t);else if(be(t))e=\$(t);else if(me(t))e=j(t);else{if(r=t,!Number.isInteger(r))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=j(BigInt(t))}var r;const n=hn.MAX_BYTE_SIZE,i=Math.floor(e.length/n),a=e.length%n,s=[];let o,c;for(let t=0;t<i;t+=1){const r=t*n,i=r+n,a=e.slice(r,i);s.push(new hn(a))}if(a>0){const t=e.slice(i*n);let r="0x";for(let e=0;e<t.length;e+=1)r+=t[e].toString(16).padStart(2,"0");o=new mr(r),c=new wn(a)}else o=new mr(0),c=new wn(0);return{data:s,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),yr([D(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=H(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=H(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=H(this.toElements());return D(0===t.length?"0":O(t))}toBuffer(){const t=H(this.toElements());return _n.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const r=new Uint8Array(e),n=e-this.pending_word.data.length;r.set(this.pending_word.data,n),t.push(r)}return t}assertInitialized(){le(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){le(null!=t,"Invalid input: null or undefined"),le(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),le("object"!=typeof t||_e(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),le(!ye(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),le(!ye(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),le(!me(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),le(t instanceof Uint8Array||_e(t)||be(t)||ye(t)||me(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Array.from({length:Number(je(e))},()=>hn.factoryFromApiResponse(e)),n=mr.factoryFromApiResponse(e),i=wn.factoryFromApiResponse(e);return new t(r,n,i)}},En=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=et.min&&r<=et.max,\`Value is out of u8 range [\${et.min}, \${et.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},An=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=rt.min&&r<=rt.max,\`Value is out of u16 range [\${rt.min}, \${rt.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Tn=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=it.min&&r<=it.max,\`Value is out of u64 range [\${it.min}, \${it.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},Sn=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=at.min&&r<=at.max,\`Value is out of u96 range [\${at.min}, \${at.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},In=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=st.min&&r<=st.max,\`Value is out of u128 range [\${st.min}, \${st.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(je(e))}},kn=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=ot.min&&r<=ot.max,\`Value is out of i8 range [\${ot.min}, \${ot.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=BigInt(r);return new t(n>Z/2n?n-Z:n)}},xn=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=ct.min&&r<=ct.max,\`Value is out of i16 range [\${ct.min}, \${ct.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=BigInt(r);return new t(n>Z/2n?n-Z:n)}},Bn=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=ut.min&&r<=ut.max,\`Value is out of i32 range [\${ut.min}, \${ut.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=BigInt(r);return new t(n>Z/2n?n-Z:n)}},Cn=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=lt.min&&r<=lt.max,\`Value is out of i64 range [\${lt.min}, \${lt.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=BigInt(r);return new t(n>Z/2n?n-Z:n)}},Rn=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return be(t)&&ar(t)?B(t):BigInt(t)}toApiRequest(){return yr([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(j(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return D(t<0n?(Z+t).toString(16):t.toString(16))}static validate(e){le(null!=e,"Invalid input: null or undefined"),le(!we(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),le(!ye(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);le(r>=dt.min&&r<=dt.max,\`Value is out of i128 range [\${dt.min}, \${dt.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=je(e),n=BigInt(r);return new t(n>Z/2n?n-Z:n)}},On={request:{[hn.abiSelector]:t=>new hn(t).toApiRequest(),[vn.abiSelector]:t=>new vn(t).toApiRequest(),[mr.abiSelector]:t=>new mr(t).toApiRequest(),[Sr.abiSelector]:t=>new Sr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[En.abiSelector]:t=>new En(t).toApiRequest(),[An.abiSelector]:t=>new An(t).toApiRequest(),[Tn.abiSelector]:t=>new Tn(t).toApiRequest(),[Sn.abiSelector]:t=>new Sn(t).toApiRequest(),[In.abiSelector]:t=>new In(t).toApiRequest(),[kn.abiSelector]:t=>new kn(t).toApiRequest(),[xn.abiSelector]:t=>new xn(t).toApiRequest(),[Bn.abiSelector]:t=>new Bn(t).toApiRequest(),[Cn.abiSelector]:t=>new Cn(t).toApiRequest(),[Rn.abiSelector]:t=>new Rn(t).toApiRequest()},response:{[hn.abiSelector]:t=>hn.factoryFromApiResponse(t).decodeUtf8(),[vn.abiSelector]:t=>vn.factoryFromApiResponse(t).decodeUtf8(),[mr.abiSelector]:t=>mr.factoryFromApiResponse(t).toBigInt(),[Sr.abiSelector]:t=>Sr.factoryFromApiResponse(t).toBigInt(),[Br.abiSelector]:t=>Br.factoryFromApiResponse(t).toBigInt(),[En.abiSelector]:t=>En.factoryFromApiResponse(t).toBigInt(),[An.abiSelector]:t=>An.factoryFromApiResponse(t).toBigInt(),[Tn.abiSelector]:t=>Tn.factoryFromApiResponse(t).toBigInt(),[Sn.abiSelector]:t=>Sn.factoryFromApiResponse(t).toBigInt(),[In.abiSelector]:t=>In.factoryFromApiResponse(t).toBigInt(),[kn.abiSelector]:t=>kn.factoryFromApiResponse(t).toBigInt(),[xn.abiSelector]:t=>xn.factoryFromApiResponse(t).toBigInt(),[Bn.abiSelector]:t=>Bn.factoryFromApiResponse(t).toBigInt(),[Cn.abiSelector]:t=>Cn.factoryFromApiResponse(t).toBigInt(),[Rn.abiSelector]:t=>Rn.factoryFromApiResponse(t).toBigInt()}},Nn={request:{[hn.abiSelector]:t=>new hn(t).toApiRequest(),[vn.abiSelector]:t=>new vn(t).toApiRequest(),[mr.abiSelector]:t=>rn(t),[Sr.abiSelector]:t=>new Sr(t).toApiRequest(),[Br.abiSelector]:t=>new Br(t).toApiRequest(),[En.abiSelector]:t=>rn(t),[An.abiSelector]:t=>rn(t),[Tn.abiSelector]:t=>rn(t),[Sn.abiSelector]:t=>rn(t),[In.abiSelector]:t=>rn(t),[kn.abiSelector]:t=>new kn(t).toApiRequest(),[xn.abiSelector]:t=>new xn(t).toApiRequest(),[Bn.abiSelector]:t=>new Bn(t).toApiRequest(),[Cn.abiSelector]:t=>new Cn(t).toApiRequest(),[Rn.abiSelector]:t=>new Rn(t).toApiRequest()},response:{[hn.abiSelector]:t=>hn.factoryFromApiResponse(t).decodeUtf8(),[vn.abiSelector]:t=>vn.factoryFromApiResponse(t).decodeUtf8(),[mr.abiSelector]:t=>BigInt(je(t)),[Sr.abiSelector]:t=>Sr.factoryFromApiResponse(t).toBigInt(),[Br.abiSelector]:t=>Br.factoryFromApiResponse(t).toBigInt(),[En.abiSelector]:t=>BigInt(je(t)),[An.abiSelector]:t=>BigInt(je(t)),[Tn.abiSelector]:t=>BigInt(je(t)),[Sn.abiSelector]:t=>BigInt(je(t)),[In.abiSelector]:t=>BigInt(je(t)),[kn.abiSelector]:t=>BigInt(je(t)),[xn.abiSelector]:t=>BigInt(je(t)),[Bn.abiSelector]:t=>BigInt(je(t)),[Cn.abiSelector]:t=>BigInt(je(t)),[Rn.abiSelector]:t=>BigInt(je(t))}},Dn=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nn}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>Cr(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Pn=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Nn}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function Ln(t,e){const r=Un(t);if(0===r||1===r)return new Dn(t,e);if(2===r)return new Pn(t,e);throw Error(\`Unsupported ABI version \${r}\`)}function Un(t){return t.find(t=>"interface"===t.type)?2:Zr(t)?1:0}function Fn(t,e,r){return"constructor"===t&&!r&&!e.length}function Vn(t,e,r){for(let n=0,i=0;n<t.length;n++)if(t[n]===e)i++;else if(t[n]===r&&0===--i)return n;return Number.POSITIVE_INFINITY}function Hn(t){return Kr(t)?function(t){const e=t.slice(1,-1),r=[];let n,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:n=i+Vn(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):n=i+Vn(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);n=-1!==t?t:Number.POSITIVE_INFINITY}}r.push(e.slice(i,n)),i=n+2}return r}(t):function(t){const e=t.replace(/\\s/g,"").slice(1,-1),{subTuple:r,result:n}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let r="",n=0;for(;n<t.length;){if("("===t[n]){let i=1;const a=n;for(n++;i;)")"===t[n]&&i--,"("===t[n]&&i++,n++;e.push(t.substring(a,n)),r+=" ",n--}else r+=t[n];n++}return{subTuple:e,result:r}}(e);let i=n.split(",").map(t=>r.length?t.replace(" ",r.shift()):t);return Dr(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Mn=class t{content;arrayType;constructor(e,r){le(t.isTypeFixedArray(r),\`The type \${r} is not a Cairo fixed array. Needs [type; length].\`);try{t.getFixedArrayType(r)}catch{throw new Error(\`The type \${r} do not includes any content type. Needs [type; length].\`)}let n;try{n=t.getFixedArraySize(r)}catch{throw new Error(\`The type \${r} type do not includes any length. Needs [type; length].\`)}le(n===e.length,\`The ABI type \${r} is expecting \${n} items. \${e.length} items provided.\`),this.content=e,this.arrayType=r}static getFixedArraySize(t){const e=t.match(/(?<=; )\\d+(?=\\])/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid number after ';' character.\`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\\[).+(?=;)/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid type of data.\`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,r)=>(t[r]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\\[.*;\\s.*\\]\$/.test(t)&&/(?<=\\[).+(?=;)/.test(t)&&/(?<=; )\\d+(?=\\])/.test(t)}};function \$n({type:t,val:e,parser:r}){switch(!0){case Sr.isAbiType(t):case Br.isAbiType(t):case En.isAbiType(t):case An.isAbiType(t):case Tn.isAbiType(t):case Sn.isAbiType(t):case In.isAbiType(t):case kn.isAbiType(t):case xn.isAbiType(t):case Bn.isAbiType(t):case Cn.isAbiType(t):case Rn.isAbiType(t):case hn.isAbiType(t):return r.getRequestParser(t)(e);case Yr(t):{const t=N(Se(e)).padStart(128,"0"),r=Qr(D(t.slice(-64))),n=Qr(D(t.slice(0,-64)));return[rn(n.low),rn(n.high),rn(r.low),rn(r.high)]}default:return r.getRequestParser(mr.abiSelector)(e)}}function jn({element:t,type:e,structs:r,enums:n,parser:i}){if(void 0===t)throw Error(\`Missing parameter for type \${e}\`);if(Mn.isTypeFixedArray(e)){const a=Mn.getFixedArrayType(e);let s=[];if(Array.isArray(t))s=new Mn(t,e).content;else{if("object"!=typeof t)throw new Error(\`ABI type \${e}: not an Array representing a cairo.fixedArray() provided.\`);s=Object.values(t),le(s.length===Mn.getFixedArraySize(e),\`ABI type \${e}: object provided do not includes  \${Mn.getFixedArraySize(e)} items. \${s.length} items provided.\`)}return s.reduce((t,e)=>t.concat(jn({element:e,type:a,structs:r,enums:n,parser:i})),[])}if(Array.isArray(t)){const a=[];a.push(rn(t.length));const s=Wr(e);return t.reduce((t,e)=>t.concat(jn({element:e,type:s,structs:r,enums:n,parser:i})),a)}if(Sr.isAbiType(e))return i.getRequestParser(e)(t);if(Br.isAbiType(e))return i.getRequestParser(e)(t);if(r[e]&&r[e].members.length){if(zr(e))return \$n({type:e,val:t,parser:i});if(vn.isAbiType(e))return i.getRequestParser(e)(t);const{members:a}=r[e],s=t;return a.reduce((t,e)=>t.concat(jn({element:s[e.name],type:e.type,structs:r,enums:n,parser:i})),[])}if(Nr(e)){const a=function(t,e){const r=Hn(e),n=Object.values(t);if(n.length!==r.length)throw Error(\`ParseTuple: provided and expected abi tuple size do not match.\\n      provided: \${n}\\n      expected: \${r}\`);return r.map((t,e)=>({element:n[e],type:t.type??t}))}(t,e);return a.reduce((t,e)=>{const a=jn({element:e.element,type:e.type,structs:r,enums:n,parser:i});return t.concat(a)},[])}if(Lr(e,n)){const{variants:a}=n[e];if(Ur(e)){const e=t;if(e.isSome()){const t=a.find(t=>"Some"===t.name);if(pe(t))throw Error("Error in abi : Option has no 'Some' variant.");const s=t.type;if("()"===s)return an.Some.toString();const o=jn({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[an.Some.toString(),...o]:[an.Some.toString(),o]}return an.None.toString()}if(Fr(e)){const e=t;if(e.isOk()){const t=a.find(t=>"Ok"===t.name);if(pe(t))throw Error("Error in abi : Result has no 'Ok' variant.");const s=t.type;if("()"===s)return on.Ok.toString();const o=jn({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[on.Ok.toString(),...o]:[on.Ok.toString(),o]}const s=a.find(t=>"Err"===t.name);if(pe(s))throw Error("Error in abi : Result has no 'Err' variant.");const o=s.type;if("()"===o)return on.Err.toString();const c=jn({element:e.unwrap(),type:o,structs:r,enums:n,parser:i});return Array.isArray(c)?[on.Err.toString(),...c]:[on.Err.toString(),c]}const s=t,o=s.activeVariant(),c=a.find(t=>t.name===o);if(pe(c))throw Error(\`Not find in abi : Enum has no '\${o}' variant.\`);const u=c.type,l=a.findIndex(t=>t.name===o);if("()"===u)return l.toString();const d=jn({element:s.unwrap(),type:u,structs:r,enums:n,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(Xr(e))return \$n({type:Wr(e),val:t,parser:i});if("object"==typeof t)throw Error(\`Parameter \${t} do not align with abi parameter \${e}\`);return \$n({type:e,val:t,parser:i})}function qn({argsIterator:t,input:e,structs:r,enums:n,parser:i}){const{name:a,type:s}=e;let{value:o}=t.next();switch(!0){case Mn.isTypeFixedArray(s):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(\`ABI expected parameter \${a} to be an array or an object, got \${o}\`);return jn({element:o,type:e.type,structs:r,enums:n,parser:i});case Or(s):if(!Array.isArray(o)&&!ar(o))throw Error(\`ABI expected parameter \${a} to be array or long string, got \${o}\`);return be(o)&&(o=cr(o)),jn({element:o,type:e.type,structs:r,enums:n,parser:i});case Xr(s):return \$n({type:Wr(s),val:o,parser:i});case zr(s):return \$n({type:s,val:o,parser:i});case Pr(s,r)||Nr(s)||Sr.isAbiType(s):case Lr(s,n):return jn({element:o,type:s,structs:r,enums:n,parser:i});default:return \$n({type:s,val:o,parser:i})}}function zn(t,e,r){let n;switch(!0){case jr(t):return n=e.next().value,Boolean(BigInt(n));case Sr.isAbiType(t):case Br.isAbiType(t):case En.isAbiType(t):case An.isAbiType(t):case Tn.isAbiType(t):case Sn.isAbiType(t):case In.isAbiType(t):case kn.isAbiType(t):case xn.isAbiType(t):case Bn.isAbiType(t):case Cn.isAbiType(t):case Rn.isAbiType(t):return r.getResponseParser(t)(e);case zr(t):return n=e.next().value,BigInt(n);case hn.isAbiType(t):return r.getResponseParser(t)(e);case Yr(t):const i=N(e.next().value).padStart(32,"0"),a=N(e.next().value).padStart(32,"0"),s=N(e.next().value).padStart(32,"0"),o=N(e.next().value).padStart(32,"0");return BigInt(D(a+i+o+s));default:return r.getResponseParser(mr.abiSelector)(e)}}function Gn(t,e,r,n,i){if("()"===e.type)return{};if(Sr.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(Br.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(vn.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(Mn.isTypeFixedArray(e.type)){const a=[],s={name:"",type:Mn.getFixedArrayType(e.type)},o=Mn.getFixedArraySize(e.type);for(;a.length<o;)a.push(Gn(t,s,r,n,i));return a}if(Or(e.type)){const a=[],s={name:"",type:Wr(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Gn(t,s,r,n,i));return a}if(Xr(e.type)){const a={name:"",type:Wr(e.type)};return Gn(t,a,r,n,i)}if(n&&e.type in n&&n[e.type])return zr(e.type)?zn(e.type,t,r):n[e.type].members.reduce((e,a)=>(e[a.name]=Gn(t,a,r,n,i),e),{});if(i&&e.type in i&&i[e.type]){const a=Number(t.next().value),s=i[e.type].variants.reduce((e,s,o)=>o===a?(e[s.name]=Gn(t,{name:"",type:s.type},r,n,i),e):(e[s.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=a===an.Some?s.Some:void 0;return new sn(a,t)}if(e.type.startsWith("core::result::Result")){let t;return t=a===on.Ok?s.Ok:s.Err,new cn(a,t)}return new nn(s)}if(Nr(e.type))return Hn(e.type).reduce((e,a,s)=>{const o=a?.name?a.name:s,c={name:o,type:a?.type?a.type:a};return e[o]=Gn(t,c,r,n,i),e},{});if(Or(e.type)){const a=[],s={name:"",type:Wr(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Gn(t,s,r,n,i));return a}return zn(e.type,t,r)}function Yn({responseIterator:t,output:e,structs:r,enums:n,parsedResult:i,parser:a}){const{name:s,type:o}=e;let c;switch(!0){case Cr(s):return c=t.next().value,BigInt(c);case r&&o in r||Nr(o):case n&&Lr(o,n):case Mn.isTypeFixedArray(o):return Gn(t,e,a,r,n);case Or(o):if(Kr(o))return Gn(t,e,a,r,n);const u=[];if(i&&i[\`\${s}_len\`]){const o=i[\`\${s}_len\`];for(;u.length<o;)u.push(Gn(t,{name:s,type:e.type.replace("*","")},a,r,n))}return u;case Xr(o):return Gn(t,e,a,r,n);default:return zn(o,t,a)}}var Kn=(t,e)=>{if(le(be(t)||ye(t)||me(t),\`Validate: arg \${e.name} should be a felt typed as (String, Number or BigInt)\`),be(t)&&!ve(t))return;const r=BigInt(t.toString(10));le(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`)},Wn=(t,e)=>{let r;switch(ye(t)&&le(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),le(be(t)||ye(t)||me(t)||we(t)&&"low"in t&&"high"in t||we(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (String, Number or BigInt), but is \${typeof t} \${t}.\`),e.type){case Kt.u256:r=new Sr(t).toBigInt();break;case Kt.u512:r=new Br(t).toBigInt();break;default:r=Ae(t)}switch(e.type){case Kt.u8:le(r>=0n&&r<=255n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0 - 255]\`);break;case Kt.u16:le(r>=0n&&r<=65535n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 65535]\`);break;case Kt.u32:le(r>=0n&&r<=4294967295n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 4294967295]\`);break;case Kt.u64:le(r>=0n&&r<=2n**64n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^64-1]\`);break;case Kt.u128:le(r>=0n&&r<=2n**128n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^128-1]\`);break;case Kt.u256:le(r>=0n&&r<=2n**256n-1n,\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^256-1\`);break;case Kt.u512:le(Br.is(r),\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^512-1\`);break;case Zt.ClassHash:case Zt.ContractAddress:le(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`);break;case Zt.Secp256k1Point:le(r>=0n&&r<=2n**512n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 512 bits number.\`);break;case Zt.U96:le(r>=0n&&r<=2n**96n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 96 bits number.\`)}},Zn=(t,e)=>{le(ge(t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (Boolean)\`)},Xn=(t,e,r)=>{if(e.type!==Kt.u256&&e.type!==Kt.u512){if(zr(e.type)){le(!we(t),\`EthAddress type is waiting a BigNumberish. Got "\${t}"\`);const r=BigInt(t.toString(10));return void le(r>=0n&&r<=2n**160n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^160-1]\`)}le(we(t),\`Validate: arg \${e.name} is cairo type struct (\${e.type}), and should be defined as a js object (not array)\`),r[e.type].members.forEach(({name:r})=>{le(Object.keys(t).includes(r),\`Validate: arg \${e.name} should have a property \${r}\`)})}else Wn(t,e)},Jn=(t,e)=>{le(we(t),\`Validate: arg \${e.name} is cairo type Enum (\${e.type}), and should be defined as a js object (not array)\`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...Object.getOwnPropertyNames(t),...r];if(!(Ur(e.type)&&n.includes("isSome")&&n.includes("isNone")||Fr(e.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(\`Validate Enum: argument \${e.name}, type \${e.type}, value received "\${t}", is not an Enum.\`)},Qn=(t,e)=>{le(we(t),\`Validate: arg \${e.name} should be a tuple (defined as object)\`)},ti=(t,e,r,n)=>{const i=Or(e.type),a=i?Wr(e.type):Mn.getFixedArrayType(e.type);if(i&&Rr(a)&&or(t))return;let s=[];if(i)le(Array.isArray(t),\`Validate: arg \${e.name} should be an Array\`),s=t;else switch(!0){case Array.isArray(t):s=t;break;case"object"==typeof t:s=Object.values(t);break;default:throw new Error(\`Validate: arg \${e.name} should be an Array or an object.\`)}switch(!0){case Rr(a):s.forEach(t=>Kn(t,e));break;case Nr(a):s.forEach(t=>Qn(t,{name:e.name,type:a}));break;case Or(a):s.forEach(t=>ti(t,{name:"",type:a},r,n));break;case Pr(a,r):s.forEach(t=>Xn(t,{name:e.name,type:a},r));break;case Lr(a,n):s.forEach(t=>Jn(t,{name:e.name,type:a}));break;case Vr(a)||\$r(a):s.forEach(t=>Wn(t,{name:"",type:a}));break;case jr(a):s.forEach(t=>Zn(t,e));break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value \${s}\`)}};function ei(t,e,r,n){t.inputs.reduce((t,i)=>{const a=e[t];switch(!0){case Cr(i.name):return t;case Rr(i.type):Kn(a,i);break;case hn.isAbiType(i.type):hn.validate(a);break;case Vr(i.type)||\$r(i.type):Wn(a,i);break;case jr(i.type):Zn(a,i);break;case vn.isAbiType(i.type):vn.validate(a);break;case kn.isAbiType(i.type):kn.validate(a);break;case xn.isAbiType(i.type):xn.validate(a);break;case Bn.isAbiType(i.type):Bn.validate(a);break;case Cn.isAbiType(i.type):Cn.validate(a);break;case Rn.isAbiType(i.type):Rn.validate(a);break;case Or(i.type)||Mn.isTypeFixedArray(i.type):ti(a,i,r,n);break;case Pr(i.type,r):Xn(a,i,r);break;case Lr(i.type,n):Jn(a,i);break;case Nr(i.type):Qn(a,i);break;case Xr(i.type):((t,e)=>{const r=Wr(e.type);switch(le(Vr(r)&&r!==Br.abiSelector||Rr(r),\`Validate: \${e.name} type is not authorized for NonZero type.\`),!0){case Rr(r):Kn(t,e),le(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Vr(r):Wn(t,{name:"",type:r}),r===Kt.u256?le(new Sr(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):le(Ae(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value "\${t}"\`)}})(a,i);break;default:throw new Error(\`Validate Unhandled: argument \${i.name}, type \${i.type}, value \${a}\`)}return t+1},0)}var ri=class t{abi;parser;structs;enums;constructor(e,r){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=Ln(e,r),this.abi=this.parser.getLegacyFormat()}validate(t,e,r=[]){t!==Yt.DEPLOY&&le(this.abi.filter(e=>{if("function"!==e.type)return!1;const r="view"===e.stateMutability||"view"===e.state_mutability;return t===Yt.INVOKE?!r:r}).map(t=>t.name).includes(e),(t===Yt.INVOKE?"invocable":"viewable")+" method not found in abi");const n=this.abi.find(r=>t===Yt.DEPLOY?r.name===e&&"constructor"===r.type:r.name===e&&"function"===r.type);if(Fn(e,r,n))return;const i=this.parser.methodInputsLength(n);if(r.length!==i)throw Error(\`Invalid number of arguments, expected \${i} arguments, but got \${r.length}\`);ei(n,r,this.structs,this.enums)}compile(t,e){const r=this.abi.find(e=>e.name===t);if(Fn(t,e,r))return[];let n;if(Array.isArray(e))n=e;else{const t=function(t,e,r,n){const i=(t,e)=>{if(Mn.isTypeFixedArray(e))return function(t,e){const r=Mn.getFixedArrayType(e),n=Mn.getFixedArraySize(e);if(Array.isArray(t)){if(n!==t.length)throw new Error(\`ABI type \${e}: array provided do not includes  \${n} items. \${t.length} items provided.\`);return t.map(t=>i(t,r))}if(n!==Object.keys(t).length)throw new Error(\`ABI type \${e}: object provided do not includes  \${n} properties. \${Object.keys(t).length} items provided.\`);return i(t,r)}(t,e);if(Or(e))return function(t,e){const r=Wr(e);return be(t)?t:t.map(t=>i(t,r))}(t,e);if(Lr(e,n)){const r=n[e];return s(t,r)}if(Nr(e))return function(t,e){const r=Hn(e).reduce((e,r,n)=>{const a=Object.keys(t),s=r?.type?r.type:r;return o=i(t[a[n]],s),Object.defineProperty(e,n.toString(),{enumerable:!0,value:o??t[a[n]]}),e;var o},{});return r}(t,e);if(zr(e))return t;if(Xr(e))return t;if(vn.isAbiType(e))return t;if(Gr(e))return t;if(Yr(e))return t;if(Sr.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(\`Your object includes the property : \${e}, containing an Uint256 object without the 'low' and 'high' keys.\`);return{low:r.low,high:r.high}}if(Br.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!["limb0","limb1","limb2","limb3"].every(t=>t in r))throw Error(\`Your object includes the property : \${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.\`);return{limb0:r.limb0,limb1:r.limb1,limb2:r.limb2,limb3:r.limb3}}if(Pr(e,r)){const n=r[e].members;return a(t,n)}return t},a=(t,e)=>e.reduce((e,r)=>{if("undefined"===t[r.name]&&(Kr(r.type)||!Cr(r.name)))throw Error(\`Your object needs a property with key : \${r.name} .\`);var n;return n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n??t[r.name]}),e},{}),s=(t,e)=>{if(Fr(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),a=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return r.isOk()?new cn(on.Ok,i(t.unwrap(),n)):new cn(on.Err,i(t.unwrap(),a))}if(Ur(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return r.isSome()?new sn(an.Some,i(r.unwrap(),n)):new sn(an.None,{})}const r=t,n=Object.entries(r.variant).map(t=>{if(pe(t[1]))return t;const n=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===n?t:[t[0],i(r.unwrap(),n)]});return new nn(Object.fromEntries(n))};return e.reduce((e,r)=>{return Cr(r.name)&&!Kr(r.type)||(n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n})),e;var n},{})}(e,r.inputs,this.structs,this.enums);n=Object.values(t),ei(r,n,this.structs,this.enums)}const i=n[Symbol.iterator](),a=r.inputs.reduce((t,e)=>Cr(e.name)&&!Kr(e.type)?t:t.concat(qn({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(a,"__compiled__",{enumerable:!1,writable:!1,value:!0}),a}static compile(t){const e=t=>{const e=(t,r=".")=>{const n=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(n).flatMap(([t,i])=>{let a=i;"entrypoint"===t?a=Ze(a):or(a)&&(a=fr(a));const s=Array.isArray(n)&&"0"===t?"\$\$len":t;if(me(a))return[[\`\${r}\${s}\`,rn(a)]];if(Object(a)===a){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),n=[...Object.getOwnPropertyNames(a),...t];if(n.includes("isSome")&&n.includes("isNone")){const t=a,n=t.isSome()?an.Some:an.None;return t.isSome()?e({0:n,1:t.unwrap()},\`\${r}\${s}.\`):[[\`\${r}\${s}\`,rn(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const t=a,n=t.isOk()?on.Ok:on.Err;return e({0:n,1:t.unwrap()},\`\${r}\${s}.\`)}if(n.includes("variant")&&n.includes("activeVariant")){const t=a,n=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===n);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[\`\${r}\${s}\`,rn(i)]]:e({0:i,1:t.unwrap()},\`\${r}\${s}.\`)}return e(a,\`\${r}\${s}.\`)}return[[\`\${r}\${s}\`,rn(a)]]})};return Object.fromEntries(e(t))};let r;if(Array.isArray(t)){const n=e({...t});r=Object.values(n)}else{const n=e(t);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,e){const{outputs:r}=this.abi.find(e=>e.name===t),n=e.flat()[Symbol.iterator](),i=r.flat().reduce((t,e,r)=>{const i=e.name??r;return t[i]=Yn({responseIterator:n,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[\`\${i}_len\`]&&delete t[\`\${i}_len\`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,r){return ln(this.parse(t,e),r)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Se(t))}decodeParameters(t,e){const r=Array.isArray(t)?t:[t],n=e.flat()[Symbol.iterator](),i=r.map(t=>Yn({responseIterator:n,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}},ni={};d(ni,{calculateContractAddressFromHash:()=>Vi,calculateDeclareTransactionHash:()=>Ri,calculateDeployAccountTransactionHash:()=>Oi,calculateInvokeTransactionHash:()=>Ci,calculateL2MessageTxHash:()=>Bi,computeCompiledClassHash:()=>Gi,computeContractClassHash:()=>Wi,computeHashOnElements:()=>Li,computeHintedClassHash:()=>\$i,computeLegacyContractClassHash:()=>ji,computePedersenHash:()=>Di,computePedersenHashOnElements:()=>Ui,computePoseidonHash:()=>Pi,computePoseidonHashOnElements:()=>Fi,computeSierraContractClassHash:()=>Ki,formatSpaces:()=>Mi,getL1MessageHash:()=>tr,getL2MessageHash:()=>Qe,getSelector:()=>Xe,getSelectorFromName:()=>Ze,hashByteCodeSegments:()=>zi,keccakBn:()=>Ke,poseidon:()=>ii,solidityUint256PackedKeccak256:()=>Je,starknetKeccak:()=>We});var ii=p(r(5920)),ai={};d(ai,{calculateDeclareTransactionHash:()=>bi,calculateDeployAccountTransactionHash:()=>mi,calculateInvokeTransactionHash:()=>_i,calculateTransactionHashCommon:()=>gi,encodeDataResourceBoundsL1:()=>pi,encodeResourceBoundsL1:()=>hi,encodeResourceBoundsL2:()=>fi,hashDAMode:()=>di,hashFeeFieldV3B3:()=>yi});var si=r(4246),oi=t=>t.map(t=>BigInt(t)),ci=BigInt(ur("L1_GAS")),ui=BigInt(ur("L2_GAS")),li=BigInt(ur("L1_DATA"));function di(t,e){return(BigInt(t)<<32n)+BigInt(e)}function hi(t){return(ci<<192n)+(t.l1_gas.max_amount<<128n)+t.l1_gas.max_price_per_unit}function fi(t){return(ui<<192n)+(t.l2_gas.max_amount<<128n)+t.l2_gas.max_price_per_unit}function pi(t){return(li<<192n)+(t.l1_data_gas.max_amount<<128n)+t.l1_data_gas.max_price_per_unit}function yi(t,e){const r=hi(e),n=fi(e),i=pi(e);return(0,si.poseidonHashMany)([BigInt(t),r,n,i])}function gi(t,e,r,n,i,a,s,o,c,u,l=[]){const d=yi(a,u),h=di(o,c),f=oi([t,e,r,d,(0,si.poseidonHashMany)(oi(s)),n,i,h,...oi(l)]);return Se((0,si.poseidonHashMany)(f))}function mi(t,e,r,n,i,a,s,o,c,u,l,d){return gi(Et.DEPLOY_ACCOUNT,i,t,a,s,l,d,o,c,u,[(0,si.poseidonHashMany)(oi(r)),e,n])}function bi(t,e,r,n,i,a,s,o,c,u,l,d){return gi(Et.DECLARE,n,r,i,a,l,oi(d),o,c,u,[(0,si.poseidonHashMany)(oi(s)),t,e])}function _i(t,e,r,n,i,a,s,o,c,u,l){return gi(Et.INVOKE,e,t,n,i,u,l,s,o,c,[(0,si.poseidonHashMany)(oi(a)),(0,si.poseidonHashMany)(oi(r))])}var wi={};d(wi,{calculateDeclareTransactionHash:()=>Ii,calculateDeployAccountTransactionHash:()=>ki,calculateL2MessageTxHash:()=>Bi,calculateTransactionHash:()=>xi,calculateTransactionHashCommon:()=>Si,computeHashOnElements:()=>Ti});var vi={};d(vi,{starkCurve:()=>Ei,weierstrass:()=>Ai});var Ei=p(r(4246)),Ai=p(r(1705));function Ti(t){return[...t,t.length].reduce((t,e)=>Ei.pedersen(Ae(t),Ae(e)),0).toString()}function Si(t,e,r,n,i,a,s,o=[]){const c=Ti(i);return Ti([t,e,r,n,c,a,s,...o])}function Ii(t,e,r,n,i,a,s){return Si(Et.DECLARE,r,e,0,[t],n,i,[a,...s?[s]:[]])}function ki(t,e,r,n,i,a,s,o){const c=[e,n,...r];return Si(Et.DEPLOY_ACCOUNT,i,t,0,c,a,s,[o])}function xi(t,e,r,n,i,a){return Si(Et.INVOKE,e,t,0,r,n,i,[a])}function Bi(t,e,r,n,i,a){const s=[t,...n];return Si(Et.L1_HANDLER,0,e,Xe(r),s,0,i,[a])}function Ci(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return _i(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Ri(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return bi(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Oi(t){if(function(t){return[m.ETransactionVersion.V3,m.ETransactionVersion.F3].includes(t.version)}(t))return mi(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}var Ni=r(4246);function Di(t,e){return Ei.pedersen(BigInt(t),BigInt(e))}function Pi(t,e){return Se(Ei.poseidonHash(BigInt(t),BigInt(e)))}function Li(t){return[...t,t.length].reduce((t,e)=>Ei.pedersen(BigInt(t),BigInt(e)),0).toString()}var Ui=Li;function Fi(t){return Se((0,Ni.poseidonHashMany)(t.map(t=>BigInt(t))))}function Vi(t,e,r,n){const i=Li(ri.compile(r)),a=Li([rn("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,t,e,i]);return Se(BigInt(a)%J)}function Hi(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function Mi(t){let e=!1;const r=[];for(const n of t)'"'===n&&0==(r.length>0&&"\\\\"===r.slice(-1)[0])&&(e=!e),e?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function \$i(t){const{abi:e,program:r}=t,n=Mi(ce({abi:e,program:r},Hi));return D(Ei.keccak(x(n)).toString(16))}function ji(t){const e=be(t)?se(t):t,r=Se(W),n=Li(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=Li(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),a=Li(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),s=Li(e.program.builtins.map(t=>ur(t))),o=\$i(e),c=Li(e.program.data);return Li([r,n,i,a,s,o,c])}function qi(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,Ni.poseidonHashMany)(e.flatMap(t=>BigInt(ur(t)))))];var e});return(0,Ni.poseidonHashMany)(e)}function zi(t){const e=t.bytecode.map(t=>BigInt(t)),r=t.bytecode_segment_lengths??[];let n=0;const i=r.flatMap(t=>{const r=e.slice(n,n+=t);return[BigInt(t),(0,Ni.poseidonHashMany)(r)]});return 1n+(0,Ni.poseidonHashMany)(i)}function Gi(t){const e=BigInt(ur("COMPILED_CLASS_V1")),r=qi(t.entry_points_by_type.EXTERNAL),n=qi(t.entry_points_by_type.L1_HANDLER),i=qi(t.entry_points_by_type.CONSTRUCTOR),a=t.bytecode_segment_lengths?zi(t):(0,Ni.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,r,n,i,a]))}function Yi(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,Ni.poseidonHashMany)(e)}function Ki(t){const e=BigInt(ur("CONTRACT_CLASS_V0.1.0")),r=Yi(t.entry_points_by_type.EXTERNAL),n=Yi(t.entry_points_by_type.L1_HANDLER),i=Yi(t.entry_points_by_type.CONSTRUCTOR),a=function(t){const e=Mi(ce(t.abi,null));return BigInt(D(Ei.keccak(x(e)).toString(16)))}(t),s=(0,Ni.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Se((0,Ni.poseidonHashMany)([e,r,n,i,a,s]))}function Wi(t){const e=be(t)?se(t):t;return"sierra_program"in e?Ki(e):ji(e)}var Zi={};d(Zi,{ZeroFeeEstimate:()=>ua,compressProgram:()=>Qi,decompressProgram:()=>ta,formatSignature:()=>ra,getFullPublicKey:()=>pa,intDAM:()=>la,randomAddress:()=>ea,resourceBoundsToBigInt:()=>ga,resourceBoundsToEstimateFeeResponse:()=>oa,resourceBoundsToHexString:()=>ya,signatureToDecimalArray:()=>na,signatureToHexArray:()=>ia,toFeeVersion:()=>ha,toOverheadOverallFee:()=>ca,toOverheadResourceBounds:()=>sa,toTransactionVersion:()=>da,v3Details:()=>fa,zeroResourceBounds:()=>aa});var Xi=r(4246),Ji=r(1668);function Qi(t){const e=be(t)?t:ce(t);return R((0,Ji.gzip)(e))}function ta(t){if(Array.isArray(t))return t;const e=I((0,Ji.ungzip)(C(t)));return se(e)}function ea(){const t=Xi.utils.randomPrivateKey();return(0,Xi.getStarkKey)(t)}function ra(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Se(t));try{const{r:e,s:r}=t;return[Se(e),Se(r)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function na(t){return Oe(ra(t))}function ia(t){return Ne(ra(t))}function aa(){return sa({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function sa(t,e=xt.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function oa(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function ca(t,e=xt.get("resourceBoundsOverhead")){return He(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*He(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+He(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*He(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+He(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*He(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function ua(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function la(t){if(t===Lt.L1)return Ut.L1;if(t===Lt.L2)return Ut.L2;throw Error("EDAM conversion")}function da(t,e){const r=Se(e||t);if(!Object.values(Pt).includes(r))throw Error(\`\${e?"providedVersion":"defaultVersion"} \${r} is not ETransactionVersion\`);return r}function ha(t){if(!t)return;const e=Se(t);if(e===Nt.V0)return Nt.F0;if(e===Nt.V1)return Nt.F1;if(e===Nt.V2)return Nt.F2;if(e===Nt.V3)return Nt.F3;throw Error(\`toFeeVersion: \${e} is not supported\`)}function fa(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Lt.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Lt.L1,resourceBounds:t.resourceBounds??aa()}}function pa(t){const e=Se(t);return D(O((0,Xi.getPublicKey)(e,!1)))}function ya(t){const e=t=>{if(me(t))return Se(t);if(we(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function ga(t){const e=t=>{if(be(t))return BigInt(t);if(we(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function ma(t){return"sierra_program"in(be(t)?se(t):t)}function ba(t){const e={...t};if(ma(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Gi(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??Wi(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function _a(t){if(ma(t))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");const e=t;return{...e,program:ta(e.program)}}var wa={};d(wa,{ethRandomPrivateKey:()=>Ea,validateAndParseEthAddress:()=>Aa});var va=r(8510);function Ea(){return F(O(va.secp256k1.utils.randomPrivateKey()))}function Aa(t){Re(t,G,2n**160n-1n,"Ethereum Address ");const e=D(N(Se(t)).padStart(40,"0"));return le(Boolean(e.match(/^(0x)?[0-9a-f]{40}\$/)),"Invalid Ethereum Address Format"),e}var Ta="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==r.g&&r.g.fetch.bind(r.g)||(()=>{throw new yn("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),Sa={};function Ia(t){const e=t.version?Se(t.version):Nt.V3;return e===Nt.V3||e===Nt.F3}function ka(t,e){const r=t.split("."),n=e.split(".");return r.every((t,e)=>"*"===t||t===n[e])}function xa(t,e={allowAnyPatchVersion:!1}){return Object.values(At).some(r=>ka(e.allowAnyPatchVersion?Ba(r):r,t))}function Ba(t){const e=t.split(".");return e.length<3?t:\`\${e[0]}.\${e[1]}.*\`}function Ca(t){const[e,r]=t.replace(/^v/,"").split(".");return\`v\${e}_\${r}\`}function Ra(t){return"PENDING"===t.status}function Oa(t){return!("block_hash"in t)}function Na(t){return!("block_hash"in t)}function Da(t){return new Promise(e=>{setTimeout(e,t)})}function Pa(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=Mi(ce(t.abi)),e.sierra_program=Mi(ce(t.sierra_program)),e.sierra_program=Qi(e.sierra_program),e}function La(t){const e=be(t)?se(t):t;return ma(t)?Pa(e):{...e,..."program"in e&&{program:Qi(e.program)}}}function Ua(t){return be(t.abi)?se(t.abi):t.abi}d(Sa,{Block:()=>\$a,createSierraContractClass:()=>Pa,extractAbi:()=>Ua,getDefaultNodeUrl:()=>Fa,getDefaultNodes:()=>Va,getSupportedRpcVersions:()=>Ha,parseContract:()=>La,validBlockTags:()=>Ma,wait:()=>Da});var Fa=(t,e=!1,r)=>{e||Ct.info("Using default public node url, please provide nodeUrl in provider options!");const n=Va(r??xt.get("rpcVersion"))[t??wt.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Va(t){const e={...St};return Object.keys(e).forEach(function(r,n){e[r]=e[r].map(e=>\`\${e}\${Ca(t)}\`)}),e}function Ha(){return[...new Set(Object.values(At))]}var Ma=Object.values(Gt),\$a=class{hash=null;number=null;tag=null;setIdentifier(t){if(be(t))if(ir(t))this.number=parseInt(t,10);else if(ve(t))this.hash=t;else{if(!Ma.includes(t))throw TypeError(\`Block identifier unmanaged: \${t}\`);this.tag=t}else me(t)?this.hash=Se(t):ye(t)?this.number=t:this.tag=Gt.LATEST;if(ye(this.number)&&this.number<0)throw TypeError(\`Block number (\${this.number}) can't be negative\`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?\`blockNumber=\${this.number}\`:null!==this.hash?\`blockHash=\${this.hash}\`:\`blockNumber=\${this.tag}\`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash},ja={};function qa(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}d(ja,{fromCallsToExecuteCalldata:()=>Ga,fromCallsToExecuteCalldata_cairo1:()=>Ya,getCompiledCalldata:()=>qa,getExecuteCalldata:()=>Ka,getVersionsByType:()=>Wa,transformCallsToMulticallArrays:()=>za});var za=t=>{const e=[],r=[];return t.forEach(t=>{const n=ri.compile(t.calldata||[]);e.push({to:Ae(t.contractAddress).toString(10),selector:Ae(Ze(t.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:e,calldata:ri.compile({calldata:r})}},Ga=t=>{const{callArray:e,calldata:r}=za(t);return[...ri.compile({callArray:e}),...r]},Ya=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:ri.compile(t.calldata)}));return ri.compile({orderCalls:e})},Ka=(t,e="0")=>"1"===e?Ya(t):Ga(t);function Wa(t){return"fee"===t?{v3:Nt.F3}:{v3:Nt.V3}}var Za={headers:{"Content-Type":"application/json"},blockIdentifier:Gt.LATEST,retries:200},Xa=class{id="RPC081";channelSpecVersion=At.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(wt).includes(s)?this.nodeUrl=Fa(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||Fa(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ta,this.blockIdentifier=n??Za.blockIdentifier,this.chainId=i,this.headers={...Za.headers,...a},this.retries=o??Za.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,ye(r)&&(this.batchClient=new ue({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),Ct.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new gn(r,t,e);if(n instanceof yn)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ka(this.channelSpecVersion,t)||Ct.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xa(t))throw new yn(\`\${kt.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new \$a(n).identifier,a=Ne(t),s=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new \$a(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=e,a=new \$a(r).identifier,s=[];return n&&s.push(_.ESimulationFlag.SKIP_VALIDATE),i&&s.push(_.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:s})}async waitForTransaction(t,e){const r=Se(t);let n=e?.retries??this.retries,i=e?.lifeCycleRetries??3,a=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[_.ETransactionStatus.REJECTED],u=e?.successStates??[_.ETransactionStatus.ACCEPTED_ON_L2,_.ETransactionStatus.ACCEPTED_ON_L1],l={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!a;){await Da(o);try{h=await this.getTransactionStatus(r),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=h,s=!0,n}(u.includes(t)||u.includes(e))&&(a=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof gn&&t.isType("TXN_HASH_NOT_FOUND")){Ct.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1,await Da(o)}return f}getStorageAt(t,e,r=this.blockIdentifier){const n=Se(t),i=ke(e),a=new \$a(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const n=new \$a(e).identifier,i={simulation_flags:r?[_.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:n,...i})}async invoke(t,e){let r;if(!Ia(e))throw Error(kt.legacyTxRPC08Message);if(!Vt(e.resourceBounds))throw Error(kt.SWOldV3);return r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ri.toHex(t.calldata),version:_.ETransactionVersion.V3,signature:ia(t.signature),nonce:Se(e.nonce),resource_bounds:ya(e.resourceBounds),tip:Se(e.tip),paymaster_data:e.paymasterData.map(t=>Se(t)),account_deployment_data:e.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:t,signature:e,senderAddress:r,compiledClassHash:n},i){let a;if(!ma(t)||!Ia(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return a=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:_.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:_.ETransactionVersion.V3,signature:ia(e),nonce:Se(i.nonce),contract_class:{sierra_program:ta(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:ya(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),account_deployment_data:i.accountDeploymentData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},i){let a;if(!Ia(i))throw Error(kt.legacyTxRPC08Message);if(!Vt(i.resourceBounds))throw Error(kt.SWOldV3);return a=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:_.ETransactionType.DEPLOY_ACCOUNT,version:_.ETransactionVersion.V3,signature:ia(n),nonce:Se(i.nonce),contract_address_salt:Se(r||0),constructor_calldata:ri.toHex(e||[]),class_hash:Se(t),resource_bounds:ya(i.resourceBounds),tip:Se(i.tip),paymaster_data:i.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}callContract(t,e=this.blockIdentifier){const r=new \$a(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ri.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Aa(r),to_address:Se(n),entry_point_selector:Xe(i),payload:Ue(a)},o=new \$a(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=Wa(e);let n;if(!Ia(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(n={signature:ia(t.signature),nonce:Se(t.nonce),resource_bounds:ya(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t))},t.type===_.ETransactionType.INVOKE)return{type:_.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ri.toHex(t.calldata),version:Se(t.version||r.v3),...n};if(t.type===_.ETransactionType.DECLARE){if(!ma(t.contract))throw Ct.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:ta(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Se(t.version||r.v3),...n}}if(t.type===_.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=n;return{type:t.type,constructor_calldata:ri.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),version:Se(t.version||r.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},Ja={};d(Ja,{RpcChannel:()=>ts});var Qa={headers:{"Content-Type":"application/json"},blockIdentifier:Gt.LATEST,retries:200},ts=class{id="RPC090";channelSpecVersion=At.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(wt).includes(s)?this.nodeUrl=Fa(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||Fa(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||xt.get("fetch")||Ta,this.blockIdentifier=n??Qa.blockIdentifier,this.chainId=i,this.headers={...Qa.headers,...a},this.retries=o??Qa.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,ye(r)&&(this.batchClient=new ue({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),Ct.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new gn(r,t,e);if(n instanceof yn)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(ka(this.channelSpecVersion,t)||Ct.error(kt.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!xa(t))throw new yn(\`\${kt.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new \$a(n).identifier,a=Ne(t),s=Ne(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Se(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new \$a(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new \$a(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Se(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Se(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=e,a=new \$a(r).identifier,s=[];return n&&s.push(w.ESimulationFlag.SKIP_VALIDATE),i&&s.push(w.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:s})}async waitForTransaction(t,e){const r=Se(t);let n=e?.retries??this.retries,i=e?.lifeCycleRetries??3,a=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],u=e?.successStates??[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1],l={[w.ETransactionStatus.RECEIVED]:kt.txEvictedFromMempool,[w.ETransactionStatus.PRE_CONFIRMED]:kt.consensusFailed,[w.ETransactionStatus.CANDIDATE]:kt.txFailsBlockBuildingValidation},d=[];let h;for(;!a;){await Da(o);try{h=await this.getTransactionStatus(r),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=h,s=!0,n}(u.includes(t)||u.includes(e))&&(a=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof gn&&t.isType("TXN_HASH_NOT_FOUND")){Ct.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1,await Da(o)}return f}async fastWaitForTransaction(t,e,r,n){const i=BigInt(r);let a=n?.retries??50;const s=n?.retryInterval??500,o=[w.ETransactionExecutionStatus.REVERTED],c=[w.ETransactionFinalityStatus.ACCEPTED_ON_L2,w.ETransactionFinalityStatus.ACCEPTED_ON_L1,w.ETransactionFinalityStatus.PRE_CONFIRMED];let u;const l=(new Date).getTime();for(;a>0;){await Da(s),u=await this.getTransactionStatus(t),Ct.info(\`\${a} \${JSON.stringify(u)} \${((new Date).getTime()-l)/1e3}s.\`);const r=u.execution_status??"",n=u.finality_status;if(o.includes(r)){const t=new Error(\`\${r}: \${n}\`);throw t.response=u,t}if(c.includes(n)){let t=i;for(;t===i&&a>0;){if(t=BigInt(await this.getNonceForAddress(e,Gt.PRE_CONFIRMED)),Ct.info(\`\${a} Checking new nonce \${t} \${((new Date).getTime()-l)/1e3}s.\`),t!==i)return!0;await Da(s),a-=1}return!1}a-=1}return!1}getStorageAt(t,e,r=this.blockIdentifier){const n=Se(t),i=ke(e),a=new \$a(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Se(t),n=new \$a(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const n=new \$a(e).identifier,i={simulation_flags:r?[w.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:n,...i})}async invoke(t,e){const r=this.buildTransaction({type:m.ETransactionType.INVOKE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(t,e){const r=this.buildTransaction({type:m.ETransactionType.DECLARE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(t,e){const r=this.buildTransaction({type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(t,e=this.blockIdentifier){const r=new \$a(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Ze(t.entrypoint),calldata:ri.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Aa(r),to_address:Se(n),entry_point_selector:Xe(i),payload:Ue(a)},o=new \$a(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=Wa(e);le(Ia(t),kt.legacyTxRPC08Message),le("transaction"!==e||Vt(t.resourceBounds),kt.SWOldV3);const n={signature:ia(t.signature),nonce:Se(t.nonce),resource_bounds:ya(t.resourceBounds),tip:Se(t.tip),paymaster_data:t.paymasterData.map(t=>Se(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Se(t)),version:da(r.v3,t.version)};if(t.type===m.ETransactionType.INVOKE)return{type:w.ETransactionType.INVOKE,sender_address:t.contractAddress,calldata:ri.toHex(t.calldata),...n};if(t.type===m.ETransactionType.DECLARE)return le(ma(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:ta(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...n};if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...r}=n;return{type:t.type,constructor_calldata:ri.toHex(t.constructorCalldata||[]),class_hash:Se(t.classHash),contract_address_salt:Se(t.addressSalt||0),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}},es=class{listeners={};on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}off(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(t=>t!==e))}emit(t,e){this.listeners[t]&&this.listeners[t].forEach(t=>t(e))}clear(){this.listeners={}}},rs="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==r.g&&r.g.WebSocket||class{constructor(){throw new yn("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},ns=class{channel;method;params;id;events=new es;buffer=[];maxBufferSize;handler=null;_isClosed=!1;constructor(t){this.channel=t.channel,this.method=t.method,this.params=t.params??{},this.id=t.id,this.maxBufferSize=t.maxBufferSize}get isClosed(){return this._isClosed}_handleEvent(t){if(this.handler)this.handler(t);else{if(this.buffer.length>=this.maxBufferSize){const t=this.buffer.shift();Ct.warn(\`Subscription \${this.id}: Buffer full. Dropping oldest event:\`,t)}this.buffer.push(t)}}on(t){if(this.handler)throw new Error("A handler is already attached to this subscription.");for(this.handler=t;this.buffer.length>0;){const t=this.buffer.shift();t&&this.handler(t)}}async unsubscribe(){if(this._isClosed)return!0;const t=await this.channel.unsubscribe(this.id);return t&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),t}},is=class{nodeUrl;websocket;WsImplementation;activeSubscriptions=new Map;maxBufferSize;autoReconnect;reconnectOptions;requestTimeout;isReconnecting=!1;reconnectAttempts=0;userInitiatedClose=!1;reconnectTimeoutId=null;requestQueue=[];events=new es;openListener=t=>this.events.emit("open",t);closeListener=this.onCloseProxy.bind(this);messageListener=this.onMessageProxy.bind(this);errorListener=t=>this.events.emit("error",t);sendId=0;constructor(t){this.nodeUrl=t.nodeUrl,this.maxBufferSize=t.maxBufferSize??1e3,this.autoReconnect=t.autoReconnect??!0,this.reconnectOptions={retries:t.reconnectOptions?.retries??5,delay:t.reconnectOptions?.delay??2e3},this.requestTimeout=t.requestTimeout??6e4,this.WsImplementation=t.websocket||xt.get("websocket")||rs,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}idResolver(t){return t||this.sendId++}send(t,e,r){if(!this.isConnected())throw new bn("WebSocketChannel.send() failed due to socket being disconnected");const n=this.idResolver(r),i={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.websocket.send(ce(i)),n}sendReceive(t,e){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return Ct.info(\`WebSocket: Connection unavailable, queueing request: \${t}\`),new Promise((r,n)=>{this.requestQueue.push({method:t,params:e,resolve:r,reject:n})});const r=this.send(t,e);return new Promise((e,n)=>{let i;if(!this.websocket||this.websocket.readyState!==rs.OPEN)return void n(new bn("WebSocket not available or not connected."));const a=o=>{if(!be(o.data))return void Ct.warn("WebSocket received non-string message data:",o.data);const c=JSON.parse(o.data);c.id===r&&(clearTimeout(i),this.websocket.removeEventListener("message",a),this.websocket.removeEventListener("error",s),"result"in c?e(c.result):n(new Error(\`Error on \${t} (id: \${r}): \${JSON.stringify(c.error)}\`)))},s=e=>{clearTimeout(i),this.websocket.removeEventListener("message",a),this.websocket.removeEventListener("error",s),n(new Error(\`WebSocket error during \${t} (id: \${r}): \${e.type||"Unknown error"}\`))};this.websocket.addEventListener("message",a),this.websocket.addEventListener("error",s),i=setTimeout(()=>{this.websocket.removeEventListener("message",a),this.websocket.removeEventListener("error",s),n(new mn(\`Request \${t} (id: \${r}) timed out after \${this.requestTimeout}ms\`))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===rs.OPEN}async waitForConnection(){return this.websocket.readyState!==rs.OPEN?new Promise((t,e)=>{this.websocket&&(this.websocket.onopen=()=>t(this.websocket.readyState),this.websocket.onerror=t=>e(t))}):this.websocket.readyState}disconnect(t,e){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(t,e),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==rs.CLOSED?new Promise((t,e)=>{this.websocket&&(this.websocket.onclose=()=>t(this.websocket.readyState),this.websocket.onerror=e)}):this.websocket.readyState}async unsubscribe(t){const e=await this.sendReceive("starknet_unsubscribe",{subscription_id:t});return e&&this.events.emit("unsubscribe",t),e}waitForUnsubscription(t){return new Promise(e=>{const r=n=>{n===t&&(this.events.off("unsubscribe",r),e())};this.events.on("unsubscribe",r)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(Ct.info(\`WebSocket: Processing \${this.requestQueue.length} queued requests.\`);this.requestQueue.length>0;){const{method:t,params:e,resolve:r,reject:n}=this.requestQueue.shift();this.sendReceive(t,e).then(r).catch(n)}}async _restoreSubscriptions(){const t=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();const e=t.map(async t=>{try{const e=await this.sendReceive(t.method,t.params);t.id=e,this.activeSubscriptions.set(e,t),Ct.info(\`Subscription \${t.method} restored with new ID: \${e}\`)}catch(e){Ct.error(\`Failed to restore subscription \${t.method}:\`,e)}});await Promise.all(e)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;const t=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries)return Ct.error("WebSocket: Maximum reconnection retries reached. Giving up."),void(this.isReconnecting=!1);this.reconnectAttempts+=1,Ct.info(\`WebSocket: Connection lost. Attempting to reconnect... (\${this.reconnectAttempts}/\${this.reconnectOptions.retries})\`),this.reconnect(),this.websocket.onopen=async()=>{Ct.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{const e=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);Ct.info(\`WebSocket: Reconnect attempt failed. Retrying in \${e}ms.\`),this.reconnectTimeoutId=setTimeout(t,e)}};t()}onCloseProxy(t){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",t),this.userInitiatedClose||this._startReconnect()}onMessageProxy(t){let e;try{e=JSON.parse(t.data)}catch(e){return void Ct.error(\`WebSocketChannel: Error parsing incoming message: \${t.data}, Error: \${e}\`)}if(e.method&&we(e.params)&&"subscription_id"in e.params){const{result:t,subscription_id:r}=e.params,n=this.activeSubscriptions.get(r);n?n._handleEvent(t):Ct.warn(\`WebSocketChannel: Received event for untracked subscription ID: \${r}.\`)}Ct.debug("onMessageProxy:",t.data),this.events.emit("message",t)}async subscribeNewHeads(t={}){const e="starknet_subscribeNewHeads",r={block_id:t.blockIdentifier?new \$a(t.blockIdentifier).identifier:void 0},n=await this.sendReceive(e,r),i=new ns({channel:this,method:e,params:r,id:n,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(n,i),i}async subscribeEvents(t={}){const e="starknet_subscribeEvents",r={from_address:void 0!==t.fromAddress?Se(t.fromAddress):void 0,keys:t.keys,block_id:t.blockIdentifier?new \$a(t.blockIdentifier).identifier:void 0,finality_status:t.finalityStatus},n=await this.sendReceive(e,r),i=new ns({channel:this,method:e,params:r,id:n,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(n,i),i}async subscribeTransactionStatus(t){const e="starknet_subscribeTransactionStatus",r={transaction_hash:Se(t.transactionHash),block_id:t.blockIdentifier?new \$a(t.blockIdentifier).identifier:void 0},n=await this.sendReceive(e,r),i=new ns({channel:this,method:e,params:r,id:n,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(n,i),i}async subscribeNewTransactionReceipts(t={}){const e="starknet_subscribeNewTransactionReceipts",r={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},n=await this.sendReceive(e,r),i=new ns({channel:this,method:e,params:r,id:n,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(n,i),i}async subscribeNewTransactions(t={}){const e="starknet_subscribeNewTransactions",r={finality_status:t.finalityStatus,sender_address:t.senderAddress&&Ne(t.senderAddress)},n=await this.sendReceive(e,r),i=new ns({channel:this,method:e,params:r,id:n,maxBufferSize:this.maxBufferSize});return this.activeSubscriptions.set(n,i),i}removeSubscription(t){this.activeSubscriptions.delete(t)}on(t,e){this.events.on(t,e)}off(t,e){this.events.off(t,e)}},as=class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:sa(t,this.resourceBoundsOverhead),overall_fee:ca(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:sa(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:ca(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:be(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}};function ss(t){return"0x3"===t.version&&"tip"in t&&be(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function os(t,e=!0){return t.transactions.filter(ss).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function cs(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function us(t,e){const r=e/100*(t.length-1),n=Math.floor(r),i=Math.ceil(r);if(n===i)return t[n];const a=r-n,s=t[n];return s+(t[i]-s)*BigInt(Math.round(1e3*a))/1000n}function ls(t){le(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,tt.max),r=t.reduce((t,e)=>e>t?e:t,0n),n=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),a=Math.floor(i.length/2);let s;s=i.length%2==0?(i[a-1]+i[a])/2n:i[a];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,r])=>r>t.maxCount||r===t.maxCount&&e<t.modeTip?{maxCount:r,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:r,averageTip:n,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:us(i,90),p95Tip:us(i,95)}}async function ds(t,e){try{const r=await t.getBlockWithTxs(e);return ye(r.block_number)?r.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new yn(\`Failed to determine starting block number: \${t instanceof Error?t.message:"Unknown error"}\`)}}async function hs(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Ct.warn(\`Failed to fetch block \${e}:\`,t),null}}function fs(t,e){const r=Math.max(0,t-e+1),n=t-r+1;return Array.from({length:n},(e,r)=>t-r)}async function ps(t,e=Gt.LATEST,r={}){const{maxBlocks:n=3,minTxsNecessary:i=10}=r;return le(Number.isInteger(n),"maxBlocks parameter must be an integer"),le(n>=1,"maxBlocks parameter must be greater than or equal to 1"),le(n<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),le(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),le(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await ds(t,e),s=fs(r,n),o=await async function(t,e){const r=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Ct.warn(\`Failed to fetch block \${e} in parallel:\`,t),null}});return Promise.all(r)}(t,s),c=o.filter(t=>null!==t).flatMap(t=>os(t,a)),u=o.filter(t=>null!==t).length;return c.length<i?(Ct.error(\`Insufficient transaction data: found \${c.length} V3 transactions with tips in \${u} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),cs(u,c)):{...ls(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new yn(\`Failed to analyze tip statistics (parallel): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r):async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await ds(t,e),s=fs(r,n),o=[];let c=0;for(const e of s){const r=await hs(t,e);if(r){c+=1;const t=os(r,a);if(o.push(...t),o.length>=i)break}}return o.length<i?(Ct.error(\`Insufficient transaction data: found \${o.length} V3 transactions with tips in \${c} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),cs(c,o)):{...ls(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new yn(\`Failed to analyze tip statistics (sequential): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r)}var ys=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[r,n]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:r,writable:!1,enumerable:!1,configurable:!1},value:{value:n,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>r in t?t[r](n):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===r,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===r,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===r,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===zt.SUCCEEDED}static isReverted(t){return t.execution_status===zt.REVERTED}},gs={[zt.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[zt.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function ms(t){const e=gs[t.execution_status];let r;if(e){const{statusReceipt:n,getBaseData:i,getValue:a}=e,s=a(t);r={...i(t),statusReceipt:n,value:s,match:t=>n in t?t[n](s):t._(),isSuccess:()=>"SUCCEEDED"===n,isReverted:()=>"REVERTED"===n,isError:()=>!1}}else{const t=new Error("Unknown response type");r={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(r,ys.prototype),Object.defineProperty(r,"constructor",{value:ys,writable:!1,enumerable:!1,configurable:!1}),r}var bs={};d(bs,{encodeData:()=>Ds,encodeType:()=>Rs,encodeValue:()=>Ns,getDependencies:()=>Cs,getMessageHash:()=>Ls,getStructHash:()=>Ps,getTypeHash:()=>Os,isMerkleTreeType:()=>Bs,prepareSelector:()=>xs,validateTypedData:()=>ks,verifyMessage:()=>Us});var _s={};d(_s,{MerkleTree:()=>ws,proofMerklePath:()=>vs});var ws=class t{leaves;branches=[];root;hashMethod;constructor(t,e=Di){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const r=[];for(let n=0;n<e.length;n+=2)n+1===e.length?r.push(t.hash(e[n],"0x0",this.hashMethod)):r.push(t.hash(e[n],e[n+1],this.hashMethod));return this.build(r)}static hash(t,e,r=Di){const[n,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return r(n,i)}getProof(e,r=this.leaves,n=[]){const i=r.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===r.length)return n;const a=i%2==0,s=(a?r[i+1]:r[i-1])??"0x0",o=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(t=>t.length===r.length),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(a?e:s,a?s:e,this.hashMethod),u,o)}};function vs(t,e,r,n=Di){if(0===r.length)return t===e;const[i,...a]=r;return vs(t,ws.hash(e,i,n),a,n)}var Es={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},As={[m.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:Fi,hashMerkleMethod:Pi,escapeTypeString:t=>\`"\${t}"\`,presetTypes:Es},[m.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:Ui,hashMerkleMethod:Di,escapeTypeString:t=>t,presetTypes:{}}};function Ts(t,e,{min:r,max:n}){const i=BigInt(t);le(i>=r&&i<=n,\`\${i} (\${e}) is out of bounds [\${r}, \${n}]\`)}function Ss({types:t,domain:e}){return As[m.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===m.TypedDataRevision.ACTIVE?m.TypedDataRevision.ACTIVE:As[m.TypedDataRevision.LEGACY].domain in t&&(e.revision??m.TypedDataRevision.LEGACY)===m.TypedDataRevision.LEGACY?m.TypedDataRevision.LEGACY:void 0}function Is(t){try{return Se(t)}catch(e){if(be(t))return Se(ur(t));throw new Error(\`Invalid BigNumberish: \${t}\`)}}function ks(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Ss(e))}function xs(t){return ve(t)?t:Ze(t)}function Bs(t){return"merkletree"===t.type}function Cs(t,e,r=[],n="",i=m.TypedDataRevision.LEGACY){let a=[e];return"*"===e[e.length-1]?a=[e.slice(0,-1)]:i===m.TypedDataRevision.ACTIVE&&("enum"===e?a=[n]:e.match(/^\\(.*\\)\$/)&&(a=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),a.filter(e=>!r.includes(e)&&t[e]).reduce((e,r)=>[...e,...[r,...t[r].reduce((e,r)=>[...e,...Cs(t,r.type,e,r.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function Rs(t,e,r=m.TypedDataRevision.LEGACY){const n=r===m.TypedDataRevision.ACTIVE?{...t,...As[r].presetTypes}:t,[i,...a]=Cs(n,e,void 0,void 0,r),s=i?[i,...a.sort()]:[],o=As[r].escapeTypeString;return s.map(t=>{const e=n[t].map(t=>{const e="enum"===t.type&&r===m.TypedDataRevision.ACTIVE?t.contains:t.type,n=e.match(/^\\(.*\\)\$/)?\`(\${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})\`:o(e);return\`\${o(t.name)}:\${n}\`});return\`\${o(t)}(\${e})\`}).join("")}function Os(t,e,r=m.TypedDataRevision.LEGACY){return Ze(Rs(t,e,r))}function Ns(t,e,r,n={},i=m.TypedDataRevision.LEGACY){if(t[e])return[e,Ps(t,e,r,i)];if(As[i].presetTypes[e])return[e,Ps(As[i].presetTypes,e,r,i)];if(e.endsWith("*")){const n=r.map(r=>Ns(t,e.slice(0,-1),r,void 0,i)[1]);return[e,As[i].hashMethod(n)]}switch(e){case"enum":if(i===m.TypedDataRevision.ACTIVE){const[a,s]=Object.entries(r)[0],o=t[n.parent].find(t=>t.name===n.key),c=t[o.contains],u=c.find(t=>t.name===a),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map((e,r)=>{if(!e)return e;const n=s[r];return Ns(t,e,n,void 0,i)[1]});return[e,As[i].hashMethod([l,...d])]}return[e,Is(r)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const r=t[e.parent].find(t=>t.name===e.key);if(!Bs(r))throw new Error(\`\${e.key} is not a merkle tree\`);if(r.contains.endsWith("*"))throw new Error(\`Merkle tree contain property must not be an array but was given \${e.key}\`);return r.contains}return"raw"}(t,n),a=r.map(r=>Ns(t,e,r,void 0,i)[1]),{root:s}=new ws(a,As[i].hashMerkleMethod);return["felt",s]}case"selector":return["felt",xs(r)];case"string":if(i===m.TypedDataRevision.ACTIVE){const t=fr(r),n=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,As[i].hashMethod(n)]}return[e,Is(r)];case"i128":if(i===m.TypedDataRevision.ACTIVE){const t=BigInt(r);return Ts(t,e,dt),[e,Is(t<0n?Z+t:t)]}return[e,Is(r)];case"timestamp":case"u128":return i===m.TypedDataRevision.ACTIVE&&Ts(r,e,st),[e,Is(r)];case"felt":case"shortstring":return i===m.TypedDataRevision.ACTIVE&&Ts(Is(r),e,tt),[e,Is(r)];case"ClassHash":case"ContractAddress":return i===m.TypedDataRevision.ACTIVE&&Ts(r,e,tt),[e,Is(r)];case"bool":return i===m.TypedDataRevision.ACTIVE&&le(ge(r),\`Type mismatch for \${e} \${r}\`),[e,Is(r)];default:if(i===m.TypedDataRevision.ACTIVE)throw new Error(\`Unsupported type: \${e}\`);return[e,Is(r)]}}function Ds(t,e,r,n=m.TypedDataRevision.LEGACY){const i=t[e]??As[n].presetTypes[e],[a,s]=i.reduce(([i,a],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw new Error(\`Cannot encode data: missing data for '\${s.name}'\`);const o=r[s.name],c={parent:e,key:s.name},[u,l]=Ns(t,s.type,o,c,n);return[[...i,u],[...a,l]]},[["felt"],[Os(t,e,n)]]);return[a,s]}function Ps(t,e,r,n=m.TypedDataRevision.LEGACY){return As[n].hashMethod(Ds(t,e,r,n)[1])}function Ls(t,e){if(!ks(t))throw new Error("Typed data does not match JSON schema");const r=Ss(t),{domain:n,hashMethod:i}=As[r];return i([ur("StarkNet Message"),Ps(t.types,n,t.domain,r),e,Ps(t.types,t.primaryType,t.message,r)])}function Us(t,e,r,n){const i=ks(t);if(!\$e(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===n)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!\$e(n))throw new Error("accountAddress shall be a BigNumberish");const a=i?Ls(t,n):Se(t),s=Array.isArray(e)?new Ei.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Se(r);return Ei.verify(s,a,o)}async function Fs(t,e,r,n,i,a){const s=ks(e);if(!\$e(e)&&!s)throw new Error("message has a wrong format.");if(!\$e(n))throw new Error("accountAddress shall be a BigNumberish");const o=s?Ls(e,n):Se(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:Se(n),entrypoint:e,calldata:ri.compile({hash:Ae(o).toString(),signature:ra(r)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some(e=>t.message.includes(e)))return!1;l=t}throw Error(\`Signature verification Error: \${l}\`)}async function Vs(t,e=t.blockIdentifier){const r=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(r.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(r.l1_gas_price.price_in_fri),l2GasPrice:BigInt(r.l2_gas_price.price_in_fri)}}var Hs=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new as;else{const e=t;if(e&&e.specVersion)if(ka("0.8",e.specVersion))this.channel=new Rt.RpcChannel({...e,waitMode:!1});else{if(!ka("0.9",e.specVersion))throw new Error(\`unsupported channel for spec version: \${e.specVersion}\`);this.channel=new Ja.RpcChannel({...e,waitMode:!1})}else if(ka("0.8",xt.get("rpcVersion")))this.channel=new Rt.RpcChannel({...e,waitMode:!1});else{if(!ka("0.9",xt.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Ja.RpcChannel({...e,waitMode:!1})}this.responseParser=new as(e?.resourceBoundsOverhead)}}static async create(t){const e=new Rt.RpcChannel({...t}),r=await e.getSpecVersion();if(xa(r)||Ct.warn(\`Using incompatible node spec version \${r}\`),ka("0.8",r))return new this({...t,specVersion:At.v0_8_1});if(ka("0.9",r))return new this({...t,specVersion:At.v0_9_0});throw new yn(\`Provided RPC node specification version \${r} is not compatible with the SDK. SDK supported RPC versions \${Object.keys(At).toString()}\`)}fetch(t,e,r=0){return this.channel.fetch(t,e,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=Gt.LATEST,e=5e3){if(t===Gt.LATEST)return;if("pending"===t)return;const r=await this.getBlockNumber(),n=t===Gt.PRE_CONFIRMED?r+1:Number(Se(t));if(n<=r)return;const{retries:i}=this.channel;let a=i,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await Da(e),a-=1,a<=0)throw new Error(\`waitForBlock() timed-out after \${i} tries.\`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof Ja.RpcChannel)return Vs(this.channel,t);throw new yn("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);le("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:r,contract_address:n,entry_point_selector:i,nonce:a}=e;return Je([r[0],n,a,i,r.length-1,...r.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return ms(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return ms(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,r,n){if(this.channel instanceof Ja.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,r,n);throw new Error("Unsupported channel type")}async getStorageAt(t,e,r){return this.channel.getStorageAt(t,e,r)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let i;if(t)i=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,r)}return ma(i)?n?{cairo:"1",compiler:Jr(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeclareEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeployAccountEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:m.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Rt.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof Ja.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,r,n,i){return Fs(this,t,e,r,n,i)}async isClassDeclared(t,e){let r;if(!t.classHash&&"contract"in t)r=ba(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");r=t.classHash}try{return await this.getClass(r,e)instanceof Object}catch(t){if(t instanceof yn)return!1;throw t}}async prepareInvocations(t){const e=[];for(const r of t)r.type===m.ETransactionType.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||e.unshift(r):e.push(r);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,r,n){return this.channel.getStorageProof(t,e,r,n)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return ps(this,t,e)}},Ms=r(6993),\$s={};d(\$s,{StarknetIdContract:()=>Js,StarknetIdIdentityContract:()=>to,StarknetIdMulticallContract:()=>ro,StarknetIdPfpContract:()=>so,StarknetIdPopContract:()=>co,StarknetIdVerifierContract:()=>io,dynamicCallData:()=>fo,dynamicFelt:()=>ho,execution:()=>lo,getStarknetIdContract:()=>Qs,getStarknetIdIdentityContract:()=>eo,getStarknetIdMulticallContract:()=>no,getStarknetIdPfpContract:()=>oo,getStarknetIdPopContract:()=>uo,getStarknetIdVerifierContract:()=>ao,isStarkDomain:()=>po,useDecoded:()=>Zs,useEncoded:()=>Xs});var js="abcdefghijklmnopqrstuvwxyz0123456789-",qs=BigInt(38),zs="",Gs=BigInt(37),Ys=BigInt(2),Ks=BigInt(3);function Ws(t){let e=0;for(;t.endsWith(zs[1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function Zs(t){let e="";return t.forEach(t=>{for(;t!==G;){const r=t%qs;if(t/=qs,r===BigInt(37)){const r=t/Ks;if(r===G){const n=t%Ks;t=r,e+=n===G?js[0]:zs[Number(n)-1]}else e+=zs[Number(t%Ys)],t/=Ys}else e+=js[Number(r)]}const[r,n]=Ws(e);n&&(e=r+(n%2==0?zs[1].repeat(n/2-1)+zs[0]+js[1]:zs[1].repeat((n-1)/2+1))),e+="."}),e?e.concat("stark"):e}function Xs(t){let e=BigInt(0),r=BigInt(1);if(t.endsWith(zs[0]+js[1])){const[e,r]=Ws(t.substring(0,t.length-2));t=e+zs[1].repeat(2*(r+1))}else{const[e,r]=Ws(t);r&&(t=e+zs[1].repeat(1+2*(r-1)))}for(let n=0;n<t.length;n+=1){const i=t[n],a=js.indexOf(i),s=BigInt(js.indexOf(i));if(-1!==a)n===t.length-1&&t[n]===js[0]?(e+=r*Gs,r*=qs,r*=qs):(e+=r*s,r*=qs);else if(-1!==zs.indexOf(i)){e+=r*Gs,r*=qs;const a=(n===t.length-1?1:0)+zs.indexOf(i);e+=r*BigInt(a),r*=Ys}}return e}var Js={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Qs(t){switch(t){case vt.SN_MAIN:return Js.MAINNET;case vt.SN_SEPOLIA:return Js.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var to={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function eo(t){switch(t){case vt.SN_MAIN:return to.MAINNET;case vt.SN_SEPOLIA:return to.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ro="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function no(t){switch(t){case vt.SN_MAIN:case vt.SN_SEPOLIA:return ro;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var io={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function ao(t){switch(t){case vt.SN_MAIN:return io.MAINNET;case vt.SN_SEPOLIA:return io.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var so={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function oo(t){switch(t){case vt.SN_MAIN:return so.MAINNET;case vt.SN_SEPOLIA:return so.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var co={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function uo(t){switch(t){case vt.SN_MAIN:return co.MAINNET;case vt.SN_SEPOLIA:return co.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function lo(t,e=void 0,r=void 0){return new nn({Static:t,IfEqual:e?en(e[0],e[1],e[2]):void 0,IfNotEqual:r?en(r[0],r[1],r[2]):void 0})}function ho(t,e=void 0){return new nn({Hardcoded:t,Reference:e?en(e[0],e[1]):void 0})}function fo(t,e=void 0,r=void 0){return new nn({Hardcoded:t,Reference:e?en(e[0],e[1]):void 0,ArrayReference:r?en(r[0],r[1]):void 0})}function po(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\\.)*[a-z0-9-]{1,48}\\.stark\$/.test(t)}var yo=class t{async getStarkName(e,r){return t.getStarkName(this,e,r)}async getAddressFromStarkName(e,r){return t.getAddressFromStarkName(this,e,r)}async getStarkProfile(e,r,n,i,a,s,o){return t.getStarkProfile(this,e,r,n,i,a,s,o)}static async getStarkName(t,e,r){const n=await t.getChainId(),i=r??Qs(n);try{const r=Zs((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:ri.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!r)throw Error("Starkname not found");return r}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,r){const n=e.endsWith(".stark")?e:\`\${e}.stark\`;if(!po(n))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),a=r??Qs(i);try{const e=n.replace(".stark","").split(".").map(t=>Xs(t).toString(10));return(await t.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:ri.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,r,n,i,a,s,o){const c=await t.getChainId(),u=r??Qs(c),l=n??eo(c),d=i??ao(c),h=a??oo(c),f=s??uo(c),p=o??no(c);try{const r=[{execution:lo({}),to:fo(u),selector:fo(Ze("address_to_domain")),calldata:[fo(e),fo("0")]},{execution:lo({}),to:ho(u),selector:ho(Ze("domain_to_id")),calldata:[fo(void 0,void 0,[0,0])]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("twitter")),fo(d),fo("0")]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("github")),fo(d),fo("0")]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("discord")),fo(d),fo("0")]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("proof_of_personhood")),fo(f),fo("0")]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("nft_pp_contract")),fo(h),fo("0")]},{execution:lo({}),to:ho(l),selector:ho(Ze("get_extended_verifier_data")),calldata:[fo(void 0,[1,0]),fo(ur("nft_pp_id")),fo("2"),fo(h),fo("0")]},{execution:lo(void 0,void 0,[6,0,0]),to:ho(void 0,[6,0]),selector:ho(Ze("tokenURI")),calldata:[fo(void 0,[7,1]),fo(void 0,[7,2])]}],n=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:ri.compile({calls:r})});if(Array.isArray(n)){const t=parseInt(n[0],16),e=[];let r=1;for(let i=0;i<t&&r<n.length;i+=1){const t=parseInt(n[r],16);r+=1;const i=n.slice(r,r+t);e.push(i),r+=t}const i=Zs(e[0].slice(1).map(t=>BigInt(t))),a="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,s="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:a,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===n[0]?e[8].slice(1).map(t=>lr(t)).join(""):void 0)||\`https://starknet.id/api/identicons/\${BigInt(e[1][0]).toString()}\`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function go(t){return Xs(t.endsWith(".brother")?t.replace(".brother",""):t)}function mo(t){const e=Zs([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?\`\${e}.brother\`:e}function bo(t){return vt.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var _o=class t{async getBrotherName(e,r){return t.getBrotherName(this,e,r)}async getAddressFromBrotherName(e,r){return t.getAddressFromBrotherName(this,e,r)}async getBrotherProfile(e,r){return t.getBrotherProfile(this,e,r)}static async getBrotherName(t,e,r){await t.getChainId();const n=r??bo();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:ri.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother name not found");return mo(BigInt(r[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,r){const n=e.endsWith(".brother")?e:\`\${e}.brother\`;if(!n.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=r??bo();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:ri.compile({domain:go(n)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,r){await t.getChainId();const n=r??bo();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:ri.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother profile not found");const i=mo(BigInt(r[0])).replace(".brother",""),a=await t.callContract({contractAddress:n,entrypoint:"get_details_by_domain",calldata:ri.compile({domain:go(i)})});return{name:i,resolver:a[1],tokenId:a[2],expiryDate:parseInt(a[3],16),lastTransferTime:parseInt(a[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},wo=class extends((0,Ms.Mixin)(Hs,yo,_o)){},vo=class{},Eo=new Hs({default:!0}),Ao=class{},To=class{pk;constructor(t=Ei.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?O(t):Se(t)}async getPubKey(){return Ei.getStarkKey(this.pk)}async signMessage(t,e){const r=Ls(t,e);return this.signRaw(r)}async signTransaction(t,e){const r=Ka(t,e.cairoVersion);let n;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;n=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:la(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(t.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeployAccountTransaction(t){const e=ri.compile(t.constructorCalldata);let r;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const n=t;r=Oi({...n,salt:n.addressSalt,compiledConstructorCalldata:e,version:n.version,nonceDataAvailabilityMode:la(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(n.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const r=t;e=Ri({...r,version:r.version,nonceDataAvailabilityMode:la(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(r.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return Ei.sign(t,this.pk)}},So=r(8510),Io={};function ko(t){return new Sr(t).toBigInt()}function xo(t){return Sr.is(t)}function Bo(t){return new Sr(t).toUint256HexString()}d(Io,{bnToUint256:()=>Bo,isUint256:()=>xo,uint256ToBN:()=>ko});var Co=class{pk;constructor(t=Ea()){this.pk=t instanceof Uint8Array?O(t).padStart(64,"0"):N(Se(t)).padStart(64,"0")}async getPubKey(){return D(O(So.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(t,e){const r=Ls(t,e),n=So.secp256k1.sign(N(F(r)),this.pk);return this.formatEthSignature(n)}async signTransaction(t,e){const r=Ka(t,e.cairoVersion);let n;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;n=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:la(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(t.feeDataAvailabilityMode)})}const i=So.secp256k1.sign(N(F(n)),this.pk);return this.formatEthSignature(i)}async signDeployAccountTransaction(t){const e=ri.compile(t.constructorCalldata);let r;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const n=t;r=Oi({...n,salt:n.addressSalt,compiledConstructorCalldata:e,version:n.version,nonceDataAvailabilityMode:la(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(n.feeDataAvailabilityMode)})}const n=So.secp256k1.sign(N(F(r)),this.pk);return this.formatEthSignature(n)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const r=t;e=Ri({...r,version:r.version,nonceDataAvailabilityMode:la(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(r.feeDataAvailabilityMode)})}const r=So.secp256k1.sign(N(F(e)),this.pk);return this.formatEthSignature(r)}formatEthSignature(t){const e=Bo(t.r),r=Bo(t.s);return[Se(e.low),Se(e.high),Se(r.low),Se(r.high),Se(t.recovery)]}},Ro=class{transporter;_transporter;accountID;eip2645applicationName;pathBuffer;appVersion;pubKey;fullPubKey;constructor(t,e,r="LedgerW",n=Oo){le(e>=0,"Ledger account ID shall not be a negative number."),le(e<=K,"Ledger account ID shall be < 2**31."),le(!!r,"Ledger application name shall not be empty."),this.transporter=t,this._transporter=this.transporter,this.accountID=e,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=r,this.appVersion="",this.pathBuffer=n(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){const t=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion=\`\${t[0]}.\${t[1]}.\${t[2]}\`}return this.appVersion}async signMessage(t,e){const r=Ls(t,e);return this.signRaw(r)}async signTransaction(t,e){const r=Ka(t,e.cairoVersion);let n;if(!Object.values(m.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;n=Ci({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:la(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(t.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeployAccountTransaction(t){const e=ri.compile(t.constructorCalldata);let r;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const n=t;r=Oi({...n,salt:n.addressSalt,compiledConstructorCalldata:e,version:n.version,nonceDataAvailabilityMode:la(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(n.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeclareTransaction(t){let e;if(!Object.values(m.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const r=t;e=Ri({...r,version:r.version,nonceDataAvailabilityMode:la(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(r.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){D(O(await this._transporter.send(Number("0x5a"),2,0,0,_n.from(this.pathBuffer))));const e=Ve(Se(BigInt(t)<<4n)),r=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,_n.from(e))),n=BigInt(D(O(r.subarray(1,33)))),i=BigInt(D(O(r.subarray(33,65)))),a=r[65];return new Ei.Signature(n,i).addRecoveryBit(a)}async getPublicKeys(){const t=this.pathBuffer,e=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,_n.from(t)));this.pubKey=D(O(e.subarray(1,33))),this.fullPubKey=D(O(e.subarray(0,65)))}};function Oo(t,e="LedgerW"){return H([new Uint8Array([128,0,10,85]),new Uint8Array([71,65,233,201]),"LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),new Uint8Array([0,0,0,0]),Ve(D(N(Se(t)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var No=r(1484);function Do(t){const e=Se(be(t)?D(t):t);return D(N(e).padStart(64,"0"))}function Po(t){const e=Do(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}\$/))throw new Error("Invalid Address Format");return Re(e,G,J-1n,"Starknet Address"),e}function Lo(t){const e=N(Po(t)).toLowerCase().split(""),r=N(Ke(t)),n=(0,No.hexToBytes)(r.padStart(64,"0"));for(let t=0;t<e.length;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return D(e.join(""))}function Uo(t){return Lo(t)===t}var Fo=class extends Ro{constructor(t,e,r="LedgerW",n=Vo){super(t,e,r,n)}async signTransaction(t,e){const r=Ka(t,e.cairoVersion);if(Object.values(m.ETransactionVersion3).includes(e.version)){const n=e,i=Ci({...n,senderAddress:n.walletAddress,compiledCalldata:r,version:n.version,nonceDataAvailabilityMode:la(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(n.feeDataAvailabilityMode)}),a=await this.signTxV3(n,t);return le(Ae(i)===a.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),a.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(t){const e=ri.compile(t.constructorCalldata);let r;if(Object.values(m.ETransactionVersion3).includes(t.version)){const n=t;r=Oi({...n,salt:n.addressSalt,compiledConstructorCalldata:e,version:n.version,nonceDataAvailabilityMode:la(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:la(n.feeDataAvailabilityMode)});const i=await this.signDeployAccountV3(n);return le(Ae(r)===i.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),i.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(t){return Ve(Do(Se(t)))}decodeSignatureLedger(t){const e=BigInt(D(O(t.subarray(0,32)))),r=BigInt(D(O(t.subarray(33,65)))),n=BigInt(D(O(t.subarray(65,97)))),i=t[97];return{hash:e,signature:new Ei.Signature(r,n).addRecoveryBit(i)}}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),r=Ve(Do(Xe(t.entrypoint)));let n=new Uint8Array([]);t.calldata&&(n=H(ri.compile(t.calldata).map(t=>this.convertBnToLedger(t))));const i=H([e,r,n]),a=[];for(let t=0;t<i.length;t+=224)a.push(i.subarray(t,t+224));return a}async signTxV3(t,e){le(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),le(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_n.from(this.pathBuffer));const r=this.convertBnToLedger(t.walletAddress),n=this.convertBnToLedger(t.tip),i=this.convertBnToLedger(t.chainId),a=this.convertBnToLedger(t.nonce),s=this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),o=H([r,n,this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),i,a,s]);await this._transporter.send(Number("0x5a"),3,1,0,_n.from(o));const c=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,2,0,_n.from(c));const u=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_n.from(u));const l=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,4,0,_n.from(l));let d=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);await this._transporter.send(Number("0x5a"),3,5,0,_n.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{await this._transporter.send(Number("0x5a"),3,5,1,_n.from(t))}),d=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(d)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_n.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(t.nonceDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2,t.feeDataAvailabilityMode===m.EDataAvailabilityMode.L1?m.EDAMode.L1:m.EDAMode.L2)),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,_n.from(e));const r=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_n.from(r));const n=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_n.from(n));const i=ri.compile(t.constructorCalldata),a=this.convertBnToLedger(i.length);await this._transporter.send(Number("0x5a"),5,4,0,_n.from(a));const s=H(i.map(t=>this.convertBnToLedger(t))),o=[];for(let t=0;t<s.length;t+=224)o.push(s.subarray(t,t+224));let c=new Uint8Array(0);for(const t of o)c=await this._transporter.send(Number("0x5a"),5,5,0,_n.from(t));return this.decodeSignatureLedger(c)}};function Vo(t,e="LedgerW"){const r=new Uint8Array([mt,0,10,85]),n=new Uint8Array([71|mt,65,233,201]),i="LedgerW"===e?new Uint8Array([43,206,231,219]):Me(e),a=H([new Uint8Array([i[0]|mt]),i.subarray(1)]);return H([r,n,a,new Uint8Array([mt,0,0,0]),Ve(D(N(Se(BigInt(t)|bt)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var Ho=class extends Fo{constructor(t,e,r="LedgerW",n=Vo){super(t,e,r,n)}async signTxV3(t,e){le(t.paymasterData.length<=7,"Paymaster data includes more than 7 items."),le(t.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,_n.from(this.pathBuffer));const r=H([this.convertBnToLedger(t.walletAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(la(t.nonceDataAvailabilityMode),la(t.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,_n.from(r)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,_n.from(e))}const n=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,3,0,_n.from(n));const i=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),3,4,0,_n.from(i));const a=this.convertBnToLedger(e.length);await this._transporter.send(Number("0x5a"),3,5,0,_n.from(a));let s=new Uint8Array(0);for(const t of e){const e=this.encodeCall(t);s=await this._transporter.send(Number("0x5a"),3,6,0,_n.from(e[0])),e.length>1&&e.slice(1).forEach(async t=>{s=await this._transporter.send(Number("0x5a"),3,6,1,_n.from(t))})}return this.decodeSignatureLedger(s)}async signDeployAccountV3(t){await this._transporter.send(Number("0x5a"),5,0,0,_n.from(this.pathBuffer));const e=H([this.convertBnToLedger(t.contractAddress),this.convertBnToLedger(t.chainId),this.convertBnToLedger(t.nonce),this.convertBnToLedger(di(la(t.nonceDataAvailabilityMode),la(t.feeDataAvailabilityMode))),this.convertBnToLedger(t.classHash),this.convertBnToLedger(t.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,_n.from(e)),Vt(t.resourceBounds)){const e=H([this.convertBnToLedger(t.tip),this.convertBnToLedger(hi(t.resourceBounds)),this.convertBnToLedger(fi(t.resourceBounds)),this.convertBnToLedger(pi(t.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,_n.from(e))}const r=H(t.paymasterData.map(t=>this.convertBnToLedger(t)));await this._transporter.send(Number("0x5a"),5,3,0,_n.from(r));const n=ri.compile(t.constructorCalldata),i=this.convertBnToLedger(n.length);await this._transporter.send(Number("0x5a"),5,4,0,_n.from(i));const a=H(n.map(t=>this.convertBnToLedger(t))),s=[];for(let t=0;t<a.length;t+=224)s.push(a.subarray(t,t+224));let o=new Uint8Array(0);for(const t of s)o=await this._transporter.send(Number("0x5a"),5,5,0,_n.from(t));return this.decodeSignatureLedger(o)}encodeCall(t){const e=this.convertBnToLedger(t.contractAddress),r=Ve(Do(Xe(t.entrypoint)));let n=new Uint8Array([]);if(t.calldata){const e=ri.compile(t.calldata);n=H([this.convertBnToLedger(e.length),...e.map(t=>this.convertBnToLedger(t))])}else n=this.convertBnToLedger("0x00");const i=H([e,r,n]),a=[];for(let t=0;t<i.length;t+=224)a.push(i.subarray(t,t+224));return a}},Mo={};function \$o(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function jo(t){const e=t.calldata??[],r=Array.isArray(e)?e:ri.compile(e);return{to:t.contractAddress,selector:Ze(t.entrypoint),calldata:r}}function qo(t,e){const r=jo(t);return"1"===e?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function zo(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Go(t,e,r,n,i){return"1"===i?{types:te,primaryType:"OutsideExecution",domain:zo(t,i),message:{...e,nonce:r,calls_len:n.length,calls:n.map(t=>qo(t,i))}}:{types:ee,primaryType:"OutsideExecution",domain:zo(t,i),message:{Caller:e.caller,Nonce:r,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:n.map(t=>qo(t,i))}}}function Yo(t){const e=t.outsideExecution,r=ra(t.signature);return ri.compile({outside_execution:e,signature:r})}function Ko(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if(t.version===re.V1)e="execute_from_outside";else{if(t.version!==re.V2)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Se(t.signerAddress),entrypoint:e,calldata:Yo(t)}})}d(Mo,{buildExecuteFromOutsideCall:()=>Ko,buildExecuteFromOutsideCallData:()=>Yo,getOutsideCall:()=>jo,getTypedData:()=>Go,toOutsideCallV2:()=>\$o});var Wo={};async function Zo(t,e,r){const n={contractAddress:Se(e),entrypoint:"supports_interface",calldata:[Se(r)]};try{const e=await t.callContract(n);return 0n!==BigInt(e[0])}catch{return!1}}d(Wo,{supportsInterface:()=>Zo});var Xo={};d(Xo,{assertCallsAreStrictlyEqual:()=>Qo,assertPaymasterTransactionSafety:()=>tc,getDefaultPaymasterNodeUrl:()=>Jo});var Jo=(t,e=!1)=>{e||Ct.info("Using default public node url, please provide nodeUrl in provider options!");const r=It[t??wt.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function Qo(t,e){const r="Provided calls are not strictly equal to the returned calls";le(e.length-1===t.length,\`\${r}: Expected \${t.length+1} calls, got \${e.length}\`);for(let n=0;n<t.length;n+=1){const i=t[n],a=\$o(e[n]),s=t=>Ae(t).toString(16).toLowerCase();le(s(i.contractAddress)===s(a.To),\`\${r}: Contract address mismatch at call \${n}. Expected: \${i.contractAddress}, Got: \${a.To}\`),le(Ze(i.entrypoint)===a.Selector,\`\${r}: Entrypoint mismatch at call \${n}. Expected: \${i.entrypoint}, Got: \${a.Selector}\`);const o=ri.toCalldata(i.calldata),c=ri.toCalldata(a.Calldata);le(o.length===c.length,\`\${r}: Calldata length mismatch at call \${n}. Expected length: \${o.length}, Got length: \${c.length}\`);for(let t=0;t<o.length;t+=1)le(BigInt(o[t])===BigInt(c[t]),\`\${r}: Calldata value mismatch at call \${n}, parameter \${t}. Expected: \${o[t]}, Got: \${c[t]}\`)}}var tc=(t,e,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Qo(e,i),((t,e)=>{const r=\$o(t[t.length-1]);le(BigInt(r.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,r.feeMode.gasToken),n&&(le(t.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((t,e)=>{const r=\$o(t[t.length-1]),n=ri.toCalldata(r.Calldata)[1];le(BigInt(n)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},ec=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},rc=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,nc=t=>{return{version:t.version,feeMode:(r=t.fee_mode,"sponsored"===r.mode?{mode:"sponsored"}:{mode:"default",gasToken:r.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,r},ic={"Content-Type":"application/json"},ac=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Jo(void 0),this.headers={...ic,...e.headers},this.baseFetch=e.baseFetch??Ta,void(this.requestId=0);const{nodeUrl:r,headers:n,baseFetch:i}=e||{};r&&Object.values(wt).includes(r)?this.nodeUrl=Jo(r,e?.default):this.nodeUrl=r||Jo(void 0,e?.default),this.baseFetch=i??Ta,this.headers={...ic,...n},this.requestId=0}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ce(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new gn(r,t,e);if(n instanceof yn)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const r=await this.fetch(t,e,this.requestId),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:(n=t.invoke.calls,n.map(t=>({to:t.contractAddress,selector:Ze(t.entrypoint),calldata:ri.toHex(t.calldata)})))}};break;default:r=t}var n;const i={version:e.version,fee_mode:ec(e.feeMode),time_bounds:rc(e.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),s={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:nc(a.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:nc(a.parameters),fee:s};default:return{type:"deploy",deployment:a.deployment,parameters:nc(a.parameters),fee:s}}}async executeTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:ia(t.invoke.signature)}};break;default:r=t}const n={version:e.version,fee_mode:ec(e.feeMode),time_bounds:rc(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},sc=class{},oc=new ac({default:!0}),cc=class{address;entryPoint;constructor(t,e){this.address=t??ft.ADDRESS,this.entryPoint=e??ft.ENTRYPOINT}buildDeployerCall(t,e){const r=[].concat(t).map(t=>{const{classHash:r,salt:n,unique:i=!0,constructorCalldata:a=[],abi:s}=t,o=qa(a,()=>{if(s){const t=new ri(s),e=Object.values(a);return t.validate(Yt.DEPLOY,"constructor",e),t.compile("constructor",e)}return ri.compile(a)}),c=n??ea();return{call:{contractAddress:Se(this.address),entrypoint:this.entryPoint,calldata:[r,c,Fe(i),o.length,...o]},address:Vi(i?Ei.pedersen(e,c):c,r,o,i?this.address:0)}});return{calls:r.map(t=>t.call),addresses:r.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Ce(t.from_address)===Ce(Se(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},uc=class{},lc=new cc(ft.ADDRESS,ft.ENTRYPOINT),dc=new cc(ht.ADDRESS,ht.ENTRYPOINT),hc=class extends wo{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:r,signer:n,cairoVersion:i,transactionVersion:a,paymaster:s,defaultTipType:o}=t;super(e),this.address=r.toLowerCase(),this.signer=be(n)||n instanceof Uint8Array?new To(n):n,i&&(this.cairoVersion=i.toString()),this.transactionVersion=a??xt.get("transactionVersion"),this.paymaster=s?new ac(s):oc,this.deployer=t.deployer??lc,this.defaultTipType=o??xt.get("defaultTipType"),Ct.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new yn("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return Ae(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const r=[{type:m.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(r,e))[0]}async estimateDeclareFee(t,e={}){le(ma(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const r=[{type:m.ETransactionType.DECLARE,payload:ba(t)}];return(await this.estimateFeeBulk(r,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},i={}){const a=ri.compile(r),s=n??Vi(e,t,a,0),o=[{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:a,addressSalt:e,contractAddress:s}}];return(await this.estimateFeeBulk(o,i))[0]}async estimateDeployFee(t,e={}){const{calls:r}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(r,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[oa(e.resourceBounds)];const{nonce:r,blockIdentifier:n,version:i,skipValidate:a}=e,s=await this.resolveDetailsWithTip(e),o=await this.accountInvocationsFactory(t,{...fa(s),versions:[da(ha(this.transactionVersion)||Pt.F3,i)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getEstimateFeeBulk(o,{blockIdentifier:n,skipValidate:a})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:n,skipValidate:i=!0,skipExecute:a,version:s}=e,o=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...fa(o),versions:[this.resolveTransactionVersion(s)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:n,skipValidate:i,skipExecute:a})}async execute(t,e={}){const r=[t].flat(),n=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let a=i;a||(a=(await this.estimateInvokeFee(r,n)).resourceBounds);const s=(await this.accountInvocationsFactory([{type:m.ETransactionType.INVOKE,payload:r}],{...fa(n),resourceBounds:a,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:s.contractAddress,calldata:s.calldata,signature:s.signature},{...fa(n),resourceBounds:s.resourceBounds,nonce:s.nonce,version:s.version})}async fastExecute(t,e={},r={}){le(this.channel instanceof Ja.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),le(this.channel.blockIdentifier===Gt.PRE_CONFIRMED,"Provider needs to be initialized with \`pre_confirmed\` blockIdentifier option.");const n=BigInt(e.nonce??await this.getNonceForAddress(this.address,Gt.PRE_CONFIRMED)),i={...e,nonce:n},a=await this.execute(t,i);return{txResult:a,isReady:await this.fastWaitForTransaction(a.transaction_hash,this.address,n,r)}}async declareIfNot(t,e={}){const r=ba(t);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(t,e)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,e={}){le(ma(t.contract),kt.declareNonSierra);const r=ba(t),n=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let a=i;a||(a=(await this.estimateDeclareFee(t,n)).resourceBounds);const s=(await this.accountInvocationsFactory([{type:m.ETransactionType.DECLARE,payload:r}],{...fa(n),resourceBounds:a,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:s.senderAddress,signature:s.signature,contract:s.contract,compiledClassHash:s.compiledClassHash},{...fa(n),nonce:s.nonce,resourceBounds:s.resourceBounds,version:s.version})}async deploy(t,e={}){const{calls:r,addresses:n}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(r,e),contract_address:n}}async deployContract(t,e={}){const r=await this.deploy(t,e),n=await this.waitForTransaction(r.transaction_hash,e);return this.deployer.parseDeployerEvent(n)}async declareAndDeploy(t,e={}){let r=await this.declareIfNot(t,e);if(""!==r.transaction_hash){const t=await this.waitForTransaction(r.transaction_hash,e);r={...r,...t}}const n=await this.deployContract({...t,classHash:r.class_hash},e);return{declare:{...r},deploy:n}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:r=0,contractAddress:n},i={}){const a=ri.compile(e),s=n??Vi(r,t,a,0),o=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let u=c;u||(u=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:r,contractAddress:s},o)).resourceBounds);const l=(await this.accountInvocationsFactory([{type:m.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:a,addressSalt:r,contractAddress:s}}],{...fa(o),resourceBounds:u,versions:[this.resolveTransactionVersion(i.version)],nonce:G,skipValidate:!1}))[0];return super.deployAccountContract({classHash:l.classHash,addressSalt:l.addressSalt,constructorCalldata:l.constructorCalldata,signature:l.signature},{...fa(o),nonce:l.nonce,resourceBounds:l.resourceBounds,version:l.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Ls(t,this.address)}async getSnip9Version(){return await Zo(this,this.address,gt)?re.V2:await Zo(this,this.address,yt)?re.V1:re.UNSUPPORTED}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Se(t)]},r=await this.callContract(e);return 0n!==BigInt(r[0])}catch(t){throw new Error(\`Failed to check if nonce is valid: \${t}\`)}}async getSnip9Nonce(){const t=ea();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,r,n){if(!ve(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(\`The caller \${t.caller} is not valid.\`);const i=ve(t.caller)?t.caller:pt,a=[e].flat(),s=r??await this.getSnip9Version();if(!s)throw new Error("This account is not handling outside transactions.");const o=n?Se(n):await this.getSnip9Nonce(),c=Go(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},o,a,s),u=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:o,execute_after:t.execute_after,execute_before:t.execute_before,calls:a.map(jo)},signature:u,signerAddress:this.address,version:s}}async executeFromOutside(t,e){const r=Ko(t);return this.execute(r,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return da(this.transactionVersion||Pt.V3,t)}async buildInvocation(t,e){const r=Ka(t,await this.getCairoVersion()),n=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...fa(e),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(t,e){const{classHash:r,contract:n,compiledClassHash:i}=ba(t),a=La(n);le(!pe(i)&&(e.version===Pt.F3||e.version===Pt.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const s=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...fa(e),classHash:r,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:s,contract:a,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},i){const a=ri.compile(r),s=n??Vi(e,t,a,0),o=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...fa(i),classHash:t,contractAddress:s,addressSalt:e,constructorCalldata:a});return{...fa(i),classHash:t,addressSalt:e,constructorCalldata:a,signature:o}}async accountInvocationsFactory(t,e){const{nonce:r,blockIdentifier:n,skipValidate:i=!0}=e,a=await this.getNonceSafe(r),s=await this.getChainId(),o=e.versions.map(t=>da(t)),c="payload"in t[0]?t[0].payload:t[0],u=t[0].type===m.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,r)=>{const c="payload"in t?t.payload:t,l={...fa(e),walletAddress:this.address,nonce:Ae(Number(a)+r),chainId:s,cairoVersion:u,version:o[0],skipValidate:i},d={type:t.type,nonce:Ae(Number(a)+r),blockIdentifier:n,version:o[0]};if(t.type===m.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),l);return{...d,...t,...l}}if(t.type===m.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,l);return{...d,...e,...l,type:m.ETransactionType.INVOKE}}if(t.type===m.ETransactionType.DECLARE){le(ma(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,l);return{...d,...t,...l}}if(t.type===m.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,l);return{...d,...t,...l}}throw Error(\`accountInvocationsFactory: unsupported transaction type: \${t}\`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&await this.getSnip9Version()===re.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");const r={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let n;return n=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(n,r)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const r=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:ia(r)},deployment:t.deployment};break}case"invoke":{const r=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:ia(r)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,r){const n=await this.buildPaymasterTransaction(t,e);tc(n,t,e,r);const i=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(i,n.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},fc=class extends vo{},pc={};function yc(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function gc(t){return t.request({type:"wallet_getPermissions"})}function mc(t,e){return t.request({type:"wallet_watchAsset",params:e})}function bc(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function _c(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function wc(t){return t.request({type:"wallet_requestChainId"})}function vc(t){return t.request({type:"wallet_deploymentData"})}function Ec(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function Ac(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function Tc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function Sc(t){return t.request({type:"wallet_supportedSpecs"})}function Ic(t,e){t.on("accountsChanged",e)}function kc(t,e){t.on("networkChanged",e)}d(pc,{addDeclareTransaction:()=>Ac,addInvokeTransaction:()=>Ec,addStarknetChain:()=>bc,deploymentData:()=>vc,getPermissions:()=>gc,onAccountChange:()=>Ic,onNetworkChanged:()=>kc,requestAccounts:()=>yc,requestChainId:()=>wc,signMessage:()=>Tc,supportedSpecs:()=>Sc,switchStarknetChain:()=>_c,watchAsset:()=>mc});var xc=class t extends hc{walletProvider;constructor(t){super({...t,signer:""}),this.walletProvider=t.walletProvider,this.walletProvider.on("accountsChanged",t=>{t&&(this.address=t[0].toLowerCase())}),this.walletProvider.on("networkChanged",t=>{t&&this.channel.setChainId(t)})}onAccountChange(t){Ic(this.walletProvider,t)}onNetworkChanged(t){kc(this.walletProvider,t)}requestAccounts(t=!1){return yc(this.walletProvider,t)}getPermissions(){return gc(this.walletProvider)}switchStarknetChain(t){return _c(this.walletProvider,t)}watchAsset(t){return mc(this.walletProvider,t)}addStarknetChain(t){return bc(this.walletProvider,t)}execute(t){const e={calls:[].concat(t).map(t=>{const{contractAddress:e,entrypoint:r,calldata:n}=t;return{contract_address:e,entry_point:r,calldata:n}})};return Ec(this.walletProvider,e)}declare(t){const e=ba(t),r=t.contract,n={...r,abi:ce(r.abi)};if(!e.compiledClassHash)throw Error("compiledClassHash is required");const i={compiled_class_hash:e.compiledClassHash,contract_class:n};return Ac(this.walletProvider,i)}async deploy(t){const{calls:e,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(e),contract_address:r}}signMessage(t){return Tc(this.walletProvider,t)}static async connect(e,r,n,i,a=!1){const[s]=await yc(r,a);return new t({provider:e,walletProvider:r,address:s,cairoVersion:n,paymaster:i})}static async connectSilent(e,r,n,i){return t.connect(e,r,n,i,!0)}},Bc={};function Cc(t){return"event"===t.type}function Rc(t){const e=t.filter(t=>Cc(t)&&"struct"===t.kind),r=t.filter(t=>Cc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let n=[],{name:i}=e,a=!1;const s=t=>t.type===i;for(;;){const t=r.find(t=>t.variants.some(s));if(pe(t))break;const e=t.variants.find(s);n.unshift(e.name),"flat"===e.kind&&(a=!0),i=t.name}if(0===n.length)throw new Error("inconsistency in ABI events definition.");a&&(n=[n[n.length-1]]);const o=n.pop();let c={[D(Ei.keccak(x(o)).toString(16))]:e};for(;n.length>0;)c={[D(Ei.keccak(x(n.pop())).toString(16))]:c};return c={...c},Nc(t,c)},{})}function Oc(t){return Zr(t)?Rc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const r=e.name,n={...e};return n.name=r,{...t,[D(Ei.keccak(x(r)).toString(16))]:n}},{})}(t)}function Nc(t,e){const r={...t};return we(t)&&we(e)&&Object.keys(e).forEach(n=>{we(e[n])?n in t?r[n]=Nc(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function Dc(t,e,r,n,i){return t.flat().reduce((t,a)=>{const s=JSON.parse(JSON.stringify(a));let o=e[s.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=s.keys.shift();le(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const u=s.keys[Symbol.iterator](),l=s.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Yn({responseIterator:u,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Yn({responseIterator:l,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),"block_hash"in s&&(c.block_hash=s.block_hash),"block_number"in s&&(c.block_number=s.block_number),"transaction_hash"in s&&(c.transaction_hash=s.transaction_hash),t.push(c),t},[])}function Pc(t,e){return async function(...r){const n={...t.withOptionsProps};return t.withOptionsProps=void 0,t.call(e.name,r,{parseRequest:t.parseRequest,parseResponse:t.parseResponse,...n})}}function Lc(t,e){return"view"===e.stateMutability||"view"===e.state_mutability?Pc(t,e):function(t,e){return async function(...r){const n={...t.withOptionsProps};return t.withOptionsProps=void 0,t.invoke(e.name,r,{parseRequest:t.parseRequest,...n})}}(t,e)}function Uc(t,e){return function(...r){const n={...t.withOptionsProps};return t.withOptionsProps=void 0,t.estimate(e.name,r,n)}}d(Bc,{getAbiEvents:()=>Oc,isAbiEvent:()=>Cc,parseEvents:()=>Dc});var Fc=class t{abi;address;providerOrAccount;classHash;parseRequest;parseResponse;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;withOptionsProps;parsingStrategy;constructor(t){this.parsingStrategy=t.parsingStrategy;const e=Ln(t.abi,t.parsingStrategy);this.abi=e.getLegacyFormat(),this.address=t.address&&t.address.toLowerCase(),this.providerOrAccount=t.providerOrAccount??Eo,this.parseRequest=t.parseRequest??!0,this.parseResponse=t.parseResponse??!0,this.classHash=t.classHash,this.callData=new ri(t.abi,t.parsingStrategy),this.structs=ri.getAbiStruct(t.abi),this.events=Oc(t.abi);const r={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(t=>{if("function"!==t.type)return;const e=t.name;var n,i;this[e]||Object.defineProperty(this,e,{...r,value:Lc(this,t)}),this.functions[e]||Object.defineProperty(this.functions,e,{...r,value:Lc(this,t)}),this.callStatic[e]||Object.defineProperty(this.callStatic,e,{...r,value:Pc(this,t)}),this.populateTransaction[e]||Object.defineProperty(this.populateTransaction,e,{...r,value:(n=this,i=t,function(...t){return n.populate(i.name,t)})}),this.estimateFee[e]||Object.defineProperty(this.estimateFee,e,{...r,value:Uc(this,t)})})}withOptions(t){return this.withOptionsProps=t,this}attach(t,e){if(this.address=t,e){const t=Ln(e,this.parsingStrategy);this.abi=t.getLegacyFormat(),this.callData=new ri(e,this.parsingStrategy),this.structs=ri.getAbiStruct(e),this.events=Oc(e)}}async isDeployed(){try{await this.providerOrAccount.getClassHashAt(this.address)}catch(t){const e=t instanceof Error?t.message:String(t);throw new Error(\`Contract not deployed at address \${this.address}: \${e}\`)}return this}async call(t,e=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:i,blockIdentifier:a}={}){le(null!==this.address,"contract is not connected to an address");const s=qa(e,()=>r?(this.callData.validate(Yt.CALL,t,e),this.callData.compile(t,e)):(Ct.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:t},a).then(e=>n?i?this.callData.format(t,e,i):this.callData.parse(t,e):e)}async invoke(t,e=[],r={}){const{parseRequest:n=!0,signature:i,waitForTransaction:a,...s}=r;le(null!==this.address,"contract is not connected to an address");const o=qa(e,()=>n?(this.callData.validate(Yt.INVOKE,t,e),this.callData.compile(t,e)):(Ct.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),e)),c={contractAddress:this.address,calldata:o,entrypoint:t};if(Qt(this.providerOrAccount)){const t=await this.providerOrAccount.execute(c,{...s});if(a){const e=await this.providerOrAccount.waitForTransaction(t.transaction_hash);if(e.isSuccess())return e;throw new Error("Transaction failed",{cause:e})}return t}if(!s.nonce)throw new Error("Manual nonce is required when invoking a function without an account");return Ct.warn(\`Invoking \${t} without an account.\`),this.providerOrAccount.invokeFunction({...c,signature:i},{...s,nonce:s.nonce})}async estimate(t,e=[],r={}){le(null!==this.address,"contract is not connected to an address"),qa(e,()=>!1)||this.callData.validate(Yt.INVOKE,t,e);const n=this.populate(t,e);if(Qt(this.providerOrAccount))return this.providerOrAccount.estimateInvokeFee(n,r);throw Error("Contract must be connected to the account contract to estimate")}populate(t,e=[]){const r=qa(e,()=>this.callData.compile(t,e));return{contractAddress:this.address,entrypoint:t,calldata:r}}parseEvents(t){let e=[];return t.match({SUCCEEDED:t=>{const r=t.events?.map(e=>({block_hash:t.block_hash,block_number:t.block_number,transaction_hash:t.transaction_hash,...e})).filter(t=>Ce(t.from_address)===Ce(this.address),[])||[];e=Dc(r,this.events,this.structs,ri.getAbiEnum(this.abi),this.callData.parser)},_:()=>{throw Error("This transaction was not successful.")}}),Object.defineProperty(e,"getByPath",{value:t=>{const r=e.find(e=>Object.keys(e).some(e=>e.includes(t))),n=Object.keys(r||{}).find(e=>e.includes(t));return n&&r?r[n]:null},writable:!1,enumerable:!1,configurable:!1}),e}isCairo1(){return pr.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(t){return this}static async factory(e,r={}){const{account:n,parseRequest:i=!0}=e;let a,s,o;if("classHash"in e&&e.classHash&&!("contract"in e)){const t=e;s=t.classHash.toString(),a=t.abi?t.abi:(await n.getClass(s)).abi,o=(await n.deployContract({classHash:s,constructorCalldata:t.constructorCalldata,salt:t.salt,unique:t.unique,abi:i?a:void 0},r)).contract_address}else{const t=e,c=La(t.contract);a=t.abi?t.abi:Ua(c);const{declare:{class_hash:u},deploy:{contract_address:l}}=await n.declareAndDeploy({...t,abi:i?a:void 0},r);s=u.toString(),o=l}return le(Boolean(o),"Deployment of the contract failed"),new t({abi:a,address:o,providerOrAccount:n,classHash:s,parseRequest:e.parseRequest,parseResponse:e.parseResponse,parsingStrategy:e.parsingStrategy})}},Vc=class{functions;callStatic;populateTransaction;estimateFee},Hc=class{};function Mc(t,e="fri"){if("strk"===e){let e="";me(t)?e=t.toString():be(t)&&(e=ve(t)?BigInt(t).toString():t);const[r,n="0"]=e.split(".");return\`\${r}\${n.padEnd(18,"0")}\`.replace(/\\b0+/g,"")}const r=BigInt(t).toString();let n;return n=r.length<=18?\`0.\${r.padStart(18,"0")}\`:\`\${r.slice(0,r.length-18)}.\${r.slice(r.length-18)}\`,n.replace(/(\\.[0-9]*[1-9])0+\$|\\.0*\$/,"\$1")}},3611(t,e){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function n(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){n(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=r,e.number=r,e.abytes=n,e.bytes=n,e.ahash=i,e.aexists=a,e.aoutput=s;const o={number:r,bytes:n,hash:i,exists:a,output:s};e.default=o},1604(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const n=r(3611),i=r(8761);e.Chi=(t,e,r)=>t&e^~t&r,e.Maj=(t,e,r)=>t&e^t&r^e&r;class a extends i.Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,n.aexists)(this);const{view:e,buffer:r,blockLen:a}=this,s=(t=(0,i.toBytes)(t)).length;for(let n=0;n<s;){const o=Math.min(a-this.pos,s-n);if(o===a){const e=(0,i.createView)(t);for(;a<=s-n;n+=a)this.process(e,n);continue}r.set(t.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.aexists)(this),(0,n.aoutput)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(r,0),o=0);for(let t=o;t<a;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,a-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}e.HashMD=a},1832(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=a,e.add=_;const r=BigInt(2**32-1),n=BigInt(32);function i(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function a(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:s,l:o}=i(t[a],e);[r[a],n[a]]=[s,o]}return[r,n]}const s=(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0);e.toBig=s;const o=(t,e,r)=>t>>>r;e.shrSH=o;const c=(t,e,r)=>t<<32-r|e>>>r;e.shrSL=c;const u=(t,e,r)=>t>>>r|e<<32-r;e.rotrSH=u;const l=(t,e,r)=>t<<32-r|e>>>r;e.rotrSL=l;const d=(t,e,r)=>t<<64-r|e>>>r-32;e.rotrBH=d;const h=(t,e,r)=>t>>>r-32|e<<64-r;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const y=(t,e,r)=>t<<r|e>>>32-r;e.rotlSH=y;const g=(t,e,r)=>e<<r|t>>>32-r;e.rotlSL=g;const m=(t,e,r)=>e<<r-32|t>>>64-r;e.rotlBH=m;const b=(t,e,r)=>t<<r-32|e>>>64-r;function _(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);e.add3L=w;const v=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;e.add3H=v;const E=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);e.add4L=E;const A=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);e.add5L=T;const S=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:a,toBig:s,shrSH:o,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:v,add4L:E,add4H:A,add5H:S,add5L:T};e.default=I},367(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},9981(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const n=r(1604),i=r(8761),a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)o[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],r=o[t-2],n=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,a=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;o[t]=a+o[t-7]+n+o[t-16]|0}let{A:r,B:s,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,n.Chi)(l,d,h)+a[t]+o[t]|0,p=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=s,s=r,r=e+p|0}r=r+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,c,u,l,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},1165(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const n=r(3611),i=r(1832),a=r(8761),s=[],o=[],c=[],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=l,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),o.push((t+1)*(t+2)/2%64);let i=u;for(let t=0;t<7;t++)e=(e<<l^(e>>h)*p)%f,e&d&&(i^=l<<(l<<BigInt(t))-l);c.push(i)}const[y,g]=(0,i.split)(c,!0),m=(t,e,r)=>r>32?(0,i.rotlBH)(t,e,r):(0,i.rotlSH)(t,e,r),b=(t,e,r)=>r>32?(0,i.rotlBL)(t,e,r):(0,i.rotlSL)(t,e,r);function _(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,a=r[i],s=r[i+1],o=m(a,s,1)^r[n],c=b(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=o[r],a=m(e,i,n),c=b(e,i,n),u=s[r];e=t[u],i=t[u+1],t[u]=a,t[u+1]=c}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=y[n],t[1]^=g[n]}r.fill(0)}class w extends a.Hash{constructor(t,e,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,a.u32)(this.state)}keccak(){a.isLE||(0,a.byteSwap32)(this.state32),_(this.state32,this.rounds),a.isLE||(0,a.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,n.aexists)(this);const{blockLen:e,state:r}=this,i=(t=(0,a.toBytes)(t)).length;for(let n=0;n<i;){const a=Math.min(e-this.pos,i-n);for(let e=0;e<a;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){(0,n.aexists)(this,!1),(0,n.abytes)(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,n.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,n.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return t||(t=new w(e,r,n,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}e.Keccak=w;const v=(t,e,r)=>(0,a.wrapConstructor)(()=>new w(e,t,r));e.sha3_224=v(6,144,28),e.sha3_256=v(6,136,32),e.sha3_384=v(6,104,48),e.sha3_512=v(6,72,64),e.keccak_224=v(1,144,28),e.keccak_256=v(1,136,32),e.keccak_384=v(1,104,48),e.keccak_512=v(1,72,64);const E=(t,e,r)=>(0,a.wrapXOFConstructorWithOpts)((n={})=>new w(e,t,void 0===n.dkLen?r:n.dkLen,!0));e.shake128=E(31,168,16),e.shake256=E(31,136,32)},8761(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let r=0;r<t.length;r++)e+=a[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=s(t.charCodeAt(i)),a=s(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let a=0;a<t;a++){n(a);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];(0,i.abytes)(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const n=r(367),i=r(3611);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function s(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2506(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rotl=function(t,e){return t<<e|t>>>32-e},e.createCipher=function(t,e){const{allowShortKeys:r,extendNonceFn:i,counterLength:a,counterRight:s,rounds:f}=(0,n.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return(0,n.anumber)(a),(0,n.anumber)(f),(0,n.abool)(s),(0,n.abool)(r),(e,p,y,g,m=0)=>{(0,n.abytes)(e),(0,n.abytes)(p),(0,n.abytes)(y);const b=y.length;if(void 0===g&&(g=new Uint8Array(b)),(0,n.abytes)(g),(0,n.anumber)(m),m<0||m>=d)throw new Error("arx: counter overflow");if(g.length<b)throw new Error(\`arx: output (\${g.length}) is shorter than data (\${b})\`);const _=[];let w,v,E=e.length;if(32===E)_.push(w=(0,n.copyBytes)(e)),v=c;else{if(16!==E||!r)throw new Error(\`arx: invalid 32-byte key, got length=\${E}\`);w=new Uint8Array(32),w.set(e),w.set(e,16),v=o,_.push(w)}u(p)||_.push(p=(0,n.copyBytes)(p));const A=(0,n.u32)(w);if(i){if(24!==p.length)throw new Error("arx: extended nonce must be 24 bytes");i(v,A,(0,n.u32)(p.subarray(0,16)),A),p=p.subarray(16)}const T=16-a;if(T!==p.length)throw new Error(\`arx: nonce must be \${T} or 16 bytes\`);if(12!==T){const t=new Uint8Array(12);t.set(p,s?0:12-p.length),p=t,_.push(p)}const S=(0,n.u32)(p);return function(t,e,r,i,a,s,o,c){const f=a.length,p=new Uint8Array(l),y=(0,n.u32)(p),g=u(a)&&u(s),m=g?(0,n.u32)(a):h,b=g?(0,n.u32)(s):h;for(let n=0;n<f;o++){if(t(e,r,i,y,o,c),o>=d)throw new Error("arx: counter overflow");const u=Math.min(l,f-n);if(g&&u===l){const t=n/4;if(n%4!=0)throw new Error("arx: invalid block position");for(let e,r=0;r<16;r++)e=t+r,b[e]=m[e]^y[r];n+=l;continue}for(let t,e=0;e<u;e++)t=n+e,s[t]=a[t]^p[e];n+=u}}(t,v,A,S,y,g,m,f),(0,n.clean)(..._),g}};const n=r(6527),i=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),a=i("expand 16-byte k"),s=i("expand 32-byte k"),o=(0,n.u32)(a),c=(0,n.u32)(s);function u(t){return t.byteOffset%4==0}const l=64,d=2**32-1,h=new Uint32Array},1210(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poly1305=void 0,e.wrapConstructorWithKey=s;const n=r(6527),i=(t,e)=>255&t[e++]|(255&t[e++])<<8;class a{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,n.toBytes)(t),(0,n.abytes)(t,32);const e=i(t,0),r=i(t,2),a=i(t,4),s=i(t,6),o=i(t,8),c=i(t,10),u=i(t,12),l=i(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|r<<3),this.r[2]=7939&(r>>>10|a<<6),this.r[3]=8191&(a>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|c<<2),this.r[7]=8065&(c>>>11|u<<5),this.r[8]=8191&(u>>>8|l<<8),this.r[9]=l>>>5&127;for(let e=0;e<8;e++)this.pad[e]=i(t,16+2*e)}process(t,e,r=!1){const n=r?0:2048,{h:a,r:s}=this,o=s[0],c=s[1],u=s[2],l=s[3],d=s[4],h=s[5],f=s[6],p=s[7],y=s[8],g=s[9],m=i(t,e+0),b=i(t,e+2),_=i(t,e+4),w=i(t,e+6),v=i(t,e+8),E=i(t,e+10),A=i(t,e+12),T=i(t,e+14);let S=a[0]+(8191&m),I=a[1]+(8191&(m>>>13|b<<3)),k=a[2]+(8191&(b>>>10|_<<6)),x=a[3]+(8191&(_>>>7|w<<9)),B=a[4]+(8191&(w>>>4|v<<12)),C=a[5]+(v>>>1&8191),R=a[6]+(8191&(v>>>14|E<<2)),O=a[7]+(8191&(E>>>11|A<<5)),N=a[8]+(8191&(A>>>8|T<<8)),D=a[9]+(T>>>5|n),P=0,L=P+S*o+I*(5*g)+k*(5*y)+x*(5*p)+B*(5*f);P=L>>>13,L&=8191,L+=C*(5*h)+R*(5*d)+O*(5*l)+N*(5*u)+D*(5*c),P+=L>>>13,L&=8191;let U=P+S*c+I*o+k*(5*g)+x*(5*y)+B*(5*p);P=U>>>13,U&=8191,U+=C*(5*f)+R*(5*h)+O*(5*d)+N*(5*l)+D*(5*u),P+=U>>>13,U&=8191;let F=P+S*u+I*c+k*o+x*(5*g)+B*(5*y);P=F>>>13,F&=8191,F+=C*(5*p)+R*(5*f)+O*(5*h)+N*(5*d)+D*(5*l),P+=F>>>13,F&=8191;let V=P+S*l+I*u+k*c+x*o+B*(5*g);P=V>>>13,V&=8191,V+=C*(5*y)+R*(5*p)+O*(5*f)+N*(5*h)+D*(5*d),P+=V>>>13,V&=8191;let H=P+S*d+I*l+k*u+x*c+B*o;P=H>>>13,H&=8191,H+=C*(5*g)+R*(5*y)+O*(5*p)+N*(5*f)+D*(5*h),P+=H>>>13,H&=8191;let M=P+S*h+I*d+k*l+x*u+B*c;P=M>>>13,M&=8191,M+=C*o+R*(5*g)+O*(5*y)+N*(5*p)+D*(5*f),P+=M>>>13,M&=8191;let \$=P+S*f+I*h+k*d+x*l+B*u;P=\$>>>13,\$&=8191,\$+=C*c+R*o+O*(5*g)+N*(5*y)+D*(5*p),P+=\$>>>13,\$&=8191;let j=P+S*p+I*f+k*h+x*d+B*l;P=j>>>13,j&=8191,j+=C*u+R*c+O*o+N*(5*g)+D*(5*y),P+=j>>>13,j&=8191;let q=P+S*y+I*p+k*f+x*h+B*d;P=q>>>13,q&=8191,q+=C*l+R*u+O*c+N*o+D*(5*g),P+=q>>>13,q&=8191;let z=P+S*g+I*y+k*p+x*f+B*h;P=z>>>13,z&=8191,z+=C*d+R*l+O*u+N*c+D*o,P+=z>>>13,z&=8191,P=(P<<2)+P|0,P=P+L|0,L=8191&P,P>>>=13,U+=P,a[0]=L,a[1]=U,a[2]=F,a[3]=V,a[4]=H,a[5]=M,a[6]=\$,a[7]=j,a[8]=q,a[9]=z}finalize(){const{h:t,pad:e}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=i,i=t[e]>>>13,t[e]&=8191;t[0]+=5*i,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let e=1;e<10;e++)r[e]=t[e]+i,i=r[e]>>>13,r[e]&=8191;r[9]-=8192;let a=(1^i)-1;for(let t=0;t<10;t++)r[t]&=a;a=~a;for(let e=0;e<10;e++)t[e]=t[e]&a|r[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let s=t[0]+e[0];t[0]=65535&s;for(let r=1;r<8;r++)s=(t[r]+e[r]|0)+(s>>>16)|0,t[r]=65535&s;(0,n.clean)(r)}update(t){(0,n.aexists)(this),t=(0,n.toBytes)(t),(0,n.abytes)(t);const{buffer:e,blockLen:r}=this,i=t.length;for(let n=0;n<i;){const a=Math.min(r-this.pos,i-n);if(a!==r)e.set(t.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===r&&(this.process(e,0,!1),this.pos=0);else for(;r<=i-n;n+=r)this.process(t,n)}return this}destroy(){(0,n.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(t){(0,n.aexists)(this),(0,n.aoutput)(t,this),this.finished=!0;const{buffer:e,h:r}=this;let{pos:i}=this;if(i){for(e[i++]=1;i<16;i++)e[i]=0;this.process(e,0,!0)}this.finalize();let a=0;for(let e=0;e<8;e++)t[a++]=r[e]>>>0,t[a++]=r[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}}function s(t){const e=(e,r)=>t(r).update((0,n.toBytes)(e)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}e.poly1305=s(t=>new a(t))},8900(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=o;const n=r(2506),i=r(1210),a=r(6527);function s(t,e,r,i,a,s=20){let o=t[0],c=t[1],u=t[2],l=t[3],d=e[0],h=e[1],f=e[2],p=e[3],y=e[4],g=e[5],m=e[6],b=e[7],_=a,w=r[0],v=r[1],E=r[2],A=o,T=c,S=u,I=l,k=d,x=h,B=f,C=p,R=y,O=g,N=m,D=b,P=_,L=w,U=v,F=E;for(let t=0;t<s;t+=2)A=A+k|0,P=(0,n.rotl)(P^A,16),R=R+P|0,k=(0,n.rotl)(k^R,12),A=A+k|0,P=(0,n.rotl)(P^A,8),R=R+P|0,k=(0,n.rotl)(k^R,7),T=T+x|0,L=(0,n.rotl)(L^T,16),O=O+L|0,x=(0,n.rotl)(x^O,12),T=T+x|0,L=(0,n.rotl)(L^T,8),O=O+L|0,x=(0,n.rotl)(x^O,7),S=S+B|0,U=(0,n.rotl)(U^S,16),N=N+U|0,B=(0,n.rotl)(B^N,12),S=S+B|0,U=(0,n.rotl)(U^S,8),N=N+U|0,B=(0,n.rotl)(B^N,7),I=I+C|0,F=(0,n.rotl)(F^I,16),D=D+F|0,C=(0,n.rotl)(C^D,12),I=I+C|0,F=(0,n.rotl)(F^I,8),D=D+F|0,C=(0,n.rotl)(C^D,7),A=A+x|0,F=(0,n.rotl)(F^A,16),N=N+F|0,x=(0,n.rotl)(x^N,12),A=A+x|0,F=(0,n.rotl)(F^A,8),N=N+F|0,x=(0,n.rotl)(x^N,7),T=T+B|0,P=(0,n.rotl)(P^T,16),D=D+P|0,B=(0,n.rotl)(B^D,12),T=T+B|0,P=(0,n.rotl)(P^T,8),D=D+P|0,B=(0,n.rotl)(B^D,7),S=S+C|0,L=(0,n.rotl)(L^S,16),R=R+L|0,C=(0,n.rotl)(C^R,12),S=S+C|0,L=(0,n.rotl)(L^S,8),R=R+L|0,C=(0,n.rotl)(C^R,7),I=I+k|0,U=(0,n.rotl)(U^I,16),O=O+U|0,k=(0,n.rotl)(k^O,12),I=I+k|0,U=(0,n.rotl)(U^I,8),O=O+U|0,k=(0,n.rotl)(k^O,7);let V=0;i[V++]=o+A|0,i[V++]=c+T|0,i[V++]=u+S|0,i[V++]=l+I|0,i[V++]=d+k|0,i[V++]=h+x|0,i[V++]=f+B|0,i[V++]=p+C|0,i[V++]=y+R|0,i[V++]=g+O|0,i[V++]=m+N|0,i[V++]=b+D|0,i[V++]=_+P|0,i[V++]=w+L|0,i[V++]=v+U|0,i[V++]=E+F|0}function o(t,e,r,i){let a=t[0],s=t[1],o=t[2],c=t[3],u=e[0],l=e[1],d=e[2],h=e[3],f=e[4],p=e[5],y=e[6],g=e[7],m=r[0],b=r[1],_=r[2],w=r[3];for(let t=0;t<20;t+=2)a=a+u|0,m=(0,n.rotl)(m^a,16),f=f+m|0,u=(0,n.rotl)(u^f,12),a=a+u|0,m=(0,n.rotl)(m^a,8),f=f+m|0,u=(0,n.rotl)(u^f,7),s=s+l|0,b=(0,n.rotl)(b^s,16),p=p+b|0,l=(0,n.rotl)(l^p,12),s=s+l|0,b=(0,n.rotl)(b^s,8),p=p+b|0,l=(0,n.rotl)(l^p,7),o=o+d|0,_=(0,n.rotl)(_^o,16),y=y+_|0,d=(0,n.rotl)(d^y,12),o=o+d|0,_=(0,n.rotl)(_^o,8),y=y+_|0,d=(0,n.rotl)(d^y,7),c=c+h|0,w=(0,n.rotl)(w^c,16),g=g+w|0,h=(0,n.rotl)(h^g,12),c=c+h|0,w=(0,n.rotl)(w^c,8),g=g+w|0,h=(0,n.rotl)(h^g,7),a=a+l|0,w=(0,n.rotl)(w^a,16),y=y+w|0,l=(0,n.rotl)(l^y,12),a=a+l|0,w=(0,n.rotl)(w^a,8),y=y+w|0,l=(0,n.rotl)(l^y,7),s=s+d|0,m=(0,n.rotl)(m^s,16),g=g+m|0,d=(0,n.rotl)(d^g,12),s=s+d|0,m=(0,n.rotl)(m^s,8),g=g+m|0,d=(0,n.rotl)(d^g,7),o=o+h|0,b=(0,n.rotl)(b^o,16),f=f+b|0,h=(0,n.rotl)(h^f,12),o=o+h|0,b=(0,n.rotl)(b^o,8),f=f+b|0,h=(0,n.rotl)(h^f,7),c=c+u|0,_=(0,n.rotl)(_^c,16),p=p+_|0,u=(0,n.rotl)(u^p,12),c=c+u|0,_=(0,n.rotl)(_^c,8),p=p+_|0,u=(0,n.rotl)(u^p,7);let v=0;i[v++]=a,i[v++]=s,i[v++]=o,i[v++]=c,i[v++]=m,i[v++]=b,i[v++]=_,i[v++]=w}e.chacha20orig=(0,n.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,n.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,n.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),e.chacha8=(0,n.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,n.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const c=new Uint8Array(16),u=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(c.subarray(r))},l=new Uint8Array(32);function d(t,e,r,n,s){const o=t(e,r,l),c=i.poly1305.create(o);s&&u(c,s),u(c,n);const d=(0,a.u64Lengths)(n.length,s?s.length:0,!0);c.update(d);const h=c.digest();return(0,a.clean)(o,d),h}e._poly1305_aead=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;(s=(0,a.getOutput)(o+16,s,!1)).set(i);const c=s.subarray(0,-16);t(e,r,c,c,1);const u=d(t,e,r,c,n);return s.set(u,o),(0,a.clean)(u),s},decrypt(i,s){s=(0,a.getOutput)(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=d(t,e,r,o,n);if(!(0,a.equalBytes)(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),(0,a.clean)(u),s}}),e.chacha20poly1305=(0,a.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,a.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))},5297(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},6527(t,e){"use strict";function r(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function n(t){if("boolean"!=typeof t)throw new Error(\`boolean expected, not \${t}\`)}function i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function a(t,...e){if(!r(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function s(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=void 0,e.isBytes=r,e.abool=n,e.anumber=i,e.abytes=a,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");i(t.outputLen),i(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){a(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=s,e.bytesToHex=u,e.hexToBytes=d,e.hexToNumber=h,e.bytesToNumberBE=function(t){return h(u(t))},e.numberToBytesBE=function(t,e){return d(t.toString(16).padStart(2*e,"0"))},e.utf8ToBytes=f,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=function(t){if("string"==typeof t)t=f(t);else{if(!r(t))throw new Error("Uint8Array expected, got "+typeof t);t=m(t)}return t},e.overlapBytes=p,e.complexOverlapBytes=function(t,e){if(p(t,e)&&t.byteOffset<e.byteOffset)throw new Error("complex overlap of input and output is not supported")},e.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];a(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.checkOpts=function(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)},e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r},e.getOutput=function(t,e,r=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!g(e))throw new Error("invalid output, must be aligned");return e},e.setBigUint64=y,e.u64Lengths=function(t,e,r){n(r);const i=new Uint8Array(16),a=s(i);return y(a,0,BigInt(e),r),y(a,8,BigInt(t),r),i},e.isAligned32=g,e.copyBytes=m,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];const o=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),c=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u(t){if(a(t),o)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=c[t[r]];return e}function l(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function d(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(o)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=l(t.charCodeAt(i)),a=l(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":"0x"+t)}function f(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function p(t,e){return t.buffer===e.buffer&&t.byteOffset<e.byteOffset+e.byteLength&&e.byteOffset<t.byteOffset+t.byteLength}function y(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}function g(t){return t.byteOffset%4==0}function m(t){return Uint8Array.from(t)}e.nextTick=async()=>{},e.Hash=class{},e.wrapCipher=(t,r)=>{function n(n,...i){if(a(n),!e.isLE)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const e=i[0];if(!e)throw new Error("nonce / iv required");t.varSizeNonce?a(e):a(e,t.nonceLength)}const s=t.tagLength;s&&void 0!==i[1]&&a(i[1]);const o=r(n,...i),c=(t,e)=>{if(void 0!==e){if(2!==t)throw new Error("cipher output not supported");a(e)}};let u=!1;return{encrypt(t,e){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,a(t),c(o.encrypt.length,e),o.encrypt(t,e)},decrypt(t,e){if(a(t),s&&t.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,e),o.decrypt(t,e)}}}return Object.assign(n,t),n}},8489(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=a,e.getWebcryptoSubtle=s,e.managedNonce=function(t){const{nonceLength:e}=t;return(0,i.anumber)(e),(r,...n)=>({encrypt(s,...o){const c=a(e),u=t(r,c,...n).encrypt(s,...o),l=(0,i.concatBytes)(c,u);return u.fill(0),l},decrypt(i,...a){const s=i.subarray(0,e),o=i.subarray(e);return t(r,s,...n).decrypt(o,...a)}})};const n=r(5297),i=r(6527);function a(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function s(){if(n.crypto&&"object"==typeof n.crypto.subtle&&null!=n.crypto.subtle)return n.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={async encrypt(t,e,r,n){const i=s(),a=await i.importKey("raw",t,e,!0,["encrypt"]),o=await i.encrypt(r,a,n);return new Uint8Array(o)},async decrypt(t,e,r,n){const i=s(),a=await i.importKey("raw",t,e,!0,["decrypt"]),o=await i.decrypt(r,a,n);return new Uint8Array(o)}};const o="AES-CBC",c="AES-CTR",u="AES-GCM";function l(t){return(r,n,a)=>{(0,i.abytes)(r),(0,i.abytes)(n);const s={name:t,length:8*r.length},l=function(t,e,r){if(t===o)return{name:o,iv:e};if(t===c)return{name:c,counter:e,length:64};if(t===u)return r?{name:u,iv:e,additionalData:r}:{name:u,iv:e};throw new Error("unknown aes block mode")}(t,n,a);let d=!1;return{encrypt(t){if((0,i.abytes)(t),d)throw new Error("Cannot encrypt() twice with same key / nonce");return d=!0,e.utils.encrypt(r,s,l,t)},decrypt:t=>((0,i.abytes)(t),e.utils.decrypt(r,s,l,t))}}}e.cbc=l(o),e.ctr=l(c),e.gcm=(()=>l(u))()},3562(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=s,e.createCurve=function(t,e){const r=e=>(0,a.weierstrass)({...t,...s(e)});return Object.freeze({...r(e),create:r})};const n=r(3788),i=r(1130),a=r(1705);function s(t){return{hash:t,hmac:(e,...r)=>(0,n.hmac)(t,e,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}},2422(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wNAF=function(t,e){return{constTimeNegate:o,hasPrecomputes:t=>1!==p(t),unsafeLadder(e,r,n=t.ZERO){let i=e;for(;r>a;)r&s&&(n=n.add(i)),i=i.double(),r>>=s;return n},precomputeWindow(t,r){const{windows:n,windowSize:i}=u(r,e),a=[];let s=t,o=s;for(let t=0;t<n;t++){o=s,a.push(o);for(let t=1;t<i;t++)o=o.add(s),a.push(o);s=o.double()}return a},wNAF(r,n,i){const{windows:a,windowSize:c}=u(r,e);let l=t.ZERO,d=t.BASE;const h=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let t=0;t<a;t++){const e=t*c;let r=Number(i&h);i>>=p,r>c&&(r-=f,i+=s);const a=e,u=e+Math.abs(r)-1,y=t%2!=0,g=r<0;0===r?d=d.add(o(y,n[a])):l=l.add(o(g,n[u]))}return{p:l,f:d}},wNAFUnsafe(r,n,i,o=t.ZERO){const{windows:c,windowSize:l}=u(r,e),d=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let t=0;t<c;t++){const e=t*l;if(i===a)break;let r=Number(i&d);if(i>>=f,r>l&&(r-=h,i+=s),0===r)continue;let c=n[e+Math.abs(r)-1];r<0&&(c=c.negate()),o=o.add(c)}return o},getPrecomputes(t,e,r){let n=h.get(e);return n||(n=this.precomputeWindow(e,t),1!==t&&h.set(e,r(n))),n},wNAFCached(t,e,r){const n=p(t);return this.wNAF(n,this.getPrecomputes(n,t,r),e)},wNAFCachedUnsafe(t,e,r,n){const i=p(t);return 1===i?this.unsafeLadder(t,e,n):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,n)},setWindowSize(t,r){c(r,e),f.set(t,r),h.delete(t)}}},e.pippenger=function(t,e,r,n){if(l(r,t),d(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,s=(0,i.bitLen)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,c=(1<<o)-1,u=new Array(c+1).fill(a);let h=a;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){u.fill(a);for(let e=0;e<n.length;e++){const i=n[e],a=Number(i>>BigInt(t)&BigInt(c));u[a]=u[a].add(r[e])}let e=a;for(let t=u.length-1,r=a;t>0;t--)r=r.add(u[t]),e=e.add(r);if(h=h.add(e),0!==t)for(let t=0;t<o;t++)h=h.double()}return h},e.precomputeMSMUnsafe=function(t,e,r,n){c(n,e.BITS),l(r,t);const i=t.ZERO,a=2**n-1,s=Math.ceil(e.BITS/n),o=BigInt((1<<n)-1),u=r.map(t=>{const e=[];for(let r=0,n=t;r<a;r++)e.push(n),n=n.add(t);return e});return t=>{if(d(t,e),t.length>r.length)throw new Error("array of scalars must be smaller than array of points");let a=i;for(let e=0;e<s;e++){if(a!==i)for(let t=0;t<n;t++)a=a.double();const r=BigInt(s*n-(e+1)*n);for(let e=0;e<t.length;e++){const n=t[e],i=Number(n>>r&o);i&&(a=a.add(u[e][i-1]))}}return a}},e.validateBasic=function(t){return(0,n.validateField)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const n=r(4967),i=r(1484),a=BigInt(0),s=BigInt(1);function o(t,e){const r=e.negate();return t?r:e}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function u(t,e){return c(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}function l(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function d(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const h=new WeakMap,f=new WeakMap;function p(t){return f.get(t)||1}},1761(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expand_message_xmd=u,e.expand_message_xof=l,e.hash_to_field=d,e.isogenyMap=function(t,e){const r=e.map(t=>Array.from(t).reverse());return(e,n)=>{const[i,a,s,o]=r.map(r=>r.reduce((r,n)=>t.add(t.mul(r,e),n)));return e=t.div(i,a),n=t.mul(n,t.div(s,o)),{x:e,y:n}}},e.createHasher=function(t,e,r){if("function"!=typeof e)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const a=d(n,2,{...r,DST:r.DST,...i}),s=t.fromAffine(e(a[0])),o=t.fromAffine(e(a[1])),c=s.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){const a=d(n,1,{...r,DST:r.encodeDST,...i}),s=t.fromAffine(e(a[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const t of r)if("bigint"!=typeof t)throw new Error("mapToCurve: expected array of bigints");const n=t.fromAffine(e(r)).clearCofactor();return n.assertValidity(),n}}};const n=r(4967),i=r(1484),a=i.bytesToNumberBE;function s(t,e){if(c(t),c(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=255&t,t>>>=8;return new Uint8Array(r)}function o(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function c(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function u(t,e,r,n){(0,i.abytes)(t),(0,i.abytes)(e),c(r),e.length>255&&(e=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:a,blockLen:u}=n,l=Math.ceil(r/a);if(r>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");const d=(0,i.concatBytes)(e,s(e.length,1)),h=s(0,u),f=s(r,2),p=new Array(l),y=n((0,i.concatBytes)(h,t,f,s(0,1),d));p[0]=n((0,i.concatBytes)(y,s(1,1),d));for(let t=1;t<=l;t++){const e=[o(y,p[t-1]),s(t+1,1),d];p[t]=n((0,i.concatBytes)(...e))}return(0,i.concatBytes)(...p).slice(0,r)}function l(t,e,r,n,a){if((0,i.abytes)(t),(0,i.abytes)(e),c(r),e.length>255){const t=Math.ceil(2*n/8);e=a.create({dkLen:t}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:r}).update(t).update(s(r,2)).update(e).update(s(e.length,1)).digest()}function d(t,e,r){(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:o,m:d,hash:h,expand:f,DST:p}=r;(0,i.abytes)(t),c(e);const y="string"==typeof p?(0,i.utf8ToBytes)(p):p,g=s.toString(2).length,m=Math.ceil((g+o)/8),b=e*d*m;let _;if("xmd"===f)_=u(t,y,b,h);else if("xof"===f)_=l(t,y,b,o,h);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');_=t}const w=new Array(e);for(let t=0;t<e;t++){const e=new Array(d);for(let r=0;r<d;r++){const i=m*(r+t*d),o=_.subarray(i,i+m);e[r]=(0,n.mod)(a(o),s)}w[t]=e}return w}},4967(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNegativeLE=void 0,e.mod=d,e.pow=h,e.pow2=function(t,e,r){let n=t;for(;e-- >i;)n*=n,n%=r;return n},e.invert=f,e.tonelliShanks=p,e.FpSqrt=y,e.validateField=function(t){const e=g.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(t,e)},e.FpPow=m,e.FpInvertBatch=b,e.FpDiv=function(t,e,r){return t.mul(e,"bigint"==typeof r?f(r,t.ORDER):t.inv(r))},e.FpLegendre=_,e.FpIsSquare=function(t){const e=_(t.ORDER);return r=>{const n=e(t,r);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}},e.nLength=w,e.Field=function(t,e,r=!1,s={}){if(t<=i)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:o,nByteLength:c}=w(t,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:t,BITS:o,BYTES:c,MASK:(0,n.bitMask)(o),ZERO:i,ONE:a,create:e=>d(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&a)===a,neg:e=>d(-e,t),eql:(t,e)=>t===e,sqr:e=>d(e*e,t),add:(e,r)=>d(e+r,t),sub:(e,r)=>d(e-r,t),mul:(e,r)=>d(e*r,t),pow:(t,e)=>m(l,t,e),div:(e,r)=>d(e*f(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>f(e,t),sqrt:s.sqrt||(e=>(u||(u=y(t)),u(l,e))),invertBatch:t=>b(l,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?(0,n.numberToBytesLE)(t,c):(0,n.numberToBytesBE)(t,c),fromBytes:t=>{if(t.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+t.length);return r?(0,n.bytesToNumberLE)(t):(0,n.bytesToNumberBE)(t)}});return Object.freeze(l)},e.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)},e.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r},e.hashToPrivateScalar=function(t,e,r=!1){const i=(t=(0,n.ensureBytes)("privateHash",t)).length,s=w(e).nByteLength+8;if(s<24||i<s||i>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+i);return d(r?(0,n.bytesToNumberLE)(t):(0,n.bytesToNumberBE)(t),e-a)+a},e.getFieldBytesLength=v,e.getMinHashLength=E,e.mapHashToField=function(t,e,r=!1){const i=t.length,s=v(e),o=E(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const c=d(r?(0,n.bytesToNumberBE)(t):(0,n.bytesToNumberLE)(t),e-a)+a;return r?(0,n.numberToBytesLE)(c,s):(0,n.numberToBytesBE)(c,s)};const n=r(1484),i=BigInt(0),a=BigInt(1),s=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);function d(t,e){const r=t%e;return r>=i?r:e+r}function h(t,e,r){if(e<i)throw new Error("invalid exponent, negatives unsupported");if(r<=i)throw new Error("invalid modulus");if(r===a)return i;let n=a;for(;e>i;)e&a&&(n=n*t%r),t=t*t%r,e>>=a;return n}function f(t,e){if(t===i)throw new Error("invert: expected non-zero number");if(e<=i)throw new Error("invert: expected positive modulus, got "+e);let r=d(t,e),n=e,s=i,o=a,c=a,u=i;for(;r!==i;){const t=n/r,e=n%r,i=s-c*t,a=o-u*t;n=r,r=e,s=c,o=u,c=i,u=a}if(n!==a)throw new Error("invert: does not exist");return d(s,e)}function p(t){const e=(t-a)/s;let r,n,o;for(r=t-a,n=0;r%s===i;r/=s,n++);for(o=s;o<t&&h(o,e,t)!==t-a;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const e=(t+a)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const u=(r+a)/s;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let s=n,c=t.pow(t.mul(t.ONE,o),r),l=t.pow(i,u),d=t.pow(i,r);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(d);e<s&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,a<<BigInt(s-e-1));c=t.sqr(r),l=t.mul(l,r),d=t.mul(d,c),s=e}return l}}function y(t){if(t%c===o){const e=(t+a)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%l===u){const e=(t-u)/l;return function(t,r){const n=t.mul(r,s),i=t.pow(n,e),a=t.mul(r,i),o=t.mul(t.mul(a,s),i),c=t.mul(a,t.sub(o,t.ONE));if(!t.eql(t.sqr(c),r))throw new Error("Cannot find square root");return c}}return p(t)}e.isNegativeLE=(t,e)=>(d(t,e)&a)===a;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(t,e,r){if(r<i)throw new Error("invalid exponent, negatives unsupported");if(r===i)return t.ONE;if(r===a)return e;let n=t.ONE,s=e;for(;r>i;)r&a&&(n=t.mul(n,s)),s=t.sqr(s),r>>=a;return n}function b(t,e){const r=new Array(e.length),n=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),i=t.inv(n);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),i),r}function _(t){const e=(t-a)/s;return(t,r)=>t.pow(r,e)}function w(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function v(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function E(t){const e=v(t);return e+Math.ceil(e/2)}},5920(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateOpts=i,e.splitConstants=function(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const r=[];let n=[];for(let i=0;i<t.length;i++)n.push(t[i]),n.length===e&&(r.push(n),n=[]);return r},e.poseidon=function(t){const e=i(t),{Fp:r,mds:n,roundConstants:a,rounds:s,roundsPartial:o,sboxFn:c,t:u}=e,l=e.roundsFull/2,d=e.reversePartialPowIdx?u-1:0,h=(t,e,i)=>(t=t.map((t,e)=>r.add(t,a[i][e])),e?t=t.map(t=>c(t)):t[d]=c(t[d]),t=n.map(e=>e.reduce((e,n,i)=>r.add(e,r.mulN(n,t[i])),r.ZERO))),f=function(t){if(!Array.isArray(t)||t.length!==u)throw new Error("invalid values, expected array of bigints with length "+u);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return r.create(t)});let e=0;for(let r=0;r<l;r++)t=h(t,!0,e++);for(let r=0;r<o;r++)t=h(t,!1,e++);for(let r=0;r<l;r++)t=h(t,!0,e++);if(e!==s)throw new Error("invalid number of rounds");return t};return f.roundConstants=a,f};const n=r(4967);function i(t){const{Fp:e,mds:r,reversePartialPowIdx:i,roundConstants:a}=t,{roundsFull:s,roundsPartial:o,sboxPower:c,t:u}=t;(0,n.validateField)(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(r)||r.length!==u)throw new Error("Poseidon: invalid MDS matrix");const l=r.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==i&&"boolean"!=typeof i)throw new Error("invalid param reversePartialPowIdx="+i);if(1&s)throw new Error("roundsFull is not even"+s);const d=s+o;if(!Array.isArray(a)||a.length!==d)throw new Error("Poseidon: invalid round constants");const h=a.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=t=>(0,n.FpPow)(e,t,f);return 3===c?p=t=>e.mul(e.sqrN(t),t):5===c&&(p=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:d,sboxFn:p,roundConstants:h,mds:l})}},1484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=e.bitMask=void 0,e.isBytes=a,e.abytes=s,e.abool=function(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)},e.bytesToHex=c,e.numberToHexUnpadded=u,e.hexToNumber=l,e.hexToBytes=h,e.bytesToNumberBE=function(t){return l(c(t))},e.bytesToNumberLE=function(t){return s(t),l(c(Uint8Array.from(t).reverse()))},e.numberToBytesBE=f,e.numberToBytesLE=function(t,e){return f(t,e).reverse()},e.numberToVarBytesBE=function(t){return h(u(t))},e.ensureBytes=function(t,e,r){let n;if("string"==typeof e)try{n=h(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!a(e))throw new Error(t+" must be hex string or Uint8Array");n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n},e.concatBytes=p,e.equalBytes=function(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r},e.utf8ToBytes=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))},e.inRange=g,e.aInRange=function(t,e,r,n){if(!g(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)},e.bitLen=function(t){let e;for(e=0;t>r;t>>=n,e+=1);return e},e.bitGet=function(t,e){return t>>BigInt(e)&n},e.bitSet=function(t,e,i){return t|(i?n:r)<<BigInt(e)},e.createHmacDrbg=function(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=m(t),i=m(t),a=0;const s=()=>{n.fill(1),i.fill(0),a=0},o=(...t)=>r(i,n,...t),c=(t=m())=>{i=o(b([0]),t),n=o(),0!==t.length&&(i=o(b([1]),t),n=o())},u=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=o();const e=n.slice();r.push(e),t+=n.length}return p(...r)};return(t,e)=>{let r;for(s(),c(t);!(r=e(u()));)c();return s(),r}},e.validateObject=function(t,e,r={}){const n=(e,r,n)=>{const i=_[r];if("function"!=typeof i)throw new Error("invalid validator function");const a=t[e];if(!(n&&void 0===a||i(a,t)))throw new Error("param "+String(e)+" is invalid. Expected "+r+", got "+a)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t},e.memoized=function(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(void 0!==i)return i;const a=t(r,...n);return e.set(r,a),a}};const r=BigInt(0),n=BigInt(1),i=BigInt(2);function a(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!a(t))throw new Error("Uint8Array expected")}const o=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function c(t){s(t);let e="";for(let r=0;r<t.length;r++)e+=o[t[r]];return e}function u(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function l(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?r:BigInt("0x"+t)}function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=d(t.charCodeAt(i)),a=d(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n}function f(t,e){return h(t.toString(16).padStart(2*e,"0"))}function p(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];s(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}const y=t=>"bigint"==typeof t&&r<=t;function g(t,e,r){return y(t)&&y(e)&&y(r)&&e<=t&&t<r}e.bitMask=t=>(i<<BigInt(t-1))-n;const m=t=>new Uint8Array(t),b=t=>Uint8Array.from(t),_={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||a(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};e.notImplemented=()=>{throw new Error("not implemented")}},1705(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=y,e.weierstrass=function(t){const r=function(t){const e=(0,n.validateBasic)(t);return a.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:c,n:u}=r,h=c.BYTES+1,f=2*c.BYTES+1;function p(t){return i.mod(t,u)}function g(t){return i.invert(t,u)}const{ProjectivePoint:m,normPrivateKeyToScalar:b,weierstrassEquation:_,isWithinCurveOrder:w}=y({...r,toBytes(t,e,r){const n=e.toAffine(),i=c.toBytes(n.x),o=a.concatBytes;return(0,s.abool)("isCompressed",r),r?o(Uint8Array.from([e.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,c.toBytes(n.y))},fromBytes(t){const e=t.length,r=t[0],n=t.subarray(1);if(e!==h||2!==r&&3!==r){if(e===f&&4===r)return{x:c.fromBytes(n.subarray(0,c.BYTES)),y:c.fromBytes(n.subarray(c.BYTES,2*c.BYTES))};throw new Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+e)}{const t=a.bytesToNumberBE(n);if(!a.inRange(t,d,c.ORDER))throw new Error("Point is not on curve");const e=_(t);let i;try{i=c.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~r)!=((i&d)===d)&&(i=c.neg(i)),{x:t,y:i}}}}),v=t=>a.bytesToHex(a.numberToBytesBE(t,r.nByteLength));function E(t){return t>u>>d}const A=(t,e,r)=>a.bytesToNumberBE(t.slice(e,r));class T{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const e=r.nByteLength;return t=(0,s.ensureBytes)("compactSignature",t,2*e),new T(A(t,0,e),A(t,e,2*e))}static fromDER(t){const{r,s:n}=e.DER.toSig((0,s.ensureBytes)("DER",t));return new T(r,n)}assertValidity(){a.aInRange("r",this.r,d,u),a.aInRange("s",this.s,d,u)}addRecoveryBit(t){return new T(this.r,this.s,t)}recoverPublicKey(t){const{r:e,s:n,recovery:i}=this,a=x((0,s.ensureBytes)("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const o=2===i||3===i?e+r.n:e;if(o>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&i?"03":"02",l=m.fromHex(u+v(o)),d=g(o),h=p(-a*d),f=p(n*d),y=m.BASE.multiplyAndAddUnsafe(l,h,f);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return a.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return a.hexToBytes(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const S={isValidPrivateKey(t){try{return b(t),!0}catch(t){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const t=i.getMinHashLength(r.n);return i.mapHashToField(r.randomBytes(t),r.n)},precompute:(t=8,e=m.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function I(t){const e=a.isBytes(t),r="string"==typeof t,n=(e||r)&&t.length;return e?n===h||n===f:r?n===2*h||n===2*f:t instanceof m}const k=r.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=a.bytesToNumberBE(t),n=8*t.length-r.nBitLength;return n>0?e>>BigInt(n):e},x=r.bits2int_modN||function(t){return p(k(t))},B=a.bitMask(r.nBitLength);function C(t){return a.aInRange("num < 2^"+r.nBitLength,t,l,B),a.numberToBytesBE(t,r.nByteLength)}const R={lowS:r.lowS,prehash:!1},O={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(t,e=!0){return m.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(I(t))throw new Error("first arg must be private key");if(!I(e))throw new Error("second arg must be public key");return m.fromHex(e).multiply(b(t)).toRawBytes(r)},sign:function(t,e,n=R){const{seed:i,k2sig:u}=function(t,e,n=R){if(["recovered","canonical"].some(t=>t in n))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=r;let{lowS:h,prehash:f,extraEntropy:y}=n;null==h&&(h=!0),t=(0,s.ensureBytes)("msgHash",t),o(n),f&&(t=(0,s.ensureBytes)("prehashed msgHash",i(t)));const _=x(t),v=b(e),A=[C(v),C(_)];if(null!=y&&!1!==y){const t=!0===y?u(c.BYTES):y;A.push((0,s.ensureBytes)("extraEntropy",t))}const S=a.concatBytes(...A),I=_;return{seed:S,k2sig:function(t){const e=k(t);if(!w(e))return;const r=g(e),n=m.BASE.multiply(e).toAffine(),i=p(n.x);if(i===l)return;const a=p(r*p(I+i*v));if(a===l)return;let s=(n.x===i?0:2)|Number(n.y&d),o=a;return h&&E(a)&&(o=function(t){return E(t)?p(-t):t}(a),s^=1),new T(i,o,s)}}}(t,e,n),h=r;return a.createHmacDrbg(h.hash.outputLen,h.nByteLength,h.hmac)(i,u)},verify:function(t,n,i,c=O){const u=t;n=(0,s.ensureBytes)("msgHash",n),i=(0,s.ensureBytes)("publicKey",i);const{lowS:l,prehash:d,format:h}=c;if(o(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof u||a.isBytes(u),y=!f&&!h&&"object"==typeof u&&null!==u&&"bigint"==typeof u.r&&"bigint"==typeof u.s;if(!f&&!y)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,_;try{if(y&&(b=new T(u.r,u.s)),f){try{"compact"!==h&&(b=T.fromDER(u))}catch(t){if(!(t instanceof e.DER.Err))throw t}b||"der"===h||(b=T.fromCompact(u))}_=m.fromHex(i)}catch(t){return!1}if(!b)return!1;if(l&&b.hasHighS())return!1;d&&(n=r.hash(n));const{r:w,s:v}=b,E=x(n),A=g(v),S=p(E*A),I=p(w*A),k=m.BASE.multiplyAndAddUnsafe(_,S,I)?.toAffine();return!!k&&p(k.x)===w},ProjectivePoint:m,Signature:T,utils:S}},e.SWUFpSqrtRatio=g,e.mapToCurveSimpleSWU=function(t,e){if(i.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=g(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,a,s,o,c,u,l,d;i=t.sqr(n),i=t.mul(i,e.Z),a=t.sqr(i),a=t.add(a,i),s=t.add(a,t.ONE),s=t.mul(s,e.B),o=t.cmov(e.Z,t.neg(a),!t.eql(a,t.ZERO)),o=t.mul(o,e.A),a=t.sqr(s),u=t.sqr(o),c=t.mul(u,e.A),a=t.add(a,c),a=t.mul(a,s),u=t.mul(u,o),c=t.mul(u,e.B),a=t.add(a,c),l=t.mul(i,s);const{isValid:h,value:f}=r(a,u);d=t.mul(i,n),d=t.mul(d,f),l=t.cmov(l,s,h),d=t.cmov(d,f,h);const p=t.isOdd(n)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),l=t.div(l,o),{x:l,y:d}}};const n=r(2422),i=r(4967),a=r(1484),s=r(1484);function o(t){void 0!==t.lowS&&(0,s.abool)("lowS",t.lowS),void 0!==t.prehash&&(0,s.abool)("prehash",t.prehash)}const{bytesToNumberBE:c,hexToBytes:u}=a;e.DER={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,r)=>{const{Err:n}=e.DER;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&r.length)throw new n("tlv.encode: unpadded data");const i=r.length/2,s=a.numberToHexUnpadded(i);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=i>127?a.numberToHexUnpadded(s.length/2|128):"";return a.numberToHexUnpadded(t)+o+s+r},decode(t,r){const{Err:n}=e.DER;let i=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[i++]!==t)throw new n("tlv.decode: wrong tlv");const a=r[i++];let s=0;if(128&a){const t=127&a;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const e=r.subarray(i,i+t);if(e.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===e[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of e)s=s<<8|t;if(i+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=a;const o=r.subarray(i,i+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:r.subarray(i+s)}}},_int:{encode(t){const{Err:r}=e.DER;if(t<l)throw new r("integer: negative integers are not allowed");let n=a.numberToHexUnpadded(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new r("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:r}=e.DER;if(128&t[0])throw new r("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new r("invalid signature integer: unnecessary leading zero");return c(t)}},toSig(t){const{Err:r,_int:n,_tlv:i}=e.DER,s="string"==typeof t?u(t):t;a.abytes(s);const{v:o,l:c}=i.decode(48,s);if(c.length)throw new r("invalid signature: left bytes after parsing");const{v:l,l:d}=i.decode(2,o),{v:h,l:f}=i.decode(2,d);if(f.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(h)}},hexFromSig(t){const{_tlv:r,_int:n}=e.DER,i=r.encode(2,n.encode(t.r))+r.encode(2,n.encode(t.s));return r.encode(48,i)}};const l=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function y(t){const e=function(t){const e=(0,n.validateBasic)(t);a.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:s}=e;if(r){if(!i.eql(s,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,o=i.Field(e.n,e.nBitLength),c=e.toBytes||((t,e,n)=>{const i=e.toAffine();return a.concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),u=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function h(t){const{a:n,b:i}=e,a=r.sqr(t),s=r.mul(a,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),h(e.Gx)))throw new Error("bad generator point: equation left != right");function p(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:o,n:c}=e;if(r&&"bigint"!=typeof t){if(a.isBytes(t)&&(t=a.bytesToHex(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*n,"0")}let u;try{u="bigint"==typeof t?t:a.bytesToNumberBE((0,s.ensureBytes)("private key",t,n))}catch(e){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof t)}return o&&(u=i.mod(u,c)),a.aInRange("private key",u,d,c),u}function y(t){if(!(t instanceof b))throw new Error("ProjectivePoint expected")}const g=(0,s.memoized)((t,e)=>{const{px:n,py:i,pz:a}=t;if(r.eql(a,r.ONE))return{x:n,y:i};const s=t.is0();null==e&&(e=s?r.ONE:r.inv(a));const o=r.mul(n,e),c=r.mul(i,e),u=r.mul(a,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),m=(0,s.memoized)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=t.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const a=r.sqr(i),s=h(n);if(!r.eql(a,s))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof b)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?b.ZERO:new b(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(b.fromAffine)}static fromHex(t){const e=b.fromAffine(u((0,s.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return b.BASE.multiply(p(t))}static msm(t,e){return(0,n.pippenger)(b,o,t,e)}_setWindowSize(t){w.setWindowSize(this,t)}assertValidity(){m(this)}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){y(t);const{px:e,py:n,pz:i}=this,{px:a,py:s,pz:o}=t,c=r.eql(r.mul(e,o),r.mul(a,i)),u=r.eql(r.mul(n,o),r.mul(s,i));return c&&u}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,f),{px:a,py:s,pz:o}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(a,a),h=r.mul(s,s),p=r.mul(o,o),y=r.mul(a,s);return y=r.add(y,y),l=r.mul(a,o),l=r.add(l,l),c=r.mul(t,l),u=r.mul(i,p),u=r.add(c,u),c=r.sub(h,u),u=r.add(h,u),u=r.mul(c,u),c=r.mul(y,c),l=r.mul(i,l),p=r.mul(t,p),y=r.sub(d,p),y=r.mul(t,y),y=r.add(y,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,p),d=r.mul(d,y),u=r.add(u,d),p=r.mul(s,o),p=r.add(p,p),d=r.mul(p,y),c=r.sub(c,d),l=r.mul(p,h),l=r.add(l,l),l=r.add(l,l),new b(c,u,l)}add(t){y(t);const{px:n,py:i,pz:a}=this,{px:s,py:o,pz:c}=t;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const h=e.a,p=r.mul(e.b,f);let g=r.mul(n,s),m=r.mul(i,o),_=r.mul(a,c),w=r.add(n,i),v=r.add(s,o);w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(n,a);let E=r.add(s,c);return v=r.mul(v,E),E=r.add(g,_),v=r.sub(v,E),E=r.add(i,a),u=r.add(o,c),E=r.mul(E,u),u=r.add(m,_),E=r.sub(E,u),d=r.mul(h,v),u=r.mul(p,_),d=r.add(u,d),u=r.sub(m,d),d=r.add(m,d),l=r.mul(u,d),m=r.add(g,g),m=r.add(m,g),_=r.mul(h,_),v=r.mul(p,v),m=r.add(m,_),_=r.sub(g,_),_=r.mul(h,_),v=r.add(v,_),g=r.mul(m,v),l=r.add(l,g),g=r.mul(E,v),u=r.mul(w,u),u=r.sub(u,g),g=r.mul(w,m),d=r.mul(E,d),d=r.add(d,g),new b(u,l,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(b.ZERO)}wNAF(t){return w.wNAFCached(this,t,b.normalizeZ)}multiplyUnsafe(t){const{endo:n,n:i}=e;a.aInRange("scalar",t,l,i);const s=b.ZERO;if(t===l)return s;if(this.is0()||t===d)return this;if(!n||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,t,b.normalizeZ);let{k1neg:o,k1:c,k2neg:u,k2:h}=n.splitScalar(t),f=s,p=s,y=this;for(;c>l||h>l;)c&d&&(f=f.add(y)),h&d&&(p=p.add(y)),y=y.double(),c>>=d,h>>=d;return o&&(f=f.negate()),u&&(p=p.negate()),p=new b(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(t){const{endo:n,n:i}=e;let s,o;if(a.aInRange("scalar",t,d,i),n){const{k1neg:e,k1:i,k2neg:a,k2:c}=n.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);u=w.constTimeNegate(e,u),d=w.constTimeNegate(a,d),d=new b(r.mul(d.px,n.beta),d.py,d.pz),s=u.add(d),o=l.add(h)}else{const{p:e,f:r}=this.wNAF(t);s=e,o=r}return b.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,r){const n=b.BASE,i=(t,e)=>e!==l&&e!==d&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),a=i(this,e).add(i(t,r));return a.is0()?void 0:a}toAffine(t){return g(this,t)}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===d)return!0;if(r)return r(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===d?this:r?r(b,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,s.abool)("isCompressed",t),this.assertValidity(),c(b,this,t)}toHex(t=!0){return(0,s.abool)("isCompressed",t),a.bytesToHex(this.toRawBytes(t))}}b.BASE=new b(e.Gx,e.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);const _=e.nBitLength,w=(0,n.wNAF)(b,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(t){return a.inRange(t,d,e.n)}}}function g(t,e){const r=t.ORDER;let n=l;for(let t=r-d;t%h===l;t/=h)n+=d;const i=n,a=h<<i-d-d,s=a*h,o=(r-d)/s,c=(o-d)/h,u=s-d,y=a,g=t.pow(e,o),m=t.pow(e,(o+d)/h);let b=(e,r)=>{let n=g,a=t.pow(r,u),s=t.sqr(a);s=t.mul(s,r);let o=t.mul(e,s);o=t.pow(o,c),o=t.mul(o,a),a=t.mul(o,r),s=t.mul(o,e);let l=t.mul(s,a);o=t.pow(l,y);let f=t.eql(o,t.ONE);a=t.mul(s,m),o=t.mul(l,n),s=t.cmov(a,s,f),l=t.cmov(o,l,f);for(let e=i;e>d;e--){let r=e-h;r=h<<r-d;let i=t.pow(l,r);const o=t.eql(i,t.ONE);a=t.mul(s,n),n=t.mul(n,n),i=t.mul(l,n),s=t.cmov(a,s,o),l=t.cmov(i,l,o)}return{isValid:f,value:s}};if(t.ORDER%p===f){const r=(t.ORDER-f)/p,n=t.sqrt(t.neg(e));b=(e,i)=>{let a=t.sqr(i);const s=t.mul(e,i);a=t.mul(a,s);let o=t.pow(a,r);o=t.mul(o,s);const c=t.mul(o,n),u=t.mul(t.sqr(o),i),l=t.eql(u,e);return{isValid:l,value:t.cmov(c,o,l)}}}return b}},3764(t,e){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function n(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){n(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=r,e.number=r,e.abytes=n,e.bytes=n,e.ahash=i,e.aexists=a,e.aoutput=s;const o={number:r,bytes:n,hash:i,exists:a,output:s};e.default=o},5311(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const n=r(3764),i=r(1130);e.Chi=(t,e,r)=>t&e^~t&r,e.Maj=(t,e,r)=>t&e^t&r^e&r;class a extends i.Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,n.aexists)(this);const{view:e,buffer:r,blockLen:a}=this,s=(t=(0,i.toBytes)(t)).length;for(let n=0;n<s;){const o=Math.min(a-this.pos,s-n);if(o===a){const e=(0,i.createView)(t);for(;a<=s-n;n+=a)this.process(e,n);continue}r.set(t.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.aexists)(this),(0,n.aoutput)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(r,0),o=0);for(let t=o;t<a;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,a-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}e.HashMD=a},5510(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},3788(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const n=r(3764),i=r(1130);class a extends i.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(t);const r=(0,i.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,s=new Uint8Array(a);s.set(r.length>a?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return(0,n.aexists)(this),this.iHash.update(t),this}digestInto(t){(0,n.aexists)(this),(0,n.abytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=a,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=a,e.hmac=(t,e,r)=>new a(t,e).update(r).digest(),e.hmac.create=(t,e)=>new a(t,e)},1696(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const n=r(5311),i=r(1130),a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)o[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],r=o[t-2],n=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,a=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;o[t]=a+o[t-7]+n+o[t-16]|0}let{A:r,B:s,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,n.Chi)(l,d,h)+a[t]+o[t]|0,p=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=s,s=r,r=e+p|0}r=r+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,c,u,l,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},1130(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let r=0;r<t.length;r++)e+=a[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=s(t.charCodeAt(i)),a=s(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let a=0;a<t;a++){n(a);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];(0,i.abytes)(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const n=r(5510),i=r(3764);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function s(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},8510(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;const n=r(1696),i=r(1130),a=r(3562),s=r(1761),o=r(4967),c=r(1484),u=r(1705),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(t,e)=>(t+e/f)/e;function y(t){const e=l,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),s=BigInt(23),c=BigInt(44),u=BigInt(88),d=t*t*t%e,h=d*d*t%e,p=(0,o.pow2)(h,r,e)*h%e,y=(0,o.pow2)(p,r,e)*h%e,m=(0,o.pow2)(y,f,e)*d%e,b=(0,o.pow2)(m,i,e)*m%e,_=(0,o.pow2)(b,a,e)*b%e,w=(0,o.pow2)(_,c,e)*_%e,v=(0,o.pow2)(w,u,e)*w%e,E=(0,o.pow2)(v,c,e)*_%e,A=(0,o.pow2)(E,r,e)*h%e,T=(0,o.pow2)(A,s,e)*b%e,S=(0,o.pow2)(T,n,e)*d%e,I=(0,o.pow2)(S,f,e);if(!g.eql(g.sqr(I),t))throw new Error("Cannot find square root");return I}const g=(0,o.Field)(l,void 0,void 0,{sqrt:y});e.secp256k1=(0,a.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,s=BigInt("0x100000000000000000000000000000000"),c=p(a*t,e),u=p(-n*t,e);let l=(0,o.mod)(t-c*r-u*i,e),f=(0,o.mod)(-c*n-u*a,e);const y=l>s,g=f>s;if(y&&(l=e-l),g&&(f=e-f),l>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:y,k1:l,k2neg:g,k2:f}}}},n.sha256);const m=BigInt(0),b={};function _(t,...e){let r=b[t];if(void 0===r){const e=(0,n.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));r=(0,c.concatBytes)(e,e),b[t]=r}return(0,n.sha256)((0,c.concatBytes)(r,...e))}const w=t=>t.toRawBytes(!0).slice(1),v=t=>(0,c.numberToBytesBE)(t,32),E=t=>(0,o.mod)(t,l),A=t=>(0,o.mod)(t,d),T=e.secp256k1.ProjectivePoint;function S(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t),n=T.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:A(-r),bytes:w(n)}}function I(t){(0,c.aInRange)("x",t,h,l);const e=E(t*t);let r=y(E(e*t+BigInt(7)));r%f!==m&&(r=E(-r));const n=new T(t,r,h);return n.assertValidity(),n}const k=c.bytesToNumberBE;function x(...t){return A(k(_("BIP0340/challenge",...t)))}function B(t,e,r){const n=(0,c.ensureBytes)("signature",t,64),i=(0,c.ensureBytes)("message",e),a=(0,c.ensureBytes)("publicKey",r,32);try{const t=I(k(a)),e=k(n.subarray(0,32));if(!(0,c.inRange)(e,h,l))return!1;const r=k(n.subarray(32,64));if(!(0,c.inRange)(r,h,d))return!1;const f=x(v(e),w(t),i),p=(s=t,o=r,u=A(-f),T.BASE.multiplyAndAddUnsafe(s,o,u));return!(!p||!p.hasEvenY()||p.toAffine().x!==e)}catch(t){return!1}var s,o,u}e.schnorr={getPublicKey:function(t){return S(t).bytes},sign:function(t,e,r=(0,i.randomBytes)(32)){const n=(0,c.ensureBytes)("message",t),{bytes:a,scalar:s}=S(e),o=(0,c.ensureBytes)("auxRand",r,32),u=v(s^k(_("BIP0340/aux",o))),l=_("BIP0340/nonce",u,a,n),d=A(k(l));if(d===m)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=S(d),p=x(h,a,n),y=new Uint8Array(64);if(y.set(h,0),y.set(v(A(f+p*s)),32),!B(y,n,a))throw new Error("sign: Invalid signature produced");return y},verify:B,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:w,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:_,mod:o.mod}};const C=(()=>(0,s.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))))(),R=(()=>(0,u.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),O=(()=>(0,s.createHasher)(e.secp256k1.ProjectivePoint,t=>{const{x:e,y:r}=R(g.create(t[0]));return C(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve},7202(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA512_IV=e.SHA384_IV=e.SHA224_IV=e.SHA256_IV=e.HashMD=void 0,e.setBigUint64=i,e.Chi=function(t,e,r){return t&e^~t&r},e.Maj=function(t,e,r){return t&e^t&r^e&r};const n=r(9175);function i(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}class a extends n.Hash{constructor(t,e,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=(0,n.createView)(this.buffer)}update(t){(0,n.aexists)(this),t=(0,n.toBytes)(t),(0,n.abytes)(t);const{view:e,buffer:r,blockLen:i}=this,a=t.length;for(let s=0;s<a;){const o=Math.min(i-this.pos,a-s);if(o===i){const e=(0,n.createView)(t);for(;i<=a-s;s+=i)this.process(e,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.aexists)(this),(0,n.aoutput)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:s}=this;let{pos:o}=this;e[o++]=128,(0,n.clean)(this.buffer.subarray(o)),this.padOffset>a-o&&(this.process(r,0),o=0);for(let t=o;t<a;t++)e[t]=0;i(r,a-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,n.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.destroyed=a,t.finished=i,t.length=n,t.pos=s,n%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}e.HashMD=a,e.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),e.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),e.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),e.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])},2318(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toBig=e.shrSL=e.shrSH=e.rotrSL=e.rotrSH=e.rotrBL=e.rotrBH=e.rotr32L=e.rotr32H=e.rotlSL=e.rotlSH=e.rotlBL=e.rotlBH=e.add5L=e.add5H=e.add4L=e.add4H=e.add3L=e.add3H=void 0,e.add=_,e.fromBig=i,e.split=a;const r=BigInt(2**32-1),n=BigInt(32);function i(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function a(t,e=!1){const r=t.length;let n=new Uint32Array(r),a=new Uint32Array(r);for(let s=0;s<r;s++){const{h:r,l:o}=i(t[s],e);[n[s],a[s]]=[r,o]}return[n,a]}const s=(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0);e.toBig=s;const o=(t,e,r)=>t>>>r;e.shrSH=o;const c=(t,e,r)=>t<<32-r|e>>>r;e.shrSL=c;const u=(t,e,r)=>t>>>r|e<<32-r;e.rotrSH=u;const l=(t,e,r)=>t<<32-r|e>>>r;e.rotrSL=l;const d=(t,e,r)=>t<<64-r|e>>>r-32;e.rotrBH=d;const h=(t,e,r)=>t>>>r-32|e<<64-r;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const y=(t,e,r)=>t<<r|e>>>32-r;e.rotlSH=y;const g=(t,e,r)=>e<<r|t>>>32-r;e.rotlSL=g;const m=(t,e,r)=>e<<r-32|t>>>64-r;e.rotlBH=m;const b=(t,e,r)=>t<<r-32|e>>>64-r;function _(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);e.add3L=w;const v=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;e.add3H=v;const E=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);e.add4L=E;const A=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);e.add5L=T;const S=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:a,toBig:s,shrSH:o,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:v,add4L:E,add4H:A,add5H:S,add5L:T};e.default=I},5145(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},7076(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha512_224=e.sha512_256=e.sha384=e.sha512=e.sha224=e.sha256=e.SHA512_256=e.SHA512_224=e.SHA384=e.SHA512=e.SHA224=e.SHA256=void 0;const n=r(7202),i=r(2318),a=r(9175),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array(64);class c extends n.HashMD{constructor(t=32){super(64,t,8,!1),this.A=0|n.SHA256_IV[0],this.B=0|n.SHA256_IV[1],this.C=0|n.SHA256_IV[2],this.D=0|n.SHA256_IV[3],this.E=0|n.SHA256_IV[4],this.F=0|n.SHA256_IV[5],this.G=0|n.SHA256_IV[6],this.H=0|n.SHA256_IV[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)o[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],r=o[t-2],n=(0,a.rotr)(e,7)^(0,a.rotr)(e,18)^e>>>3,i=(0,a.rotr)(r,17)^(0,a.rotr)(r,19)^r>>>10;o[t]=i+o[t-7]+n+o[t-16]|0}let{A:r,B:i,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,a.rotr)(l,6)^(0,a.rotr)(l,11)^(0,a.rotr)(l,25))+(0,n.Chi)(l,d,h)+s[t]+o[t]|0,p=((0,a.rotr)(r,2)^(0,a.rotr)(r,13)^(0,a.rotr)(r,22))+(0,n.Maj)(r,i,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=i,i=r,r=e+p|0}r=r+this.A|0,i=i+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,i,c,u,l,d,h,f)}roundClean(){(0,a.clean)(o)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,a.clean)(this.buffer)}}e.SHA256=c;class u extends c{constructor(){super(28),this.A=0|n.SHA224_IV[0],this.B=0|n.SHA224_IV[1],this.C=0|n.SHA224_IV[2],this.D=0|n.SHA224_IV[3],this.E=0|n.SHA224_IV[4],this.F=0|n.SHA224_IV[5],this.G=0|n.SHA224_IV[6],this.H=0|n.SHA224_IV[7]}}e.SHA224=u;const l=(()=>i.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),d=(()=>l[0])(),h=(()=>l[1])(),f=new Uint32Array(80),p=new Uint32Array(80);class y extends n.HashMD{constructor(t=64){super(128,t,16,!1),this.Ah=0|n.SHA512_IV[0],this.Al=0|n.SHA512_IV[1],this.Bh=0|n.SHA512_IV[2],this.Bl=0|n.SHA512_IV[3],this.Ch=0|n.SHA512_IV[4],this.Cl=0|n.SHA512_IV[5],this.Dh=0|n.SHA512_IV[6],this.Dl=0|n.SHA512_IV[7],this.Eh=0|n.SHA512_IV[8],this.El=0|n.SHA512_IV[9],this.Fh=0|n.SHA512_IV[10],this.Fl=0|n.SHA512_IV[11],this.Gh=0|n.SHA512_IV[12],this.Gl=0|n.SHA512_IV[13],this.Hh=0|n.SHA512_IV[14],this.Hl=0|n.SHA512_IV[15]}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:a,Dh:s,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:y}=this;return[t,e,r,n,i,a,s,o,c,u,l,d,h,f,p,y]}set(t,e,r,n,i,a,s,o,c,u,l,d,h,f,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|a,this.Dh=0|s,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let r=0;r<16;r++,e+=4)f[r]=t.getUint32(e),p[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|f[t-15],r=0|p[t-15],n=i.rotrSH(e,r,1)^i.rotrSH(e,r,8)^i.shrSH(e,r,7),a=i.rotrSL(e,r,1)^i.rotrSL(e,r,8)^i.shrSL(e,r,7),s=0|f[t-2],o=0|p[t-2],c=i.rotrSH(s,o,19)^i.rotrBH(s,o,61)^i.shrSH(s,o,6),u=i.rotrSL(s,o,19)^i.rotrBL(s,o,61)^i.shrSL(s,o,6),l=i.add4L(a,u,p[t-7],p[t-16]),d=i.add4H(l,n,c,f[t-7],f[t-16]);f[t]=0|d,p[t]=0|l}let{Ah:r,Al:n,Bh:a,Bl:s,Ch:o,Cl:c,Dh:u,Dl:l,Eh:y,El:g,Fh:m,Fl:b,Gh:_,Gl:w,Hh:v,Hl:E}=this;for(let t=0;t<80;t++){const e=i.rotrSH(y,g,14)^i.rotrSH(y,g,18)^i.rotrBH(y,g,41),A=i.rotrSL(y,g,14)^i.rotrSL(y,g,18)^i.rotrBL(y,g,41),T=y&m^~y&_,S=g&b^~g&w,I=i.add5L(E,A,S,h[t],p[t]),k=i.add5H(I,v,e,T,d[t],f[t]),x=0|I,B=i.rotrSH(r,n,28)^i.rotrBH(r,n,34)^i.rotrBH(r,n,39),C=i.rotrSL(r,n,28)^i.rotrBL(r,n,34)^i.rotrBL(r,n,39),R=r&a^r&o^a&o,O=n&s^n&c^s&c;v=0|_,E=0|w,_=0|m,w=0|b,m=0|y,b=0|g,({h:y,l:g}=i.add(0|u,0|l,0|k,0|x)),u=0|o,l=0|c,o=0|a,c=0|s,a=0|r,s=0|n;const N=i.add3L(x,C,O);r=i.add3H(N,k,B,R),n=0|N}({h:r,l:n}=i.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:a,l:s}=i.add(0|this.Bh,0|this.Bl,0|a,0|s)),({h:o,l:c}=i.add(0|this.Ch,0|this.Cl,0|o,0|c)),({h:u,l}=i.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:y,l:g}=i.add(0|this.Eh,0|this.El,0|y,0|g)),({h:m,l:b}=i.add(0|this.Fh,0|this.Fl,0|m,0|b)),({h:_,l:w}=i.add(0|this.Gh,0|this.Gl,0|_,0|w)),({h:v,l:E}=i.add(0|this.Hh,0|this.Hl,0|v,0|E)),this.set(r,n,a,s,o,c,u,l,y,g,m,b,_,w,v,E)}roundClean(){(0,a.clean)(f,p)}destroy(){(0,a.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}e.SHA512=y;class g extends y{constructor(){super(48),this.Ah=0|n.SHA384_IV[0],this.Al=0|n.SHA384_IV[1],this.Bh=0|n.SHA384_IV[2],this.Bl=0|n.SHA384_IV[3],this.Ch=0|n.SHA384_IV[4],this.Cl=0|n.SHA384_IV[5],this.Dh=0|n.SHA384_IV[6],this.Dl=0|n.SHA384_IV[7],this.Eh=0|n.SHA384_IV[8],this.El=0|n.SHA384_IV[9],this.Fh=0|n.SHA384_IV[10],this.Fl=0|n.SHA384_IV[11],this.Gh=0|n.SHA384_IV[12],this.Gl=0|n.SHA384_IV[13],this.Hh=0|n.SHA384_IV[14],this.Hl=0|n.SHA384_IV[15]}}e.SHA384=g;const m=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),b=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class _ extends y{constructor(){super(28),this.Ah=0|m[0],this.Al=0|m[1],this.Bh=0|m[2],this.Bl=0|m[3],this.Ch=0|m[4],this.Cl=0|m[5],this.Dh=0|m[6],this.Dl=0|m[7],this.Eh=0|m[8],this.El=0|m[9],this.Fh=0|m[10],this.Fl=0|m[11],this.Gh=0|m[12],this.Gl=0|m[13],this.Hh=0|m[14],this.Hl=0|m[15]}}e.SHA512_224=_;class w extends y{constructor(){super(32),this.Ah=0|b[0],this.Al=0|b[1],this.Bh=0|b[2],this.Bl=0|b[3],this.Ch=0|b[4],this.Cl=0|b[5],this.Dh=0|b[6],this.Dl=0|b[7],this.Eh=0|b[8],this.El=0|b[9],this.Fh=0|b[10],this.Fl=0|b[11],this.Gh=0|b[12],this.Gl=0|b[13],this.Hh=0|b[14],this.Hl=0|b[15]}}e.SHA512_256=w,e.sha256=(0,a.createHasher)(()=>new c),e.sha224=(0,a.createHasher)(()=>new u),e.sha512=(0,a.createHasher)(()=>new y),e.sha384=(0,a.createHasher)(()=>new g),e.sha512_256=(0,a.createHasher)(()=>new w),e.sha512_224=(0,a.createHasher)(()=>new _)},9175(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=i,e.anumber=a,e.abytes=s,e.ahash=function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");a(t.outputLen),a(t.blockLen)},e.aexists=function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(t,e){s(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.clean=function(...t){for(let e=0;e<t.length;e++)t[e].fill(0)},e.createView=function(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)},e.rotr=function(t,e){return t<<32-e|t>>>e},e.rotl=function(t,e){return t<<e|t>>>32-e>>>0},e.byteSwap=o,e.byteSwap32=c,e.bytesToHex=function(t){if(s(t),u)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=l[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(u)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=d(t.charCodeAt(i)),a=d(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let a=0;a<t;a++){n(a);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=h,e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.toBytes=f,e.kdfInputToBytes=function(t){return"string"==typeof t&&(t=h(t)),s(t),t},e.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];s(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("options should be object or undefined");return Object.assign(t,e)},e.createHasher=p,e.createOptHasher=y,e.createXOFer=g,e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")};const n=r(5145);function i(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function a(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s(t,...e){if(!i(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function o(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function c(t){for(let e=0;e<t.length;e++)t[e]=o(t[e]);return t}e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.swap8IfBE=e.isLE?t=>t:t=>o(t),e.byteSwapIfBE=e.swap8IfBE,e.swap32IfBE=e.isLE?t=>t:c;const u=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),l=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function d(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function h(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function f(t){return"string"==typeof t&&(t=h(t)),s(t),t}function p(t){const e=e=>t().update(f(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function y(t){const e=(e,r)=>t(r).update(f(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}function g(t){const e=(e,r)=>t(r).update(f(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}e.nextTick=async()=>{},e.Hash=class{},e.wrapConstructor=p,e.wrapConstructorWithOpts=y,e.wrapXOFConstructorWithOpts=g},3203(t,e){"use strict";function r(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function n(t,...e){if(!r(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function a(t){if("function"!=typeof t)throw new Error("function expected");return!0}function s(t,e){if("string"!=typeof e)throw new Error(\`\${t}: string expected\`);return!0}function o(t){if(!Number.isSafeInteger(t))throw new Error(\`invalid integer: \${t}\`)}function c(t){if(!Array.isArray(t))throw new Error("array expected")}function u(t,e){if(!i(!0,e))throw new Error(\`\${t}: array of strings expected\`)}function l(t,e){if(!i(!1,e))throw new Error(\`\${t}: array of numbers expected\`)}function d(...t){const e=t=>t,r=(t,e)=>r=>t(e(r));return{encode:t.map(t=>t.encode).reduceRight(r,e),decode:t.map(t=>t.decode).reduce(r,e)}}function h(t){const e="string"==typeof t?t.split(""):t,r=e.length;u("alphabet",e);const n=new Map(e.map((t,e)=>[t,e]));return{encode:n=>(c(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(\`alphabet.encode: digit index outside alphabet "\${n}". Allowed: \${t}\`);return e[n]})),decode:e=>(c(e),e.map(e=>{s("alphabet.decode",e);const r=n.get(e);if(void 0===r)throw new Error(\`Unknown letter: "\${e}". Allowed: \${t}\`);return r}))}}function f(t=""){return s("join",t),{encode:e=>(u("join.decode",e),e.join(t)),decode:e=>(s("join.decode",e),e.split(t))}}function p(t,e="="){return o(t),s("padding",e),{encode(r){for(u("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){u("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function y(t){return a(t),{encode:t=>t,decode:e=>t(e)}}function g(t,e,r){if(e<2)throw new Error(\`convertRadix: invalid from=\${e}, base cannot be less than 2\`);if(r<2)throw new Error(\`convertRadix: invalid to=\${r}, base cannot be less than 2\`);if(c(t),!t.length)return[];let n=0;const i=[],a=Array.from(t,t=>{if(o(t),t<0||t>=e)throw new Error(\`invalid integer: \${t}\`);return t}),s=a.length;for(;;){let t=0,o=!0;for(let i=n;i<s;i++){const s=a[i],c=e*t,u=c+s;if(!Number.isSafeInteger(u)||c/e!==t||u-s!==c)throw new Error("convertRadix: carry overflow");const l=u/r;t=u%r;const d=Math.floor(l);if(a[i]=d,!Number.isSafeInteger(d)||d*r+t!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0;const m=(t,e)=>0===e?t:m(e,t%e),b=(t,e)=>t+(e-m(t,e)),_=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function w(t,e,r,n){if(c(t),e<=0||e>32)throw new Error(\`convertRadix2: wrong from=\${e}\`);if(r<=0||r>32)throw new Error(\`convertRadix2: wrong to=\${r}\`);if(b(e,r)>32)throw new Error(\`convertRadix2: carry overflow from=\${e} to=\${r} carryBits=\${b(e,r)}\`);let i=0,a=0;const s=_[e],u=_[r]-1,l=[];for(const n of t){if(o(n),n>=s)throw new Error(\`convertRadix2: invalid data word=\${n} from=\${e}\`);if(i=i<<e|n,a+e>32)throw new Error(\`convertRadix2: carry overflow pos=\${a} from=\${e}\`);for(a+=e;a>=r;a-=r)l.push((i>>a-r&u)>>>0);const t=_[a];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<r-a&u,!n&&a>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(\`Non-zero padding: \${i}\`);return n&&a>0&&l.push(i>>>0),l}function v(t){return o(t),{encode:e=>{if(!r(e))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(e),256,t)},decode:e=>(l("radix.decode",e),Uint8Array.from(g(e,t,256)))}}function E(t,e=!1){if(o(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,t)>32||b(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return w(Array.from(n),8,t,!e)},decode:r=>(l("radix2.decode",r),Uint8Array.from(w(r,t,8,e)))}}function A(t){return a(t),function(...e){try{return t.apply(null,e)}catch(t){}}}function T(t,e){return o(t),a(e),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const i=e(n).slice(0,t),a=new Uint8Array(n.length+t);return a.set(n),a.set(i,n.length),a},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const i=n.slice(0,-t),a=n.slice(-t),s=e(i).slice(0,t);for(let e=0;e<t;e++)if(s[e]!==a[e])throw new Error("Invalid checksum");return i}}}e.utils={alphabet:h,chain:d,checksum:T,convertRadix:g,convertRadix2:w,radix:v,radix2:E,join:f,padding:p},e.base16=d(E(4),h("0123456789ABCDEF"),f("")),e.base32=d(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),e.base32nopad=d(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),e.base32hex=d(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),e.base32hexnopad=d(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),e.base32crockford=d(E(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),y(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const S=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)();e.base64=S?{encode:t=>(n(t),t.toBase64()),decode:t=>(s("base64",t),Uint8Array.fromBase64(t,{lastChunkHandling:"strict"}))}:d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),e.base64nopad=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),e.base64url=S?{encode:t=>(n(t),t.toBase64({alphabet:"base64url"})),decode:t=>(s("base64",t),Uint8Array.fromBase64(t,{alphabet:"base64url"}))}:d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),e.base64urlnopad=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));const I=t=>d(v(58),h(t),f(""));e.base58=I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=I("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=I("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const k=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let r="";for(let n=0;n<t.length;n+=8){const i=t.subarray(n,n+8);r+=e.base58.encode(i).padStart(k[i.length],"1")}return r},decode(t){let r=[];for(let n=0;n<t.length;n+=11){const i=t.slice(n,n+11),a=k.indexOf(i.length),s=e.base58.decode(i);for(let t=0;t<s.length-a;t++)if(0!==s[t])throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-a)))}return Uint8Array.from(r)}},e.createBase58check=t=>d(T(4,e=>t(t(e))),e.base58),e.base58check=e.createBase58check;const x=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),B=[996825010,642813549,513874426,1027748829,705979059];function C(t){const e=t>>25;let r=(33554431&t)<<5;for(let t=0;t<B.length;t++)1==(e>>t&1)&&(r^=B[t]);return r}function R(t,e,r=1){const n=t.length;let i=1;for(let e=0;e<n;e++){const r=t.charCodeAt(e);if(r<33||r>126)throw new Error(\`Invalid prefix (\${t})\`);i=C(i)^r>>5}i=C(i);for(let e=0;e<n;e++)i=C(i)^31&t.charCodeAt(e);for(let t of e)i=C(i)^t;for(let t=0;t<6;t++)i=C(i);return i^=r,x.encode(w([i%_[30]],30,5,!1))}function O(t){const e="bech32"===t?1:734539939,n=E(5),i=n.decode,a=n.encode,o=A(i);function c(t,n,i=90){s("bech32.encode prefix",t),r(n)&&(n=Array.from(n)),l("bech32.encode",n);const a=t.length;if(0===a)throw new TypeError(\`Invalid prefix length \${a}\`);const o=a+7+n.length;if(!1!==i&&o>i)throw new TypeError(\`Length \${o} exceeds limit \${i}\`);const c=t.toLowerCase(),u=R(c,n,e);return\`\${c}1\${x.encode(n)}\${u}\`}function u(t,r=90){s("bech32.decode input",t);const n=t.length;if(n<8||!1!==r&&n>r)throw new TypeError(\`invalid string length: \${n} (\${t}). Expected (8..\${r})\`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const a=i.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,a),c=i.slice(a+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=x.decode(c).slice(0,-6),l=R(o,u,e);if(!c.endsWith(l))throw new Error(\`Invalid checksum in \${t}: expected "\${l}"\`);return{prefix:o,words:u}}return{encode:c,decode:u,encodeFromBytes:function(t,e){return c(t,a(e))},decodeToBytes:function(t){const{prefix:e,words:r}=u(t,!1);return{prefix:e,words:r,bytes:i(r)}},decodeUnsafe:A(u),fromWords:i,fromWordsUnsafe:o,toWords:a}}e.bech32=O("bech32"),e.bech32m=O("bech32m"),e.utf8={encode:t=>(new TextDecoder).decode(t),decode:t=>(new TextEncoder).encode(t)};const N=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),D={encode:t=>(n(t),t.toHex()),decode:t=>(s("hex",t),Uint8Array.fromHex(t))};e.hex=N?D:d(E(4),h("0123456789abcdef"),f(""),y(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(\`hex.decode: expected string, got \${typeof t} with length \${t.length}\`);return t.toLowerCase()}));const P={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},L="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";e.bytesToString=(t,e)=>{if("string"!=typeof t||!P.hasOwnProperty(t))throw new TypeError(L);if(!r(e))throw new TypeError("bytesToString() expects Uint8Array");return P[t].encode(e)},e.str=e.bytesToString,e.stringToBytes=(t,e)=>{if(!P.hasOwnProperty(t))throw new TypeError(L);if("string"!=typeof e)throw new TypeError("stringToBytes() expects string");return P[t].decode(e)},e.bytes=e.stringToBytes},4246(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.poseidonSmall=e.Fp251=e.keccak=e.computeHashOnElements=e.utils=e.Signature=e.ProjectivePoint=e.CURVE=e._starkCurve=e.MAX_VALUE=void 0,e.normalizePrivateKey=g,e.getPublicKey=m,e.getSharedSecret=function(t,e){return p.getSharedSecret(g(t),e)},e.sign=function(t,e,r){const n=p.sign(_(t),g(e),r);return b(n),n},e.verify=function(t,e,r){if(!(t instanceof E)){const e=y(t);try{t=E.fromDER(e)}catch(r){if(!(r instanceof c.DER.Err))throw r;t=E.fromCompact(e)}}return b(t),p.verify(t,_(e),y(r))},e.grindKey=I,e.getStarkKey=function(t){return T(m(t,!0))},e.ethSigToPrivate=function(t){if(130!==(t=S(t)).length)throw new Error("Wrong ethereum signature");return I(t.substring(0,64))},e.getAccountPath=function(t,e,r,n){const i=k(P(t)),a=k(P(e)),s=u.hexToNumber(S(r));return\`m/2645'/\${i}'/\${a}'/\${k(s)}'/\${k(s>>31n)}'/\${n}\`},e.pedersen=N,e._poseidonMDS=U,e.poseidonBasic=V,e.poseidonCreate=function(t,e=0){const r=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(\`Wrong mdsAttempt=\${e}\`);return V(t,U(t.Fp,"HadesMDS",r,e))},e.poseidonHash=H,e.poseidonHashFunc=function(t,r,n=e.poseidonSmall){return u.numberToVarBytesBE(H(u.bytesToNumberBE(t),u.bytesToNumberBE(r),n))},e.poseidonHashSingle=function(t,r=e.poseidonSmall){return r([t,0n,1n])[0]},e.poseidonHashMany=function(t,r=e.poseidonSmall){const{m:n,rate:i}=r;if(!Array.isArray(t))throw new Error("bigint array expected in values");const a=Array.from(t);for(a.push(1n);a.length%i!==0;)a.push(0n);let s=new Array(n).fill(0n);for(let t=0;t<a.length;t+=i){for(let e=0;e<i;e++){const r=a[t+e];if(void 0===r)throw new Error("invalid index");if(void 0===s[e])throw new Error("state[j] is undefined");s[e]=s[e]+r}s=r(s)}return s[0]};const n=r(7240),i=r(8112),a=r(4762),s=r(4967),o=r(5920),c=r(1705),u=r(1484),l=r(3562),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,r=u.bytesToNumberBE(t);return e>0?r>>BigInt(e):r}function f(t){return"string"==typeof t&&1&(t=S(t)).length&&(t="0"+t),u.hexToBytes(t)}e.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");const p=(0,c.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,s.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,l.getHash)(i.sha256),bits2int:h,bits2int_modN:t=>{const e=u.bytesToNumberBE(t).toString(16);return 63===e.length&&(t=f(e+"0")),(0,s.mod)(h(t),d)}});function y(t){return u.ensureBytes("","string"==typeof t?f(t):t)}function g(t){return u.bytesToHex(y(t)).padStart(64,"0")}function m(t,e=!1){return p.getPublicKey(g(t),e)}function b(t){const{r,s:n}=t;if(r<0n||r>=e.MAX_VALUE)throw new Error(\`Signature.r should be [1, \${e.MAX_VALUE})\`);const i=(0,s.invert)(n,d);if(i<0n||i>=e.MAX_VALUE)throw new Error(\`inv(Signature.s) should be [1, \${e.MAX_VALUE})\`)}function _(t){const r=y(t);if(u.bytesToNumberBE(r)>=e.MAX_VALUE)throw new Error(\`msgHash should be [0, \${e.MAX_VALUE})\`);return r}e._starkCurve=p;const{CURVE:w,ProjectivePoint:v,Signature:E,utils:A}=p;function T(t){return\`0x\${u.bytesToHex(t.subarray(1)).replace(/^0+/gm,"")}\`}function S(t){return t.replace(/^0x/i,"")}function I(t){const e=y(t),r=2n**256n,n=r-(0,s.mod)(r,d);for(let t=0;;t++){const r=P(u.concatBytes(e,u.numberToVarBytesBE(BigInt(t))));if(r<n)return(0,s.mod)(r,d).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}e.CURVE=w,e.ProjectivePoint=v,e.Signature=E,e.utils=A;const k=t=>Number(2147483647n&t),x=[new v(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new v(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new v(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new v(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new v(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function B(t,e){const r=[];let n=t;for(let t=0;t<248;t++)r.push(n),n=n.double();n=e;for(let t=0;t<4;t++)r.push(n),n=n.double();return r}const C=B(x[1],x[2]),R=B(x[3],x[4]);function O(t,e,r){let n=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(\`Invalid pedersenArg: \${t}\`);e=BigInt(t)}else e=u.bytesToNumberBE(y(t));if(!(0n<=e&&e<p.CURVE.Fp.ORDER))throw new Error(\`PedersenArg should be 0 <= value < CURVE.P: \${e}\`);return e}(e);for(let e=0;e<252;e++){const i=r[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&n)&&(t=t.add(i)),n>>=1n}return t}function N(t,e){let r=x[0];return r=O(r,t,C),r=O(r,e,R),T(r.toRawBytes(!0))}e.computeHashOnElements=(t,e=N)=>[0,...t,t.length].reduce((t,r)=>e(t,r));const D=u.bitMask(250);e.keccak=t=>u.bytesToNumberBE((0,n.keccak_256)(t))&D;const P=t=>u.bytesToNumberBE((0,i.sha256)(t));function L(t,e,r){const n=t.fromBytes((0,i.sha256)((0,a.utf8ToBytes)(\`\${e}\${r}\`)));return t.create(n)}function U(t,e,r,n=0){const i=[],a=[];for(let s=0;s<r;s++)i.push(L(t,\`\${e}x\`,n*r+s)),a.push(L(t,\`\${e}y\`,n*r+s));if(new Set([...i,...a]).size!==2*r)throw new Error("X and Y values are not distinct");return i.map(e=>a.map(r=>t.inv(t.sub(e,r))))}e.Fp251=(0,s.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));const F=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function V(t,e){if((0,s.validateField)(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(\`Wrong poseidon opts: \${t}\`);const r=t.rate+t.capacity,n=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<n;e++){const n=[];for(let i=0;i<r;i++)n.push(L(t.Fp,"Hades",r*e+i));i.push(n)}const a=(0,o.poseidon)({...t,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return a.m=r,a.rate=t.rate,a.capacity=t.capacity,a}function H(t,r,n=e.poseidonSmall){return n([t,r,2n])[0]}e.poseidonSmall=V({Fp:e.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},F)},788(t,e){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function n(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){n(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(e,"__esModule",{value:!0}),e.anumber=r,e.number=r,e.abytes=n,e.bytes=n,e.ahash=i,e.aexists=a,e.aoutput=s;const o={number:r,bytes:n,hash:i,exists:a,output:s};e.default=o},3487(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HashMD=e.Maj=e.Chi=void 0;const n=r(788),i=r(4762);e.Chi=(t,e,r)=>t&e^~t&r,e.Maj=(t,e,r)=>t&e^t&r^e&r;class a extends i.Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){(0,n.aexists)(this);const{view:e,buffer:r,blockLen:a}=this,s=(t=(0,i.toBytes)(t)).length;for(let n=0;n<s;){const o=Math.min(a-this.pos,s-n);if(o===a){const e=(0,i.createView)(t);for(;a<=s-n;n+=a)this.process(e,n);continue}r.set(t.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.aexists)(this),(0,n.aoutput)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(r,0),o=0);for(let t=o;t<a;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,a-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.createView)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}e.HashMD=a},1529(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add5L=e.add5H=e.add4H=e.add4L=e.add3H=e.add3L=e.rotlBL=e.rotlBH=e.rotlSL=e.rotlSH=e.rotr32L=e.rotr32H=e.rotrBL=e.rotrBH=e.rotrSL=e.rotrSH=e.shrSL=e.shrSH=e.toBig=void 0,e.fromBig=i,e.split=a,e.add=_;const r=BigInt(2**32-1),n=BigInt(32);function i(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function a(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:s,l:o}=i(t[a],e);[r[a],n[a]]=[s,o]}return[r,n]}const s=(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0);e.toBig=s;const o=(t,e,r)=>t>>>r;e.shrSH=o;const c=(t,e,r)=>t<<32-r|e>>>r;e.shrSL=c;const u=(t,e,r)=>t>>>r|e<<32-r;e.rotrSH=u;const l=(t,e,r)=>t<<32-r|e>>>r;e.rotrSL=l;const d=(t,e,r)=>t<<64-r|e>>>r-32;e.rotrBH=d;const h=(t,e,r)=>t>>>r-32|e<<64-r;e.rotrBL=h;const f=(t,e)=>e;e.rotr32H=f;const p=(t,e)=>t;e.rotr32L=p;const y=(t,e,r)=>t<<r|e>>>32-r;e.rotlSH=y;const g=(t,e,r)=>e<<r|t>>>32-r;e.rotlSL=g;const m=(t,e,r)=>e<<r-32|t>>>64-r;e.rotlBH=m;const b=(t,e,r)=>t<<r-32|e>>>64-r;function _(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}}e.rotlBL=b;const w=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);e.add3L=w;const v=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;e.add3H=v;const E=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);e.add4L=E;const A=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;e.add4H=A;const T=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);e.add5L=T;const S=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0;e.add5H=S;const I={fromBig:i,split:a,toBig:s,shrSH:o,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:b,add:_,add3L:w,add3H:v,add4L:E,add4H:A,add5H:S,add5L:T};e.default=I},1238(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},8112(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=e.SHA256=void 0;const n=r(3487),i=r(4762),a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)o[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=o[t-15],r=o[t-2],n=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,a=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;o[t]=a+o[t-7]+n+o[t-16]|0}let{A:r,B:s,C:c,D:u,E:l,F:d,G:h,H:f}=this;for(let t=0;t<64;t++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,n.Chi)(l,d,h)+a[t]+o[t]|0,p=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+(0,n.Maj)(r,s,c)|0;f=h,h=d,d=l,l=u+e|0,u=c,c=s,s=r,r=e+p|0}r=r+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,c,u,l,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new c),e.sha224=(0,i.wrapConstructor)(()=>new u)},7240(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=void 0,e.keccakP=_;const n=r(788),i=r(1529),a=r(4762),s=[],o=[],c=[],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=l,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),o.push((t+1)*(t+2)/2%64);let i=u;for(let t=0;t<7;t++)e=(e<<l^(e>>h)*p)%f,e&d&&(i^=l<<(l<<BigInt(t))-l);c.push(i)}const[y,g]=(0,i.split)(c,!0),m=(t,e,r)=>r>32?(0,i.rotlBH)(t,e,r):(0,i.rotlSH)(t,e,r),b=(t,e,r)=>r>32?(0,i.rotlBL)(t,e,r):(0,i.rotlSL)(t,e,r);function _(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,a=r[i],s=r[i+1],o=m(a,s,1)^r[n],c=b(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=o[r],a=m(e,i,n),c=b(e,i,n),u=s[r];e=t[u],i=t[u+1],t[u]=a,t[u+1]=c}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=y[n],t[1]^=g[n]}r.fill(0)}class w extends a.Hash{constructor(t,e,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,a.u32)(this.state)}keccak(){a.isLE||(0,a.byteSwap32)(this.state32),_(this.state32,this.rounds),a.isLE||(0,a.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,n.aexists)(this);const{blockLen:e,state:r}=this,i=(t=(0,a.toBytes)(t)).length;for(let n=0;n<i;){const a=Math.min(e-this.pos,i-n);for(let e=0;e<a;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){(0,n.aexists)(this,!1),(0,n.abytes)(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,n.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,n.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return t||(t=new w(e,r,n,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}e.Keccak=w;const v=(t,e,r)=>(0,a.wrapConstructor)(()=>new w(e,t,r));e.sha3_224=v(6,144,28),e.sha3_256=v(6,136,32),e.sha3_384=v(6,104,48),e.sha3_512=v(6,72,64),e.keccak_224=v(1,144,28),e.keccak_256=v(1,136,32),e.keccak_384=v(1,104,48),e.keccak_512=v(1,72,64);const E=(t,e,r)=>(0,a.wrapXOFConstructorWithOpts)((n={})=>new w(e,t,void 0===n.dkLen?r:n.dkLen,!0));e.shake128=E(31,168,16),e.shake256=E(31,136,32)},4762(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name},e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])},e.bytesToHex=function(t){(0,i.abytes)(t);let e="";for(let r=0;r<t.length;r++)e+=a[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=s(t.charCodeAt(i)),a=s(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let a=0;a<t;a++){n(a);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=o,e.toBytes=c,e.concatBytes=function(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];(0,i.abytes)(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!=={}.toString.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(c(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")};const n=r(1238),i=r(788);e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.rotl=(t,e)=>t<<e|t>>>32-e>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,e.byteSwapIfBE=e.isLE?t=>t:t=>(0,e.byteSwap)(t);const a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function s(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function o(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function c(t){return"string"==typeof t&&(t=o(t)),(0,i.abytes)(t),t}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}}},2828(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CURVE_ORDER=void 0;var n=r(4246);e.CURVE_ORDER=n.CURVE.n},2747(t,e){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return e=d(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],d(t).constructor):e.apply(t,n))}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(u())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&l(i,r.prototype),i}(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)},c(t)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(u=function(){return!!t})()}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function h(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.LengthMismatchError=e.PreconditionError=e.OutOfRangeError=e.InvalidInputError=e.ProtocolError=void 0;var p=function(t){function e(t,r){var n;return a(this,e),h(n=s(this,e,[t]),"errorCode",void 0),n.errorCode=r,n.name=n.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return o(e,t),i(e)}(c(Error));e.ProtocolError=p;var y=function(t){function e(t){return a(this,e),s(this,e,[t,"INVALID_INPUT"])}return o(e,t),i(e)}(p);e.InvalidInputError=y;var g=function(t){function e(t,r,n){var i;return a(this,e),h(i=s(this,e,[t,"OUT_OF_RANGE"]),"value",void 0),h(i,"range",void 0),i.value=r,i.range=n,i}return o(e,t),i(e)}(p);e.OutOfRangeError=g;var m=function(t){function e(t){return a(this,e),s(this,e,[t,"PRECONDITION_FAILED"])}return o(e,t),i(e)}(p);e.PreconditionError=m;var b=function(t){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arrays";return a(this,e),s(this,e,["Length mismatch: expected ".concat(t," but got ").concat(r," for ").concat(n)])}return o(e,t),i(e)}(y);e.LengthMismatchError=b},6885(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(2828),e),i(r(5900),e),i(r(4288),e),i(r(2747),e)},5356(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),s=0;s<r.length;s++)"default"!==r[s]&&i(e,t,r[s]);return a(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.SameEncryptUnknownRandom=e.SameEncrypt=e.ElGamal=e.range=e.bit=e.poeN=e.poe2=e.poe=void 0,e.poe=s(r(8431)),e.poe2=s(r(6313)),e.poeN=s(r(2362)),e.bit=s(r(8368)),e.range=s(r(8678)),e.ElGamal=s(r(5602)),e.SameEncrypt=s(r(2528)),e.SameEncryptUnknownRandom=s(r(1979))},5602(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return s(t.L,t.R,t.g1,t.g2,e.AL,e.AR,e.c,e.sb,e.sr)},e.verify_with_prefix=function(t,e){var r=t.L,i=t.R,a=t.g1,o=t.g2,c=e.AL,u=e.AR,l=e.prefix,d=e.sb,h=e.sr,f=[c,u];return s(r,i,a,o,c,u,(0,n.compute_challenge)(l,f),d,h)},e._verify=s,e.prove=function(t,e,r,i,a){var s=r.multiply(t).add(i.multiplyUnsafe(e)),o=r.multiplyUnsafe(e),c=(0,n.generateRandom)(),u=(0,n.generateRandom)(),l=r.multiply(c).add(i.multiply(u)),d=r.multiply(u),h=(0,n.compute_challenge)(a,[l,d]),f=(0,n.compute_s)(u,e,h);return{inputs:{L:s,R:o,g1:r,g2:i},proof:{AL:l,AR:d,sb:(0,n.compute_s)(c,t,h),sr:f,prefix:a}}};var n=r(4288),i=r(8431),a=r(6313);function s(t,e,r,n,s,o,c,u,l){return!!(0,i._verify)(e,r,o,c,l)&&!!(0,a._verify)(t,r,n,s,c,u,l)}},8368(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return a(t.V,t.g1,t.g2,e.A0,e.A1,e.c,e.c0,e.s0,e.s1)},e.verify_with_prefix=function(t,e){var r=t.V,i=t.g1,s=t.g2,o=e.A0,c=e.A1,u=e.prefix,l=e.c0,d=e.s0,h=e.s1,f=[r,o,c];return a(r,i,s,o,c,(0,n.compute_challenge)(u,f),l,d,h)},e._verify=a,e.prove=function(t,e,r,i,a){return 0===t?function(t,e,r,i){var a=r.multiplyUnsafe(t),o={V:a,g1:e,g2:r},c=s(a.subtract(e),r),u=c.A,l=c.c,d=c.s,h=(0,n.generateRandom)(),f=r.multiply(h),p=[a,f,u],y=(0,n.compute_challenge)(i,p),g=(0,n.subtract_modulo_curve_order)(y,l);return{inputs:o,proof:{A0:f,A1:u,prefix:i,c0:g,s0:(0,n.compute_s)(h,t,g),s1:d}}}(e,r,i,a):function(t,e,r,i){var a=e.add(r.multiplyUnsafe(t)),o={V:a,g1:e,g2:r},c=s(a,r),u=c.A,l=c.c,d=c.s,h=(0,n.generateRandom)(),f=r.multiply(h),p=[a,u,f],y=(0,n.compute_challenge)(i,p),g=(0,n.subtract_modulo_curve_order)(y,l);return{inputs:o,proof:{A0:u,A1:f,prefix:i,c0:l,s0:d,s1:(0,n.compute_s)(h,t,g)}}}(e,r,i,a)};var n=r(4288),i=r(8431);function a(t,e,r,a,s,o,c,u,l){if(!(0,n.validate_challenge)(o))throw new Error("invalid challenge");var d=(0,n.subtract_modulo_curve_order)(o,c);if(!(0,i._verify)(t,r,a,c,u))return!1;var h=t.subtract(e);return!!(0,i._verify)(h,r,s,d,l)}function s(t,e){var r=(0,n.generateRandom)(),i=(0,n.generateRandom)();return{A:e.multiplyUnsafe(r).subtract(t.multiplyUnsafe(i)),c:i,s:r}}},8431(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return i(t.y,t.g,e.A,e.c,e.s)},e.verify_with_prefix=function(t,e){var r=t.y,a=t.g,s=e.A,o=e.prefix,c=e.s,u=[s];return i(r,a,s,(0,n.compute_challenge)(o,u),c)},e._verify=i,e.prove=function(t,e,r){var i={y:e.multiply(t),g:e},a=(0,n.generateRandom)(),s=e.multiplyUnsafe(a),o=(0,n.compute_challenge)(r,[s]);return{inputs:i,proof:{A:s,s:(0,n.compute_s)(a,t,o),prefix:r}}};var n=r(4288);function i(t,e,r,i,a){if(!(0,n.in_curve_order)(a))throw new Error(" s not in curve order");if(!(0,n.validate_challenge)(i))throw new Error("invalid challenge");var s=e.multiplyUnsafe(a),o=r.add(t.multiplyUnsafe(i));return s.equals(o)}},6313(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return i(t.y,t.g1,t.g2,e.A,e.c,e.s1,e.s2)},e.verify_with_prefix=function(t,e){var r=t.y,a=t.g1,s=t.g2,o=e.A,c=e.prefix,u=e.s1,l=e.s2,d=[o];return i(r,a,s,o,(0,n.compute_challenge)(c,d),u,l)},e._verify=i,e.prove=function(t,e,r,i,a){var s={y:r.multiply(t).add(i.multiply(e)),g1:r,g2:i},o=(0,n.generateRandom)(),c=(0,n.generateRandom)(),u=r.multiplyUnsafe(o).add(i.multiplyUnsafe(c)),l=(0,n.compute_challenge)(a,[u]);return{inputs:s,proof:{A:u,prefix:a,s1:(0,n.compute_s)(o,t,l),s2:(0,n.compute_s)(c,e,l)}}};var n=r(4288);function i(t,e,r,i,a,s,o){if(!(0,n.in_curve_order)(s))throw new Error(" s1 not in curve order");if(!(0,n.in_curve_order)(o))throw new Error(" s2 not in curve order");if(!(0,n.validate_challenge)(a))throw new Error("invalid challenge");var c=e.multiplyUnsafe(s).add(r.multiplyUnsafe(o)),u=i.add(t.multiplyUnsafe(a));return c.equals(u)}},2362(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return s(t.y,t.generators,e.A,e.c,e.ss)},e.verify_with_prefix=function(t,e){var r=t.y,n=t.generators,i=e.A,o=e.prefix,c=e.ss,u=[i];return s(r,n,i,(0,a.compute_challenge)(o,u),c)},e._verify=s,e.prove=function(t,e,r){if(e.length!==t.length)throw new n.LengthMismatchError(e.length,t.length,"generators and scalars");for(var s=[],o=i.ProjectivePoint.ZERO,c=i.ProjectivePoint.ZERO,u=0;u<e.length;u++){var l=e[u],d=(0,a.generateRandom)();o=o.add(l.multiply(t[u])),c=c.add(l.multiply(d)),s.push(d)}for(var h={y:o,generators:e},f=[c],p=(0,a.compute_challenge)(r,f),y=[],g=0;g<e.length;g++)y.push((0,a.compute_s)(s[g],t[g],p));return{inputs:h,proof:{A:c,prefix:r,ss:y}}};var n=r(2747),i=r(5900),a=r(4288);function s(t,e,r,s,o){if(e.length!==o.length)throw new n.LengthMismatchError(e.length,o.length,"generators and responses");if(!(0,a.validate_challenge)(s))throw new Error("invalid challenge");for(var c=i.ProjectivePoint.ZERO,u=0;u<e.length;u++){if(!(0,a.in_curve_order)(o[u]))throw new Error(" s not in curve order");c=c.add(e[u].multiplyUnsafe(o[u]))}var l=r.add(t.multiplyUnsafe(s));return c.equals(l)}},8678(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){var r=t.g1,n=t.g2,s=t.bit_size,c=t.commitments,u=e.proofs;if(c.length!==s||u.length!==s)throw new i.LengthMismatchError(c.length,s,"commitments and bit_size");for(var l=u[0].prefix,d=a.ProjectivePoint.ZERO,h=0;h<s;h++){var f=Math.pow(2n,BigInt(h)),p=c[h],y=u[h];if(y.prefix!==l+BigInt(h))return!1;var g={V:p,g1:r,g2:n};if(!(0,o.verify_with_prefix)(g,y))return!1;d=d.add(p.multiply(f))}return d},e.pregenerate_randomness=function(t){for(var e=[],r=0n,i=0;i<t;i++){var a=Math.pow(2n,BigInt(i)),o=(0,s.generateRandom)();e.push(o),r=(r+o*a)%n.CURVE_ORDER}return{randomness:e,total_random:r}},e.prove=function(t,e,r,a,s,c){if(t>=Math.pow(2,e))throw new i.OutOfRangeError("Value ".concat(t," is not in range [0, ").concat(Math.pow(2,e)-1,"]"),t,"[0, ".concat(Math.pow(2,e)-1,"]"));if(s.length!==e)throw new Error("Randomness length does not match bit_size");for(var u=t.toString(2).padStart(e,"0").split("").map(Number).map(function(t){return t}).reverse(),l=[],d=[],h=0n,f=0;f<e;f++){var p=Math.pow(2n,BigInt(f)),y=s[f],g=(0,o.prove)(u[f],y,r,a,c+BigInt(f)),m=g.inputs,b=g.proof;l.push(b),d.push(m.V),h=(h+y*p)%n.CURVE_ORDER}return{inputs:{commitments:d,g1:r,g2:a,bit_size:e},proofs:{proofs:l},r:h}};var n=r(2828),i=r(2747),a=r(5900),s=r(4288),o=r(8368)},2528(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return a(t.L1,t.R1,t.L2,t.R2,t.g,t.y1,t.y2,e.AL1,e.AR1,e.AL2,e.AR2,e.c,e.sb,e.sr1,e.sr2)},e.verify_with_prefix=function(t,e){var r=t.L1,i=t.R1,s=t.L2,o=t.R2,c=t.g,u=t.y1,l=t.y2,d=e.AL1,h=e.AR1,f=e.AL2,p=e.AR2,y=e.prefix,g=e.sb,m=e.sr1,b=e.sr2,_=[d,h,f,p];return a(r,i,s,o,c,u,l,d,h,f,p,(0,n.compute_challenge)(y,_),g,m,b)},e._verify=a,e.prove=function(t,e,r,i,a,s,o){var c={L1:t.multiply(i).add(e.multiply(a)),R1:t.multiply(a),L2:t.multiply(i).add(r.multiply(s)),R2:t.multiply(s),y1:e,y2:r,g:t},u=(0,n.generateRandom)(),l=(0,n.generateRandom)(),d=(0,n.generateRandom)(),h=t.multiply(u).add(e.multiply(l)),f=t.multiply(l),p=t.multiply(u).add(r.multiply(d)),y=t.multiply(d),g=[h,f,p,y],m=(0,n.compute_challenge)(o,g);return{inputs:c,proof:{AL1:h,AR1:f,AL2:p,AR2:y,prefix:o,sb:(0,n.compute_s)(u,i,m),sr1:(0,n.compute_s)(l,a,m),sr2:(0,n.compute_s)(d,s,m)}}};var n=r(4288),i=r(5602);function a(t,e,r,n,a,s,o,c,u,l,d,h,f,p,y){return!!(0,i._verify)(t,e,a,s,c,u,h,f,p)&&!!(0,i._verify)(r,n,a,o,l,d,h,f,y)}},1979(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verify=function(t,e){return c(t.L1,t.R1,t.L2,t.R2,t.g,t.y1,t.y2,e.Ax,e.AL1,e.AL2,e.AR2,e.c,e.sb,e.sx,e.sr2)},e.verify_with_prefix=function(t,e){var r=t.L1,i=t.R1,a=t.L2,s=t.R2,o=t.g,u=t.y1,l=t.y2,d=e.Ax,h=e.AL1,f=e.AL2,p=e.AR2,y=e.prefix,g=e.sb,m=e.sx,b=e.sr2,_=[d,h,f,p];return c(r,i,a,s,o,u,l,d,h,f,p,(0,n.compute_challenge)(y,_),g,m,b)},e._verify=c,e.prove=function(t,e,r,a,s,o,c,u){var l=t.multiply(e);if(!a.subtract(s.multiply(e)).equals(t.multiply(o)))throw new i.PreconditionError("The provided ciphertext (L1, R1) does not encrypt the specified message under the derived public key");var d={L1:a,R1:s,L2:t.multiply(o).add(r.multiply(c)),R2:t.multiply(c),g:t,y1:l,y2:r},h=(0,n.generateRandom)(),f=(0,n.generateRandom)(),p=(0,n.generateRandom)(),y=t.multiply(h),g=t.multiply(f).add(s.multiply(h)),m=t.multiply(f).add(r.multiply(p)),b=t.multiply(p),_=[y,g,m,b],w=(0,n.compute_challenge)(u,_);return{inputs:d,proof:{Ax:y,AL1:g,AL2:m,AR2:b,prefix:u,sx:(0,n.compute_s)(h,e,w),sb:(0,n.compute_s)(f,o,w),sr2:(0,n.compute_s)(p,c,w)}}};var n=r(4288),i=r(2747),a=r(5602),s=r(8431),o=r(6313);function c(t,e,r,n,i,c,u,l,d,h,f,p,y,g,m){return!!(0,s._verify)(c,i,l,p,g)&&!!(0,o._verify)(t,i,e,d,p,y,g)&&!!(0,a._verify)(r,n,i,u,h,f,p,y,m)}},5900(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=e.CURVE_ORDER=void 0;var n=r(4246),i=r(2828);Object.defineProperty(e,"CURVE_ORDER",{enumerable:!0,get:function(){return i.CURVE_ORDER}}),e.ProjectivePoint=n.ProjectivePoint},4288(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateRandom=function(){var t=n.utils.randomPrivateKey();return n.utils.normPrivateKeyToScalar(t)},e.in_curve_order=a,e.validate_challenge=function(t){return 0n!=t&&a(t)},e.reduce_modulo_order=s,e.compute_challenge=function(t,e){var r=[t];return e.forEach(function(t){var e=t.toAffine(),n=e.x,i=e.y;r.push(n),r.push(i)}),s((0,n.poseidonHashMany)(r))},e.compute_s=function(t,e,r){return(t+e*r)%i.CURVE_ORDER},e.subtract_modulo_curve_order=function(t,e){return((t-e)%i.CURVE_ORDER+i.CURVE_ORDER)%i.CURVE_ORDER};var n=r(4246),i=r(2828);function a(t){return t<i.CURVE_ORDER}function s(t){return t%i.CURVE_ORDER}},6072(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6985(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,n,i,s){var o=n&&n.prototype instanceof u?n:u,l=Object.create(o.prototype);return a(l,"_invoke",function(r,n,i){var a,s,o,u=0,l=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return a=e,s=0,o=t,h.n=r,c}};function f(r,n){for(s=r,o=n,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],f=h.p,p=a[2];r>3?(i=p===n)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=r<2&&f<a[1])?(s=0,h.v=n,h.n=a[1]):f<p&&(i=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,h.n=p,s=0))}if(i||r>1)return c;throw d=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),s=l,o=p;(e=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(h.n=-1),f(s,o)):h.n=o:h.v=o);try{if(u=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(d=h.n<0)?o:r.call(n,h))!==c)break}catch(e){a=t,s=1,o=e}finally{u=1}}return{value:e,done:d}}}(r,i,s),!0),l}var c={};function u(){}function l(){}function d(){}e=Object.getPrototypeOf;var h=[][n]?e(e([][n]())):(a(e={},n,function(){return this}),e),f=d.prototype=u.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,s,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,a(f,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,s,"GeneratorFunction"),a(f),a(f,s,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:p}})()}function a(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}a=function(t,e,r,n){function s(e,r){a(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},a(t,e,r,n)}function s(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){s(a,n,i,o,c,"next",t)}function c(t){s(a,n,i,o,c,"throw",t)}o(void 0)})}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function u(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;var d=r(5556),h=r(9839),f=r(6641),p=r(3496),y=r(4499),g=r(9705),m=r(7340),b=r(5401),_=r(3829),w=r(2445),v=r(546),E=r(6451),A=r(2540),T=r(8138),S=r(2479),I=r(9889),k=r(6783),x=r(227),B=r(8697),C=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"publicKey",void 0),u(this,"pk",void 0),u(this,"provider",void 0),u(this,"Tongo",void 0),this.pk=(0,x.bytesOrNumToBigInt)(e),this.Tongo=new d.Contract({abi:I.tongoAbi,address:r,providerOrAccount:n}).typedv2(I.tongoAbi),this.publicKey=(0,x.pubKeyFromSecret)(this.pk),this.provider=n}return e=t,r=[{key:"tongoAddress",value:function(){return(0,k.pubKeyAffineToBase58)(this.publicKey)}},{key:"nonce",value:(Q=o(i().m(function t(){var e,r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.rawState();case 1:return e=t.v,r=e.nonce,t.a(2,r)}},t,this)})),function(){return Q.apply(this,arguments)})},{key:"state",value:(J=o(i().m(function t(){var e,r,n,a,s,o,c,u,l;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.rawState();case 1:if(e=t.v,r=e.balance,n=e.pending,a=e.aeBalance,s=e.nonce,!a){t.n=3;break}return t.n=2,this.decryptAEBalance(a,s);case 2:l=t.v,t.n=4;break;case 3:l=void 0;case 4:return o=l,c=this.decryptCipherBalance(r,o),u=this.decryptCipherBalance(n),t.a(2,{balance:c,pending:u,nonce:s})}},t,this)})),function(){return J.apply(this,arguments)})},{key:"rawState",value:(X=o(i().m(function e(){var r;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.Tongo.get_state(this.publicKey);case 1:return r=e.v,e.a(2,t.parseAccountState(r))}},e,this)})),function(){return X.apply(this,arguments)})},{key:"rate",value:(Z=o(i().m(function t(){var e;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.Tongo.get_rate();case 1:return e=t.v,t.a(2,(0,x.castBigInt)(e))}},t,this)})),function(){return Z.apply(this,arguments)})},{key:"bit_size",value:(W=o(i().m(function t(){var e,r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.Tongo.get_bit_size();case 1:return e=t.v,r="bigint"==typeof e?Number(e):e,t.a(2,r)}},t,this)})),function(){return W.apply(this,arguments)})},{key:"erc20ToTongo",value:(K=o(i().m(function t(e){var r,n;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.rate();case 1:if(r=t.v,n=e/r,e%r==0n){t.n=2;break}return t.a(2,n+1n);case 2:return t.a(2,n);case 3:return t.a(2)}},t,this)})),function(t){return K.apply(this,arguments)})},{key:"tongoToErc20",value:(Y=o(i().m(function t(e){var r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.rate();case 1:return r=t.v,t.a(2,e*r)}},t,this)})),function(t){return Y.apply(this,arguments)})},{key:"auditorKey",value:(G=o(i().m(function t(){var e;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.Tongo.auditor_key();case 1:return e=t.v,t.a(2,e)}},t,this)})),function(){return G.apply(this,arguments)})},{key:"createAuditPart",value:(z=o(i().m(function t(e,r,n){var a,s,o,c,u,l,f,p,y;return i().w(function(t){for(;;)switch(t.n){case 0:return a=new d.CairoOption(d.CairoOptionVariant.None),t.n=1,this.auditorKey();case 1:if(!(s=t.v).isSome()){t.n=4;break}return o=(0,k.starkPointToProjectivePoint)(s.unwrap()),c=(0,h.proveAudit)(this.pk,e,r,o,n),u=c.inputs,l=c.proof,t.n=2,this.nonce();case 2:return f=t.v,t.n=3,this.computeAEHintForPubKey(e,f,o);case 3:p=t.v,y={auditedBalance:u.auditedBalance,hint:p,proof:l},a=new d.CairoOption(d.CairoOptionVariant.Some,y);case 4:return t.a(2,a)}},t,this)})),function(t,e,r){return z.apply(this,arguments)})},{key:"fund",value:(q=o(i().m(function t(e){var r,n,a,s,o,c,u,l,d,h,p,y,g,m,b,_,w,E,A,T,S;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.amount,n=e.sender,t.n=1,this.rawState();case 1:if(a=t.v,s=a.nonce,o=a.balance,!(c=a.aeBalance)){t.n=3;break}return t.n=2,this.decryptAEBalance(c,s);case 2:w=t.v,t.n=4;break;case 3:w=void 0;case 4:return u=w,l=this.decryptCipherBalance(o,u),E=BigInt,t.n=5,this.provider.getChainId();case 5:return A=E(t.v),T=BigInt(this.Tongo.address),S=BigInt(n),d={chain_id:A,tongo_address:T,sender_address:S},h=(0,f.proveFund)(this.pk,r,l,o,s,d),p=h.inputs,y=h.proof,g=h.newBalance,t.n=6,this.createAuditPart(r+l,g,d);case 6:return m=t.v,t.n=7,this.computeAEHintForSelf(r+l,s+1n);case 7:return b=t.v,_=new v.FundOperation({to:p.y,amount:r,hint:b,proof:y,auditPart:m,Tongo:this.Tongo}),t.n=8,_.populateApprove();case 8:return t.a(2,_)}},t,this)})),function(t){return q.apply(this,arguments)})},{key:"transfer",value:(j=o(i().m(function t(e){var r,n,a,s,o,c,u,l,d,h,f,p,y,m,b,_,w,v,E,A,S,I,x,B;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.amount,n=e.sender,t.n=1,this.bit_size();case 1:return a=t.v,t.n=2,this.rawState();case 2:if(s=t.v,o=s.nonce,c=s.balance,!(u=s.aeBalance)){t.n=4;break}return t.n=3,this.decryptAEBalance(u,o);case 3:A=t.v,t.n=5;break;case 4:A=void 0;case 5:if(l=A,!((d=this.decryptCipherBalance(c,l))<r)){t.n=6;break}throw new Error("You dont have enough balance");case 6:return h=(0,k.starkPointToProjectivePoint)(e.to),S=BigInt,t.n=7,this.provider.getChainId();case 7:return I=S(t.v),x=BigInt(this.Tongo.address),B=BigInt(n),f={chain_id:I,tongo_address:x,sender_address:B},p=(0,g.proveTransfer)(this.pk,h,d,r,c,o,a,f),y=p.inputs,m=p.proof,b=p.newBalance,t.n=8,this.computeAEHintForPubKey(r,o,h);case 8:return _=t.v,t.n=9,this.computeAEHintForSelf(d-r,o+1n);case 9:return w=t.v,t.n=10,this.createAuditPart(d-r,b,f);case 10:return v=t.v,t.n=11,this.createAuditPart(r,y.transferBalanceSelf,f);case 11:return E=t.v,t.a(2,new T.TransferOperation({from:y.from,to:y.to,transferBalance:y.transferBalance,transferBalanceSelf:y.transferBalanceSelf,auxiliarCipher:y.auxiliarCipher,auxiliarCipher2:y.auxiliarCipher2,hintTransfer:_,hintLeftover:w,proof:m,auditPart:v,auditPartTransfer:E,Tongo:this.Tongo}))}},t,this)})),function(t){return j.apply(this,arguments)})},{key:"ragequit",value:(\$=o(i().m(function t(e){var r,n,a,s,o,c,u,l,d,h,f,y,g,m,b,_,w,v,A,T;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.to,n=e.sender,t.n=1,this.rawState();case 1:if(a=t.v,s=a.nonce,o=a.balance,!(c=a.aeBalance)){t.n=3;break}return t.n=2,this.decryptAEBalance(c,s);case 2:_=t.v,t.n=4;break;case 3:_=void 0;case 4:if(u=_,0n!==(l=this.decryptCipherBalance(o,u))){t.n=5;break}throw new Error("You dont have enough balance");case 5:return w=BigInt,t.n=6,this.provider.getChainId();case 6:return v=w(t.v),A=BigInt(this.Tongo.address),T=BigInt(n),d={chain_id:v,tongo_address:A,sender_address:T},h=(0,p.proveRagequit)(this.pk,o,s,BigInt(r),l,d),f=h.inputs,y=h.proof,g=h.newBalance,t.n=7,this.computeAEHintForSelf(0n,s+1n);case 7:return m=t.v,t.n=8,this.createAuditPart(0n,g,d);case 8:return b=t.v,t.a(2,new E.RagequitOperation({from:f.y,to:f.to,amount:f.amount,hint:m,proof:y,Tongo:this.Tongo,auditPart:b}))}},t,this)})),function(t){return \$.apply(this,arguments)})},{key:"withdraw",value:(M=o(i().m(function t(e){var r,n,a,s,o,c,u,l,d,h,f,p,y,g,b,_,w,v,E,A,T,I;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.amount,n=e.to,a=e.sender,t.n=1,this.bit_size();case 1:return s=t.v,t.n=2,this.rawState();case 2:if(o=t.v,c=o.nonce,u=o.balance,!(l=o.aeBalance)){t.n=4;break}return t.n=3,this.decryptAEBalance(l,c);case 3:v=t.v,t.n=5;break;case 4:v=void 0;case 5:if(d=v,!((h=this.decryptCipherBalance(u,d))<r)){t.n=6;break}throw new Error("You dont have enought balance");case 6:return E=BigInt,t.n=7,this.provider.getChainId();case 7:return A=E(t.v),T=BigInt(this.Tongo.address),I=BigInt(a),f={chain_id:A,tongo_address:T,sender_address:I},p=(0,m.proveWithdraw)(this.pk,h,r,BigInt(n),u,c,s,f),y=p.inputs,g=p.proof,b=p.newBalance,t.n=8,this.computeAEHintForSelf(h-r,c+1n);case 8:return _=t.v,t.n=9,this.createAuditPart(h-r,b,f);case 9:return w=t.v,t.a(2,new S.WithdrawOperation({from:y.y,to:y.to,amount:y.amount,auxiliarCipher:y.auxiliarCipher,hint:_,proof:g,auditPart:w,Tongo:this.Tongo}))}},t,this)})),function(t){return M.apply(this,arguments)})},{key:"rollover",value:(H=o(i().m(function t(e){var r,n,a,s,o,c,u,l,d,h,f,p,g,m,b,_,w,v,E;return i().w(function(t){for(;;)switch(t.n){case 0:return r=e.sender,t.n=1,this.rawState();case 1:if(n=t.v,a=n.nonce,s=n.balance,o=n.aeBalance,c=n.pending,!o){t.n=3;break}return t.n=2,this.decryptAEBalance(o,a);case 2:b=t.v,t.n=4;break;case 3:b=void 0;case 4:if(u=b,l=this.decryptCipherBalance(s,u),0n!=(d=this.decryptCipherBalance(c))){t.n=5;break}throw new Error("Your pending ammount is 0");case 5:return _=BigInt,t.n=6,this.provider.getChainId();case 6:return w=_(t.v),v=BigInt(this.Tongo.address),E=BigInt(r),h={chain_id:w,tongo_address:v,sender_address:E},f=(0,y.proveRollover)(this.pk,a,h),p=f.inputs,g=f.proof,t.n=7,this.computeAEHintForSelf(d+l,a+1n);case 7:return m=t.v,t.a(2,new A.RollOverOperation({to:p.y,proof:g,Tongo:this.Tongo,hint:m}))}},t,this)})),function(t){return H.apply(this,arguments)})},{key:"decryptAEBalance",value:(V=o(i().m(function t(e,r){return i().w(function(t){for(;;)if(0===t.n)return t.a(2,this.decryptAEHintForPubKey(e,r,this.publicKey))},t,this)})),function(t,e){return V.apply(this,arguments)})},{key:"decryptAEHintForPubKey",value:(F=o(i().m(function t(e,r,n){var a,s,o,c,u;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.deriveSymmetricKeyForPubKey(r,n);case 1:return a=t.v,s=(0,b.AEHintToBytes)(e),o=s.ciphertext,c=s.nonce,u=new b.AEChaCha(a).decryptBalance({ciphertext:o,nonce:c}),t.a(2,u)}},t,this)})),function(t,e,r){return F.apply(this,arguments)})},{key:"decryptCipherBalance",value:function(t,e){var r=t.L,n=t.R;return e&&(0,x.assertBalance)(this.pk,e,r,n)?e:(0,x.decipherBalance)(this.pk,r,n)}},{key:"generateExPost",value:(U=o(i().m(function t(e,r,n){var a,s,o,c,u,l,d,f,p;return i().w(function(t){for(;;)switch(t.n){case 0:if(null!=r.L){t.n=1;break}throw new Error("L is null");case 1:if(null!=r.R){t.n=2;break}throw new Error("R is null");case 2:return l=BigInt,t.n=3,this.provider.getChainId();case 3:return d=l(t.v),f=BigInt(this.Tongo.address),p=BigInt(n),a={chain_id:d,tongo_address:f,sender_address:p},s=this.decryptCipherBalance(r),o=(0,h.proveAudit)(this.pk,s,r,(0,k.starkPointToProjectivePoint)(e),a),c=o.inputs,u=o.proof,t.a(2,{inputs:c,proof:u})}},t,this)})),function(t,e,r){return U.apply(this,arguments)})},{key:"verifyExPost",value:function(t){if((0,k.projectivePointToStarkPoint)(t.inputs.y)!=this.publicKey)throw new Error("The expost is not for you");return(0,h.verifyAudit)(t.inputs,t.proof),this.decryptCipherBalance({L:t.inputs.auditedBalance.L,R:t.inputs.auditedBalance.R})}},{key:"_diffieHellman",value:function(t){var e=(0,k.pubKeyBase58ToHex)(t);return(0,w.ECDiffieHellman)(this.pk,e)}},{key:"computeAEHintForPubKey",value:(L=o(i().m(function t(e,r,n){var a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.deriveSymmetricKeyForPubKey(r,n);case 1:return a=t.v,t.a(2,(0,b.bytesToAEHint)(new b.AEChaCha(a).encryptBalance(e)))}},t,this)})),function(t,e,r){return L.apply(this,arguments)})},{key:"computeAEHintForSelf",value:(P=o(i().m(function t(e,r){return i().w(function(t){for(;;)if(0===t.n)return t.a(2,this.computeAEHintForPubKey(e,r,this.publicKey))},t,this)})),function(t,e){return P.apply(this,arguments)})},{key:"deriveSymmetricKeyForPubKey",value:(D=o(i().m(function t(e,r){var n;return i().w(function(t){for(;;)if(0===t.n)return n=(0,w.ECDiffieHellman)(this.pk,(0,k.pubKeyAffineToHex)(r)),t.a(2,(0,w.deriveSymmetricEncryptionKey)({contractAddress:this.Tongo.address,nonce:e,secret:n}))},t,this)})),function(t,e){return D.apply(this,arguments)})},{key:"getEventsFund",value:(N=o(i().m(function t(e){var r,n;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsFund(e,this.publicKey);case 1:return n=t.v,t.a(2,n.map(function(t){return{type:B.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount}}))}},t,this)})),function(t){return N.apply(this,arguments)})},{key:"getEventsRollover",value:(O=o(i().m(function t(e){var r,n,a=this;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsRollover(e,this.publicKey);case 1:return n=t.v,t.a(2,n.map(function(t){return{type:B.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:a.decryptCipherBalance((0,k.parseCipherBalance)(t.rollovered))}}))}},t,this)})),function(t){return O.apply(this,arguments)})},{key:"getEventsWithdraw",value:(R=o(i().m(function t(e){var r,n;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsWithdraw(e,this.publicKey);case 1:return n=t.v,t.a(2,n.map(function(t){return{type:B.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:d.num.toHex(t.to)}}))}},t,this)})),function(t){return R.apply(this,arguments)})},{key:"getEventsRagequit",value:(C=o(i().m(function t(e){var r,n;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsRagequit(e,this.publicKey);case 1:return n=t.v,t.a(2,n.map(function(t){return{type:B.ReaderToAccountEvents[t.type],tx_hash:t.tx_hash,block_number:t.block_number,nonce:t.nonce,amount:t.amount,to:d.num.toHex(t.to)}}))}},t,this)})),function(t){return C.apply(this,arguments)})},{key:"getEventsTransferOut",value:(l=o(i().m(function t(e){var r,n,a=this;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsTransferOut(e,this.publicKey);case 1:return n=t.v,t.a(2,Promise.all(n.map(function(){var t=o(i().m(function t(e){var r,n,s,o,c,u,l,d;return i().w(function(t){for(;;)switch(t.n){case 0:return r=B.ReaderToAccountEvents[e.type],n=e.tx_hash,s=e.block_number,o=e.nonce,c=a,u=(0,k.parseCipherBalance)(e.transferBalanceSelf),t.n=1,a.decryptAEHintForPubKey(e.hintTransfer,e.nonce,e.to);case 1:return l=c.decryptCipherBalance.call(c,u,t.v),d=(0,k.pubKeyAffineToBase58)(e.to),t.a(2,{type:r,tx_hash:n,block_number:s,nonce:o,amount:l,to:d})}},t)}));return function(e){return t.apply(this,arguments)}}())))}},t,this)})),function(t){return l.apply(this,arguments)})},{key:"getEventsTransferIn",value:(s=o(i().m(function t(e){var r,n,a=this;return i().w(function(t){for(;;)switch(t.n){case 0:return r=new _.StarknetEventReader(this.provider,this.Tongo.address),t.n=1,r.getEventsTransferIn(e,this.publicKey);case 1:return n=t.v,t.a(2,Promise.all(n.map(function(){var t=o(i().m(function t(e){var r,n,s,o,c,u,l,d;return i().w(function(t){for(;;)switch(t.n){case 0:return r=B.ReaderToAccountEvents[e.type],n=e.tx_hash,s=e.block_number,o=e.nonce,c=a,u=(0,k.parseCipherBalance)(e.transferBalance),t.n=1,a.decryptAEHintForPubKey(e.hintTransfer,e.nonce,e.from);case 1:return l=c.decryptCipherBalance.call(c,u,t.v),d=(0,k.pubKeyAffineToBase58)(e.from),t.a(2,{type:r,tx_hash:n,block_number:s,nonce:o,amount:l,from:d})}},t)}));return function(e){return t.apply(this,arguments)}}())))}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"getTxHistory",value:(a=o(i().m(function t(e){var r,n;return i().w(function(t){for(;;)switch(t.n){case 0:return r=Promise.all([this.getEventsFund(e),this.getEventsRollover(e),this.getEventsWithdraw(e),this.getEventsRagequit(e),this.getEventsTransferOut(e),this.getEventsTransferIn(e)]),t.n=1,r;case 1:return n=t.v.flat(),t.a(2,n.sort(function(t,e){return e.block_number-t.block_number}))}},t,this)})),function(t){return a.apply(this,arguments)})}],n=[{key:"tongoAddress",value:function(t){return(0,k.pubKeyAffineToBase58)((0,x.pubKeyFromSecret)((0,x.bytesOrNumToBigInt)(t)))}},{key:"parseAccountState",value:function(t){var e,r=t.balance,n=t.pending,i=t.audit,a=t.nonce,s=t.ae_balance,o=t.ae_audit_balance;return i.isSome()&&(e=(0,k.parseCipherBalance)(i.unwrap())),{balance:(0,k.parseCipherBalance)(r),pending:(0,k.parseCipherBalance)(n),audit:e,nonce:d.num.toBigInt(a),aeBalance:s.isSome()?(0,b.parseAEBalance)(s.unwrap()):void 0,aeAuditBalance:o.isSome()?(0,b.parseAEBalance)(o.unwrap()):void 0}}}],r&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,a,s,l,C,R,O,N,D,P,L,U,F,V,H,M,\$,j,q,z,G,Y,K,W,Z,X,J,Q}();e.Account=C},8697(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e,r){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ReaderToAccountEvents=void 0;var a=r(3829);e.ReaderToAccountEvents=i(i(i(i(i(i({},a.ReaderEventType.Fund,"fund"),a.ReaderEventType.Rollover,"rollover"),a.ReaderEventType.Withdraw,"withdraw"),a.ReaderEventType.Ragequit,"ragequit"),a.ReaderEventType.TransferIn,"transferIn"),a.ReaderEventType.TransferOut,"transferOut")},866(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(6985),e),i(r(6072),e),i(r(8697),e)},5401(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.AEChaCha=void 0,e.AEHintToBytes=function(t){var e=t.ciphertext,r=t.nonce;return{ciphertext:(0,o.numberToBytesBE)(e,64),nonce:(0,o.numberToBytesBE)(r,24)}},e.bytesToAEHint=function(t){var e=t.ciphertext,r=t.nonce;return{ciphertext:(0,o.bytesToNumberBE)(e),nonce:(0,o.bytesToNumberBE)(r)}},e.parseAEBalance=function(t){var e,r=t.ciphertext,n=t.nonce;return e=(0,l.isUint256)(n)?u.uint256.uint256ToBN(n):BigInt(n),{ciphertext:BigInt(r),nonce:e}};var s=r(8900),o=r(6527),c=r(8489),u=r(5556),l=r(227),d=function(){return t=function t(e){var r,n,i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=void 0,(n=a(n="key"))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this.key=e,32!=this.key.length)throw new Error("Key length must be exactly 32 Bytes, not '".concat(this.key.length,"'"))},(e=[{key:"encryptBalance",value:function(t){if(t>=Math.pow(2n,32n))throw new Error("This implementation only supports 32 bit balances");var e=(0,c.randomBytes)(24),r=(0,c.randomBytes)(44),n=(0,o.numberToBytesBE)(t,48);return n.set(r,0),{ciphertext:(0,s.xchacha20poly1305)(this.key,e).encrypt(n),nonce:e}}},{key:"decryptBalance",value:function(t){var e=t.ciphertext,r=t.nonce,n=(0,s.xchacha20poly1305)(this.key,r);try{var i=n.decrypt(e);if(48!==i.length)throw new Error("Malformed plaintext");return(0,o.bytesToNumberBE)(i.slice(44,48))}catch(t){throw new Error("Malformed or tampered ciphertext")}}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();e.AEChaCha=d},9043(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SECONDARY_GENERATOR=e.GENERATOR=e.CURVE_ORDER=void 0;var n=r(4246),i=r(6783);e.CURVE_ORDER=n.CURVE.n,e.GENERATOR=new i.ProjectivePoint(n.CURVE.Gx,n.CURVE.Gy,1n),e.SECONDARY_GENERATOR=new i.ProjectivePoint(627088272801405713560985229077786158610581355215145837257248988047835443922n,962306405833205337611861169387935900858447421343428280515103558221889311122n,1n)},3829(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,n,i,s){var o=n&&n.prototype instanceof u?n:u,l=Object.create(o.prototype);return a(l,"_invoke",function(r,n,i){var a,s,o,u=0,l=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return a=e,s=0,o=t,h.n=r,c}};function f(r,n){for(s=r,o=n,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],f=h.p,p=a[2];r>3?(i=p===n)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=r<2&&f<a[1])?(s=0,h.v=n,h.n=a[1]):f<p&&(i=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,h.n=p,s=0))}if(i||r>1)return c;throw d=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),s=l,o=p;(e=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(h.n=-1),f(s,o)):h.n=o:h.v=o);try{if(u=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(d=h.n<0)?o:r.call(n,h))!==c)break}catch(e){a=t,s=1,o=e}finally{u=1}}return{value:e,done:d}}}(r,i,s),!0),l}var c={};function u(){}function l(){}function d(){}e=Object.getPrototypeOf;var h=[][n]?e(e([][n]())):(a(e={},n,function(){return this}),e),f=d.prototype=u.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,s,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,a(f,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,s,"GeneratorFunction"),a(f),a(f,s,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:p}})()}function a(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}a=function(t,e,r,n){function s(e,r){a(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},a(t,e,r,n)}function s(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){s(a,n,i,o,c,"next",t)}function c(t){s(a,n,i,o,c,"throw",t)}o(void 0)})}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){d(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function d(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.StarknetEventReader=e.ReaderEventType=void 0;var f=r(5556),p=r(9889),y=f.events.getAbiEvents(p.tongoAbi),g=f.CallData.getAbiStruct(p.tongoAbi),m=f.CallData.getAbiEnum(p.tongoAbi),b=f.num.toHex(f.hash.starknetKeccak("FundEvent")),_=f.num.toHex(f.hash.starknetKeccak("RolloverEvent")),w=f.num.toHex(f.hash.starknetKeccak("TransferEvent")),v=f.num.toHex(f.hash.starknetKeccak("WithdrawEvent")),E=f.num.toHex(f.hash.starknetKeccak("RagequitEvent")),A=f.num.toHex(f.hash.starknetKeccak("BalanceDeclared")),T=f.num.toHex(f.hash.starknetKeccak("TransferDeclared")),S="tongo::structs::events::FundEvent",I="tongo::structs::events::RolloverEvent",k="tongo::structs::events::TransferEvent",x="tongo::structs::events::WithdrawEvent",B="tongo::structs::events::RagequitEvent",C="tongo::structs::events::BalanceDeclared",R="tongo::structs::events::TransferDeclared";function O(t){var r=t[k];return l({type:e.ReaderEventType.TransferOut,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function N(t){var r=t[k];return l({type:e.ReaderEventType.TransferIn,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function D(t){var r=t[S];return l({type:e.ReaderEventType.Fund,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function P(t){var r=t[x];return l({type:e.ReaderEventType.Withdraw,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function L(t){var r=t[B];return l({type:e.ReaderEventType.Ragequit,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function U(t){var r=t[I];return l({type:e.ReaderEventType.Rollover,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function F(t){var r=t[C];return l({type:e.ReaderEventType.BalanceDeclared,tx_hash:t.transaction_hash,block_number:t.block_number},r)}function V(t){var r=t[R];return l({type:e.ReaderEventType.TransferDeclared,tx_hash:t.transaction_hash,block_number:t.block_number},r)}e.ReaderEventType={Fund:"fund",Withdraw:"withdraw",Ragequit:"ragequit",Rollover:"rollover",TransferIn:"transferIn",TransferOut:"transferOut",BalanceDeclared:"balanceDeclared",TransferDeclared:"transferDeclared"};var H=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"provider",void 0),d(this,"abiParser",t.abiParser),d(this,"tongoAddress",void 0),this.provider=e,this.tongoAddress=r},e=[{key:"getEventsFund",value:(M=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[b],[f.num.toHex(r.x)],[f.num.toHex(r.y)]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[S]}).map(function(t){return D(t)}))}},t,this)})),function(t,e){return M.apply(this,arguments)})},{key:"getEventsWithdraw",value:(H=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[v],[f.num.toHex(r.x)],[f.num.toHex(r.y)]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[x]}).map(function(t){return P(t)}))}},t,this)})),function(t,e){return H.apply(this,arguments)})},{key:"getEventsRagequit",value:(p=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[E],[f.num.toHex(r.x)],[f.num.toHex(r.y)]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[B]}).map(function(t){return L(t)}))}},t,this)})),function(t,e){return p.apply(this,arguments)})},{key:"getEventsRollover",value:(h=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[_],[f.num.toHex(r.x)],[f.num.toHex(r.y)]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[I]}).map(function(t){return U(t)}))}},t,this)})),function(t,e){return h.apply(this,arguments)})},{key:"getEventsTransferOut",value:(l=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[w],[],[],[f.num.toHex(r.x)],[f.num.toHex(r.y)],[]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[k]}).map(function(t){return O(t)}))}},t,this)})),function(t,e){return l.apply(this,arguments)})},{key:"getEventsTransferIn",value:(u=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[w],[f.num.toHex(r.x)],[f.num.toHex(r.y)],[],[],[]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[k]}).map(function(t){return N(t)}))}},t,this)})),function(t,e){return u.apply(this,arguments)})},{key:"getAllEvents",value:(s=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return n=Promise.all([this.getEventsFund(e,r),this.getEventsRollover(e,r),this.getEventsWithdraw(e,r),this.getEventsRagequit(e,r),this.getEventsTransferOut(e,r),this.getEventsTransferIn(e,r)]),t.n=1,n;case 1:return a=t.v.flat(),t.a(2,a.sort(function(t,e){return e.block_number-t.block_number}))}},t,this)})),function(t,e){return s.apply(this,arguments)})},{key:"getEventsBalanceDeclared",value:(a=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[A],[f.num.toHex(r.x)],[f.num.toHex(r.y)],[],[],[]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[C]}).map(function(t){return F(t)}))}},t,this)})),function(t,e){return a.apply(this,arguments)})},{key:"getEventsTransferFrom",value:(n=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[T],[f.num.toHex(r.x)],[f.num.toHex(r.y)],[],[],[]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[R]}).map(function(t){return V(t)}))}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"getEventsTransferTo",value:(r=o(i().m(function t(e,r){var n,a;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.provider.getEvents({address:this.tongoAddress,from_block:{block_number:e},to_block:"latest",keys:[[T],[],[],[f.num.toHex(r.x)],[f.num.toHex(r.y)],[]],chunk_size:100});case 1:return n=t.v,a=f.events.parseEvents(n.events,y,g,m,this.abiParser),t.a(2,a.filter(function(t){return void 0!==t[R]}).map(function(t){return V(t)}))}},t,this)})),function(t,e){return r.apply(this,arguments)})}],e&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,a,s,u,l,h,p,H,M}();d(H,"abiParser",new f.AbiParser2(p.tongoAbi)),e.StarknetEventReader=H},34(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(866),e),i(r(3001),e),i(r(5401),e),i(r(2445),e),i(r(6783),e)},2445(t,e,r){"use strict";function n(){var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,n,a,s){var o=n&&n.prototype instanceof u?n:u,l=Object.create(o.prototype);return i(l,"_invoke",function(r,n,i){var a,s,o,u=0,l=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return a=e,s=0,o=t,h.n=r,c}};function f(r,n){for(s=r,o=n,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],f=h.p,p=a[2];r>3?(i=p===n)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=r<2&&f<a[1])?(s=0,h.v=n,h.n=a[1]):f<p&&(i=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,h.n=p,s=0))}if(i||r>1)return c;throw d=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),s=l,o=p;(e=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(h.n=-1),f(s,o)):h.n=o:h.v=o);try{if(u=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(d=h.n<0)?o:r.call(n,h))!==c)break}catch(e){a=t,s=1,o=e}finally{u=1}}return{value:e,done:d}}}(r,a,s),!0),l}var c={};function u(){}function l(){}function d(){}e=Object.getPrototypeOf;var h=[][a]?e(e([][a]())):(i(e={},a,function(){return this}),e),f=d.prototype=u.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,s,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,i(f,"constructor",d),i(d,"constructor",l),l.displayName="GeneratorFunction",i(d,s,"GeneratorFunction"),i(f),i(f,s,"Generator"),i(f,a,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:o,m:p}})()}function i(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}i=function(t,e,r,n){function s(e,r){i(t,e,function(t){return this._invoke(e,r,t)})}e?a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},i(t,e,r,n)}function a(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.ECDiffieHellman=function(t,e){return c._starkCurve.getSharedSecret(t,e,!1)},e.buildInfo=u,e.buildSalt=l,e.deriveSymmetricEncryptionKey=function(t){return d.apply(this,arguments)};var s=r(6527),o=r(7076),c=r(4246);function u(t){var e=new Uint8Array([116,111,110,103,111]),r=(0,s.hexToBytes)(t.replace(/^0x/,"").padStart(64,"0")),n=new Uint8Array(27).fill(0),i=new Uint8Array(64);return i.set(e),i.set(r,e.length),i.set(n,r.length+e.length),i}function l(t,e){var r=new Uint8Array(72),n=(0,s.numberToBytesBE)(t,8);if(r.set(n),4!==e.at(0))throw new Error("InvalidSharedSecret");return r.set(e.slice(1),n.length),(0,o.sha256)(r)}function d(){var t;return t=n().m(function t(e){var r,i,a,s,o,c,d,h,f;return n().w(function(t){for(;;)switch(t.n){case 0:return r=e.contractAddress,i=e.nonce,a=e.secret,s={name:"HKDF",hash:"SHA-256",salt:l(i,a),info:u(r),length:32},t.n=1,crypto.subtle.importKey("raw",a,"HKDF",!1,["deriveKey"]);case 1:return o=t.v,c={name:"HMAC",hash:"SHA-256",length:256},t.n=2,crypto.subtle.deriveKey(s,o,c,!0,["sign"]);case 2:return d=t.v,t.n=3,crypto.subtle.exportKey("raw",d);case 3:return h=t.v,f=new Uint8Array(h),t.a(2,f)}},t)}),d=function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(t){a(s,n,i,o,c,"next",t)}function c(t){a(s,n,i,o,c,"throw",t)}o(void 0)})},d.apply(this,arguments)}},8726(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},546(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,n,i,s){var o=n&&n.prototype instanceof u?n:u,l=Object.create(o.prototype);return a(l,"_invoke",function(r,n,i){var a,s,o,u=0,l=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return a=e,s=0,o=t,h.n=r,c}};function f(r,n){for(s=r,o=n,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],f=h.p,p=a[2];r>3?(i=p===n)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=r<2&&f<a[1])?(s=0,h.v=n,h.n=a[1]):f<p&&(i=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,h.n=p,s=0))}if(i||r>1)return c;throw d=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),s=l,o=p;(e=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(h.n=-1),f(s,o)):h.n=o:h.v=o);try{if(u=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(d=h.n<0)?o:r.call(n,h))!==c)break}catch(e){a=t,s=1,o=e}finally{u=1}}return{value:e,done:d}}}(r,i,s),!0),l}var c={};function u(){}function l(){}function d(){}e=Object.getPrototypeOf;var h=[][n]?e(e([][n]())):(a(e={},n,function(){return this}),e),f=d.prototype=u.prototype=Object.create(h);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,s,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,a(f,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,s,"GeneratorFunction"),a(f),a(f,s,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:p}})()}function a(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}a=function(t,e,r,n){function s(e,r){a(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},a(t,e,r,n)}function s(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function c(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.FundOperation=void 0;var l=r(5556),d=r(227),h=r(6508),f=function(){return t=function t(e){var r=e.to,n=e.amount,i=e.proof,a=e.auditPart,s=e.Tongo,o=e.hint;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"type",void 0),c(this,"Tongo",void 0),c(this,"to",void 0),c(this,"amount",void 0),c(this,"hint",void 0),c(this,"proof",void 0),c(this,"auditPart",void 0),c(this,"approve",void 0),this.type=h.OperationType.Fund,this.to=r,this.amount=n,this.hint=o,this.auditPart=a,this.proof=i,this.Tongo=s},e=[{key:"toCalldata",value:function(){return this.Tongo.populate("fund",[{to:this.to,amount:this.amount,hint:this.hint,proof:this.proof,auditPart:this.auditPart}])}},{key:"populateApprove",value:(r=i().m(function t(){var e,r,n,a,s,o;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.Tongo.ERC20();case 1:return e=t.v,r=l.num.toHex(e),n=this.Tongo.address,t.n=2,this.Tongo.get_rate();case 2:a=t.v,s=l.cairo.uint256(this.amount*(0,d.castBigInt)(a)),o=l.CallData.compile({spender:n,amount:s}),this.approve={contractAddress:r,entrypoint:"approve",calldata:o};case 3:return t.a(2)}},t,this)}),n=function(){var t=this,e=arguments;return new Promise(function(n,i){var a=r.apply(t,e);function o(t){s(a,n,i,o,c,"next",t)}function c(t){s(a,n,i,o,c,"throw",t)}o(void 0)})},function(){return n.apply(this,arguments)})}],e&&o(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();e.FundOperation=f},3001(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(8726),e),i(r(546),e),i(r(6508),e),i(r(6451),e),i(r(2540),e),i(r(8138),e),i(r(2479),e)},6508(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OperationType=void 0,e.OperationType={Audit:"audit",Fund:"fund",Ragequit:"ragequit",Withdraw:"withdraw",Rollover:"rollover",Transfer:"transfer"}},6451(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.RagequitOperation=void 0;var o=r(6508),c=function(){return t=function t(e){var r=e.from,n=e.to,i=e.amount,s=e.proof,c=e.Tongo,u=e.hint,l=e.auditPart;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"type",o.OperationType.Ragequit),a(this,"from",void 0),a(this,"to",void 0),a(this,"amount",void 0),a(this,"hint",void 0),a(this,"auditPart",void 0),a(this,"proof",void 0),a(this,"Tongo",void 0),this.from=r,this.to=n,this.amount=i,this.hint=u,this.proof=s,this.auditPart=l,this.Tongo=c},(e=[{key:"toCalldata",value:function(){return this.Tongo.populate("ragequit",[{from:this.from,amount:this.amount,to:"0x"+this.to.toString(16),proof:this.proof,hint:this.hint,auditPart:this.auditPart}])}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();e.RagequitOperation=c},2540(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.RollOverOperation=void 0;var o=r(6508),c=function(){return t=function t(e){var r=e.to,n=e.proof,i=e.Tongo,s=e.hint;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"type",o.OperationType.Rollover),a(this,"to",void 0),a(this,"proof",void 0),a(this,"Tongo",void 0),a(this,"hint",void 0),this.to=r,this.proof=n,this.Tongo=i,this.hint=s},(e=[{key:"toCalldata",value:function(){return this.Tongo.populate("rollover",[{to:this.to,proof:this.proof,hint:this.hint}])}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();e.RollOverOperation=c},8138(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.TransferOperation=void 0;var o=r(6508),c=function(){return t=function t(e){var r=e.from,n=e.to,i=e.transferBalance,s=e.transferBalanceSelf,c=e.proof,u=e.auditPart,l=e.auditPartTransfer,d=e.auxiliarCipher,h=e.auxiliarCipher2,f=e.Tongo,p=e.hintTransfer,y=e.hintLeftover;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"type",o.OperationType.Transfer),a(this,"Tongo",void 0),a(this,"from",void 0),a(this,"to",void 0),a(this,"transferBalance",void 0),a(this,"transferBalanceSelf",void 0),a(this,"auxiliarCipher",void 0),a(this,"auxiliarCipher2",void 0),a(this,"hintTransfer",void 0),a(this,"hintLeftover",void 0),a(this,"proof",void 0),a(this,"auditPart",void 0),a(this,"auditPartTransfer",void 0),this.from=r,this.to=n,this.transferBalance=i,this.transferBalanceSelf=s,this.auxiliarCipher=d,this.auxiliarCipher2=h,this.hintTransfer=p,this.hintLeftover=y,this.proof=c,this.auditPart=u,this.auditPartTransfer=l,this.Tongo=f},(e=[{key:"toCalldata",value:function(){return this.Tongo.populate("transfer",[{from:this.from,to:this.to,transferBalance:this.transferBalance,transferBalanceSelf:this.transferBalanceSelf,auxiliarCipher:this.auxiliarCipher,auxiliarCipher2:this.auxiliarCipher2,hintTransfer:this.hintTransfer,hintLeftover:this.hintLeftover,proof:this.proof,auditPart:this.auditPart,auditPartTransfer:this.auditPartTransfer}])}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();e.TransferOperation=c},2479(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}Object.defineProperty(e,"__esModule",{value:!0}),e.WithdrawOperation=void 0;var o=r(5556),c=r(6508),u=function(){return t=function t(e){var r=e.from,n=e.to,i=e.amount,s=e.proof,o=e.auditPart,u=e.Tongo,l=e.hint,d=e.auxiliarCipher;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"type",c.OperationType.Withdraw),a(this,"from",void 0),a(this,"to",void 0),a(this,"amount",void 0),a(this,"hint",void 0),a(this,"auxiliarCipher",void 0),a(this,"proof",void 0),a(this,"auditPart",void 0),a(this,"Tongo",void 0),this.from=r,this.to=n,this.amount=i,this.auxiliarCipher=d,this.hint=l,this.proof=s,this.auditPart=o,this.Tongo=u},(e=[{key:"toCalldata",value:function(){return this.Tongo.populate("withdraw",[{from:this.from,amount:this.amount,hint:this.hint,to:o.num.toHex(this.to),auxiliarCipher:this.auxiliarCipher,auditPart:this.auditPart,proof:this.proof}])}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();e.WithdrawOperation=u},9839(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIT_CAIRO_STRING=void 0,e.proveAudit=function(t,r,i,c,u){var l=t,d=a.GENERATOR.multiply(l),h=i.L,f=i.R,p=h.subtract(f.multiplyUnsafe(l)),y=a.GENERATOR.multiplyUnsafe(r);if(!p.equals(y))throw new Error("storedBalance is not an encryption of balance");var g=(0,n.generateRandom)(),m={y:d,storedBalance:i,auditorPubKey:c,auditedBalance:(0,o.createCipherBalance)(c,r,g),prefix_data:u},b=function(t){var r=t.prefix_data,n=[r.chain_id,r.tongo_address,r.sender_address,e.AUDIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.auditorPubKey.toAffine().x,t.auditorPubKey.toAffine().y,t.storedBalance.L.toAffine().x,t.storedBalance.L.toAffine().y,t.storedBalance.R.toAffine().x,t.storedBalance.R.toAffine().y,t.auditedBalance.L.toAffine().x,t.auditedBalance.L.toAffine().y,t.auditedBalance.R.toAffine().x,t.auditedBalance.R.toAffine().y];return(0,s.compute_prefix)(n)}(m),_=(0,n.generateRandom)(),w=(0,n.generateRandom)(),v=(0,n.generateRandom)(),E=a.GENERATOR.multiplyUnsafe(_),A=a.GENERATOR.multiplyUnsafe(w).add(f.multiplyUnsafe(_)),T=a.GENERATOR.multiplyUnsafe(v),S=a.GENERATOR.multiplyUnsafe(w).add(c.multiplyUnsafe(v)),I=(0,n.compute_challenge)(b,[E,A,S,T]),k=(0,n.compute_s)(_,l,I),x=(0,n.compute_s)(v,g,I);return{inputs:m,proof:{Ax:E,AL0:A,AL1:S,AR1:T,sx:k,sb:(0,n.compute_s)(w,r,I),sr:x}}},e.verifyAudit=function(t,r){var s=(0,n.compute_challenge)(e.AUDIT_CAIRO_STRING,[r.Ax,r.AL0,r.AL1,r.AR1]),o=t.storedBalance,c=o.L,u=o.R,l=t.auditedBalance,d=l.L,h=l.R;return i.SameEncryptUnknownRandom._verify(c,u,d,h,a.GENERATOR,t.y,t.auditorPubKey,r.Ax,r.AL0,r.AL1,r.AR1,s,r.sb,r.sx,r.sr)};var n=r(6885),i=r(5356),a=r(9043),s=r(6783),o=r(2040);e.AUDIT_CAIRO_STRING=418581342580n},6641(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FUND_CAIRO_STRING=void 0,e.proveFund=function(t,r,n,o,u,l){var d=t,h=a.GENERATOR.multiply(d),f=o.L,p=o.R,y=f.subtract(p.multiplyUnsafe(d)),g=a.GENERATOR.multiplyUnsafe(n);if(!y.equals(g))throw new Error("storedBalance is not an encryption of balance");var m={y:h,nonce:u,amount:r,prefix_data:l},b=c(m),_=i.poe.prove(d,a.GENERATOR,b).proof,w=_.s,v=_.A,E=(0,s.createCipherBalance)(h,r,e.FUND_CAIRO_STRING);return{inputs:m,proof:{sx:w,Ax:v},newBalance:{L:f.add(E.L),R:p.add(E.R)}}},e.verifyFund=function(t,e){var r=c(t),s=(0,n.compute_challenge)(r,[e.Ax]);if(0==i.poe._verify(t.y,a.GENERATOR,e.Ax,s,e.sx))throw new Error("verifyFund failed")};var n=r(6885),i=r(5356),a=r(9043),s=r(2040),o=r(6783);function c(t){var r=t.prefix_data,n=[r.chain_id,r.tongo_address,r.sender_address,e.FUND_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.amount,t.nonce];return(0,o.compute_prefix)(n)}e.FUND_CAIRO_STRING=1718972004n},3496(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RAGEQUIT_CAIRO_STRING=void 0,e.proveRagequit=function(t,e,r,n,a,u){var l=t,d=i.GENERATOR.multiply(l),h=e.L,f=e.R,p=h.subtract(f.multiplyUnsafe(l)),y=i.GENERATOR.multiplyUnsafe(a);if(!p.equals(y))throw new Error("storedBalance is not an encryption of balance");var g={y:d,nonce:r,to:n,amount:a,currentBalance:e,prefix_data:u},m=c(g),b=(0,o.generateRandom)(),_=i.GENERATOR.multiply(b),w=f.multiplyUnsafe(b),v=(0,o.compute_challenge)(m,[_,w]);return{inputs:g,proof:{Ax:_,AR:w,sx:(0,o.compute_s)(b,l,v)},newBalance:(0,s.createCipherBalance)(d,0n,1n)}},e.verifyRagequit=function(t,e){var r=c(t),a=(0,o.compute_challenge)(r,[e.Ax,e.AR]),s=n.poe._verify(t.y,i.GENERATOR,e.Ax,a,e.sx);if(0==s)throw new Error("error in poe y");var u=t.currentBalance,l=u.L,d=u.R,h=l.subtract(i.GENERATOR.multiply(t.amount));if(0==(s=n.poe._verify(h,d,e.AR,a,e.sx)))throw new Error("error in poe R")};var n=r(5356),i=r(9043),a=r(6783),s=r(2040),o=r(6885);function c(t){var r=t.prefix_data,n=[r.chain_id,r.tongo_address,r.sender_address,e.RAGEQUIT_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,t.currentBalance.L.toAffine().x,t.currentBalance.L.toAffine().y,t.currentBalance.R.toAffine().x,t.currentBalance.R.toAffine().y];return(0,a.compute_prefix)(n)}e.RAGEQUIT_CAIRO_STRING=8241982478457596276n},3373(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var i=["prefix"];function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function o(t,e,r){return(e=function(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.generateRangeProof=function(t,e,r,n){var a=c.range.prove(t,e,u.GENERATOR,u.SECONDARY_GENERATOR,r,n),s=a.inputs,o=a.proofs,l=a.r,d=o.proofs.map(function(t){t.prefix;var e=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,i);return e});return{r:l,range:{commitments:s.commitments,proofs:d}}},e.verifyRangeProof=function(t,e,r){var n={g1:u.GENERATOR,g2:u.SECONDARY_GENERATOR,bit_size:e,commitments:t.commitments},i={proofs:t.proofs.map(function(t,e){return s(s({},t),{},{prefix:r+BigInt(e)})})};return c.range.verify(n,i)};var c=r(5356),u=r(9043)},4499(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROLLOVER_CAIRO_STRING=void 0,e.proveRollover=function(t,e,r){var n=t,s={y:a.GENERATOR.multiply(n),nonce:e,prefix_data:r},c=o(s),u=i.poe.prove(n,a.GENERATOR,c).proof;return{inputs:s,proof:{Ax:u.A,sx:u.s}}},e.verifyRollover=function(t,e){var r=o(t),s=(0,n.compute_challenge)(r,[e.Ax]);if(0==i.poe._verify(t.y,a.GENERATOR,e.Ax,s,e.sx))throw new Error("verifyRollover failed")};var n=r(6885),i=r(5356),a=r(9043),s=r(6783);function o(t){var r=t.prefix_data,n=[r.chain_id,r.tongo_address,r.sender_address,e.ROLLOVER_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce];return(0,s.compute_prefix)(n)}e.ROLLOVER_CAIRO_STRING=8245928655720965490n},9705(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSFER_CAIRO_STRING=void 0,e.proveTransfer=function(t,e,r,i,c,d,h,f){var p=t,y=s.GENERATOR.multiply(p),g=c.L,m=c.R,b=i,_=r-b,w=a.range.pregenerate_randomness(h),v=w.randomness,E=w.total_random,A=(0,u.createCipherBalance)(s.SECONDARY_GENERATOR,i,E),T=(0,u.createCipherBalance)(y,b,E),S=(0,u.createCipherBalance)(e,b,E),I=a.range.pregenerate_randomness(h),k=I.randomness,x=I.total_random,B={from:y,to:e,nonce:d,currentBalance:c,transferBalance:S,transferBalanceSelf:T,auxiliarCipher:A,auxiliarCipher2:(0,u.createCipherBalance)(s.SECONDARY_GENERATOR,_,x),bit_size:h,prefix_data:f},C=l(B),R=(0,o.generateRangeProof)(b,h,v,C),O=R.r,N=R.range;if(O!==E)throw new Error("random missmatch");var D=(0,o.generateRangeProof)(_,h,k,C),P=D.r,L=D.range;if(P!==x)throw new Error("random missmatch");var U=m.subtract(T.R),F=(0,n.generateRandom)(),V=(0,n.generateRandom)(),H=(0,n.generateRandom)(),M=(0,n.generateRandom)(),\$=(0,n.generateRandom)(),j=s.GENERATOR.multiplyUnsafe(F),q=s.GENERATOR.multiplyUnsafe(H),z=s.GENERATOR.multiplyUnsafe(\$),G=s.GENERATOR.multiplyUnsafe(V).add(y.multiplyUnsafe(H)),Y=s.GENERATOR.multiplyUnsafe(V).add(e.multiplyUnsafe(H)),K=s.GENERATOR.multiplyUnsafe(V).add(s.SECONDARY_GENERATOR.multiplyUnsafe(H)),W=s.GENERATOR.multiplyUnsafe(M).add(U.multiplyUnsafe(F)),Z=s.GENERATOR.multiplyUnsafe(M).add(s.SECONDARY_GENERATOR.multiplyUnsafe(\$)),X=[j,q,z,G,W,K,Z,Y],J=(0,n.compute_challenge)(C,X),Q=(0,n.compute_s)(F,p,J),tt=(0,n.compute_s)(V,b,J);return{inputs:B,proof:{A_x:j,A_r:q,A_r2:z,A_b:G,A_b2:W,A_v:K,A_v2:Z,A_bar:Y,s_x:Q,s_r:(0,n.compute_s)(H,O,J),s_b:tt,s_b2:(0,n.compute_s)(M,_,J),s_r2:(0,n.compute_s)(\$,P,J),range:N,range2:L},newBalance:{L:g.subtract(T.L),R:m.subtract(T.R)}}},e.verifyTransfer=function(t,e){var r=t.bit_size,a=l(t),c=(0,n.compute_challenge)(a,[e.A_x,e.A_r,e.A_r2,e.A_b,e.A_b2,e.A_v,e.A_v2,e.A_bar]),u=t.currentBalance,d=u.L,h=u.R,f=t.transferBalanceSelf,p=f.L,y=f.R,g=t.transferBalance,m=g.L,b=g.R,_=t.auxiliarCipher,w=_.L,v=_.R,E=t.auxiliarCipher2,A=E.L,T=E.R,S=i.poe._verify(t.from,s.GENERATOR,e.A_x,c,e.s_x);if(0==S)throw new Error("error in poe for y");var I={L1:p,R1:y,L2:m,R2:b,g:s.GENERATOR,y1:t.from,y2:t.to},k={AL1:e.A_b,AR1:e.A_r,AL2:e.A_bar,AR2:e.A_r,c,sb:e.s_b,sr1:e.s_r,sr2:e.s_r};if(0==(S=i.SameEncrypt.verify(I,k)))throw new Error("error SameEncryp");var x=(0,o.verifyRangeProof)(e.range,r,a);if(0==x)throw new Error("erro in range for V");if(!w.equals(x))throw new Error("V missmatch");var B={L:w,R:v,g1:s.GENERATOR,g2:s.SECONDARY_GENERATOR},C={AL:e.A_v,AR:e.A_r,c,sb:e.s_b,sr:e.s_r};if(0==(S=i.ElGamal.verify(B,C)))throw new Error("erro elGamalProof");var R=d.subtract(p),O=h.subtract(y),N=(0,o.verifyRangeProof)(e.range2,r,a);if(0==N)throw new Error("erro in range for V2");if(!A.equals(N))throw new Error("V2 missmatch");var D={L1:R,R1:O,L2:A,R2:T,g:s.GENERATOR,y1:t.from,y2:s.SECONDARY_GENERATOR},P={Ax:e.A_x,AL1:e.A_b2,AL2:e.A_v2,AR2:e.A_r2,c,sb:e.s_b2,sx:e.s_x,sr2:e.s_r2};if(0==(S=i.SameEncryptUnknownRandom.verify(D,P)))throw new Error("error in sameEncrypUnkownRandom")};var n=r(6885),i=r(5356),a=r(5356),s=r(9043),o=r(3373),c=r(6783),u=r(2040);function l(t){var r=t.prefix_data,n=r.chain_id,i=r.tongo_address,a=r.sender_address,s=t.currentBalance,o=s.L,u=s.R,l=t.transferBalanceSelf,d=l.L,h=l.R,f=t.transferBalance,p=f.L,y=f.R,g=t.auxiliarCipher,m=g.L,b=g.R,_=t.auxiliarCipher2,w=_.L,v=_.R,E=[n,i,a,e.TRANSFER_CAIRO_STRING,t.from.toAffine().x,t.from.toAffine().y,t.to.toAffine().x,t.to.toAffine().y,t.nonce,o.toAffine().x,o.toAffine().y,u.toAffine().x,u.toAffine().y,d.toAffine().x,d.toAffine().y,h.toAffine().x,h.toAffine().y,p.toAffine().x,p.toAffine().y,y.toAffine().x,y.toAffine().y,m.toAffine().x,m.toAffine().y,b.toAffine().x,b.toAffine().y,w.toAffine().x,w.toAffine().y,v.toAffine().x,v.toAffine().y];return(0,c.compute_prefix)(E)}e.TRANSFER_CAIRO_STRING=8390876182755042674n},7340(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WITHDRAW_CAIRO_STRING=void 0,e.proveWithdraw=function(t,r,i,c,d,h,f,p){var y=t,g=s.GENERATOR.multiply(y),m=d.L,b=d.R,_=m.subtract(b.multiplyUnsafe(y)),w=s.GENERATOR.multiplyUnsafe(r);if(!_.equals(w))throw new Error("storedBalance is not an encryption of balance");var v=r-i,E=a.range.pregenerate_randomness(f),A=E.randomness,T=E.total_random,S={y:g,nonce:h,currentBalance:d,to:c,amount:i,bit_size:f,auxiliarCipher:(0,u.createCipherBalance)(s.SECONDARY_GENERATOR,v,T),prefix_data:p},I=l(S),k=(0,o.generateRangeProof)(v,f,A,I),x=k.r,B=k.range;if(x!==T)throw new Error("random mismatch");var C=(0,n.generateRandom)(),R=(0,n.generateRandom)(),O=(0,n.generateRandom)(),N=s.GENERATOR.multiplyUnsafe(R),D=s.GENERATOR.multiplyUnsafe(O),P=s.GENERATOR.multiplyUnsafe(C).add(b.multiplyUnsafe(R)),L=s.GENERATOR.multiplyUnsafe(C).add(s.SECONDARY_GENERATOR.multiplyUnsafe(O)),U=(0,n.compute_challenge)(I,[N,D,P,L]),F=(0,n.compute_s)(C,v,U),V={A_x:N,A_r:D,A:P,A_v:L,sx:(0,n.compute_s)(R,y,U),sb:F,sr:(0,n.compute_s)(O,x,U),range:B},H=(0,u.createCipherBalance)(g,i,e.WITHDRAW_CAIRO_STRING);return{inputs:S,proof:V,newBalance:{L:m.subtract(H.L),R:b.subtract(H.R)}}},e.verifyWithdraw=function(t,e){var r=t.bit_size,a=l(t),c=(0,n.compute_challenge)(a,[e.A_x,e.A_r,e.A,e.A_v]),u=t.currentBalance,d=u.L,h=u.R,f=t.auxiliarCipher,p=f.L,y=f.R;d=d.subtract(s.GENERATOR.multiply(t.amount));var g=(0,o.verifyRangeProof)(e.range,r,a);if(0==g)throw new Error("erro in range for V");if(!p.equals(g))throw new Error("V missmatch");var m={L1:d,R1:h,L2:p,R2:y,g:s.GENERATOR,y1:t.y,y2:s.SECONDARY_GENERATOR},b={Ax:e.A_x,AL1:e.A,AL2:e.A_v,AR2:e.A_r,c,sb:e.sb,sx:e.sx,sr2:e.sr};if(0==i.SameEncryptUnknownRandom.verify(m,b))throw new Error("error in SameEncrpyUnkownRandom")};var n=r(6885),i=r(5356),a=r(5356),s=r(9043),o=r(3373),c=r(6783),u=r(2040);function l(t){var r=t.prefix_data,n=r.chain_id,i=r.tongo_address,a=r.sender_address,s=t.currentBalance,o=s.L,u=s.R,l=t.auxiliarCipher,d=l.L,h=l.R,f=[n,i,a,e.WITHDRAW_CAIRO_STRING,t.y.toAffine().x,t.y.toAffine().y,t.nonce,t.amount,t.to,o.toAffine().x,o.toAffine().y,u.toAffine().x,u.toAffine().y,d.toAffine().x,d.toAffine().y,h.toAffine().x,h.toAffine().y];return(0,c.compute_prefix)(f)}e.WITHDRAW_CAIRO_STRING=8604536554778681719n},9889(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tongoAbi=void 0,e.tongoAbi=[{type:"impl",name:"TongoImpl",interface_name:"tongo::tongo::ITongo::ITongo"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::common::pubkey::PubKey",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"core::integer::u512",members:[{name:"limb0",type:"core::integer::u128"},{name:"limb1",type:"core::integer::u128"},{name:"limb2",type:"core::integer::u128"},{name:"limb3",type:"core::integer::u128"}]},{type:"struct",name:"tongo::structs::aecipher::AEBalance",members:[{name:"ciphertext",type:"core::integer::u512"},{name:"nonce",type:"core::integer::u256"}]},{type:"struct",name:"tongo::structs::common::starkpoint::StarkPoint",members:[{name:"x",type:"core::felt252"},{name:"y",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::fund::ProofOfFund",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::common::cipherbalance::CipherBalance",members:[{name:"L",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"R",type:"tongo::structs::common::starkpoint::StarkPoint"}]},{type:"struct",name:"tongo::structs::operations::audit::ProofOfAudit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AL1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::audit::Audit",members:[{name:"auditedBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::audit::ProofOfAudit"}]},{type:"enum",name:"core::option::Option::<tongo::structs::operations::audit::Audit>",variants:[{name:"Some",type:"tongo::structs::operations::audit::Audit"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::operations::fund::Fund",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::fund::ProofOfFund"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::structs::common::starkpoint::StarkPoint>"}]},{type:"struct",name:"tongo::verifier::range::bitProof",members:[{name:"A0",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A1",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"c0",type:"core::felt252"},{name:"s0",type:"core::felt252"},{name:"s1",type:"core::felt252"}]},{type:"struct",name:"core::array::Span::<tongo::verifier::range::bitProof>",members:[{name:"snapshot",type:"@core::array::Array::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::verifier::range::Range",members:[{name:"commitments",type:"core::array::Span::<tongo::structs::common::starkpoint::StarkPoint>"},{name:"proofs",type:"core::array::Span::<tongo::verifier::range::bitProof>"}]},{type:"struct",name:"tongo::structs::operations::withdraw::ProofOfWithdraw",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"},{name:"sb",type:"core::felt252"},{name:"sr",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::withdraw::Withdraw",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::withdraw::ProofOfWithdraw"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::ragequit::ProofOfRagequit",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"AR",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::ragequit::Ragequit",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u128"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::ragequit::ProofOfRagequit"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::transfer::ProofOfTransfer",members:[{name:"A_x",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_r2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_b2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_v2",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"A_bar",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"s_x",type:"core::felt252"},{name:"s_r",type:"core::felt252"},{name:"s_b",type:"core::felt252"},{name:"s_b2",type:"core::felt252"},{name:"s_r2",type:"core::felt252"},{name:"range",type:"tongo::verifier::range::Range"},{name:"range2",type:"tongo::verifier::range::Range"}]},{type:"struct",name:"tongo::structs::operations::transfer::Transfer",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey"},{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance"},{name:"auxiliarCipher",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"auxiliarCipher2",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"proof",type:"tongo::structs::operations::transfer::ProofOfTransfer"},{name:"auditPart",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"},{name:"auditPartTransfer",type:"core::option::Option::<tongo::structs::operations::audit::Audit>"}]},{type:"struct",name:"tongo::structs::operations::rollover::ProofOfRollOver",members:[{name:"Ax",type:"tongo::structs::common::starkpoint::StarkPoint"},{name:"sx",type:"core::felt252"}]},{type:"struct",name:"tongo::structs::operations::rollover::Rollover",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey"},{name:"hint",type:"tongo::structs::aecipher::AEBalance"},{name:"proof",type:"tongo::structs::operations::rollover::ProofOfRollOver"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>",variants:[{name:"Some",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"None",type:"()"}]},{type:"enum",name:"core::option::Option::<tongo::structs::aecipher::AEBalance>",variants:[{name:"Some",type:"tongo::structs::aecipher::AEBalance"},{name:"None",type:"()"}]},{type:"struct",name:"tongo::structs::common::state::State",members:[{name:"balance",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"pending",type:"tongo::structs::common::cipherbalance::CipherBalance"},{name:"nonce",type:"core::integer::u64"},{name:"audit",type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"},{name:"ae_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"},{name:"ae_audit_balance",type:"core::option::Option::<tongo::structs::aecipher::AEBalance>"}]},{type:"enum",name:"core::option::Option::<tongo::structs::common::pubkey::PubKey>",variants:[{name:"Some",type:"tongo::structs::common::pubkey::PubKey"},{name:"None",type:"()"}]},{type:"interface",name:"tongo::tongo::ITongo::ITongo",items:[{type:"function",name:"ERC20",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"get_rate",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"get_bit_size",inputs:[],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"get_owner",inputs:[],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"fund",inputs:[{name:"fund",type:"tongo::structs::operations::fund::Fund"}],outputs:[],state_mutability:"external"},{type:"function",name:"withdraw",inputs:[{name:"withdraw",type:"tongo::structs::operations::withdraw::Withdraw"}],outputs:[],state_mutability:"external"},{type:"function",name:"ragequit",inputs:[{name:"ragequit",type:"tongo::structs::operations::ragequit::Ragequit"}],outputs:[],state_mutability:"external"},{type:"function",name:"transfer",inputs:[{name:"transfer",type:"tongo::structs::operations::transfer::Transfer"}],outputs:[],state_mutability:"external"},{type:"function",name:"rollover",inputs:[{name:"rollover",type:"tongo::structs::operations::rollover::Rollover"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_pending",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::cipherbalance::CipherBalance"}],state_mutability:"view"},{type:"function",name:"get_audit",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::option::Option::<tongo::structs::common::cipherbalance::CipherBalance>"}],state_mutability:"view"},{type:"function",name:"get_nonce",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"get_state",inputs:[{name:"y",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[{type:"tongo::structs::common::state::State"}],state_mutability:"view"},{type:"function",name:"auditor_key",inputs:[],outputs:[{type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}],state_mutability:"view"},{type:"function",name:"change_auditor_key",inputs:[{name:"new_auditor_key",type:"tongo::structs::common::pubkey::PubKey"}],outputs:[],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"ERC20",type:"core::starknet::contract_address::ContractAddress"},{name:"rate",type:"core::integer::u256"},{name:"bit_size",type:"core::integer::u32"},{name:"auditor_key",type:"core::option::Option::<tongo::structs::common::pubkey::PubKey>"}]},{type:"event",name:"tongo::structs::events::TransferEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"transferBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"transferBalanceSelf",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hintTransfer",type:"tongo::structs::aecipher::AEBalance",kind:"data"},{name:"hintLeftover",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::FundEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"}]},{type:"event",name:"tongo::structs::events::RolloverEvent",kind:"struct",members:[{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"rollovered",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::WithdrawEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::RagequitEvent",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"amount",type:"core::integer::u128",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"tongo::structs::events::BalanceDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::TransferDeclared",kind:"struct",members:[{name:"from",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"to",type:"tongo::structs::common::pubkey::PubKey",kind:"key"},{name:"nonce",type:"core::integer::u64",kind:"key"},{name:"auditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"},{name:"declaredCipherBalance",type:"tongo::structs::common::cipherbalance::CipherBalance",kind:"data"},{name:"hint",type:"tongo::structs::aecipher::AEBalance",kind:"data"}]},{type:"event",name:"tongo::structs::events::AuditorPubKeySet",kind:"struct",members:[{name:"keyNumber",type:"core::integer::u128",kind:"key"},{name:"AuditorPubKey",type:"tongo::structs::common::pubkey::PubKey",kind:"data"}]},{type:"event",name:"tongo::tongo::Tongo::Tongo::Event",kind:"enum",variants:[{name:"TransferEvent",type:"tongo::structs::events::TransferEvent",kind:"nested"},{name:"FundEvent",type:"tongo::structs::events::FundEvent",kind:"nested"},{name:"RolloverEvent",type:"tongo::structs::events::RolloverEvent",kind:"nested"},{name:"WithdrawEvent",type:"tongo::structs::events::WithdrawEvent",kind:"nested"},{name:"RagequitEvent",type:"tongo::structs::events::RagequitEvent",kind:"nested"},{name:"BalanceDeclared",type:"tongo::structs::events::BalanceDeclared",kind:"nested"},{name:"TransferDeclared",type:"tongo::structs::events::TransferDeclared",kind:"nested"},{name:"AuditorPubKeySet",type:"tongo::structs::events::AuditorPubKeySet",kind:"nested"}]}]},6783(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectivePoint=void 0,e.createCipherBalance=function(t,e,r){return 0n===e?{L:t.multiplyUnsafe(r),R:o.GENERATOR.multiplyUnsafe(r)}:{L:o.GENERATOR.multiply(e).add(t.multiplyUnsafe(r)),R:o.GENERATOR.multiplyUnsafe(r)}},e.compute_prefix=function(t){return(0,s.poseidonHashMany)(t)},e.starkPointToProjectivePoint=c,e.projectivePointToStarkPoint=u,e.derivePublicKey=function(t){return u(o.GENERATOR.multiply(t))},e.pubKeyAffineToHex=function(t){var e=c(t);return(0,a.bytesToHex)(e.toRawBytes(!0))},e.pubKeyAffineToBase58=function(t){var e=c(t);return i.base58.encode(e.toRawBytes(!0))},e.pubKeyBase58ToAffine=function(t){var r=i.base58.decode(t);return e.ProjectivePoint.fromHex((0,a.bytesToHex)(r))},e.pubKeyBase58ToHex=function(t){var e=i.base58.decode(t);return(0,a.bytesToHex)(e)},e.parseCipherBalance=function(t){var e=t.L,r=t.R;return{L:c(e),R:c(r)}};var n=r(6885),i=r(3203),a=r(9175),s=r(4246),o=r(9043);function c(t){var r=t.x,n=t.y;return new e.ProjectivePoint(BigInt(r),BigInt(n),1n)}function u(t){var e=t.toAffine();return{x:e.x,y:e.y}}e.ProjectivePoint=n.ProjectivePoint},227(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesOrNumToBigInt=function(t){return t instanceof Uint8Array?i.num.toBigInt("0x"+(0,n.bytesToHex)(t)):i.num.toBigInt(t)},e.isUint256=function(t){var e=t.low,r=t.high;return void 0!==e&&void 0!==r},e.castBigInt=function(t){return i.num.isBigNumberish(t)?i.num.toBigInt(t):i.uint256.uint256ToBN(t)},e.createCipherBalance=function(t,e,r){return 0n===e?{L:t.multiplyUnsafe(r),R:a.GENERATOR.multiplyUnsafe(r)}:{L:a.GENERATOR.multiply(e).add(t.multiplyUnsafe(r)),R:a.GENERATOR.multiplyUnsafe(r)}},e.decipherBalance=function(t,e,r){var n=r.multiply(t);if(n.equals(e))return 0n;var i=e.subtract(n),s=1n,o=a.GENERATOR;if(o.equals(i))return 1n;for(;s<Math.pow(2,32);)if(s+=1n,(o=o.add(a.GENERATOR)).equals(i))return s;throw new Error("Decription of Cipherbalance has failed")},e.assertBalance=function(t,e,r,n){var i=n.multiply(t);return r.subtract(i).equals(a.GENERATOR.multiplyUnsafe(e))},e.pubKeyFromSecret=function(t){return(0,s.projectivePointToStarkPoint)(a.GENERATOR.multiply(t))};var n=r(9175),i=r(5556),a=r(9043),s=r(6783)},2040(t,e,r){"use strict";r.r(e),r.d(e,{assertBalance:()=>bc,bytesOrNumToBigInt:()=>fc,castBigInt:()=>yc,createCipherBalance:()=>gc,decipherBalance:()=>mc,isUint256:()=>pc,pubKeyFromSecret:()=>_c});const n=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),i=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));var a=r(9321),s=r(4302),o=r(1809),c=r(591),u=r(1605);function l(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function d(t,...e){if(!l(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function h(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function f(t){if("function"!=typeof t)throw new Error("function expected");return!0}function p(t,e){if("string"!=typeof e)throw new Error(\`\${t}: string expected\`);return!0}function y(t){if(!Number.isSafeInteger(t))throw new Error(\`invalid integer: \${t}\`)}function g(t){if(!Array.isArray(t))throw new Error("array expected")}function m(t,e){if(!h(!0,e))throw new Error(\`\${t}: array of strings expected\`)}function b(t,e){if(!h(!1,e))throw new Error(\`\${t}: array of numbers expected\`)}function _(...t){const e=t=>t,r=(t,e)=>r=>t(e(r));return{encode:t.map(t=>t.encode).reduceRight(r,e),decode:t.map(t=>t.decode).reduce(r,e)}}function w(t){const e="string"==typeof t?t.split(""):t,r=e.length;m("alphabet",e);const n=new Map(e.map((t,e)=>[t,e]));return{encode:n=>(g(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(\`alphabet.encode: digit index outside alphabet "\${n}". Allowed: \${t}\`);return e[n]})),decode:e=>(g(e),e.map(e=>{p("alphabet.decode",e);const r=n.get(e);if(void 0===r)throw new Error(\`Unknown letter: "\${e}". Allowed: \${t}\`);return r}))}}function v(t=""){return p("join",t),{encode:e=>(m("join.decode",e),e.join(t)),decode:e=>(p("join.decode",e),e.split(t))}}function E(t,e="="){return y(t),p("padding",e),{encode(r){for(m("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){m("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function A(t){return f(t),{encode:t=>t,decode:e=>t(e)}}function T(t,e,r){if(e<2)throw new Error(\`convertRadix: invalid from=\${e}, base cannot be less than 2\`);if(r<2)throw new Error(\`convertRadix: invalid to=\${r}, base cannot be less than 2\`);if(g(t),!t.length)return[];let n=0;const i=[],a=Array.from(t,t=>{if(y(t),t<0||t>=e)throw new Error(\`invalid integer: \${t}\`);return t}),s=a.length;for(;;){let t=0,o=!0;for(let i=n;i<s;i++){const s=a[i],c=e*t,u=c+s;if(!Number.isSafeInteger(u)||c/e!==t||u-s!==c)throw new Error("convertRadix: carry overflow");const l=u/r;t=u%r;const d=Math.floor(l);if(a[i]=d,!Number.isSafeInteger(d)||d*r+t!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const S=(t,e)=>0===e?t:S(e,t%e),I=(t,e)=>t+(e-S(t,e)),k=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function x(t,e,r,n){if(g(t),e<=0||e>32)throw new Error(\`convertRadix2: wrong from=\${e}\`);if(r<=0||r>32)throw new Error(\`convertRadix2: wrong to=\${r}\`);if(I(e,r)>32)throw new Error(\`convertRadix2: carry overflow from=\${e} to=\${r} carryBits=\${I(e,r)}\`);let i=0,a=0;const s=k[e],o=k[r]-1,c=[];for(const n of t){if(y(n),n>=s)throw new Error(\`convertRadix2: invalid data word=\${n} from=\${e}\`);if(i=i<<e|n,a+e>32)throw new Error(\`convertRadix2: carry overflow pos=\${a} from=\${e}\`);for(a+=e;a>=r;a-=r)c.push((i>>a-r&o)>>>0);const t=k[a];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<r-a&o,!n&&a>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(\`Non-zero padding: \${i}\`);return n&&a>0&&c.push(i>>>0),c}function B(t,e=!1){if(y(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(I(8,t)>32||I(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!l(r))throw new Error("radix2.encode input should be Uint8Array");return x(Array.from(r),8,t,!e)},decode:r=>(b("radix2.decode",r),Uint8Array.from(x(r,t,8,e)))}}function C(t){return f(t),function(...e){try{return t.apply(null,e)}catch(t){}}}_(B(4),w("0123456789ABCDEF"),v("")),_(B(5),w("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),E(5),v(""));const R=(_(B(5),w("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),v("")),_(B(5),w("0123456789ABCDEFGHIJKLMNOPQRSTUV"),E(5),v("")),_(B(5),w("0123456789ABCDEFGHIJKLMNOPQRSTUV"),v("")),_(B(5),w("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),v(""),A(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)()),O=R?{encode:t=>(d(t),t.toBase64()),decode:t=>(p("base64",t),Uint8Array.fromBase64(t,{lastChunkHandling:"strict"}))}:_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),E(6),v("")),N=(_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),v("")),R||_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),E(6),v("")),_(B(6),w("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),v("")),t=>{return _((y(e=58),{encode:t=>{if(!l(t))throw new Error("radix.encode input should be Uint8Array");return T(Array.from(t),256,e)},decode:t=>(b("radix.decode",t),Uint8Array.from(T(t,e,256)))}),w(t),v(""));var e}),D=(N("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),N("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),N("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),_(w("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),v(""))),P=[996825010,642813549,513874426,1027748829,705979059];function L(t){const e=t>>25;let r=(33554431&t)<<5;for(let t=0;t<P.length;t++)1==(e>>t&1)&&(r^=P[t]);return r}function U(t,e,r=1){const n=t.length;let i=1;for(let e=0;e<n;e++){const r=t.charCodeAt(e);if(r<33||r>126)throw new Error(\`Invalid prefix (\${t})\`);i=L(i)^r>>5}i=L(i);for(let e=0;e<n;e++)i=L(i)^31&t.charCodeAt(e);for(let t of e)i=L(i)^t;for(let t=0;t<6;t++)i=L(i);return i^=r,D.encode(x([i%k[30]],30,5,!1))}function F(t){const e="bech32"===t?1:734539939,r=B(5),n=r.decode,i=r.encode,a=C(n);function s(t,r,n=90){p("bech32.encode prefix",t),l(r)&&(r=Array.from(r)),b("bech32.encode",r);const i=t.length;if(0===i)throw new TypeError(\`Invalid prefix length \${i}\`);const a=i+7+r.length;if(!1!==n&&a>n)throw new TypeError(\`Length \${a} exceeds limit \${n}\`);const s=t.toLowerCase(),o=U(s,r,e);return\`\${s}1\${D.encode(r)}\${o}\`}function o(t,r=90){p("bech32.decode input",t);const n=t.length;if(n<8||!1!==r&&n>r)throw new TypeError(\`invalid string length: \${n} (\${t}). Expected (8..\${r})\`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const a=i.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const s=i.slice(0,a),o=i.slice(a+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const c=D.decode(o).slice(0,-6),u=U(s,c,e);if(!o.endsWith(u))throw new Error(\`Invalid checksum in \${t}: expected "\${u}"\`);return{prefix:s,words:c}}return{encode:s,decode:o,encodeFromBytes:function(t,e){return s(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:r}=o(t,!1);return{prefix:e,words:r,bytes:n(r)}},decodeUnsafe:C(o),fromWords:n,fromWordsUnsafe:a,toWords:i}}F("bech32"),F("bech32m");(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)()||_(B(4),w("0123456789abcdef"),v(""),A(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(\`hex.decode: expected string, got \${typeof t} with length \${t.length}\`);return t.toLowerCase()}));var V=r(4123),H=r(8293);function M(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function \$(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function j(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function q(t,e){\$(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const z=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),G=(t,e)=>t<<32-e|t>>>e,Y=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),K=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function W(t){for(let e=0;e<t.length;e++)t[e]=K(t[e])}function Z(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),\$(t),t}class X{clone(){return this._cloneInto()}}function J(t){const e=e=>t().update(Z(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}const Q=(t,e,r)=>t&e^~t&r,tt=(t,e,r)=>t&e^t&r^e&r;class et extends X{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=z(this.buffer)}update(t){j(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=Z(t)).length;for(let a=0;a<i;){const s=Math.min(n-this.pos,i-a);if(s===n){const e=z(t);for(;n<=i-a;a+=n)this.process(e,a);continue}r.set(t.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){j(this),q(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=z(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}const rt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),it=new Uint32Array(64);class at extends et{constructor(){super(64,32,8,!1),this.A=0|nt[0],this.B=0|nt[1],this.C=0|nt[2],this.D=0|nt[3],this.E=0|nt[4],this.F=0|nt[5],this.G=0|nt[6],this.H=0|nt[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)it[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=it[t-15],r=it[t-2],n=G(e,7)^G(e,18)^e>>>3,i=G(r,17)^G(r,19)^r>>>10;it[t]=i+it[t-7]+n+it[t-16]|0}let{A:r,B:n,C:i,D:a,E:s,F:o,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(G(s,6)^G(s,11)^G(s,25))+Q(s,o,c)+rt[t]+it[t]|0,l=(G(r,2)^G(r,13)^G(r,22))+tt(r,n,i)|0;u=c,c=o,o=s,s=a+e|0,a=i,i=n,n=r,r=e+l|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,a,s,o,c,u)}roundClean(){it.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const st=J(()=>new at);var ot=r(235);const ct=BigInt(2**32-1),ut=BigInt(32);function lt(t,e=!1){return e?{h:Number(t&ct),l:Number(t>>ut&ct)}:{h:0|Number(t>>ut&ct),l:0|Number(t&ct)}}function dt(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:s}=lt(t[i],e);[r[i],n[i]]=[a,s]}return[r,n]}const ht=[],ft=[],pt=[],yt=BigInt(0),gt=BigInt(1),mt=BigInt(2),bt=BigInt(7),_t=BigInt(256),wt=BigInt(113);for(let t=0,e=gt,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ht.push(2*(5*n+r)),ft.push((t+1)*(t+2)/2%64);let i=yt;for(let t=0;t<7;t++)e=(e<<gt^(e>>bt)*wt)%_t,e&mt&&(i^=gt<<(gt<<BigInt(t))-gt);pt.push(i)}const[vt,Et]=dt(pt,!0),At=(t,e,r)=>r>32?((t,e,r)=>e<<r-32|t>>>64-r)(t,e,r):((t,e,r)=>t<<r|e>>>32-r)(t,e,r),Tt=(t,e,r)=>r>32?((t,e,r)=>t<<r-32|e>>>64-r)(t,e,r):((t,e,r)=>e<<r|t>>>32-r)(t,e,r);class St extends X{constructor(t,e,r,n=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,M(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){Y||W(this.state32),function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,a=r[i],s=r[i+1],o=At(a,s,1)^r[n],c=Tt(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=ft[r],a=At(e,i,n),s=Tt(e,i,n),o=ht[r];e=t[o],i=t[o+1],t[o]=a,t[o+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=vt[n],t[1]^=Et[n]}r.fill(0)}(this.state32,this.rounds),Y||W(this.state32),this.posOut=0,this.pos=0}update(t){j(this);const{blockLen:e,state:r}=this,n=(t=Z(t)).length;for(let i=0;i<n;){const a=Math.min(e-this.pos,n-i);for(let e=0;e<a;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){j(this,!1),\$(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return M(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(q(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return t||(t=new St(e,r,n,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}const It=((t,e,r)=>J(()=>new St(e,t,r)))(1,136,32);var kt=r(5591),xt=r(7713),Bt=r(3075),Ct=r(9979),Rt=r(6993),Ot=r(8287).hp,Nt=Object.defineProperty,Dt=Object.getOwnPropertyDescriptor,Pt=Object.getOwnPropertyNames,Lt=Object.prototype.hasOwnProperty,Ut=(t,e)=>{for(var r in e)Nt(t,r,{get:e[r],enumerable:!0})},Ft=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Pt(e))Lt.call(t,i)||i===r||Nt(t,i,{get:()=>e[i],enumerable:!(n=Dt(e,i))||n.enumerable});return t},Vt=(t,e,r)=>(Ft(t,e,"default"),r&&Ft(r,e,"default"));Ut({},{ADDR_BOUND:()=>ge,API_VERSION:()=>fe,BaseUrl:()=>Ue,DEFAULT_GLOBAL_CONFIG:()=>\$e,HARDENING_4BYTES:()=>Le,HARDENING_BYTE:()=>Pe,IS_BROWSER:()=>jt,LegacyUDC:()=>Ce,MASK_250:()=>de,MASK_31:()=>he,MAX_STORAGE_ITEM_SIZE:()=>ye,NetworkName:()=>Fe,OutsideExecutionCallerAny:()=>Oe,PAYMASTER_RPC_NODES:()=>qe,PRIME:()=>pe,RANGE_FELT:()=>be,RANGE_I128:()=>Be,RANGE_I16:()=>Ie,RANGE_I32:()=>ke,RANGE_I64:()=>xe,RANGE_I8:()=>Se,RANGE_U128:()=>Te,RANGE_U16:()=>we,RANGE_U32:()=>ve,RANGE_U64:()=>Ee,RANGE_U8:()=>_e,RANGE_U96:()=>Ae,RPC_DEFAULT_NODES:()=>je,SNIP9_V1_INTERFACE_ID:()=>Ne,SNIP9_V2_INTERFACE_ID:()=>De,SYSTEM_MESSAGES:()=>ze,StarknetChainId:()=>Ve,SupportedRpcVersion:()=>Me,TEXT_TO_FELT_MAX_LEN:()=>ue,TransactionHashPrefix:()=>He,UDC:()=>Re,ZERO:()=>le});var Ht={};Ut(Ht,{JRPC:()=>Mt,PAYMASTER_API:()=>u,RPCSPEC08:()=>a,RPCSPEC09:()=>o});var Mt={},\$t={};Vt(\$t,o),Vt(Ht,\$t),Ut({},{IS_BROWSER:()=>jt,addHexPrefix:()=>Jt,arrayBufferToString:()=>qt,atobUniversal:()=>Kt,bigIntToUint8Array:()=>oe,btoaUniversal:()=>Wt,buf2hex:()=>Zt,calcByteLength:()=>te,concatenateArrayBuffer:()=>ie,hexStringToUint8Array:()=>ae,padLeft:()=>Qt,pascalToSnake:()=>ne,removeHexPrefix:()=>Xt,sanitizeBytes:()=>ee,sanitizeHex:()=>re,stringToUint8Array:()=>se,uint8ArrayToBigInt:()=>ce,utf8ToArray:()=>Gt,utf8ToBigInt:()=>Yt,utf8ToUint8Array:()=>zt});var jt="undefined"!=typeof window;function qt(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function zt(t){return(new TextEncoder).encode(t)}var Gt=zt;function Yt(t){return ce(zt(t))}function Kt(t){return O.decode(t)}function Wt(t){return O.encode(new Uint8Array(t))}function Zt(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function Xt(t){return t.replace(/^0x/i,"")}function Jt(t){return\`0x\${Xt(t)}\`}function Qt(t,e,r="0"){return function(t,e,r,n="0"){const i=e-t.length;let a=t;if(i>0){const e=n.repeat(i);a=r?e+t:t+e}return a}(t,e,!0,r)}function te(t,e=8){const{length:r}=t,n=r%e;return n?(r-n)/e*e+e:r}function ee(t,e=8,r="0"){return Qt(t,te(t,e),r)}function re(t){const e=ee(Xt(t),2);return e?Jt(e):e}var ne=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function ie(t){const e=t.reduce((t,e)=>t+e.byteLength,0),r=new Uint8Array(e);let n=0;return t.forEach(t=>{r.set(t,n),n+=t.byteLength}),r}function ae(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+\$/.test(e))throw new Error(\`Invalid hex string: "\${t}" contains non-hexadecimal characters\`);const r=e.length%2!=0?\`0\${e}\`:e,n=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2)n[t/2]=parseInt(r.substring(t,t+2),16);return n}function se(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)?ae(t):function(t){return/^[0-9]+\$/.test(t)}(t)?oe(BigInt(t)):zt(t)}function oe(t){if(t<0n)throw new Error(\`Cannot convert negative bigint \${t} to Uint8Array\`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=\`0\${e}\`);const r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t/2]=parseInt(e.substring(t,t+2),16);return r}function ce(t){if(!t||0===t.length)return 0n;let e="0x";for(let r=0;r<t.length;r+=1)e+=t[r].toString(16).padStart(2,"0");return BigInt(e)}var ue=31,le=0n,de=2n**250n-1n,he=2n**31n-1n,fe=le,pe=2n**251n+17n*2n**192n+1n,ye=256n,ge=2n**251n-ye,me=(t,e)=>({min:t,max:e}),be=me(le,pe-1n),_e=me(le,255n),we=me(le,65535n),ve=me(le,2n**32n-1n),Ee=me(le,2n**64n-1n),Ae=me(le,2n**96n-1n),Te=me(le,2n**128n-1n),Se=me(-128n,127n),Ie=me(-32768n,32767n),ke=me(-(2n**31n),2n**31n-1n),xe=me(-(2n**63n),2n**63n-1n),Be=me(-(2n**127n),2n**127n-1n),Ce={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Re={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},Oe="0x414e595f43414c4c4552",Ne="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",De="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Pe=128,Le=2147483648n,Ue={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},Fe={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Ve={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},He={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},Me={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},\$e={rpcVersion:"0.9.0",transactionVersion:Ht.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},je={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},qe={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ze={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},Ge=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...\$e}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Ye={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Ke=class t{static instance;config;constructor(){this.config=Ge}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Ye[e]}formatMessage(t){const{level:e,message:r,timestamp:n,data:i}=t;let a=\`[\${n}] \${e}: \${r}\`;if(i)try{a+=\`\\n\${JSON.stringify(i,null,2)}\`}catch(t){a+=\`\\n[JSON.stringify Error/Circular]: \${t}\`}return a}log(t,e,r){if(!this.shouldLog(Ye[t]))return;const n={level:t,message:e,timestamp:this.getTimestamp(),data:r},i=this.formatMessage(n);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Ye).filter(t=>this.shouldLog(Ye[t])&&"OFF"!==t)}}.getInstance(),We={};Ut(We,{RpcChannel:()=>gs});var{ETransactionVersion:Ze}=o,{ETransactionVersion2:Xe}=o,{ETransactionVersion3:Je}=o,{EDataAvailabilityMode:Qe}=a,{EDAMode:tr}=a;function er(t){return"l1_data_gas"in t}var{ETransactionStatus:rr}=a,{ETransactionExecutionStatus:nr}=a,{ETransactionType:ir}=o,{EBlockStatus:ar}=o,{ETransactionFinalityStatus:sr}=o,{ETransactionExecutionStatus:or}=o,{EBlockTag:cr}=o,ur="DEPLOY",lr="INVOKE",dr={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},hr={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},fr={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},pr={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},yr={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};Ut({},{parse:()=>mr,parseAlwaysAsBig:()=>br,stringify:()=>_r});var gr=t=>{if(!V.Fq(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},mr=t=>V.qg(String(t),void 0,gr),br=t=>V.qg(String(t),void 0,V.z3),_r=(t,e,r,n)=>V.As(t,e,r,n),wr=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,r){const n={id:r??\`batched_\${this.requestId+=1}\`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:_r(t),headers:this.headers})).json()}async fetch(t,e,r){const n=this.addPendingRequest(t,e,r);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const a=await this.batchPromises[n];delete this.batchPromises[n];const s=a.find(t=>t.id===n);if(!s)throw new Error(\`Couldn't find the result for the request. Method: \${String(t)}\`);return s}};function vr(t,e){if(!t)throw new Error(e||"Assertion failure")}var Er={};Ut(Er,{addPercent:()=>Wr,assertInRange:()=>Hr,bigNumberishArrayToDecimalStringArray:()=>Mr,bigNumberishArrayToHexadecimalStringArray:()=>\$r,cleanHex:()=>Vr,getDecimalString:()=>qr,getHexString:()=>zr,getHexStringArray:()=>Gr,getNext:()=>Jr,hexToBytes:()=>Kr,hexToDecimalString:()=>Fr,isBigNumberish:()=>Xr,isHex:()=>Cr,isHexString:()=>Rr,isStringWholeNumber:()=>jr,stringToSha256ToArrayBuff4:()=>Zr,toBigInt:()=>Or,toCairoBool:()=>Yr,toHex:()=>Dr,toHex64:()=>Ur,toHexString:()=>Pr,toStorageKey:()=>Lr,tryToBigInt:()=>Nr});var Ar=t=>void 0===t||void 0===t;function Tr(t){return"number"==typeof t}function Sr(t){return"boolean"==typeof t}function Ir(t){return"bigint"==typeof t}function kr(t){return"string"==typeof t}function xr(t){return void 0!==Ot&&t instanceof Ot}function Br(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Cr(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)}var Rr=Cr;function Or(t){return BigInt(t)}function Nr(t){return t?BigInt(t):void 0}function Dr(t){return Jt(Or(t).toString(16))}var Pr=Dr;function Lr(t){return Jt(Or(t).toString(16).padStart(64,"0"))}function Ur(t){const e=Jt(Or(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Fr(t){return BigInt(Jt(t)).toString(10)}function Vr(t){return t.toLowerCase().replace(/^(0x)0+/,"\$1")}function Hr(t,e,r,n=""){const i=""===n?"invalid length":\`invalid \${n} length\`,a=BigInt(t),s=BigInt(e),o=BigInt(r);vr(a>=s&&a<=o,\`Message not signable, \${i}.\`)}function Mr(t){return t.map(t=>Or(t).toString(10))}function \$r(t){return t.map(t=>Dr(t))}function jr(t){return/^\\d+\$/.test(t)}function qr(t){if(Cr(t))return Fr(t);if(jr(t))return t;throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function zr(t){if(Cr(t))return t;if(jr(t))return Pr(t);throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function Gr(t){return t.map(zr)}function Yr(t){return(+t).toString()}function Kr(t){if(!Cr(t))throw new Error(\`\${t} needs to be a hex-string\`);let e=Xt(t);return e.length%2!=0&&(e=\`0\${e}\`),(0,H.aT)(e)}function Wr(t,e){const r=BigInt(t);return r+r*BigInt(e)/100n}function Zr(t){var e;return Kr(Dr((e=BigInt(Jt(Zt(st(t)))),Number(e&he))))}function Xr(t){return Tr(t)||Ir(t)||kr(t)&&(Cr(t)||jr(t))}function Jr(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function Qr(t){const e=Xt(Dr(BigInt(t))),r=e.length%2==0?e:\`0\${e}\`;return Jt((0,ot.keccak)(Kr(Jt(r))).toString(16))}function tn(t){const e=BigInt(function(t){return Jt((0,ot.keccak)(Gt(t)).toString(16))}(t));return e&de}function en(t){return Dr(tn(t))}function rn(t){return Tr(t)||Ir(t)?Dr(t):Cr(t)?t:jr(t)?Dr(t):en(t)}function nn(t){const e=Jt(t.reduce((t,e)=>t+Xt(Dr(e)).padStart(64,"0"),""));return Jt((0,H.My)(It(Kr(e))))}function an(t,e,r,n,i){return nn([t,e,i,r,n.length,...n])}function sn(t,e,r){return nn([t,e,r.length,...r])}function on(t){return/^[\\x00-\\x7F]*\$/.test(t)}function cn(t){return t.length<=ue}function un(t){return/^[0-9]*\$/i.test(t)}function ln(t){return kr(t)&&!Cr(t)&&!jr(t)}Ut({},{getL1MessageHash:()=>sn,getL2MessageHash:()=>an,getSelector:()=>rn,getSelectorFromName:()=>en,keccakBn:()=>Qr,solidityUint256PackedKeccak256:()=>nn,starknetKeccak:()=>tn}),Ut({},{decodeShortString:()=>yn,encodeShortString:()=>pn,isASCII:()=>on,isDecimalString:()=>un,isLongText:()=>hn,isShortString:()=>cn,isShortText:()=>dn,isText:()=>ln,splitLongString:()=>fn});var dn=t=>ln(t)&&cn(t),hn=t=>ln(t)&&!cn(t);function fn(t){const e=RegExp(\`[^]{1,\${ue}}\`,"g");return t.match(e)||[]}function pn(t){if(!on(t))throw new Error(\`\${t} is not an ASCII string\`);if(!cn(t))throw new Error(\`\${t} is too long\`);return Jt(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function yn(t){if(!on(t))throw new Error(\`\${t} is not an ASCII string\`);if(Cr(t))return Xt(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(un(t))return yn("0X".concat(BigInt(t).toString(16)));throw new Error(\`\${t} is not Hex or decimal\`)}function gn(t){const e=0n===BigInt(t.pending_word)?"":yn(Dr(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":yn(Dr(e))),"")+e}function mn(t){const e=fn(t),r=e[e.length-1],n=e.map(pn),[i,a]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:i,pending_word_len:a}}Ut({},{byteArrayFromString:()=>mn,stringFromByteArray:()=>gn});function bn(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function _n(t){if(Ir(t)||Number.isInteger(t))return t.toString();if(kr(t)){if(Cr(t))return BigInt(t).toString();if(ln(t)){if(!cn(t))throw new Error(\`\${t} is a long string > 31 chars. Please split it into an array of short strings.\`);return BigInt(pn(t)).toString()}if(jr(t))return t}if(Sr(t))return""+ +t;throw new Error(\`\${t} can't be computed by felt()\`)}Ut({},{felt:()=>Jn,getAbiContractVersion:()=>Kn,getArrayType:()=>zn,isCairo1Abi:()=>Gn,isCairo1Type:()=>qn,isLen:()=>In,isTypeArray:()=>xn,isTypeBool:()=>Vn,isTypeContractAddress:()=>Hn,isTypeEnum:()=>On,isTypeEthAddress:()=>Mn,isTypeFelt:()=>kn,isTypeInt:()=>Ln,isTypeLiteral:()=>Fn,isTypeNamedTuple:()=>Cn,isTypeNonZero:()=>Yn,isTypeOption:()=>Nn,isTypeResult:()=>Dn,isTypeSecp256k1Point:()=>jn,isTypeStruct:()=>Rn,isTypeTuple:()=>Bn,isTypeU96:()=>\$n,isTypeUint:()=>Pn,isTypeUint256:()=>Un,tuple:()=>Xn,uint256:()=>Wn,uint512:()=>Zn});var wn=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const r=t.__processData(e);this.data=r.subarray(r.findIndex(t=>t>0))}static __processData(t){if(kr(t))return se(t);if(Ir(t))return oe(t);if(Number.isInteger(t))return oe(BigInt(t));if(Sr(t))return oe(BigInt(t?1:0));throw new Error(\`\${t} can't be computed by felt()\`)}toBigInt(){return ce(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return Jt(this.toBigInt().toString(16))}toApiRequest(){return bn([this.toHexString()])}static validate(e){vr(null!==e,"null value is not allowed for felt252"),vr(void 0!==e,"undefined value is not allowed for felt252"),vr(kr(e)||Tr(e)||Ir(e)||Sr(e),\`Unsupported data type '\${typeof e}' for felt252. Expected string, number, bigint, or boolean\`);const r=t.__processData(e),n=ce(r);vr(n>=0n&&n<pe,\`Value \${r} is out of felt252 range [0, \${pe})\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},vn=(1n<<128n)-1n,En=(1n<<256n)-1n,An=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(Br(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const r=t.validateProps(e[0].low,e[0].high);this.low=r.low,this.high=r.high}else if(1===e.length){const r=t.validate(e[0]);this.low=r&vn,this.high=r>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const r=t.validateProps(e[0],e[1]);this.low=r.low,this.high=r.high}}}static validate(t){vr(null!==t,"null value is not allowed for u256"),vr(void 0!==t,"undefined value is not allowed for u256"),vr(Xr(t)||Br(t),\`Unsupported data type '\${typeof t}' for u256. Expected string, number, bigint, or Uint256 object\`);const e=BigInt(t);return vr(e>=0n,"bigNumberish is smaller than UINT_256_MIN"),vr(e<=En,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const r=BigInt(t),n=BigInt(e);return vr(r>=0n&&r<=340282366920938463463374607431768211455n,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),vr(n>=0n&&n<=340282366920938463463374607431768211455n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:n}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=Jr(e);return new t(r,n)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Jt(this.low.toString(16)),high:Jt(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[_n(this.low),_n(this.high)]}},Tn=(1n<<512n)-1n,Sn=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(Br(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const r=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===e.length){const r=t.validate(e[0]);this.limb0=r&vn,this.limb1=(r&vn<<128n)>>128n,this.limb2=(r&vn<<256n)>>256n,this.limb3=r>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const r=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}}}static validate(t){vr(null!==t,"null value is not allowed for u512"),vr(void 0!==t,"undefined value is not allowed for u512"),vr(Xr(t)||Br(t),\`Unsupported data type '\${typeof t}' for u512. Expected string, number, bigint, or Uint512 object\`);const e=BigInt(t);return vr(e>=0n,"bigNumberish is smaller than UINT_512_MIN."),vr(e<=Tn,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,r,n){const i=BigInt(t),a=BigInt(e),s=BigInt(r),o=BigInt(n);return[i,a,s,o].forEach((t,e)=>{vr(t>=0n&&t<=vn,\`limb\${e} is not in the range of a u128 number\`)}),{limb0:i,limb1:a,limb2:s,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=Jr(e),i=Jr(e),a=Jr(e);return new t(r,n,i,a)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Jt(this.limb0.toString(16)),limb1:Jt(this.limb1.toString(16)),limb2:Jt(this.limb2.toString(16)),limb3:Jt(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[_n(this.limb0),_n(this.limb1),_n(this.limb2),_n(this.limb3)]}},In=t=>/_len\$/.test(t),kn=t=>"felt"===t||"core::felt252"===t,xn=t=>/\\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Bn=t=>/^\\(.*\\)\$/i.test(t),Cn=t=>/\\(.*\\)/i.test(t)&&t.includes(":"),Rn=(t,e)=>t in e,On=(t,e)=>t in e,Nn=t=>t.startsWith("core::option::Option::"),Dn=t=>t.startsWith("core::result::Result::"),Pn=t=>Object.values(dr).includes(t),Ln=t=>Object.values(hr).includes(t),Un=t=>An.isAbiType(t),Fn=t=>Object.values(fr).includes(t),Vn=t=>"core::bool"===t,Hn=t=>t===fr.ContractAddress,Mn=t=>"core::starknet::eth_address::EthAddress"===t,\$n=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,jn=t=>t===fr.Secp256k1Point,qn=t=>t.includes("::"),zn=t=>qn(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Gn(t){const{cairo:e}=Kn(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Yn(t){return t.startsWith("core::zeroable::NonZero::")}function Kn(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const r=e.inputs.length?e.inputs:e.outputs;return qn(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Wn=t=>new An(t).toUint256DecimalString(),Zn=t=>new Sn(t).toUint512DecimalString(),Xn=(...t)=>({...t});function Jn(t){return _n(t)}var Qn=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!Ar(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!Ar(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!Ar(t[1]));return Ar(t)?"":t[0]}},ti={Some:0,None:1},ei=class{Some;None;constructor(t,e){if(!(t in Object.values(ti)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===ti.Some){if(Ar(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Ar(this.Some)}isNone(){return!0===this.None}},ri={Ok:0,Err:1},ni=class{Ok;Err;constructor(t,e){if(!(t in Object.values(ri)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===ri.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!Ar(this.Ok))return this.Ok;if(!Ar(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Ar(this.Ok)}isErr(){return!Ar(this.Err)}},ii=(t,e,r)=>{if(!Ir(t[r]))throw new Error(\`Data and formatter mismatch on \${r}:\${e[r]}, expected response data \${r}:\${t[r]} to be BN instead it is \${typeof t[r]}\`)};function ai(t,e,r){return Object.entries(t).reduce((n,[i,a])=>{const s=r??e[i];if(!(i in e)&&!r)return n[i]=a,n;if("string"===s){if(Array.isArray(t[i])){const e=ai(t[i],t[i].map(t=>s));return n[i]=Object.values(e).join(""),n}return ii(t,e,i),n[i]=yn(a),n}if("number"===s)return ii(t,e,i),n[i]=Number(a),n;if("function"==typeof s)return n[i]=s(a),n;if(Array.isArray(s)){const e=ai(t[i],s,s[0]);return n[i]=Object.values(e),n}return Br(s)?(n[i]=ai(t[i],s),n):(((t,e,r)=>{throw new Error(\`Unhandled formatter type on \${r}:\${e[r]} for data \${r}:\${t[r]}\`)})(t,e,i),n)},{})}var si=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const r=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(r,t.MAX_BYTE_SIZE-r.length)}static __processData(t){if(kr(t))return se(t);if(xr(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return ce(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return Jt("padded"===t?Zt(this.data):this.toBigInt().toString(16))}static validate(e){const r=t.__processData(e).length;vr(r<=this.MAX_BYTE_SIZE,\`Data is too long: \${r} bytes (max \${this.MAX_BYTE_SIZE} bytes)\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},oi={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ci=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:r}=Object;r?r(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:r}=Error;r&&r(t,e)}(this)}},ui=class extends ci{},li=class extends ui{constructor(t,e,r){super(\`RPC: \${e} with params \${_r(r,null,2)}\\n\\n      \${t.code}: \${t.message}: \${_r(t.data)}\`),this.baseError=t,this.request={method:e,params:r}}request;get code(){return this.baseError.code}isType(t){return oi[t]===this.code}},di=Ge.get("buffer")||void 0!==Ot&&Ot||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==r.g&&r.g.Buffer||class{constructor(){throw new ui("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new ui("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=Ge.get("buffer")||void 0!==Ot&&Ot;return e&&e.isBuffer&&e.isBuffer(t)}},hi=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=0n&&r<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},fi=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,r,n]=e;return vr(Array.isArray(t)&&r instanceof wn&&n instanceof hi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=r,void(this.pending_word_len=n)}const r=e[0];t.validate(r);const{data:n,pending_word:i,pending_word_len:a}=t.__processData(r);this.data=n,this.pending_word=i,this.pending_word_len=a}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(xr(t))e=new Uint8Array(t);else if(kr(t))e=se(t);else if(Ir(t))e=oe(t);else{if(r=t,!Number.isInteger(r))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=oe(BigInt(t))}var r;const n=si.MAX_BYTE_SIZE,i=Math.floor(e.length/n),a=e.length%n,s=[];let o,c;for(let t=0;t<i;t+=1){const r=t*n,i=r+n,a=e.slice(r,i);s.push(new si(a))}if(a>0){const t=e.slice(i*n);let r="0x";for(let e=0;e<t.length;e+=1)r+=t[e].toString(16).padStart(2,"0");o=new wn(r),c=new hi(a)}else o=new wn(0),c=new hi(0);return{data:s,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),bn([Jt(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=ie(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=ie(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=ie(this.toElements());return Jt(0===t.length?"0":Zt(t))}toBuffer(){const t=ie(this.toElements());return di.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const r=new Uint8Array(e),n=e-this.pending_word.data.length;r.set(this.pending_word.data,n),t.push(r)}return t}assertInitialized(){vr(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){vr(null!=t,"Invalid input: null or undefined"),vr(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),vr("object"!=typeof t||xr(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),vr(!Tr(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),vr(!Tr(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),vr(!Ir(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),vr(t instanceof Uint8Array||xr(t)||kr(t)||Tr(t)||Ir(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Array.from({length:Number(Jr(e))},()=>si.factoryFromApiResponse(e)),n=wn.factoryFromApiResponse(e),i=hi.factoryFromApiResponse(e);return new t(r,n,i)}},pi=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=_e.min&&r<=_e.max,\`Value is out of u8 range [\${_e.min}, \${_e.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},yi=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=we.min&&r<=we.max,\`Value is out of u16 range [\${we.min}, \${we.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},gi=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Ee.min&&r<=Ee.max,\`Value is out of u64 range [\${Ee.min}, \${Ee.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},mi=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Ae.min&&r<=Ae.max,\`Value is out of u96 range [\${Ae.min}, \${Ae.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},bi=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data))}toHexString(){return Jt(this.toBigInt().toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Te.min&&r<=Te.max,\`Value is out of u128 range [\${Te.min}, \${Te.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Jr(e))}},_i=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Se.min&&r<=Se.max,\`Value is out of i8 range [\${Se.min}, \${Se.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=BigInt(r);return new t(n>pe/2n?n-pe:n)}},wi=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Ie.min&&r<=Ie.max,\`Value is out of i16 range [\${Ie.min}, \${Ie.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=BigInt(r);return new t(n>pe/2n?n-pe:n)}},vi=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=ke.min&&r<=ke.max,\`Value is out of i32 range [\${ke.min}, \${ke.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=BigInt(r);return new t(n>pe/2n?n-pe:n)}},Ei=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=xe.min&&r<=xe.max,\`Value is out of i64 range [\${xe.min}, \${xe.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=BigInt(r);return new t(n>pe/2n?n-pe:n)}},Ai=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return kr(t)&&ln(t)?Yt(t):BigInt(t)}toApiRequest(){return bn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(oe(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return Jt(t<0n?(pe+t).toString(16):t.toString(16))}static validate(e){vr(null!=e,"Invalid input: null or undefined"),vr(!Br(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),vr(!Tr(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);vr(r>=Be.min&&r<=Be.max,\`Value is out of i128 range [\${Be.min}, \${Be.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Jr(e),n=BigInt(r);return new t(n>pe/2n?n-pe:n)}},Ti=(si.abiSelector,fi.abiSelector,wn.abiSelector,An.abiSelector,Sn.abiSelector,pi.abiSelector,yi.abiSelector,gi.abiSelector,mi.abiSelector,bi.abiSelector,_i.abiSelector,wi.abiSelector,vi.abiSelector,Ei.abiSelector,Ai.abiSelector,si.abiSelector,fi.abiSelector,wn.abiSelector,An.abiSelector,Sn.abiSelector,pi.abiSelector,yi.abiSelector,gi.abiSelector,mi.abiSelector,bi.abiSelector,_i.abiSelector,wi.abiSelector,vi.abiSelector,Ei.abiSelector,Ai.abiSelector,{request:{[si.abiSelector]:t=>new si(t).toApiRequest(),[fi.abiSelector]:t=>new fi(t).toApiRequest(),[wn.abiSelector]:t=>Jn(t),[An.abiSelector]:t=>new An(t).toApiRequest(),[Sn.abiSelector]:t=>new Sn(t).toApiRequest(),[pi.abiSelector]:t=>Jn(t),[yi.abiSelector]:t=>Jn(t),[gi.abiSelector]:t=>Jn(t),[mi.abiSelector]:t=>Jn(t),[bi.abiSelector]:t=>Jn(t),[_i.abiSelector]:t=>new _i(t).toApiRequest(),[wi.abiSelector]:t=>new wi(t).toApiRequest(),[vi.abiSelector]:t=>new vi(t).toApiRequest(),[Ei.abiSelector]:t=>new Ei(t).toApiRequest(),[Ai.abiSelector]:t=>new Ai(t).toApiRequest()},response:{[si.abiSelector]:t=>si.factoryFromApiResponse(t).decodeUtf8(),[fi.abiSelector]:t=>fi.factoryFromApiResponse(t).decodeUtf8(),[wn.abiSelector]:t=>BigInt(Jr(t)),[An.abiSelector]:t=>An.factoryFromApiResponse(t).toBigInt(),[Sn.abiSelector]:t=>Sn.factoryFromApiResponse(t).toBigInt(),[pi.abiSelector]:t=>BigInt(Jr(t)),[yi.abiSelector]:t=>BigInt(Jr(t)),[gi.abiSelector]:t=>BigInt(Jr(t)),[mi.abiSelector]:t=>BigInt(Jr(t)),[bi.abiSelector]:t=>BigInt(Jr(t)),[_i.abiSelector]:t=>BigInt(Jr(t)),[wi.abiSelector]:t=>BigInt(Jr(t)),[vi.abiSelector]:t=>BigInt(Jr(t)),[Ei.abiSelector]:t=>BigInt(Jr(t)),[Ai.abiSelector]:t=>BigInt(Jr(t))}}),Si=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Ti}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>In(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},Ii=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Ti}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function ki(t,e,r){return"constructor"===t&&!r&&!e.length}function xi(t,e,r){for(let n=0,i=0;n<t.length;n++)if(t[n]===e)i++;else if(t[n]===r&&0===--i)return n;return Number.POSITIVE_INFINITY}function Bi(t){return qn(t)?function(t){const e=t.slice(1,-1),r=[];let n,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:n=i+xi(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):n=i+xi(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);n=-1!==t?t:Number.POSITIVE_INFINITY}}r.push(e.slice(i,n)),i=n+2}return r}(t):function(t){const e=t.replace(/\\s/g,"").slice(1,-1),{subTuple:r,result:n}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let r="",n=0;for(;n<t.length;){if("("===t[n]){let i=1;const a=n;for(n++;i;)")"===t[n]&&i--,"("===t[n]&&i++,n++;e.push(t.substring(a,n)),r+=" ",n--}else r+=t[n];n++}return{subTuple:e,result:r}}(e);let i=n.split(",").map(t=>r.length?t.replace(" ",r.shift()):t);return Cn(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Ci=class t{content;arrayType;constructor(e,r){vr(t.isTypeFixedArray(r),\`The type \${r} is not a Cairo fixed array. Needs [type; length].\`);try{t.getFixedArrayType(r)}catch{throw new Error(\`The type \${r} do not includes any content type. Needs [type; length].\`)}let n;try{n=t.getFixedArraySize(r)}catch{throw new Error(\`The type \${r} type do not includes any length. Needs [type; length].\`)}vr(n===e.length,\`The ABI type \${r} is expecting \${n} items. \${e.length} items provided.\`),this.content=e,this.arrayType=r}static getFixedArraySize(t){const e=t.match(/(?<=; )\\d+(?=\\])/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid number after ';' character.\`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\\[).+(?=;)/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid type of data.\`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,r)=>(t[r]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\\[.*;\\s.*\\]\$/.test(t)&&/(?<=\\[).+(?=;)/.test(t)&&/(?<=; )\\d+(?=\\])/.test(t)}};function Ri({type:t,val:e,parser:r}){switch(!0){case An.isAbiType(t):case Sn.isAbiType(t):case pi.isAbiType(t):case yi.isAbiType(t):case gi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case _i.isAbiType(t):case wi.isAbiType(t):case vi.isAbiType(t):case Ei.isAbiType(t):case Ai.isAbiType(t):case si.isAbiType(t):return r.getRequestParser(t)(e);case jn(t):{const t=Xt(Dr(e)).padStart(128,"0"),r=Wn(Jt(t.slice(-64))),n=Wn(Jt(t.slice(0,-64)));return[Jn(n.low),Jn(n.high),Jn(r.low),Jn(r.high)]}default:return r.getRequestParser(wn.abiSelector)(e)}}function Oi({element:t,type:e,structs:r,enums:n,parser:i}){if(void 0===t)throw Error(\`Missing parameter for type \${e}\`);if(Ci.isTypeFixedArray(e)){const a=Ci.getFixedArrayType(e);let s=[];if(Array.isArray(t))s=new Ci(t,e).content;else{if("object"!=typeof t)throw new Error(\`ABI type \${e}: not an Array representing a cairo.fixedArray() provided.\`);s=Object.values(t),vr(s.length===Ci.getFixedArraySize(e),\`ABI type \${e}: object provided do not includes  \${Ci.getFixedArraySize(e)} items. \${s.length} items provided.\`)}return s.reduce((t,e)=>t.concat(Oi({element:e,type:a,structs:r,enums:n,parser:i})),[])}if(Array.isArray(t)){const a=[];a.push(Jn(t.length));const s=zn(e);return t.reduce((t,e)=>t.concat(Oi({element:e,type:s,structs:r,enums:n,parser:i})),a)}if(An.isAbiType(e))return i.getRequestParser(e)(t);if(Sn.isAbiType(e))return i.getRequestParser(e)(t);if(r[e]&&r[e].members.length){if(Mn(e))return Ri({type:e,val:t,parser:i});if(fi.isAbiType(e))return i.getRequestParser(e)(t);const{members:a}=r[e],s=t;return a.reduce((t,e)=>t.concat(Oi({element:s[e.name],type:e.type,structs:r,enums:n,parser:i})),[])}if(Bn(e)){const a=function(t,e){const r=Bi(e),n=Object.values(t);if(n.length!==r.length)throw Error(\`ParseTuple: provided and expected abi tuple size do not match.\\n      provided: \${n}\\n      expected: \${r}\`);return r.map((t,e)=>({element:n[e],type:t.type??t}))}(t,e);return a.reduce((t,e)=>{const a=Oi({element:e.element,type:e.type,structs:r,enums:n,parser:i});return t.concat(a)},[])}if(On(e,n)){const{variants:a}=n[e];if(Nn(e)){const e=t;if(e.isSome()){const t=a.find(t=>"Some"===t.name);if(Ar(t))throw Error("Error in abi : Option has no 'Some' variant.");const s=t.type;if("()"===s)return ti.Some.toString();const o=Oi({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[ti.Some.toString(),...o]:[ti.Some.toString(),o]}return ti.None.toString()}if(Dn(e)){const e=t;if(e.isOk()){const t=a.find(t=>"Ok"===t.name);if(Ar(t))throw Error("Error in abi : Result has no 'Ok' variant.");const s=t.type;if("()"===s)return ri.Ok.toString();const o=Oi({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[ri.Ok.toString(),...o]:[ri.Ok.toString(),o]}const s=a.find(t=>"Err"===t.name);if(Ar(s))throw Error("Error in abi : Result has no 'Err' variant.");const o=s.type;if("()"===o)return ri.Err.toString();const c=Oi({element:e.unwrap(),type:o,structs:r,enums:n,parser:i});return Array.isArray(c)?[ri.Err.toString(),...c]:[ri.Err.toString(),c]}const s=t,o=s.activeVariant(),c=a.find(t=>t.name===o);if(Ar(c))throw Error(\`Not find in abi : Enum has no '\${o}' variant.\`);const u=c.type,l=a.findIndex(t=>t.name===o);if("()"===u)return l.toString();const d=Oi({element:s.unwrap(),type:u,structs:r,enums:n,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(Yn(e))return Ri({type:zn(e),val:t,parser:i});if("object"==typeof t)throw Error(\`Parameter \${t} do not align with abi parameter \${e}\`);return Ri({type:e,val:t,parser:i})}function Ni(t,e,r){let n;switch(!0){case Vn(t):return n=e.next().value,Boolean(BigInt(n));case An.isAbiType(t):case Sn.isAbiType(t):case pi.isAbiType(t):case yi.isAbiType(t):case gi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case _i.isAbiType(t):case wi.isAbiType(t):case vi.isAbiType(t):case Ei.isAbiType(t):case Ai.isAbiType(t):return r.getResponseParser(t)(e);case Mn(t):return n=e.next().value,BigInt(n);case si.isAbiType(t):return r.getResponseParser(t)(e);case jn(t):const i=Xt(e.next().value).padStart(32,"0"),a=Xt(e.next().value).padStart(32,"0"),s=Xt(e.next().value).padStart(32,"0"),o=Xt(e.next().value).padStart(32,"0");return BigInt(Jt(a+i+o+s));default:return r.getResponseParser(wn.abiSelector)(e)}}function Di(t,e,r,n,i){if("()"===e.type)return{};if(An.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(Sn.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(fi.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(Ci.isTypeFixedArray(e.type)){const a=[],s={name:"",type:Ci.getFixedArrayType(e.type)},o=Ci.getFixedArraySize(e.type);for(;a.length<o;)a.push(Di(t,s,r,n,i));return a}if(xn(e.type)){const a=[],s={name:"",type:zn(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Di(t,s,r,n,i));return a}if(Yn(e.type)){const a={name:"",type:zn(e.type)};return Di(t,a,r,n,i)}if(n&&e.type in n&&n[e.type])return Mn(e.type)?Ni(e.type,t,r):n[e.type].members.reduce((e,a)=>(e[a.name]=Di(t,a,r,n,i),e),{});if(i&&e.type in i&&i[e.type]){const a=Number(t.next().value),s=i[e.type].variants.reduce((e,s,o)=>o===a?(e[s.name]=Di(t,{name:"",type:s.type},r,n,i),e):(e[s.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=a===ti.Some?s.Some:void 0;return new ei(a,t)}if(e.type.startsWith("core::result::Result")){let t;return t=a===ri.Ok?s.Ok:s.Err,new ni(a,t)}return new Qn(s)}if(Bn(e.type))return Bi(e.type).reduce((e,a,s)=>{const o=a?.name?a.name:s,c={name:o,type:a?.type?a.type:a};return e[o]=Di(t,c,r,n,i),e},{});if(xn(e.type)){const a=[],s={name:"",type:zn(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Di(t,s,r,n,i));return a}return Ni(e.type,t,r)}function Pi({responseIterator:t,output:e,structs:r,enums:n,parsedResult:i,parser:a}){const{name:s,type:o}=e;let c;switch(!0){case In(s):return c=t.next().value,BigInt(c);case r&&o in r||Bn(o):case n&&On(o,n):case Ci.isTypeFixedArray(o):return Di(t,e,a,r,n);case xn(o):if(qn(o))return Di(t,e,a,r,n);const u=[];if(i&&i[\`\${s}_len\`]){const o=i[\`\${s}_len\`];for(;u.length<o;)u.push(Di(t,{name:s,type:e.type.replace("*","")},a,r,n))}return u;case Yn(o):return Di(t,e,a,r,n);default:return Ni(o,t,a)}}var Li=(t,e)=>{if(vr(kr(t)||Tr(t)||Ir(t),\`Validate: arg \${e.name} should be a felt typed as (String, Number or BigInt)\`),kr(t)&&!Cr(t))return;const r=BigInt(t.toString(10));vr(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`)},Ui=(t,e)=>{let r;switch(Tr(t)&&vr(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),vr(kr(t)||Tr(t)||Ir(t)||Br(t)&&"low"in t&&"high"in t||Br(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (String, Number or BigInt), but is \${typeof t} \${t}.\`),e.type){case dr.u256:r=new An(t).toBigInt();break;case dr.u512:r=new Sn(t).toBigInt();break;default:r=Or(t)}switch(e.type){case dr.u8:vr(r>=0n&&r<=255n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0 - 255]\`);break;case dr.u16:vr(r>=0n&&r<=65535n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 65535]\`);break;case dr.u32:vr(r>=0n&&r<=4294967295n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 4294967295]\`);break;case dr.u64:vr(r>=0n&&r<=2n**64n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^64-1]\`);break;case dr.u128:vr(r>=0n&&r<=2n**128n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^128-1]\`);break;case dr.u256:vr(r>=0n&&r<=2n**256n-1n,\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^256-1\`);break;case dr.u512:vr(Sn.is(r),\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^512-1\`);break;case fr.ClassHash:case fr.ContractAddress:vr(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`);break;case fr.Secp256k1Point:vr(r>=0n&&r<=2n**512n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 512 bits number.\`);break;case fr.U96:vr(r>=0n&&r<=2n**96n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 96 bits number.\`)}},Fi=(t,e)=>{vr(Sr(t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (Boolean)\`)},Vi=(t,e,r)=>{if(e.type!==dr.u256&&e.type!==dr.u512){if(Mn(e.type)){vr(!Br(t),\`EthAddress type is waiting a BigNumberish. Got "\${t}"\`);const r=BigInt(t.toString(10));return void vr(r>=0n&&r<=2n**160n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^160-1]\`)}vr(Br(t),\`Validate: arg \${e.name} is cairo type struct (\${e.type}), and should be defined as a js object (not array)\`),r[e.type].members.forEach(({name:r})=>{vr(Object.keys(t).includes(r),\`Validate: arg \${e.name} should have a property \${r}\`)})}else Ui(t,e)},Hi=(t,e)=>{vr(Br(t),\`Validate: arg \${e.name} is cairo type Enum (\${e.type}), and should be defined as a js object (not array)\`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...Object.getOwnPropertyNames(t),...r];if(!(Nn(e.type)&&n.includes("isSome")&&n.includes("isNone")||Dn(e.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(\`Validate Enum: argument \${e.name}, type \${e.type}, value received "\${t}", is not an Enum.\`)},Mi=(t,e)=>{vr(Br(t),\`Validate: arg \${e.name} should be a tuple (defined as object)\`)},\$i=(t,e,r,n)=>{const i=xn(e.type),a=i?zn(e.type):Ci.getFixedArrayType(e.type);if(i&&kn(a)&&hn(t))return;let s=[];if(i)vr(Array.isArray(t),\`Validate: arg \${e.name} should be an Array\`),s=t;else switch(!0){case Array.isArray(t):s=t;break;case"object"==typeof t:s=Object.values(t);break;default:throw new Error(\`Validate: arg \${e.name} should be an Array or an object.\`)}switch(!0){case kn(a):s.forEach(t=>Li(t,e));break;case Bn(a):s.forEach(t=>Mi(t,{name:e.name,type:a}));break;case xn(a):s.forEach(t=>\$i(t,{name:"",type:a},r,n));break;case Rn(a,r):s.forEach(t=>Vi(t,{name:e.name,type:a},r));break;case On(a,n):s.forEach(t=>Hi(t,{name:e.name,type:a}));break;case Pn(a)||Fn(a):s.forEach(t=>Ui(t,{name:"",type:a}));break;case Vn(a):s.forEach(t=>Fi(t,e));break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value \${s}\`)}};function ji(t,e,r,n){t.inputs.reduce((t,i)=>{const a=e[t];switch(!0){case In(i.name):return t;case kn(i.type):Li(a,i);break;case si.isAbiType(i.type):si.validate(a);break;case Pn(i.type)||Fn(i.type):Ui(a,i);break;case Vn(i.type):Fi(a,i);break;case fi.isAbiType(i.type):fi.validate(a);break;case _i.isAbiType(i.type):_i.validate(a);break;case wi.isAbiType(i.type):wi.validate(a);break;case vi.isAbiType(i.type):vi.validate(a);break;case Ei.isAbiType(i.type):Ei.validate(a);break;case Ai.isAbiType(i.type):Ai.validate(a);break;case xn(i.type)||Ci.isTypeFixedArray(i.type):\$i(a,i,r,n);break;case Rn(i.type,r):Vi(a,i,r);break;case On(i.type,n):Hi(a,i);break;case Bn(i.type):Mi(a,i);break;case Yn(i.type):((t,e)=>{const r=zn(e.type);switch(vr(Pn(r)&&r!==Sn.abiSelector||kn(r),\`Validate: \${e.name} type is not authorized for NonZero type.\`),!0){case kn(r):Li(t,e),vr(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Pn(r):Ui(t,{name:"",type:r}),r===dr.u256?vr(new An(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):vr(Or(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value "\${t}"\`)}})(a,i);break;default:throw new Error(\`Validate Unhandled: argument \${i.name}, type \${i.type}, value \${a}\`)}return t+1},0)}var qi=class t{abi;parser;structs;enums;constructor(e,r){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const r=function(t){return t.find(t=>"interface"===t.type)?2:Gn(t)?1:0}(t);if(0===r||1===r)return new Si(t,e);if(2===r)return new Ii(t,e);throw Error(\`Unsupported ABI version \${r}\`)}(e,r),this.abi=this.parser.getLegacyFormat()}validate(t,e,r=[]){t!==ur&&vr(this.abi.filter(e=>{if("function"!==e.type)return!1;const r="view"===e.stateMutability||"view"===e.state_mutability;return t===lr?!r:r}).map(t=>t.name).includes(e),(t===lr?"invocable":"viewable")+" method not found in abi");const n=this.abi.find(r=>t===ur?r.name===e&&"constructor"===r.type:r.name===e&&"function"===r.type);if(ki(e,r,n))return;const i=this.parser.methodInputsLength(n);if(r.length!==i)throw Error(\`Invalid number of arguments, expected \${i} arguments, but got \${r.length}\`);ji(n,r,this.structs,this.enums)}compile(t,e){const r=this.abi.find(e=>e.name===t);if(ki(t,e,r))return[];let n;if(Array.isArray(e))n=e;else{const t=function(t,e,r,n){const i=(t,e)=>{if(Ci.isTypeFixedArray(e))return function(t,e){const r=Ci.getFixedArrayType(e),n=Ci.getFixedArraySize(e);if(Array.isArray(t)){if(n!==t.length)throw new Error(\`ABI type \${e}: array provided do not includes  \${n} items. \${t.length} items provided.\`);return t.map(t=>i(t,r))}if(n!==Object.keys(t).length)throw new Error(\`ABI type \${e}: object provided do not includes  \${n} properties. \${Object.keys(t).length} items provided.\`);return i(t,r)}(t,e);if(xn(e))return function(t,e){const r=zn(e);return kr(t)?t:t.map(t=>i(t,r))}(t,e);if(On(e,n)){const r=n[e];return s(t,r)}if(Bn(e))return function(t,e){const r=Bi(e).reduce((e,r,n)=>{const a=Object.keys(t),s=r?.type?r.type:r;return o=i(t[a[n]],s),Object.defineProperty(e,n.toString(),{enumerable:!0,value:o??t[a[n]]}),e;var o},{});return r}(t,e);if(Mn(e))return t;if(Yn(e))return t;if(fi.isAbiType(e))return t;if(\$n(e))return t;if(jn(e))return t;if(An.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(\`Your object includes the property : \${e}, containing an Uint256 object without the 'low' and 'high' keys.\`);return{low:r.low,high:r.high}}if(Sn.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!["limb0","limb1","limb2","limb3"].every(t=>t in r))throw Error(\`Your object includes the property : \${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.\`);return{limb0:r.limb0,limb1:r.limb1,limb2:r.limb2,limb3:r.limb3}}if(Rn(e,r)){const n=r[e].members;return a(t,n)}return t},a=(t,e)=>e.reduce((e,r)=>{if("undefined"===t[r.name]&&(qn(r.type)||!In(r.name)))throw Error(\`Your object needs a property with key : \${r.name} .\`);var n;return n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n??t[r.name]}),e},{}),s=(t,e)=>{if(Dn(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),a=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return r.isOk()?new ni(ri.Ok,i(t.unwrap(),n)):new ni(ri.Err,i(t.unwrap(),a))}if(Nn(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return r.isSome()?new ei(ti.Some,i(r.unwrap(),n)):new ei(ti.None,{})}const r=t,n=Object.entries(r.variant).map(t=>{if(Ar(t[1]))return t;const n=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===n?t:[t[0],i(r.unwrap(),n)]});return new Qn(Object.fromEntries(n))};return e.reduce((e,r)=>{return In(r.name)&&!qn(r.type)||(n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n})),e;var n},{})}(e,r.inputs,this.structs,this.enums);n=Object.values(t),ji(r,n,this.structs,this.enums)}const i=n[Symbol.iterator](),a=r.inputs.reduce((t,e)=>In(e.name)&&!qn(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:r,enums:n,parser:i}){const{name:a,type:s}=e;let{value:o}=t.next();switch(!0){case Ci.isTypeFixedArray(s):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(\`ABI expected parameter \${a} to be an array or an object, got \${o}\`);return Oi({element:o,type:e.type,structs:r,enums:n,parser:i});case xn(s):if(!Array.isArray(o)&&!ln(o))throw Error(\`ABI expected parameter \${a} to be array or long string, got \${o}\`);return kr(o)&&(o=fn(o)),Oi({element:o,type:e.type,structs:r,enums:n,parser:i});case Yn(s):return Ri({type:zn(s),val:o,parser:i});case Mn(s):return Ri({type:s,val:o,parser:i});case Rn(s,r)||Bn(s)||An.isAbiType(s):case On(s,n):return Oi({element:o,type:s,structs:r,enums:n,parser:i});default:return Ri({type:s,val:o,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(a,"__compiled__",{enumerable:!1,writable:!1,value:!0}),a}static compile(t){const e=t=>{const e=(t,r=".")=>{const n=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(n).flatMap(([t,i])=>{let a=i;"entrypoint"===t?a=en(a):hn(a)&&(a=mn(a));const s=Array.isArray(n)&&"0"===t?"\$\$len":t;if(Ir(a))return[[\`\${r}\${s}\`,Jn(a)]];if(Object(a)===a){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),n=[...Object.getOwnPropertyNames(a),...t];if(n.includes("isSome")&&n.includes("isNone")){const t=a,n=t.isSome()?ti.Some:ti.None;return t.isSome()?e({0:n,1:t.unwrap()},\`\${r}\${s}.\`):[[\`\${r}\${s}\`,Jn(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const t=a,n=t.isOk()?ri.Ok:ri.Err;return e({0:n,1:t.unwrap()},\`\${r}\${s}.\`)}if(n.includes("variant")&&n.includes("activeVariant")){const t=a,n=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===n);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[\`\${r}\${s}\`,Jn(i)]]:e({0:i,1:t.unwrap()},\`\${r}\${s}.\`)}return e(a,\`\${r}\${s}.\`)}return[[\`\${r}\${s}\`,Jn(a)]]})};return Object.fromEntries(e(t))};let r;if(Array.isArray(t)){const n=e({...t});r=Object.values(n)}else{const n=e(t);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,e){const{outputs:r}=this.abi.find(e=>e.name===t),n=e.flat()[Symbol.iterator](),i=r.flat().reduce((t,e,r)=>{const i=e.name??r;return t[i]=Pi({responseIterator:n,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[\`\${i}_len\`]&&delete t[\`\${i}_len\`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,r){return ai(this.parse(t,e),r)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Dr(t))}decodeParameters(t,e){const r=Array.isArray(t)?t:[t],n=e.flat()[Symbol.iterator](),i=r.map(t=>Pi({responseIterator:n,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}};Ut({},{calculateContractAddressFromHash:()=>ba,calculateDeclareTransactionHash:()=>da,calculateDeployAccountTransactionHash:()=>ha,calculateInvokeTransactionHash:()=>la,calculateL2MessageTxHash:()=>ua,computeCompiledClassHash:()=>Sa,computeContractClassHash:()=>xa,computeHashOnElements:()=>ya,computeHintedClassHash:()=>va,computeLegacyContractClassHash:()=>Ea,computePedersenHash:()=>fa,computePedersenHashOnElements:()=>ga,computePoseidonHash:()=>pa,computePoseidonHashOnElements:()=>ma,computeSierraContractClassHash:()=>ka,formatSpaces:()=>wa,getL1MessageHash:()=>sn,getL2MessageHash:()=>an,getSelector:()=>rn,getSelectorFromName:()=>en,hashByteCodeSegments:()=>Ta,keccakBn:()=>Qr,poseidon:()=>kt,solidityUint256PackedKeccak256:()=>nn,starknetKeccak:()=>tn}),Ut({},{calculateDeclareTransactionHash:()=>ra,calculateDeployAccountTransactionHash:()=>ea,calculateInvokeTransactionHash:()=>na,calculateTransactionHashCommon:()=>ta,encodeDataResourceBoundsL1:()=>Ji,encodeResourceBoundsL1:()=>Zi,encodeResourceBoundsL2:()=>Xi,hashDAMode:()=>Wi,hashFeeFieldV3B3:()=>Qi});var zi=t=>t.map(t=>BigInt(t)),Gi=BigInt(pn("L1_GAS")),Yi=BigInt(pn("L2_GAS")),Ki=BigInt(pn("L1_DATA"));function Wi(t,e){return(BigInt(t)<<32n)+BigInt(e)}function Zi(t){return(Gi<<192n)+(t.l1_gas.max_amount<<128n)+t.l1_gas.max_price_per_unit}function Xi(t){return(Yi<<192n)+(t.l2_gas.max_amount<<128n)+t.l2_gas.max_price_per_unit}function Ji(t){return(Ki<<192n)+(t.l1_data_gas.max_amount<<128n)+t.l1_data_gas.max_price_per_unit}function Qi(t,e){const r=Zi(e),n=Xi(e),i=Ji(e);return(0,ot.poseidonHashMany)([BigInt(t),r,n,i])}function ta(t,e,r,n,i,a,s,o,c,u,l=[]){const d=Qi(a,u),h=Wi(o,c),f=zi([t,e,r,d,(0,ot.poseidonHashMany)(zi(s)),n,i,h,...zi(l)]);return Dr((0,ot.poseidonHashMany)(f))}function ea(t,e,r,n,i,a,s,o,c,u,l,d){return ta(He.DEPLOY_ACCOUNT,i,t,a,s,l,d,o,c,u,[(0,ot.poseidonHashMany)(zi(r)),e,n])}function ra(t,e,r,n,i,a,s,o,c,u,l,d){return ta(He.DECLARE,n,r,i,a,l,zi(d),o,c,u,[(0,ot.poseidonHashMany)(zi(s)),t,e])}function na(t,e,r,n,i,a,s,o,c,u,l){return ta(He.INVOKE,e,t,n,i,u,l,s,o,c,[(0,ot.poseidonHashMany)(zi(a)),(0,ot.poseidonHashMany)(zi(r))])}function ia(t){return[...t,t.length].reduce((t,e)=>ot.pedersen(Or(t),Or(e)),0).toString()}function aa(t,e,r,n,i,a,s,o=[]){const c=ia(i);return ia([t,e,r,n,c,a,s,...o])}function sa(t,e,r,n,i,a,s){return aa(He.DECLARE,r,e,0,[t],n,i,[a,...s?[s]:[]])}function oa(t,e,r,n,i,a,s,o){const c=[e,n,...r];return aa(He.DEPLOY_ACCOUNT,i,t,0,c,a,s,[o])}function ca(t,e,r,n,i,a){return aa(He.INVOKE,e,t,0,r,n,i,[a])}function ua(t,e,r,n,i,a){const s=[t,...n];return aa(He.L1_HANDLER,0,e,rn(r),s,0,i,[a])}function la(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return na(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function da(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return ra(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function ha(t){if(function(t){return[Ht.ETransactionVersion.V3,Ht.ETransactionVersion.F3].includes(t.version)}(t))return ea(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function fa(t,e){return ot.pedersen(BigInt(t),BigInt(e))}function pa(t,e){return Dr(ot.poseidonHash(BigInt(t),BigInt(e)))}function ya(t){return[...t,t.length].reduce((t,e)=>ot.pedersen(BigInt(t),BigInt(e)),0).toString()}Ut({},{calculateDeclareTransactionHash:()=>sa,calculateDeployAccountTransactionHash:()=>oa,calculateL2MessageTxHash:()=>ua,calculateTransactionHash:()=>ca,calculateTransactionHashCommon:()=>aa,computeHashOnElements:()=>ia}),Ut({},{starkCurve:()=>ot,weierstrass:()=>xt});var ga=ya;function ma(t){return Dr((0,ot.poseidonHashMany)(t.map(t=>BigInt(t))))}function ba(t,e,r,n){const i=ya(qi.compile(r)),a=ya([Jn("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,t,e,i]);return Dr(BigInt(a)%ge)}function _a(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function wa(t){let e=!1;const r=[];for(const n of t)'"'===n&&0==(r.length>0&&"\\\\"===r.slice(-1)[0])&&(e=!e),e?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function va(t){const{abi:e,program:r}=t,n=wa(_r({abi:e,program:r},_a));return Jt(ot.keccak(Gt(n)).toString(16))}function Ea(t){const e=kr(t)?mr(t):t,r=Dr(fe),n=ya(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=ya(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),a=ya(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),s=ya(e.program.builtins.map(t=>pn(t))),o=va(e),c=ya(e.program.data);return ya([r,n,i,a,s,o,c])}function Aa(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,ot.poseidonHashMany)(e.flatMap(t=>BigInt(pn(t)))))];var e});return(0,ot.poseidonHashMany)(e)}function Ta(t){const e=t.bytecode.map(t=>BigInt(t)),r=t.bytecode_segment_lengths??[];let n=0;const i=r.flatMap(t=>{const r=e.slice(n,n+=t);return[BigInt(t),(0,ot.poseidonHashMany)(r)]});return 1n+(0,ot.poseidonHashMany)(i)}function Sa(t){const e=BigInt(pn("COMPILED_CLASS_V1")),r=Aa(t.entry_points_by_type.EXTERNAL),n=Aa(t.entry_points_by_type.L1_HANDLER),i=Aa(t.entry_points_by_type.CONSTRUCTOR),a=t.bytecode_segment_lengths?Ta(t):(0,ot.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Dr((0,ot.poseidonHashMany)([e,r,n,i,a]))}function Ia(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,ot.poseidonHashMany)(e)}function ka(t){const e=BigInt(pn("CONTRACT_CLASS_V0.1.0")),r=Ia(t.entry_points_by_type.EXTERNAL),n=Ia(t.entry_points_by_type.L1_HANDLER),i=Ia(t.entry_points_by_type.CONSTRUCTOR),a=function(t){const e=wa(_r(t.abi,null));return BigInt(Jt(ot.keccak(Gt(e)).toString(16)))}(t),s=(0,ot.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Dr((0,ot.poseidonHashMany)([e,r,n,i,a,s]))}function xa(t){const e=kr(t)?mr(t):t;return"sierra_program"in e?ka(e):Ea(e)}function Ba(t){const e=kr(t)?t:_r(t);return Wt((0,Bt.ZI)(e))}function Ca(t){if(Array.isArray(t))return t;const e=qt((0,Bt.Aq)(Kt(t)));return mr(e)}function Ra(){const t=ot.utils.randomPrivateKey();return(0,ot.getStarkKey)(t)}function Oa(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Dr(t));try{const{r:e,s:r}=t;return[Dr(e),Dr(r)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Na(t){return Mr(Oa(t))}function Da(t){return \$r(Oa(t))}function Pa(){return La({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function La(t,e=Ge.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Wr(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:Wr(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Wr(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:Wr(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Wr(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:Wr(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function Ua(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Fa(t,e=Ge.get("resourceBoundsOverhead")){return Wr(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*Wr(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+Wr(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*Wr(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+Wr(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*Wr(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Va(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Ha(t){if(t===Qe.L1)return tr.L1;if(t===Qe.L2)return tr.L2;throw Error("EDAM conversion")}function Ma(t,e){const r=Dr(e||t);if(!Object.values(Je).includes(r))throw Error(\`\${e?"providedVersion":"defaultVersion"} \${r} is not ETransactionVersion\`);return r}function \$a(t){if(!t)return;const e=Dr(t);if(e===Ze.V0)return Ze.F0;if(e===Ze.V1)return Ze.F1;if(e===Ze.V2)return Ze.F2;if(e===Ze.V3)return Ze.F3;throw Error(\`toFeeVersion: \${e} is not supported\`)}function ja(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Qe.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Qe.L1,resourceBounds:t.resourceBounds??Pa()}}function qa(t){const e=Dr(t);return Jt(Zt((0,ot.getPublicKey)(e,!1)))}function za(t){const e=t=>{if(Ir(t))return Dr(t);if(Br(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function Ga(t){const e=t=>{if(kr(t))return BigInt(t);if(Br(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function Ya(t){return"sierra_program"in(kr(t)?mr(t):t)}function Ka(){return re(Zt(Ct.bI.utils.randomPrivateKey()))}function Wa(t){Hr(t,le,2n**160n-1n,"Ethereum Address ");const e=Jt(Xt(Dr(t)).padStart(40,"0"));return vr(Boolean(e.match(/^(0x)?[0-9a-f]{40}\$/)),"Invalid Ethereum Address Format"),e}Ut({},{ZeroFeeEstimate:()=>Va,compressProgram:()=>Ba,decompressProgram:()=>Ca,formatSignature:()=>Oa,getFullPublicKey:()=>qa,intDAM:()=>Ha,randomAddress:()=>Ra,resourceBoundsToBigInt:()=>Ga,resourceBoundsToEstimateFeeResponse:()=>Ua,resourceBoundsToHexString:()=>za,signatureToDecimalArray:()=>Na,signatureToHexArray:()=>Da,toFeeVersion:()=>\$a,toOverheadOverallFee:()=>Fa,toOverheadResourceBounds:()=>La,toTransactionVersion:()=>Ma,v3Details:()=>ja,zeroResourceBounds:()=>Pa}),Ut({},{ethRandomPrivateKey:()=>Ka,validateAndParseEthAddress:()=>Wa});var Za="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==r.g&&r.g.fetch.bind(r.g)||(()=>{throw new ui("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function Xa(t){const e=t.version?Dr(t.version):Ze.V3;return e===Ze.V3||e===Ze.F3}function Ja(t,e){const r=t.split("."),n=e.split(".");return r.every((t,e)=>"*"===t||t===n[e])}function Qa(t,e={allowAnyPatchVersion:!1}){return Object.values(Me).some(r=>Ja(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:\`\${e[0]}.\${e[1]}.*\`}(r):r,t))}function ts(t){return new Promise(e=>{setTimeout(e,t)})}function es(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=wa(_r(t.abi)),e.sierra_program=wa(_r(t.sierra_program)),e.sierra_program=Ba(e.sierra_program),e}function rs(t){const e=kr(t)?mr(t):t;return Ya(t)?es(e):{...e,..."program"in e&&{program:Ba(e.program)}}}function ns(t){return kr(t.abi)?mr(t.abi):t.abi}Ut({},{Block:()=>cs,createSierraContractClass:()=>es,extractAbi:()=>ns,getDefaultNodeUrl:()=>is,getDefaultNodes:()=>as,getSupportedRpcVersions:()=>ss,parseContract:()=>rs,validBlockTags:()=>os,wait:()=>ts});var is=(t,e=!1,r)=>{e||Ke.info("Using default public node url, please provide nodeUrl in provider options!");const n=as(r??Ge.get("rpcVersion"))[t??Fe.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function as(t){const e={...je};return Object.keys(e).forEach(function(r,n){e[r]=e[r].map(e=>\`\${e}\${function(t){const[e,r]=t.replace(/^v/,"").split(".");return\`v\${e}_\${r}\`}(t)}\`)}),e}function ss(){return[...new Set(Object.values(Me))]}var os=Object.values(cr),cs=class{hash=null;number=null;tag=null;setIdentifier(t){if(kr(t))if(un(t))this.number=parseInt(t,10);else if(Cr(t))this.hash=t;else{if(!os.includes(t))throw TypeError(\`Block identifier unmanaged: \${t}\`);this.tag=t}else Ir(t)?this.hash=Dr(t):Tr(t)?this.number=t:this.tag=cr.LATEST;if(Tr(this.number)&&this.number<0)throw TypeError(\`Block number (\${this.number}) can't be negative\`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?\`blockNumber=\${this.number}\`:null!==this.hash?\`blockHash=\${this.hash}\`:\`blockNumber=\${this.tag}\`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function us(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}Ut({},{fromCallsToExecuteCalldata:()=>ds,fromCallsToExecuteCalldata_cairo1:()=>hs,getCompiledCalldata:()=>us,getExecuteCalldata:()=>fs,getVersionsByType:()=>ps,transformCallsToMulticallArrays:()=>ls});var ls=t=>{const e=[],r=[];return t.forEach(t=>{const n=qi.compile(t.calldata||[]);e.push({to:Or(t.contractAddress).toString(10),selector:Or(en(t.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:e,calldata:qi.compile({calldata:r})}},ds=t=>{const{callArray:e,calldata:r}=ls(t);return[...qi.compile({callArray:e}),...r]},hs=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:qi.compile(t.calldata)}));return qi.compile({orderCalls:e})},fs=(t,e="0")=>"1"===e?hs(t):ds(t);function ps(t){return"fee"===t?{v3:Ze.F3}:{v3:Ze.V3}}var ys={headers:{"Content-Type":"application/json"},blockIdentifier:cr.LATEST,retries:200},gs=class{id="RPC081";channelSpecVersion=Me.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(Fe).includes(s)?this.nodeUrl=is(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||is(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Ge.get("fetch")||Za,this.blockIdentifier=n??ys.blockIdentifier,this.chainId=i,this.headers={...ys.headers,...a},this.retries=o??ys.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,Tr(r)&&(this.batchClient=new wr({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),Ke.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:_r(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new li(r,t,e);if(n instanceof ui)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Ja(this.channelSpecVersion,t)||Ke.error(ze.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Qa(t))throw new ui(\`\${ze.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Dr(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new cs(n).identifier,a=\$r(t),s=\$r(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Dr(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new cs(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Dr(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=e,a=new cs(r).identifier,o=[];return n&&o.push(s.vn.SKIP_VALIDATE),i&&o.push(s.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const r=Dr(t);let n=e?.retries??this.retries,i=e?.lifeCycleRetries??3,a=!1,o=!1;const u=e?.retryInterval??this.transactionRetryIntervalDefault,l=e?.errorStates??[s.sI.REJECTED],d=e?.successStates??[s.sI.ACCEPTED_ON_L2,s.sI.ACCEPTED_ON_L1],h={[c.sI.RECEIVED]:ze.txEvictedFromMempool,[c.sI.PRE_CONFIRMED]:ze.consensusFailed,[c.sI.CANDIDATE]:ze.txFailsBlockBuildingValidation},f=[];let p;for(;!a;){await ts(u);try{p=await this.getTransactionStatus(r),f.push(p.finality_status);const t=p.execution_status,e=p.finality_status;if(!e)throw new Error("waiting for transaction status");if(l.includes(t)||l.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=p,o=!0,n}(d.includes(t)||d.includes(e))&&(a=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof li&&t.isType("TXN_HASH_NOT_FOUND")){Ke.info("txLife: ",f);const t=h[f.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1}let y=null;for(;null===y;){try{y=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1,await ts(u)}return y}getStorageAt(t,e,r=this.blockIdentifier){const n=Dr(t),i=Lr(e),a=new cs(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const n=new cs(e).identifier,i={simulation_flags:r?[s.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:n,...i})}async invoke(t,e){let r;if(!Xa(e))throw Error(ze.legacyTxRPC08Message);if(!er(e.resourceBounds))throw Error(ze.SWOldV3);return r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:s.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),version:s.WY.V3,signature:Da(t.signature),nonce:Dr(e.nonce),resource_bounds:za(e.resourceBounds),tip:Dr(e.tip),paymaster_data:e.paymasterData.map(t=>Dr(t)),account_deployment_data:e.accountDeploymentData.map(t=>Dr(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:t,signature:e,senderAddress:r,compiledClassHash:n},i){let a;if(!Ya(t)||!Xa(i))throw Error(ze.legacyTxRPC08Message);if(!er(i.resourceBounds))throw Error(ze.SWOldV3);return a=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:s.wV.DECLARE,sender_address:r,compiled_class_hash:n||"",version:s.WY.V3,signature:Da(e),nonce:Dr(i.nonce),contract_class:{sierra_program:Ca(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:za(i.resourceBounds),tip:Dr(i.tip),paymaster_data:i.paymasterData.map(t=>Dr(t)),account_deployment_data:i.accountDeploymentData.map(t=>Dr(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:r,signature:n},i){let a;if(!Xa(i))throw Error(ze.legacyTxRPC08Message);if(!er(i.resourceBounds))throw Error(ze.SWOldV3);return a=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:s.wV.DEPLOY_ACCOUNT,version:s.WY.V3,signature:Da(n),nonce:Dr(i.nonce),contract_address_salt:Dr(r||0),constructor_calldata:qi.toHex(e||[]),class_hash:Dr(t),resource_bounds:za(i.resourceBounds),tip:Dr(i.tip),paymaster_data:i.paymasterData.map(t=>Dr(t)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await a).transaction_hash):a}callContract(t,e=this.blockIdentifier){const r=new cs(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:en(t.entrypoint),calldata:qi.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Wa(r),to_address:Dr(n),entry_point_selector:rn(i),payload:Gr(a)},o=new cs(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=ps(e);let n;if(!Xa(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(n={signature:Da(t.signature),nonce:Dr(t.nonce),resource_bounds:za(t.resourceBounds),tip:Dr(t.tip),paymaster_data:t.paymasterData.map(t=>Dr(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Dr(t))},t.type===s.wV.INVOKE)return{type:s.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),version:Dr(t.version||r.v3),...n};if(t.type===s.wV.DECLARE){if(!Ya(t.contract))throw Ke.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Ca(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Dr(t.version||r.v3),...n}}if(t.type===s.wV.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=n;return{type:t.type,constructor_calldata:qi.toHex(t.constructorCalldata||[]),class_hash:Dr(t.classHash),contract_address_salt:Dr(t.addressSalt||0),version:Dr(t.version||r.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},ms={};Ut(ms,{RpcChannel:()=>_s});var bs={headers:{"Content-Type":"application/json"},blockIdentifier:cr.LATEST,retries:200},_s=class{id="RPC090";channelSpecVersion=Me.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(Fe).includes(s)?this.nodeUrl=is(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||is(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Ge.get("fetch")||Za,this.blockIdentifier=n??bs.blockIdentifier,this.chainId=i,this.headers={...bs.headers,...a},this.retries=o??bs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,Tr(r)&&(this.batchClient=new wr({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),Ke.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:_r(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new li(r,t,e);if(n instanceof ui)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Ja(this.channelSpecVersion,t)||Ke.error(ze.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Qa(t))throw new ui(\`\${ze.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Dr(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new cs(n).identifier,a=\$r(t),s=\$r(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Dr(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new cs(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new cs(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Dr(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Dr(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=e,a=new cs(r).identifier,s=[];return n&&s.push(c.vn.SKIP_VALIDATE),i&&s.push(c.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:s})}async waitForTransaction(t,e){const r=Dr(t);let n=e?.retries??this.retries,i=e?.lifeCycleRetries??3,a=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,u=e?.errorStates??[],l=e?.successStates??[c.en.ACCEPTED_ON_L2,c.en.ACCEPTED_ON_L1],d={[c.sI.RECEIVED]:ze.txEvictedFromMempool,[c.sI.PRE_CONFIRMED]:ze.consensusFailed,[c.sI.CANDIDATE]:ze.txFailsBlockBuildingValidation},h=[];let f;for(;!a;){await ts(o);try{f=await this.getTransactionStatus(r),h.push(f.finality_status);const t=f.execution_status,e=f.finality_status;if(!e)throw new Error("waiting for transaction status");if(u.includes(t)||u.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=f,s=!0,n}(l.includes(t)||l.includes(e))&&(a=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof li&&t.isType("TXN_HASH_NOT_FOUND")){Ke.info("txLife: ",h);const t=d[h.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1}let p=null;for(;null===p;){try{p=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1,await ts(o)}return p}async fastWaitForTransaction(t,e,r,n){const i=BigInt(r);let a=n?.retries??50;const s=n?.retryInterval??500,o=[c.If.REVERTED],u=[c.en.ACCEPTED_ON_L2,c.en.ACCEPTED_ON_L1,c.en.PRE_CONFIRMED];let l;const d=(new Date).getTime();for(;a>0;){await ts(s),l=await this.getTransactionStatus(t),Ke.info(\`\${a} \${JSON.stringify(l)} \${((new Date).getTime()-d)/1e3}s.\`);const r=l.execution_status??"",n=l.finality_status;if(o.includes(r)){const t=new Error(\`\${r}: \${n}\`);throw t.response=l,t}if(u.includes(n)){let t=i;for(;t===i&&a>0;){if(t=BigInt(await this.getNonceForAddress(e,cr.PRE_CONFIRMED)),Ke.info(\`\${a} Checking new nonce \${t} \${((new Date).getTime()-d)/1e3}s.\`),t!==i)return!0;await ts(s),a-=1}return!1}a-=1}return!1}getStorageAt(t,e,r=this.blockIdentifier){const n=Dr(t),i=Lr(e),a=new cs(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Dr(t),n=new cs(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const n=new cs(e).identifier,i={simulation_flags:r?[c.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:n,...i})}async invoke(t,e){const r=this.buildTransaction({type:Ht.ETransactionType.INVOKE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(t,e){const r=this.buildTransaction({type:Ht.ETransactionType.DECLARE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(t,e){const r=this.buildTransaction({type:Ht.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(t,e=this.blockIdentifier){const r=new cs(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:en(t.entrypoint),calldata:qi.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Wa(r),to_address:Dr(n),entry_point_selector:rn(i),payload:Gr(a)},o=new cs(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=ps(e);vr(Xa(t),ze.legacyTxRPC08Message),vr("transaction"!==e||er(t.resourceBounds),ze.SWOldV3);const n={signature:Da(t.signature),nonce:Dr(t.nonce),resource_bounds:za(t.resourceBounds),tip:Dr(t.tip),paymaster_data:t.paymasterData.map(t=>Dr(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Dr(t)),version:Ma(r.v3,t.version)};if(t.type===Ht.ETransactionType.INVOKE)return{type:c.wV.INVOKE,sender_address:t.contractAddress,calldata:qi.toHex(t.calldata),...n};if(t.type===Ht.ETransactionType.DECLARE)return vr(Ya(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Ca(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...n};if(t.type===Ht.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...r}=n;return{type:t.type,constructor_calldata:qi.toHex(t.constructorCalldata||[]),class_hash:Dr(t.classHash),contract_address_salt:Dr(t.addressSalt||0),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}},ws=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==r.g&&r.g.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:La(t,this.resourceBoundsOverhead),overall_fee:Fa(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:La(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:Fa(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:kr(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function vs(t){return"0x3"===t.version&&"tip"in t&&kr(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function Es(t,e=!0){return t.transactions.filter(vs).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function As(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Ts(t,e){const r=e/100*(t.length-1),n=Math.floor(r),i=Math.ceil(r);if(n===i)return t[n];const a=r-n,s=t[n];return s+(t[i]-s)*BigInt(Math.round(1e3*a))/1000n}function Ss(t){vr(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,be.max),r=t.reduce((t,e)=>e>t?e:t,0n),n=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),a=Math.floor(i.length/2);let s;s=i.length%2==0?(i[a-1]+i[a])/2n:i[a];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,r])=>r>t.maxCount||r===t.maxCount&&e<t.modeTip?{maxCount:r,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:r,averageTip:n,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:Ts(i,90),p95Tip:Ts(i,95)}}async function Is(t,e){try{const r=await t.getBlockWithTxs(e);return Tr(r.block_number)?r.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new ui(\`Failed to determine starting block number: \${t instanceof Error?t.message:"Unknown error"}\`)}}async function ks(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return Ke.warn(\`Failed to fetch block \${e}:\`,t),null}}function xs(t,e){const r=Math.max(0,t-e+1),n=t-r+1;return Array.from({length:n},(e,r)=>t-r)}async function Bs(t,e=cr.LATEST,r={}){const{maxBlocks:n=3,minTxsNecessary:i=10}=r;return vr(Number.isInteger(n),"maxBlocks parameter must be an integer"),vr(n>=1,"maxBlocks parameter must be greater than or equal to 1"),vr(n<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),vr(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),vr(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await Is(t,e),s=xs(r,n),o=await async function(t,e){const r=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return Ke.warn(\`Failed to fetch block \${e} in parallel:\`,t),null}});return Promise.all(r)}(t,s),c=o.filter(t=>null!==t).flatMap(t=>Es(t,a)),u=o.filter(t=>null!==t).length;return c.length<i?(Ke.error(\`Insufficient transaction data: found \${c.length} V3 transactions with tips in \${u} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),As(u,c)):{...Ss(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new ui(\`Failed to analyze tip statistics (parallel): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r):async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await Is(t,e),s=xs(r,n),o=[];let c=0;for(const e of s){const r=await ks(t,e);if(r){c+=1;const t=Es(r,a);if(o.push(...t),o.length>=i)break}}return o.length<i?(Ke.error(\`Insufficient transaction data: found \${o.length} V3 transactions with tips in \${c} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),As(c,o)):{...Ss(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new ui(\`Failed to analyze tip statistics (sequential): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r)}var Cs=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[r,n]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:r,writable:!1,enumerable:!1,configurable:!1},value:{value:n,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>r in t?t[r](n):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===r,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===r,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===r,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===or.SUCCEEDED}static isReverted(t){return t.execution_status===or.REVERTED}},Rs={[or.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[or.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Os(t){const e=Rs[t.execution_status];let r;if(e){const{statusReceipt:n,getBaseData:i,getValue:a}=e,s=a(t);r={...i(t),statusReceipt:n,value:s,match:t=>n in t?t[n](s):t._(),isSuccess:()=>"SUCCEEDED"===n,isReverted:()=>"REVERTED"===n,isError:()=>!1}}else{const t=new Error("Unknown response type");r={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(r,Cs.prototype),Object.defineProperty(r,"constructor",{value:Cs,writable:!1,enumerable:!1,configurable:!1}),r}Ut({},{encodeData:()=>Ys,encodeType:()=>qs,encodeValue:()=>Gs,getDependencies:()=>js,getMessageHash:()=>Ws,getStructHash:()=>Ks,getTypeHash:()=>zs,isMerkleTreeType:()=>\$s,prepareSelector:()=>Ms,validateTypedData:()=>Hs,verifyMessage:()=>Zs}),Ut({},{MerkleTree:()=>Ns,proofMerklePath:()=>Ds});var Ns=class t{leaves;branches=[];root;hashMethod;constructor(t,e=fa){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const r=[];for(let n=0;n<e.length;n+=2)n+1===e.length?r.push(t.hash(e[n],"0x0",this.hashMethod)):r.push(t.hash(e[n],e[n+1],this.hashMethod));return this.build(r)}static hash(t,e,r=fa){const[n,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return r(n,i)}getProof(e,r=this.leaves,n=[]){const i=r.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===r.length)return n;const a=i%2==0,s=(a?r[i+1]:r[i-1])??"0x0",o=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(t=>t.length===r.length),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(a?e:s,a?s:e,this.hashMethod),u,o)}};function Ds(t,e,r,n=fa){if(0===r.length)return t===e;const[i,...a]=r;return Ds(t,Ns.hash(e,i,n),a,n)}var Ps={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Ls={[Ht.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ma,hashMerkleMethod:pa,escapeTypeString:t=>\`"\${t}"\`,presetTypes:Ps},[Ht.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:ga,hashMerkleMethod:fa,escapeTypeString:t=>t,presetTypes:{}}};function Us(t,e,{min:r,max:n}){const i=BigInt(t);vr(i>=r&&i<=n,\`\${i} (\${e}) is out of bounds [\${r}, \${n}]\`)}function Fs({types:t,domain:e}){return Ls[Ht.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===Ht.TypedDataRevision.ACTIVE?Ht.TypedDataRevision.ACTIVE:Ls[Ht.TypedDataRevision.LEGACY].domain in t&&(e.revision??Ht.TypedDataRevision.LEGACY)===Ht.TypedDataRevision.LEGACY?Ht.TypedDataRevision.LEGACY:void 0}function Vs(t){try{return Dr(t)}catch(e){if(kr(t))return Dr(pn(t));throw new Error(\`Invalid BigNumberish: \${t}\`)}}function Hs(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Fs(e))}function Ms(t){return Cr(t)?t:en(t)}function \$s(t){return"merkletree"===t.type}function js(t,e,r=[],n="",i=Ht.TypedDataRevision.LEGACY){let a=[e];return"*"===e[e.length-1]?a=[e.slice(0,-1)]:i===Ht.TypedDataRevision.ACTIVE&&("enum"===e?a=[n]:e.match(/^\\(.*\\)\$/)&&(a=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),a.filter(e=>!r.includes(e)&&t[e]).reduce((e,r)=>[...e,...[r,...t[r].reduce((e,r)=>[...e,...js(t,r.type,e,r.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function qs(t,e,r=Ht.TypedDataRevision.LEGACY){const n=r===Ht.TypedDataRevision.ACTIVE?{...t,...Ls[r].presetTypes}:t,[i,...a]=js(n,e,void 0,void 0,r),s=i?[i,...a.sort()]:[],o=Ls[r].escapeTypeString;return s.map(t=>{const e=n[t].map(t=>{const e="enum"===t.type&&r===Ht.TypedDataRevision.ACTIVE?t.contains:t.type,n=e.match(/^\\(.*\\)\$/)?\`(\${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})\`:o(e);return\`\${o(t.name)}:\${n}\`});return\`\${o(t)}(\${e})\`}).join("")}function zs(t,e,r=Ht.TypedDataRevision.LEGACY){return en(qs(t,e,r))}function Gs(t,e,r,n={},i=Ht.TypedDataRevision.LEGACY){if(t[e])return[e,Ks(t,e,r,i)];if(Ls[i].presetTypes[e])return[e,Ks(Ls[i].presetTypes,e,r,i)];if(e.endsWith("*")){const n=r.map(r=>Gs(t,e.slice(0,-1),r,void 0,i)[1]);return[e,Ls[i].hashMethod(n)]}switch(e){case"enum":if(i===Ht.TypedDataRevision.ACTIVE){const[a,s]=Object.entries(r)[0],o=t[n.parent].find(t=>t.name===n.key),c=t[o.contains],u=c.find(t=>t.name===a),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map((e,r)=>{if(!e)return e;const n=s[r];return Gs(t,e,n,void 0,i)[1]});return[e,Ls[i].hashMethod([l,...d])]}return[e,Vs(r)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const r=t[e.parent].find(t=>t.name===e.key);if(!\$s(r))throw new Error(\`\${e.key} is not a merkle tree\`);if(r.contains.endsWith("*"))throw new Error(\`Merkle tree contain property must not be an array but was given \${e.key}\`);return r.contains}return"raw"}(t,n),a=r.map(r=>Gs(t,e,r,void 0,i)[1]),{root:s}=new Ns(a,Ls[i].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Ms(r)];case"string":if(i===Ht.TypedDataRevision.ACTIVE){const t=mn(r),n=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Ls[i].hashMethod(n)]}return[e,Vs(r)];case"i128":if(i===Ht.TypedDataRevision.ACTIVE){const t=BigInt(r);return Us(t,e,Be),[e,Vs(t<0n?pe+t:t)]}return[e,Vs(r)];case"timestamp":case"u128":return i===Ht.TypedDataRevision.ACTIVE&&Us(r,e,Te),[e,Vs(r)];case"felt":case"shortstring":return i===Ht.TypedDataRevision.ACTIVE&&Us(Vs(r),e,be),[e,Vs(r)];case"ClassHash":case"ContractAddress":return i===Ht.TypedDataRevision.ACTIVE&&Us(r,e,be),[e,Vs(r)];case"bool":return i===Ht.TypedDataRevision.ACTIVE&&vr(Sr(r),\`Type mismatch for \${e} \${r}\`),[e,Vs(r)];default:if(i===Ht.TypedDataRevision.ACTIVE)throw new Error(\`Unsupported type: \${e}\`);return[e,Vs(r)]}}function Ys(t,e,r,n=Ht.TypedDataRevision.LEGACY){const i=t[e]??Ls[n].presetTypes[e],[a,s]=i.reduce(([i,a],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw new Error(\`Cannot encode data: missing data for '\${s.name}'\`);const o=r[s.name],c={parent:e,key:s.name},[u,l]=Gs(t,s.type,o,c,n);return[[...i,u],[...a,l]]},[["felt"],[zs(t,e,n)]]);return[a,s]}function Ks(t,e,r,n=Ht.TypedDataRevision.LEGACY){return Ls[n].hashMethod(Ys(t,e,r,n)[1])}function Ws(t,e){if(!Hs(t))throw new Error("Typed data does not match JSON schema");const r=Fs(t),{domain:n,hashMethod:i}=Ls[r];return i([pn("StarkNet Message"),Ks(t.types,n,t.domain,r),e,Ks(t.types,t.primaryType,t.message,r)])}function Zs(t,e,r,n){const i=Hs(t);if(!Xr(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===n)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Xr(n))throw new Error("accountAddress shall be a BigNumberish");const a=i?Ws(t,n):Dr(t),s=Array.isArray(e)?new ot.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Dr(r);return ot.verify(s,a,o)}var Xs=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new ws;else{const e=t;if(e&&e.specVersion)if(Ja("0.8",e.specVersion))this.channel=new We.RpcChannel({...e,waitMode:!1});else{if(!Ja("0.9",e.specVersion))throw new Error(\`unsupported channel for spec version: \${e.specVersion}\`);this.channel=new ms.RpcChannel({...e,waitMode:!1})}else if(Ja("0.8",Ge.get("rpcVersion")))this.channel=new We.RpcChannel({...e,waitMode:!1});else{if(!Ja("0.9",Ge.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new ms.RpcChannel({...e,waitMode:!1})}this.responseParser=new ws(e?.resourceBoundsOverhead)}}static async create(t){const e=new We.RpcChannel({...t}),r=await e.getSpecVersion();if(Qa(r)||Ke.warn(\`Using incompatible node spec version \${r}\`),Ja("0.8",r))return new this({...t,specVersion:Me.v0_8_1});if(Ja("0.9",r))return new this({...t,specVersion:Me.v0_9_0});throw new ui(\`Provided RPC node specification version \${r} is not compatible with the SDK. SDK supported RPC versions \${Object.keys(Me).toString()}\`)}fetch(t,e,r=0){return this.channel.fetch(t,e,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=cr.LATEST,e=5e3){if(t===cr.LATEST)return;if("pending"===t)return;const r=await this.getBlockNumber(),n=t===cr.PRE_CONFIRMED?r+1:Number(Dr(t));if(n<=r)return;const{retries:i}=this.channel;let a=i,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await ts(e),a-=1,a<=0)throw new Error(\`waitForBlock() timed-out after \${i} tries.\`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof ms.RpcChannel)return async function(t,e=t.blockIdentifier){const r=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(r.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(r.l1_gas_price.price_in_fri),l2GasPrice:BigInt(r.l2_gas_price.price_in_fri)}}(this.channel,t);throw new ui("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);vr("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:r,contract_address:n,entry_point_selector:i,nonce:a}=e;return nn([r[0],n,a,i,r.length-1,...r.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Os(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return Os(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,r,n){if(this.channel instanceof ms.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,r,n);throw new Error("Unsupported channel type")}async getStorageAt(t,e,r){return this.channel.getStorageAt(t,e,r)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let i;if(t)i=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,r)}return Ya(i)?n?{cairo:"1",compiler:Kn(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeclareEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeployAccountEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Ht.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof We.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof ms.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,r,n,i){return async function(t,e,r,n,i,a){const s=Hs(e);if(!Xr(e)&&!s)throw new Error("message has a wrong format.");if(!Xr(n))throw new Error("accountAddress shall be a BigNumberish");const o=s?Ws(e,n):Dr(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:Dr(n),entrypoint:e,calldata:qi.compile({hash:Or(o).toString(),signature:Oa(r)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some(e=>t.message.includes(e)))return!1;l=t}throw Error(\`Signature verification Error: \${l}\`)}(this,t,e,r,n,i)}async isClassDeclared(t,e){let r;if(!t.classHash&&"contract"in t)r=function(t){const e={...t};if(Ya(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Sa(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??xa(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");r=t.classHash}try{return await this.getClass(r,e)instanceof Object}catch(t){if(t instanceof ui)return!1;throw t}}async prepareInvocations(t){const e=[];for(const r of t)r.type===Ht.ETransactionType.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||e.unshift(r):e.push(r);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,r,n){return this.channel.getStorageProof(t,e,r,n)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return Bs(this,t,e)}};Ut({},{StarknetIdContract:()=>oo,StarknetIdIdentityContract:()=>uo,StarknetIdMulticallContract:()=>ho,StarknetIdPfpContract:()=>go,StarknetIdPopContract:()=>bo,StarknetIdVerifierContract:()=>po,dynamicCallData:()=>Eo,dynamicFelt:()=>vo,execution:()=>wo,getStarknetIdContract:()=>co,getStarknetIdIdentityContract:()=>lo,getStarknetIdMulticallContract:()=>fo,getStarknetIdPfpContract:()=>mo,getStarknetIdPopContract:()=>_o,getStarknetIdVerifierContract:()=>yo,isStarkDomain:()=>Ao,useDecoded:()=>ao,useEncoded:()=>so});var Js="abcdefghijklmnopqrstuvwxyz0123456789-",Qs=BigInt(38),to="",eo=BigInt(37),ro=BigInt(2),no=BigInt(3);function io(t){let e=0;for(;t.endsWith(to[1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function ao(t){let e="";return t.forEach(t=>{for(;t!==le;){const r=t%Qs;if(t/=Qs,r===BigInt(37)){const r=t/no;if(r===le){const n=t%no;t=r,e+=n===le?Js[0]:to[Number(n)-1]}else e+=to[Number(t%ro)],t/=ro}else e+=Js[Number(r)]}const[r,n]=io(e);n&&(e=r+(n%2==0?to[1].repeat(n/2-1)+to[0]+Js[1]:to[1].repeat((n-1)/2+1))),e+="."}),e?e.concat("stark"):e}function so(t){let e=BigInt(0),r=BigInt(1);if(t.endsWith(to[0]+Js[1])){const[e,r]=io(t.substring(0,t.length-2));t=e+to[1].repeat(2*(r+1))}else{const[e,r]=io(t);r&&(t=e+to[1].repeat(1+2*(r-1)))}for(let n=0;n<t.length;n+=1){const i=t[n],a=Js.indexOf(i),s=BigInt(Js.indexOf(i));if(-1!==a)n===t.length-1&&t[n]===Js[0]?(e+=r*eo,r*=Qs,r*=Qs):(e+=r*s,r*=Qs);else if(-1!==to.indexOf(i)){e+=r*eo,r*=Qs;const a=(n===t.length-1?1:0)+to.indexOf(i);e+=r*BigInt(a),r*=ro}}return e}var oo={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function co(t){switch(t){case Ve.SN_MAIN:return oo.MAINNET;case Ve.SN_SEPOLIA:return oo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var uo={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function lo(t){switch(t){case Ve.SN_MAIN:return uo.MAINNET;case Ve.SN_SEPOLIA:return uo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ho="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function fo(t){switch(t){case Ve.SN_MAIN:case Ve.SN_SEPOLIA:return ho;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var po={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function yo(t){switch(t){case Ve.SN_MAIN:return po.MAINNET;case Ve.SN_SEPOLIA:return po.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var go={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function mo(t){switch(t){case Ve.SN_MAIN:return go.MAINNET;case Ve.SN_SEPOLIA:return go.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var bo={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function _o(t){switch(t){case Ve.SN_MAIN:return bo.MAINNET;case Ve.SN_SEPOLIA:return bo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function wo(t,e=void 0,r=void 0){return new Qn({Static:t,IfEqual:e?Xn(e[0],e[1],e[2]):void 0,IfNotEqual:r?Xn(r[0],r[1],r[2]):void 0})}function vo(t,e=void 0){return new Qn({Hardcoded:t,Reference:e?Xn(e[0],e[1]):void 0})}function Eo(t,e=void 0,r=void 0){return new Qn({Hardcoded:t,Reference:e?Xn(e[0],e[1]):void 0,ArrayReference:r?Xn(r[0],r[1]):void 0})}function Ao(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\\.)*[a-z0-9-]{1,48}\\.stark\$/.test(t)}function To(t){return so(t.endsWith(".brother")?t.replace(".brother",""):t)}function So(t){const e=ao([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?\`\${e}.brother\`:e}function Io(t){return Ve.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var ko=((0,Rt.Mixin)(Xs,class t{async getStarkName(e,r){return t.getStarkName(this,e,r)}async getAddressFromStarkName(e,r){return t.getAddressFromStarkName(this,e,r)}async getStarkProfile(e,r,n,i,a,s,o){return t.getStarkProfile(this,e,r,n,i,a,s,o)}static async getStarkName(t,e,r){const n=await t.getChainId(),i=r??co(n);try{const r=ao((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:qi.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!r)throw Error("Starkname not found");return r}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,r){const n=e.endsWith(".stark")?e:\`\${e}.stark\`;if(!Ao(n))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),a=r??co(i);try{const e=n.replace(".stark","").split(".").map(t=>so(t).toString(10));return(await t.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:qi.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,r,n,i,a,s,o){const c=await t.getChainId(),u=r??co(c),l=n??lo(c),d=i??yo(c),h=a??mo(c),f=s??_o(c),p=o??fo(c);try{const r=[{execution:wo({}),to:Eo(u),selector:Eo(en("address_to_domain")),calldata:[Eo(e),Eo("0")]},{execution:wo({}),to:vo(u),selector:vo(en("domain_to_id")),calldata:[Eo(void 0,void 0,[0,0])]},{execution:wo({}),to:vo(l),selector:vo(en("get_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("twitter")),Eo(d),Eo("0")]},{execution:wo({}),to:vo(l),selector:vo(en("get_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("github")),Eo(d),Eo("0")]},{execution:wo({}),to:vo(l),selector:vo(en("get_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("discord")),Eo(d),Eo("0")]},{execution:wo({}),to:vo(l),selector:vo(en("get_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("proof_of_personhood")),Eo(f),Eo("0")]},{execution:wo({}),to:vo(l),selector:vo(en("get_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("nft_pp_contract")),Eo(h),Eo("0")]},{execution:wo({}),to:vo(l),selector:vo(en("get_extended_verifier_data")),calldata:[Eo(void 0,[1,0]),Eo(pn("nft_pp_id")),Eo("2"),Eo(h),Eo("0")]},{execution:wo(void 0,void 0,[6,0,0]),to:vo(void 0,[6,0]),selector:vo(en("tokenURI")),calldata:[Eo(void 0,[7,1]),Eo(void 0,[7,2])]}],n=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:qi.compile({calls:r})});if(Array.isArray(n)){const t=parseInt(n[0],16),e=[];let r=1;for(let i=0;i<t&&r<n.length;i+=1){const t=parseInt(n[r],16);r+=1;const i=n.slice(r,r+t);e.push(i),r+=t}const i=ao(e[0].slice(1).map(t=>BigInt(t))),a="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,s="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:a,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===n[0]?e[8].slice(1).map(t=>yn(t)).join(""):void 0)||\`https://starknet.id/api/identicons/\${BigInt(e[1][0]).toString()}\`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}},class t{async getBrotherName(e,r){return t.getBrotherName(this,e,r)}async getAddressFromBrotherName(e,r){return t.getAddressFromBrotherName(this,e,r)}async getBrotherProfile(e,r){return t.getBrotherProfile(this,e,r)}static async getBrotherName(t,e,r){await t.getChainId();const n=r??Io();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:qi.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother name not found");return So(BigInt(r[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,r){const n=e.endsWith(".brother")?e:\`\${e}.brother\`;if(!n.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=r??Io();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:qi.compile({domain:To(n)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,r){await t.getChainId();const n=r??Io();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:qi.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother profile not found");const i=So(BigInt(r[0])).replace(".brother",""),a=await t.callContract({contractAddress:n,entrypoint:"get_details_by_domain",calldata:qi.compile({domain:To(i)})});return{name:i,resolver:a[1],tokenId:a[2],expiryDate:parseInt(a[3],16),lastTransferTime:parseInt(a[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}}),new Xs({default:!0}),{});function xo(t){return new An(t).toBigInt()}function Bo(t){return An.is(t)}function Co(t){return new An(t).toUint256HexString()}function Ro(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function Oo(t){const e=t.calldata??[],r=Array.isArray(e)?e:qi.compile(e);return{to:t.contractAddress,selector:en(t.entrypoint),calldata:r}}function No(t,e){const r=Oo(t);return"1"===e?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function Do(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Po(t,e,r,n,i){return"1"===i?{types:pr,primaryType:"OutsideExecution",domain:Do(t,i),message:{...e,nonce:r,calls_len:n.length,calls:n.map(t=>No(t,i))}}:{types:yr,primaryType:"OutsideExecution",domain:Do(t,i),message:{Caller:e.caller,Nonce:r,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:n.map(t=>No(t,i))}}}function Lo(t){const e=t.outsideExecution,r=Oa(t.signature);return qi.compile({outside_execution:e,signature:r})}function Uo(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Dr(t.signerAddress),entrypoint:e,calldata:Lo(t)}})}async function Fo(t,e,r){const n={contractAddress:Dr(e),entrypoint:"supports_interface",calldata:[Dr(r)]};try{const e=await t.callContract(n);return 0n!==BigInt(e[0])}catch{return!1}}Ut(ko,{bnToUint256:()=>Co,isUint256:()=>Bo,uint256ToBN:()=>xo}),Ut({},{buildExecuteFromOutsideCall:()=>Uo,buildExecuteFromOutsideCallData:()=>Lo,getOutsideCall:()=>Oo,getTypedData:()=>Po,toOutsideCallV2:()=>Ro}),Ut({},{supportsInterface:()=>Fo}),Ut({},{assertCallsAreStrictlyEqual:()=>Ho,assertPaymasterTransactionSafety:()=>Mo,getDefaultPaymasterNodeUrl:()=>Vo});var Vo=(t,e=!1)=>{e||Ke.info("Using default public node url, please provide nodeUrl in provider options!");const r=qe[t??Fe.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function Ho(t,e){const r="Provided calls are not strictly equal to the returned calls";vr(e.length-1===t.length,\`\${r}: Expected \${t.length+1} calls, got \${e.length}\`);for(let n=0;n<t.length;n+=1){const i=t[n],a=Ro(e[n]),s=t=>Or(t).toString(16).toLowerCase();vr(s(i.contractAddress)===s(a.To),\`\${r}: Contract address mismatch at call \${n}. Expected: \${i.contractAddress}, Got: \${a.To}\`),vr(en(i.entrypoint)===a.Selector,\`\${r}: Entrypoint mismatch at call \${n}. Expected: \${i.entrypoint}, Got: \${a.Selector}\`);const o=qi.toCalldata(i.calldata),c=qi.toCalldata(a.Calldata);vr(o.length===c.length,\`\${r}: Calldata length mismatch at call \${n}. Expected length: \${o.length}, Got length: \${c.length}\`);for(let t=0;t<o.length;t+=1)vr(BigInt(o[t])===BigInt(c[t]),\`\${r}: Calldata value mismatch at call \${n}, parameter \${t}. Expected: \${o[t]}, Got: \${c[t]}\`)}}var Mo=(t,e,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Ho(e,i),((t,e)=>{const r=Ro(t[t.length-1]);vr(BigInt(r.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,r.feeMode.gasToken),n&&(vr(t.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((t,e)=>{const r=Ro(t[t.length-1]),n=qi.toCalldata(r.Calldata)[1];vr(BigInt(n)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},\$o=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},jo=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,qo=t=>{return{version:t.version,feeMode:(r=t.fee_mode,"sponsored"===r.mode?{mode:"sponsored"}:{mode:"default",gasToken:r.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,r},zo={"Content-Type":"application/json"},Go=(new class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...zo,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Vo(void 0),this.headers={...zo,...e.headers},this.baseFetch=e.baseFetch??Za,void(this.requestId=0);const{nodeUrl:r,headers:n,baseFetch:i}=e||{};r&&Object.values(Fe).includes(r)?this.nodeUrl=Vo(r,e?.default):this.nodeUrl=r||Vo(void 0,e?.default),this.baseFetch=i??Za,this.headers={...zo,...n},this.requestId=0}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:_r(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new li(r,t,e);if(n instanceof ui)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const r=await this.fetch(t,e,this.requestId),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:(n=t.invoke.calls,n.map(t=>({to:t.contractAddress,selector:en(t.entrypoint),calldata:qi.toHex(t.calldata)})))}};break;default:r=t}var n;const i={version:e.version,fee_mode:\$o(e.feeMode),time_bounds:jo(e.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),s={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:qo(a.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:qo(a.parameters),fee:s};default:return{type:"deploy",deployment:a.deployment,parameters:qo(a.parameters),fee:s}}}async executeTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Da(t.invoke.signature)}};break;default:r=t}const n={version:e.version,fee_mode:\$o(e.feeMode),time_bounds:jo(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}}({default:!0}),class{address;entryPoint;constructor(t,e){this.address=t??Re.ADDRESS,this.entryPoint=e??Re.ENTRYPOINT}buildDeployerCall(t,e){const r=[].concat(t).map(t=>{const{classHash:r,salt:n,unique:i=!0,constructorCalldata:a=[],abi:s}=t,o=us(a,()=>{if(s){const t=new qi(s),e=Object.values(a);return t.validate(ur,"constructor",e),t.compile("constructor",e)}return qi.compile(a)}),c=n??Ra();return{call:{contractAddress:Dr(this.address),entrypoint:this.entryPoint,calldata:[r,c,Yr(i),o.length,...o]},address:ba(i?ot.pedersen(e,c):c,r,o,i?this.address:0)}});return{calls:r.map(t=>t.call),addresses:r.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Vr(t.from_address)===Vr(Dr(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}});function Yo(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function Ko(t){return t.request({type:"wallet_getPermissions"})}function Wo(t,e){return t.request({type:"wallet_watchAsset",params:e})}function Zo(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function Xo(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function Jo(t){return t.request({type:"wallet_requestChainId"})}function Qo(t){return t.request({type:"wallet_deploymentData"})}function tc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function ec(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function rc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function nc(t){return t.request({type:"wallet_supportedSpecs"})}function ic(t,e){t.on("accountsChanged",e)}function ac(t,e){t.on("networkChanged",e)}function sc(t){return"event"===t.type}function oc(t){const e=t.filter(t=>sc(t)&&"struct"===t.kind),r=t.filter(t=>sc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let n=[],{name:i}=e,a=!1;const s=t=>t.type===i;for(;;){const t=r.find(t=>t.variants.some(s));if(Ar(t))break;const e=t.variants.find(s);n.unshift(e.name),"flat"===e.kind&&(a=!0),i=t.name}if(0===n.length)throw new Error("inconsistency in ABI events definition.");a&&(n=[n[n.length-1]]);const o=n.pop();let c={[Jt(ot.keccak(Gt(o)).toString(16))]:e};for(;n.length>0;)c={[Jt(ot.keccak(Gt(n.pop())).toString(16))]:c};return c={...c},uc(t,c)},{})}function cc(t){return Gn(t)?oc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const r=e.name,n={...e};return n.name=r,{...t,[Jt(ot.keccak(Gt(r)).toString(16))]:n}},{})}(t)}function uc(t,e){const r={...t};return Br(t)&&Br(e)&&Object.keys(e).forEach(n=>{Br(e[n])?n in t?r[n]=uc(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function lc(t,e,r,n,i){return t.flat().reduce((t,a)=>{const s=JSON.parse(JSON.stringify(a));let o=e[s.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=s.keys.shift();vr(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const u=s.keys[Symbol.iterator](),l=s.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Pi({responseIterator:u,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Pi({responseIterator:l,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),"block_hash"in s&&(c.block_hash=s.block_hash),"block_number"in s&&(c.block_number=s.block_number),"transaction_hash"in s&&(c.transaction_hash=s.transaction_hash),t.push(c),t},[])}new Go(Re.ADDRESS,Re.ENTRYPOINT),new Go(Ce.ADDRESS,Ce.ENTRYPOINT),Ut({},{addDeclareTransaction:()=>ec,addInvokeTransaction:()=>tc,addStarknetChain:()=>Zo,deploymentData:()=>Qo,getPermissions:()=>Ko,onAccountChange:()=>ic,onNetworkChanged:()=>ac,requestAccounts:()=>Yo,requestChainId:()=>Jo,signMessage:()=>rc,supportedSpecs:()=>nc,switchStarknetChain:()=>Xo,watchAsset:()=>Wo}),Ut({},{getAbiEvents:()=>cc,isAbiEvent:()=>sc,parseEvents:()=>lc}),Ht.TypedDataRevision;var dc=r(6885).ProjectivePoint;ot.CURVE.n;var hc=new dc(ot.CURVE.Gx,ot.CURVE.Gy,1n);function fc(t){return t instanceof Uint8Array?Er.toBigInt("0x"+function(t){if(function(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}(t),n)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=i[t[r]];return e}(t)):Er.toBigInt(t)}function pc(t){var e=t.low,r=t.high;return void 0!==e&&void 0!==r}function yc(t){return Er.isBigNumberish(t)?Er.toBigInt(t):ko.uint256ToBN(t)}function gc(t,e,r){return 0n===e?{L:t.multiplyUnsafe(r),R:hc.multiplyUnsafe(r)}:{L:hc.multiply(e).add(t.multiplyUnsafe(r)),R:hc.multiplyUnsafe(r)}}function mc(t,e,r){var n=r.multiply(t);if(n.equals(e))return 0n;var i=e.subtract(n),a=1n,s=hc;if(s.equals(i))return 1n;for(;a<Math.pow(2,32);)if(a+=1n,(s=s.add(hc)).equals(i))return a;throw new Error("Decription of Cipherbalance has failed")}function bc(t,e,r,n){var i=n.multiply(t);return r.subtract(i).equals(hc.multiplyUnsafe(e))}function _c(t){return e=hc.multiply(t),{x:(r=e.toAffine()).x,y:r.y};var e,r}new dc(627088272801405713560985229077786158610581355215145837257248988047835443922n,962306405833205337611861169387935900858447421343428280515103558221889311122n,1n)},7526(t,e){"use strict";e.byteLength=function(t){var e=o(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,a=o(t),s=a[0],c=a[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,c)),l=0,d=c>0?s-4:s;for(r=0;r<d;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],s=16383,o=0,c=n-i;o<c;o+=s)a.push(u(t,o,o+s>c?c:o+s));return 1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function u(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(c(n));return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8287(t,e,r){"use strict";const n=r(7526),i=r(251),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const s=2147483647;function o(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|y(t,e);let n=o(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?o(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return l(t),o(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),r=o(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(i)return n?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return x(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:_(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,r,n,i){let a,s=1,o=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,o/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(a=r;a<o;a++)if(u(t,a)===u(e,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===c)return n*s}else-1!==n&&(a-=a-n),n=-1}else for(r+c>o&&(r=o-c),a=r;a>=0;a--){let r=!0;for(let n=0;n<c;n++)if(u(t,a+n)!==u(e,n)){r=!1;break}if(r)return a}return-1}function w(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const a=e.length;let s;for(n>a/2&&(n=a/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(Z(n))return s;t[r+s]=n}return s}function v(t,e,r,n){return K(G(e,t.length-r),t,r,n)}function E(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function A(t,e,r,n){return K(Y(e),t,r,n)}function T(t,e,r,n){return K(function(t,e){let r,n,i;const a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let a=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,o,c;switch(s){case 1:e<128&&(a=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(a=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:r=t[i+1],n=t[i+2],o=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&o)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&o,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=k));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by \`buffer\` v5.x. Use \`buffer\` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},c.allocUnsafe=function(t){return d(t)},c.allocUnsafeSlow=function(t){return d(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(W(e,Uint8Array))i+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.IS;return t=this.toString("hex",0,r).replace(/(.{2})/g,"\$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const o=Math.min(a,s),u=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<o;++t)if(u[t]!==l[t]){a=u[t],s=l[t];break}return a<s?-1:s<a?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return E(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function x(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=X[t[n]];return i}function R(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function O(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,i,a){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n,i){\$(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function P(t,e,r,n,i){\$(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a>>=8,t[r+6]=a,a>>=8,t[r+5]=a,a>>=8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function L(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,a){return e=+e,r>>>=0,a||L(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,a){return e=+e,r>>>=0,a||L(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t],i=1,a=0;for(;++a<e&&(i*=256);)n+=this[t+a]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=this[t],i=1,a=0;for(;++a<e&&(i*=256);)n+=this[t+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);let n=e,i=1,a=this[t+--n];for(;n>0&&(i*=256);)a+=this[t+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},c.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=J(function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),c.prototype.readBigInt64BE=J(function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=J(function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=J(function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,t,e,r,n-1,-n)}let i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a|0)-s&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);N(this,t,e,r,n-1,-n)}let i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a|0)-s&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=J(function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=J(function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const a=c.isBuffer(t)?t:c.from(t,n),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};const V={};function H(t,e,r){V[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=\`\${this.name} [\${t}]\`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return\`\${this.name} [\${t}]: \${this.message}\`}}}function M(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=\`_\${t.slice(r-3,r)}\${e}\`;return\`\${t.slice(0,r)}\${e}\`}function \$(t,e,r,n,i,a){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=a>3?0===e||e===BigInt(0)?\`>= 0\${n} and < 2\${n} ** \${8*(a+1)}\${n}\`:\`>= -(2\${n} ** \${8*(a+1)-1}\${n}) and < 2 ** \${8*(a+1)-1}\${n}\`:\`>= \${e}\${n} and <= \${r}\${n}\`,new V.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,a)}function j(t,e){if("number"!=typeof t)throw new V.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw j(t,r),new V.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(r||"offset",\`>= \${r?1:0} and <= \${e}\`,t)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?\`\${t} is outside of buffer bounds\`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(t,e){return\`The "\${t}" argument must be of type number. Received type \${typeof e}\`},TypeError),H("ERR_OUT_OF_RANGE",function(t,e,r){let n=\`The value of "\${t}" is out of range.\`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=M(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),n+=\` It must be \${e}. Received \${i}\`,n},RangeError);const z=/[^+/0-9A-Za-z-_]/g;function G(t,e){let r;e=e||1/0;const n=t.length;let i=null;const a=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Y(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},251(t,e){e.read=function(t,e,r,n,i){var a,s,o=8*i-n-1,c=(1<<o)-1,u=c>>1,l=-7,d=r?i-1:0,h=r?-1:1,f=t[e+d];for(d+=h,a=f&(1<<-l)-1,f>>=-l,l+=o;l>0;a=256*a+t[e+d],d+=h,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+t[e+d],d+=h,l-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),a-=u}return(f?-1:1)*s*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var s,o,c,u=8*a-i-1,l=(1<<u)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(o=0,s=l):s+d>=1?(o=(e*c-1)*Math.pow(2,i),s+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&o,f+=p,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;t[r+f]=255&s,f+=p,s/=256,u-=8);t[r+f-p]|=128*y}},1668(t,e,r){"use strict";const{Deflate:n,deflate:i,deflateRaw:a,gzip:s}=r(3303),{Inflate:o,inflate:c,inflateRaw:u,ungzip:l}=r(7083),d=r(9681);t.exports.Deflate=n,t.exports.deflate=i,t.exports.deflateRaw=a,t.exports.gzip=s,t.exports.Inflate=o,t.exports.inflate=c,t.exports.inflateRaw=u,t.exports.ungzip=l,t.exports.constants=d},3303(t,e,r){"use strict";const n=r(8411),i=r(9805),a=r(1996),s=r(4674),o=r(4442),c=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:y,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:m}=r(9681);function b(t){this.options=i.assign({level:y,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==f)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=n.deflateSetDictionary(this.strm,t),r!==f)throw new Error(s[r]);this._dict_set=!0}}function _(t,e){const r=new b(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize;let s,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?h:u,"string"==typeof t?r.input=a.string2buf(t):"[object ArrayBuffer]"===c.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(o===l||o===d)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=n.deflate(r,o),s===p)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=n.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===f;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===f&&(this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=_,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,_(t,e)},t.exports.constants=r(9681)},7083(t,e,r){"use strict";const n=r(1447),i=r(9805),a=r(1996),s=r(4674),o=r(4442),c=r(7414),u=Object.prototype.toString,{Z_NO_FLUSH:l,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:y,Z_DATA_ERROR:g,Z_MEM_ERROR:m}=r(9681);function b(t){this.options=i.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,e.windowBits);if(r!==h)throw new Error(s[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=a.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary),r!==h)))throw new Error(s[r])}function _(t,e){const r=new b(e);if(r.push(t),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(t,e){const r=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let o,c,b;if(this.ended)return!1;for(c=e===~~e?e:!0===e?d:l,"[object ArrayBuffer]"===u.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),o=n.inflate(r,c),o===p&&s&&(o=n.inflateSetDictionary(r,s),o===h?o=n.inflate(r,c):o===g&&(o=p));r.avail_in>0&&o===f&&r.state.wrap>0&&0!==t[r.next_in];)n.inflateReset(r),o=n.inflate(r,c);switch(o){case y:case g:case p:case m:return this.onEnd(o),this.ended=!0,!1}if(b=r.avail_out,r.next_out&&(0===r.avail_out||o===f))if("string"===this.options.to){let t=a.utf8border(r.output,r.next_out),e=r.next_out-t,n=a.buf2string(r.output,t);r.next_out=e,r.avail_out=i-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==h||0!==b){if(o===f)return o=n.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=_,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,_(t,e)},t.exports.ungzip=_,t.exports.constants=r(9681)},9805(t){"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)e(n,r)&&(t[r]=n[r])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r}},1996(t){"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const r=new Uint8Array(256);for(let t=0;t<256;t++)r[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;r[254]=r[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},t.exports.buf2string=(t,n)=>{const i=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));let a,s;const o=new Array(2*i);for(s=0,a=0;a<i;){let e=t[a++];if(e<128){o[s++]=e;continue}let n=r[e];if(n>4)o[s++]=65533,a+=n-1;else{for(e&=2===n?31:3===n?15:7;n>1&&a<i;)e=e<<6|63&t[a++],n--;n>1?o[s++]=65533:e<65536?o[s++]=e:(e-=65536,o[s++]=55296|e>>10&1023,o[s++]=56320|1023&e)}}return((t,r)=>{if(r<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===r?t:t.subarray(0,r));let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n})(o,s)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+r[t[n]]>e?n:e}},3269(t){"use strict";t.exports=(t,e,r,n)=>{let i=65535&t,a=t>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+e[n++]|0,a=a+i|0}while(--s);i%=65521,a%=65521}return i|a<<16}},9681(t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823(t){"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());t.exports=(t,r,n,i)=>{const a=e,s=i+n;t^=-1;for(let e=i;e<s;e++)t=t>>>8^a[255&(t^r[e])];return-1^t}},8411(t,e,r){"use strict";const{_tr_init:n,_tr_stored_block:i,_tr_flush_block:a,_tr_tally:s,_tr_align:o}=r(3665),c=r(3269),u=r(4823),l=r(4674),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:y,Z_OK:g,Z_STREAM_END:m,Z_STREAM_ERROR:b,Z_DATA_ERROR:_,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:v,Z_FILTERED:E,Z_HUFFMAN_ONLY:A,Z_RLE:T,Z_FIXED:S,Z_DEFAULT_STRATEGY:I,Z_UNKNOWN:k,Z_DEFLATED:x}=r(9681),B=258,C=262,R=42,O=113,N=666,D=(t,e)=>(t.msg=l[e],e),P=t=>2*t-(t>4?9:0),L=t=>{let e=t.length;for(;--e>=0;)t[e]=0},U=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=i?r-i:0}while(--e);e=i,n=e;do{r=t.prev[--n],t.prev[n]=r>=i?r-i:0}while(--e)};let F=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const V=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},H=(t,e)=>{a(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,V(t.strm)},M=(t,e)=>{t.pending_buf[t.pending++]=e},\$=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},j=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=c(t.adler,e,i,r):2===t.state.wrap&&(t.adler=u(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},q=(t,e)=>{let r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-C?t.strstart-(t.w_size-C):0,u=t.window,l=t.w_mask,d=t.prev,h=t.strstart+B;let f=u[a+s-1],p=u[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,u[r+s]===p&&u[r+s-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<h);if(n=B-(h-a),a=h-B,n>s){if(t.match_start=e,s=n,n>=o)break;f=u[a+s-1],p=u[a+s]}}}while((e=d[e&l])>c&&0!==--i);return s<=t.lookahead?s:t.lookahead},z=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-C)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),U(t),n+=e),0===t.strm.avail_in)break;if(r=j(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=F(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=F(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<C&&0!==t.strm.avail_in)},G=(t,e)=>{let r,n,a,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,c=t.strm.avail_in;do{if(r=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a)break;if(a=t.strm.avail_out-a,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>a&&(r=a),r<s&&(0===r&&e!==p||e===d||r!==n+t.strm.avail_in))break;o=e===p&&r===n+t.strm.avail_in?1:0,i(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,V(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(j(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===o);return c-=t.strm.avail_in,c&&(c>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=c&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-c,t.strm.next_in),t.strstart),t.strstart+=c,t.insert+=c>t.w_size-t.insert?t.w_size-t.insert:c),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==d&&e!==p&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(j(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a,s=a>t.w_size?t.w_size:a,n=t.strstart-t.block_start,(n>=s||(n||e===p)&&e!==d&&0===t.strm.avail_in&&n<=a)&&(r=n>a?a:n,o=e===p&&0===t.strm.avail_in&&r===n?1:0,i(t,t.block_start,r,o),t.block_start+=r,V(t.strm)),o?3:1)},Y=(t,e)=>{let r,n;for(;;){if(t.lookahead<C){if(z(t),t.lookahead<C&&e===d)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-C&&(t.match_length=q(t,r)),t.match_length>=3)if(n=s(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=F(t,t.ins_h,t.window[t.strstart+1]);else n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2},K=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<C){if(z(t),t.lookahead<C&&e===d)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-C&&(t.match_length=q(t,r),t.match_length<=5&&(t.strategy===E||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=s(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=F(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(H(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=s(t,0,t.window[t.strstart-1]),n&&H(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2};function W(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Z=[new W(0,0,0,0,G),new W(4,4,8,4,Y),new W(4,5,16,8,Y),new W(4,6,32,32,Y),new W(4,4,16,16,K),new W(8,16,32,32,K),new W(8,16,128,128,K),new W(8,32,128,256,K),new W(32,128,258,1024,K),new W(32,258,258,4096,K)];function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),L(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const J=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==R&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==O&&e.status!==N?1:0},Q=t=>{if(J(t))return D(t,b);t.total_in=t.total_out=0,t.data_type=k;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?R:O,t.adler=2===e.wrap?0:1,e.last_flush=-2,n(e),g},tt=t=>{const e=Q(t);var r;return e===g&&((r=t.state).window_size=2*r.w_size,L(r.head),r.max_lazy_match=Z[r.level].max_lazy,r.good_match=Z[r.level].good_length,r.nice_match=Z[r.level].nice_length,r.max_chain_length=Z[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},et=(t,e,r,n,i,a)=>{if(!t)return b;let s=1;if(e===v&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==x||n<8||n>15||e<0||e>9||a<0||a>S||8===n&&1!==s)return D(t,b);8===n&&(n=9);const o=new X;return t.state=o,o.strm=t,o.status=R,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=r,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,x,15,8,I),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=Q,t.exports.deflateSetHeader=(t,e)=>J(t)||2!==t.state.wrap?b:(t.state.gzhead=e,g),t.exports.deflate=(t,e)=>{if(J(t)||e>y||e<0)return t?D(t,b):b;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===N&&e!==p)return D(t,0===t.avail_out?w:b);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(V(t),0===t.avail_out)return r.last_flush=-1,g}else if(0===t.avail_in&&P(e)<=P(n)&&e!==p)return D(t,w);if(r.status===N&&0!==t.avail_in)return D(t,w);if(r.status===R&&0===r.wrap&&(r.status=O),r.status===R){let e=x+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=A||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,\$(r,e),0!==r.strstart&&(\$(r,t.adler>>>16),\$(r,65535&t.adler)),t.adler=1,r.status=O,V(t),0!==r.pending)return r.last_flush=-1,g}if(57===r.status)if(t.adler=0,M(r,31),M(r,139),M(r,8),r.gzhead)M(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),M(r,255&r.gzhead.time),M(r,r.gzhead.time>>8&255),M(r,r.gzhead.time>>16&255),M(r,r.gzhead.time>>24&255),M(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),M(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(M(r,255&r.gzhead.extra.length),M(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=u(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(M(r,0),M(r,0),M(r,0),M(r,0),M(r,0),M(r,9===r.level?2:r.strategy>=A||r.level<2?4:0),M(r,3),r.status=O,V(t),0!==r.pending)return r.last_flush=-1,g;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=u(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=i,V(t),0!==r.pending)return r.last_flush=-1,g;e=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=u(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=u(t.adler,r.pending_buf,r.pending-n,n)),V(t),0!==r.pending)return r.last_flush=-1,g;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,M(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=u(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=u(t.adler,r.pending_buf,r.pending-n,n)),V(t),0!==r.pending)return r.last_flush=-1,g;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,M(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=u(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(V(t),0!==r.pending))return r.last_flush=-1,g;M(r,255&t.adler),M(r,t.adler>>8&255),t.adler=0}if(r.status=O,V(t),0!==r.pending)return r.last_flush=-1,g}if(0!==t.avail_in||0!==r.lookahead||e!==d&&r.status!==N){let n=0===r.level?G(r,e):r.strategy===A?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(z(t),0===t.lookahead)){if(e===d)return 1;break}if(t.match_length=0,r=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===T?((t,e)=>{let r,n,i,a;const o=t.window;for(;;){if(t.lookahead<=B){if(z(t),t.lookahead<=B&&e===d)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=t.strstart+B;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);t.match_length=B-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=s(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(H(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(H(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(H(t,!1),0===t.strm.avail_out)?1:2})(r,e):Z[r.level].func(r,e);if(3!==n&&4!==n||(r.status=N),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),g;if(2===n&&(e===h?o(r):e!==y&&(i(r,0,0,!1),e===f&&(L(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),V(t),0===t.avail_out))return r.last_flush=-1,g}return e!==p?g:r.wrap<=0?m:(2===r.wrap?(M(r,255&t.adler),M(r,t.adler>>8&255),M(r,t.adler>>16&255),M(r,t.adler>>24&255),M(r,255&t.total_in),M(r,t.total_in>>8&255),M(r,t.total_in>>16&255),M(r,t.total_in>>24&255)):(\$(r,t.adler>>>16),\$(r,65535&t.adler)),V(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?g:m)},t.exports.deflateEnd=t=>{if(J(t))return b;const e=t.state.status;return t.state=null,e===O?D(t,_):g},t.exports.deflateSetDictionary=(t,e)=>{let r=e.length;if(J(t))return b;const n=t.state,i=n.wrap;if(2===i||1===i&&n.status!==R||n.lookahead)return b;if(1===i&&(t.adler=c(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(L(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,z(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=F(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,n.wrap=i,g},t.exports.deflateInfo="pako deflate (from Nodeca project)"},7414(t){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293(t){"use strict";const e=16209;t.exports=function(t,r){let n,i,a,s,o,c,u,l,d,h,f,p,y,g,m,b,_,w,v,E,A,T,S,I;const k=t.state;n=t.next_in,S=t.input,i=n+(t.avail_in-5),a=t.next_out,I=t.output,s=a-(r-t.avail_out),o=a+(t.avail_out-257),c=k.dmax,u=k.wsize,l=k.whave,d=k.wnext,h=k.window,f=k.hold,p=k.bits,y=k.lencode,g=k.distcode,m=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;t:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),_=y[f&m];e:for(;;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,0===w)I[a++]=65535&_;else{if(!(16&w)){if(64&w){if(32&w){k.mode=16191;break t}t.msg="invalid literal/length code",k.mode=e;break t}_=y[(65535&_)+(f&(1<<w)-1)];continue e}for(v=65535&_,w&=15,w&&(p<w&&(f+=S[n++]<<p,p+=8),v+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),_=g[f&b];;){if(w=_>>>24,f>>>=w,p-=w,w=_>>>16&255,16&w){if(E=65535&_,w&=15,p<w&&(f+=S[n++]<<p,p+=8,p<w&&(f+=S[n++]<<p,p+=8)),E+=f&(1<<w)-1,E>c){t.msg="invalid distance too far back",k.mode=e;break t}if(f>>>=w,p-=w,w=a-s,E>w){if(w=E-w,w>l&&k.sane){t.msg="invalid distance too far back",k.mode=e;break t}if(A=0,T=h,0===d){if(A+=u-w,w<v){v-=w;do{I[a++]=h[A++]}while(--w);A=a-E,T=I}}else if(d<w){if(A+=u+d-w,w-=d,w<v){v-=w;do{I[a++]=h[A++]}while(--w);if(A=0,d<v){w=d,v-=w;do{I[a++]=h[A++]}while(--w);A=a-E,T=I}}}else if(A+=d-w,w<v){v-=w;do{I[a++]=h[A++]}while(--w);A=a-E,T=I}for(;v>2;)I[a++]=T[A++],I[a++]=T[A++],I[a++]=T[A++],v-=3;v&&(I[a++]=T[A++],v>1&&(I[a++]=T[A++]))}else{A=a-E;do{I[a++]=I[A++],I[a++]=I[A++],I[a++]=I[A++],v-=3}while(v>2);v&&(I[a++]=I[A++],v>1&&(I[a++]=I[A++]))}break}if(64&w){t.msg="invalid distance code",k.mode=e;break t}_=g[(65535&_)+(f&(1<<w)-1)]}}break}}while(n<i&&a<o);v=p>>3,n-=v,p-=v<<3,f&=(1<<p)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<o?o-a+257:257-(a-o),k.hold=f,k.bits=p}},1447(t,e,r){"use strict";const n=r(3269),i=r(4823),a=r(7293),s=r(1998),{Z_FINISH:o,Z_BLOCK:c,Z_TREES:u,Z_OK:l,Z_STREAM_END:d,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:y,Z_BUF_ERROR:g,Z_DEFLATED:m}=r(9681),b=16180,_=16190,w=16191,v=16192,E=16194,A=16199,T=16200,S=16206,I=16209,k=16210,x=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const C=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<b||e.mode>16211?1:0},R=t=>{if(C(t))return f;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=b,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,l},O=t=>{if(C(t))return f;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,R(t)},N=(t,e)=>{let r;if(C(t))return f;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,O(t))},D=(t,e)=>{if(!t)return f;const r=new B;t.state=r,r.strm=t,r.window=null,r.mode=b;const n=N(t,e);return n!==l&&(t.state=null),n};let P,L,U=!0;const F=t=>{if(U){P=new Int32Array(512),L=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,P,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,L,0,t.work,{bits:5}),U=!1}t.lencode=P,t.lenbits=9,t.distcode=L,t.distbits=5},V=(t,e,r,n)=>{let i;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};t.exports.inflateReset=O,t.exports.inflateReset2=N,t.exports.inflateResetKeep=R,t.exports.inflateInit=t=>D(t,15),t.exports.inflateInit2=D,t.exports.inflate=(t,e)=>{let r,B,R,O,N,D,P,L,U,H,M,\$,j,q,z,G,Y,K,W,Z,X,J,Q=0;const tt=new Uint8Array(4);let et,rt;const nt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(C(t)||!t.output||!t.input&&0!==t.avail_in)return f;r=t.state,r.mode===w&&(r.mode=v),N=t.next_out,R=t.output,P=t.avail_out,O=t.next_in,B=t.input,D=t.avail_in,L=r.hold,U=r.bits,H=D,M=P,J=l;t:for(;;)switch(r.mode){case b:if(0===r.wrap){r.mode=v;break}for(;U<16;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(2&r.wrap&&35615===L){0===r.wbits&&(r.wbits=15),r.check=0,tt[0]=255&L,tt[1]=L>>>8&255,r.check=i(r.check,tt,2,0),L=0,U=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&L)<<8)+(L>>8))%31){t.msg="incorrect header check",r.mode=I;break}if((15&L)!==m){t.msg="unknown compression method",r.mode=I;break}if(L>>>=4,U-=4,X=8+(15&L),0===r.wbits&&(r.wbits=X),X>15||X>r.wbits){t.msg="invalid window size",r.mode=I;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&L?16189:w,L=0,U=0;break;case 16181:for(;U<16;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(r.flags=L,(255&r.flags)!==m){t.msg="unknown compression method",r.mode=I;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=I;break}r.head&&(r.head.text=L>>8&1),512&r.flags&&4&r.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,r.check=i(r.check,tt,2,0)),L=0,U=0,r.mode=16182;case 16182:for(;U<32;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.head&&(r.head.time=L),512&r.flags&&4&r.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,tt[2]=L>>>16&255,tt[3]=L>>>24&255,r.check=i(r.check,tt,4,0)),L=0,U=0,r.mode=16183;case 16183:for(;U<16;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.head&&(r.head.xflags=255&L,r.head.os=L>>8),512&r.flags&&4&r.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,r.check=i(r.check,tt,2,0)),L=0,U=0,r.mode=16184;case 16184:if(1024&r.flags){for(;U<16;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.length=L,r.head&&(r.head.extra_len=L),512&r.flags&&4&r.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,r.check=i(r.check,tt,2,0)),L=0,U=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(\$=r.length,\$>D&&(\$=D),\$&&(r.head&&(X=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(B.subarray(O,O+\$),X)),512&r.flags&&4&r.wrap&&(r.check=i(r.check,B,\$,O)),D-=\$,O+=\$,r.length-=\$),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===D)break t;\$=0;do{X=B[O+\$++],r.head&&X&&r.length<65536&&(r.head.name+=String.fromCharCode(X))}while(X&&\$<D);if(512&r.flags&&4&r.wrap&&(r.check=i(r.check,B,\$,O)),D-=\$,O+=\$,X)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===D)break t;\$=0;do{X=B[O+\$++],r.head&&X&&r.length<65536&&(r.head.comment+=String.fromCharCode(X))}while(X&&\$<D);if(512&r.flags&&4&r.wrap&&(r.check=i(r.check,B,\$,O)),D-=\$,O+=\$,X)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;U<16;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(4&r.wrap&&L!==(65535&r.check)){t.msg="header crc mismatch",r.mode=I;break}L=0,U=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=w;break;case 16189:for(;U<32;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}t.adler=r.check=x(L),L=0,U=0,r.mode=_;case _:if(0===r.havedict)return t.next_out=N,t.avail_out=P,t.next_in=O,t.avail_in=D,r.hold=L,r.bits=U,h;t.adler=r.check=1,r.mode=w;case w:if(e===c||e===u)break t;case v:if(r.last){L>>>=7&U,U-=7&U,r.mode=S;break}for(;U<3;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}switch(r.last=1&L,L>>>=1,U-=1,3&L){case 0:r.mode=16193;break;case 1:if(F(r),r.mode=A,e===u){L>>>=2,U-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=I}L>>>=2,U-=2;break;case 16193:for(L>>>=7&U,U-=7&U;U<32;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if((65535&L)!=(L>>>16^65535)){t.msg="invalid stored block lengths",r.mode=I;break}if(r.length=65535&L,L=0,U=0,r.mode=E,e===u)break t;case E:r.mode=16195;case 16195:if(\$=r.length,\$){if(\$>D&&(\$=D),\$>P&&(\$=P),0===\$)break t;R.set(B.subarray(O,O+\$),N),D-=\$,O+=\$,P-=\$,N+=\$,r.length-=\$;break}r.mode=w;break;case 16196:for(;U<14;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(r.nlen=257+(31&L),L>>>=5,U-=5,r.ndist=1+(31&L),L>>>=5,U-=5,r.ncode=4+(15&L),L>>>=4,U-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=I;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;U<3;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.lens[nt[r.have++]]=7&L,L>>>=3,U-=3}for(;r.have<19;)r.lens[nt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,et={bits:r.lenbits},J=s(0,r.lens,0,19,r.lencode,0,r.work,et),r.lenbits=et.bits,J){t.msg="invalid code lengths set",r.mode=I;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;Q=r.lencode[L&(1<<r.lenbits)-1],z=Q>>>24,G=Q>>>16&255,Y=65535&Q,!(z<=U);){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(Y<16)L>>>=z,U-=z,r.lens[r.have++]=Y;else{if(16===Y){for(rt=z+2;U<rt;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(L>>>=z,U-=z,0===r.have){t.msg="invalid bit length repeat",r.mode=I;break}X=r.lens[r.have-1],\$=3+(3&L),L>>>=2,U-=2}else if(17===Y){for(rt=z+3;U<rt;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}L>>>=z,U-=z,X=0,\$=3+(7&L),L>>>=3,U-=3}else{for(rt=z+7;U<rt;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}L>>>=z,U-=z,X=0,\$=11+(127&L),L>>>=7,U-=7}if(r.have+\$>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=I;break}for(;\$--;)r.lens[r.have++]=X}}if(r.mode===I)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=I;break}if(r.lenbits=9,et={bits:r.lenbits},J=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,et),r.lenbits=et.bits,J){t.msg="invalid literal/lengths set",r.mode=I;break}if(r.distbits=6,r.distcode=r.distdyn,et={bits:r.distbits},J=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,et),r.distbits=et.bits,J){t.msg="invalid distances set",r.mode=I;break}if(r.mode=A,e===u)break t;case A:r.mode=T;case T:if(D>=6&&P>=258){t.next_out=N,t.avail_out=P,t.next_in=O,t.avail_in=D,r.hold=L,r.bits=U,a(t,M),N=t.next_out,R=t.output,P=t.avail_out,O=t.next_in,B=t.input,D=t.avail_in,L=r.hold,U=r.bits,r.mode===w&&(r.back=-1);break}for(r.back=0;Q=r.lencode[L&(1<<r.lenbits)-1],z=Q>>>24,G=Q>>>16&255,Y=65535&Q,!(z<=U);){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(G&&!(240&G)){for(K=z,W=G,Z=Y;Q=r.lencode[Z+((L&(1<<K+W)-1)>>K)],z=Q>>>24,G=Q>>>16&255,Y=65535&Q,!(K+z<=U);){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}L>>>=K,U-=K,r.back+=K}if(L>>>=z,U-=z,r.back+=z,r.length=Y,0===G){r.mode=16205;break}if(32&G){r.back=-1,r.mode=w;break}if(64&G){t.msg="invalid literal/length code",r.mode=I;break}r.extra=15&G,r.mode=16201;case 16201:if(r.extra){for(rt=r.extra;U<rt;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.length+=L&(1<<r.extra)-1,L>>>=r.extra,U-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;Q=r.distcode[L&(1<<r.distbits)-1],z=Q>>>24,G=Q>>>16&255,Y=65535&Q,!(z<=U);){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(!(240&G)){for(K=z,W=G,Z=Y;Q=r.distcode[Z+((L&(1<<K+W)-1)>>K)],z=Q>>>24,G=Q>>>16&255,Y=65535&Q,!(K+z<=U);){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}L>>>=K,U-=K,r.back+=K}if(L>>>=z,U-=z,r.back+=z,64&G){t.msg="invalid distance code",r.mode=I;break}r.offset=Y,r.extra=15&G,r.mode=16203;case 16203:if(r.extra){for(rt=r.extra;U<rt;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}r.offset+=L&(1<<r.extra)-1,L>>>=r.extra,U-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=I;break}r.mode=16204;case 16204:if(0===P)break t;if(\$=M-P,r.offset>\$){if(\$=r.offset-\$,\$>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=I;break}\$>r.wnext?(\$-=r.wnext,j=r.wsize-\$):j=r.wnext-\$,\$>r.length&&(\$=r.length),q=r.window}else q=R,j=N-r.offset,\$=r.length;\$>P&&(\$=P),P-=\$,r.length-=\$;do{R[N++]=q[j++]}while(--\$);0===r.length&&(r.mode=T);break;case 16205:if(0===P)break t;R[N++]=r.length,P--,r.mode=T;break;case S:if(r.wrap){for(;U<32;){if(0===D)break t;D--,L|=B[O++]<<U,U+=8}if(M-=P,t.total_out+=M,r.total+=M,4&r.wrap&&M&&(t.adler=r.check=r.flags?i(r.check,R,M,N-M):n(r.check,R,M,N-M)),M=P,4&r.wrap&&(r.flags?L:x(L))!==r.check){t.msg="incorrect data check",r.mode=I;break}L=0,U=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;U<32;){if(0===D)break t;D--,L+=B[O++]<<U,U+=8}if(4&r.wrap&&L!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=I;break}L=0,U=0}r.mode=16208;case 16208:J=d;break t;case I:J=p;break t;case k:return y;default:return f}return t.next_out=N,t.avail_out=P,t.next_in=O,t.avail_in=D,r.hold=L,r.bits=U,(r.wsize||M!==t.avail_out&&r.mode<I&&(r.mode<S||e!==o))&&V(t,t.output,t.next_out,M-t.avail_out)?(r.mode=k,y):(H-=t.avail_in,M-=t.avail_out,t.total_in+=H,t.total_out+=M,r.total+=M,4&r.wrap&&M&&(t.adler=r.check=r.flags?i(r.check,R,M,t.next_out-M):n(r.check,R,M,t.next_out-M)),t.data_type=r.bits+(r.last?64:0)+(r.mode===w?128:0)+(r.mode===A||r.mode===E?256:0),(0===H&&0===M||e===o)&&J===l&&(J=g),J)},t.exports.inflateEnd=t=>{if(C(t))return f;let e=t.state;return e.window&&(e.window=null),t.state=null,l},t.exports.inflateGetHeader=(t,e)=>{if(C(t))return f;const r=t.state;return 2&r.wrap?(r.head=e,e.done=!1,l):f},t.exports.inflateSetDictionary=(t,e)=>{const r=e.length;let i,a,s;return C(t)?f:(i=t.state,0!==i.wrap&&i.mode!==_?f:i.mode===_&&(a=1,a=n(a,e,r,0),a!==i.check)?p:(s=V(t,e,r,r),s?(i.mode=k,y):(i.havedict=1,l)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},1998(t){"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,a,s,o,c,u,l,d)=>{const h=d.bits;let f,p,y,g,m,b,_=0,w=0,v=0,E=0,A=0,T=0,S=0,I=0,k=0,x=0,B=null;const C=new Uint16Array(16),R=new Uint16Array(16);let O,N,D,P=null;for(_=0;_<=15;_++)C[_]=0;for(w=0;w<o;w++)C[a[s+w]]++;for(A=h,E=15;E>=1&&0===C[E];E--);if(A>E&&(A=E),0===E)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(v=1;v<E&&0===C[v];v++);for(A<v&&(A=v),I=1,_=1;_<=15;_++)if(I<<=1,I-=C[_],I<0)return-1;if(I>0&&(0===t||1!==E))return-1;for(R[1]=0,_=1;_<15;_++)R[_+1]=R[_]+C[_];for(w=0;w<o;w++)0!==a[s+w]&&(l[R[a[s+w]]++]=w);if(0===t?(B=P=l,b=20):1===t?(B=e,P=r,b=257):(B=n,P=i,b=0),x=0,w=0,_=v,m=u,T=A,S=0,y=-1,k=1<<A,g=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){O=_-S,l[w]+1<b?(N=0,D=l[w]):l[w]>=b?(N=P[l[w]-b],D=B[l[w]-b]):(N=96,D=0),f=1<<_-S,p=1<<T,v=p;do{p-=f,c[m+(x>>S)+p]=O<<24|N<<16|D}while(0!==p);for(f=1<<_-1;x&f;)f>>=1;if(0!==f?(x&=f-1,x+=f):x=0,w++,0===--C[_]){if(_===E)break;_=a[s+l[w]]}if(_>A&&(x&g)!==y){for(0===S&&(S=A),m+=v,T=_-S,I=1<<T;T+S<E&&(I-=C[T+S],!(I<=0));)T++,I<<=1;if(k+=1<<T,1===t&&k>852||2===t&&k>592)return 1;y=x&g,c[y]=A<<24|T<<16|m-u}}return 0!==x&&(c[m+x]=_-S<<24|64<<16),d.bits=A,0}},4674(t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665(t){"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),a=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);e(s);const o=new Array(60);e(o);const c=new Array(512);e(c);const u=new Array(256);e(u);const l=new Array(29);e(l);const d=new Array(30);function h(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let f,p,y;function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(d);const m=t=>t<256?c[t]:c[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},_=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},w=(t,e,r)=>{_(t,r[2*e],r[2*e+1])},v=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},E=(t,e,r)=>{const n=new Array(16);let i,a,s=0;for(i=1;i<=15;i++)s=s+r[i-1]<<1,n[i]=s;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=v(n[e]++,e))}},A=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},T=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=(t,e,r,n)=>{const i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]},I=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&S(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!S(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},k=(t,e,i)=>{let a,s,o,c,h=0;if(0!==t.sym_next)do{a=255&t.pending_buf[t.sym_buf+h++],a+=(255&t.pending_buf[t.sym_buf+h++])<<8,s=t.pending_buf[t.sym_buf+h++],0===a?w(t,s,e):(o=u[s],w(t,o+256+1,e),c=r[o],0!==c&&(s-=l[o],_(t,s,c)),a--,o=m(a),w(t,o,i),c=n[o],0!==c&&(a-=d[o],_(t,a,c)))}while(h<t.sym_next);w(t,256,e)},x=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,o,c,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)0!==r[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,r[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[2*c+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)I(t,r,s);c=a;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[2*c]=r[2*s]+r[2*o],t.depth[c]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[2*s+1]=r[2*o+1]=c,t.heap[1]=c++,I(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,l,d,h,f,p,y=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],h=r[2*r[2*l+1]+1]+1,h>c&&(h=c,y++),r[2*l+1]=h,l>n||(t.bl_count[h]++,f=0,l>=o&&(f=s[l-o]),p=r[2*l],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(i[2*l+1]+f)));if(0!==y){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,y-=2}while(y>0);for(h=c;0!==h;h--)for(l=t.bl_count[h];0!==l;)d=t.heap[--u],d>n||(r[2*d+1]!==h&&(t.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),l--)}})(t,e),E(r,u,t.bl_count)},B=(t,e,r)=>{let n,i,a=-1,s=e[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++o<c&&i===s||(o<u?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))},C=(t,e,r)=>{let n,i,a=-1,s=e[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++o<c&&i===s)){if(o<u)do{w(t,i,t.bl_tree)}while(0!==--o);else 0!==i?(i!==a&&(w(t,i,t.bl_tree),o--),w(t,16,t.bl_tree),_(t,o-3,2)):o<=10?(w(t,17,t.bl_tree),_(t,o-3,3)):(w(t,18,t.bl_tree),_(t,o-11,7));o=0,a=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}};let R=!1;const O=(t,e,r,n)=>{_(t,0+(n?1:0),3),T(t),b(t,r),b(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r};t.exports._tr_init=t=>{R||((()=>{let t,e,a,g,m;const b=new Array(16);for(a=0,g=0;g<28;g++)for(l[g]=a,t=0;t<1<<r[g];t++)u[a++]=g;for(u[a-1]=g,m=0,g=0;g<16;g++)for(d[g]=m,t=0;t<1<<n[g];t++)c[m++]=g;for(m>>=7;g<30;g++)for(d[g]=m<<7,t=0;t<1<<n[g]-7;t++)c[256+m++]=g;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,b[8]++;for(;t<=255;)s[2*t+1]=9,t++,b[9]++;for(;t<=279;)s[2*t+1]=7,t++,b[7]++;for(;t<=287;)s[2*t+1]=8,t++,b[8]++;for(E(s,287,b),t=0;t<30;t++)o[2*t+1]=5,o[2*t]=v(t,5);f=new h(s,r,257,286,15),p=new h(o,n,0,30,15),y=new h(new Array(0),i,0,19,7)})(),R=!0),t.l_desc=new g(t.dyn_ltree,f),t.d_desc=new g(t.dyn_dtree,p),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,A(t)},t.exports._tr_stored_block=O,t.exports._tr_flush_block=(t,e,r,n)=>{let i,c,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),x(t,t.l_desc),x(t,t.d_desc),u=(t=>{let e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*a[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,c=t.static_len+3+7>>>3,c<=i&&(i=c)):i=c=r+5,r+4<=i&&-1!==e?O(t,e,r,n):4===t.strategy||c===i?(_(t,2+(n?1:0),3),k(t,s,o)):(_(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(_(t,e-257,5),_(t,r-1,5),_(t,n-4,4),i=0;i<n;i++)_(t,t.bl_tree[2*a[i]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),k(t,t.dyn_ltree,t.dyn_dtree)),A(t),n&&T(t)},t.exports._tr_tally=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(u[r]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{_(t,2,3),w(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},4442(t){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},6993(t,e,r){"use strict";r.r(e),r.d(e,{Mixin:()=>_,decorate:()=>b,hasMixin:()=>h,mix:()=>v,settings:()=>u});const n=(t,e,r=[])=>{const n=Object.getOwnPropertyDescriptors(e);for(let t of r)delete n[t];Object.defineProperties(t,n)},i=(t,e=[t])=>{const r=Object.getPrototypeOf(t);return null===r?e:i(r,[...e,r])},a=(t,e,r=[])=>{var a;const s=null!==(a=((...t)=>{if(0===t.length)return;let e;const r=t.map(t=>i(t));for(;r.every(t=>t.length>0);){const t=r.map(t=>t.pop()),n=t[0];if(!t.every(t=>t===n))break;e=n}return e})(...t))&&void 0!==a?a:Object.prototype,o=Object.create(s),c=i(s);for(let e of t){let t=i(e);for(let e=t.length-1;e>=0;e--){let i=t[e];-1===c.indexOf(i)&&(n(o,i,["constructor",...r]),c.push(i))}}return o.constructor=e,o},s=t=>t.filter((e,r)=>t.indexOf(e)==r),o=(t,e)=>{const r=e.map(t=>i(t));let n=0,a=!0;for(;a;){a=!1;for(let i=e.length-1;i>=0;i--){const e=r[i][n];if(null!=e&&(a=!0,null!=Object.getOwnPropertyDescriptor(e,t)))return r[i][0]}n++}},c=(t,e=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>e,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(e,r)=>Object.getOwnPropertyDescriptor(o(r,t)||{},r),defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has:(r,n)=>void 0!==o(n,t)||void 0!==e[n],get:(r,n)=>(o(n,t)||e)[n],set(e,r,n){const i=o(r,t);if(void 0===i)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return i[r]=n,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>t.map(Object.getOwnPropertyNames).reduce((t,e)=>e.concat(t.filter(t=>e.indexOf(t)<0)))}),u={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},l=new WeakMap,d=t=>l.get(t),h=(t,e)=>{if(t instanceof e)return!0;const r=t.constructor,n=new Set;let a=new Set;for(a.add(r);a.size>0;){if(a.has(e))return!0;a.forEach(t=>n.add(t));const t=new Set;a.forEach(e=>{var r;const s=null!==(r=l.get(e))&&void 0!==r?r:i(e.prototype).map(t=>t.constructor).filter(t=>null!==t);s&&s.forEach(e=>{n.has(e)||a.has(e)||t.add(e)})}),a=t}return!1},f=(t,e)=>{var r,n;const i=s([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),a={};for(let o of i)a[o]=s([...null!==(r=null==t?void 0:t[o])&&void 0!==r?r:[],...null!==(n=null==e?void 0:e[o])&&void 0!==n?n:[]]);return a},p=(t,e)=>{var r,n,i,a;return{property:f(null!==(r=null==t?void 0:t.property)&&void 0!==r?r:{},null!==(n=null==e?void 0:e.property)&&void 0!==n?n:{}),method:f(null!==(i=null==t?void 0:t.method)&&void 0!==i?i:{},null!==(a=null==e?void 0:e.method)&&void 0!==a?a:{})}},y=(t,e)=>{var r,n,i,a,o,c;return{class:s([...null!==(r=null==t?void 0:t.class)&&void 0!==r?r:[],...null!==(n=null==e?void 0:e.class)&&void 0!==n?n:[]]),static:p(null!==(i=null==t?void 0:t.static)&&void 0!==i?i:{},null!==(a=null==e?void 0:e.static)&&void 0!==a?a:{}),instance:p(null!==(o=null==t?void 0:t.instance)&&void 0!==o?o:{},null!==(c=null==e?void 0:e.instance)&&void 0!==c?c:{})}},g=new Map,m=t=>{let e=g.get(t);return e||(e={},g.set(t,e)),e},b=t=>(...e)=>1===e.length?(t=>e=>{const r=m(e);let n=r.class;return n||(n=[],r.class=n),n.push(t),t(e)})(t)(e[0]):(t=>(e,r,...n)=>{var i,a,s;const o="function"==typeof e?"static":"instance",c="function"==typeof e[r]?"method":"property",u="static"===o?e:e.constructor,l=m(u),d=null!==(i=null==l?void 0:l[o])&&void 0!==i?i:{};l[o]=d;let h=null!==(a=null==d?void 0:d[c])&&void 0!==a?a:{};d[c]=h;let f=null!==(s=null==h?void 0:h[r])&&void 0!==s?s:[];return h[r]=f,f.push(t),t(e,r,...n)})(t)(...e);function _(...t){var e,r,s;const o=t.map(t=>t.prototype),h=u.initFunction;if(null!==h){const t=o.map(t=>t[h]).filter(t=>"function"==typeof t),e=function(...e){for(let r of t)r.apply(this,e)},r={[h]:e};o.push(r)}function f(...e){for(const r of t)n(this,new r(...e));null!==h&&"function"==typeof this[h]&&this[h].apply(this,e)}var p,b;f.prototype="copy"===u.prototypeStrategy?a(o,f):(p=o,b=f,c([...p,{constructor:b}])),Object.setPrototypeOf(f,"copy"===u.staticsStrategy?a(t,null,["prototype"]):c(t,Function.prototype));let _=f;if("none"!==u.decoratorInheritance){const n="deep"===u.decoratorInheritance?((...t)=>{const e=((...t)=>{var e;const r=new Set,n=new Set([...t]);for(;n.size>0;)for(let t of n){const a=[...i(t.prototype).map(t=>t.constructor),...null!==(e=d(t))&&void 0!==e?e:[]].filter(t=>!r.has(t));for(let t of a)n.add(t);r.add(t),n.delete(t)}return[...r]})(...t).map(t=>g.get(t)).filter(t=>!!t);return 0==e.length?{}:1==e.length?e[0]:e.reduce((t,e)=>y(t,e))})(...t):((...t)=>{const e=t.map(t=>m(t));return 0===e.length?{}:1===e.length?e[0]:e.reduce((t,e)=>y(t,e))})(...t);for(let t of null!==(e=null==n?void 0:n.class)&&void 0!==e?e:[]){const e=t(_);e&&(_=e)}w(null!==(r=null==n?void 0:n.static)&&void 0!==r?r:{},_),w(null!==(s=null==n?void 0:n.instance)&&void 0!==s?s:{},_.prototype)}var v,E;return v=_,E=t,l.set(v,E),_}const w=(t,e)=>{const r=t.property,n=t.method;if(r)for(let t in r)for(let n of r[t])n(e,t);if(n)for(let t in n)for(let r of n[t])r(e,t,Object.getOwnPropertyDescriptor(e,t))},v=(...t)=>e=>{const r=_(...t.concat([e]));return Object.defineProperty(r,"name",{value:e.name,writable:!1}),r}},7374(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4401(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_RECEIVED=e.STATUS_REJECTED=e.STATUS_PENDING=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_PENDING="PENDING",e.STATUS_REJECTED="REJECTED",e.STATUS_RECEIVED="RECEIVED",e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,REJECTED:e.STATUS_REJECTED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PENDING:"pending"},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},2484(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4637(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7066(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},571(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9884(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(r(798),e),e.CONTRACT=r(2484),i(r(4637),e),i(r(7374),e),i(r(6552),e),i(r(4401),e),i(r(7066),e),i(r(571),e)},798(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6552(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5319(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(r(9884),e),e.API=r(9884),i(r(6868),e),e.WALLET_API=r(6868),e.PAYMASTER_API=r(5206)},9528(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1067(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5206(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(8812),e),i(r(1067),e),i(r(9528),e),i(r(3674),e)},8812(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3674(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8861(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5670(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4329(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},53(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8655(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6868(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(4329),e),i(r(2780),e),i(r(8861),e),i(r(5670),e),i(r(9606),e),i(r(8655),e),i(r(53),e)},9606(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2780(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},569(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8472(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ETransactionVersion3=e.ETransactionVersion2=e.ETransactionVersion=e.EDAMode=e.EDataAvailabilityMode=e.EBlockStatus=e.EBlockTag=e.ETransactionExecutionStatus=e.ETransactionFinalityStatus=e.ETransactionStatus=e.ESimulationFlag=e.ETransactionType=e.CALL_TYPE=e.L1_DA_MODE=e.PRICE_UNIT_FRI=e.PRICE_UNIT_WEI=e.STATE_MUTABILITY_EXTERNAL=e.STATE_MUTABILITY_VIEW=e.ABI_TYPE_ENUM=e.ABI_TYPE_L1_HANDLER=e.ABI_TYPE_CONSTRUCTOR=e.ABI_TYPE_FUNCTION=e.EVENT_ABI_TYPE=e.STRUCT_ABI_TYPE=e.TXN_TYPE_L1_HANDLER=e.TXN_TYPE_INVOKE=e.TXN_TYPE_DEPLOY_ACCOUNT=e.TXN_TYPE_DEPLOY=e.TXN_TYPE_DECLARE=e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED=e.STATUS_CANDIDATE=e.STATUS_RECEIVED=e.STATUS_REVERTED=e.STATUS_SUCCEEDED=e.STATUS_ACCEPTED_ON_L1=e.STATUS_ACCEPTED_ON_L2=void 0,e.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.STATUS_SUCCEEDED="SUCCEEDED",e.STATUS_REVERTED="REVERTED",e.STATUS_RECEIVED="RECEIVED",e.STATUS_CANDIDATE="CANDIDATE",e.STATUS_PRE_CONFIRMED="PRE_CONFIRMED",e.STATUS_PRE_CONFIRMED_LOWERCASE=e.STATUS_PRE_CONFIRMED.toLowerCase(),e.TXN_TYPE_DECLARE="DECLARE",e.TXN_TYPE_DEPLOY="DEPLOY",e.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.TXN_TYPE_INVOKE="INVOKE",e.TXN_TYPE_L1_HANDLER="L1_HANDLER",e.STRUCT_ABI_TYPE="struct",e.EVENT_ABI_TYPE="event",e.ABI_TYPE_FUNCTION="function",e.ABI_TYPE_CONSTRUCTOR="constructor",e.ABI_TYPE_L1_HANDLER="l1_handler",e.ABI_TYPE_ENUM="enum",e.STATE_MUTABILITY_VIEW="view",e.STATE_MUTABILITY_EXTERNAL="external",e.PRICE_UNIT_WEI="WEI",e.PRICE_UNIT_FRI="FRI",e.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},e.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},e.ETransactionType={DECLARE:e.TXN_TYPE_DECLARE,DEPLOY:e.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:e.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:e.TXN_TYPE_INVOKE,L1_HANDLER:e.TXN_TYPE_L1_HANDLER},e.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},e.ETransactionStatus={RECEIVED:e.STATUS_RECEIVED,CANDIDATE:e.STATUS_CANDIDATE,PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionFinalityStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.ETransactionExecutionStatus={SUCCEEDED:e.STATUS_SUCCEEDED,REVERTED:e.STATUS_REVERTED},e.EBlockTag={LATEST:"latest",PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED_LOWERCASE,L1_ACCEPTED:"l1_accepted"},e.EBlockStatus={PRE_CONFIRMED:e.STATUS_PRE_CONFIRMED,ACCEPTED_ON_L2:e.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:e.STATUS_ACCEPTED_ON_L1},e.EDataAvailabilityMode={L1:"L1",L2:"L2"},e.EDAMode={L1:0,L2:1},e.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e.ETransactionVersion2={V0:e.ETransactionVersion.V0,V1:e.ETransactionVersion.V1,V2:e.ETransactionVersion.V2,F0:e.ETransactionVersion.F0,F1:e.ETransactionVersion.F1,F2:e.ETransactionVersion.F2},e.ETransactionVersion3={V3:e.ETransactionVersion.V3,F3:e.ETransactionVersion.F3}},143(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1302(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3749(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9350(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4465(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.CONTRACT=void 0,i(r(4827),e),e.CONTRACT=r(143),i(r(1302),e),i(r(569),e),i(r(8425),e),i(r(8472),e),i(r(3749),e),i(r(9350),e)},4827(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8425(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2066(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.PAYMASTER_API=e.WALLET_API=e.API=void 0,i(r(4465),e),e.API=r(4465),i(r(5207),e),e.WALLET_API=r(5207),e.PAYMASTER_API=r(3247)},7511(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8312(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3247(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(5709),e),i(r(8312),e),i(r(7511),e),i(r(3063),e)},5709(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3063(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6112(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8943(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6362(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permission=void 0,e.Permission={ACCOUNTS:"accounts"}},3632(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2702(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},5207(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(6362),e),i(r(3591),e),i(r(6112),e),i(r(8943),e),i(r(9365),e),i(r(2702),e),i(r(3632),e)},9365(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3591(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedDataRevision=void 0,e.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},7631(t,e){!function(t){"use strict";function e(t){return r.test(t)}const r=/^-?[0-9]+\$/;function n(t){return i.test(t)}const i=/^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?\$/;function a(t,r){if(e(t))return Number.isSafeInteger(Number.parseInt(t,10));const n=Number.parseFloat(t),i=String(n);if(t===i)return!0;const a=l(t),s=l(i);if(a===s)return!0;if(!0===r?.approx){const r=14;if(!e(t)&&s.length>=r&&a.startsWith(s.substring(0,r)))return!0}return!1}let s=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function o(t){if(a(t,{approx:!1}))return;if(e(t))return s.truncate_integer;const r=Number.parseFloat(t);return Number.isFinite(r)?0===r?s.underflow:s.truncate_float:s.overflow}function c(t){const e=t.match(/^(-?)(\\d+\\.?\\d*)([eE]([+-]?\\d+))?\$/);if(!e)throw new SyntaxError(\`Invalid number: \${t}\`);const r=e[1],n=e[2];let i=void 0!==e[4]?Number.parseInt(e[4],10):0;const a=n.indexOf(".");i+=-1!==a?a-1:n.length-1;const s=n.replace(".","").replace(/^0*/,t=>(i-=t.length,"")).replace(/0*\$/,"");return s.length>0?{sign:r,digits:s,exponent:i}:{sign:r,digits:"0",exponent:i+1}}function u(t,e){if(t===e)return 0;const r=c(t),n=c(e),i="-"===r.sign?-1:1;return r.sign!==n.sign?"0"===r.digits&&"0"===n.digits?0:i:r.exponent!==n.exponent?r.exponent>n.exponent?i:r.exponent<n.exponent?-i:0:r.digits>n.digits?i:r.digits<n.digits?-i:0}function l(t){const{start:e,end:r}=d(t),n=t.substring(e,r),i=n.indexOf(".");return-1===i?n:n.substring(0,i)+n.substring(i+1)}function d(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let r=t.lastIndexOf("e");for(-1===r&&(r=t.lastIndexOf("E")),-1===r&&(r=t.length);("0"===t[r-1]||"."===t[r-1])&&r>e;)r--;return{start:e,end:r}}class h{isLosslessNumber=!0;constructor(t){if(!n(t))throw new Error(\`Invalid number (value: "\${t}")\`);this.value=t}valueOf(){const t=o(this.value);if(void 0===t||t===s.truncate_float)return Number.parseFloat(this.value);if(e(this.value))return BigInt(this.value);throw new Error(\`Cannot safely convert to number: the value '\${this.value}' would \${t} and become \${Number.parseFloat(this.value)}\`)}toString(){return this.value}}function f(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}function p(t){return new h(t)}function y(t,e,r,n){return Array.isArray(r)?n.call(t,e,function(t,e){for(let r=0;r<t.length;r++)t[r]=y(t,String(r),t[r],e);return t}(r,n)):r&&"object"==typeof r&&!f(r)?n.call(t,e,function(t,e){for(const r of Object.keys(t)){const n=y(t,r,t[r],e);void 0!==n?t[r]=n:delete t[r]}return t}(r,n)):n.call(t,e,r)}function g(t){return t>=v&&t<=E||t>=A&&t<=S||t>=T&&t<=I}function m(t){return t>=v&&t<=E}function b(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,r)=>b(t,e[r])):!(!_(t)||!_(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(r=>b(t[r],e[r])))}function _(t){return"object"==typeof t&&null!==t}const w={'"':'"',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\\t"},v=48,E=57,A=65,T=97,S=70,I=102,k=/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z\$/;t.LosslessNumber=h,t.UnsafeNumberReason=s,t.compareLosslessNumber=function(t,e){return u(t.value,e.value)},t.compareNumber=u,t.config=function(t){throw new Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},t.getUnsafeNumberReason=o,t.isInteger=e,t.isLosslessNumber=f,t.isNumber=n,t.isSafeNumber=a,t.parse=function(t,e,r){const n="function"==typeof r?{parseNumber:r}:r,i=n?.parseNumber??p,a=n?.onDuplicateKey??function(t){let{key:e,position:r}=t;throw new SyntaxError(\`Duplicate key '\${e}' encountered at position \${r}\`)};let s=0;const o=c();return function(t){if(void 0===t)throw new SyntaxError(\`JSON value expected \${C()}\`)}(o),function(){if(s<t.length)throw new SyntaxError(\`Expected end of input \${C()}\`)}(),e?function(t,e){return y({"":t},"",t,e)}(o,e):o;function c(){l();const e=d()??function(){const e=s;if(45===t.charCodeAt(s)&&(s++,A(e)),t.charCodeAt(s)===v)s++;else if((r=t.charCodeAt(s))>=49&&r<=E)for(s++;m(t.charCodeAt(s));)s++;var r;if(46===t.charCodeAt(s))for(s++,A(e);m(t.charCodeAt(s));)s++;if(101===t.charCodeAt(s)||69===t.charCodeAt(s))for(s++,45!==t.charCodeAt(s)&&43!==t.charCodeAt(s)||s++,A(e);m(t.charCodeAt(s));)s++;if(s>e)return i(t.slice(e,s))}()??function(){if(123===t.charCodeAt(s)){s++,l();const e={};let r=!0;for(;s<t.length&&125!==t.charCodeAt(s);){r?r=!1:(h(),l());const t=s,n=d();if(void 0===n)return void T();l(),f();const i=c();if(void 0===i)return void k();if(Object.prototype.hasOwnProperty.call(e,n)&&!b(i,e[n])){const r=a({key:n,position:t+1,oldValue:e[n],newValue:i});void 0!==r&&(e[n]=r)}else e[n]=i}return 125!==t.charCodeAt(s)&&function(){throw new SyntaxError(\`Quoted object key or end of object '}' expected \${C()}\`)}(),s++,e}}()??function(){if(91===t.charCodeAt(s)){s++,l();const e=[];let r=!0;for(;s<t.length&&93!==t.charCodeAt(s);){r?r=!1:h();const t=c();_(t),e.push(t)}return 93!==t.charCodeAt(s)&&function(){throw new SyntaxError(\`Array item or end of array ']' expected \${C()}\`)}(),s++,e}}()??u("true",!0)??u("false",!1)??u("null",null);return l(),e}function u(e,r){if(t.slice(s,s+e.length)===e)return s+=e.length,r}function l(){for(;32===(e=t.charCodeAt(s))||10===e||9===e||13===e;)s++;var e}function d(){if(34===t.charCodeAt(s)){s++;let r="";for(;s<t.length&&34!==t.charCodeAt(s);){if(92===t.charCodeAt(s)){const e=t[s+1],n=w[e];void 0!==n?(r+=n,s++):"u"===e?g(t.charCodeAt(s+2))&&g(t.charCodeAt(s+3))&&g(t.charCodeAt(s+4))&&g(t.charCodeAt(s+5))?(r+=String.fromCharCode(Number.parseInt(t.slice(s+2,s+6),16)),s+=5):x(s):I(s)}else(e=t.charCodeAt(s))>=32&&e<=1114111?r+=t[s]:S(t[s]);s++}return function(){if(34!==t.charCodeAt(s))throw new SyntaxError(\`End of string '"' expected \${C()}\`)}(),s++,r}var e}function h(){if(44!==t.charCodeAt(s))throw new SyntaxError(\`Comma ',' expected after value \${C()}\`);s++}function f(){if(58!==t.charCodeAt(s))throw new SyntaxError(\`Colon ':' expected after property name \${C()}\`);s++}function _(t){if(void 0===t)throw new SyntaxError(\`Array item expected \${C()}\`)}function A(e){if(!m(t.charCodeAt(s))){const r=t.slice(e,s);throw new SyntaxError(\`Invalid number '\${r}', expecting a digit \${C()}\`)}}function T(){throw new SyntaxError(\`Quoted object key expected \${C()}\`)}function S(t){throw new SyntaxError(\`Invalid character '\${t}' \${B()}\`)}function I(e){const r=t.slice(e,e+2);throw new SyntaxError(\`Invalid escape character '\${r}' \${B()}\`)}function k(){throw new SyntaxError(\`Object value expected after ':' \${B()}\`)}function x(e){const r=t.slice(e,e+6);throw new SyntaxError(\`Invalid unicode character '\${r}' \${B()}\`)}function B(){return\`at position \${s}\`}function C(){return\`\${s<t.length?\`but got '\${t[s]}'\`:"but reached end of input"} \${B()}\`}},t.parseLosslessNumber=p,t.parseNumberAndBigInt=function(t){return e(t)?BigInt(t):Number.parseFloat(t)},t.reviveDate=function(t,e){return"string"==typeof e&&k.test(e)?new Date(e):e},t.splitNumber=c,t.stringify=function t(e,r,i,a){const s=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(i);return function e(c,u){if(Array.isArray(a)){const t=a.find(t=>t.test(c));if(t){const e=t.stringify(c);if("string"!=typeof e||!n(e))throw new Error(\`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: \${e})\`);return e}}return"boolean"==typeof c||"number"==typeof c||"string"==typeof c||null===c||c instanceof Date||c instanceof Boolean||c instanceof Number||c instanceof String?JSON.stringify(c):c?.isLosslessNumber||"bigint"==typeof c?c.toString():Array.isArray(c)?function(t,n){if(0===t.length)return"[]";const i=s?n+s:void 0;let a=s?"[\\n":"[";for(let n=0;n<t.length;n++){const o="function"==typeof r?r.call(t,String(n),t[n]):t[n];s&&(a+=i),a+=void 0!==o&&"function"!=typeof o?e(o,i):"null",n<t.length-1&&(a+=s?",\\n":",")}return a+=s?\`\\n\${n}]\`:"]",a}(c,u):c&&"object"==typeof c?function(n,a){if("function"==typeof n.toJSON)return t(n.toJSON(),r,i,void 0);const c=Array.isArray(r)?r.map(String):Object.keys(n);if(0===c.length)return"{}";const u=s?a+s:void 0;let l=!0,d=s?"{\\n":"{";for(const t of c){const i="function"==typeof r?r.call(n,t,n[t]):n[t];if(o(0,i)){l?l=!1:d+=s?",\\n":",";const r=JSON.stringify(t);d+=s?\`\${u+r}: \`:\`\${r}:\`,d+=e(i,u)}}return d+=s?\`\\n\${a}}\`:"}",d}(c,u):void 0}("function"==typeof r?r.call({"":e},"",e):e,"");function o(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}},t.toLosslessNumber=function(t){if(function(t){const{start:e,end:r}=d(t),n=t.indexOf(".");return-1===n||n<e||n>r?r-e:r-e-1}(String(t))>15)throw new Error(\`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: \${t})\`);if(Number.isNaN(t))throw new Error("Invalid number: NaN");if(!Number.isFinite(t))throw new Error(\`Invalid number: \${t}\`);return new h(String(t))},t.toSafeNumberOrThrow=function(t,e){const r=Number.parseFloat(t),n=o(t);if(!0===e?.approx?n&&n!==s.truncate_float:n){const e=n?.replace(/_\\w+\$/,"");throw new Error(\`Cannot safely convert to number: the value '\${t}' would \${e} and become \${r}\`)}return r}}(e)},1817(t,e,r){"use strict";r.d(e,{s:()=>u,Z:()=>c});var n=r(5493),i=r(6606);class a extends i.Vw{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,n.sd)(t);const r=(0,i.ZJ)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,s=new Uint8Array(a);s.set(r.length>a?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return(0,n.CC)(this),this.iHash.update(t),this}digestInto(t){(0,n.CC)(this),(0,n.DO)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=a,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(t,e,r)=>new a(t,e).update(r).digest();s.create=(t,e)=>new a(t,e);var o=r(7713);function c(t){return{hash:t,hmac:(e,...r)=>s(t,e,(0,i.Id)(...r)),randomBytes:i.po}}function u(t,e){const r=e=>(0,o.weierstrass)({...t,...c(e)});return Object.freeze({...r(e),create:r})}},8030(t,e,r){"use strict";r.d(e,{B8:()=>p,D0:()=>_,LH:()=>b,Tp:()=>v,f4:()=>m,jr:()=>g,qy:()=>E,zH:()=>f,zi:()=>d});var n=r(8293);const i=BigInt(0),a=BigInt(1),s=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);function d(t,e){const r=t%e;return r>=i?r:e+r}function h(t,e,r){if(e<i)throw new Error("invalid exponent, negatives unsupported");if(r<=i)throw new Error("invalid modulus");if(r===a)return i;let n=a;for(;e>i;)e&a&&(n=n*t%r),t=t*t%r,e>>=a;return n}function f(t,e,r){let n=t;for(;e-- >i;)n*=n,n%=r;return n}function p(t,e){if(t===i)throw new Error("invert: expected non-zero number");if(e<=i)throw new Error("invert: expected positive modulus, got "+e);let r=d(t,e),n=e,s=i,o=a,c=a,u=i;for(;r!==i;){const t=n/r,e=n%r,i=s-c*t,a=o-u*t;n=r,r=e,s=c,o=u,c=i,u=a}if(n!==a)throw new Error("invert: does not exist");return d(s,e)}const y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(t){const e=y.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.Q5)(t,e)}function m(t,e,r){if(r<i)throw new Error("invalid exponent, negatives unsupported");if(r===i)return t.ONE;if(r===a)return e;let n=t.ONE,s=e;for(;r>i;)r&a&&(n=t.mul(n,s)),s=t.sqr(s),r>>=a;return n}function b(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function _(t,e,r=!1,f={}){if(t<=i)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:y,nByteLength:g}=b(t,e);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const w=Object.freeze({ORDER:t,BITS:y,BYTES:g,MASK:(0,n.OG)(y),ZERO:i,ONE:a,create:e=>d(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&a)===a,neg:e=>d(-e,t),eql:(t,e)=>t===e,sqr:e=>d(e*e,t),add:(e,r)=>d(e+r,t),sub:(e,r)=>d(e-r,t),mul:(e,r)=>d(e*r,t),pow:(t,e)=>m(w,t,e),div:(e,r)=>d(e*p(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>p(e,t),sqrt:f.sqrt||(e=>(_||(_=function(t){if(t%c===o){const e=(t+a)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%l===u){const e=(t-u)/l;return function(t,r){const n=t.mul(r,s),i=t.pow(n,e),a=t.mul(r,i),o=t.mul(t.mul(a,s),i),c=t.mul(a,t.sub(o,t.ONE));if(!t.eql(t.sqr(c),r))throw new Error("Cannot find square root");return c}}return function(t){const e=(t-a)/s;let r,n,o;for(r=t-a,n=0;r%s===i;r/=s,n++);for(o=s;o<t&&h(o,e,t)!==t-a;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const e=(t+a)/c;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const u=(r+a)/s;return function(t,i){if(t.pow(i,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let s=n,c=t.pow(t.mul(t.ONE,o),r),l=t.pow(i,u),d=t.pow(i,r);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(d);e<s&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,a<<BigInt(s-e-1));c=t.sqr(r),l=t.mul(l,r),d=t.mul(d,c),s=e}return l}}(t)}(t)),_(w,e))),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),i=t.inv(n);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),i),r}(w,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?(0,n.z)(t,g):(0,n.lq)(t,g),fromBytes:t=>{if(t.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+t.length);return r?(0,n.lX)(t):(0,n.Ph)(t)}});return Object.freeze(w)}function w(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function v(t){const e=w(t);return e+Math.ceil(e/2)}function E(t,e,r=!1){const i=t.length,s=w(e),o=v(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);const c=d(r?(0,n.Ph)(t):(0,n.lX)(t),e-a)+a;return r?(0,n.z)(c,s):(0,n.lq)(c,s)}},5591(t,e,r){"use strict";r.r(e),r.d(e,{poseidon:()=>s,splitConstants:()=>a,validateOpts:()=>i});var n=r(8030);function i(t){const{Fp:e,mds:r,reversePartialPowIdx:i,roundConstants:a}=t,{roundsFull:s,roundsPartial:o,sboxPower:c,t:u}=t;(0,n.jr)(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(r)||r.length!==u)throw new Error("Poseidon: invalid MDS matrix");const l=r.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid MDS matrix row: "+t);return t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)})});if(void 0!==i&&"boolean"!=typeof i)throw new Error("invalid param reversePartialPowIdx="+i);if(1&s)throw new Error("roundsFull is not even"+s);const d=s+o;if(!Array.isArray(a)||a.length!==d)throw new Error("Poseidon: invalid round constants");const h=a.map(t=>{if(!Array.isArray(t)||t.length!==u)throw new Error("invalid round constants");return t.map(t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)})});if(!c||![3,5,7].includes(c))throw new Error("invalid sboxPower");const f=BigInt(c);let p=t=>(0,n.f4)(e,t,f);return 3===c?p=t=>e.mul(e.sqrN(t),t):5===c&&(p=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:d,sboxFn:p,roundConstants:h,mds:l})}function a(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const r=[];let n=[];for(let i=0;i<t.length;i++)n.push(t[i]),n.length===e&&(r.push(n),n=[]);return r}function s(t){const e=i(t),{Fp:r,mds:n,roundConstants:a,rounds:s,roundsPartial:o,sboxFn:c,t:u}=e,l=e.roundsFull/2,d=e.reversePartialPowIdx?u-1:0,h=(t,e,i)=>(t=t.map((t,e)=>r.add(t,a[i][e])),e?t=t.map(t=>c(t)):t[d]=c(t[d]),t=n.map(e=>e.reduce((e,n,i)=>r.add(e,r.mulN(n,t[i])),r.ZERO))),f=function(t){if(!Array.isArray(t)||t.length!==u)throw new Error("invalid values, expected array of bigints with length "+u);t=t.map(t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return r.create(t)});let e=0;for(let r=0;r<l;r++)t=h(t,!0,e++);for(let r=0;r<o;r++)t=h(t,!1,e++);for(let r=0;r<l;r++)t=h(t,!0,e++);if(e!==s)throw new Error("invalid number of rounds");return t};return f.roundConstants=a,f}},8293(t,e,r){"use strict";r.d(e,{DO:()=>o,IV:()=>_,Id:()=>v,ME:()=>h,My:()=>l,OG:()=>I,Ph:()=>y,Q5:()=>R,aK:()=>T,aT:()=>p,aY:()=>s,dJ:()=>S,e8:()=>c,fg:()=>B,lX:()=>g,lq:()=>m,qj:()=>w,r4:()=>A,x:()=>O,z:()=>b,zW:()=>d});const n=BigInt(0),i=BigInt(1),a=BigInt(2);function s(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function o(t){if(!s(t))throw new Error("Uint8Array expected")}function c(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const u=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function l(t){o(t);let e="";for(let r=0;r<t.length;r++)e+=u[t[r]];return e}function d(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function h(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?n:BigInt("0x"+t)}function f(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function p(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=f(t.charCodeAt(i)),a=f(t.charCodeAt(i+1));if(void 0===r||void 0===a){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+a}return n}function y(t){return h(l(t))}function g(t){return o(t),h(l(Uint8Array.from(t).reverse()))}function m(t,e){return p(t.toString(16).padStart(2*e,"0"))}function b(t,e){return m(t,e).reverse()}function _(t){return p(d(t))}function w(t,e,r){let n;if("string"==typeof e)try{n=p(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!s(e))throw new Error(t+" must be hex string or Uint8Array");n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function v(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];o(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}const E=t=>"bigint"==typeof t&&n<=t;function A(t,e,r){return E(t)&&E(e)&&E(r)&&e<=t&&t<r}function T(t,e,r,n){if(!A(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function S(t){let e;for(e=0;t>n;t>>=i,e+=1);return e}const I=t=>(a<<BigInt(t-1))-i,k=t=>new Uint8Array(t),x=t=>Uint8Array.from(t);function B(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=k(t),i=k(t),a=0;const s=()=>{n.fill(1),i.fill(0),a=0},o=(...t)=>r(i,n,...t),c=(t=k())=>{i=o(x([0]),t),n=o(),0!==t.length&&(i=o(x([1]),t),n=o())},u=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=o();const e=n.slice();r.push(e),t+=n.length}return v(...r)};return(t,e)=>{let r;for(s(),c(t);!(r=e(u()));)c();return s(),r}}const C={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||s(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function R(t,e,r={}){const n=(e,r,n)=>{const i=C[r];if("function"!=typeof i)throw new Error("invalid validator function");const a=t[e];if(!(n&&void 0===a||i(a,t)))throw new Error("param "+String(e)+" is invalid. Expected "+r+", got "+a)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}function O(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(void 0!==i)return i;const a=t(r,...n);return e.set(r,a),a}}},7713(t,e,r){"use strict";r.r(e),r.d(e,{DER:()=>m,SWUFpSqrtRatio:()=>S,mapToCurveSimpleSWU:()=>I,weierstrass:()=>T,weierstrassPoints:()=>A});var n=r(8030),i=r(8293);const a=BigInt(0),s=BigInt(1);function o(t,e){const r=e.negate();return t?r:e}function c(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function u(t,e){return c(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const l=new WeakMap,d=new WeakMap;function h(t){return d.get(t)||1}function f(t){return(0,n.jr)(t.Fp),(0,i.Q5)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.LH)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function p(t){void 0!==t.lowS&&(0,i.e8)("lowS",t.lowS),void 0!==t.prehash&&(0,i.e8)("prehash",t.prehash)}const{Ph:y,aT:g}=i,m={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:r}=m;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");const n=e.length/2,a=i.zW(n);if(a.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?i.zW(a.length/2|128):"";return i.zW(t)+s+a+e},decode(t,e){const{Err:r}=m;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++];let a=0;if(128&i){const t=127&i;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");const s=e.subarray(n,n+t);if(s.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of s)a=a<<8|t;if(n+=t,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;const s=e.subarray(n,n+a);if(s.length!==a)throw new r("tlv.decode: wrong value length");return{v:s,l:e.subarray(n+a)}}},_int:{encode(t){const{Err:e}=m;if(t<b)throw new e("integer: negative integers are not allowed");let r=i.zW(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=m;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return y(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=m,a="string"==typeof t?g(t):t;i.DO(a);const{v:s,l:o}=n.decode(48,a);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=n.decode(2,s),{v:l,l:d}=n.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(c),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=m,n=e.encode(2,r.encode(t.r))+e.encode(2,r.encode(t.s));return e.encode(48,n)}},b=BigInt(0),_=BigInt(1),w=BigInt(2),v=BigInt(3),E=BigInt(4);function A(t){const e=function(t){const e=f(t);i.Q5(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a}=e;if(r){if(!n.eql(a,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,p=n.D0(e.n,e.nBitLength),y=e.toBytes||((t,e,n)=>{const a=e.toAffine();return i.Id(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),g=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function m(t){const{a:n,b:i}=e,a=r.sqr(t),s=r.mul(a,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),m(e.Gx)))throw new Error("bad generator point: equation left != right");function w(t){const{allowedPrivateKeyLengths:r,nByteLength:a,wrapPrivateKey:s,n:o}=e;if(r&&"bigint"!=typeof t){if(i.aY(t)&&(t=i.My(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*a,"0")}let c;try{c="bigint"==typeof t?t:i.Ph((0,i.qj)("private key",t,a))}catch(e){throw new Error("invalid private key, expected hex or "+a+" bytes, got "+typeof t)}return s&&(c=n.zi(c,o)),i.aK("private key",c,_,o),c}function E(t){if(!(t instanceof S))throw new Error("ProjectivePoint expected")}const A=(0,i.x)((t,e)=>{const{px:n,py:i,pz:a}=t;if(r.eql(a,r.ONE))return{x:n,y:i};const s=t.is0();null==e&&(e=s?r.ONE:r.inv(a));const o=r.mul(n,e),c=r.mul(i,e),u=r.mul(a,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),T=(0,i.x)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=t.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const a=r.sqr(i),s=m(n);if(!r.eql(a,s))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class S{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof S)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?S.ZERO:new S(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(S.fromAffine)}static fromHex(t){const e=S.fromAffine(g((0,i.qj)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return S.BASE.multiply(w(t))}static msm(t,e){return function(t,e,r,n){if(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}(r,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,s=(0,i.dJ)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,c=(1<<o)-1,u=new Array(c+1).fill(a);let l=a;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){u.fill(a);for(let e=0;e<n.length;e++){const i=n[e],a=Number(i>>BigInt(t)&BigInt(c));u[a]=u[a].add(r[e])}let e=a;for(let t=u.length-1,r=a;t>0;t--)r=r.add(u[t]),e=e.add(r);if(l=l.add(e),0!==t)for(let t=0;t<o;t++)l=l.double()}return l}(S,p,t,e)}_setWindowSize(t){k.setWindowSize(this,t)}assertValidity(){T(this)}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){E(t);const{px:e,py:n,pz:i}=this,{px:a,py:s,pz:o}=t,c=r.eql(r.mul(e,o),r.mul(a,i)),u=r.eql(r.mul(n,o),r.mul(s,i));return c&&u}negate(){return new S(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,v),{px:a,py:s,pz:o}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(a,a),h=r.mul(s,s),f=r.mul(o,o),p=r.mul(a,s);return p=r.add(p,p),l=r.mul(a,o),l=r.add(l,l),c=r.mul(t,l),u=r.mul(i,f),u=r.add(c,u),c=r.sub(h,u),u=r.add(h,u),u=r.mul(c,u),c=r.mul(p,c),l=r.mul(i,l),f=r.mul(t,f),p=r.sub(d,f),p=r.mul(t,p),p=r.add(p,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,f),d=r.mul(d,p),u=r.add(u,d),f=r.mul(s,o),f=r.add(f,f),d=r.mul(f,p),c=r.sub(c,d),l=r.mul(f,h),l=r.add(l,l),l=r.add(l,l),new S(c,u,l)}add(t){E(t);const{px:n,py:i,pz:a}=this,{px:s,py:o,pz:c}=t;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const h=e.a,f=r.mul(e.b,v);let p=r.mul(n,s),y=r.mul(i,o),g=r.mul(a,c),m=r.add(n,i),b=r.add(s,o);m=r.mul(m,b),b=r.add(p,y),m=r.sub(m,b),b=r.add(n,a);let _=r.add(s,c);return b=r.mul(b,_),_=r.add(p,g),b=r.sub(b,_),_=r.add(i,a),u=r.add(o,c),_=r.mul(_,u),u=r.add(y,g),_=r.sub(_,u),d=r.mul(h,b),u=r.mul(f,g),d=r.add(u,d),u=r.sub(y,d),d=r.add(y,d),l=r.mul(u,d),y=r.add(p,p),y=r.add(y,p),g=r.mul(h,g),b=r.mul(f,b),y=r.add(y,g),g=r.sub(p,g),g=r.mul(h,g),b=r.add(b,g),p=r.mul(y,b),l=r.add(l,p),p=r.mul(_,b),u=r.mul(m,u),u=r.sub(u,p),p=r.mul(m,y),d=r.mul(_,d),d=r.add(d,p),new S(u,l,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(S.ZERO)}wNAF(t){return k.wNAFCached(this,t,S.normalizeZ)}multiplyUnsafe(t){const{endo:n,n:a}=e;i.aK("scalar",t,b,a);const s=S.ZERO;if(t===b)return s;if(this.is0()||t===_)return this;if(!n||k.hasPrecomputes(this))return k.wNAFCachedUnsafe(this,t,S.normalizeZ);let{k1neg:o,k1:c,k2neg:u,k2:l}=n.splitScalar(t),d=s,h=s,f=this;for(;c>b||l>b;)c&_&&(d=d.add(f)),l&_&&(h=h.add(f)),f=f.double(),c>>=_,l>>=_;return o&&(d=d.negate()),u&&(h=h.negate()),h=new S(r.mul(h.px,n.beta),h.py,h.pz),d.add(h)}multiply(t){const{endo:n,n:a}=e;let s,o;if(i.aK("scalar",t,_,a),n){const{k1neg:e,k1:i,k2neg:a,k2:c}=n.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);u=k.constTimeNegate(e,u),d=k.constTimeNegate(a,d),d=new S(r.mul(d.px,n.beta),d.py,d.pz),s=u.add(d),o=l.add(h)}else{const{p:e,f:r}=this.wNAF(t);s=e,o=r}return S.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,r){const n=S.BASE,i=(t,e)=>e!==b&&e!==_&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),a=i(this,e).add(i(t,r));return a.is0()?void 0:a}toAffine(t){return A(this,t)}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===_)return!0;if(r)return r(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===_?this:r?r(S,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,i.e8)("isCompressed",t),this.assertValidity(),y(S,this,t)}toHex(t=!0){return(0,i.e8)("isCompressed",t),i.My(this.toRawBytes(t))}}S.BASE=new S(e.Gx,e.Gy,r.ONE),S.ZERO=new S(r.ZERO,r.ONE,r.ZERO);const I=e.nBitLength,k=(x=S,B=e.endo?Math.ceil(I/2):I,{constTimeNegate:o,hasPrecomputes:t=>1!==h(t),unsafeLadder(t,e,r=x.ZERO){let n=t;for(;e>a;)e&s&&(r=r.add(n)),n=n.double(),e>>=s;return r},precomputeWindow(t,e){const{windows:r,windowSize:n}=u(e,B),i=[];let a=t,s=a;for(let t=0;t<r;t++){s=a,i.push(s);for(let t=1;t<n;t++)s=s.add(a),i.push(s);a=s.double()}return i},wNAF(t,e,r){const{windows:n,windowSize:i}=u(t,B);let a=x.ZERO,c=x.BASE;const l=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let t=0;t<n;t++){const n=t*i;let u=Number(r&l);r>>=h,u>i&&(u-=d,r+=s);const f=n,p=n+Math.abs(u)-1,y=t%2!=0,g=u<0;0===u?c=c.add(o(y,e[f])):a=a.add(o(g,e[p]))}return{p:a,f:c}},wNAFUnsafe(t,e,r,n=x.ZERO){const{windows:i,windowSize:o}=u(t,B),c=BigInt(2**t-1),l=2**t,d=BigInt(t);for(let t=0;t<i;t++){const i=t*o;if(r===a)break;let u=Number(r&c);if(r>>=d,u>o&&(u-=l,r+=s),0===u)continue;let h=e[i+Math.abs(u)-1];u<0&&(h=h.negate()),n=n.add(h)}return n},getPrecomputes(t,e,r){let n=l.get(e);return n||(n=this.precomputeWindow(e,t),1!==t&&l.set(e,r(n))),n},wNAFCached(t,e,r){const n=h(t);return this.wNAF(n,this.getPrecomputes(n,t,r),e)},wNAFCachedUnsafe(t,e,r,n){const i=h(t);return 1===i?this.unsafeLadder(t,e,n):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,n)},setWindowSize(t,e){c(e,B),d.set(t,e),l.delete(t)}});var x,B;return{CURVE:e,ProjectivePoint:S,normPrivateKeyToScalar:w,weierstrassEquation:m,isWithinCurveOrder:function(t){return i.r4(t,_,e.n)}}}function T(t){const e=function(t){const e=f(t);return i.Q5(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:a}=e,s=r.BYTES+1,o=2*r.BYTES+1;function c(t){return n.zi(t,a)}function u(t){return n.B8(t,a)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:y}=A({...e,toBytes(t,e,n){const a=e.toAffine(),s=r.toBytes(a.x),o=i.Id;return(0,i.e8)("isCompressed",n),n?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(a.y))},fromBytes(t){const e=t.length,n=t[0],a=t.subarray(1);if(e!==s||2!==n&&3!==n){if(e===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+s+", or uncompressed "+o+", got "+e)}{const t=i.Ph(a);if(!i.r4(t,_,r.ORDER))throw new Error("Point is not on curve");const e=h(t);let s;try{s=r.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!=((s&_)===_)&&(s=r.neg(s)),{x:t,y:s}}}}),g=t=>i.My(i.lq(t,e.nByteLength));function w(t){return t>a>>_}const v=(t,e,r)=>i.Ph(t.slice(e,r));class E{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=(0,i.qj)("compactSignature",t,2*r),new E(v(t,0,r),v(t,r,2*r))}static fromDER(t){const{r:e,s:r}=m.toSig((0,i.qj)("DER",t));return new E(e,r)}assertValidity(){i.aK("r",this.r,_,a),i.aK("s",this.s,_,a)}addRecoveryBit(t){return new E(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s:a,recovery:s}=this,o=k((0,i.qj)("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?n+e.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&s?"03":"02",f=l.fromHex(h+g(d)),p=u(d),y=c(-o*p),m=c(a*p),b=l.BASE.multiplyAndAddUnsafe(f,y,m);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return i.aT(this.toDERHex())}toDERHex(){return m.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.aT(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const T={isValidPrivateKey(t){try{return d(t),!0}catch(t){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const t=n.Tp(e.n);return n.qy(e.randomBytes(t),e.n)},precompute:(t=8,e=l.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function S(t){const e=i.aY(t),r="string"==typeof t,n=(e||r)&&t.length;return e?n===s||n===o:r?n===2*s||n===2*o:t instanceof l}const I=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const r=i.Ph(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},k=e.bits2int_modN||function(t){return c(I(t))},x=i.OG(e.nBitLength);function B(t){return i.aK("num < 2^"+e.nBitLength,t,b,x),i.lq(t,e.nByteLength)}const C={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return l.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(S(t))throw new Error("first arg must be private key");if(!S(e))throw new Error("second arg must be public key");return l.fromHex(e).multiply(d(t)).toRawBytes(r)},sign:function(t,n,a=C){const{seed:s,k2sig:o}=function(t,n,a=C){if(["recovered","canonical"].some(t=>t in a))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:o}=e;let{lowS:h,prehash:f,extraEntropy:g}=a;null==h&&(h=!0),t=(0,i.qj)("msgHash",t),p(a),f&&(t=(0,i.qj)("prehashed msgHash",s(t)));const m=k(t),v=d(n),A=[B(v),B(m)];if(null!=g&&!1!==g){const t=!0===g?o(r.BYTES):g;A.push((0,i.qj)("extraEntropy",t))}const T=i.Id(...A),S=m;return{seed:T,k2sig:function(t){const e=I(t);if(!y(e))return;const r=u(e),n=l.BASE.multiply(e).toAffine(),i=c(n.x);if(i===b)return;const a=c(r*c(S+i*v));if(a===b)return;let s=(n.x===i?0:2)|Number(n.y&_),o=a;return h&&w(a)&&(o=function(t){return w(t)?c(-t):t}(a),s^=1),new E(i,o,s)}}}(t,n,a),h=e;return i.fg(h.hash.outputLen,h.nByteLength,h.hmac)(s,o)},verify:function(t,r,n,a=R){const s=t;r=(0,i.qj)("msgHash",r),n=(0,i.qj)("publicKey",n);const{lowS:o,prehash:d,format:h}=a;if(p(a),"strict"in a)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof s||i.aY(s),y=!f&&!h&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!f&&!y)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let g,b;try{if(y&&(g=new E(s.r,s.s)),f){try{"compact"!==h&&(g=E.fromDER(s))}catch(t){if(!(t instanceof m.Err))throw t}g||"der"===h||(g=E.fromCompact(s))}b=l.fromHex(n)}catch(t){return!1}if(!g)return!1;if(o&&g.hasHighS())return!1;d&&(r=e.hash(r));const{r:_,s:w}=g,v=k(r),A=u(w),T=c(v*A),S=c(_*A),I=l.BASE.multiplyAndAddUnsafe(b,T,S)?.toAffine();return!!I&&c(I.x)===_},ProjectivePoint:l,Signature:E,utils:T}}function S(t,e){const r=t.ORDER;let n=b;for(let t=r-_;t%w===b;t/=w)n+=_;const i=n,a=w<<i-_-_,s=a*w,o=(r-_)/s,c=(o-_)/w,u=s-_,l=a,d=t.pow(e,o),h=t.pow(e,(o+_)/w);let f=(e,r)=>{let n=d,a=t.pow(r,u),s=t.sqr(a);s=t.mul(s,r);let o=t.mul(e,s);o=t.pow(o,c),o=t.mul(o,a),a=t.mul(o,r),s=t.mul(o,e);let f=t.mul(s,a);o=t.pow(f,l);let p=t.eql(o,t.ONE);a=t.mul(s,h),o=t.mul(f,n),s=t.cmov(a,s,p),f=t.cmov(o,f,p);for(let e=i;e>_;e--){let r=e-w;r=w<<r-_;let i=t.pow(f,r);const o=t.eql(i,t.ONE);a=t.mul(s,n),n=t.mul(n,n),i=t.mul(f,n),s=t.cmov(a,s,o),f=t.cmov(i,f,o)}return{isValid:p,value:s}};if(t.ORDER%E===v){const r=(t.ORDER-v)/E,n=t.sqrt(t.neg(e));f=(e,i)=>{let a=t.sqr(i);const s=t.mul(e,i);a=t.mul(a,s);let o=t.pow(a,r);o=t.mul(o,s);const c=t.mul(o,n),u=t.mul(t.sqr(o),i),l=t.eql(u,e);return{isValid:l,value:t.cmov(c,o,l)}}}return f}function I(t,e){if(n.jr(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=S(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,a,s,o,c,u,l,d;i=t.sqr(n),i=t.mul(i,e.Z),a=t.sqr(i),a=t.add(a,i),s=t.add(a,t.ONE),s=t.mul(s,e.B),o=t.cmov(e.Z,t.neg(a),!t.eql(a,t.ZERO)),o=t.mul(o,e.A),a=t.sqr(s),u=t.sqr(o),c=t.mul(u,e.A),a=t.add(a,c),a=t.mul(a,s),u=t.mul(u,o),c=t.mul(u,e.B),a=t.add(a,c),l=t.mul(i,s);const{isValid:h,value:f}=r(a,u);d=t.mul(i,n),d=t.mul(d,f),l=t.cmov(l,s,h),d=t.cmov(d,f,h);const p=t.isOdd(n)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),l=t.div(l,o),{x:l,y:d}}}},9979(t,e,r){"use strict";r.d(e,{bI:()=>v});var n=r(5493),i=r(6606);const a=(t,e,r)=>t&e^~t&r,s=(t,e,r)=>t&e^t&r^e&r;class o extends i.Vw{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.O8)(this.buffer)}update(t){(0,n.CC)(this);const{view:e,buffer:r,blockLen:a}=this,s=(t=(0,i.ZJ)(t)).length;for(let n=0;n<s;){const o=Math.min(a-this.pos,s-n);if(o===a){const e=(0,i.O8)(t);for(;a<=s-n;n+=a)this.process(e,n);continue}r.set(t.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===a&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.CC)(this),(0,n.Ht)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:a,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(r,0),o=0);for(let t=o;t<a;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,a-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.O8)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,d[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}const c=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),u=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),l=new Uint32Array(64);class d extends o{constructor(){super(64,32,8,!1),this.A=0|u[0],this.B=0|u[1],this.C=0|u[2],this.D=0|u[3],this.E=0|u[4],this.F=0|u[5],this.G=0|u[6],this.H=0|u[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)l[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=l[t-15],r=l[t-2],n=(0,i.Ow)(e,7)^(0,i.Ow)(e,18)^e>>>3,a=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;l[t]=a+l[t-7]+n+l[t-16]|0}let{A:r,B:n,C:o,D:u,E:d,F:h,G:f,H:p}=this;for(let t=0;t<64;t++){const e=p+((0,i.Ow)(d,6)^(0,i.Ow)(d,11)^(0,i.Ow)(d,25))+a(d,h,f)+c[t]+l[t]|0,y=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+s(r,n,o)|0;p=f,f=h,h=d,d=u+e|0,u=o,o=n,n=r,r=e+y|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,u=u+this.D|0,d=d+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,n,o,u,d,h,f,p)}roundClean(){l.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const h=(0,i.ld)(()=>new d);var f=r(1817),p=r(8030);const y=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),g=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),m=BigInt(1),b=BigInt(2),_=(t,e)=>(t+e/b)/e;const w=(0,p.D0)(y,void 0,void 0,{sqrt:function(t){const e=y,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),s=BigInt(23),o=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=(0,p.zH)(l,r,e)*l%e,h=(0,p.zH)(d,r,e)*l%e,f=(0,p.zH)(h,b,e)*u%e,g=(0,p.zH)(f,i,e)*f%e,m=(0,p.zH)(g,a,e)*g%e,_=(0,p.zH)(m,o,e)*m%e,v=(0,p.zH)(_,c,e)*_%e,E=(0,p.zH)(v,o,e)*m%e,A=(0,p.zH)(E,r,e)*l%e,T=(0,p.zH)(A,s,e)*g%e,S=(0,p.zH)(T,n,e)*u%e,I=(0,p.zH)(S,b,e);if(!w.eql(w.sqr(I),t))throw new Error("Cannot find square root");return I}}),v=(0,f.s)({a:BigInt(0),b:BigInt(7),Fp:w,n:g,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=g,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-m*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,s=BigInt("0x100000000000000000000000000000000"),o=_(a*t,e),c=_(-n*t,e);let u=(0,p.zi)(t-o*r-c*i,e),l=(0,p.zi)(-o*n-c*a,e);const d=u>s,h=l>s;if(d&&(u=e-u),h&&(l=e-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},h);BigInt(0),v.ProjectivePoint},5493(t,e,r){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(t.outputLen),n(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o(t,e){i(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(e,{CC:()=>s,DO:()=>i,Ht:()=>o,sd:()=>a})},6606(t,e,r){"use strict";r.d(e,{Vw:()=>u,Id:()=>c,O8:()=>a,po:()=>d,Ow:()=>s,ZJ:()=>o,ld:()=>l});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(5493);const a=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),s=(t,e)=>t<<32-e|t>>>e;function o(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),(0,i.DO)(t),t}function c(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];(0,i.DO)(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}class u{clone(){return this._cloneInto()}}function l(t){const e=e=>t().update(o(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function d(t=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(t));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}},235(t,e,r){"use strict";function n(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){i(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.r(e),r.d(e,{CURVE:()=>ct,Fp251:()=>Bt,MAX_VALUE:()=>W,ProjectivePoint:()=>ut,Signature:()=>lt,_poseidonMDS:()=>Rt,_starkCurve:()=>Q,computeHashOnElements:()=>St,ethSigToPrivate:()=>gt,getAccountPath:()=>bt,getPublicKey:()=>rt,getSharedSecret:()=>nt,getStarkKey:()=>yt,grindKey:()=>pt,keccak:()=>kt,normalizePrivateKey:()=>et,pedersen:()=>Tt,poseidonBasic:()=>Nt,poseidonCreate:()=>Dt,poseidonHash:()=>Lt,poseidonHashFunc:()=>Ut,poseidonHashMany:()=>Vt,poseidonHashSingle:()=>Ft,poseidonSmall:()=>Pt,sign:()=>st,utils:()=>dt,verify:()=>ot});const o=BigInt(2**32-1),c=BigInt(32);function u(t,e=!1){return e?{h:Number(t&o),l:Number(t>>c&o)}:{h:0|Number(t>>c&o),l:0|Number(t&o)}}function l(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:s}=u(t[i],e);[r[i],n[i]]=[a,s]}return[r,n]}const d=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),h=(t,e)=>t<<32-e|t>>>e,f=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),p=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function y(t){for(let e=0;e<t.length;e++)t[e]=p(t[e])}function g(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function m(t){return"string"==typeof t&&(t=g(t)),i(t),t}class b{clone(){return this._cloneInto()}}function _(t){const e=e=>t().update(m(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}const w=[],v=[],E=[],A=BigInt(0),T=BigInt(1),S=BigInt(2),I=BigInt(7),k=BigInt(256),x=BigInt(113);for(let t=0,e=T,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],w.push(2*(5*n+r)),v.push((t+1)*(t+2)/2%64);let i=A;for(let t=0;t<7;t++)e=(e<<T^(e>>I)*x)%k,e&S&&(i^=T<<(T<<BigInt(t))-T);E.push(i)}const[B,C]=l(E,!0),R=(t,e,r)=>r>32?((t,e,r)=>e<<r-32|t>>>64-r)(t,e,r):((t,e,r)=>t<<r|e>>>32-r)(t,e,r),O=(t,e,r)=>r>32?((t,e,r)=>t<<r-32|e>>>64-r)(t,e,r):((t,e,r)=>e<<r|t>>>32-r)(t,e,r);class N extends b{constructor(t,e,r,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){f||y(this.state32),function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,a=r[i],s=r[i+1],o=R(a,s,1)^r[n],c=O(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=v[r],a=R(e,i,n),s=O(e,i,n),o=w[r];e=t[o],i=t[o+1],t[o]=a,t[o+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=B[n],t[1]^=C[n]}r.fill(0)}(this.state32,this.rounds),f||y(this.state32),this.posOut=0,this.pos=0}update(t){a(this);const{blockLen:e,state:r}=this,n=(t=m(t)).length;for(let i=0;i<n;){const a=Math.min(e-this.pos,n-i);for(let e=0;e<a;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){a(this,!1),i(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return n(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(s(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return t||(t=new N(e,r,n,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}const D=((t,e,r)=>_(()=>new N(e,t,r)))(1,136,32),P=(t,e,r)=>t&e^~t&r,L=(t,e,r)=>t&e^t&r^e&r;class U extends b{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=d(this.buffer)}update(t){a(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=m(t)).length;for(let a=0;a<i;){const s=Math.min(n-this.pos,i-a);if(s===n){const e=d(t);for(;n<=i-a;a+=n)this.process(e,a);continue}r.set(t.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){a(this),s(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let t=o;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const c=d(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)c.setUint32(4*t,h[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}const F=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),V=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),H=new Uint32Array(64);class M extends U{constructor(){super(64,32,8,!1),this.A=0|V[0],this.B=0|V[1],this.C=0|V[2],this.D=0|V[3],this.E=0|V[4],this.F=0|V[5],this.G=0|V[6],this.H=0|V[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)H[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=H[t-15],r=H[t-2],n=h(e,7)^h(e,18)^e>>>3,i=h(r,17)^h(r,19)^r>>>10;H[t]=i+H[t-7]+n+H[t-16]|0}let{A:r,B:n,C:i,D:a,E:s,F:o,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(h(s,6)^h(s,11)^h(s,25))+P(s,o,c)+F[t]+H[t]|0,l=(h(r,2)^h(r,13)^h(r,22))+L(r,n,i)|0;u=c,c=o,o=s,s=a+e|0,a=i,i=n,n=r,r=e+l|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,a,s,o,c,u)}roundClean(){H.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const \$=_(()=>new M);var j=r(8030),q=r(5591),z=r(7713),G=r(8293),Y=r(1817);const K=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),W=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function Z(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,r=G.Ph(t);return e>0?r>>BigInt(e):r}function X(t){return"string"==typeof t&&1&(t=ft(t)).length&&(t="0"+t),G.aT(t)}const J=(0,z.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,j.D0)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:K,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,Y.Z)(\$),bits2int:Z,bits2int_modN:t=>{const e=G.Ph(t).toString(16);return 63===e.length&&(t=X(e+"0")),(0,j.zi)(Z(t),K)}}),Q=J;function tt(t){return G.qj("","string"==typeof t?X(t):t)}function et(t){return G.My(tt(t)).padStart(64,"0")}function rt(t,e=!1){return J.getPublicKey(et(t),e)}function nt(t,e){return J.getSharedSecret(et(t),e)}function it(t){const{r:e,s:r}=t;if(e<0n||e>=W)throw new Error(\`Signature.r should be [1, \${W})\`);const n=(0,j.B8)(r,K);if(n<0n||n>=W)throw new Error(\`inv(Signature.s) should be [1, \${W})\`)}function at(t){const e=tt(t);if(G.Ph(e)>=W)throw new Error(\`msgHash should be [0, \${W})\`);return e}function st(t,e,r){const n=J.sign(at(t),et(e),r);return it(n),n}function ot(t,e,r){if(!(t instanceof lt)){const e=tt(t);try{t=lt.fromDER(e)}catch(r){if(!(r instanceof z.DER.Err))throw r;t=lt.fromCompact(e)}}return it(t),J.verify(t,at(e),tt(r))}const{CURVE:ct,ProjectivePoint:ut,Signature:lt,utils:dt}=J;function ht(t){return\`0x\${G.My(t.subarray(1)).replace(/^0+/gm,"")}\`}function ft(t){return t.replace(/^0x/i,"")}function pt(t){const e=tt(t),r=2n**256n,n=r-(0,j.zi)(r,K);for(let t=0;;t++){const r=xt(G.Id(e,G.IV(BigInt(t))));if(r<n)return(0,j.zi)(r,K).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function yt(t){return ht(rt(t,!0))}function gt(t){if(130!==(t=ft(t)).length)throw new Error("Wrong ethereum signature");return pt(t.substring(0,64))}const mt=t=>Number(2147483647n&t);function bt(t,e,r,n){const i=mt(xt(t)),a=mt(xt(e)),s=G.ME(ft(r));return\`m/2645'/\${i}'/\${a}'/\${mt(s)}'/\${mt(s>>31n)}'/\${n}\`}const _t=[new ut(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new ut(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new ut(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new ut(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new ut(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function wt(t,e){const r=[];let n=t;for(let t=0;t<248;t++)r.push(n),n=n.double();n=e;for(let t=0;t<4;t++)r.push(n),n=n.double();return r}const vt=wt(_t[1],_t[2]),Et=wt(_t[3],_t[4]);function At(t,e,r){let n=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(\`Invalid pedersenArg: \${t}\`);e=BigInt(t)}else e=G.Ph(tt(t));if(!(0n<=e&&e<J.CURVE.Fp.ORDER))throw new Error(\`PedersenArg should be 0 <= value < CURVE.P: \${e}\`);return e}(e);for(let e=0;e<252;e++){const i=r[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!=(1n&n)&&(t=t.add(i)),n>>=1n}return t}function Tt(t,e){let r=_t[0];return r=At(r,t,vt),r=At(r,e,Et),ht(r.toRawBytes(!0))}const St=(t,e=Tt)=>[0,...t,t.length].reduce((t,r)=>e(t,r)),It=G.OG(250),kt=t=>G.Ph(D(t))&It,xt=t=>G.Ph(\$(t)),Bt=(0,j.D0)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Ct(t,e,r){const n=t.fromBytes(\$(g(\`\${e}\${r}\`)));return t.create(n)}function Rt(t,e,r,n=0){const i=[],a=[];for(let s=0;s<r;s++)i.push(Ct(t,\`\${e}x\`,n*r+s)),a.push(Ct(t,\`\${e}y\`,n*r+s));if(new Set([...i,...a]).size!==2*r)throw new Error("X and Y values are not distinct");return i.map(e=>a.map(r=>t.inv(t.sub(e,r))))}const Ot=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function Nt(t,e){if((0,j.jr)(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(\`Wrong poseidon opts: \${t}\`);const r=t.rate+t.capacity,n=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<n;e++){const n=[];for(let i=0;i<r;i++)n.push(Ct(t.Fp,"Hades",r*e+i));i.push(n)}const a=(0,q.poseidon)({...t,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return a.m=r,a.rate=t.rate,a.capacity=t.capacity,a}function Dt(t,e=0){const r=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(\`Wrong mdsAttempt=\${e}\`);return Nt(t,Rt(t.Fp,"HadesMDS",r,e))}const Pt=Nt({Fp:Bt,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Ot);function Lt(t,e,r=Pt){return r([t,e,2n])[0]}function Ut(t,e,r=Pt){return G.IV(Lt(G.Ph(t),G.Ph(e),r))}function Ft(t,e=Pt){return e([t,0n,1n])[0]}function Vt(t,e=Pt){const{m:r,rate:n}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const i=Array.from(t);for(i.push(1n);i.length%n!==0;)i.push(0n);let a=new Array(r).fill(0n);for(let t=0;t<i.length;t+=n){for(let e=0;e<n;e++){const r=i[t+e];if(void 0===r)throw new Error("invalid index");if(void 0===a[e])throw new Error("state[j] is undefined");a[e]=a[e]+r}a=e(a)}return a[0]}},4302(t,e,r){"use strict";r.d(e,{\$k:()=>f,\$q:()=>O,If:()=>R,MI:()=>n,QY:()=>c,R8:()=>v,RF:()=>E,Sq:()=>N,Tj:()=>A,Tk:()=>i,Tw:()=>_,WY:()=>P,_K:()=>h,bG:()=>g,dT:()=>u,en:()=>C,f0:()=>p,hK:()=>U,i3:()=>S,jT:()=>a,lp:()=>m,mR:()=>y,nW:()=>s,oZ:()=>d,om:()=>L,pf:()=>l,rr:()=>b,sI:()=>B,sm:()=>w,sv:()=>D,u7:()=>I,vZ:()=>T,vn:()=>x,wV:()=>k,ze:()=>o});const n="ACCEPTED_ON_L2",i="ACCEPTED_ON_L1",a="SUCCEEDED",s="REVERTED",o="PENDING",c="REJECTED",u="RECEIVED",l="DECLARE",d="DEPLOY",h="DEPLOY_ACCOUNT",f="INVOKE",p="L1_HANDLER",y="struct",g="event",m="function",b="constructor",_="l1_handler",w="enum",v="view",E="external",A="WEI",T="FRI",S={BLOB:"BLOB",CALLDATA:"CALLDATA"},I={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},k={DECLARE:l,DEPLOY:d,DEPLOY_ACCOUNT:h,INVOKE:f,L1_HANDLER:p},x={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},B={RECEIVED:u,REJECTED:c,ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},C={ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},R={SUCCEEDED:a,REVERTED:s},O={LATEST:"latest",PENDING:"pending"},N={L1:"L1",L2:"L2"},D={L1:0,L2:1},P={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},L={V0:P.V0,V1:P.V1,V2:P.V2,F0:P.F0,F1:P.F1,F2:P.F2},U={V3:P.V3,F3:P.F3}},9321(t,e,r){"use strict";r.r(e),r.d(e,{ABI_TYPE_CONSTRUCTOR:()=>s.rr,ABI_TYPE_ENUM:()=>s.sm,ABI_TYPE_FUNCTION:()=>s.lp,ABI_TYPE_L1_HANDLER:()=>s.Tw,API:()=>i,CALL_TYPE:()=>s.u7,CONTRACT:()=>n,EBlockTag:()=>s.\$q,EDAMode:()=>s.sv,EDataAvailabilityMode:()=>s.Sq,ESimulationFlag:()=>s.vn,ETransactionExecutionStatus:()=>s.If,ETransactionFinalityStatus:()=>s.en,ETransactionStatus:()=>s.sI,ETransactionType:()=>s.wV,ETransactionVersion:()=>s.WY,ETransactionVersion2:()=>s.om,ETransactionVersion3:()=>s.hK,EVENT_ABI_TYPE:()=>s.bG,L1_DA_MODE:()=>s.i3,PAYMASTER_API:()=>u,PRICE_UNIT_FRI:()=>s.vZ,PRICE_UNIT_WEI:()=>s.Tj,Permission:()=>o,STATE_MUTABILITY_EXTERNAL:()=>s.RF,STATE_MUTABILITY_VIEW:()=>s.R8,STATUS_ACCEPTED_ON_L1:()=>s.Tk,STATUS_ACCEPTED_ON_L2:()=>s.MI,STATUS_PENDING:()=>s.ze,STATUS_RECEIVED:()=>s.dT,STATUS_REJECTED:()=>s.QY,STATUS_REVERTED:()=>s.nW,STATUS_SUCCEEDED:()=>s.jT,STRUCT_ABI_TYPE:()=>s.mR,TXN_TYPE_DECLARE:()=>s.pf,TXN_TYPE_DEPLOY:()=>s.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>s._K,TXN_TYPE_INVOKE:()=>s.\$k,TXN_TYPE_L1_HANDLER:()=>s.f0,TypedDataRevision:()=>c,WALLET_API:()=>a});var n={};r.r(n);var i={};r.r(i),r.d(i,{ABI_TYPE_CONSTRUCTOR:()=>s.rr,ABI_TYPE_ENUM:()=>s.sm,ABI_TYPE_FUNCTION:()=>s.lp,ABI_TYPE_L1_HANDLER:()=>s.Tw,CALL_TYPE:()=>s.u7,CONTRACT:()=>n,EBlockTag:()=>s.\$q,EDAMode:()=>s.sv,EDataAvailabilityMode:()=>s.Sq,ESimulationFlag:()=>s.vn,ETransactionExecutionStatus:()=>s.If,ETransactionFinalityStatus:()=>s.en,ETransactionStatus:()=>s.sI,ETransactionType:()=>s.wV,ETransactionVersion:()=>s.WY,ETransactionVersion2:()=>s.om,ETransactionVersion3:()=>s.hK,EVENT_ABI_TYPE:()=>s.bG,L1_DA_MODE:()=>s.i3,PRICE_UNIT_FRI:()=>s.vZ,PRICE_UNIT_WEI:()=>s.Tj,STATE_MUTABILITY_EXTERNAL:()=>s.RF,STATE_MUTABILITY_VIEW:()=>s.R8,STATUS_ACCEPTED_ON_L1:()=>s.Tk,STATUS_ACCEPTED_ON_L2:()=>s.MI,STATUS_PENDING:()=>s.ze,STATUS_RECEIVED:()=>s.dT,STATUS_REJECTED:()=>s.QY,STATUS_REVERTED:()=>s.nW,STATUS_SUCCEEDED:()=>s.jT,STRUCT_ABI_TYPE:()=>s.mR,TXN_TYPE_DECLARE:()=>s.pf,TXN_TYPE_DEPLOY:()=>s.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>s._K,TXN_TYPE_INVOKE:()=>s.\$k,TXN_TYPE_L1_HANDLER:()=>s.f0});var a={};r.r(a),r.d(a,{Permission:()=>o,TypedDataRevision:()=>c});var s=r(4302);const o={ACCOUNTS:"accounts"},c={ACTIVE:"1",LEGACY:"0"};var u=r(1605)},1605(t,e,r){"use strict";r.r(e)},591(t,e,r){"use strict";r.d(e,{\$k:()=>p,\$q:()=>N,D6:()=>D,If:()=>O,MI:()=>n,R8:()=>E,RF:()=>A,Sq:()=>P,Tj:()=>T,Tk:()=>i,Tw:()=>w,WY:()=>U,Z9:()=>u,ZU:()=>l,_K:()=>f,bG:()=>m,dT:()=>o,en:()=>R,f0:()=>y,hK:()=>V,i3:()=>I,jT:()=>a,lp:()=>b,mR:()=>g,nW:()=>s,oZ:()=>h,om:()=>F,pf:()=>d,rr:()=>_,sI:()=>C,sm:()=>v,sv:()=>L,u7:()=>k,vZ:()=>S,vn:()=>B,wV:()=>x,x:()=>c});const n="ACCEPTED_ON_L2",i="ACCEPTED_ON_L1",a="SUCCEEDED",s="REVERTED",o="RECEIVED",c="CANDIDATE",u="PRE_CONFIRMED",l=u.toLowerCase(),d="DECLARE",h="DEPLOY",f="DEPLOY_ACCOUNT",p="INVOKE",y="L1_HANDLER",g="struct",m="event",b="function",_="constructor",w="l1_handler",v="enum",E="view",A="external",T="WEI",S="FRI",I={BLOB:"BLOB",CALLDATA:"CALLDATA"},k={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},x={DECLARE:d,DEPLOY:h,DEPLOY_ACCOUNT:f,INVOKE:p,L1_HANDLER:y},B={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},C={RECEIVED:o,CANDIDATE:c,PRE_CONFIRMED:u,ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},R={PRE_CONFIRMED:u,ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},O={SUCCEEDED:a,REVERTED:s},N={LATEST:"latest",PRE_CONFIRMED:l,L1_ACCEPTED:"l1_accepted"},D={PRE_CONFIRMED:u,ACCEPTED_ON_L2:n,ACCEPTED_ON_L1:i},P={L1:"L1",L2:"L2"},L={L1:0,L2:1},U={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},F={V0:U.V0,V1:U.V1,V2:U.V2,F0:U.F0,F1:U.F1,F2:U.F2},V={V3:U.V3,F3:U.F3}},1809(t,e,r){"use strict";r.r(e),r.d(e,{ABI_TYPE_CONSTRUCTOR:()=>o.rr,ABI_TYPE_ENUM:()=>o.sm,ABI_TYPE_FUNCTION:()=>o.lp,ABI_TYPE_L1_HANDLER:()=>o.Tw,API:()=>i,CALL_TYPE:()=>o.u7,CONTRACT:()=>n,EBlockStatus:()=>o.D6,EBlockTag:()=>o.\$q,EDAMode:()=>o.sv,EDataAvailabilityMode:()=>o.Sq,ESimulationFlag:()=>o.vn,ETransactionExecutionStatus:()=>o.If,ETransactionFinalityStatus:()=>o.en,ETransactionStatus:()=>o.sI,ETransactionType:()=>o.wV,ETransactionVersion:()=>o.WY,ETransactionVersion2:()=>o.om,ETransactionVersion3:()=>o.hK,EVENT_ABI_TYPE:()=>o.bG,L1_DA_MODE:()=>o.i3,PAYMASTER_API:()=>s,PRICE_UNIT_FRI:()=>o.vZ,PRICE_UNIT_WEI:()=>o.Tj,Permission:()=>c,STATE_MUTABILITY_EXTERNAL:()=>o.RF,STATE_MUTABILITY_VIEW:()=>o.R8,STATUS_ACCEPTED_ON_L1:()=>o.Tk,STATUS_ACCEPTED_ON_L2:()=>o.MI,STATUS_CANDIDATE:()=>o.x,STATUS_PRE_CONFIRMED:()=>o.Z9,STATUS_PRE_CONFIRMED_LOWERCASE:()=>o.ZU,STATUS_RECEIVED:()=>o.dT,STATUS_REVERTED:()=>o.nW,STATUS_SUCCEEDED:()=>o.jT,STRUCT_ABI_TYPE:()=>o.mR,TXN_TYPE_DECLARE:()=>o.pf,TXN_TYPE_DEPLOY:()=>o.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>o._K,TXN_TYPE_INVOKE:()=>o.\$k,TXN_TYPE_L1_HANDLER:()=>o.f0,TypedDataRevision:()=>u,WALLET_API:()=>a});var n={};r.r(n);var i={};r.r(i),r.d(i,{ABI_TYPE_CONSTRUCTOR:()=>o.rr,ABI_TYPE_ENUM:()=>o.sm,ABI_TYPE_FUNCTION:()=>o.lp,ABI_TYPE_L1_HANDLER:()=>o.Tw,CALL_TYPE:()=>o.u7,CONTRACT:()=>n,EBlockStatus:()=>o.D6,EBlockTag:()=>o.\$q,EDAMode:()=>o.sv,EDataAvailabilityMode:()=>o.Sq,ESimulationFlag:()=>o.vn,ETransactionExecutionStatus:()=>o.If,ETransactionFinalityStatus:()=>o.en,ETransactionStatus:()=>o.sI,ETransactionType:()=>o.wV,ETransactionVersion:()=>o.WY,ETransactionVersion2:()=>o.om,ETransactionVersion3:()=>o.hK,EVENT_ABI_TYPE:()=>o.bG,L1_DA_MODE:()=>o.i3,PRICE_UNIT_FRI:()=>o.vZ,PRICE_UNIT_WEI:()=>o.Tj,STATE_MUTABILITY_EXTERNAL:()=>o.RF,STATE_MUTABILITY_VIEW:()=>o.R8,STATUS_ACCEPTED_ON_L1:()=>o.Tk,STATUS_ACCEPTED_ON_L2:()=>o.MI,STATUS_CANDIDATE:()=>o.x,STATUS_PRE_CONFIRMED:()=>o.Z9,STATUS_PRE_CONFIRMED_LOWERCASE:()=>o.ZU,STATUS_RECEIVED:()=>o.dT,STATUS_REVERTED:()=>o.nW,STATUS_SUCCEEDED:()=>o.jT,STRUCT_ABI_TYPE:()=>o.mR,TXN_TYPE_DECLARE:()=>o.pf,TXN_TYPE_DEPLOY:()=>o.oZ,TXN_TYPE_DEPLOY_ACCOUNT:()=>o._K,TXN_TYPE_INVOKE:()=>o.\$k,TXN_TYPE_L1_HANDLER:()=>o.f0});var a={};r.r(a),r.d(a,{Permission:()=>c,TypedDataRevision:()=>u});var s={};r.r(s);var o=r(591);const c={ACCOUNTS:"accounts"},u={ACTIVE:"1",LEGACY:"0"}},4123(t,e,r){"use strict";function n(t){return i.test(t)}r.d(e,{Fq:()=>n,qg:()=>f,z3:()=>d,As:()=>z});const i=/^-?[0-9]+\$/;function a(t){return s.test(t)}const s=/^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?\$/;let o=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function c(t){const{start:e,end:r}=function(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let r=t.lastIndexOf("e");for(-1===r&&(r=t.lastIndexOf("E")),-1===r&&(r=t.length);("0"===t[r-1]||"."===t[r-1])&&r>e;)r--;return{start:e,end:r}}(t),n=t.substring(e,r),i=n.indexOf(".");return-1===i?n:n.substring(0,i)+n.substring(i+1)}class u{isLosslessNumber=!0;constructor(t){if(!a(t))throw new Error(\`Invalid number (value: "\${t}")\`);this.value=t}valueOf(){const t=function(t){if(function(t){if(n(t))return Number.isSafeInteger(Number.parseInt(t,10));const e=Number.parseFloat(t),r=String(e);if(t===r)return!0;return c(t)===c(r)}(t))return;if(n(t))return o.truncate_integer;const e=Number.parseFloat(t);return Number.isFinite(e)?0===e?o.underflow:o.truncate_float:o.overflow}(this.value);if(void 0===t||t===o.truncate_float)return Number.parseFloat(this.value);if(n(this.value))return BigInt(this.value);throw new Error(\`Cannot safely convert to number: the value '\${this.value}' would \${t} and become \${Number.parseFloat(this.value)}\`)}toString(){return this.value}}function l(t){return new u(t)}function d(t){return n(t)?BigInt(t):Number.parseFloat(t)}function h(t,e,r,n){return Array.isArray(r)?n.call(t,e,function(t,e){for(let r=0;r<t.length;r++)t[r]=h(t,String(r),t[r],e);return t}(r,n)):r&&"object"==typeof r&&!function(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}(r)?n.call(t,e,function(t,e){for(const r of Object.keys(t)){const n=h(t,r,t[r],e);void 0!==n?t[r]=n:delete t[r]}return t}(r,n)):n.call(t,e,r)}function f(t,e,r){const n="function"==typeof r?{parseNumber:r}:r,i=n?.parseNumber??l,a=n?.onDuplicateKey??function(t){let{key:e,position:r}=t;throw new SyntaxError(\`Duplicate key '\${e}' encountered at position \${r}\`)};let s=0;const o=c();return function(t){if(void 0===t)throw new SyntaxError(\`JSON value expected \${G()}\`)}(o),function(){if(s<t.length)throw new SyntaxError(\`Expected end of input \${G()}\`)}(),e?function(t,e){return h({"":t},"",t,e)}(o,e):o;function c(){d();const e=f()??function(){const e=s;if(t.charCodeAt(s)===O&&(s++,x(e)),t.charCodeAt(s)===N)s++;else if((r=t.charCodeAt(s))>=D&&r<=P)for(s++;g(t.charCodeAt(s));)s++;var r;if(t.charCodeAt(s)===U)for(s++,x(e);g(t.charCodeAt(s));)s++;if(t.charCodeAt(s)===\$||t.charCodeAt(s)===M)for(s++,t.charCodeAt(s)!==O&&t.charCodeAt(s)!==R||s++,x(e);g(t.charCodeAt(s));)s++;if(s>e)return i(t.slice(e,s))}()??function(){if(t.charCodeAt(s)===E){s++,d();const e={};let r=!0;for(;s<t.length&&t.charCodeAt(s)!==A;){r?r=!1:(_(),d());const t=s,n=f();if(void 0===n)return void B();d(),I();const i=c();if(void 0===i)return void j();if(Object.prototype.hasOwnProperty.call(e,n)&&!b(i,e[n])){const r=a({key:n,position:t+1,oldValue:e[n],newValue:i});void 0!==r&&(e[n]=r)}else e[n]=i}return t.charCodeAt(s)!==A&&function(){throw new SyntaxError(\`Quoted object key or end of object '}' expected \${G()}\`)}(),s++,e}}()??function(){if(t.charCodeAt(s)===T){s++,d();const e=[];let r=!0;for(;s<t.length&&t.charCodeAt(s)!==S;){r?r=!1:_();const t=c();k(t),e.push(t)}return t.charCodeAt(s)!==S&&function(){throw new SyntaxError(\`Array item or end of array ']' expected \${G()}\`)}(),s++,e}}()??u("true",!0)??u("false",!1)??u("null",null);return d(),e}function u(e,r){if(t.slice(s,s+e.length)===e)return s+=e.length,r}function d(){for(;p(t.charCodeAt(s));)s++}function f(){if(t.charCodeAt(s)===C){s++;let e="";for(;s<t.length&&t.charCodeAt(s)!==C;){if(t.charCodeAt(s)===v){const r=t[s+1],n=w[r];void 0!==n?(e+=n,s++):"u"===r?y(t.charCodeAt(s+2))&&y(t.charCodeAt(s+3))&&y(t.charCodeAt(s+4))&&y(t.charCodeAt(s+5))?(e+=String.fromCharCode(Number.parseInt(t.slice(s+2,s+6),16)),s+=5):q(s):H(s)}else m(t.charCodeAt(s))?e+=t[s]:V(t[s]);s++}return function(){if(t.charCodeAt(s)!==C)throw new SyntaxError(\`End of string '"' expected \${G()}\`)}(),s++,e}}function _(){if(t.charCodeAt(s)!==L)throw new SyntaxError(\`Comma ',' expected after value \${G()}\`);s++}function I(){if(t.charCodeAt(s)!==F)throw new SyntaxError(\`Colon ':' expected after property name \${G()}\`);s++}function k(t){if(void 0===t)throw new SyntaxError(\`Array item expected \${G()}\`)}function x(e){if(!g(t.charCodeAt(s))){const r=t.slice(e,s);throw new SyntaxError(\`Invalid number '\${r}', expecting a digit \${G()}\`)}}function B(){throw new SyntaxError(\`Quoted object key expected \${G()}\`)}function V(t){throw new SyntaxError(\`Invalid character '\${t}' \${z()}\`)}function H(e){const r=t.slice(e,e+2);throw new SyntaxError(\`Invalid escape character '\${r}' \${z()}\`)}function j(){throw new SyntaxError(\`Object value expected after ':' \${z()}\`)}function q(e){const r=t.slice(e,e+6);throw new SyntaxError(\`Invalid unicode character '\${r}' \${z()}\`)}function z(){return\`at position \${s}\`}function G(){return\`\${s<t.length?\`but got '\${t[s]}'\`:"but reached end of input"} \${z()}\`}}function p(t){return t===I||t===k||t===x||t===B}function y(t){return t>=N&&t<=P||t>=V&&t<=j||t>=H&&t<=q}function g(t){return t>=N&&t<=P}function m(t){return t>=32&&t<=1114111}function b(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((t,r)=>b(t,e[r])):!(!_(t)||!_(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every(r=>b(t[r],e[r])))}function _(t){return"object"==typeof t&&null!==t}const w={'"':'"',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\\t"},v=92,E=123,A=125,T=91,S=93,I=32,k=10,x=9,B=13,C=34,R=43,O=45,N=48,D=49,P=57,L=44,U=46,F=58,V=65,H=97,M=69,\$=101,j=70,q=102;function z(t,e,r,n){const i=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(r);return function t(o,c){if(Array.isArray(n)){const t=n.find(t=>t.test(o));if(t){const e=t.stringify(o);if("string"!=typeof e||!a(e))throw new Error(\`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: \${e})\`);return e}}return"boolean"==typeof o||"number"==typeof o||"string"==typeof o||null===o||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String?JSON.stringify(o):o?.isLosslessNumber||"bigint"==typeof o?o.toString():Array.isArray(o)?function(r,n){if(0===r.length)return"[]";const a=i?n+i:void 0;let s=i?"[\\n":"[";for(let n=0;n<r.length;n++){const o="function"==typeof e?e.call(r,String(n),r[n]):r[n];i&&(s+=a),s+=void 0!==o&&"function"!=typeof o?t(o,a):"null",n<r.length-1&&(s+=i?",\\n":",")}return s+=i?\`\\n\${n}]\`:"]",s}(o,c):o&&"object"==typeof o?function(n,a){if("function"==typeof n.toJSON)return z(n.toJSON(),e,r,void 0);const o=Array.isArray(e)?e.map(String):Object.keys(n);if(0===o.length)return"{}";const c=i?a+i:void 0;let u=!0,l=i?"{\\n":"{";for(const r of o){const a="function"==typeof e?e.call(n,r,n[r]):n[r];if(s(0,a)){u?u=!1:l+=i?",\\n":",";const e=JSON.stringify(r);l+=i?\`\${c+e}: \`:\`\${e}:\`,l+=t(a,c)}}return l+=i?\`\\n\${a}}\`:"}",l}(o,c):void 0}("function"==typeof e?e.call({"":t},"",t):t,"");function s(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}}},3075(t,e,r){"use strict";function n(t){let e=t.length;for(;--e>=0;)t[e]=0}r.d(e,{Aq:()=>Ar,ZI:()=>Er});const i=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);n(c);const u=new Array(60);n(u);const l=new Array(512);n(l);const d=new Array(256);n(d);const h=new Array(29);n(h);const f=new Array(30);function p(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let y,g,m;function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(f);const _=t=>t<256?l[t]:l[256+(t>>>7)],w=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},v=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},E=(t,e,r)=>{v(t,r[2*e],r[2*e+1])},A=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},T=(t,e,r)=>{const n=new Array(16);let i,a,s=0;for(i=1;i<=15;i++)s=s+r[i-1]<<1,n[i]=s;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=A(n[e]++,e))}},S=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},I=t=>{t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=(t,e,r,n)=>{const i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]},x=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&k(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!k(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},B=(t,e,r)=>{let n,s,o,c,u=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+u++],n+=(255&t.pending_buf[t.sym_buf+u++])<<8,s=t.pending_buf[t.sym_buf+u++],0===n?E(t,s,e):(o=d[s],E(t,o+256+1,e),c=i[o],0!==c&&(s-=h[o],v(t,s,c)),n--,o=_(n),E(t,o,r),c=a[o],0!==c&&(n-=f[o],v(t,n,c)))}while(u<t.sym_next);E(t,256,e)},C=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,o,c,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)0!==r[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,r[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[2*c+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)x(t,r,s);c=a;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],x(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[2*c]=r[2*s]+r[2*o],t.depth[c]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[2*s+1]=r[2*o+1]=c,t.heap[1]=c++,x(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,l,d,h,f,p,y=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],h=r[2*r[2*l+1]+1]+1,h>c&&(h=c,y++),r[2*l+1]=h,l>n||(t.bl_count[h]++,f=0,l>=o&&(f=s[l-o]),p=r[2*l],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(i[2*l+1]+f)));if(0!==y){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,y-=2}while(y>0);for(h=c;0!==h;h--)for(l=t.bl_count[h];0!==l;)d=t.heap[--u],d>n||(r[2*d+1]!==h&&(t.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),l--)}})(t,e),T(r,u,t.bl_count)},R=(t,e,r)=>{let n,i,a=-1,s=e[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++o<c&&i===s||(o<u?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))},O=(t,e,r)=>{let n,i,a=-1,s=e[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++o<c&&i===s)){if(o<u)do{E(t,i,t.bl_tree)}while(0!==--o);else 0!==i?(i!==a&&(E(t,i,t.bl_tree),o--),E(t,16,t.bl_tree),v(t,o-3,2)):o<=10?(E(t,17,t.bl_tree),v(t,o-3,3)):(E(t,18,t.bl_tree),v(t,o-11,7));o=0,a=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}};let N=!1;const D=(t,e,r,n)=>{v(t,0+(n?1:0),3),I(t),w(t,r),w(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r};var P={_tr_init:t=>{N||((()=>{let t,e,r,n,o;const b=new Array(16);for(r=0,n=0;n<28;n++)for(h[n]=r,t=0;t<1<<i[n];t++)d[r++]=n;for(d[r-1]=n,o=0,n=0;n<16;n++)for(f[n]=o,t=0;t<1<<a[n];t++)l[o++]=n;for(o>>=7;n<30;n++)for(f[n]=o<<7,t=0;t<1<<a[n]-7;t++)l[256+o++]=n;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,b[8]++;for(;t<=255;)c[2*t+1]=9,t++,b[9]++;for(;t<=279;)c[2*t+1]=7,t++,b[7]++;for(;t<=287;)c[2*t+1]=8,t++,b[8]++;for(T(c,287,b),t=0;t<30;t++)u[2*t+1]=5,u[2*t]=A(t,5);y=new p(c,i,257,286,15),g=new p(u,a,0,30,15),m=new p(new Array(0),s,0,19,7)})(),N=!0),t.l_desc=new b(t.dyn_ltree,y),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,m),t.bi_buf=0,t.bi_valid=0,S(t)},_tr_stored_block:D,_tr_flush_block:(t,e,r,n)=>{let i,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),C(t,t.l_desc),C(t,t.d_desc),s=(t=>{let e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?D(t,e,r,n):4===t.strategy||a===i?(v(t,2+(n?1:0),3),B(t,c,u)):(v(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(v(t,e-257,5),v(t,r-1,5),v(t,n-4,4),i=0;i<n;i++)v(t,t.bl_tree[2*o[i]+1],3);O(t,t.dyn_ltree,e-1),O(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),B(t,t.dyn_ltree,t.dyn_dtree)),S(t),n&&I(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(d[r]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{v(t,2,3),E(t,256,c),(t=>{16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},L=(t,e,r,n)=>{let i=65535&t,a=t>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{i=i+e[n++]|0,a=a+i|0}while(--s);i%=65521,a%=65521}return i|a<<16};const U=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var F=(t,e,r,n)=>{const i=U,a=n+r;t^=-1;for(let r=n;r<a;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:M,_tr_stored_block:\$,_tr_flush_block:j,_tr_tally:q,_tr_align:z}=P,{Z_NO_FLUSH:G,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:K,Z_FINISH:W,Z_BLOCK:Z,Z_OK:X,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:tt,Z_BUF_ERROR:et,Z_DEFAULT_COMPRESSION:rt,Z_FILTERED:nt,Z_HUFFMAN_ONLY:it,Z_RLE:at,Z_FIXED:st,Z_DEFAULT_STRATEGY:ot,Z_UNKNOWN:ct,Z_DEFLATED:ut}=H,lt=258,dt=262,ht=42,ft=113,pt=666,yt=(t,e)=>(t.msg=V[e],e),gt=t=>2*t-(t>4?9:0),mt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},bt=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=i?r-i:0}while(--e);e=i,n=e;do{r=t.prev[--n],t.prev[n]=r>=i?r-i:0}while(--e)};let _t=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const wt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},vt=(t,e)=>{j(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,wt(t.strm)},Et=(t,e)=>{t.pending_buf[t.pending++]=e},At=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Tt=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=L(t.adler,e,i,r):2===t.state.wrap&&(t.adler=F(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},St=(t,e)=>{let r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-dt?t.strstart-(t.w_size-dt):0,u=t.window,l=t.w_mask,d=t.prev,h=t.strstart+lt;let f=u[a+s-1],p=u[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(r=e,u[r+s]===p&&u[r+s-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<h);if(n=lt-(h-a),a=h-lt,n>s){if(t.match_start=e,s=n,n>=o)break;f=u[a+s-1],p=u[a+s]}}}while((e=d[e&l])>c&&0!==--i);return s<=t.lookahead?s:t.lookahead},It=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-dt)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),bt(t),n+=e),0===t.strm.avail_in)break;if(r=Tt(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=_t(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<dt&&0!==t.strm.avail_in)},kt=(t,e)=>{let r,n,i,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,o=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>i&&(r=i),r<a&&(0===r&&e!==W||e===G||r!==n+t.strm.avail_in))break;s=e===W&&r===n+t.strm.avail_in?1:0,\$(t,0,0,s),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,wt(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(Tt(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===s);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:e!==G&&e!==W&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(Tt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,a=i>t.w_size?t.w_size:i,n=t.strstart-t.block_start,(n>=a||(n||e===W)&&e!==G&&0===t.strm.avail_in&&n<=i)&&(r=n>i?i:n,s=e===W&&0===t.strm.avail_in&&r===n?1:0,\$(t,t.block_start,r,s),t.block_start+=r,wt(t.strm)),s?3:1)},xt=(t,e)=>{let r,n;for(;;){if(t.lookahead<dt){if(It(t),t.lookahead<dt&&e===G)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-dt&&(t.match_length=St(t,r)),t.match_length>=3)if(n=q(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else n=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===W?(vt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vt(t,!1),0===t.strm.avail_out)?1:2},Bt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<dt){if(It(t),t.lookahead<dt&&e===G)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-dt&&(t.match_length=St(t,r),t.match_length<=5&&(t.strategy===nt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=q(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(vt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=q(t,0,t.window[t.strstart-1]),n&&vt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=q(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===W?(vt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vt(t,!1),0===t.strm.avail_out)?1:2};function Ct(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Rt=[new Ct(0,0,0,0,kt),new Ct(4,4,8,4,xt),new Ct(4,5,16,8,xt),new Ct(4,6,32,32,xt),new Ct(4,4,16,16,Bt),new Ct(8,16,32,32,Bt),new Ct(8,16,128,128,Bt),new Ct(8,32,128,256,Bt),new Ct(32,128,258,1024,Bt),new Ct(32,258,258,4096,Bt)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==ht&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ft&&e.status!==pt?1:0},Dt=t=>{if(Nt(t))return yt(t,Q);t.total_in=t.total_out=0,t.data_type=ct;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?ht:ft,t.adler=2===e.wrap?0:1,e.last_flush=-2,M(e),X},Pt=t=>{const e=Dt(t);var r;return e===X&&((r=t.state).window_size=2*r.w_size,mt(r.head),r.max_lazy_match=Rt[r.level].max_lazy,r.good_match=Rt[r.level].good_length,r.nice_match=Rt[r.level].nice_length,r.max_chain_length=Rt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Lt=(t,e,r,n,i,a)=>{if(!t)return Q;let s=1;if(e===rt&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||r!==ut||n<8||n>15||e<0||e>9||a<0||a>st||8===n&&1!==s)return yt(t,Q);8===n&&(n=9);const o=new Ot;return t.state=o,o.strm=t,o.status=ht,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=r,Pt(t)};var Ut=Lt,Ft=(t,e)=>Nt(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,X),Vt=(t,e)=>{if(Nt(t)||e>Z||e<0)return t?yt(t,Q):Q;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===pt&&e!==W)return yt(t,0===t.avail_out?et:Q);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(wt(t),0===t.avail_out)return r.last_flush=-1,X}else if(0===t.avail_in&&gt(e)<=gt(n)&&e!==W)return yt(t,et);if(r.status===pt&&0!==t.avail_in)return yt(t,et);if(r.status===ht&&0===r.wrap&&(r.status=ft),r.status===ht){let e=ut+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=it||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,At(r,e),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1,r.status=ft,wt(t),0!==r.pending)return r.last_flush=-1,X}if(57===r.status)if(t.adler=0,Et(r,31),Et(r,139),Et(r,8),r.gzhead)Et(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Et(r,255&r.gzhead.time),Et(r,r.gzhead.time>>8&255),Et(r,r.gzhead.time>>16&255),Et(r,r.gzhead.time>>24&255),Et(r,9===r.level?2:r.strategy>=it||r.level<2?4:0),Et(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Et(r,255&r.gzhead.extra.length),Et(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=F(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Et(r,0),Et(r,0),Et(r,0),Et(r,0),Et(r,0),Et(r,9===r.level?2:r.strategy>=it||r.level<2?4:0),Et(r,3),r.status=ft,wt(t),0!==r.pending)return r.last_flush=-1,X;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=F(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=i,wt(t),0!==r.pending)return r.last_flush=-1,X;e=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=F(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=F(t.adler,r.pending_buf,r.pending-n,n)),wt(t),0!==r.pending)return r.last_flush=-1,X;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Et(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=F(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=F(t.adler,r.pending_buf,r.pending-n,n)),wt(t),0!==r.pending)return r.last_flush=-1,X;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Et(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=F(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(wt(t),0!==r.pending))return r.last_flush=-1,X;Et(r,255&t.adler),Et(r,t.adler>>8&255),t.adler=0}if(r.status=ft,wt(t),0!==r.pending)return r.last_flush=-1,X}if(0!==t.avail_in||0!==r.lookahead||e!==G&&r.status!==pt){let n=0===r.level?kt(r,e):r.strategy===it?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(It(t),0===t.lookahead)){if(e===G)return 1;break}if(t.match_length=0,r=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===W?(vt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===at?((t,e)=>{let r,n,i,a;const s=t.window;for(;;){if(t.lookahead<=lt){if(It(t),t.lookahead<=lt&&e===G)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+lt;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=lt-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=q(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(vt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===W?(vt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(vt(t,!1),0===t.strm.avail_out)?1:2})(r,e):Rt[r.level].func(r,e);if(3!==n&&4!==n||(r.status=pt),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),X;if(2===n&&(e===Y?z(r):e!==Z&&(\$(r,0,0,!1),e===K&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),wt(t),0===t.avail_out))return r.last_flush=-1,X}return e!==W?X:r.wrap<=0?J:(2===r.wrap?(Et(r,255&t.adler),Et(r,t.adler>>8&255),Et(r,t.adler>>16&255),Et(r,t.adler>>24&255),Et(r,255&t.total_in),Et(r,t.total_in>>8&255),Et(r,t.total_in>>16&255),Et(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),wt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?X:J)},Ht=t=>{if(Nt(t))return Q;const e=t.state.status;return t.state=null,e===ft?yt(t,tt):X},Mt=(t,e)=>{let r=e.length;if(Nt(t))return Q;const n=t.state,i=n.wrap;if(2===i||1===i&&n.status!==ht||n.lookahead)return Q;if(1===i&&(t.adler=L(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,It(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=_t(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,It(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,n.wrap=i,X};const \$t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var jt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)\$t(r,e)&&(t[e]=r[e])}}return t},qt=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){zt=!1}const Gt=new Uint8Array(256);for(let t=0;t<256;t++)Gt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Gt[254]=Gt[254]=1;var Yt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},Kt=(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const a=new Array(2*r);for(i=0,n=0;n<r;){let e=t[n++];if(e<128){a[i++]=e;continue}let s=Gt[e];if(s>4)a[i++]=65533,n+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&n<r;)e=e<<6|63&t[n++],s--;s>1?a[i++]=65533:e<65536?a[i++]=e:(e-=65536,a[i++]=55296|e>>10&1023,a[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(a,i)},Wt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+Gt[t[r]]>e?r:e},Zt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xt=Object.prototype.toString,{Z_NO_FLUSH:Jt,Z_SYNC_FLUSH:Qt,Z_FULL_FLUSH:te,Z_FINISH:ee,Z_OK:re,Z_STREAM_END:ne,Z_DEFAULT_COMPRESSION:ie,Z_DEFAULT_STRATEGY:ae,Z_DEFLATED:se}=H;function oe(t){this.options=jt({level:ie,method:se,chunkSize:16384,windowBits:15,memLevel:8,strategy:ae},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zt,this.strm.avail_out=0;let r=Ut(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==re)throw new Error(V[r]);if(e.header&&Ft(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Yt(e.dictionary):"[object ArrayBuffer]"===Xt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Mt(this.strm,t),r!==re)throw new Error(V[r]);this._dict_set=!0}}function ce(t,e){const r=new oe(e);if(r.push(t,!0),r.err)throw r.msg||V[r.err];return r.result}oe.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?ee:Jt,"string"==typeof t?r.input=Yt(t):"[object ArrayBuffer]"===Xt.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Qt||a===te)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Vt(r,a),i===ne)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ht(this.strm),this.onEnd(i),this.ended=!0,i===re;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},oe.prototype.onData=function(t){this.chunks.push(t)},oe.prototype.onEnd=function(t){t===re&&(this.result=qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ue={Deflate:oe,deflate:ce,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ce(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ce(t,e)},constants:H};const le=16209;var de=function(t,e){let r,n,i,a,s,o,c,u,l,d,h,f,p,y,g,m,b,_,w,v,E,A,T,S;const I=t.state;r=t.next_in,T=t.input,n=r+(t.avail_in-5),i=t.next_out,S=t.output,a=i-(e-t.avail_out),s=i+(t.avail_out-257),o=I.dmax,c=I.wsize,u=I.whave,l=I.wnext,d=I.window,h=I.hold,f=I.bits,p=I.lencode,y=I.distcode,g=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{f<15&&(h+=T[r++]<<f,f+=8,h+=T[r++]<<f,f+=8),b=p[h&g];e:for(;;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,0===_)S[i++]=65535&b;else{if(!(16&_)){if(64&_){if(32&_){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=le;break t}b=p[(65535&b)+(h&(1<<_)-1)];continue e}for(w=65535&b,_&=15,_&&(f<_&&(h+=T[r++]<<f,f+=8),w+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=T[r++]<<f,f+=8,h+=T[r++]<<f,f+=8),b=y[h&m];;){if(_=b>>>24,h>>>=_,f-=_,_=b>>>16&255,16&_){if(v=65535&b,_&=15,f<_&&(h+=T[r++]<<f,f+=8,f<_&&(h+=T[r++]<<f,f+=8)),v+=h&(1<<_)-1,v>o){t.msg="invalid distance too far back",I.mode=le;break t}if(h>>>=_,f-=_,_=i-a,v>_){if(_=v-_,_>u&&I.sane){t.msg="invalid distance too far back",I.mode=le;break t}if(E=0,A=d,0===l){if(E+=c-_,_<w){w-=_;do{S[i++]=d[E++]}while(--_);E=i-v,A=S}}else if(l<_){if(E+=c+l-_,_-=l,_<w){w-=_;do{S[i++]=d[E++]}while(--_);if(E=0,l<w){_=l,w-=_;do{S[i++]=d[E++]}while(--_);E=i-v,A=S}}}else if(E+=l-_,_<w){w-=_;do{S[i++]=d[E++]}while(--_);E=i-v,A=S}for(;w>2;)S[i++]=A[E++],S[i++]=A[E++],S[i++]=A[E++],w-=3;w&&(S[i++]=A[E++],w>1&&(S[i++]=A[E++]))}else{E=i-v;do{S[i++]=S[E++],S[i++]=S[E++],S[i++]=S[E++],w-=3}while(w>2);w&&(S[i++]=S[E++],w>1&&(S[i++]=S[E++]))}break}if(64&_){t.msg="invalid distance code",I.mode=le;break t}b=y[(65535&b)+(h&(1<<_)-1)]}}break}}while(r<n&&i<s);w=f>>3,r-=w,f-=w<<3,h&=(1<<f)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<s?s-i+257:257-(i-s),I.hold=h,I.bits=f};const he=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ye=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ge=(t,e,r,n,i,a,s,o)=>{const c=o.bits;let u,l,d,h,f,p,y=0,g=0,m=0,b=0,_=0,w=0,v=0,E=0,A=0,T=0,S=null;const I=new Uint16Array(16),k=new Uint16Array(16);let x,B,C,R=null;for(y=0;y<=15;y++)I[y]=0;for(g=0;g<n;g++)I[e[r+g]]++;for(_=c,b=15;b>=1&&0===I[b];b--);if(_>b&&(_=b),0===b)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(m=1;m<b&&0===I[m];m++);for(_<m&&(_=m),E=1,y=1;y<=15;y++)if(E<<=1,E-=I[y],E<0)return-1;if(E>0&&(0===t||1!==b))return-1;for(k[1]=0,y=1;y<15;y++)k[y+1]=k[y]+I[y];for(g=0;g<n;g++)0!==e[r+g]&&(s[k[e[r+g]]++]=g);if(0===t?(S=R=s,p=20):1===t?(S=he,R=fe,p=257):(S=pe,R=ye,p=0),T=0,g=0,y=m,f=a,w=_,v=0,d=-1,A=1<<_,h=A-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){x=y-v,s[g]+1<p?(B=0,C=s[g]):s[g]>=p?(B=R[s[g]-p],C=S[s[g]-p]):(B=96,C=0),u=1<<y-v,l=1<<w,m=l;do{l-=u,i[f+(T>>v)+l]=x<<24|B<<16|C}while(0!==l);for(u=1<<y-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,g++,0===--I[y]){if(y===b)break;y=e[r+s[g]]}if(y>_&&(T&h)!==d){for(0===v&&(v=_),f+=m,w=y-v,E=1<<w;w+v<b&&(E-=I[w+v],!(E<=0));)w++,E<<=1;if(A+=1<<w,1===t&&A>852||2===t&&A>592)return 1;d=T&h,i[d]=_<<24|w<<16|f-a}}return 0!==T&&(i[f+T]=y-v<<24|64<<16),o.bits=_,0};const{Z_FINISH:me,Z_BLOCK:be,Z_TREES:_e,Z_OK:we,Z_STREAM_END:ve,Z_NEED_DICT:Ee,Z_STREAM_ERROR:Ae,Z_DATA_ERROR:Te,Z_MEM_ERROR:Se,Z_BUF_ERROR:Ie,Z_DEFLATED:ke}=H,xe=16180,Be=16190,Ce=16191,Re=16192,Oe=16194,Ne=16199,De=16200,Pe=16206,Le=16209,Ue=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Fe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ve=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<xe||e.mode>16211?1:0},He=t=>{if(Ve(t))return Ae;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=xe,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,we},Me=t=>{if(Ve(t))return Ae;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,He(t)},\$e=(t,e)=>{let r;if(Ve(t))return Ae;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ae:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Me(t))},je=(t,e)=>{if(!t)return Ae;const r=new Fe;t.state=r,r.strm=t,r.window=null,r.mode=xe;const n=\$e(t,e);return n!==we&&(t.state=null),n};let qe,ze,Ge=!0;const Ye=t=>{if(Ge){qe=new Int32Array(512),ze=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ge(1,t.lens,0,288,qe,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ge(2,t.lens,0,32,ze,0,t.work,{bits:5}),Ge=!1}t.lencode=qe,t.lenbits=9,t.distcode=ze,t.distbits=5},Ke=(t,e,r,n)=>{let i;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var We=Me,Ze=je,Xe=(t,e)=>{let r,n,i,a,s,o,c,u,l,d,h,f,p,y,g,m,b,_,w,v,E,A,T=0;const S=new Uint8Array(4);let I,k;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ve(t)||!t.output||!t.input&&0!==t.avail_in)return Ae;r=t.state,r.mode===Ce&&(r.mode=Re),s=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,u=r.hold,l=r.bits,d=o,h=c,A=we;t:for(;;)switch(r.mode){case xe:if(0===r.wrap){r.mode=Re;break}for(;l<16;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=F(r.check,S,2,0),u=0,l=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Le;break}if((15&u)!==ke){t.msg="unknown compression method",r.mode=Le;break}if(u>>>=4,l-=4,E=8+(15&u),0===r.wbits&&(r.wbits=E),E>15||E>r.wbits){t.msg="invalid window size",r.mode=Le;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&u?16189:Ce,u=0,l=0;break;case 16181:for(;l<16;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==ke){t.msg="unknown compression method",r.mode=Le;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Le;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=F(r.check,S,2,0)),u=0,l=0,r.mode=16182;case 16182:for(;l<32;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=F(r.check,S,4,0)),u=0,l=0,r.mode=16183;case 16183:for(;l<16;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=F(r.check,S,2,0)),u=0,l=0,r.mode=16184;case 16184:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=F(r.check,S,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>o&&(f=o),f&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),E)),512&r.flags&&4&r.wrap&&(r.check=F(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===o)break t;f=0;do{E=n[a+f++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=F(r.check,n,f,a)),o-=f,a+=f,E)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===o)break t;f=0;do{E=n[a+f++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&f<o);if(512&r.flags&&4&r.wrap&&(r.check=F(r.check,n,f,a)),o-=f,a+=f,E)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(4&r.wrap&&u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Le;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Ce;break;case 16189:for(;l<32;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}t.adler=r.check=Ue(u),u=0,l=0,r.mode=Be;case Be:if(0===r.havedict)return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=l,Ee;t.adler=r.check=1,r.mode=Ce;case Ce:if(e===be||e===_e)break t;case Re:if(r.last){u>>>=7&l,l-=7&l,r.mode=Pe;break}for(;l<3;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=16193;break;case 1:if(Ye(r),r.mode=Ne,e===_e){u>>>=2,l-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=Le}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Le;break}if(r.length=65535&u,u=0,l=0,r.mode=Oe,e===_e)break t;case Oe:r.mode=16195;case 16195:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),0===f)break t;i.set(n.subarray(a,a+f),s),o-=f,a+=f,c-=f,s+=f,r.length-=f;break}r.mode=Ce;break;case 16196:for(;l<14;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Le;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.lens[x[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[x[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},A=ge(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,A){t.msg="invalid code lengths set",r.mode=Le;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;T=r.lencode[u&(1<<r.lenbits)-1],g=T>>>24,m=T>>>16&255,b=65535&T,!(g<=l);){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(b<16)u>>>=g,l-=g,r.lens[r.have++]=b;else{if(16===b){for(k=g+2;l<k;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(u>>>=g,l-=g,0===r.have){t.msg="invalid bit length repeat",r.mode=Le;break}E=r.lens[r.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===b){for(k=g+3;l<k;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}u>>>=g,l-=g,E=0,f=3+(7&u),u>>>=3,l-=3}else{for(k=g+7;l<k;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}u>>>=g,l-=g,E=0,f=11+(127&u),u>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Le;break}for(;f--;)r.lens[r.have++]=E}}if(r.mode===Le)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Le;break}if(r.lenbits=9,I={bits:r.lenbits},A=ge(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,A){t.msg="invalid literal/lengths set",r.mode=Le;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},A=ge(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,A){t.msg="invalid distances set",r.mode=Le;break}if(r.mode=Ne,e===_e)break t;case Ne:r.mode=De;case De:if(o>=6&&c>=258){t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=l,de(t,h),s=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,u=r.hold,l=r.bits,r.mode===Ce&&(r.back=-1);break}for(r.back=0;T=r.lencode[u&(1<<r.lenbits)-1],g=T>>>24,m=T>>>16&255,b=65535&T,!(g<=l);){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(m&&!(240&m)){for(_=g,w=m,v=b;T=r.lencode[v+((u&(1<<_+w)-1)>>_)],g=T>>>24,m=T>>>16&255,b=65535&T,!(_+g<=l);){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}u>>>=_,l-=_,r.back+=_}if(u>>>=g,l-=g,r.back+=g,r.length=b,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=Ce;break}if(64&m){t.msg="invalid literal/length code",r.mode=Le;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(k=r.extra;l<k;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;T=r.distcode[u&(1<<r.distbits)-1],g=T>>>24,m=T>>>16&255,b=65535&T,!(g<=l);){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(!(240&m)){for(_=g,w=m,v=b;T=r.distcode[v+((u&(1<<_+w)-1)>>_)],g=T>>>24,m=T>>>16&255,b=65535&T,!(_+g<=l);){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}u>>>=_,l-=_,r.back+=_}if(u>>>=g,l-=g,r.back+=g,64&m){t.msg="invalid distance code",r.mode=Le;break}r.offset=b,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(k=r.extra;l<k;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Le;break}r.mode=16204;case 16204:if(0===c)break t;if(f=h-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Le;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=i,p=s-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{i[s++]=y[p++]}while(--f);0===r.length&&(r.mode=De);break;case 16205:if(0===c)break t;i[s++]=r.length,c--,r.mode=De;break;case Pe:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=n[a++]<<l,l+=8}if(h-=c,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?F(r.check,i,h,s-h):L(r.check,i,h,s-h)),h=c,4&r.wrap&&(r.flags?u:Ue(u))!==r.check){t.msg="incorrect data check",r.mode=Le;break}u=0,l=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=n[a++]<<l,l+=8}if(4&r.wrap&&u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Le;break}u=0,l=0}r.mode=16208;case 16208:A=ve;break t;case Le:A=Te;break t;case 16210:return Se;default:return Ae}return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||h!==t.avail_out&&r.mode<Le&&(r.mode<Pe||e!==me))&&Ke(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,4&r.wrap&&h&&(t.adler=r.check=r.flags?F(r.check,i,h,t.next_out-h):L(r.check,i,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Ce?128:0)+(r.mode===Ne||r.mode===Oe?256:0),(0===d&&0===h||e===me)&&A===we&&(A=Ie),A},Je=t=>{if(Ve(t))return Ae;let e=t.state;return e.window&&(e.window=null),t.state=null,we},Qe=(t,e)=>{if(Ve(t))return Ae;const r=t.state;return 2&r.wrap?(r.head=e,e.done=!1,we):Ae},tr=(t,e)=>{const r=e.length;let n,i,a;return Ve(t)?Ae:(n=t.state,0!==n.wrap&&n.mode!==Be?Ae:n.mode===Be&&(i=1,i=L(i,e,r,0),i!==n.check)?Te:(a=Ke(t,e,r,r),a?(n.mode=16210,Se):(n.havedict=1,we)))},er=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const rr=Object.prototype.toString,{Z_NO_FLUSH:nr,Z_FINISH:ir,Z_OK:ar,Z_STREAM_END:sr,Z_NEED_DICT:or,Z_STREAM_ERROR:cr,Z_DATA_ERROR:ur,Z_MEM_ERROR:lr}=H;function dr(t){this.options=jt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zt,this.strm.avail_out=0;let r=Ze(this.strm,e.windowBits);if(r!==ar)throw new Error(V[r]);if(this.header=new er,Qe(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Yt(e.dictionary):"[object ArrayBuffer]"===rr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=tr(this.strm,e.dictionary),r!==ar)))throw new Error(V[r])}function hr(t,e){const r=new dr(e);if(r.push(t),r.err)throw r.msg||V[r.err];return r.result}dr.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ir:nr,"[object ArrayBuffer]"===rr.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Xe(r,s),a===or&&i&&(a=tr(r,i),a===ar?a=Xe(r,s):a===ur&&(a=or));r.avail_in>0&&a===sr&&r.state.wrap>0&&0!==t[r.next_in];)We(r),a=Xe(r,s);switch(a){case cr:case ur:case or:case lr:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(0===r.avail_out||a===sr))if("string"===this.options.to){let t=Wt(r.output,r.next_out),e=r.next_out-t,i=Kt(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==ar||0!==o){if(a===sr)return a=Je(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},dr.prototype.onData=function(t){this.chunks.push(t)},dr.prototype.onEnd=function(t){t===ar&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=qt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var fr={Inflate:dr,inflate:hr,inflateRaw:function(t,e){return(e=e||{}).raw=!0,hr(t,e)},ungzip:hr,constants:H};const{Deflate:pr,deflate:yr,deflateRaw:gr,gzip:mr}=ue,{Inflate:br,inflate:_r,inflateRaw:wr,ungzip:vr}=fr;var Er=mr,Ar=vr}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=r(34),e=r(9321),n=r(4302),i=r(1809),a=r(591),s=r(1605);function o(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function c(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every(t=>"string"==typeof t):e.every(t=>Number.isSafeInteger(t))))}function u(t){if("function"!=typeof t)throw new Error("function expected");return!0}function l(t,e){if("string"!=typeof e)throw new Error(\`\${t}: string expected\`);return!0}function d(t){if(!Number.isSafeInteger(t))throw new Error(\`invalid integer: \${t}\`)}function h(t){if(!Array.isArray(t))throw new Error("array expected")}function f(t,e){if(!c(!0,e))throw new Error(\`\${t}: array of strings expected\`)}function p(t,e){if(!c(!1,e))throw new Error(\`\${t}: array of numbers expected\`)}function y(...t){const e=t=>t,r=(t,e)=>r=>t(e(r));return{encode:t.map(t=>t.encode).reduceRight(r,e),decode:t.map(t=>t.decode).reduce(r,e)}}function g(t){const e="string"==typeof t?t.split(""):t,r=e.length;f("alphabet",e);const n=new Map(e.map((t,e)=>[t,e]));return{encode:n=>(h(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(\`alphabet.encode: digit index outside alphabet "\${n}". Allowed: \${t}\`);return e[n]})),decode:e=>(h(e),e.map(e=>{l("alphabet.decode",e);const r=n.get(e);if(void 0===r)throw new Error(\`Unknown letter: "\${e}". Allowed: \${t}\`);return r}))}}function m(t=""){return l("join",t),{encode:e=>(f("join.decode",e),e.join(t)),decode:e=>(l("join.decode",e),e.split(t))}}function b(t,e="="){return d(t),l("padding",e),{encode(r){for(f("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){f("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function _(t){return u(t),{encode:t=>t,decode:e=>t(e)}}function w(t,e,r){if(e<2)throw new Error(\`convertRadix: invalid from=\${e}, base cannot be less than 2\`);if(r<2)throw new Error(\`convertRadix: invalid to=\${r}, base cannot be less than 2\`);if(h(t),!t.length)return[];let n=0;const i=[],a=Array.from(t,t=>{if(d(t),t<0||t>=e)throw new Error(\`invalid integer: \${t}\`);return t}),s=a.length;for(;;){let t=0,o=!0;for(let i=n;i<s;i++){const s=a[i],c=e*t,u=c+s;if(!Number.isSafeInteger(u)||c/e!==t||u-s!==c)throw new Error("convertRadix: carry overflow");const l=u/r;t=u%r;const d=Math.floor(l);if(a[i]=d,!Number.isSafeInteger(d)||d*r+t!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(t),o)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const v=(t,e)=>0===e?t:v(e,t%e),E=(t,e)=>t+(e-v(t,e)),A=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function T(t,e,r,n){if(h(t),e<=0||e>32)throw new Error(\`convertRadix2: wrong from=\${e}\`);if(r<=0||r>32)throw new Error(\`convertRadix2: wrong to=\${r}\`);if(E(e,r)>32)throw new Error(\`convertRadix2: carry overflow from=\${e} to=\${r} carryBits=\${E(e,r)}\`);let i=0,a=0;const s=A[e],o=A[r]-1,c=[];for(const n of t){if(d(n),n>=s)throw new Error(\`convertRadix2: invalid data word=\${n} from=\${e}\`);if(i=i<<e|n,a+e>32)throw new Error(\`convertRadix2: carry overflow pos=\${a} from=\${e}\`);for(a+=e;a>=r;a-=r)c.push((i>>a-r&o)>>>0);const t=A[a];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<r-a&o,!n&&a>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(\`Non-zero padding: \${i}\`);return n&&a>0&&c.push(i>>>0),c}function S(t,e=!1){if(d(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(E(8,t)>32||E(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!o(r))throw new Error("radix2.encode input should be Uint8Array");return T(Array.from(r),8,t,!e)},decode:r=>(p("radix2.decode",r),Uint8Array.from(T(r,t,8,e)))}}function I(t){return u(t),function(...e){try{return t.apply(null,e)}catch(t){}}}y(S(4),g("0123456789ABCDEF"),m("")),y(S(5),g("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),b(5),m(""));const k=(y(S(5),g("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m("")),y(S(5),g("0123456789ABCDEFGHIJKLMNOPQRSTUV"),b(5),m("")),y(S(5),g("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m("")),y(S(5),g("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),m(""),_(t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),y(S(6),g("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),b(6),m(""))),x=(y(S(6),g("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m("")),y(S(6),g("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),b(6),m("")),y(S(6),g("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m("")),t=>{return y((d(e=58),{encode:t=>{if(!o(t))throw new Error("radix.encode input should be Uint8Array");return w(Array.from(t),256,e)},decode:t=>(p("radix.decode",t),Uint8Array.from(w(t,e,256)))}),g(t),m(""));var e}),B=(x("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),x("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),x("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),y(g("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),m(""))),C=[996825010,642813549,513874426,1027748829,705979059];function R(t){const e=t>>25;let r=(33554431&t)<<5;for(let t=0;t<C.length;t++)1==(e>>t&1)&&(r^=C[t]);return r}function O(t,e,r=1){const n=t.length;let i=1;for(let e=0;e<n;e++){const r=t.charCodeAt(e);if(r<33||r>126)throw new Error(\`Invalid prefix (\${t})\`);i=R(i)^r>>5}i=R(i);for(let e=0;e<n;e++)i=R(i)^31&t.charCodeAt(e);for(let t of e)i=R(i)^t;for(let t=0;t<6;t++)i=R(i);return i^=r,B.encode(T([i%A[30]],30,5,!1))}function N(t){const e="bech32"===t?1:734539939,r=S(5),n=r.decode,i=r.encode,a=I(n);function s(t,r,n=90){l("bech32.encode prefix",t),o(r)&&(r=Array.from(r)),p("bech32.encode",r);const i=t.length;if(0===i)throw new TypeError(\`Invalid prefix length \${i}\`);const a=i+7+r.length;if(!1!==n&&a>n)throw new TypeError(\`Length \${a} exceeds limit \${n}\`);const s=t.toLowerCase(),c=O(s,r,e);return\`\${s}1\${B.encode(r)}\${c}\`}function c(t,r=90){l("bech32.decode input",t);const n=t.length;if(n<8||!1!==r&&n>r)throw new TypeError(\`invalid string length: \${n} (\${t}). Expected (8..\${r})\`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const a=i.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const s=i.slice(0,a),o=i.slice(a+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const c=B.decode(o).slice(0,-6),u=O(s,c,e);if(!o.endsWith(u))throw new Error(\`Invalid checksum in \${t}: expected "\${u}"\`);return{prefix:s,words:c}}return{encode:s,decode:c,encodeFromBytes:function(t,e){return s(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:r}=c(t,!1);return{prefix:e,words:r,bytes:n(r)}},decodeUnsafe:I(c),fromWords:n,fromWordsUnsafe:a,toWords:i}}N("bech32"),N("bech32m");y(S(4),g("0123456789abcdef"),m(""),_(t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(\`hex.decode: expected string, got \${typeof t} with length \${t.length}\`);return t.toLowerCase()}));var D=r(4123),P=r(8293);function L(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function U(t,...e){if(!((r=t)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function F(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function V(t,e){U(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const H=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),M=(t,e)=>t<<32-e|t>>>e,\$=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),j=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function q(t){for(let e=0;e<t.length;e++)t[e]=j(t[e])}function z(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),U(t),t}class G{clone(){return this._cloneInto()}}function Y(t){const e=e=>t().update(z(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}const K=(t,e,r)=>t&e^~t&r,W=(t,e,r)=>t&e^t&r^e&r;class Z extends G{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=H(this.buffer)}update(t){F(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=z(t)).length;for(let a=0;a<i;){const s=Math.min(n-this.pos,i-a);if(s===n){const e=H(t);for(;n<=i-a;a+=n)this.process(e,a);continue}r.set(t.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){F(this),V(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),s=Number(r>>i&a),o=Number(r&a),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=H(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=a,n%e&&t.buffer.set(r),t}}const X=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Q=new Uint32Array(64);class tt extends Z{constructor(){super(64,32,8,!1),this.A=0|J[0],this.B=0|J[1],this.C=0|J[2],this.D=0|J[3],this.E=0|J[4],this.F=0|J[5],this.G=0|J[6],this.H=0|J[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[t,e,r,n,i,a,s,o]}set(t,e,r,n,i,a,s,o){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(t,e){for(let r=0;r<16;r++,e+=4)Q[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Q[t-15],r=Q[t-2],n=M(e,7)^M(e,18)^e>>>3,i=M(r,17)^M(r,19)^r>>>10;Q[t]=i+Q[t-7]+n+Q[t-16]|0}let{A:r,B:n,C:i,D:a,E:s,F:o,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(M(s,6)^M(s,11)^M(s,25))+K(s,o,c)+X[t]+Q[t]|0,l=(M(r,2)^M(r,13)^M(r,22))+W(r,n,i)|0;u=c,c=o,o=s,s=a+e|0,a=i,i=n,n=r,r=e+l|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,a,s,o,c,u)}roundClean(){Q.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const et=Y(()=>new tt);var rt=r(235);const nt=BigInt(2**32-1),it=BigInt(32);function at(t,e=!1){return e?{h:Number(t&nt),l:Number(t>>it&nt)}:{h:0|Number(t>>it&nt),l:0|Number(t&nt)}}function st(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:s}=at(t[i],e);[r[i],n[i]]=[a,s]}return[r,n]}const ot=[],ct=[],ut=[],lt=BigInt(0),dt=BigInt(1),ht=BigInt(2),ft=BigInt(7),pt=BigInt(256),yt=BigInt(113);for(let t=0,e=dt,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ot.push(2*(5*n+r)),ct.push((t+1)*(t+2)/2%64);let i=lt;for(let t=0;t<7;t++)e=(e<<dt^(e>>ft)*yt)%pt,e&ht&&(i^=dt<<(dt<<BigInt(t))-dt);ut.push(i)}const[gt,mt]=st(ut,!0),bt=(t,e,r)=>r>32?((t,e,r)=>e<<r-32|t>>>64-r)(t,e,r):((t,e,r)=>t<<r|e>>>32-r)(t,e,r),_t=(t,e,r)=>r>32?((t,e,r)=>t<<r-32|e>>>64-r)(t,e,r):((t,e,r)=>e<<r|t>>>32-r)(t,e,r);class wt extends G{constructor(t,e,r,n=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,L(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){\$||q(this.state32),function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,a=r[i],s=r[i+1],o=bt(a,s,1)^r[n],c=_t(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=o,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=ct[r],a=bt(e,i,n),s=_t(e,i,n),o=ot[r];e=t[o],i=t[o+1],t[o]=a,t[o+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=gt[n],t[1]^=mt[n]}r.fill(0)}(this.state32,this.rounds),\$||q(this.state32),this.posOut=0,this.pos=0}update(t){F(this);const{blockLen:e,state:r}=this,n=(t=z(t)).length;for(let i=0;i<n;){const a=Math.min(e-this.pos,n-i);for(let e=0;e<a;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){F(this,!1),U(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return L(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(V(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return t||(t=new wt(e,r,n,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=a,t.destroyed=this.destroyed,t}}const vt=((t,e,r)=>Y(()=>new wt(e,t,r)))(1,136,32);var Et=r(5591),At=r(7713),Tt=r(3075),St=r(9979),It=r(6993),kt=r(8287).hp,xt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ct=Object.getOwnPropertyNames,Rt=Object.prototype.hasOwnProperty,Ot=(t,e)=>{for(var r in e)xt(t,r,{get:e[r],enumerable:!0})},Nt=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Ct(e))Rt.call(t,i)||i===r||xt(t,i,{get:()=>e[i],enumerable:!(n=Bt(e,i))||n.enumerable});return t},Dt=(t,e,r)=>(Nt(t,e,"default"),r&&Nt(r,e,"default"));Ot({},{ADDR_BOUND:()=>he,API_VERSION:()=>ue,BaseUrl:()=>Ne,DEFAULT_GLOBAL_CONFIG:()=>Fe,HARDENING_4BYTES:()=>Oe,HARDENING_BYTE:()=>Re,IS_BROWSER:()=>Ft,LegacyUDC:()=>Ie,MASK_250:()=>oe,MASK_31:()=>ce,MAX_STORAGE_ITEM_SIZE:()=>de,NetworkName:()=>De,OutsideExecutionCallerAny:()=>xe,PAYMASTER_RPC_NODES:()=>He,PRIME:()=>le,RANGE_FELT:()=>pe,RANGE_I128:()=>Se,RANGE_I16:()=>Ee,RANGE_I32:()=>Ae,RANGE_I64:()=>Te,RANGE_I8:()=>ve,RANGE_U128:()=>we,RANGE_U16:()=>ge,RANGE_U32:()=>me,RANGE_U64:()=>be,RANGE_U8:()=>ye,RANGE_U96:()=>_e,RPC_DEFAULT_NODES:()=>Ve,SNIP9_V1_INTERFACE_ID:()=>Be,SNIP9_V2_INTERFACE_ID:()=>Ce,SYSTEM_MESSAGES:()=>Me,StarknetChainId:()=>Pe,SupportedRpcVersion:()=>Ue,TEXT_TO_FELT_MAX_LEN:()=>ae,TransactionHashPrefix:()=>Le,UDC:()=>ke,ZERO:()=>se});var Pt={};Ot(Pt,{JRPC:()=>Lt,PAYMASTER_API:()=>s,RPCSPEC08:()=>e,RPCSPEC09:()=>i});var Lt={},Ut={};Dt(Ut,i),Dt(Pt,Ut),Ot({},{IS_BROWSER:()=>Ft,addHexPrefix:()=>Kt,arrayBufferToString:()=>Ht,atobUniversal:()=>qt,bigIntToUint8Array:()=>ne,btoaUniversal:()=>zt,buf2hex:()=>Gt,calcByteLength:()=>Zt,concatenateArrayBuffer:()=>te,hexStringToUint8Array:()=>ee,padLeft:()=>Wt,pascalToSnake:()=>Qt,removeHexPrefix:()=>Yt,sanitizeBytes:()=>Xt,sanitizeHex:()=>Jt,stringToUint8Array:()=>re,uint8ArrayToBigInt:()=>ie,utf8ToArray:()=>\$t,utf8ToBigInt:()=>jt,utf8ToUint8Array:()=>Mt});var Ft="undefined"!=typeof window,Vt="0";function Ht(t){return new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"")}function Mt(t){return(new TextEncoder).encode(t)}var \$t=Mt;function jt(t){return ie(Mt(t))}function qt(t){return k.decode(t)}function zt(t){return k.encode(new Uint8Array(t))}function Gt(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function Yt(t){return t.replace(/^0x/i,"")}function Kt(t){return\`0x\${Yt(t)}\`}function Wt(t,e,r=Vt){return function(t,e,r,n=Vt){const i=e-t.length;let a=t;if(i>0){const e=n.repeat(i);a=r?e+t:t+e}return a}(t,e,!0,r)}function Zt(t,e=8){const{length:r}=t,n=r%e;return n?(r-n)/e*e+e:r}function Xt(t,e=8,r=Vt){return Wt(t,Zt(t,e),r)}function Jt(t){const e=Xt(Yt(t),2);return e?Kt(e):e}var Qt=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function te(t){const e=t.reduce((t,e)=>t+e.byteLength,0),r=new Uint8Array(e);let n=0;return t.forEach(t=>{r.set(t,n),n+=t.byteLength}),r}function ee(t){const e=t.startsWith("0x")?t.slice(2):t;if(e.length>0&&!/^[0-9a-fA-F]+\$/.test(e))throw new Error(\`Invalid hex string: "\${t}" contains non-hexadecimal characters\`);const r=e.length%2!=0?\`0\${e}\`:e,n=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2)n[t/2]=parseInt(r.substring(t,t+2),16);return n}function re(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)?ee(t):function(t){return/^[0-9]+\$/.test(t)}(t)?ne(BigInt(t)):Mt(t)}function ne(t){if(t<0n)throw new Error(\`Cannot convert negative bigint \${t} to Uint8Array\`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=\`0\${e}\`);const r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t/2]=parseInt(e.substring(t,t+2),16);return r}function ie(t){if(!t||0===t.length)return 0n;let e="0x";for(let r=0;r<t.length;r+=1)e+=t[r].toString(16).padStart(2,"0");return BigInt(e)}var ae=31,se=0n,oe=2n**250n-1n,ce=2n**31n-1n,ue=se,le=2n**251n+17n*2n**192n+1n,de=256n,he=2n**251n-de,fe=(t,e)=>({min:t,max:e}),pe=fe(se,le-1n),ye=fe(se,255n),ge=fe(se,65535n),me=fe(se,2n**32n-1n),be=fe(se,2n**64n-1n),_e=fe(se,2n**96n-1n),we=fe(se,2n**128n-1n),ve=fe(-128n,127n),Ee=fe(-32768n,32767n),Ae=fe(-(2n**31n),2n**31n-1n),Te=fe(-(2n**63n),2n**63n-1n),Se=fe(-(2n**127n),2n**127n-1n),Ie={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ke={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},xe="0x414e595f43414c4c4552",Be="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Ce="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Re=128,Oe=2147483648n,Ne={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},De={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Pe={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},Le={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},Ue={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Fe={rpcVersion:"0.9.0",transactionVersion:Pt.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},Ve={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},He={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},Me={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},\$e=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Fe}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),je={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},qe=class t{static instance;config;constructor(){this.config=\$e}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=je[e]}formatMessage(t){const{level:e,message:r,timestamp:n,data:i}=t;let a=\`[\${n}] \${e}: \${r}\`;if(i)try{a+=\`\\n\${JSON.stringify(i,null,2)}\`}catch(t){a+=\`\\n[JSON.stringify Error/Circular]: \${t}\`}return a}log(t,e,r){if(!this.shouldLog(je[t]))return;const n={level:t,message:e,timestamp:this.getTimestamp(),data:r},i=this.formatMessage(n);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(je).filter(t=>this.shouldLog(je[t])&&"OFF"!==t)}}.getInstance(),ze={};Ot(ze,{RpcChannel:()=>ms});var{ETransactionVersion:Ge}=i,{ETransactionVersion2:Ye}=i,{ETransactionVersion3:Ke}=i,{EDataAvailabilityMode:We}=e,{EDAMode:Ze}=e;function Xe(t){return"l1_data_gas"in t}var{ETransactionStatus:Je}=e,{ETransactionExecutionStatus:Qe}=e,{ETransactionType:tr}=i,{EBlockStatus:er}=i,{ETransactionFinalityStatus:rr}=i,{ETransactionExecutionStatus:nr}=i,{EBlockTag:ir}=i,ar="DEPLOY",sr="INVOKE",or={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},cr={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},ur={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},lr={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},dr={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};Ot({},{parse:()=>fr,parseAlwaysAsBig:()=>pr,stringify:()=>yr});var hr=t=>{if(!D.Fq(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},fr=t=>D.qg(String(t),void 0,hr),pr=t=>D.qg(String(t),void 0,D.z3),yr=(t,e,r,n)=>D.As(t,e,r,n),gr=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,r){const n={id:r??\`batched_\${this.requestId+=1}\`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:yr(t),headers:this.headers})).json()}async fetch(t,e,r){const n=this.addPendingRequest(t,e,r);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach(e=>{this.batchPromises[e]=t})}const a=await this.batchPromises[n];delete this.batchPromises[n];const s=a.find(t=>t.id===n);if(!s)throw new Error(\`Couldn't find the result for the request. Method: \${String(t)}\`);return s}};function mr(t,e){if(!t)throw new Error(e||"Assertion failure")}Ot({},{addPercent:()=>qr,assertInRange:()=>Pr,bigNumberishArrayToDecimalStringArray:()=>Lr,bigNumberishArrayToHexadecimalStringArray:()=>Ur,cleanHex:()=>Dr,getDecimalString:()=>Vr,getHexString:()=>Hr,getHexStringArray:()=>Mr,getNext:()=>Yr,hexToBytes:()=>jr,hexToDecimalString:()=>Nr,isBigNumberish:()=>Gr,isHex:()=>Sr,isHexString:()=>Ir,isStringWholeNumber:()=>Fr,stringToSha256ToArrayBuff4:()=>zr,toBigInt:()=>kr,toCairoBool:()=>\$r,toHex:()=>Br,toHex64:()=>Or,toHexString:()=>Cr,toStorageKey:()=>Rr,tryToBigInt:()=>xr});var br=t=>void 0===t||void 0===t;function _r(t){return"number"==typeof t}function wr(t){return"boolean"==typeof t}function vr(t){return"bigint"==typeof t}function Er(t){return"string"==typeof t}function Ar(t){return void 0!==kt&&t instanceof kt}function Tr(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function Sr(t){return/^0[xX][0-9a-fA-F]*\$/.test(t)}var Ir=Sr;function kr(t){return BigInt(t)}function xr(t){return t?BigInt(t):void 0}function Br(t){return Kt(kr(t).toString(16))}var Cr=Br;function Rr(t){return Kt(kr(t).toString(16).padStart(64,"0"))}function Or(t){const e=Kt(kr(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function Nr(t){return BigInt(Kt(t)).toString(10)}function Dr(t){return t.toLowerCase().replace(/^(0x)0+/,"\$1")}function Pr(t,e,r,n=""){const i=""===n?"invalid length":\`invalid \${n} length\`,a=BigInt(t),s=BigInt(e),o=BigInt(r);mr(a>=s&&a<=o,\`Message not signable, \${i}.\`)}function Lr(t){return t.map(t=>kr(t).toString(10))}function Ur(t){return t.map(t=>Br(t))}function Fr(t){return/^\\d+\$/.test(t)}function Vr(t){if(Sr(t))return Nr(t);if(Fr(t))return t;throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function Hr(t){if(Sr(t))return t;if(Fr(t))return Cr(t);throw new Error(\`\${t} needs to be a hex-string or whole-number-string\`)}function Mr(t){return t.map(Hr)}function \$r(t){return(+t).toString()}function jr(t){if(!Sr(t))throw new Error(\`\${t} needs to be a hex-string\`);let e=Yt(t);return e.length%2!=0&&(e=\`0\${e}\`),(0,P.aT)(e)}function qr(t,e){const r=BigInt(t);return r+r*BigInt(e)/100n}function zr(t){var e;return jr(Br((e=BigInt(Kt(Gt(et(t)))),Number(e&ce))))}function Gr(t){return _r(t)||vr(t)||Er(t)&&(Sr(t)||Fr(t))}function Yr(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function Kr(t){const e=Yt(Br(BigInt(t))),r=e.length%2==0?e:\`0\${e}\`;return Kt((0,rt.keccak)(jr(Kt(r))).toString(16))}function Wr(t){const e=BigInt(function(t){return Kt((0,rt.keccak)(\$t(t)).toString(16))}(t));return e&oe}function Zr(t){return Br(Wr(t))}function Xr(t){return _r(t)||vr(t)?Br(t):Sr(t)?t:Fr(t)?Br(t):Zr(t)}function Jr(t){const e=Kt(t.reduce((t,e)=>t+Yt(Br(e)).padStart(64,"0"),""));return Kt((0,P.My)(vt(jr(e))))}function Qr(t,e,r,n,i){return Jr([t,e,i,r,n.length,...n])}function tn(t,e,r){return Jr([t,e,r.length,...r])}function en(t){return/^[\\x00-\\x7F]*\$/.test(t)}function rn(t){return t.length<=ae}function nn(t){return/^[0-9]*\$/i.test(t)}function an(t){return Er(t)&&!Sr(t)&&!Fr(t)}Ot({},{getL1MessageHash:()=>tn,getL2MessageHash:()=>Qr,getSelector:()=>Xr,getSelectorFromName:()=>Zr,keccakBn:()=>Kr,solidityUint256PackedKeccak256:()=>Jr,starknetKeccak:()=>Wr}),Ot({},{decodeShortString:()=>ln,encodeShortString:()=>un,isASCII:()=>en,isDecimalString:()=>nn,isLongText:()=>on,isShortString:()=>rn,isShortText:()=>sn,isText:()=>an,splitLongString:()=>cn});var sn=t=>an(t)&&rn(t),on=t=>an(t)&&!rn(t);function cn(t){const e=RegExp(\`[^]{1,\${ae}}\`,"g");return t.match(e)||[]}function un(t){if(!en(t))throw new Error(\`\${t} is not an ASCII string\`);if(!rn(t))throw new Error(\`\${t} is too long\`);return Kt(t.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function ln(t){if(!en(t))throw new Error(\`\${t} is not an ASCII string\`);if(Sr(t))return Yt(t).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(nn(t))return ln("0X".concat(BigInt(t).toString(16)));throw new Error(\`\${t} is not Hex or decimal\`)}function dn(t){const e=0n===BigInt(t.pending_word)?"":ln(Br(t.pending_word));return t.data.reduce((t,e)=>t+(0n===BigInt(e)?"":ln(Br(e))),"")+e}function hn(t){const e=cn(t),r=e[e.length-1],n=e.map(un),[i,a]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:i,pending_word_len:a}}Ot({},{byteArrayFromString:()=>hn,stringFromByteArray:()=>dn});function fn(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function pn(t){if(vr(t)||Number.isInteger(t))return t.toString();if(Er(t)){if(Sr(t))return BigInt(t).toString();if(an(t)){if(!rn(t))throw new Error(\`\${t} is a long string > 31 chars. Please split it into an array of short strings.\`);return BigInt(un(t)).toString()}if(Fr(t))return t}if(wr(t))return""+ +t;throw new Error(\`\${t} can't be computed by felt()\`)}Ot({},{felt:()=>Yn,getAbiContractVersion:()=>jn,getArrayType:()=>Hn,isCairo1Abi:()=>Mn,isCairo1Type:()=>Vn,isLen:()=>vn,isTypeArray:()=>An,isTypeBool:()=>Dn,isTypeContractAddress:()=>Pn,isTypeEnum:()=>kn,isTypeEthAddress:()=>Ln,isTypeFelt:()=>En,isTypeInt:()=>Rn,isTypeLiteral:()=>Nn,isTypeNamedTuple:()=>Sn,isTypeNonZero:()=>\$n,isTypeOption:()=>xn,isTypeResult:()=>Bn,isTypeSecp256k1Point:()=>Fn,isTypeStruct:()=>In,isTypeTuple:()=>Tn,isTypeU96:()=>Un,isTypeUint:()=>Cn,isTypeUint256:()=>On,tuple:()=>Gn,uint256:()=>qn,uint512:()=>zn});var yn=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const r=t.__processData(e);this.data=r.subarray(r.findIndex(t=>t>0))}static __processData(t){if(Er(t))return re(t);if(vr(t))return ne(t);if(Number.isInteger(t))return ne(BigInt(t));if(wr(t))return ne(BigInt(t?1:0));throw new Error(\`\${t} can't be computed by felt()\`)}toBigInt(){return ie(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return Kt(this.toBigInt().toString(16))}toApiRequest(){return fn([this.toHexString()])}static validate(e){mr(null!==e,"null value is not allowed for felt252"),mr(void 0!==e,"undefined value is not allowed for felt252"),mr(Er(e)||_r(e)||vr(e)||wr(e),\`Unsupported data type '\${typeof e}' for felt252. Expected string, number, bigint, or boolean\`);const r=t.__processData(e),n=ie(r);mr(n>=0n&&n<le,\`Value \${r} is out of felt252 range [0, \${le})\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},gn=(1n<<128n)-1n,mn=(1n<<256n)-1n,bn=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(Tr(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const r=t.validateProps(e[0].low,e[0].high);this.low=r.low,this.high=r.high}else if(1===e.length){const r=t.validate(e[0]);this.low=r&gn,this.high=r>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const r=t.validateProps(e[0],e[1]);this.low=r.low,this.high=r.high}}}static validate(t){mr(null!==t,"null value is not allowed for u256"),mr(void 0!==t,"undefined value is not allowed for u256"),mr(Gr(t)||Tr(t),\`Unsupported data type '\${typeof t}' for u256. Expected string, number, bigint, or Uint256 object\`);const e=BigInt(t);return mr(e>=0n,"bigNumberish is smaller than UINT_256_MIN"),mr(e<=mn,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const r=BigInt(t),n=BigInt(e);return mr(r>=0n&&r<=340282366920938463463374607431768211455n,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),mr(n>=0n&&n<=340282366920938463463374607431768211455n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:n}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=Yr(e);return new t(r,n)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Kt(this.low.toString(16)),high:Kt(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[pn(this.low),pn(this.high)]}},_n=(1n<<512n)-1n,wn=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(Tr(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const r=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===e.length){const r=t.validate(e[0]);this.limb0=r&gn,this.limb1=(r&gn<<128n)>>128n,this.limb2=(r&gn<<256n)>>256n,this.limb3=r>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const r=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}}}static validate(t){mr(null!==t,"null value is not allowed for u512"),mr(void 0!==t,"undefined value is not allowed for u512"),mr(Gr(t)||Tr(t),\`Unsupported data type '\${typeof t}' for u512. Expected string, number, bigint, or Uint512 object\`);const e=BigInt(t);return mr(e>=0n,"bigNumberish is smaller than UINT_512_MIN."),mr(e<=_n,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,r,n){const i=BigInt(t),a=BigInt(e),s=BigInt(r),o=BigInt(n);return[i,a,s,o].forEach((t,e)=>{mr(t>=0n&&t<=gn,\`limb\${e} is not in the range of a u128 number\`)}),{limb0:i,limb1:a,limb2:s,limb3:o}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=Yr(e),i=Yr(e),a=Yr(e);return new t(r,n,i,a)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Kt(this.limb0.toString(16)),limb1:Kt(this.limb1.toString(16)),limb2:Kt(this.limb2.toString(16)),limb3:Kt(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[pn(this.limb0),pn(this.limb1),pn(this.limb2),pn(this.limb3)]}},vn=t=>/_len\$/.test(t),En=t=>"felt"===t||"core::felt252"===t,An=t=>/\\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Tn=t=>/^\\(.*\\)\$/i.test(t),Sn=t=>/\\(.*\\)/i.test(t)&&t.includes(":"),In=(t,e)=>t in e,kn=(t,e)=>t in e,xn=t=>t.startsWith("core::option::Option::"),Bn=t=>t.startsWith("core::result::Result::"),Cn=t=>Object.values(or).includes(t),Rn=t=>Object.values(cr).includes(t),On=t=>bn.isAbiType(t),Nn=t=>Object.values(ur).includes(t),Dn=t=>"core::bool"===t,Pn=t=>t===ur.ContractAddress,Ln=t=>"core::starknet::eth_address::EthAddress"===t,Un=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Fn=t=>t===ur.Secp256k1Point,Vn=t=>t.includes("::"),Hn=t=>Vn(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Mn(t){const{cairo:e}=jn(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function \$n(t){return t.startsWith("core::zeroable::NonZero::")}function jn(t){if(t.find(t=>"interface"===t.type))return{cairo:"1",compiler:"2"};const e=t.find(t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const r=e.inputs.length?e.inputs:e.outputs;return Vn(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var qn=t=>new bn(t).toUint256DecimalString(),zn=t=>new wn(t).toUint512DecimalString(),Gn=(...t)=>({...t});function Yn(t){return pn(t)}var Kn=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter(t=>!br(t)).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(t=>!br(t))}activeVariant(){const t=Object.entries(this.variant).find(t=>!br(t[1]));return br(t)?"":t[0]}},Wn={Some:0,None:1},Zn=class{Some;None;constructor(t,e){if(!(t in Object.values(Wn)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===Wn.Some){if(br(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!br(this.Some)}isNone(){return!0===this.None}},Xn={Ok:0,Err:1},Jn=class{Ok;Err;constructor(t,e){if(!(t in Object.values(Xn)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===Xn.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!br(this.Ok))return this.Ok;if(!br(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!br(this.Ok)}isErr(){return!br(this.Err)}},Qn=(t,e,r)=>{if(!vr(t[r]))throw new Error(\`Data and formatter mismatch on \${r}:\${e[r]}, expected response data \${r}:\${t[r]} to be BN instead it is \${typeof t[r]}\`)};function ti(t,e,r){return Object.entries(t).reduce((n,[i,a])=>{const s=r??e[i];if(!(i in e)&&!r)return n[i]=a,n;if("string"===s){if(Array.isArray(t[i])){const e=ti(t[i],t[i].map(t=>s));return n[i]=Object.values(e).join(""),n}return Qn(t,e,i),n[i]=ln(a),n}if("number"===s)return Qn(t,e,i),n[i]=Number(a),n;if("function"==typeof s)return n[i]=s(a),n;if(Array.isArray(s)){const e=ti(t[i],s,s[0]);return n[i]=Object.values(e),n}return Tr(s)?(n[i]=ti(t[i],s),n):(((t,e,r)=>{throw new Error(\`Unhandled formatter type on \${r}:\${e[r]} for data \${r}:\${t[r]}\`)})(t,e,i),n)},{})}var ei=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const r=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(r,t.MAX_BYTE_SIZE-r.length)}static __processData(t){if(Er(t))return re(t);if(Ar(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return ie(this.data)}decodeUtf8(){const t=this.data.findIndex(t=>t>0),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return Kt("padded"===t?Gt(this.data):this.toBigInt().toString(16))}static validate(e){const r=t.__processData(e).length;mr(r<=this.MAX_BYTE_SIZE,\`Data is too long: \${r} bytes (max \${this.MAX_BYTE_SIZE} bytes)\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},ri={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ni=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:r}=Object;r?r(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:r}=Error;r&&r(t,e)}(this)}},ii=class extends ni{},ai=class extends ii{constructor(t,e,r){super(\`RPC: \${e} with params \${yr(r,null,2)}\\n\\n      \${t.code}: \${t.message}: \${yr(t.data)}\`),this.baseError=t,this.request={method:e,params:r}}request;get code(){return this.baseError.code}isType(t){return ri[t]===this.code}},si=\$e.get("buffer")||void 0!==kt&&kt||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||void 0!==r.g&&r.g.Buffer||class{constructor(){throw new ii("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new ii("Buffer not detected, use 'config.set(\\"buffer\\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=\$e.get("buffer")||void 0!==kt&&kt;return e&&e.isBuffer&&e.isBuffer(t)}},oi=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=0n&&r<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},ci=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,r,n]=e;return mr(Array.isArray(t)&&r instanceof yn&&n instanceof oi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=r,void(this.pending_word_len=n)}const r=e[0];t.validate(r);const{data:n,pending_word:i,pending_word_len:a}=t.__processData(r);this.data=n,this.pending_word=i,this.pending_word_len=a}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(Ar(t))e=new Uint8Array(t);else if(Er(t))e=re(t);else if(vr(t))e=ne(t);else{if(r=t,!Number.isInteger(r))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=ne(BigInt(t))}var r;const n=ei.MAX_BYTE_SIZE,i=Math.floor(e.length/n),a=e.length%n,s=[];let o,c;for(let t=0;t<i;t+=1){const r=t*n,i=r+n,a=e.slice(r,i);s.push(new ei(a))}if(a>0){const t=e.slice(i*n);let r="0x";for(let e=0;e<t.length;e+=1)r+=t[e].toString(16).padStart(2,"0");o=new yn(r),c=new oi(a)}else o=new yn(0),c=new oi(0);return{data:s,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),fn([Kt(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=te(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=te(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach(t=>{e=256n*e+BigInt(t)}),e}toHexString(){const t=te(this.toElements());return Kt(0===t.length?"0":Gt(t))}toBuffer(){const t=te(this.toElements());return si.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(t=>t.data),e=Number(this.pending_word_len.toBigInt());if(e){const r=new Uint8Array(e),n=e-this.pending_word.data.length;r.set(this.pending_word.data,n),t.push(r)}return t}assertInitialized(){mr(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){mr(null!=t,"Invalid input: null or undefined"),mr(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),mr("object"!=typeof t||Ar(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),mr(!_r(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),mr(!_r(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),mr(!vr(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),mr(t instanceof Uint8Array||Ar(t)||Er(t)||_r(t)||vr(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Array.from({length:Number(Yr(e))},()=>ei.factoryFromApiResponse(e)),n=yn.factoryFromApiResponse(e),i=oi.factoryFromApiResponse(e);return new t(r,n,i)}},ui=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=ye.min&&r<=ye.max,\`Value is out of u8 range [\${ye.min}, \${ye.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},li=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=ge.min&&r<=ge.max,\`Value is out of u16 range [\${ge.min}, \${ge.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},di=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=be.min&&r<=be.max,\`Value is out of u64 range [\${be.min}, \${be.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},hi=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=_e.min&&r<=_e.max,\`Value is out of u96 range [\${_e.min}, \${_e.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},fi=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data))}toHexString(){return Kt(this.toBigInt().toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=we.min&&r<=we.max,\`Value is out of u128 range [\${we.min}, \${we.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Yr(e))}},pi=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(le+t).toString(16):t.toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=ve.min&&r<=ve.max,\`Value is out of i8 range [\${ve.min}, \${ve.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=BigInt(r);return new t(n>le/2n?n-le:n)}},yi=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(le+t).toString(16):t.toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=Ee.min&&r<=Ee.max,\`Value is out of i16 range [\${Ee.min}, \${Ee.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=BigInt(r);return new t(n>le/2n?n-le:n)}},gi=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(le+t).toString(16):t.toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=Ae.min&&r<=Ae.max,\`Value is out of i32 range [\${Ae.min}, \${Ae.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=BigInt(r);return new t(n>le/2n?n-le:n)}},mi=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(le+t).toString(16):t.toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=Te.min&&r<=Te.max,\`Value is out of i64 range [\${Te.min}, \${Te.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=BigInt(r);return new t(n>le/2n?n-le:n)}},bi=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return Er(t)&&an(t)?jt(t):BigInt(t)}toApiRequest(){return fn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(ne(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return Kt(t<0n?(le+t).toString(16):t.toString(16))}static validate(e){mr(null!=e,"Invalid input: null or undefined"),mr(!Tr(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),mr(!_r(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const r=t.__processData(e);mr(r>=Se.min&&r<=Se.max,\`Value is out of i128 range [\${Se.min}, \${Se.max}]\`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const r=Yr(e),n=BigInt(r);return new t(n>le/2n?n-le:n)}},_i=(ei.abiSelector,ci.abiSelector,yn.abiSelector,bn.abiSelector,wn.abiSelector,ui.abiSelector,li.abiSelector,di.abiSelector,hi.abiSelector,fi.abiSelector,pi.abiSelector,yi.abiSelector,gi.abiSelector,mi.abiSelector,bi.abiSelector,ei.abiSelector,ci.abiSelector,yn.abiSelector,bn.abiSelector,wn.abiSelector,ui.abiSelector,li.abiSelector,di.abiSelector,hi.abiSelector,fi.abiSelector,pi.abiSelector,yi.abiSelector,gi.abiSelector,mi.abiSelector,bi.abiSelector,{request:{[ei.abiSelector]:t=>new ei(t).toApiRequest(),[ci.abiSelector]:t=>new ci(t).toApiRequest(),[yn.abiSelector]:t=>Yn(t),[bn.abiSelector]:t=>new bn(t).toApiRequest(),[wn.abiSelector]:t=>new wn(t).toApiRequest(),[ui.abiSelector]:t=>Yn(t),[li.abiSelector]:t=>Yn(t),[di.abiSelector]:t=>Yn(t),[hi.abiSelector]:t=>Yn(t),[fi.abiSelector]:t=>Yn(t),[pi.abiSelector]:t=>new pi(t).toApiRequest(),[yi.abiSelector]:t=>new yi(t).toApiRequest(),[gi.abiSelector]:t=>new gi(t).toApiRequest(),[mi.abiSelector]:t=>new mi(t).toApiRequest(),[bi.abiSelector]:t=>new bi(t).toApiRequest()},response:{[ei.abiSelector]:t=>ei.factoryFromApiResponse(t).decodeUtf8(),[ci.abiSelector]:t=>ci.factoryFromApiResponse(t).decodeUtf8(),[yn.abiSelector]:t=>BigInt(Yr(t)),[bn.abiSelector]:t=>bn.factoryFromApiResponse(t).toBigInt(),[wn.abiSelector]:t=>wn.factoryFromApiResponse(t).toBigInt(),[ui.abiSelector]:t=>BigInt(Yr(t)),[li.abiSelector]:t=>BigInt(Yr(t)),[di.abiSelector]:t=>BigInt(Yr(t)),[hi.abiSelector]:t=>BigInt(Yr(t)),[fi.abiSelector]:t=>BigInt(Yr(t)),[pi.abiSelector]:t=>BigInt(Yr(t)),[yi.abiSelector]:t=>BigInt(Yr(t)),[gi.abiSelector]:t=>BigInt(Yr(t)),[mi.abiSelector]:t=>BigInt(Yr(t)),[bi.abiSelector]:t=>BigInt(Yr(t))}}),wi=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||_i}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.reduce((t,e)=>vn(e.name)?t:t+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},vi=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||_i}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(\`Parser for \${t} not found\`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(\`Parser for \${t} not found\`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find(t=>"interface"===t.type);return e?.items?.find(e=>e.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>"interface"===t.type?t.items:t)}};function Ei(t,e,r){return"constructor"===t&&!r&&!e.length}function Ai(t,e,r){for(let n=0,i=0;n<t.length;n++)if(t[n]===e)i++;else if(t[n]===r&&0===--i)return n;return Number.POSITIVE_INFINITY}function Ti(t){return Vn(t)?function(t){const e=t.slice(1,-1),r=[];let n,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:n=i+Ai(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):n=i+Ai(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);n=-1!==t?t:Number.POSITIVE_INFINITY}}r.push(e.slice(i,n)),i=n+2}return r}(t):function(t){const e=t.replace(/\\s/g,"").slice(1,-1),{subTuple:r,result:n}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let r="",n=0;for(;n<t.length;){if("("===t[n]){let i=1;const a=n;for(n++;i;)")"===t[n]&&i--,"("===t[n]&&i++,n++;e.push(t.substring(a,n)),r+=" ",n--}else r+=t[n];n++}return{subTuple:e,result:r}}(e);let i=n.split(",").map(t=>r.length?t.replace(" ",r.shift()):t);return Sn(t)&&(i=i.reduce((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e)),[])),i}(t)}var Si=class t{content;arrayType;constructor(e,r){mr(t.isTypeFixedArray(r),\`The type \${r} is not a Cairo fixed array. Needs [type; length].\`);try{t.getFixedArrayType(r)}catch{throw new Error(\`The type \${r} do not includes any content type. Needs [type; length].\`)}let n;try{n=t.getFixedArraySize(r)}catch{throw new Error(\`The type \${r} type do not includes any length. Needs [type; length].\`)}mr(n===e.length,\`The ABI type \${r} is expecting \${n} items. \${e.length} items provided.\`),this.content=e,this.arrayType=r}static getFixedArraySize(t){const e=t.match(/(?<=; )\\d+(?=\\])/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid number after ';' character.\`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\\[).+(?=;)/);if(null===e)throw new Error(\`ABI type \${t} do not includes a valid type of data.\`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((t,e,r)=>(t[r]=e,t),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\\[.*;\\s.*\\]\$/.test(t)&&/(?<=\\[).+(?=;)/.test(t)&&/(?<=; )\\d+(?=\\])/.test(t)}};function Ii({type:t,val:e,parser:r}){switch(!0){case bn.isAbiType(t):case wn.isAbiType(t):case ui.isAbiType(t):case li.isAbiType(t):case di.isAbiType(t):case hi.isAbiType(t):case fi.isAbiType(t):case pi.isAbiType(t):case yi.isAbiType(t):case gi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):case ei.isAbiType(t):return r.getRequestParser(t)(e);case Fn(t):{const t=Yt(Br(e)).padStart(128,"0"),r=qn(Kt(t.slice(-64))),n=qn(Kt(t.slice(0,-64)));return[Yn(n.low),Yn(n.high),Yn(r.low),Yn(r.high)]}default:return r.getRequestParser(yn.abiSelector)(e)}}function ki({element:t,type:e,structs:r,enums:n,parser:i}){if(void 0===t)throw Error(\`Missing parameter for type \${e}\`);if(Si.isTypeFixedArray(e)){const a=Si.getFixedArrayType(e);let s=[];if(Array.isArray(t))s=new Si(t,e).content;else{if("object"!=typeof t)throw new Error(\`ABI type \${e}: not an Array representing a cairo.fixedArray() provided.\`);s=Object.values(t),mr(s.length===Si.getFixedArraySize(e),\`ABI type \${e}: object provided do not includes  \${Si.getFixedArraySize(e)} items. \${s.length} items provided.\`)}return s.reduce((t,e)=>t.concat(ki({element:e,type:a,structs:r,enums:n,parser:i})),[])}if(Array.isArray(t)){const a=[];a.push(Yn(t.length));const s=Hn(e);return t.reduce((t,e)=>t.concat(ki({element:e,type:s,structs:r,enums:n,parser:i})),a)}if(bn.isAbiType(e))return i.getRequestParser(e)(t);if(wn.isAbiType(e))return i.getRequestParser(e)(t);if(r[e]&&r[e].members.length){if(Ln(e))return Ii({type:e,val:t,parser:i});if(ci.isAbiType(e))return i.getRequestParser(e)(t);const{members:a}=r[e],s=t;return a.reduce((t,e)=>t.concat(ki({element:s[e.name],type:e.type,structs:r,enums:n,parser:i})),[])}if(Tn(e)){const a=function(t,e){const r=Ti(e),n=Object.values(t);if(n.length!==r.length)throw Error(\`ParseTuple: provided and expected abi tuple size do not match.\\n      provided: \${n}\\n      expected: \${r}\`);return r.map((t,e)=>({element:n[e],type:t.type??t}))}(t,e);return a.reduce((t,e)=>{const a=ki({element:e.element,type:e.type,structs:r,enums:n,parser:i});return t.concat(a)},[])}if(kn(e,n)){const{variants:a}=n[e];if(xn(e)){const e=t;if(e.isSome()){const t=a.find(t=>"Some"===t.name);if(br(t))throw Error("Error in abi : Option has no 'Some' variant.");const s=t.type;if("()"===s)return Wn.Some.toString();const o=ki({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[Wn.Some.toString(),...o]:[Wn.Some.toString(),o]}return Wn.None.toString()}if(Bn(e)){const e=t;if(e.isOk()){const t=a.find(t=>"Ok"===t.name);if(br(t))throw Error("Error in abi : Result has no 'Ok' variant.");const s=t.type;if("()"===s)return Xn.Ok.toString();const o=ki({element:e.unwrap(),type:s,structs:r,enums:n,parser:i});return Array.isArray(o)?[Xn.Ok.toString(),...o]:[Xn.Ok.toString(),o]}const s=a.find(t=>"Err"===t.name);if(br(s))throw Error("Error in abi : Result has no 'Err' variant.");const o=s.type;if("()"===o)return Xn.Err.toString();const c=ki({element:e.unwrap(),type:o,structs:r,enums:n,parser:i});return Array.isArray(c)?[Xn.Err.toString(),...c]:[Xn.Err.toString(),c]}const s=t,o=s.activeVariant(),c=a.find(t=>t.name===o);if(br(c))throw Error(\`Not find in abi : Enum has no '\${o}' variant.\`);const u=c.type,l=a.findIndex(t=>t.name===o);if("()"===u)return l.toString();const d=ki({element:s.unwrap(),type:u,structs:r,enums:n,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(\$n(e))return Ii({type:Hn(e),val:t,parser:i});if("object"==typeof t)throw Error(\`Parameter \${t} do not align with abi parameter \${e}\`);return Ii({type:e,val:t,parser:i})}function xi(t,e,r){let n;switch(!0){case Dn(t):return n=e.next().value,Boolean(BigInt(n));case bn.isAbiType(t):case wn.isAbiType(t):case ui.isAbiType(t):case li.isAbiType(t):case di.isAbiType(t):case hi.isAbiType(t):case fi.isAbiType(t):case pi.isAbiType(t):case yi.isAbiType(t):case gi.isAbiType(t):case mi.isAbiType(t):case bi.isAbiType(t):return r.getResponseParser(t)(e);case Ln(t):return n=e.next().value,BigInt(n);case ei.isAbiType(t):return r.getResponseParser(t)(e);case Fn(t):const i=Yt(e.next().value).padStart(32,"0"),a=Yt(e.next().value).padStart(32,"0"),s=Yt(e.next().value).padStart(32,"0"),o=Yt(e.next().value).padStart(32,"0");return BigInt(Kt(a+i+o+s));default:return r.getResponseParser(yn.abiSelector)(e)}}function Bi(t,e,r,n,i){if("()"===e.type)return{};if(bn.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(wn.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(ci.isAbiType(e.type))return r.getResponseParser(e.type)(t);if(Si.isTypeFixedArray(e.type)){const a=[],s={name:"",type:Si.getFixedArrayType(e.type)},o=Si.getFixedArraySize(e.type);for(;a.length<o;)a.push(Bi(t,s,r,n,i));return a}if(An(e.type)){const a=[],s={name:"",type:Hn(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Bi(t,s,r,n,i));return a}if(\$n(e.type)){const a={name:"",type:Hn(e.type)};return Bi(t,a,r,n,i)}if(n&&e.type in n&&n[e.type])return Ln(e.type)?xi(e.type,t,r):n[e.type].members.reduce((e,a)=>(e[a.name]=Bi(t,a,r,n,i),e),{});if(i&&e.type in i&&i[e.type]){const a=Number(t.next().value),s=i[e.type].variants.reduce((e,s,o)=>o===a?(e[s.name]=Bi(t,{name:"",type:s.type},r,n,i),e):(e[s.name]=void 0,e),{});if(e.type.startsWith("core::option::Option")){const t=a===Wn.Some?s.Some:void 0;return new Zn(a,t)}if(e.type.startsWith("core::result::Result")){let t;return t=a===Xn.Ok?s.Ok:s.Err,new Jn(a,t)}return new Kn(s)}if(Tn(e.type))return Ti(e.type).reduce((e,a,s)=>{const o=a?.name?a.name:s,c={name:o,type:a?.type?a.type:a};return e[o]=Bi(t,c,r,n,i),e},{});if(An(e.type)){const a=[],s={name:"",type:Hn(e.type)},o=BigInt(t.next().value);for(;a.length<o;)a.push(Bi(t,s,r,n,i));return a}return xi(e.type,t,r)}function Ci({responseIterator:t,output:e,structs:r,enums:n,parsedResult:i,parser:a}){const{name:s,type:o}=e;let c;switch(!0){case vn(s):return c=t.next().value,BigInt(c);case r&&o in r||Tn(o):case n&&kn(o,n):case Si.isTypeFixedArray(o):return Bi(t,e,a,r,n);case An(o):if(Vn(o))return Bi(t,e,a,r,n);const u=[];if(i&&i[\`\${s}_len\`]){const o=i[\`\${s}_len\`];for(;u.length<o;)u.push(Bi(t,{name:s,type:e.type.replace("*","")},a,r,n))}return u;case \$n(o):return Bi(t,e,a,r,n);default:return xi(o,t,a)}}var Ri=(t,e)=>{if(mr(Er(t)||_r(t)||vr(t),\`Validate: arg \${e.name} should be a felt typed as (String, Number or BigInt)\`),Er(t)&&!Sr(t))return;const r=BigInt(t.toString(10));mr(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`)},Oi=(t,e)=>{let r;switch(_r(t)&&mr(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),mr(Er(t)||_r(t)||vr(t)||Tr(t)&&"low"in t&&"high"in t||Tr(t)&&["limb0","limb1","limb2","limb3"].every(e=>e in t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (String, Number or BigInt), but is \${typeof t} \${t}.\`),e.type){case or.u256:r=new bn(t).toBigInt();break;case or.u512:r=new wn(t).toBigInt();break;default:r=kr(t)}switch(e.type){case or.u8:mr(r>=0n&&r<=255n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0 - 255]\`);break;case or.u16:mr(r>=0n&&r<=65535n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 65535]\`);break;case or.u32:mr(r>=0n&&r<=4294967295n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 4294967295]\`);break;case or.u64:mr(r>=0n&&r<=2n**64n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^64-1]\`);break;case or.u128:mr(r>=0n&&r<=2n**128n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^128-1]\`);break;case or.u256:mr(r>=0n&&r<=2n**256n-1n,\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^256-1\`);break;case or.u512:mr(wn.is(r),\`Validate: arg \${e.name} is \${e.type} should be in range 0 - 2^512-1\`);break;case ur.ClassHash:case ur.ContractAddress:mr(r>=0n&&r<=2n**252n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^252-1]\`);break;case ur.Secp256k1Point:mr(r>=0n&&r<=2n**512n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 512 bits number.\`);break;case ur.U96:mr(r>=0n&&r<=2n**96n-1n,\`Validate: arg \${e.name} must be \${e.type} : a 96 bits number.\`)}},Ni=(t,e)=>{mr(wr(t),\`Validate: arg \${e.name} of cairo type \${e.type} should be type (Boolean)\`)},Di=(t,e,r)=>{if(e.type!==or.u256&&e.type!==or.u512){if(Ln(e.type)){mr(!Tr(t),\`EthAddress type is waiting a BigNumberish. Got "\${t}"\`);const r=BigInt(t.toString(10));return void mr(r>=0n&&r<=2n**160n-1n,\`Validate: arg \${e.name} cairo typed \${e.type} should be in range [0, 2^160-1]\`)}mr(Tr(t),\`Validate: arg \${e.name} is cairo type struct (\${e.type}), and should be defined as a js object (not array)\`),r[e.type].members.forEach(({name:r})=>{mr(Object.keys(t).includes(r),\`Validate: arg \${e.name} should have a property \${r}\`)})}else Oi(t,e)},Pi=(t,e)=>{mr(Tr(t),\`Validate: arg \${e.name} is cairo type Enum (\${e.type}), and should be defined as a js object (not array)\`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),n=[...Object.getOwnPropertyNames(t),...r];if(!(xn(e.type)&&n.includes("isSome")&&n.includes("isNone")||Bn(e.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(\`Validate Enum: argument \${e.name}, type \${e.type}, value received "\${t}", is not an Enum.\`)},Li=(t,e)=>{mr(Tr(t),\`Validate: arg \${e.name} should be a tuple (defined as object)\`)},Ui=(t,e,r,n)=>{const i=An(e.type),a=i?Hn(e.type):Si.getFixedArrayType(e.type);if(i&&En(a)&&on(t))return;let s=[];if(i)mr(Array.isArray(t),\`Validate: arg \${e.name} should be an Array\`),s=t;else switch(!0){case Array.isArray(t):s=t;break;case"object"==typeof t:s=Object.values(t);break;default:throw new Error(\`Validate: arg \${e.name} should be an Array or an object.\`)}switch(!0){case En(a):s.forEach(t=>Ri(t,e));break;case Tn(a):s.forEach(t=>Li(t,{name:e.name,type:a}));break;case An(a):s.forEach(t=>Ui(t,{name:"",type:a},r,n));break;case In(a,r):s.forEach(t=>Di(t,{name:e.name,type:a},r));break;case kn(a,n):s.forEach(t=>Pi(t,{name:e.name,type:a}));break;case Cn(a)||Nn(a):s.forEach(t=>Oi(t,{name:"",type:a}));break;case Dn(a):s.forEach(t=>Ni(t,e));break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value \${s}\`)}};function Fi(t,e,r,n){t.inputs.reduce((t,i)=>{const a=e[t];switch(!0){case vn(i.name):return t;case En(i.type):Ri(a,i);break;case ei.isAbiType(i.type):ei.validate(a);break;case Cn(i.type)||Nn(i.type):Oi(a,i);break;case Dn(i.type):Ni(a,i);break;case ci.isAbiType(i.type):ci.validate(a);break;case pi.isAbiType(i.type):pi.validate(a);break;case yi.isAbiType(i.type):yi.validate(a);break;case gi.isAbiType(i.type):gi.validate(a);break;case mi.isAbiType(i.type):mi.validate(a);break;case bi.isAbiType(i.type):bi.validate(a);break;case An(i.type)||Si.isTypeFixedArray(i.type):Ui(a,i,r,n);break;case In(i.type,r):Di(a,i,r);break;case kn(i.type,n):Pi(a,i);break;case Tn(i.type):Li(a,i);break;case \$n(i.type):((t,e)=>{const r=Hn(e.type);switch(mr(Cn(r)&&r!==wn.abiSelector||En(r),\`Validate: \${e.name} type is not authorized for NonZero type.\`),!0){case En(r):Ri(t,e),mr(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Cn(r):Oi(t,{name:"",type:r}),r===or.u256?mr(new bn(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):mr(kr(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(\`Validate Unhandled: argument \${e.name}, type \${e.type}, value "\${t}"\`)}})(a,i);break;default:throw new Error(\`Validate Unhandled: argument \${i.name}, type \${i.type}, value \${a}\`)}return t+1},0)}var Vi=class t{abi;parser;structs;enums;constructor(e,r){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const r=function(t){return t.find(t=>"interface"===t.type)?2:Mn(t)?1:0}(t);if(0===r||1===r)return new wi(t,e);if(2===r)return new vi(t,e);throw Error(\`Unsupported ABI version \${r}\`)}(e,r),this.abi=this.parser.getLegacyFormat()}validate(t,e,r=[]){t!==ar&&mr(this.abi.filter(e=>{if("function"!==e.type)return!1;const r="view"===e.stateMutability||"view"===e.state_mutability;return t===sr?!r:r}).map(t=>t.name).includes(e),(t===sr?"invocable":"viewable")+" method not found in abi");const n=this.abi.find(r=>t===ar?r.name===e&&"constructor"===r.type:r.name===e&&"function"===r.type);if(Ei(e,r,n))return;const i=this.parser.methodInputsLength(n);if(r.length!==i)throw Error(\`Invalid number of arguments, expected \${i} arguments, but got \${r.length}\`);Fi(n,r,this.structs,this.enums)}compile(t,e){const r=this.abi.find(e=>e.name===t);if(Ei(t,e,r))return[];let n;if(Array.isArray(e))n=e;else{const t=function(t,e,r,n){const i=(t,e)=>{if(Si.isTypeFixedArray(e))return function(t,e){const r=Si.getFixedArrayType(e),n=Si.getFixedArraySize(e);if(Array.isArray(t)){if(n!==t.length)throw new Error(\`ABI type \${e}: array provided do not includes  \${n} items. \${t.length} items provided.\`);return t.map(t=>i(t,r))}if(n!==Object.keys(t).length)throw new Error(\`ABI type \${e}: object provided do not includes  \${n} properties. \${Object.keys(t).length} items provided.\`);return i(t,r)}(t,e);if(An(e))return function(t,e){const r=Hn(e);return Er(t)?t:t.map(t=>i(t,r))}(t,e);if(kn(e,n)){const r=n[e];return s(t,r)}if(Tn(e))return function(t,e){const r=Ti(e).reduce((e,r,n)=>{const a=Object.keys(t),s=r?.type?r.type:r;return o=i(t[a[n]],s),Object.defineProperty(e,n.toString(),{enumerable:!0,value:o??t[a[n]]}),e;var o},{});return r}(t,e);if(Ln(e))return t;if(\$n(e))return t;if(ci.isAbiType(e))return t;if(Un(e))return t;if(Fn(e))return t;if(bn.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(\`Your object includes the property : \${e}, containing an Uint256 object without the 'low' and 'high' keys.\`);return{low:r.low,high:r.high}}if(wn.isAbiType(e)){const r=t;if("object"!=typeof r)return r;if(!["limb0","limb1","limb2","limb3"].every(t=>t in r))throw Error(\`Your object includes the property : \${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.\`);return{limb0:r.limb0,limb1:r.limb1,limb2:r.limb2,limb3:r.limb3}}if(In(e,r)){const n=r[e].members;return a(t,n)}return t},a=(t,e)=>e.reduce((e,r)=>{if("undefined"===t[r.name]&&(Vn(r.type)||!vn(r.name)))throw Error(\`Your object needs a property with key : \${r.name} .\`);var n;return n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n??t[r.name]}),e},{}),s=(t,e)=>{if(Bn(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),a=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return r.isOk()?new Jn(Xn.Ok,i(t.unwrap(),n)):new Jn(Xn.Err,i(t.unwrap(),a))}if(xn(e.name)){const r=t,n=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return r.isSome()?new Zn(Wn.Some,i(r.unwrap(),n)):new Zn(Wn.None,{})}const r=t,n=Object.entries(r.variant).map(t=>{if(br(t[1]))return t;const n=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===n?t:[t[0],i(r.unwrap(),n)]});return new Kn(Object.fromEntries(n))};return e.reduce((e,r)=>{return vn(r.name)&&!Vn(r.type)||(n=i(t[r.name],r.type),Object.defineProperty(e,r.name,{enumerable:!0,value:n})),e;var n},{})}(e,r.inputs,this.structs,this.enums);n=Object.values(t),Fi(r,n,this.structs,this.enums)}const i=n[Symbol.iterator](),a=r.inputs.reduce((t,e)=>vn(e.name)&&!Vn(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:r,enums:n,parser:i}){const{name:a,type:s}=e;let{value:o}=t.next();switch(!0){case Si.isTypeFixedArray(s):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(\`ABI expected parameter \${a} to be an array or an object, got \${o}\`);return ki({element:o,type:e.type,structs:r,enums:n,parser:i});case An(s):if(!Array.isArray(o)&&!an(o))throw Error(\`ABI expected parameter \${a} to be array or long string, got \${o}\`);return Er(o)&&(o=cn(o)),ki({element:o,type:e.type,structs:r,enums:n,parser:i});case \$n(s):return Ii({type:Hn(s),val:o,parser:i});case Ln(s):return Ii({type:s,val:o,parser:i});case In(s,r)||Tn(s)||bn.isAbiType(s):case kn(s,n):return ki({element:o,type:s,structs:r,enums:n,parser:i});default:return Ii({type:s,val:o,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(a,"__compiled__",{enumerable:!1,writable:!1,value:!0}),a}static compile(t){const e=t=>{const e=(t,r=".")=>{const n=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(n).flatMap(([t,i])=>{let a=i;"entrypoint"===t?a=Zr(a):on(a)&&(a=hn(a));const s=Array.isArray(n)&&"0"===t?"\$\$len":t;if(vr(a))return[[\`\${r}\${s}\`,Yn(a)]];if(Object(a)===a){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),n=[...Object.getOwnPropertyNames(a),...t];if(n.includes("isSome")&&n.includes("isNone")){const t=a,n=t.isSome()?Wn.Some:Wn.None;return t.isSome()?e({0:n,1:t.unwrap()},\`\${r}\${s}.\`):[[\`\${r}\${s}\`,Yn(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const t=a,n=t.isOk()?Xn.Ok:Xn.Err;return e({0:n,1:t.unwrap()},\`\${r}\${s}.\`)}if(n.includes("variant")&&n.includes("activeVariant")){const t=a,n=t.activeVariant(),i=Object.keys(t.variant).findIndex(t=>t===n);return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[\`\${r}\${s}\`,Yn(i)]]:e({0:i,1:t.unwrap()},\`\${r}\${s}.\`)}return e(a,\`\${r}\${s}.\`)}return[[\`\${r}\${s}\`,Yn(a)]]})};return Object.fromEntries(e(t))};let r;if(Array.isArray(t)){const n=e({...t});r=Object.values(n)}else{const n=e(t);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,e){const{outputs:r}=this.abi.find(e=>e.name===t),n=e.flat()[Symbol.iterator](),i=r.flat().reduce((t,e,r)=>{const i=e.name??r;return t[i]=Ci({responseIterator:n,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[\`\${i}_len\`]&&delete t[\`\${i}_len\`],t},{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,r){return ti(this.parse(t,e),r)}static getAbiStruct(t){return t.filter(t=>"struct"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{})}static getAbiEnum(t){const e=t.filter(t=>"enum"===t.type).reduce((t,e)=>({...t,[e.name]:e}),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map(t=>Br(t))}decodeParameters(t,e){const r=Array.isArray(t)?t:[t],n=e.flat()[Symbol.iterator](),i=r.map(t=>Ci({responseIterator:n,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums}));return 1===i.length?i[0]:i}};Ot({},{calculateContractAddressFromHash:()=>ma,calculateDeclareTransactionHash:()=>la,calculateDeployAccountTransactionHash:()=>da,calculateInvokeTransactionHash:()=>ua,calculateL2MessageTxHash:()=>ca,computeCompiledClassHash:()=>Ta,computeContractClassHash:()=>ka,computeHashOnElements:()=>pa,computeHintedClassHash:()=>wa,computeLegacyContractClassHash:()=>va,computePedersenHash:()=>ha,computePedersenHashOnElements:()=>ya,computePoseidonHash:()=>fa,computePoseidonHashOnElements:()=>ga,computeSierraContractClassHash:()=>Ia,formatSpaces:()=>_a,getL1MessageHash:()=>tn,getL2MessageHash:()=>Qr,getSelector:()=>Xr,getSelectorFromName:()=>Zr,hashByteCodeSegments:()=>Aa,keccakBn:()=>Kr,poseidon:()=>Et,solidityUint256PackedKeccak256:()=>Jr,starknetKeccak:()=>Wr}),Ot({},{calculateDeclareTransactionHash:()=>ta,calculateDeployAccountTransactionHash:()=>Qi,calculateInvokeTransactionHash:()=>ea,calculateTransactionHashCommon:()=>Ji,encodeDataResourceBoundsL1:()=>Zi,encodeResourceBoundsL1:()=>Ki,encodeResourceBoundsL2:()=>Wi,hashDAMode:()=>Yi,hashFeeFieldV3B3:()=>Xi});var Hi=t=>t.map(t=>BigInt(t)),Mi=32n,\$i=128n,ji=64n+\$i,qi=BigInt(un("L1_GAS")),zi=BigInt(un("L2_GAS")),Gi=BigInt(un("L1_DATA"));function Yi(t,e){return(BigInt(t)<<Mi)+BigInt(e)}function Ki(t){return(qi<<ji)+(t.l1_gas.max_amount<<\$i)+t.l1_gas.max_price_per_unit}function Wi(t){return(zi<<ji)+(t.l2_gas.max_amount<<\$i)+t.l2_gas.max_price_per_unit}function Zi(t){return(Gi<<ji)+(t.l1_data_gas.max_amount<<\$i)+t.l1_data_gas.max_price_per_unit}function Xi(t,e){const r=Ki(e),n=Wi(e),i=Zi(e);return(0,rt.poseidonHashMany)([BigInt(t),r,n,i])}function Ji(t,e,r,n,i,a,s,o,c,u,l=[]){const d=Xi(a,u),h=Yi(o,c),f=Hi([t,e,r,d,(0,rt.poseidonHashMany)(Hi(s)),n,i,h,...Hi(l)]);return Br((0,rt.poseidonHashMany)(f))}function Qi(t,e,r,n,i,a,s,o,c,u,l,d){return Ji(Le.DEPLOY_ACCOUNT,i,t,a,s,l,d,o,c,u,[(0,rt.poseidonHashMany)(Hi(r)),e,n])}function ta(t,e,r,n,i,a,s,o,c,u,l,d){return Ji(Le.DECLARE,n,r,i,a,l,Hi(d),o,c,u,[(0,rt.poseidonHashMany)(Hi(s)),t,e])}function ea(t,e,r,n,i,a,s,o,c,u,l){return Ji(Le.INVOKE,e,t,n,i,u,l,s,o,c,[(0,rt.poseidonHashMany)(Hi(a)),(0,rt.poseidonHashMany)(Hi(r))])}Ot({},{calculateDeclareTransactionHash:()=>aa,calculateDeployAccountTransactionHash:()=>sa,calculateL2MessageTxHash:()=>ca,calculateTransactionHash:()=>oa,calculateTransactionHashCommon:()=>ia,computeHashOnElements:()=>na});var ra={};function na(t){return[...t,t.length].reduce((t,e)=>rt.pedersen(kr(t),kr(e)),0).toString()}function ia(t,e,r,n,i,a,s,o=[]){const c=na(i);return na([t,e,r,n,c,a,s,...o])}function aa(t,e,r,n,i,a,s){return ia(Le.DECLARE,r,e,0,[t],n,i,[a,...s?[s]:[]])}function sa(t,e,r,n,i,a,s,o){const c=[e,n,...r];return ia(Le.DEPLOY_ACCOUNT,i,t,0,c,a,s,[o])}function oa(t,e,r,n,i,a){return ia(Le.INVOKE,e,t,0,r,n,i,[a])}function ca(t,e,r,n,i,a){const s=[t,...n];return ia(Le.L1_HANDLER,0,e,Xr(r),s,0,i,[a])}function ua(t){if(function(t){return[Pt.ETransactionVersion.V3,Pt.ETransactionVersion.F3].includes(t.version)}(t))return ea(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function la(t){if(function(t){return[Pt.ETransactionVersion.V3,Pt.ETransactionVersion.F3].includes(t.version)}(t))return ta(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function da(t){if(function(t){return[Pt.ETransactionVersion.V3,Pt.ETransactionVersion.F3].includes(t.version)}(t))return Qi(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function ha(t,e){return rt.pedersen(BigInt(t),BigInt(e))}function fa(t,e){return Br(rt.poseidonHash(BigInt(t),BigInt(e)))}function pa(t){return[...t,t.length].reduce((t,e)=>rt.pedersen(BigInt(t),BigInt(e)),0).toString()}Ot(ra,{starkCurve:()=>rt,weierstrass:()=>At});var ya=pa;function ga(t){return Br((0,rt.poseidonHashMany)(t.map(t=>BigInt(t))))}function ma(t,e,r,n){const i=pa(Vi.compile(r)),a=pa([Yn("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,t,e,i]);return Br(BigInt(a)%he)}function ba(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function _a(t){let e=!1;const r=[];for(const n of t)'"'===n&&0==(r.length>0&&"\\\\"===r.slice(-1)[0])&&(e=!e),e?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function wa(t){const{abi:e,program:r}=t,n=_a(yr({abi:e,program:r},ba));return Kt(rt.keccak(\$t(n)).toString(16))}function va(t){const e=Er(t)?fr(t):t,r=Br(ue),n=pa(e.entry_points_by_type.EXTERNAL.flatMap(t=>[t.selector,t.offset])),i=pa(e.entry_points_by_type.L1_HANDLER.flatMap(t=>[t.selector,t.offset])),a=pa(e.entry_points_by_type.CONSTRUCTOR.flatMap(t=>[t.selector,t.offset])),s=pa(e.program.builtins.map(t=>un(t))),o=wa(e),c=pa(e.program.data);return pa([r,n,i,a,s,o,c])}function Ea(t){const e=t.flatMap(t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,(0,rt.poseidonHashMany)(e.flatMap(t=>BigInt(un(t)))))];var e});return(0,rt.poseidonHashMany)(e)}function Aa(t){const e=t.bytecode.map(t=>BigInt(t)),r=t.bytecode_segment_lengths??[];let n=0;const i=r.flatMap(t=>{const r=e.slice(n,n+=t);return[BigInt(t),(0,rt.poseidonHashMany)(r)]});return 1n+(0,rt.poseidonHashMany)(i)}function Ta(t){const e=BigInt(un("COMPILED_CLASS_V1")),r=Ea(t.entry_points_by_type.EXTERNAL),n=Ea(t.entry_points_by_type.L1_HANDLER),i=Ea(t.entry_points_by_type.CONSTRUCTOR),a=t.bytecode_segment_lengths?Aa(t):(0,rt.poseidonHashMany)(t.bytecode.map(t=>BigInt(t)));return Br((0,rt.poseidonHashMany)([e,r,n,i,a]))}function Sa(t){const e=t.flatMap(t=>[BigInt(t.selector),BigInt(t.function_idx)]);return(0,rt.poseidonHashMany)(e)}function Ia(t){const e=BigInt(un("CONTRACT_CLASS_V0.1.0")),r=Sa(t.entry_points_by_type.EXTERNAL),n=Sa(t.entry_points_by_type.L1_HANDLER),i=Sa(t.entry_points_by_type.CONSTRUCTOR),a=function(t){const e=_a(yr(t.abi,null));return BigInt(Kt(rt.keccak(\$t(e)).toString(16)))}(t),s=(0,rt.poseidonHashMany)(t.sierra_program.map(t=>BigInt(t)));return Br((0,rt.poseidonHashMany)([e,r,n,i,a,s]))}function ka(t){const e=Er(t)?fr(t):t;return"sierra_program"in e?Ia(e):va(e)}var xa={};function Ba(t){const e=Er(t)?t:yr(t);return zt((0,Tt.ZI)(e))}function Ca(t){if(Array.isArray(t))return t;const e=Ht((0,Tt.Aq)(qt(t)));return fr(e)}function Ra(){const t=rt.utils.randomPrivateKey();return(0,rt.getStarkKey)(t)}function Oa(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(t=>Br(t));try{const{r:e,s:r}=t;return[Br(e),Br(r)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Na(t){return Lr(Oa(t))}function Da(t){return Ur(Oa(t))}function Pa(){return La({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function La(t,e=\$e.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:qr(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:qr(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:qr(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:qr(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:qr(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:qr(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function Ua(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Fa(t,e=\$e.get("resourceBoundsOverhead")){return qr(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*qr(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+qr(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*qr(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+qr(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*qr(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Va(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Ha(t){if(t===We.L1)return Ze.L1;if(t===We.L2)return Ze.L2;throw Error("EDAM conversion")}function Ma(t,e){const r=Br(e||t);if(!Object.values(Ke).includes(r))throw Error(\`\${e?"providedVersion":"defaultVersion"} \${r} is not ETransactionVersion\`);return r}function \$a(t){if(!t)return;const e=Br(t);if(e===Ge.V0)return Ge.F0;if(e===Ge.V1)return Ge.F1;if(e===Ge.V2)return Ge.F2;if(e===Ge.V3)return Ge.F3;throw Error(\`toFeeVersion: \${e} is not supported\`)}function ja(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||We.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||We.L1,resourceBounds:t.resourceBounds??Pa()}}function qa(t){const e=Br(t);return Kt(Gt((0,rt.getPublicKey)(e,!1)))}function za(t){const e=t=>{if(vr(t))return Br(t);if(Tr(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function Ga(t){const e=t=>{if(Er(t))return BigInt(t);if(Tr(t)){const r={};return Object.keys(t).forEach(n=>{r[n]=e(t[n])}),r}return t};return e(t)}function Ya(t){return"sierra_program"in(Er(t)?fr(t):t)}function Ka(t){const e={...t};if(Ya(t.contract)&&(!t.compiledClassHash&&t.casm&&(e.compiledClassHash=Ta(t.casm)),!e.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(e.classHash=t.classHash??ka(t.contract),!e.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return e}function Wa(){return Jt(Gt(St.bI.utils.randomPrivateKey()))}function Za(t){Pr(t,se,2n**160n-1n,"Ethereum Address ");const e=Kt(Yt(Br(t)).padStart(40,"0"));return mr(Boolean(e.match(/^(0x)?[0-9a-f]{40}\$/)),"Invalid Ethereum Address Format"),e}Ot(xa,{ZeroFeeEstimate:()=>Va,compressProgram:()=>Ba,decompressProgram:()=>Ca,formatSignature:()=>Oa,getFullPublicKey:()=>qa,intDAM:()=>Ha,randomAddress:()=>Ra,resourceBoundsToBigInt:()=>Ga,resourceBoundsToEstimateFeeResponse:()=>Ua,resourceBoundsToHexString:()=>za,signatureToDecimalArray:()=>Na,signatureToHexArray:()=>Da,toFeeVersion:()=>\$a,toOverheadOverallFee:()=>Fa,toOverheadResourceBounds:()=>La,toTransactionVersion:()=>Ma,v3Details:()=>ja,zeroResourceBounds:()=>Pa}),Ot({},{ethRandomPrivateKey:()=>Wa,validateAndParseEthAddress:()=>Za});var Xa="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||void 0!==r.g&&r.g.fetch.bind(r.g)||(()=>{throw new ii("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function Ja(t){const e=t.version?Br(t.version):Ge.V3;return e===Ge.V3||e===Ge.F3}function Qa(t,e){const r=t.split("."),n=e.split(".");return r.every((t,e)=>"*"===t||t===n[e])}function ts(t,e={allowAnyPatchVersion:!1}){return Object.values(Ue).some(r=>Qa(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:\`\${e[0]}.\${e[1]}.*\`}(r):r,t))}function es(t){return new Promise(e=>{setTimeout(e,t)})}function rs(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=_a(yr(t.abi)),e.sierra_program=_a(yr(t.sierra_program)),e.sierra_program=Ba(e.sierra_program),e}function ns(t){const e=Er(t)?fr(t):t;return Ya(t)?rs(e):{...e,..."program"in e&&{program:Ba(e.program)}}}function is(t){return Er(t.abi)?fr(t.abi):t.abi}Ot({},{Block:()=>us,createSierraContractClass:()=>rs,extractAbi:()=>is,getDefaultNodeUrl:()=>as,getDefaultNodes:()=>ss,getSupportedRpcVersions:()=>os,parseContract:()=>ns,validBlockTags:()=>cs,wait:()=>es});var as=(t,e=!1,r)=>{e||qe.info("Using default public node url, please provide nodeUrl in provider options!");const n=ss(r??\$e.get("rpcVersion"))[t??De.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function ss(t){const e={...Ve};return Object.keys(e).forEach(function(r,n){e[r]=e[r].map(e=>\`\${e}\${function(t){const[e,r]=t.replace(/^v/,"").split(".");return\`v\${e}_\${r}\`}(t)}\`)}),e}function os(){return[...new Set(Object.values(Ue))]}var cs=Object.values(ir),us=class{hash=null;number=null;tag=null;setIdentifier(t){if(Er(t))if(nn(t))this.number=parseInt(t,10);else if(Sr(t))this.hash=t;else{if(!cs.includes(t))throw TypeError(\`Block identifier unmanaged: \${t}\`);this.tag=t}else vr(t)?this.hash=Br(t):_r(t)?this.number=t:this.tag=ir.LATEST;if(_r(this.number)&&this.number<0)throw TypeError(\`Block number (\${this.number}) can't be negative\`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?\`blockNumber=\${this.number}\`:null!==this.hash?\`blockHash=\${this.hash}\`:\`blockNumber=\${this.tag}\`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function ls(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}Ot({},{fromCallsToExecuteCalldata:()=>hs,fromCallsToExecuteCalldata_cairo1:()=>fs,getCompiledCalldata:()=>ls,getExecuteCalldata:()=>ps,getVersionsByType:()=>ys,transformCallsToMulticallArrays:()=>ds});var ds=t=>{const e=[],r=[];return t.forEach(t=>{const n=Vi.compile(t.calldata||[]);e.push({to:kr(t.contractAddress).toString(10),selector:kr(Zr(t.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:e,calldata:Vi.compile({calldata:r})}},hs=t=>{const{callArray:e,calldata:r}=ds(t);return[...Vi.compile({callArray:e}),...r]},fs=t=>{const e=t.map(t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:Vi.compile(t.calldata)}));return Vi.compile({orderCalls:e})},ps=(t,e="0")=>"1"===e?fs(t):hs(t);function ys(t){return"fee"===t?{v3:Ge.F3}:{v3:Ge.V3}}var gs={headers:{"Content-Type":"application/json"},blockIdentifier:ir.LATEST,retries:200},ms=class{id="RPC081";channelSpecVersion=Ue.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(De).includes(s)?this.nodeUrl=as(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||as(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||\$e.get("fetch")||Xa,this.blockIdentifier=n??gs.blockIdentifier,this.chainId=i,this.headers={...gs.headers,...a},this.retries=o??gs.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,_r(r)&&(this.batchClient=new gr({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),qe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yr(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new ai(r,t,e);if(n instanceof ii)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Qa(this.channelSpecVersion,t)||qe.error(Me.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ts(t))throw new ii(\`\${Me.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Br(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new us(n).identifier,a=Ur(t),s=Ur(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Br(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new us(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Br(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:i=!0,skipFeeCharge:a=!0}=e,s=new us(r).identifier,o=[];return i&&o.push(n.vn.SKIP_VALIDATE),a&&o.push(n.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const r=Br(t);let{retries:i}=this,s=!1,o=!1;const c=e?.retryInterval??this.transactionRetryIntervalDefault,u=e?.errorStates??[n.sI.REJECTED],l=e?.successStates??[n.sI.ACCEPTED_ON_L2,n.sI.ACCEPTED_ON_L1],d=[];let h;for(;!s;){await es(c);try{h=await this.getTransactionStatus(r),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(u.includes(t)||u.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=h,o=!0,n}(l.includes(t)||l.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof ai&&t.isType("TXN_HASH_NOT_FOUND")){qe.info("txLife: ",d);const t={[a.sI.RECEIVED]:Me.txEvictedFromMempool,[a.sI.PRE_CONFIRMED]:Me.consensusFailed,[a.sI.CANDIDATE]:Me.txFailsBlockBuildingValidation}[d.at(-1)];if(t)throw new Error(t)}if(i<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}i-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(r)}catch(t){if(i<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}i-=1,await es(c)}return f}getStorageAt(t,e,r=this.blockIdentifier){const n=Br(t),i=Rr(e),a=new us(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const i=new us(e).identifier,a={simulation_flags:r?[n.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:i,...a})}async invoke(t,e){let r;if(!Ja(e))throw Error(Me.legacyTxRPC08Message);if(!Xe(e.resourceBounds))throw Error(Me.SWOldV3);return r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:n.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),version:n.WY.V3,signature:Da(t.signature),nonce:Br(e.nonce),resource_bounds:za(e.resourceBounds),tip:Br(e.tip),paymaster_data:e.paymasterData.map(t=>Br(t)),account_deployment_data:e.accountDeploymentData.map(t=>Br(t)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:t,signature:e,senderAddress:r,compiledClassHash:i},a){let s;if(!Ya(t)||!Ja(a))throw Error(Me.legacyTxRPC08Message);if(!Xe(a.resourceBounds))throw Error(Me.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:n.wV.DECLARE,sender_address:r,compiled_class_hash:i||"",version:n.WY.V3,signature:Da(e),nonce:Br(a.nonce),contract_class:{sierra_program:Ca(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:za(a.resourceBounds),tip:Br(a.tip),paymaster_data:a.paymasterData.map(t=>Br(t)),account_deployment_data:a.accountDeploymentData.map(t=>Br(t)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:r,signature:i},a){let s;if(!Ja(a))throw Error(Me.legacyTxRPC08Message);if(!Xe(a.resourceBounds))throw Error(Me.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:n.wV.DEPLOY_ACCOUNT,version:n.WY.V3,signature:Da(i),nonce:Br(a.nonce),contract_address_salt:Br(r||0),constructor_calldata:Vi.toHex(e||[]),class_hash:Br(t),resource_bounds:za(a.resourceBounds),tip:Br(a.tip),paymaster_data:a.paymasterData.map(t=>Br(t)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const r=new us(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Zr(t.entrypoint),calldata:Vi.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Za(r),to_address:Br(n),entry_point_selector:Xr(i),payload:Mr(a)},o=new us(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=ys(e);let i;if(!Ja(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(i={signature:Da(t.signature),nonce:Br(t.nonce),resource_bounds:za(t.resourceBounds),tip:Br(t.tip),paymaster_data:t.paymasterData.map(t=>Br(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Br(t))},t.type===n.wV.INVOKE)return{type:n.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),version:Br(t.version||r.v3),...i};if(t.type===n.wV.DECLARE){if(!Ya(t.contract))throw qe.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Ca(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:Br(t.version||r.v3),...i}}if(t.type===n.wV.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=i;return{type:t.type,constructor_calldata:Vi.toHex(t.constructorCalldata||[]),class_hash:Br(t.classHash),contract_address_salt:Br(t.addressSalt||0),version:Br(t.version||r.v3),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},bs={};Ot(bs,{RpcChannel:()=>ws});var _s={headers:{"Content-Type":"application/json"},blockIdentifier:ir.LATEST,retries:200},ws=class{id="RPC090";channelSpecVersion=Ue.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:r,blockIdentifier:n,chainId:i,headers:a,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(De).includes(s)?this.nodeUrl=as(s,t?.default,this.channelSpecVersion):this.nodeUrl=s||as(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||\$e.get("fetch")||Xa,this.blockIdentifier=n??_s.blockIdentifier,this.chainId=i,this.headers={..._s.headers,...a},this.retries=o??_s.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,_r(r)&&(this.batchClient=new gr({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch,rpcMethods:{}})),qe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yr(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new ai(r,t,e);if(n instanceof ii)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:r,result:n}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,r),n}const r=await this.fetch(t,e,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Qa(this.channelSpecVersion,t)||qe.error(Me.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ts(t))throw new ii(\`\${Me.unsupportedSpecVersion}, channelId: \${this.id}\`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=Br(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],r=[],n=this.blockIdentifier){const i=new us(n).identifier,a=Ur(t),s=Ur(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(t){const e=Br(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new us(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const r=new us(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:e})}getTransactionReceipt(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=Br(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=Br(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=e,s=new us(r).identifier,o=[];return n&&o.push(a.vn.SKIP_VALIDATE),i&&o.push(a.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(t=>this.buildTransaction(t)),simulation_flags:o})}async waitForTransaction(t,e){const r=Br(t);let{retries:n}=this,i=!1,s=!1;const o=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],u=e?.successStates??[a.en.ACCEPTED_ON_L2,a.en.ACCEPTED_ON_L1],l=[];let d;for(;!i;){await es(o);try{d=await this.getTransactionStatus(r),l.push(d.finality_status);const t=d.execution_status,e=d.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const r=\`\${t}: \${e}\`,n=new Error(r);throw n.response=d,s=!0,n}(u.includes(t)||u.includes(e))&&(i=!0)}catch(t){if(t instanceof Error&&s)throw t;if(t instanceof ai&&t.isType("TXN_HASH_NOT_FOUND")){qe.info("txLife: ",l);const t={[a.sI.RECEIVED]:Me.txEvictedFromMempool,[a.sI.PRE_CONFIRMED]:Me.consensusFailed,[a.sI.CANDIDATE]:Me.txFailsBlockBuildingValidation}[l.at(-1)];if(t)throw new Error(t)}if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1}let h=null;for(;null===h;){try{h=await this.getTransactionReceipt(r)}catch(t){if(n<=0)throw new Error(\`waitForTransaction timed-out with retries \${this.retries}\`)}n-=1,await es(o)}return h}async fastWaitForTransaction(t,e,r,n){const i=BigInt(r);let s=n?.retries??50;const o=n?.retryInterval??500,c=[a.If.REVERTED],u=[a.en.ACCEPTED_ON_L2,a.en.ACCEPTED_ON_L1,a.en.PRE_CONFIRMED];let l;const d=(new Date).getTime();for(;s>0;){await es(o),l=await this.getTransactionStatus(t),qe.info(\`\${s} \${JSON.stringify(l)} \${((new Date).getTime()-d)/1e3}s.\`);const r=l.execution_status??"",n=l.finality_status;if(c.includes(r)){const t=new Error(\`\${r}: \${n}\`);throw t.response=l,t}if(u.includes(n)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,ir.PRE_CONFIRMED)),qe.info(\`\${s} Checking new nonce \${t} \${((new Date).getTime()-d)/1e3}s.\`),t!==i)return!0;await es(o),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,r=this.blockIdentifier){const n=Br(t),i=Rr(e),a=new us(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:a})}getClassHashAt(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(t,e=this.blockIdentifier){const r=Br(t),n=new us(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:r=!0}={}){const n=new us(e).identifier,i={simulation_flags:r?[a.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(t=>this.buildTransaction(t,"fee")),block_id:n,...i})}async invoke(t,e){const r=this.buildTransaction({type:Pt.ETransactionType.INVOKE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(t,e){const r=this.buildTransaction({type:Pt.ETransactionType.DECLARE,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(t,e){const r=this.buildTransaction({type:Pt.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:r});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(t,e=this.blockIdentifier){const r=new us(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Zr(t.entrypoint),calldata:Vi.toHex(t.calldata)},block_id:r})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:a}=t,s={from_address:Za(r),to_address:Br(n),entry_point_selector:Xr(i),payload:Mr(a)},o=new us(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const r=ys(e);mr(Ja(t),Me.legacyTxRPC08Message),mr("transaction"!==e||Xe(t.resourceBounds),Me.SWOldV3);const n={signature:Da(t.signature),nonce:Br(t.nonce),resource_bounds:za(t.resourceBounds),tip:Br(t.tip),paymaster_data:t.paymasterData.map(t=>Br(t)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(t=>Br(t)),version:Ma(r.v3,t.version)};if(t.type===Pt.ETransactionType.INVOKE)return{type:a.wV.INVOKE,sender_address:t.contractAddress,calldata:Vi.toHex(t.calldata),...n};if(t.type===Pt.ETransactionType.DECLARE)return mr(Ya(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Ca(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...n};if(t.type===Pt.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...r}=n;return{type:t.type,constructor_calldata:Vi.toHex(t.constructorCalldata||[]),class_hash:Br(t.classHash),contract_address_salt:Br(t.addressSalt||0),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}},vs=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||void 0!==r.g&&r.g.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(t=>({resourceBounds:La(t,this.resourceBoundsOverhead),overall_fee:Fa(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(t){return t.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:La(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:Fa(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:Er(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function Es(t){return"0x3"===t.version&&"tip"in t&&Er(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function As(t,e=!0){return t.transactions.filter(Es).map(t=>BigInt(t.tip)).filter(t=>e||t>0n)}function Ts(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Ss(t,e){const r=e/100*(t.length-1),n=Math.floor(r),i=Math.ceil(r);if(n===i)return t[n];const a=r-n,s=t[n];return s+(t[i]-s)*BigInt(Math.round(1e3*a))/1000n}function Is(t){mr(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((t,e)=>e<t?e:t,pe.max),r=t.reduce((t,e)=>e>t?e:t,0n),n=t.reduce((t,e)=>t+e,0n)/BigInt(t.length),i=[...t].sort((t,e)=>t<e?-1:t>e?1:0),a=Math.floor(i.length/2);let s;s=i.length%2==0?(i[a-1]+i[a])/2n:i[a];const o=new Map;t.forEach(t=>{o.set(t,(o.get(t)||0)+1)});const{modeTip:c}=Array.from(o.entries()).reduce((t,[e,r])=>r>t.maxCount||r===t.maxCount&&e<t.modeTip?{maxCount:r,modeTip:e}:t,{maxCount:0,modeTip:0n});return{minTip:e,maxTip:r,averageTip:n,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:Ss(i,90),p95Tip:Ss(i,95)}}async function ks(t,e){try{const r=await t.getBlockWithTxs(e);return _r(r.block_number)?r.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new ii(\`Failed to determine starting block number: \${t instanceof Error?t.message:"Unknown error"}\`)}}async function xs(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return qe.warn(\`Failed to fetch block \${e}:\`,t),null}}function Bs(t,e){const r=Math.max(0,t-e+1),n=t-r+1;return Array.from({length:n},(e,r)=>t-r)}async function Cs(t,e=ir.LATEST,r={}){const{maxBlocks:n=3,minTxsNecessary:i=10}=r;return mr(Number.isInteger(n),"maxBlocks parameter must be an integer"),mr(n>=1,"maxBlocks parameter must be greater than or equal to 1"),mr(n<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),mr(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),mr(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await ks(t,e),s=Bs(r,n),o=await async function(t,e){const r=e.map(async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return qe.warn(\`Failed to fetch block \${e} in parallel:\`,t),null}});return Promise.all(r)}(t,s),c=o.filter(t=>null!==t).flatMap(t=>As(t,a)),u=o.filter(t=>null!==t).length;return c.length<i?(qe.error(\`Insufficient transaction data: found \${c.length} V3 transactions with tips in \${u} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),Ts(u,c)):{...Is(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new ii(\`Failed to analyze tip statistics (parallel): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r):async function(t,e,r){const{maxBlocks:n=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=r;try{const r=await ks(t,e),s=Bs(r,n),o=[];let c=0;for(const e of s){const r=await xs(t,e);if(r){c+=1;const t=As(r,a);if(o.push(...t),o.length>=i)break}}return o.length<i?(qe.error(\`Insufficient transaction data: found \${o.length} V3 transactions with tips in \${c} blocks (block range: \${Math.max(0,r-n+1)}-\${r}). Required: \${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.\`),Ts(c,o)):{...Is(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(t){throw new ii(\`Failed to analyze tip statistics (sequential): \${t instanceof Error?t.message:"Unknown error"}\`)}}(t,e,r)}var Rs=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[r,n]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:r,writable:!1,enumerable:!1,configurable:!1},value:{value:n,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>r in t?t[r](n):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===r,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===r,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===r,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===nr.SUCCEEDED}static isReverted(t){return t.execution_status===nr.REVERTED}},Os={[nr.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[nr.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Ns(t){const e=Os[t.execution_status];let r;if(e){const{statusReceipt:n,getBaseData:i,getValue:a}=e,s=a(t);r={...i(t),statusReceipt:n,value:s,match:t=>n in t?t[n](s):t._(),isSuccess:()=>"SUCCEEDED"===n,isReverted:()=>"REVERTED"===n,isError:()=>!1}}else{const t=new Error("Unknown response type");r={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(r,Rs.prototype),Object.defineProperty(r,"constructor",{value:Rs,writable:!1,enumerable:!1,configurable:!1}),r}Ot({},{encodeData:()=>Ks,encodeType:()=>zs,encodeValue:()=>Ys,getDependencies:()=>qs,getMessageHash:()=>Zs,getStructHash:()=>Ws,getTypeHash:()=>Gs,isMerkleTreeType:()=>js,prepareSelector:()=>\$s,validateTypedData:()=>Ms,verifyMessage:()=>Xs}),Ot({},{MerkleTree:()=>Ds,proofMerklePath:()=>Ps});var Ds=class t{leaves;branches=[];root;hashMethod;constructor(t,e=ha){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const r=[];for(let n=0;n<e.length;n+=2)n+1===e.length?r.push(t.hash(e[n],"0x0",this.hashMethod)):r.push(t.hash(e[n],e[n+1],this.hashMethod));return this.build(r)}static hash(t,e,r=ha){const[n,i]=[BigInt(t),BigInt(e)].sort((t,e)=>t>=e?1:-1);return r(n,i)}getProof(e,r=this.leaves,n=[]){const i=r.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===r.length)return n;const a=i%2==0,s=(a?r[i+1]:r[i-1])??"0x0",o=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(t=>t.length===r.length),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(a?e:s,a?s:e,this.hashMethod),u,o)}};function Ps(t,e,r,n=ha){if(0===r.length)return t===e;const[i,...a]=r;return Ps(t,Ds.hash(e,i,n),a,n)}var Ls={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Us={[Pt.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ga,hashMerkleMethod:fa,escapeTypeString:t=>\`"\${t}"\`,presetTypes:Ls},[Pt.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:ya,hashMerkleMethod:ha,escapeTypeString:t=>t,presetTypes:{}}};function Fs(t,e,{min:r,max:n}){const i=BigInt(t);mr(i>=r&&i<=n,\`\${i} (\${e}) is out of bounds [\${r}, \${n}]\`)}function Vs({types:t,domain:e}){return Us[Pt.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===Pt.TypedDataRevision.ACTIVE?Pt.TypedDataRevision.ACTIVE:Us[Pt.TypedDataRevision.LEGACY].domain in t&&(e.revision??Pt.TypedDataRevision.LEGACY)===Pt.TypedDataRevision.LEGACY?Pt.TypedDataRevision.LEGACY:void 0}function Hs(t){try{return Br(t)}catch(e){if(Er(t))return Br(un(t));throw new Error(\`Invalid BigNumberish: \${t}\`)}}function Ms(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Vs(e))}function \$s(t){return Sr(t)?t:Zr(t)}function js(t){return"merkletree"===t.type}function qs(t,e,r=[],n="",i=Pt.TypedDataRevision.LEGACY){let a=[e];return"*"===e[e.length-1]?a=[e.slice(0,-1)]:i===Pt.TypedDataRevision.ACTIVE&&("enum"===e?a=[n]:e.match(/^\\(.*\\)\$/)&&(a=e.slice(1,-1).split(",").map(t=>"*"===t[t.length-1]?t.slice(0,-1):t))),a.filter(e=>!r.includes(e)&&t[e]).reduce((e,r)=>[...e,...[r,...t[r].reduce((e,r)=>[...e,...qs(t,r.type,e,r.contains,i).filter(t=>!e.includes(t))],[])].filter(t=>!e.includes(t))],[])}function zs(t,e,r=Pt.TypedDataRevision.LEGACY){const n=r===Pt.TypedDataRevision.ACTIVE?{...t,...Us[r].presetTypes}:t,[i,...a]=qs(n,e,void 0,void 0,r),s=i?[i,...a.sort()]:[],o=Us[r].escapeTypeString;return s.map(t=>{const e=n[t].map(t=>{const e="enum"===t.type&&r===Pt.TypedDataRevision.ACTIVE?t.contains:t.type,n=e.match(/^\\(.*\\)\$/)?\`(\${e.slice(1,-1).split(",").map(t=>t?o(t):t).join(",")})\`:o(e);return\`\${o(t.name)}:\${n}\`});return\`\${o(t)}(\${e})\`}).join("")}function Gs(t,e,r=Pt.TypedDataRevision.LEGACY){return Zr(zs(t,e,r))}function Ys(t,e,r,n={},i=Pt.TypedDataRevision.LEGACY){if(t[e])return[e,Ws(t,e,r,i)];if(Us[i].presetTypes[e])return[e,Ws(Us[i].presetTypes,e,r,i)];if(e.endsWith("*")){const n=r.map(r=>Ys(t,e.slice(0,-1),r,void 0,i)[1]);return[e,Us[i].hashMethod(n)]}switch(e){case"enum":if(i===Pt.TypedDataRevision.ACTIVE){const[a,s]=Object.entries(r)[0],o=t[n.parent].find(t=>t.name===n.key),c=t[o.contains],u=c.find(t=>t.name===a),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map((e,r)=>{if(!e)return e;const n=s[r];return Ys(t,e,n,void 0,i)[1]});return[e,Us[i].hashMethod([l,...d])]}return[e,Hs(r)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const r=t[e.parent].find(t=>t.name===e.key);if(!js(r))throw new Error(\`\${e.key} is not a merkle tree\`);if(r.contains.endsWith("*"))throw new Error(\`Merkle tree contain property must not be an array but was given \${e.key}\`);return r.contains}return"raw"}(t,n),a=r.map(r=>Ys(t,e,r,void 0,i)[1]),{root:s}=new Ds(a,Us[i].hashMerkleMethod);return["felt",s]}case"selector":return["felt",\$s(r)];case"string":if(i===Pt.TypedDataRevision.ACTIVE){const t=hn(r),n=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Us[i].hashMethod(n)]}return[e,Hs(r)];case"i128":if(i===Pt.TypedDataRevision.ACTIVE){const t=BigInt(r);return Fs(t,e,Se),[e,Hs(t<0n?le+t:t)]}return[e,Hs(r)];case"timestamp":case"u128":return i===Pt.TypedDataRevision.ACTIVE&&Fs(r,e,we),[e,Hs(r)];case"felt":case"shortstring":return i===Pt.TypedDataRevision.ACTIVE&&Fs(Hs(r),e,pe),[e,Hs(r)];case"ClassHash":case"ContractAddress":return i===Pt.TypedDataRevision.ACTIVE&&Fs(r,e,pe),[e,Hs(r)];case"bool":return i===Pt.TypedDataRevision.ACTIVE&&mr(wr(r),\`Type mismatch for \${e} \${r}\`),[e,Hs(r)];default:if(i===Pt.TypedDataRevision.ACTIVE)throw new Error(\`Unsupported type: \${e}\`);return[e,Hs(r)]}}function Ks(t,e,r,n=Pt.TypedDataRevision.LEGACY){const i=t[e]??Us[n].presetTypes[e],[a,s]=i.reduce(([i,a],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw new Error(\`Cannot encode data: missing data for '\${s.name}'\`);const o=r[s.name],c={parent:e,key:s.name},[u,l]=Ys(t,s.type,o,c,n);return[[...i,u],[...a,l]]},[["felt"],[Gs(t,e,n)]]);return[a,s]}function Ws(t,e,r,n=Pt.TypedDataRevision.LEGACY){return Us[n].hashMethod(Ks(t,e,r,n)[1])}function Zs(t,e){if(!Ms(t))throw new Error("Typed data does not match JSON schema");const r=Vs(t),{domain:n,hashMethod:i}=Us[r];return i([un("StarkNet Message"),Ws(t.types,n,t.domain,r),e,Ws(t.types,t.primaryType,t.message,r)])}function Xs(t,e,r,n){const i=Ms(t);if(!Gr(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===n)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Gr(n))throw new Error("accountAddress shall be a BigNumberish");const a=i?Zs(t,n):Br(t),s=Array.isArray(e)?new rt.Signature(BigInt(e[0]),BigInt(e[1])):e,o=Br(r);return rt.verify(s,a,o)}var Js=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new vs;else{const e=t;if(e&&e.specVersion)if(Qa("0.8",e.specVersion))this.channel=new ze.RpcChannel({...e,waitMode:!1});else{if(!Qa("0.9",e.specVersion))throw new Error(\`unsupported channel for spec version: \${e.specVersion}\`);this.channel=new bs.RpcChannel({...e,waitMode:!1})}else if(Qa("0.8",\$e.get("rpcVersion")))this.channel=new ze.RpcChannel({...e,waitMode:!1});else{if(!Qa("0.9",\$e.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new bs.RpcChannel({...e,waitMode:!1})}this.responseParser=new vs(e?.resourceBoundsOverhead)}}static async create(t){const e=new ze.RpcChannel({...t}),r=await e.getSpecVersion();if(ts(r)||qe.warn(\`Using incompatible node spec version \${r}\`),Qa("0.8",r))return new this({...t,specVersion:Ue.v0_8_1});if(Qa("0.9",r))return new this({...t,specVersion:Ue.v0_9_0});throw new ii(\`Provided RPC node specification version \${r} is not compatible with the SDK. SDK supported RPC versions \${Object.keys(Ue).toString()}\`)}fetch(t,e,r=0){return this.channel.fetch(t,e,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=ir.LATEST,e=5e3){if(t===ir.LATEST)return;if("pending"===t)return;const r=await this.getBlockNumber(),n=t===ir.PRE_CONFIRMED?r+1:Number(Br(t));if(n<=r)return;const{retries:i}=this.channel;let a=i,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await es(e),a-=1,a<=0)throw new Error(\`waitForBlock() timed-out after \${i} tries.\`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof bs.RpcChannel)return async function(t,e=t.blockIdentifier){const r=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(r.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(r.l1_gas_price.price_in_fri),l2GasPrice:BigInt(r.l2_gas_price.price_in_fri)}}(this.channel,t);throw new ii("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);mr("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:r,contract_address:n,entry_point_selector:i,nonce:a}=e;return Jr([r[0],n,a,i,r.length-1,...r.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Ns(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(t=>this.responseParser.parseSimulateTransactionResponse(t))}async waitForTransaction(t,e){return Ns(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,r,n){if(this.channel instanceof bs.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,r,n);throw new Error("Unsupported channel type")}async getStorageAt(t,e,r){return this.channel.getStorageAt(t,e,r)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let i;if(t)i=await this.getClassAt(t,r);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,r)}return Ya(i)?n?{cairo:"1",compiler:jn(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Pt.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeclareEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Pt.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getDeployAccountEstimateFee(t,e,r,n){return(await this.getEstimateFeeBulk([{type:Pt.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:r,skipValidate:n}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(t=>this.responseParser.parseFeeEstimateBulkResponse(t))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof ze.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof bs.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,r,n,i){return async function(t,e,r,n,i,a){const s=Ms(e);if(!Gr(e)&&!s)throw new Error("message has a wrong format.");if(!Gr(n))throw new Error("accountAddress shall be a BigNumberish");const o=s?Zs(e,n):Br(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:Br(n),entrypoint:e,calldata:Vi.compile({hash:kr(o).toString(),signature:Oa(r)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some(e=>t.message.includes(e)))return!1;l=t}throw Error(\`Signature verification Error: \${l}\`)}(this,t,e,r,n,i)}async isClassDeclared(t,e){let r;if(!t.classHash&&"contract"in t)r=Ka(t).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");r=t.classHash}try{return await this.getClass(r,e)instanceof Object}catch(t){if(t instanceof ii)return!1;throw t}}async prepareInvocations(t){const e=[];for(const r of t)r.type===Pt.ETransactionType.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||e.unshift(r):e.push(r);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,r,n){return this.channel.getStorageProof(t,e,r,n)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return Cs(this,t,e)}};Ot({},{StarknetIdContract:()=>co,StarknetIdIdentityContract:()=>lo,StarknetIdMulticallContract:()=>fo,StarknetIdPfpContract:()=>mo,StarknetIdPopContract:()=>_o,StarknetIdVerifierContract:()=>yo,dynamicCallData:()=>Ao,dynamicFelt:()=>Eo,execution:()=>vo,getStarknetIdContract:()=>uo,getStarknetIdIdentityContract:()=>ho,getStarknetIdMulticallContract:()=>po,getStarknetIdPfpContract:()=>bo,getStarknetIdPopContract:()=>wo,getStarknetIdVerifierContract:()=>go,isStarkDomain:()=>To,useDecoded:()=>so,useEncoded:()=>oo});var Qs="abcdefghijklmnopqrstuvwxyz0123456789-",to=BigInt(Qs.length+1),eo="",ro=BigInt(Qs.length),no=BigInt(eo.length),io=BigInt(eo.length+1);function ao(t){let e=0;for(;t.endsWith(eo[eo.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function so(t){let e="";return t.forEach(t=>{for(;t!==se;){const r=t%to;if(t/=to,r===BigInt(Qs.length)){const r=t/io;if(r===se){const n=t%io;t=r,e+=n===se?Qs[0]:eo[Number(n)-1]}else e+=eo[Number(t%no)],t/=no}else e+=Qs[Number(r)]}const[r,n]=ao(e);n&&(e=r+(n%2==0?eo[eo.length-1].repeat(n/2-1)+eo[0]+Qs[1]:eo[eo.length-1].repeat((n-1)/2+1))),e+="."}),e?e.concat("stark"):e}function oo(t){let e=BigInt(0),r=BigInt(1);if(t.endsWith(eo[0]+Qs[1])){const[e,r]=ao(t.substring(0,t.length-2));t=e+eo[eo.length-1].repeat(2*(r+1))}else{const[e,r]=ao(t);r&&(t=e+eo[eo.length-1].repeat(1+2*(r-1)))}for(let n=0;n<t.length;n+=1){const i=t[n],a=Qs.indexOf(i),s=BigInt(Qs.indexOf(i));if(-1!==a)n===t.length-1&&t[n]===Qs[0]?(e+=r*ro,r*=to,r*=to):(e+=r*s,r*=to);else if(-1!==eo.indexOf(i)){e+=r*ro,r*=to;const a=(n===t.length-1?1:0)+eo.indexOf(i);e+=r*BigInt(a),r*=no}}return e}var co={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function uo(t){switch(t){case Pe.SN_MAIN:return co.MAINNET;case Pe.SN_SEPOLIA:return co.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var lo={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function ho(t){switch(t){case Pe.SN_MAIN:return lo.MAINNET;case Pe.SN_SEPOLIA:return lo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var fo="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function po(t){switch(t){case Pe.SN_MAIN:case Pe.SN_SEPOLIA:return fo;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var yo={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function go(t){switch(t){case Pe.SN_MAIN:return yo.MAINNET;case Pe.SN_SEPOLIA:return yo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var mo={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function bo(t){switch(t){case Pe.SN_MAIN:return mo.MAINNET;case Pe.SN_SEPOLIA:return mo.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var _o={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function wo(t){switch(t){case Pe.SN_MAIN:return _o.MAINNET;case Pe.SN_SEPOLIA:return _o.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function vo(t,e=void 0,r=void 0){return new Kn({Static:t,IfEqual:e?Gn(e[0],e[1],e[2]):void 0,IfNotEqual:r?Gn(r[0],r[1],r[2]):void 0})}function Eo(t,e=void 0){return new Kn({Hardcoded:t,Reference:e?Gn(e[0],e[1]):void 0})}function Ao(t,e=void 0,r=void 0){return new Kn({Hardcoded:t,Reference:e?Gn(e[0],e[1]):void 0,ArrayReference:r?Gn(r[0],r[1]):void 0})}function To(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\\.)*[a-z0-9-]{1,48}\\.stark\$/.test(t)}var So=class t{async getStarkName(e,r){return t.getStarkName(this,e,r)}async getAddressFromStarkName(e,r){return t.getAddressFromStarkName(this,e,r)}async getStarkProfile(e,r,n,i,a,s,o){return t.getStarkProfile(this,e,r,n,i,a,s,o)}static async getStarkName(t,e,r){const n=await t.getChainId(),i=r??uo(n);try{const r=so((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:Vi.compile({address:e,hint:[]})})).map(t=>BigInt(t)).slice(1));if(!r)throw Error("Starkname not found");return r}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,r){const n=e.endsWith(".stark")?e:\`\${e}.stark\`;if(!To(n))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),a=r??uo(i);try{const e=n.replace(".stark","").split(".").map(t=>oo(t).toString(10));return(await t.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:Vi.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,r,n,i,a,s,o){const c=await t.getChainId(),u=r??uo(c),l=n??ho(c),d=i??go(c),h=a??bo(c),f=s??wo(c),p=o??po(c);try{const r=[{execution:vo({}),to:Ao(u),selector:Ao(Zr("address_to_domain")),calldata:[Ao(e),Ao("0")]},{execution:vo({}),to:Eo(u),selector:Eo(Zr("domain_to_id")),calldata:[Ao(void 0,void 0,[0,0])]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("twitter")),Ao(d),Ao("0")]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("github")),Ao(d),Ao("0")]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("discord")),Ao(d),Ao("0")]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("proof_of_personhood")),Ao(f),Ao("0")]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("nft_pp_contract")),Ao(h),Ao("0")]},{execution:vo({}),to:Eo(l),selector:Eo(Zr("get_extended_verifier_data")),calldata:[Ao(void 0,[1,0]),Ao(un("nft_pp_id")),Ao("2"),Ao(h),Ao("0")]},{execution:vo(void 0,void 0,[6,0,0]),to:Eo(void 0,[6,0]),selector:Eo(Zr("tokenURI")),calldata:[Ao(void 0,[7,1]),Ao(void 0,[7,2])]}],n=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:Vi.compile({calls:r})});if(Array.isArray(n)){const t=parseInt(n[0],16),e=[];let r=1;for(let i=0;i<t&&r<n.length;i+=1){const t=parseInt(n[r],16);r+=1;const i=n.slice(r,r+t);e.push(i),r+=t}const i=so(e[0].slice(1).map(t=>BigInt(t))),a="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,s="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,o="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:a,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===n[0]?e[8].slice(1).map(t=>ln(t)).join(""):void 0)||\`https://starknet.id/api/identicons/\${BigInt(e[1][0]).toString()}\`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function Io(t){return oo(t.endsWith(".brother")?t.replace(".brother",""):t)}function ko(t){const e=so([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?\`\${e}.brother\`:e}function xo(t){return Pe.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var Bo=class t{async getBrotherName(e,r){return t.getBrotherName(this,e,r)}async getAddressFromBrotherName(e,r){return t.getAddressFromBrotherName(this,e,r)}async getBrotherProfile(e,r){return t.getBrotherProfile(this,e,r)}static async getBrotherName(t,e,r){await t.getChainId();const n=r??xo();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:Vi.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother name not found");return ko(BigInt(r[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,r){const n=e.endsWith(".brother")?e:\`\${e}.brother\`;if(!n.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=r??xo();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:Vi.compile({domain:Io(n)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,r){await t.getChainId();const n=r??xo();try{const r=await t.callContract({contractAddress:n,entrypoint:"getPrimary",calldata:Vi.compile({user:e})});if(!r[0]||"0x0"===r[0])throw Error("Brother profile not found");const i=ko(BigInt(r[0])).replace(".brother",""),a=await t.callContract({contractAddress:n,entrypoint:"get_details_by_domain",calldata:Vi.compile({domain:Io(i)})});return{name:i,resolver:a[1],tokenId:a[2],expiryDate:parseInt(a[3],16),lastTransferTime:parseInt(a[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},Co=class extends((0,It.Mixin)(Js,So,Bo)){},Ro=(new Js({default:!0}),class{pk;constructor(t=rt.utils.randomPrivateKey()){this.pk=t instanceof Uint8Array?Gt(t):Br(t)}async getPubKey(){return rt.getStarkKey(this.pk)}async signMessage(t,e){const r=Zs(t,e);return this.signRaw(r)}async signTransaction(t,e){const r=ps(t,e.cairoVersion);let n;if(!Object.values(Pt.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;n=ua({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:Ha(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:Ha(t.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeployAccountTransaction(t){const e=Vi.compile(t.constructorCalldata);let r;if(!Object.values(Pt.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const n=t;r=da({...n,salt:n.addressSalt,compiledConstructorCalldata:e,version:n.version,nonceDataAvailabilityMode:Ha(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Ha(n.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeclareTransaction(t){let e;if(!Object.values(Pt.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const r=t;e=la({...r,version:r.version,nonceDataAvailabilityMode:Ha(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Ha(r.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return rt.sign(t,this.pk)}});function Oo(t){return new bn(t).toBigInt()}function No(t){return bn.is(t)}function Do(t){return new bn(t).toUint256HexString()}function Po(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function Lo(t){const e=t.calldata??[],r=Array.isArray(e)?e:Vi.compile(e);return{to:t.contractAddress,selector:Zr(t.entrypoint),calldata:r}}function Uo(t,e){const r=Lo(t);return"1"===e?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function Fo(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Vo(t,e,r,n,i){return"1"===i?{types:lr,primaryType:"OutsideExecution",domain:Fo(t,i),message:{...e,nonce:r,calls_len:n.length,calls:n.map(t=>Uo(t,i))}}:{types:dr,primaryType:"OutsideExecution",domain:Fo(t,i),message:{Caller:e.caller,Nonce:r,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:n.map(t=>Uo(t,i))}}}function Ho(t){const e=t.outsideExecution,r=Oa(t.signature);return Vi.compile({outside_execution:e,signature:r})}function Mo(t){return(Array.isArray(t)?t:[t]).map(t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:Br(t.signerAddress),entrypoint:e,calldata:Ho(t)}})}async function \$o(t,e,r){const n={contractAddress:Br(e),entrypoint:"supports_interface",calldata:[Br(r)]};try{const e=await t.callContract(n);return 0n!==BigInt(e[0])}catch{return!1}}Ot({},{bnToUint256:()=>Do,isUint256:()=>No,uint256ToBN:()=>Oo}),Ot({},{buildExecuteFromOutsideCall:()=>Mo,buildExecuteFromOutsideCallData:()=>Ho,getOutsideCall:()=>Lo,getTypedData:()=>Vo,toOutsideCallV2:()=>Po}),Ot({},{supportsInterface:()=>\$o}),Ot({},{assertCallsAreStrictlyEqual:()=>qo,assertPaymasterTransactionSafety:()=>zo,getDefaultPaymasterNodeUrl:()=>jo});var jo=(t,e=!1)=>{e||qe.info("Using default public node url, please provide nodeUrl in provider options!");const r=He[t??De.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function qo(t,e){const r="Provided calls are not strictly equal to the returned calls";mr(e.length-1===t.length,\`\${r}: Expected \${t.length+1} calls, got \${e.length}\`);for(let n=0;n<t.length;n+=1){const i=t[n],a=Po(e[n]),s=t=>kr(t).toString(16).toLowerCase();mr(s(i.contractAddress)===s(a.To),\`\${r}: Contract address mismatch at call \${n}. Expected: \${i.contractAddress}, Got: \${a.To}\`),mr(Zr(i.entrypoint)===a.Selector,\`\${r}: Entrypoint mismatch at call \${n}. Expected: \${i.entrypoint}, Got: \${a.Selector}\`);const o=Vi.toCalldata(i.calldata),c=Vi.toCalldata(a.Calldata);mr(o.length===c.length,\`\${r}: Calldata length mismatch at call \${n}. Expected length: \${o.length}, Got length: \${c.length}\`);for(let t=0;t<o.length;t+=1)mr(BigInt(o[t])===BigInt(c[t]),\`\${r}: Calldata value mismatch at call \${n}, parameter \${t}. Expected: \${o[t]}, Got: \${c[t]}\`)}}var zo=(t,e,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;qo(e,i),((t,e)=>{const r=Po(t[t.length-1]);mr(BigInt(r.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,r.feeMode.gasToken),n&&(mr(t.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((t,e)=>{const r=Po(t[t.length-1]),n=Vi.toCalldata(r.Calldata)[1];mr(BigInt(n)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},Go=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},Yo=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,Ko=t=>{return{version:t.version,feeMode:(r=t.fee_mode,"sponsored"===r.mode?{mode:"sponsored"}:{mode:"default",gasToken:r.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,r},Wo={"Content-Type":"application/json"},Zo=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...Wo,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??jo(void 0),this.headers={...Wo,...e.headers},this.baseFetch=e.baseFetch??Xa,void(this.requestId=0);const{nodeUrl:r,headers:n,baseFetch:i}=e||{};r&&Object.values(De).includes(r)?this.nodeUrl=jo(r,e?.default):this.nodeUrl=r||jo(void 0,e?.default),this.baseFetch=i??Xa,this.headers={...Wo,...n},this.requestId=0}fetch(t,e,r=0){const n={id:r,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:yr(n),headers:this.headers})}errorHandler(t,e,r,n){if(r)throw new ai(r,t,e);if(n instanceof ii)throw n;if(n)throw Error(n.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const r=await this.fetch(t,e,this.requestId),{error:n,result:i}=await r.json();return this.errorHandler(t,e,n),i}catch(r){throw this.errorHandler(t,e,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:(n=t.invoke.calls,n.map(t=>({to:t.contractAddress,selector:Zr(t.entrypoint),calldata:Vi.toHex(t.calldata)})))}};break;default:r=t}var n;const i={version:e.version,fee_mode:Go(e.feeMode),time_bounds:Yo(e.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),s={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:Ko(a.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:Ko(a.parameters),fee:s};default:return{type:"deploy",deployment:a.deployment,parameters:Ko(a.parameters),fee:s}}}async executeTransaction(t,e){let r;switch(t.type){case"invoke":case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Da(t.invoke.signature)}};break;default:r=t}const n={version:e.version,fee_mode:Go(e.feeMode),time_bounds:Yo(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))}},Xo=new Zo({default:!0}),Jo=class{address;entryPoint;constructor(t,e){this.address=t??ke.ADDRESS,this.entryPoint=e??ke.ENTRYPOINT}buildDeployerCall(t,e){const r=[].concat(t).map(t=>{const{classHash:r,salt:n,unique:i=!0,constructorCalldata:a=[],abi:s}=t,o=ls(a,()=>{if(s){const t=new Vi(s),e=Object.values(a);return t.validate(ar,"constructor",e),t.compile("constructor",e)}return Vi.compile(a)}),c=n??Ra();return{call:{contractAddress:Br(this.address),entrypoint:this.entryPoint,calldata:[r,c,\$r(i),o.length,...o]},address:ma(i?rt.pedersen(e,c):c,r,o,i?this.address:0)}});return{calls:r.map(t=>t.call),addresses:r.map(t=>t.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(t=>Dr(t.from_address)===Dr(Br(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},Qo=new Jo(ke.ADDRESS,ke.ENTRYPOINT),tc=(new Jo(Ie.ADDRESS,Ie.ENTRYPOINT),class extends Co{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:r,signer:n,cairoVersion:i,transactionVersion:a,paymaster:s,defaultTipType:o}=t;super(e),this.address=r.toLowerCase(),this.signer=Er(n)||n instanceof Uint8Array?new Ro(n):n,i&&(this.cairoVersion=i.toString()),this.transactionVersion=a??\$e.get("transactionVersion"),this.paymaster=s?new Zo(s):Xo,this.deployer=t.deployer??Qo,this.defaultTipType=o??\$e.get("defaultTipType"),qe.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new ii("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return kr(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const r=[{type:Pt.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(r,e))[0]}async estimateDeclareFee(t,e={}){mr(Ya(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const r=[{type:Pt.ETransactionType.DECLARE,payload:Ka(t)}];return(await this.estimateFeeBulk(r,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},i={}){const a=Vi.compile(r),s=n??ma(e,t,a,0),o=[{type:Pt.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:a,addressSalt:e,contractAddress:s}}];return(await this.estimateFeeBulk(o,i))[0]}async estimateDeployFee(t,e={}){const{calls:r}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(r,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[Ua(e.resourceBounds)];const{nonce:r,blockIdentifier:n,version:i,skipValidate:a}=e,s=await this.resolveDetailsWithTip(e),o=await this.accountInvocationsFactory(t,{...ja(s),versions:[Ma(\$a(this.transactionVersion)||Ke.F3,i)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getEstimateFeeBulk(o,{blockIdentifier:n,skipValidate:a})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:r,blockIdentifier:n,skipValidate:i=!0,skipExecute:a,version:s}=e,o=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...ja(o),versions:[this.resolveTransactionVersion(s)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:n,skipValidate:i,skipExecute:a})}async execute(t,e={}){const r=[t].flat(),n=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let a=i;a||(a=(await this.estimateInvokeFee(r,n)).resourceBounds);const s=(await this.accountInvocationsFactory([{type:Pt.ETransactionType.INVOKE,payload:r}],{...ja(n),resourceBounds:a,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:s.contractAddress,calldata:s.calldata,signature:s.signature},{...ja(n),resourceBounds:s.resourceBounds,nonce:s.nonce,version:s.version})}async fastExecute(t,e={},r={}){mr(this.channel instanceof bs.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),mr(this.channel.blockIdentifier===ir.PRE_CONFIRMED,"Provider needs to be initialized with \`pre_confirmed\` blockIdentifier option.");const n=BigInt(e.nonce??await this.getNonceForAddress(this.address,ir.PRE_CONFIRMED)),i={...e,nonce:n},a=await this.execute(t,i);return{txResult:a,isReady:await this.fastWaitForTransaction(a.transaction_hash,this.address,n,r)}}async declareIfNot(t,e={}){const r=Ka(t);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(t,e)}return{transaction_hash:"",class_hash:r.classHash}}async declare(t,e={}){mr(Ya(t.contract),Me.declareNonSierra);const r=Ka(t),n=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let a=i;a||(a=(await this.estimateDeclareFee(t,n)).resourceBounds);const s=(await this.accountInvocationsFactory([{type:Pt.ETransactionType.DECLARE,payload:r}],{...ja(n),resourceBounds:a,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:s.senderAddress,signature:s.signature,contract:s.contract,compiledClassHash:s.compiledClassHash},{...ja(n),nonce:s.nonce,resourceBounds:s.resourceBounds,version:s.version})}async deploy(t,e={}){const{calls:r,addresses:n}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(r,e),contract_address:n}}async deployContract(t,e={}){const r=await this.deploy(t,e),n=await this.waitForTransaction(r.transaction_hash,e);return this.deployer.parseDeployerEvent(n)}async declareAndDeploy(t,e={}){let r=await this.declareIfNot(t,e);if(""!==r.transaction_hash){const t=await this.waitForTransaction(r.transaction_hash,e);r={...r,...t}}const n=await this.deployContract({...t,classHash:r.class_hash},e);return{declare:{...r},deploy:n}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:r=0,contractAddress:n},i={}){const a=Vi.compile(e),s=n??ma(r,t,a,0),o=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let u=c;u||(u=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:r,contractAddress:s},o)).resourceBounds);const l=(await this.accountInvocationsFactory([{type:Pt.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:a,addressSalt:r,contractAddress:s}}],{...ja(o),resourceBounds:u,versions:[this.resolveTransactionVersion(i.version)],nonce:se,skipValidate:!1}))[0];return super.deployAccountContract({classHash:l.classHash,addressSalt:l.addressSalt,constructorCalldata:l.constructorCalldata,signature:l.signature},{...ja(o),nonce:l.nonce,resourceBounds:l.resourceBounds,version:l.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Zs(t,this.address)}async getSnip9Version(){return await \$o(this,this.address,Ce)?"2":await \$o(this,this.address,Be)?"1":"0"}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[Br(t)]},r=await this.callContract(e);return 0n!==BigInt(r[0])}catch(t){throw new Error(\`Failed to check if nonce is valid: \${t}\`)}}async getSnip9Nonce(){const t=Ra();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,r,n){if(!Sr(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(\`The caller \${t.caller} is not valid.\`);const i=Sr(t.caller)?t.caller:xe,a=[e].flat(),s=r??await this.getSnip9Version();if(!s)throw new Error("This account is not handling outside transactions.");const o=n?Br(n):await this.getSnip9Nonce(),c=Vo(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},o,a,s),u=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:o,execute_after:t.execute_after,execute_before:t.execute_before,calls:a.map(Lo)},signature:u,signerAddress:this.address,version:s}}async executeFromOutside(t,e){const r=Mo(t);return this.execute(r,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return Ma(this.transactionVersion||Ke.V3,t)}async buildInvocation(t,e){const r=ps(t,await this.getCairoVersion()),n=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...ja(e),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(t,e){const{classHash:r,contract:n,compiledClassHash:i}=Ka(t),a=ns(n);mr(!br(i)&&(e.version===Ke.F3||e.version===Ke.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const s=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...ja(e),classHash:r,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:s,contract:a,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:r=[],contractAddress:n},i){const a=Vi.compile(r),s=n??ma(e,t,a,0),o=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...ja(i),classHash:t,contractAddress:s,addressSalt:e,constructorCalldata:a});return{...ja(i),classHash:t,addressSalt:e,constructorCalldata:a,signature:o}}async accountInvocationsFactory(t,e){const{nonce:r,blockIdentifier:n,skipValidate:i=!0}=e,a=await this.getNonceSafe(r),s=await this.getChainId(),o=e.versions.map(t=>Ma(t)),c="payload"in t[0]?t[0].payload:t[0],u=t[0].type===Pt.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(t,r)=>{const c="payload"in t?t.payload:t,l={...ja(e),walletAddress:this.address,nonce:kr(Number(a)+r),chainId:s,cairoVersion:u,version:o[0],skipValidate:i},d={type:t.type,nonce:kr(Number(a)+r),blockIdentifier:n,version:o[0]};if(t.type===Pt.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),l);return{...d,...t,...l}}if(t.type===Pt.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,l);return{...d,...e,...l,type:Pt.ETransactionType.INVOKE}}if(t.type===Pt.ETransactionType.DECLARE){mr(Ya(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,l);return{...d,...t,...l}}if(t.type===Pt.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,l);return{...d,...t,...l}}throw Error(\`accountInvocationsFactory: unsupported transaction type: \${t}\`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&"0"===await this.getSnip9Version())throw Error("Account is not compatible with SNIP-9");const r={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let n;return n=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(n,r)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const r=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Da(r)},deployment:t.deployment};break}case"invoke":{const r=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Da(r)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,r){const n=await this.buildPaymasterTransaction(t,e);zo(n,t,e,r);const i=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(i,n.parameters).then(t=>({transaction_hash:t.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}});function ec(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function rc(t){return t.request({type:"wallet_getPermissions"})}function nc(t,e){return t.request({type:"wallet_watchAsset",params:e})}function ic(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function ac(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function sc(t){return t.request({type:"wallet_requestChainId"})}function oc(t){return t.request({type:"wallet_deploymentData"})}function cc(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function uc(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function lc(t,e){return t.request({type:"wallet_signTypedData",params:e})}function dc(t){return t.request({type:"wallet_supportedSpecs"})}function hc(t,e){t.on("accountsChanged",e)}function fc(t,e){t.on("networkChanged",e)}function pc(t){return"event"===t.type}function yc(t){const e=t.filter(t=>pc(t)&&"struct"===t.kind),r=t.filter(t=>pc(t)&&"enum"===t.kind);return e.reduce((t,e)=>{let n=[],{name:i}=e,a=!1;const s=t=>t.type===i;for(;;){const t=r.find(t=>t.variants.some(s));if(br(t))break;const e=t.variants.find(s);n.unshift(e.name),"flat"===e.kind&&(a=!0),i=t.name}if(0===n.length)throw new Error("inconsistency in ABI events definition.");a&&(n=[n[n.length-1]]);const o=n.pop();let c={[Kt(rt.keccak(\$t(o)).toString(16))]:e};for(;n.length>0;)c={[Kt(rt.keccak(\$t(n.pop())).toString(16))]:c};return c={...c},mc(t,c)},{})}function gc(t){return Mn(t)?yc(t):function(t){return t.filter(t=>"event"===t.type).reduce((t,e)=>{const r=e.name,n={...e};return n.name=r,{...t,[Kt(rt.keccak(\$t(r)).toString(16))]:n}},{})}(t)}function mc(t,e){const r={...t};return Tr(t)&&Tr(e)&&Object.keys(e).forEach(n=>{Tr(e[n])?n in t?r[n]=mc(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function bc(t,e,r,n,i){return t.flat().reduce((t,a)=>{const s=JSON.parse(JSON.stringify(a));let o=e[s.keys.shift()??0];if(!o)return t;for(;!o.name;){const t=s.keys.shift();mr(!!t,'Not enough data in "keys" property of this event.'),o=o[t]}const c={};c[o.name]={};const u=s.keys[Symbol.iterator](),l=s.data[Symbol.iterator](),d=o.members?.filter(t=>"key"===t.kind)||o.keys,h=o.members?.filter(t=>"data"===t.kind)||o.data;return d.forEach(t=>{c[o.name][t.name]=Ci({responseIterator:u,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),h.forEach(t=>{c[o.name][t.name]=Ci({responseIterator:l,output:t,structs:r,enums:n,parser:i,parsedResult:c[o.name]})}),"block_hash"in s&&(c.block_hash=s.block_hash),"block_number"in s&&(c.block_number=s.block_number),"transaction_hash"in s&&(c.transaction_hash=s.transaction_hash),t.push(c),t},[])}function _c(t){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(t)}function wc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wc(Object(r),!0).forEach(function(e){Ec(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ec(t,e,r){return(e=function(t){var e=function(t){if("object"!=_c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=_c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ac(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function a(r,n,i,a){var c=n&&n.prototype instanceof o?n:o,u=Object.create(c.prototype);return Tc(u,"_invoke",function(r,n,i){var a,o,c,u=0,l=i||[],d=!1,h={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return a=e,o=0,c=t,h.n=r,s}};function f(r,n){for(o=r,c=n,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],f=h.p,p=a[2];r>3?(i=p===n)&&(c=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=t):a[0]<=f&&((i=r<2&&f<a[1])?(o=0,h.v=n,h.n=a[1]):f<p&&(i=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,h.n=p,o=0))}if(i||r>1)return s;throw d=!0,n}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),o=l,c=p;(e=o<2?t:c)||!d;){a||(o?o<3?(o>1&&(h.n=-1),f(o,c)):h.n=c:h.v=c);try{if(u=2,a){if(o||(i="next"),e=a[i]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,o<2&&(o=0)}else 1===o&&(e=a.return)&&e.call(a),o<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=t}else if((e=(d=h.n<0)?c:r.call(n,h))!==s)break}catch(e){a=t,o=1,c=e}finally{u=1}}return{value:e,done:d}}}(r,i,a),!0),u}var s={};function o(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(Tc(e={},n,function(){return this}),e),d=u.prototype=o.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Tc(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=u,Tc(d,"constructor",u),Tc(u,"constructor",c),c.displayName="GeneratorFunction",Tc(u,i,"GeneratorFunction"),Tc(d),Tc(d,i,"Generator"),Tc(d,n,function(){return this}),Tc(d,"toString",function(){return"[object Generator]"}),(Ac=function(){return{w:a,m:h}})()}function Tc(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Tc=function(t,e,r,n){function a(e,r){Tc(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(a("next",0),a("throw",1),a("return",2))},Tc(t,e,r,n)}function Sc(t,e,r,n,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,i)}function Ic(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function s(t){Sc(a,n,i,s,o,"next",t)}function o(t){Sc(a,n,i,s,o,"throw",t)}s(void 0)})}}Ot({},{addDeclareTransaction:()=>uc,addInvokeTransaction:()=>cc,addStarknetChain:()=>ic,deploymentData:()=>oc,getPermissions:()=>rc,onAccountChange:()=>hc,onNetworkChanged:()=>fc,requestAccounts:()=>ec,requestChainId:()=>sc,signMessage:()=>lc,supportedSpecs:()=>dc,switchStarknetChain:()=>ac,watchAsset:()=>nc}),Ot({},{getAbiEvents:()=>gc,isAbiEvent:()=>pc,parseEvents:()=>bc}),Pt.TypedDataRevision;var kc={STRK:"0x0408163bfcfc2d76f34b444cb55e09dace5905cf84c0884e4637c2c0f06ab6ed",ETH:"0x02cf0dc1d9e8c7731353dd15e6f2f22140120ef2d27116b982fa4fed87f6fef5",USDC:"0x02caae365e67921979a4e5c16dd70eaa5776cfc6a9592bcb903d91933aaf2552"};function xc(t){return t?"0x"+t.replace(/^0x/i,"").padStart(64,"0"):t}var Bc=null,Cc=null,Rc=null;function Oc(t){return Bc=new Co({nodeUrl:t}),!0}function Nc(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"STRK";if(!Bc)throw new Error("Provider not initialized");var n=xc(kc[r]);if(!n)throw new Error("Unknown token: ".concat(r));return Cc=new t.Account(e,n,Bc),!0}function Dc(t,e){if(!Bc)throw new Error("Provider not initialized");return Rc=new tc({provider:Bc,address:xc(t),signer:e}),!0}var Pc,Lc,Uc,Fc,Vc,Hc,Mc,\$c,jc,qc,zc,Gc,Yc,Kc,Wc,Zc,Xc,Jc={ping:(Xc=Ic(Ac().m(function t(){return Ac().w(function(t){for(;;)if(0===t.n)return t.a(2,"pong")},t)})),function(){return Xc.apply(this,arguments)}),init:(Zc=Ic(Ac().m(function t(e){var r,n,i,a,s;return Ac().w(function(t){for(;;)if(0===t.n)return r=e.rpcUrl,n=e.tongoPrivateKey,i=e.token,a=e.starkAddress,s=e.starkPrivateKey,Oc(r),Nc(n,i||"STRK"),a&&s&&Dc(a,s),t.a(2,{success:!0})},t)})),function(t){return Zc.apply(this,arguments)}),switchToken:(Wc=Ic(Ac().m(function t(e){var r,n;return Ac().w(function(t){for(;;)if(0===t.n)return r=e.tongoPrivateKey,n=e.token,Nc(r,n),t.a(2,{success:!0})},t)})),function(t){return Wc.apply(this,arguments)}),derivePublicKey:(Kc=Ic(Ac().m(function e(r){var n,i,a;return Ac().w(function(e){for(;;)if(0===e.n)return n=r.privateKey,i="string"==typeof n?BigInt(n):n,a=(0,t.derivePublicKey)(i),e.a(2,{x:a.x.toString(),y:a.y.toString()})},e)})),function(t){return Kc.apply(this,arguments)}),getTongoAddress:(Yc=Ic(Ac().m(function t(){var e;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return e=Cc.tongoAddress(),t.a(2,e)}},t)})),function(){return Yc.apply(this,arguments)}),pubKeyToBase58:(Gc=Ic(Ac().m(function e(r){var n,i;return Ac().w(function(e){for(;;)if(0===e.n)return n=r.x,i=r.y,e.a(2,(0,t.pubKeyAffineToBase58)({x:BigInt(n),y:BigInt(i)}))},e)})),function(t){return Gc.apply(this,arguments)}),base58ToPubKey:(zc=Ic(Ac().m(function e(r){var n,i;return Ac().w(function(e){for(;;)if(0===e.n)return n=r.base58,i=(0,t.pubKeyBase58ToAffine)(n),e.a(2,{x:i.x.toString(),y:i.y.toString()})},e)})),function(t){return zc.apply(this,arguments)}),getState:(qc=Ic(Ac().m(function t(){var e;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return t.n=2,Cc.state();case 2:return e=t.v,t.a(2,{balance:e.balance.toString(),pending:e.pending.toString(),nonce:e.nonce.toString()})}},t)})),function(){return qc.apply(this,arguments)}),getRate:(jc=Ic(Ac().m(function t(){var e;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return t.n=2,Cc.rate();case 2:return e=t.v,t.a(2,e.toString())}},t)})),function(){return jc.apply(this,arguments)}),erc20ToTongo:(\$c=Ic(Ac().m(function t(e){var r,n;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.amount,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return t.n=2,Cc.erc20ToTongo(BigInt(r));case 2:return n=t.v,t.a(2,n.toString())}},t)})),function(t){return \$c.apply(this,arguments)}),tongoToErc20:(Mc=Ic(Ac().m(function t(e){var r,n;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.amount,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return t.n=2,Cc.tongoToErc20(BigInt(r));case 2:return n=t.v,t.a(2,n.toString())}},t)})),function(t){return Mc.apply(this,arguments)}),fund:(Hc=Ic(Ac().m(function t(e){var r,n,i,a,s;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.amount,n=e.sender,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:if(Rc){t.n=2;break}throw new Error("Stark account not initialized");case 2:return t.n=3,Cc.fund({amount:BigInt(r),sender:xc(n)});case 3:return i=t.v,a=[],i.approve&&a.push(i.approve),a.push(i.toCalldata()),t.n=4,Rc.execute(a);case 4:return s=t.v,t.a(2,{txHash:s.transaction_hash})}},t)})),function(t){return Hc.apply(this,arguments)}),transfer:(Vc=Ic(Ac().m(function e(r){var n,i,a,s,o,c;return Ac().w(function(e){for(;;)switch(e.n){case 0:if(n=r.amount,i=r.recipientBase58,a=r.sender,Cc){e.n=1;break}throw new Error("Tongo account not initialized");case 1:if(Rc){e.n=2;break}throw new Error("Stark account not initialized");case 2:return s=(0,t.pubKeyBase58ToAffine)(i),e.n=3,Cc.transfer({amount:BigInt(n),to:s,sender:xc(a)});case 3:return o=e.v,e.n=4,Rc.execute([o.toCalldata()]);case 4:return c=e.v,e.a(2,{txHash:c.transaction_hash})}},e)})),function(t){return Vc.apply(this,arguments)}),withdraw:(Fc=Ic(Ac().m(function t(e){var r,n,i,a,s;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.amount,n=e.to,i=e.sender,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:if(Rc){t.n=2;break}throw new Error("Stark account not initialized");case 2:return t.n=3,Cc.withdraw({amount:BigInt(r),to:xc(n),sender:xc(i)});case 3:return a=t.v,t.n=4,Rc.execute([a.toCalldata()]);case 4:return s=t.v,t.a(2,{txHash:s.transaction_hash})}},t)})),function(t){return Fc.apply(this,arguments)}),rollover:(Uc=Ic(Ac().m(function t(e){var r,n,i;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.sender,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:if(Rc){t.n=2;break}throw new Error("Stark account not initialized");case 2:return t.n=3,Cc.rollover({sender:xc(r)});case 3:return n=t.v,t.n=4,Rc.execute([n.toCalldata()]);case 4:return i=t.v,t.a(2,{txHash:i.transaction_hash})}},t)})),function(t){return Uc.apply(this,arguments)}),getTxHistory:(Lc=Ic(Ac().m(function t(e){var r,n,i;return Ac().w(function(t){for(;;)switch(t.n){case 0:if(r=e.fromBlock,n=void 0===r?0:r,Cc){t.n=1;break}throw new Error("Tongo account not initialized");case 1:return t.n=2,Cc.getTxHistory(n);case 2:return i=t.v,t.a(2,i.map(function(t){var e,r;return vc(vc({},t),{},{amount:null===(e=t.amount)||void 0===e?void 0:e.toString(),nonce:null===(r=t.nonce)||void 0===r?void 0:r.toString()})}))}},t)})),function(t){return Lc.apply(this,arguments)}),generateKeypair:(Pc=Ic(Ac().m(function t(){var e,r;return Ac().w(function(t){for(;;)if(0===t.n)return e=xa.randomAddress(),r=ra.starkCurve.getStarkKey(e),t.a(2,{privateKey:e,publicKey:r})},t)})),function(){return Pc.apply(this,arguments)})};window.addEventListener("message",function(){var t=Ic(Ac().m(function t(e){var r,n,i,a,s,o,c,u;return Ac().w(function(t){for(;;)switch(t.p=t.n){case 0:t.p=0,r="string"==typeof e.data?JSON.parse(e.data):e.data,t.n=2;break;case 1:return t.p=1,t.v,t.a(2);case 2:if(i=(n=r).id,a=n.command,s=n.params,i&&a){t.n=3;break}return t.a(2);case 3:if(t.p=3,o=Jc[a]){t.n=4;break}throw new Error("Unknown command: ".concat(a));case 4:return t.n=5,o(s||{});case 5:c=t.v,window.ReactNativeWebView.postMessage(JSON.stringify({id:i,result:c})),t.n=7;break;case 6:t.p=6,u=t.v,window.ReactNativeWebView.postMessage(JSON.stringify({id:i,error:u.message||String(u)}));case 7:return t.a(2)}},t,null,[[3,6],[0,1]])}));return function(e){return t.apply(this,arguments)}}()),window.ReactNativeWebView.postMessage(JSON.stringify({type:"bridge-ready"}))})()})();</script></body></html>`;