# Agentic stack environment contract

# Marketplace backend base identity
AGENTIC_MARKETPLACE_NAME=Cloak Agent Marketplace
AGENTIC_MARKETPLACE_NETWORK=sepolia

# x402 facilitator
X402_FACILITATOR_URL=http://localhost:3000/api/v1/marketplace/payments/x402
X402_FACILITATOR_SECRET=replace-with-strong-secret
X402_DEFAULT_TOKEN=STRK
X402_DEFAULT_MIN_AMOUNT=100000000000000000
X402_PAYMENT_EXPIRY_SECONDS=300
X402_PROOF_VERIFIER_MODE=strict
X402_TONGO_CRYPTO_VERIFY=true
X402_REQUIRE_TONGO_PROOF_BUNDLE=true
X402_ENDPOINTS_REQUIRE_AUTH=false
X402_MAX_HEADER_BYTES=32768
X402_VERIFY_ONCHAIN_SETTLEMENT=true
X402_RECONCILE_SECRET=replace-me

# Runtime execution
CLOAK_SEPOLIA_RPC_URL=https://api.cartridge.gg/x/starknet/sepolia
CLOAK_SEPOLIA_RPC_FALLBACK_URL=
STARKZAP_PAYMASTER_URL=
# Set to deployed internal route, e.g. https://<backend>/api/v1/marketplace/starkzap/execute
STARKZAP_EXECUTOR_URL=
STARKZAP_EXECUTOR_API_KEY=
STARKZAP_LAYER_MODE=http
STARKZAP_LAYER_TARGET_URL=
STARKZAP_LAYER_TARGET_API_KEY=
STARKZAP_LAYER_RPC_METHOD=starkzap_execute
# Runtime mode: basic (default) or starkzap
MARKETPLACE_RUNTIME_PROTOCOL=basic
BASIC_PROTOCOL_SIGNER_ADDRESS=
BASIC_PROTOCOL_SIGNER_PRIVATE_KEY=
# Optional: required when signer account has on-chain 2FA enabled
BASIC_PROTOCOL_SIGNER_SECONDARY_PRIVATE_KEY=
# Optional: account cairo version for signer (0 or 1). Default: 1
BASIC_PROTOCOL_SIGNER_CAIRO_VERSION=1
# Optional: staking contract override for staking_steward basic mode
BASIC_PROTOCOL_STAKING_CONTRACT=
MARKETPLACE_REQUIRE_ONCHAIN_IDENTITY=false
ERC8004_OWNER_ENTRYPOINT=owner_of
ERC8004_WRITE_ENABLED=false
ERC8004_WRITE_ENTRYPOINT=
ERC8004_WRITE_WAIT_FOR_CONFIRMATION=true
ERC8004_WRITE_CONFIRM_TIMEOUT_MS=45000
ERC8004_SIGNER_ADDRESS=
ERC8004_SIGNER_PRIVATE_KEY=
ERC8004_SIGNER_SECONDARY_PRIVATE_KEY=
# Optional: account cairo version for ERC-8004 write signer (0 or 1). Default: 1
ERC8004_SIGNER_CAIRO_VERSION=1

# Optional: API-level metrics and tracing
AGENTIC_TRACE_SALT=cloak-agentic
AGENTIC_LOG_LEVEL=info
MARKETPLACE_IDEMPOTENCY_TTL_MS=900000
API_KEY_AUTH_CACHE_TTL_MS=30000
API_KEY_AUTH_NEGATIVE_CACHE_TTL_MS=10000
API_KEY_AUTH_CACHE_MAX_ENTRIES=5000

# Push-first ward approval dispatcher
PUSH_DISPATCH_ENABLED=true
PUSH_DISPATCH_SHADOW_MODE=false
PUSH_DISPATCH_SECRET=replace-me
PUSH_DISPATCH_BATCH_SIZE=25
PUSH_DISPATCH_LEASE_SECONDS=45
PUSH_DISPATCH_MAX_ATTEMPTS=6
PUSH_DISPATCH_BASE_RETRY_MS=5000
PUSH_DISPATCH_MAX_RETRY_MS=300000
PUSH_VAPID_PUBLIC_KEY=
PUSH_VAPID_PRIVATE_KEY=
PUSH_VAPID_SUBJECT=mailto:ops@cloak.local
PUSH_TOKEN_PROVIDER=none
PUSH_EXPO_ACCESS_TOKEN=
PUSH_TOKEN_PROVIDER_URL=
PUSH_TOKEN_PROVIDER_AUTH_HEADER=

# Optional: role addresses for local demos
CLOAK_OPERATOR_ADDRESS=
CLOAK_GUARDIAN_ADDRESS=
CLOAK_AGENT_SERVICE_ADDRESS=
CLOAK_TREASURY_ADDRESS=
CLOAK_PAYER_ADDRESS=

# Marketplace rollout flags
CLOAK_MARKETPLACE_ENABLED=true
CLOAK_MARKETPLACE_WEB_ENABLED=true
CLOAK_MARKETPLACE_MOBILE_ENABLED=true
CLOAK_MARKETPLACE_EXTENSION_ENABLED=true
CLOAK_MARKETPLACE_RUNS_OPERATOR_SCOPING=true
CLOAK_MARKETPLACE_REQUIRE_BILLABLE=true

# Delegation + spend authorization
ERC8004_DELEGATION_ENABLED=false
ERC8004_DELEGATION_MANAGER_ADDRESS=0x5af3396fc01b99562ce0559f8af973bf4ab0ee1ae6040ef773f96294e59da10
# ^ CloakDelegation contract deployed on Sepolia
# When set to a non-zero address, spend authorization will call
# consume_and_transfer on-chain to move real tokens via ERC-20 transferFrom.
ERC8004_SPEND_AUTH_REQUIRED=false

# Leaderboard
MARKETPLACE_LEADERBOARD_ENABLED=false
MARKETPLACE_LEADERBOARD_CACHE_TTL_MS=60000
